!function(H,y,n){"use strict";function a(){Rc.apply(this,arguments)}function J(){Rc.apply(this,arguments)}function u(){Rc.apply(this,arguments)}function d(){Rc.apply(this,arguments),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:"ZeroCurvature",endingEnd:"ZeroCurvature"}}function Z($,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");$.prototype=y.create(s&&s.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),s&&xi($,s)}function _(e){var R=y.prototype.toString.call(e);return"Array]"===R.substring(R.length-6)}function z(K,E,$,U,g,B){E=E||[],$=$||[],U=U||[];try{E.push(K);var I=Function.apply(0,E);return $[$.length]="return "+I,Function.apply(0,$).apply(0,U)}catch(w){return B&&B(w),g}}function m(G){var i={};return{get:function(a){if(i[a]!==n)return i[a];var O;switch(a){case"WEBGL_depth_texture":O=G.getExtension("WEBGL_depth_texture")||G.getExtension("MOZ_WEBGL_depth_texture")||G.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":O=G.getExtension("EXT_texture_filter_anisotropic")||G.getExtension("MOZ_EXT_texture_filter_anisotropic")||G.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":O=G.getExtension("WEBGL_compressed_texture_s3tc")||G.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||G.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":O=G.getExtension("WEBGL_compressed_texture_pvrtc")||G.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":O=G.getExtension("WEBGL_compressed_texture_etc1");break;default:O=G.getExtension(a)}return i[a]=O,O}}}function X(D,v,F){function r(){if(y!==n)return y;var E=v.get("EXT_texture_filter_anisotropic");return y=null!==E?D.getParameter(E.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function t(y){if("highp"===y){if(D.getShaderPrecisionFormat(35633,36338).precision>0&&D.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";y="mediump"}return"mediump"===y&&D.getShaderPrecisionFormat(35633,36337).precision>0&&D.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var y;F=F||{};var k="undefined"!=typeof WebGL2RenderingContext&&D instanceof WebGL2RenderingContext,h=F.precision!==n?F.precision:"highp",q=t(h);q!==h&&(console.warn("WebGL:",h,"not supported, using",q,"instead."),h=q);var u,B=F.logarithmicDepthBuffer===!0,e=D.getParameter(34930),p=D.getParameter(35660),M=D.getParameter(3379),E=D.getParameter(34076),j=D.getParameter(34921),w=D.getParameter(36347),X=D.getParameter(36348),l=D.getParameter(36349),T=p>0,g=k||!!v.get("OES_texture_float"),z=(k||!!v.get("OES_element_index_uint"))&&"undefined"!=typeof Uint32Array,$=T&&g,A=k?D.getParameter(36183):0,J=!1;return k?J=!0:(u=v.get("ANGLE_instanced_arrays"))&&(J=!0,D.vertexAttribDivisor=function(l,$){return u.vertexAttribDivisorANGLE(l,$)},D.drawElementsInstanced=function(I,B,r,L,p){return u.drawElementsInstancedANGLE(I,B,r,L,p)},D.drawArraysInstanced=function(E,N,f,b){return u.drawArraysInstancedANGLE(E,N,f,b)}),k?v.get("EXT_color_buffer_float"):(v.get("WEBGL_depth_texture"),v.get("OES_texture_half_float"),v.get("OES_texture_half_float_linear"),v.get("OES_standard_derivatives"),v.get("OES_vertex_array_object")),v.get("OES_texture_float_linear"),v.get("EXT_color_buffer_half_float"),v.get("WEBGL_multisampled_render_to_texture"),{getMaxAnisotropy:r,getMaxPrecision:t,precision:h,precisionstring:"precision "+h+" float;\nprecision "+h+" int;\n",logarithmicDepthBuffer:B,maxTextures:e,maxVertexTextures:p,maxTextureSize:M,maxCubemapSize:E,maxAttributes:j,maxVertexUniforms:w,maxVaryings:X,maxFragmentUniforms:l,vertexTextures:T,floatFragmentTextures:g,elementTypeUint:z,floatVertexTextures:$,maxSamples:A,instancedArray:J}}function t(l,V){return l.z!==V.z?V.z-l.z:l.id-V.id}var p="ht";if(!H[p]){!function(){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),H.performance&&H.performance.now||function(){var g=Date.now();H.performance||(H.performance={}),H.performance.now=function(){return Date.now()-g}}();for(var D=Date.now(),h=16,k=["ms","moz","webkit","o"],A=0;A<k.length&&!H.requestAnimationFrame;++A)H.requestAnimationFrame=H[k[A]+"RequestAnimationFrame"],H.cancelAnimationFrame=H[k[A]+"CancelAnimationFrame"]||H[k[A]+"CancelRequestAnimationFrame"];H.requestAnimationFrame||(H.requestAnimationFrame=function(b){var E=Date.now(),u=h+D-E;return 0>u&&(u=0),D=E,H.setTimeout(function(){D=Date.now(),b(performance.now())},u)}),H.cancelAnimationFrame||(H.cancelAnimationFrame=function(e){return H.clearTimeout(e)}),y.assign===n&&(y.assign=function(O){if(O===n||null===O)throw new TypeError("Cannot convert undefined or null to object");for(var K=y(O),N=1;N<arguments.length;N++){var G=arguments[N];if(G!==n&&null!==G)for(var v in G)y.prototype.hasOwnProperty.call(G,v)&&(K[v]=G[v])}return K}),H.btoa===n&&(H.btoa=function(d){for(var q,n,U=String(d),h=0,K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",I="";U.charAt(0|h)||(K="=",h%1);I+=K.charAt(63&q>>8-8*(h%1))){if(n=U.charCodeAt(h+=.75),n>255)throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");q=q<<8|n}return I})}();var U,P,T,x,F=H.location,k=F&&H.document,O=null,w=n,f=H[p]={},Y=H[p+"config"],Q=f.Default=Y&&Y.Default||{},A=f.Style=Y&&Y.Style||{},E=f.Attr=Y&&Y.Attr||{},c=function(){return!0},S=function(){return!1},W=function(B){return B},v=function(X){return!X},l=f.Color=Y&&Y.Color||{},K=f.IsGetter=Y&&Y.IsGetter||{};!function(){var l=!1;try{var M=y.defineProperty({},"passive",{get:function(){return l=!0,n}});F&&(T=U=F)&&H.addEventListener("test",M,M),F&&(x=P=F)&&H.removeEventListener("test",M,M)}catch(o){l=!1}Q.passiveSupported=l}();var I,h,M,q,D=Q.passiveSupported,i=Q.eventListenerOptionsFalse=D?{passive:!1,capture:!1}:!1,r=Q.eventListenerOptionsTrue=D?{passive:!1,capture:!0}:!0,e=function(u,Y,l,q){u.addEventListener(Y,l,q?r:i)},V=function(T,c,_,Z){T.removeEventListener(c,_,Z?r:i)},R=Math,j=R.round,B=R.floor,s=R.ceil,N=R.sqrt,C=R.max,g=R.min,o=R.abs,b=R.cos,$=R.acos,G=R.sin,L=R.pow,uj=R.asin,zp=R.exp,ei=R.PI,Qd=2*ei,th=ei/2,hl=R.tan,Tr=R.atan2,Ik=R.random,ji=R.log,Op=function(N,H,Q){return Math.max(H,Math.min(Q,N))},fl=L(2,1),Dd=!1,ob=H.parseInt||global.parseInt,pi="2022-12-15",vb=F&&(H.navigator?H.navigator.platform.indexOf("Win")>-1:!1),Hc=function(m){return m*m},yd=F&&H.setTimeout,rn=F&&H.clearTimeout,Fr=F&&(H.navigator?H.navigator.userAgent.toLowerCase():""),xo=function(D){return D.test(Fr)},Po=xo(/msie/),gr=xo(/msie/)||xo(/trident/),lp=xo(/msie 10/),Rb=xo(/edge/),Sp=xo(/firefox/),vq=xo(/mac/),fi=xo(/mscAndroid/),eb=Q.isTouchable===n?vb?!1:k?"ontouchend"in k:!1:Q.isTouchable,Pg="default",Jq="single",De="multiple",ll="front",Yh="back",wq="left",hb="right",pj="top",ri="bottom",je="center",fr="eye",ej="middle",em="east",Uj="west",Bf="north",Eb="none",hi="px",jr="absolute",Wq="border",Vh="triangle",Ro="rect",be="circle",nk="cylinder",En="shape",sf="items",mj="normal",Id="remove",cp="clear",ds="width",mg="height",ee="ingroup",vj="check",Dk="uncheck",Cq="radio",rf="radioOn",qs="radioOff",mh="points",$j="values",pl="series",nf="body",Ip="label",_n="label2",Ep="note",Gk="note2",jj="icons",Oe="labelFont",Li="labelColor",$k="labelSelectColor",Ng="note.expanded",Dh="note2.expanded",Kd="edge.expanded",Zo="edge.points",Oi="edge.type",Ni="rotation",Bc="hidden",Dg="visible",In="tuv",kk="no",Wn="draw",wf="select",Bo="currentSubGraph",ms="selectBackground",zk="autoMakeVisible",Ve="autoHideScrollBar",om="scrollBarColor",$i="scrollBarSize",Cf="indent",Sj="rowHeight",Rh="columnLineColor",fq="rowLineColor",bc="columnLineVisible",$r="rowLineVisible",Zd="visibleFunc",Nm="expandIcon",es="collapseIcon",Eq="checkMode",mb="sortFunc",Yl="editable",Un="batchEditable",wl="tristate",Tb="asc",yq="desc",tq="position",Ko="__",tm="elevation",uo="children",Od="translateX",Fb="translateY",Rf="dataModel",Wp="maxSize",rd="enc",$e="state",zh=rd+"o"+"de",Yd="shape3d",un="shape3d.resolution",ki="shape3d.visible",ad="shape3d.from.visible",ie="shape3d.to.visible",bo="shape3d.top.visible",ig="shape3d.bottom.visible",Tj="repeat.uv.length",fs="serializeValue",Er="deserializeValue",Iq="centerUniform",Nj="uniform",Uc="rgba(255,255,255,0)",Qk="style",Ur="attr",dp="field",Xj="string",Rq="boolean",zc="color",dn="int",Dq="number",Uh="ew-resize",Dn="ns-resize",gg="pointer",_o="auto",Hr="mousedown",hm="mousemove",km="mouseup",wr="mouseout",xl="touchstart",co="touchmove",ro="touchend",Ae="keydown",mm="keyup",lo=["DOMMouseScroll","mousewheel"],Zb=Sp?lo[0]:lo[1],eq=Ko+p+Ko+zh,np=[xl,co,ro],dm=[Hr,hm,km,wr,Zb,"wheel","mouseenter","mouseleave","mouseover"],kl=[Ae,mm,"keypress","input","contextmenu","compositionstart","compositionupdate","compositionend"],df=eb?np.concat(kl):dm.concat(kl),Do=O,yb=O,bn=O,eh=O,wc=!1,Th=km.length,Pf=function(){bn&&(rn(bn.timeout),bn=O)},as=function(){bn&&Qg(bn.e,bn.info)};H.addEventListener&&(w=F)&&(eb||(e(H,wr,function(){Pf()}),e(H,Zb,function(){Sk()})),e(H,mm,function(h){91===h.keyCode?Bd={}:delete Bd[h.keyCode]},!0),e(H,Ae,function(u){Bd[u.keyCode]=!0},!0),e(H,"blur",function(){Bd={}}));var Df,zi,Nc,pk=0,Vn=O,nl=function(M,o){var f=yd(function(){delete Vn[f],ck(Vn)&&(Vn=O),M()},o);return f},qk=O,xf=O,Il={},qq={},Be={},Cc={},Km={},lr={},Bd={},ti={},ce={},vf={},nj={},cg=/.json$/,Ql=/\.(json|bin|fbx|gltf|glb)$/,ao=/^data:image\/svg\+xml/,li={},Ec=[],ui={},nc=O,Mc=O,rc=function(){},As=function(){throw"Oops!"},qo=[0,0,0],rm={x:0,y:0,width:0,height:0},oq=O,bl=O,iq=O,lq=function(s,b){qq[s]=b,b&&b.comps&&!b.uuid&&(b.uuid=f.Math.generateUUID()),ol[s]&&(b.cacheRule=ol[s],delete ol[s])},dk=function(P){bl&&!P._72O&&(iq||(iq={}),iq[P._72O=jp()]=P),Df!=O?sn()<.05&&q&&!zi&&(aj=Pf):aj=vd},Zr=function(D,w,E,h){bl||(bl={});var K=bl[D];if(K){if(K.url===w)return;K.image?(K.image.onload=rc,K.image.onerror=rc):K.request&&(K.request.onload=rc,K.request.onerror=rc)}if(cg.test(w)){var n=new Wh;if(bl[D]={request:n,url:w},w=Q.beforeLoadURL(w,D),w.data){var J=Q.parse(w.data);zd(D,J),Q.handleImageLoaded(D,J)}else{n.onload=function(){if(200===this.status||0===this.status){var _=Q.parse(n.getResponseText());zd(D,_),Q.handleImageLoaded(D,_)}else zd(D,Q.handleUnfoundImage(D,w)||O)},n.onerror=function(){zd(D,Q.handleUnfoundImage(D,w)||O)};var z={};z.url=encodeURI(w),z.sync=!1,n.send(z)}}else{var J=new Image;bl[D]={image:J,url:w},/^data:image/.test(w)||(w=Q.beforeLoadURL(w,D),w=Q.appendTimeStamp(w),w=encodeURI(w),J.crossOrigin=Q.crossOrigin),Q.convertImageSrc(w,function(R){gr&&(w.toLowerCase().indexOf(".svg")>0||ao.test(w))?(k.body.appendChild(J),J.style.visibility="hidden",J.onload=function(){yd(function(){if(E&&(J.width=E),h&&(J.height=h),!J.width||!J.height){var H=J.width||J.clientWidth,p=J.height||J.clientHeight;J.width=H,J.height=p}Q.handleImageLoaded(D,J),zd(D,J),k.body.removeChild(J),J.style.visibility=""},180)},J.onerror=function(){zd(D,Q.handleUnfoundImage(D,w)||O),k.body.removeChild(J),J.style.visibility=""}):(J.onload=function(){E&&(J.width=E),h&&(J.height=h),Q.handleImageLoaded(D,J),zd(D,J)},J.onerror=function(){zd(D,Q.handleUnfoundImage(D,w)||O)}),J.src=R})}},zd=function(b,o){if(lq(b,o),delete bl[b],ck(bl)&&(bl=O,iq)){for(var t in iq){var Q=iq[t];Q._2O&&Q._2O[b]&&(Q.deleteTexture(b),delete Q._2O[b]),Q.invalidateAll&&Q.invalidateAll(n,"imageLoaded",b),Q.redraw&&Q.redraw(),Q.iv(),Q instanceof Ee&&Q.dm().each(function(g){g instanceof ih&&g.updateLayoutAttaches()}),delete Q._72O}iq=O}if(o&&iq)for(var t in iq){var Q=iq[t];Q.invalidateAll&&Q.invalidateAll(n,"imageLoading",b),Q.redraw&&Q.redraw(),Q.iv(),Q instanceof Ee&&Q.dm().each(function(f){f instanceof ih&&f.updateLayoutAttaches()})}},vm=function(){return ji=R&&Date,function(){return H.performance&&H.performance.now?H.performance.now():Date.now()}}(),im=function(e,D,g){return{width:e,height:D,comps:Se(g)?g:[g]}},dr=function(K,w){return{type:be,rect:[K,w,1.6,1.6],borderWidth:1,borderColor:tb,gradient:_l,gradientColor:ep,background:tb}},Hp=function(S,z){return im(16,16,{type:Vh,rect:[4,4,10,8],background:S,rotation:z?1.57:3.14})},ql=function(_,D){return im(16,16,{type:Vh,rect:[4,4,8,7],background:_,rotation:D?3.14:0})},Lg=function(U){var R=U._orientation;return"horizontal"===R||"h"===R},hc=function(T,g){var R=O||4,v=O||1,F=O||1;0>R?R=0:R>.25&&(R=.25);var n,s,Y,w,D,P,t,M=.5,f=[],N=[],W=[],l=Qd/F,o=Qd/v,x=M-R;for(s=0;v>=s;s++)for(w=-ei+s*o,P=b(w),D=G(w),n=0;F>=n;n++)Y=n*l,t=x+R*P,f.push(b(Y)*t,D*R,-G(Y)*t),(h=[T,g])&&N.push(n/F,1-s/v);for(s=0;v>s;s++){var U=s*(F+1),K=(s+1)*(F+1);for(n=0;F>n;n++)W.push(U+n,K+n+1,K+n,U+n,U+n+1,K+n+1),Np.z=ac.z=[T,g]}},Gb=function(Y){var Q=2,u=0;for(var i in Y)i.length===Q&&ob(i,32)===zf&&(nc=Mc=Y[i]),u++;return u},zj=function(F,R,b,I){return b||(b=eb?5:3,b/=I||1),{x:F-b,y:R-b,width:2*b,height:2*b}},sl=function(O,u,W,B){var p=this;u||(u=eb?5:3,W=20,B=20);var b={x:O,y:u,width:W,height:B};if(W)for(var z=0;W>z;z++)if(3===W)B=20;else for(var V=0;B>V;V++)p=H?H:W;var C={x:ei,y:2*ei};if(Ol(b,C)){var P=mg[0]+pj[0]+cp[1]+Tb.length,X=Bc[0]+wl[0]+cp[1]+nf.length;Mo[fr]=[p[P],p[X]],p[P]=ff[fr],p[X]=ff[Yd]}},wh=function(s){return(/ble$/.test(s)||/ed$/.test(s)||K[s]?"is":"get")+s.charAt(0).toUpperCase()+s.slice(1)},ff=function(S){return"set"+S.charAt(0).toUpperCase()+S.slice(1)},Vp=function($){return typeof $===Xj||$ instanceof String},fe=function(w){return typeof w===Dq},vd=function(g){return typeof g===Rq},Yo=function(x){return x&&"object"==typeof x},Le=function(P){return"function"==typeof P},Se=function(J){return J instanceof Array},Sb=function(v){return v instanceof td},Gg=function(y){return Se(y)?new td(y):y},Cl=function(v){return v instanceof ih},ld=function(s){return s instanceof ic},zg=function(d){return d instanceof So},Ah=function(R,t){if(!(R instanceof f.Group))return!1;if(!t)return R.isExpanded();var l=t.getDataUI(R);return l&&l._88I?!0:!1},Yr=function(A){return A instanceof $c},Oj=function(u){return u&&"IFRAME"===u.tagName},kd=function(i){return i==O||Q.numberDigits==O?i:parseFloat(i.toFixed(Q.numberDigits))},To=function(O,f,x){var I,S=f.length;if(x)for(var N=0;x>N;N++)if(3===S)O.push(f[0]),O.push(f[1]),O.push(f[2]);else for(I=0;S>I;I++)O.push(f[I]);else if(3===S)O.push(f[0]),O.push(f[1]),O.push(f[2]);else for(I=0;S>I;I++)O.push(f[I])},Ub=function(B){return B?Yo(B)?B:{}:!1},og=function(J,e,u){var o,C=Yo(J)?J:J.prototype;for(o in e)u&&o in C?C[o]===n&&console.warn("class",C,"has own undefined property",o,", keep exist!"):C[o]=e[o];return J},xq=function(Q,Z){if(!("wheelDelta"in Z)){var T=Z.deltaMode;Z.wheelDelta=T===Z.DOM_DELTA_PIXEL?-Z.deltaY:T===Z.DOM_DELTA_LINE?40*-Z.deltaY:120*-Z.deltaY}Q.handle_mousewheel(Z)},Vf=function(H){return String.fromCharCode(H)},Ao=function(Z,j){for(var F,w,n=0,I="",W="",u=Z.length;u>n;n++)F=Z[j?n:u-1-n],"%"===F?F="'":"a"===F?F='"':"]"===F&&(F="\\"),w=Vf(F.charCodeAt(0)-1),j?n%2?W+=w:I=w+I:I+=w;return j?W+I:I},Ig=function(m,f,u){m.superClass.constructor.apply(f,u)},ck=function(J){for(var A in J)return!1;return!0},$d=function(b){return b?0===b.length:!0},sg=function(){var j="";return[Dk[0],fq[0],Ip[0]].forEach(function(p){j+=ff(p).slice(3)}),Nj=k&&k[j]||Iq,function(K,w){return K===w?!0:K.x===w.x&&K.y===w.y&&K.width===w.width&&K.height===w.height}}(),Kn=function(r,x,F){return x>r?x:r>F?F:r},hd=function(K){return 0>K?-1:K>0?1:0},sn=function(){var h=1e4*G(Th++);return h-B(h)},Fl=function(h,T,y){return Vj(h.x,h.y,T.x,T.y,y.x,y.y,y.x+y.width,y.y,!0)||Vj(h.x,h.y,T.x,T.y,y.x+y.width,y.y,y.x+y.width,y.y+y.height,!0)||Vj(h.x,h.y,T.x,T.y,y.x+y.width,y.y+y.height,y.x,y.y+y.height,!0)||Vj(h.x,h.y,T.x,T.y,y.x,y.y+y.height,y.x,y.y,!0)},Vj=function($,G,e,u,X,q,l,n,t){var J=(l-X)*(G-q)-(n-q)*($-X),x=(n-q)*(e-$)-(l-X)*(u-G);if(0!==x){var P=J/x,A=$+P*(e-$),N=G+P*(u-G);return t&&(A+xk<g($,e)||A-xk>C($,e)||A+xk<g(X,l)||A-xk>C(X,l)||N+xk<g(G,u)||N-xk>C(G,u)||N+xk<g(q,n)||N-xk>C(q,n))?O:[A,N]}return O},ah=function(J,f,b){if(J&&b){var e=function(f,K,y){if(K){if(K===Qk)return f.getStyle(y);if(K===Ur)return f.getAttr(y);if(K===dp)return f[y]}else if(y=wh(y),f[y])return f[y]()};if("string"==typeof b&&"{"===b[0]&&"}"===b[b.length-1]){b=b.substr(1),b=b.substr(0,b.length-1);var z=b.split("."),o=e(J,f,z[0]);if(o!=O)for(var P=1,G=z.length;G>P;P++)if(o=o[z[P]],o==O)return o;return o}return e(J,f,b)}return n},oj=function(g,C,c,A){if(g&&c)if(C){if(C===Qk)g.s(c,A);else if(C===Ur)g.a(c,A);else if(C===dp){var r=g[c];g[c]=A,g.fp("f:"+c,r,A)}}else c=ff(c),g[c]&&g[c](A)},zr=function(g,N,X){var W=100*Math.max(g.width,g.height);return N&&"top"!==N?"bottom"===N?{x:g.x-W,y:g.y-W,width:g.width+2*W,height:g.height*X+W}:"right"===N?{x:g.x-W,y:g.y-W,width:g.width*X+W,height:g.height+2*W}:"left"===N?{x:g.x+g.width*(1-X),y:g.y-W,width:g.width*X+W,height:g.height+2*W}:void 0:{x:g.x-W,y:g.y+g.height*(1-X),width:g.width+2*W,height:g.height*X+W}},lf=function(L,m,j,Q,B){m&&Kl(L,j,Q,1,B,m)},Rg=function(x,T,H,R){var g=1-x;return g*g*T+2*x*g*H+x*x*R},Np=function(d,y,O,o,I){var w=1-d;return w*w*w*y+3*w*w*d*O+3*w*d*d*o+d*d*d*I},Jr=function(E){var Y,N,e,p,f=0;return E.forEach(function(c){if(Y=c.length,Y>0)for(N=c[0],p=1;Y>p;p++)e=c[p],f+=xh(N,e),N=e}),f},fc=function(g,t,m){var q="__"+g,s=function(T){("mousedown"===g||"mouseup"===g||"touchstart"===g||"touchend"===g)&&Tn(T),m.disabled||m["handle_"+g](T)};m[q]||(m[q]=s,e(t,g,s))},tk=function(a,x,n){var _="__"+a,L=n[_];L&&(V(x,a,L),delete n[_])},pc=function(E,A){var Y="_"+A;E[wh(A)]=function(){return this[Y]},E[ff(A)]=function(_){var x=this[Y];this[Y]=_,this.fp(A,x,_)}},Hn=function(h){return y.create(h)},Md=function(X){if(!X.element){var f,v;(f=X.textField)?v=Xf(Kt.TextField,f):(f=X.textArea)?v=Xf(Kt.TextArea,f):(f=X.button)?v=Xf(Kt.Button,f):(f=X.comboBox)?v=Xf(Kt.ComboBox,f):(f=X.checkBox)?v=Xf(Kt.CheckBox,f):(f=X.radioButton)?v=Xf(Kt.RadioButton,f):(f=X.slider)?v=Xf(Kt.Slider,f):(f=X.colorPicker)?v=Xf(Kt.ColorPicker,f):(f=X.image)&&(v=Xf(Kt.Image,f)),v&&(X.element=v)}},Kj=function(S,L){var o=Lj(S);return o._ht=L,o},Ud=H.top===H?H.top:H||H.document,Lj=function(A,F){var e=k.createElement("div"),m=e.style;return e.tabIndex=-1,e.onkeydown=tn,m.msTouchAction=Eb,Lc(e,O,0),eb&&m.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",O),A&&(m.overflow=Bc),F&&Vi(F,e),e},qb=function(E,g){var J=k.createElement("canvas"),t=J.style;return t.msTouchAction=Eb,g||(t.pointerEvents=Eb),Lc(J,O,0),E&&Vi(E,J),J},Lc=function(D,d,t){var _=D.style;_.border=d?d+" solid 1px":0,_.outline=0,_.padding=t?"0 "+t+hi:0,Xh(D)},Xh=function(k){var l=k.style;l.position=jr,l.margin=0,l.setProperty("box-sizing","border-box",O),l.setProperty("-moz-box-sizing","border-box",O)},Wk=function(x,N,F,D){D||(D=mr),N!=O&&(x.width=N*D,x.style.width=N+hi),F!=O&&(x.height=F*D,x.style.height=F+hi)},Vi=function(R,d,s){R.appendChild(d),s&&(d.style.position=jr)},Ib=function(u,O){O.split||(O+="");for(var z,d=O.split("\n"),q=0,n=d.length,i=0;n>i;i++){var A=Ye(u.font,d[i]);A.width>q&&(q=A.width),z||(z=A.height)}return u.ss=d,{width:q,height:z*n}},hn=function(){var H=k?qb().getContext("2d"):O;return function(X,k,z,T,O,u){var P=X.split("\n"),t=[],A=Ye(z,X).height;return T||(T=0),H.font=z,H.textBaseline=pj,P.forEach(function(g){for(var B=0,S=1,E=0,I=g.length;I>=S;S++){var f=g.substring(B,S),M=O?H.measureText(g[S]):Ye(z,f);O&&(E+=M.fontBoundingBoxDescent||A);var P=O?E+(f.length-1)*u:M.width+(f.length-1)*T;P>k&&(S-1===B?(t.push(g.substring(B,S)),B=S):(t.push(g.substring(B,S-1)),B=S-1,S--),E=0)}B!==S-1&&t.push(g.substring(B,S))}),t}}(),jb=function(V,u,m,z,r,B,E,n){V.font=m;var G=V.measureText(u);if(V.beginPath(),V.strokeStyle=z,V.lineWidth=1,"underline"===n){var I;I=G.actualBoundingBoxDescent?G.actualBoundingBoxDescent+1:Ye(m,u).size/2,V.moveTo(r-E/2,B+I),V.lineTo(r+E/2,B+I)}else if("strikethrough"===n)V.moveTo(r-E/2,B),V.lineTo(r+E/2,B);else if("overline"===n){var I;I=G.fontBoundingBoxAscent?G.fontBoundingBoxAscent:Ye(m,u).size/2,V.moveTo(r-E/2,B-I),V.lineTo(r+E/2,B-I)}V.stroke()},wn=function(q,x,E,d,J,n,R,H,I,F,V){var W=J.x,C=J.y,Y=J.width,t=J.height;if(x!=O){var M=Ye(E,x),f={};I&&(M.width+=(x.length-1)*I),f.y=R&&R!==ej?R===pj?C+M.height/2:C+t-M.height/2:C+t/2,f.x=n&&n!==wq?n===hb?W+Y-M.width/2:W+Y/2:W+M.width/2,Uo(q,x,f,E,d,I,F,V),H&&jb(q,x,E,d,f.x,f.y,M.width,H)}},Jj=function(V,v,i,P,w,T,W,c,O,L){var I=v.length;if(1===I){var b=v[0];if(Uo(V,b,i,P,w,c,O,L),W){var E=Ye(P,b);jb(V,b,P,w,i.x+i.width/2,i.y+i.height/2,E.width,W)}}else for(var R=i.height/I,$={x:i.x,y:i.y,width:i.width,height:R},S=0;S<v.length;S++){if(T)wn(V,v[S],P,w,$,T,null,W,c,O,L);else if(Uo(V,v[S],$,P,w,c,O,L),W){var E=Ye(P,v[S]);jb(V,v[S],P,w,$.x+$.width/2,$.y+$.height/2,E.width,W)}$.y+=R}},Uo=function(P,Q,t,p,w,g,T,i){P.font=p?p:Nb,P.fillStyle=w?w:Pn,P.textAlign=je,P.textBaseline=ej;var M,W;t?t.width===n?(M=t.x,W=t.y):(M=t.x+t.width/2,W=t.y+t.height/2):(M=0,W=0);var q=T&&i;if(q&&(P.strokeStyle=i,P.lineWidth=T),g){var B=Ye(p,Q);M-=(B.width+g*(Q.length-1))/2;for(var f=(Q+"").length,Y=0;f>Y;Y++){var y=Q[Y],S=P.measureText(y);q&&P.strokeText(y,j(M+(S.width+4)/2),j(W)),P.fillText(y,j(M+(S.width+4)/2),j(W)),M+=S.width+g}}else q&&P.strokeText(Q,j(M),j(W)),P.fillText(Q,j(M),j(W))},Lq=function(J){J.getView&&(J=J.getView());var A=J.offsetWidth||J.scrollWidth;return!A&&J.style.width&&(A=ob(J.style.width)),A},Kk=function(v){v.getView&&(v=v.getView());var O=v.offsetHeight||v.scrollHeight;return!O&&v.style.height&&(O=ob(v.style.height)),O},Go=function(z,j,p){var E=j[0].toUpperCase()+j.substring(1,j.length);z["webkit"+E]=p,z["moz"+E]=p,z["ms"+E]=p,z["o"+E]=p,z[j]=p},zs=function(){var Y=function(H){tn(H),H.stopPropagation()},a=function(F){tn(F)},y=[xl,Ae,Hr];return function(v,S){var h=Lj(),i=h.style;return i.backgroundColor=Q.disabledBackground,v&&(i.backgroundImage="url("+v+")",i.backgroundPosition="50% 50%",i.backgroundRepeat="no-repeat no-repeat"),S===!1?y.forEach(function(l){e(h,l,a)}):y.forEach(function(C){e(h,C,Y)}),h}}(),sc=function(W){var p=W.getContext("2d");return p.save(),p.lineCap=Bl,p.lineJoin=jq,p},aj=function(T,P,L,U){on(T,P*mr,L*mr),U*=mr,1!==U&&T.scale(U,U)},on=function(x,G,Z){x.translate(G,Z)},Hd=function(S,i){i&&S.rotate(i)},bp=function(y,u,P){u===n&&(u=1),P===n&&(P=1),(1!==u||1!==P)&&y.scale(u,P)},kc=!1,zp=Ud[vj[1]+Od[0]],Ce=function(i){var R=k.activeElement;if(k.activeElement!==i){R&&R.forceOnblur&&R.forceOnblur();for(var G=[],t=i.parentNode;t;)G.push([t,t.scrollLeft,t.scrollTop]),t=t.parentNode;if(!kc){var O=[],r=[];try{for(var o=H.parent,c=H;o!==c;)O.push([o,o.scrollX,o.scrollY]),c=o,o=H.parent;var D=H.frameElement;if(D)for(var $=D.parentNode;$;)r.push([$,$.scrollLeft,$.scrollTop]),$=$.parentNode}catch(n){kc=!0}}if(eb)i.focus();else{var m=se(),T=m.target;i.focus(),T.scrollLeft=m.left,T.scrollTop=m.top}G.forEach(function(j){j[0].scrollLeft=j[1],j[0].scrollTop=j[2]}),kc||(O.forEach(function(v){v[0].scrollTo(v[1],v[2])}),r.forEach(function(o){o[0].scrollLeft=o[1],o[0].scrollTop=o[2]}))}},Dj=function(P){return P&&P.getView?P.getView():P},oc=function(A,g,E,v,b){if(2===arguments.length&&(E=g.y,v=g.width,b=g.height,g=g.x),A.isSelfViewEvent)A.setX(g),A.setY(E),A.setWidth(v),A.setHeight(b);else{var h=Dj(A),L=h.style;if((k.fullscreenElement||k.mozFullScreenElement||k.webkitFullscreenElement||k.msFullscreenElement)!==h)g!==n&&(L.left=g+hi),E!==n&&(L.top=E+hi),v!==n&&(L.width=v+hi),b!==n&&(L.height=b+hi);else{var F=Q.getWindowInfo();L.left=(g=F.left)+hi,L.top=(E=F.top)+hi,L.width=(v=F.width)+hi,L.height=(b=F.height)+hi}A.endEditing&&!eb&&A.endEditing(),A.redraw&&A.redraw(),A.invalidate&&A.invalidate(),A.onLayouted&&A.onLayouted(g,E,v,b),A.fireViewEvent&&A.fireViewEvent("layout")}},Cr=function(r){if(!r.touches)return r;var M=r.touches[0];return M?M:r.changedTouches[0]},re=function(f){return Nd(f)?Cr(f).target:f.target},Nd=function(j){return j&&"object"==typeof j&&"touches"in j},er=function(R){Q.popup&&Q.popup.close(),Q.popup=R},Nh=O,_i=function(G){Nh.handleWindowTouchMove(G)},mp=function(n){Nh.handleWindowTouchEnd(n),V(H,co,_i),V(H,ro,mp),V(H,"blur",mp),Nh=O},Wg=function(h){Nh.handleWindowMouseMove(h)},ag=function(o){Nh.handleWindowMouseUp(o),V(H,hm,Wg),V(H,km,ag),V(H,"blur",ag),Nh=O},Oo=function(k){return 1===Nl(k)},sh=function(q,Y){return Y?Y.keyCode===q:Bd[q]},bj=function(z){return Pp(z)&&sh(65,z)},lm=function(c){return sh(46,c)||sh(8,c)},vi=function(g){return function(A){return A?A.keyCode===g:Bd[g]}},zf=573,Al=[65,83,68,87,37,38,39,40,32,13,27],pm=vi(Al[0]),xp=vi(Al[1]),Eo=vi(Al[2]),br=vi(Al[3]),nn=vi(Al[4]),Fq=vi(Al[5]),Fk=vi(Al[6]),No=vi(Al[7]),vr=vi(Al[8]),Fe=vi(Al[9]),af=vi(Al[10]),qm={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},dc=[2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,5,5,5,5,5,7,307],so=O,Of=O,rp=function(_,N){so||(so=qb()),Wk(so,_,N,1);var S=sc(so);return S.clearRect(0,0,_,N),S},Pm=function(r,h,S){if(h&&r){if("override"===S)return h;if("override_rgb"===S){var g=cs(h);return r=nm(r),"rgba("+j(255*g[0])+","+j(255*g[1])+","+j(255*g[2])+","+r[3]/255+")"}if("override_a"===S){var g=cs(h);return r=nm(r),"rgba("+r[0]+","+r[1]+","+r[2]+","+g[3]+")"}if("multiply_destinationAtop"===S){var $=cs(r),w=$[3],k=cs(h),C=k[3];if(0!==w&&0!==C){var G=$,E=G[3],W=$.map(function(D,r){return D*k[r]}),c=1-w,L=1-C,M=L*w+C;$=$.map(function(G,J){return(C*c*k[J]+C*w*W[J]+L*w*G)/M}),w=M,c=1-w,$=$.map(function(e,v){return G[v]*c+e*w}),w=E}return"rgba("+j(255*$[0])+","+j(255*$[1])+","+j(255*$[2])+","+w+")"}var g=cs(h);return r=nm(r),"rgba("+j(r[0]*g[0])+","+j(r[1]*g[1])+","+j(r[2]*g[2])+","+r[3]/255*g[3]+")"}return r},nm=function(){var J,o={};for(var t in H){var I=De.length;if(t.length==I&&t[0]===De[2]&&t[1]===Eb[1]&&t[4]===De[3]&&t[5]===De[4]&&t.substr(I-2)===Eb[1]+Eb[2]){var G=H[t];for(var u in G)u.length===I&&u.substr(0,3)===hb[3]+Id[3]+wf[0]&&u.substr(I-2)===De[0]+Ep[3]&&(lo=G[u])}}return function(G){var S,q=o[G];return q||(J||(J=qb(),Wk(J,1,1,1)),S=J.getContext("2d"),S.clearRect(0,0,1,1),Kl(S,0,0,1,1,G),q=S.getImageData(0,0,1,1).data,q=o[G]=[q[0],q[1],q[2],q[3]]),q}}(),cs=function(i){if(!Vp(i))return i;var z=nm(i);return z.CA||(z.CA=[z[0]/255,z[1]/255,z[2]/255,z[3]/255]),z.CA},Ui=function(_,K,E,W,r){var M=qb();M.width=E,M.height=W;var U=M.getContext("2d");U.drawImage(_,0,0,E,W);try{for(var c=U.getImageData(0,0,E,W),k=c.data,e=0,q=k.length;q>e;e+=4){var Y=k[e+0],m=k[e+1],L=k[e+2],u=k[e+3];"override_a"===r?k[e+3]=255*K[3]:"override_rgb"===r?(k[e+0]=255*K[0],k[e+1]=255*K[1],k[e+2]=255*K[2]):"override"===r?(k[e+0]=255*K[0],k[e+1]=255*K[1],k[e+2]=255*K[2],k[e+3]=255*K[3]):(k[e+0]=K[0]*Y,k[e+1]=K[1]*m,k[e+2]=K[2]*L,k[e+3]=K[3]*u)}U.putImageData(c,0,0)}catch(d){return _}return M},Mo=function(I,b,$){return b&&(b="miter"===$?8*b+20:b+1,I&&Zp(I,b)),b},Xr=function(b,D){if(D){var k=new He(D),x=b.width/2,z=b.height/2,g=pe([k.tf(-x,-z),k.tf(x,-z),k.tf(x,z),k.tf(-x,z)]);return g.x+=b.x+x,g.y+=b.y+z,g}return b},qi=function(s,D,y,$,v,E,R,I){$*=Math.PI/180;var r={x:Math.cos($)*(s.x-R.x)/2+Math.sin($)*(s.y-R.y)/2,y:-Math.sin($)*(s.x-R.x)/2+Math.cos($)*(s.y-R.y)/2},X=Math.pow(r.x,2)/Math.pow(D,2)+Math.pow(r.y,2)/Math.pow(y,2);X>1&&(D*=Math.sqrt(X),y*=Math.sqrt(X));var j=(v==E?-1:1)*Math.sqrt((Math.pow(D,2)*Math.pow(y,2)-Math.pow(D,2)*Math.pow(r.y,2)-Math.pow(y,2)*Math.pow(r.x,2))/(Math.pow(D,2)*Math.pow(r.y,2)+Math.pow(y,2)*Math.pow(r.x,2)));isNaN(j)&&(j=0);var O={x:j*D*r.y/y,y:j*-y*r.x/D},c={x:(s.x+R.x)/2+Math.cos($)*O.x-Math.sin($)*O.y,y:(s.y+R.y)/2+Math.sin($)*O.x+Math.cos($)*O.y},_=function(x){return Math.sqrt(Math.pow(x[0],2)+Math.pow(x[1],2))},Q=function(h,L){return(h[0]*L[0]+h[1]*L[1])/(_(h)*_(L))},o=function(U,l){return(U[0]*l[1]<U[1]*l[0]?-1:1)*Math.acos(Q(U,l))},f=o([1,0],[(r.x-O.x)/D,(r.y-O.y)/y]),C=[(r.x-O.x)/D,(r.y-O.y)/y],A=[(-r.x-O.x)/D,(-r.y-O.y)/y],W=o(C,A);Q(C,A)<=-1&&(W=Math.PI),Q(C,A)>=1&&(W=0);var Q=D>y?D:y,e=D>y?1:D/y,V=D>y?y/D:1;if(null==I){var T={x:0,y:0,width:0,height:0};Zp(T,Q),T.x*=e,T.width*=e,T.y*=V,T.height*=V;var w=new He($);return T=pe([w.tf(T.x,T.y),w.tf(T.x+T.width,T.y),w.tf(T.x+T.width,T.y+T.height),w.tf(T.x,T.y+T.height)]),T.x+=c.x,T.y+=c.y,[{x:T.x,y:T.y},{x:T.x+T.width,y:T.y},{x:T.x+T.width,y:T.y+T.height},{x:T.x,y:T.y+T.height}]}I.translate(c.x,c.y),I.rotate($),I.scale(e,V),I.arc(0,0,Q,f,f+W,1-E),I.scale(1/e,1/V),I.rotate(-$),I.translate(-c.x,-c.y)},fg=function(q,c){q&&q.beginPath();for(var h,v,H,I=[],f=function(G){for(var p,R=/(\-{0,1}[\d\.]+)/gi,w=[];p=R.exec(G);)w.push(parseFloat(p[0]));return w},N=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,z={x:0,y:0};h=N.exec(c);){var G=h[0],b=G.substr(0,1);if("M"===b||"m"===b){for(var d=f(G),F=0;F<d.length;F+=2){var m=d[F],Y=d[F+1];"m"===b&&(m+=z.x,Y+=z.y),q&&q.moveTo(m,Y),I.push({x:m,y:Y}),z.x=m,z.y=Y}v=H=null}else if("H"===b||"h"===b){for(var d=f(G),F=0;F<d.length;F+=1){var m=d[F];"h"===b&&(m+=z.x),q&&q.lineTo(m,z.y),I.push({x:m,y:z.y}),z.x=m}v=H=null}else if("C"===b||"c"===b){for(var d=f(G),F=0;F<d.length;F+=6){var E=d[F],P=d[F+1],$=d[F+2],D=d[F+3],m=d[F+4],Y=d[F+5];"c"===b&&(E+=z.x,P+=z.y,$+=z.x,D+=z.y,m+=z.x,Y+=z.y),q&&q.bezierCurveTo(E,P,$,D,m,Y),I.push({x:E,y:P}),I.push({x:$,y:D}),I.push({x:m,y:Y}),z.x=m,z.y=Y}v=[E,P,$,D,m,Y],H=null}else if("S"===b||"s"===b){for(var d=f(G),F=0;F<d.length;F+=4){var E,P;v?(E=2*v[4]-v[2],P=2*v[5]-v[3]):(E=z.x,P=z.y);var $=d[F],D=d[F+1],m=d[F+2],Y=d[F+3];"s"===b&&($+=z.x,D+=z.y,m+=z.x,Y+=z.y),q&&q.bezierCurveTo(E,P,$,D,m,Y),I.push({x:E,y:P}),I.push({x:$,y:D}),I.push({x:m,y:Y}),z.x=m,z.y=Y}v=[E,P,$,D,m,Y],H=null}else if("Q"===b||"q"===b){for(var d=f(G),F=0;F<d.length;F+=4){var E=d[F],P=d[F+1],m=d[F+2],Y=d[F+3];"q"===b&&(E+=z.x,P+=z.y,m+=z.x,Y+=z.y),q&&q.quadraticCurveTo(E,P,m,Y),I.push({x:E,y:P}),I.push({x:m,y:Y}),z.x=m,z.y=Y}v=null,H=[E,P,m,Y]}else if("T"===b||"t"===b){for(var d=f(G),F=0;F<d.length;F+=2){var E,P;H?(E=2*H[2]-H[0],P=2*H[3]-H[1]):(E=z.x,P=z.y);var m=d[F],Y=d[F+1];"t"===b&&(m+=z.x,Y+=z.y),q&&q.quadraticCurveTo(E,P,m,Y),I.push({x:E,y:P}),I.push({x:m,y:Y}),z.x=m,z.y=Y}v=null,H=[E,P,m,Y]}else if("V"===b||"v"===b){for(var d=f(G),F=0;F<d.length;F+=1){var Y=d[F];"v"===b&&(Y+=z.y),q&&q.lineTo(z.x,Y),I.push({x:z.x,y:Y}),z.y=Y}v=H=null}else if("L"===b||"l"===b){for(var d=f(G),F=0;F<d.length;F+=2){var m=d[F],Y=d[F+1];"l"===b&&(m+=z.x,Y+=z.y),q&&q.lineTo(m,Y),I.push({x:m,y:Y}),z.x=m,z.y=Y}v=H=null}else if("A"===b||"a"===b){for(var d=f(G),F=0;F<d.length;F+=7){var W=d[F],l=d[F+1],t=d[F+2],j=d[F+3],i=d[F+4],m=d[F+5],Y=d[F+6];"a"===b&&(m+=z.x,Y+=z.y);var y=qi(z,W,l,t,j,i,{x:m,y:Y},q);y&&(I=I.concat(y)),z.x=m,z.y=Y}v=H=null}var M=G.substr(G.length-1);("z"===M||"Z"===M)&&q&&q.closePath()}return I},Hj=function(z,G,i,I,g){var h,_=G[0];if(z.save(),Se(G))if(_&&1===_.length){var o,E="L"===G[0],l=G.length;E?(z.transform(G[5],G[6],G[7],G[8],G[9],G[10]),h=z.createLinearGradient(G[1],G[2],G[3],G[4]),o=11):(z.transform(G[7],G[8],G[9],G[10],G[11],G[12]),h=z.createRadialGradient(G[1],G[2],G[3],G[4],G[5],G[6]),o=13);for(var f=z.compGray;l>o;){var J=G[o+1];J=i(J),h.addColorStop(G[o],f?Q.toGrayColor(J):J),o+=2}}else{var o,E="linear"===_,B=g.x,r=g.y,d=g.width,x=g.height,l=G.length,f=z.compGray;if(E)h=z.createLinearGradient(B+d*G[1],r+x*G[2],B+d*G[3],r+x*G[4]),o=5;else{var V=Math.min(d,x),s=G[1]*d+B,q=G[2]*x+r,U=G[3]*V;if(Vp(G[5]))h=z.createRadialGradient(s,q,0,s,q,U),o=4;else{z.transform(G[7],G[8],G[9],G[10],G[11]+s,G[12]+q);var N=G[4]*d+B-s,w=G[5]*x+r-q,D=G[6]*V;h=z.createRadialGradient(0,0,U,N,w,D),o=13}}for(;l>o;){var J=G[o+1];J=i(J),h.addColorStop(G[o],f?Q.toGrayColor(J):J),o+=2}}else h=G;return I?z.strokeStyle=h:z.fillStyle=h,h},ac=function(){function s(Z,k){var u=Z.length,P=Z[0];if(Vp(Z)||P&&1!==P.length)return Z;for(var O=new Array(u),v=0;u>v;v++)O[v]=Z[v];var F,J,R,l,n,d,G,e,p,M,q,o,C,t="L"===O[0];return F=t?5:7,J=O[F],R=O[F+1],l=O[F+2],n=O[F+3],d=O[F+4],G=O[F+5],e=k[0],p=k[1],M=k[2],q=k[3],o=k[4],C=k[5],O[F]=e*J+M*R,O[F+1]=p*J+q*R,O[F+2]=e*l+M*n,O[F+3]=p*l+q*n,O[F+4]=e*d+M*G+o,O[F+5]=p*d+q*G+C,O}return function(Q,B){var Z;(Z=Q.s("shape.gradient.pack"))&&Q.s("shape.gradient.pack",s(Z,B)),(Z=Q.s("shape.border.gradient.pack"))&&Q.s("shape.border.gradient.pack",s(Z,B))}}(),pg=function(I,u,O,_){var X=!1;if(I.beginPath?I.beginPath():X=!0,Sb(u)&&(u=u._as),Sb(O)&&(O=O._as),O&&O.length){for(var q,L,M,C,h=0,N=0,W=O.length;W>N;N++)q=O[N],1===q?(L=u[h++],I.moveTo(L.x,X?-L.y:L.y)):2===q?(L=u[h++],I.lineTo(L.x,X?-L.y:L.y)):3===q?(L=u[h++],M=u[h++],I.quadraticCurveTo(L.x,X?-L.y:L.y,M.x,X?-M.y:M.y)):4===q?(L=u[h++],M=u[h++],C=u[h++],I.bezierCurveTo(L.x,X?-L.y:L.y,M.x,X?-M.y:M.y,C.x,X?-C.y:C.y)):5===q&&I.closePath();
_&&5!==q&&I.closePath()}else{var g,z,V,m=u.length;if(m>0){for(g=u[0],I.moveTo(g.x,X?-g.y:g.y),z=1;m>z;z++)V=u[z],I.lineTo(V.x,X?-V.y:V.y);_&&I.closePath()}}},yp=function(S,Z,l,E){if(Sb(S)&&(S=S._as),Sb(Z)&&(Z=Z._as),Z&&Z.length){l=l||ae;for(var b,m,M,U,C,k,e,r,g=[],W=O,w=0,D=0,H=Z.length;H>D;D++)if(b=Z[D],1===b)g.push(W=[]),W.push(S[w++]);else if(2===b)W.push(S[w++]);else if(3===b){for(m=W[W.length-1],M=S[w++],U=S[w++],k=1;l>k;k++)e=Rg(k/l,m.x,M.x,U.x),r=Rg(k/l,m.y,M.y,U.y),W.push({x:e,y:r,b:!0});W.push(U)}else if(4===b){for(m=W[W.length-1],M=S[w++],U=S[w++],C=S[w++],k=1;l>k;k++)e=Np(k/l,m.x,M.x,U.x,C.x),r=Np(k/l,m.y,M.y,U.y,C.y),W.push({x:e,y:r,b:!0});W.push(C)}else 5===b&&W.push(W[0]);return E&&5!==b&&W&&W.length>2&&W.push(W[0]),g}return E&&S.length>2&&(S=S.slice(),S.push(S[0])),S?[S]:[]},db=function(N,e,x,L,B,H){var o,W,R,E=nm(e),b=L,l=E[0],k=E[1],M=E[2];if(x){var $=nm(x);o=$[0]-l,W=$[1]-k,R=$[2]-M}else o=255-l,W=255-k,R=255-M;for(H||(H=L>10?1:.5,H=1>B?g(H/B,2):H),N.save(),N.shadowOffsetX=0,N.shadowOffsetY=0,N.shadowBlur=0,N.shadowColor=0;(L-=H)>0;){var u=1-L/b,Q=l+o*u,C=k+W*u,J=M+R*u;Q=g(s(Q),255),C=g(s(C),255),J=g(s(J),255),N.strokeStyle="rgb("+Q+","+C+","+J+")",N.lineWidth=L,N.stroke()}N.restore()},tg=function(){if(wc&&w){var T=w+""||Tb;fi=T.indexOf(Bc.substr(0,2))>0&&T.indexOf(pj+pj.substr(1,1))>1?!0:!1}var q={};return function(I,K){var y=I+"-"+K,N=q[y];if(N)return N;var Q,r,w,X=nm(I);return 0>K?(K=(100+K)/100,Q=s(X[0]*K),r=s(X[1]*K),w=s(X[2]*K)):(K/=100,Q=X[0],r=X[1],w=X[2],Q+=(255-Q)*K,r+=(255-r)*K,w+=(255-w)*K,Q=g(s(Q),255),r=g(s(r),255),w=g(s(w),255)),q[y]="rgb("+Q+","+r+","+w+")"}}(),Kl=function(W,Z,B,F,i,e){e&&(W.fillStyle=e),W.beginPath(),W.rect(Z,B,F,i),W.fill()},Jo=function(p,A,Y,U,H,r,y){p.beginPath(),ci[A](p,Y.x,Y.y,Y.width,Y.height,U,H,r,y)},Uq=function(v,o,E,D,T){var d=ci[E];v.fillStyle=d?d(v,o,D?D:ep,T.x,T.y,T.width,T.height):o},xg=function(F,M,b,C,W,A){F.fillStyle=$l(F,M,b,C,W,A)},Eh=function(i,X,d,U,M,Q){i.strokeStyle=$l(i,X,d,U,M,Q)},$l=function(e,t,D,y,q,k){var r;try{if(!t.tagName&&t.comps){t._cacheImage_||(t._cacheImage_={});var w;w="override"===y?"colors_override":"override_rgb"===y?"colors_override_rgb":"override_a"===y?"colors_override_a":"colors",t._cacheImage_[w]||(t._cacheImage_[w]={__count__:0});var K=t._cacheImage_[w][D];K||(t._cacheImage_[w].__count__>Q.imageCacheThreshold&&(t._cacheImage_[w]={__count__:0}),K=f.Default.toCanvas(t,Yj(t),kp(t),null,q,k,D,null,y),t._cacheImage_[w][D]=K,t._cacheImage_[w].__count__++),t=K}r=e.createPattern(t,"repeat")}catch(v){r="black"}return r},xc=function(j){var d,g,Z=[],e=0,_=j.length;for(d=0;65>d;d++)Z[d]=d;for(d=0;65>d;d++)e=(e+Z[d]+j.charCodeAt(d%_))%65,g=Z[d],Z[d]=Z[e],Z[e]=g;for(d=0;65>d;d++)Z[d]=gl[Z[d]];return Z.join("")},Fh=function(v){for(var P=8+Tc.randomInt(8),w=gl[8*Tc.randomInt(8)+(P-8)],m="",T=0;P>T;T++)m+=gl[Tc.randomInt(64)];var X=xc(m+p+Ko+zh);return w+m+Hi.encode(v,X)},Af=function(G){var t=G[0],o=gl.indexOf(t);if(0>o)return"";o=8+(7&o);var R=G.slice(1,1+o),B=xc(R+p+Ko+zh);return Hi.decode(G,B,1+o)},Ti=function(i,x,I,m,T,k,D){i.save(),i.translate(x,I),i.scale(1,D/k),i.arc(0,0,k,m,T),i.restore()},wi=function(J,$,y,u,Z,k,X,I){var x,K,D,E,r,W,H,m,M,S,P;if(o(Z)>2*ei&&(Z=2*ei),r=s(o(Z)/(ei/4)),x=Z/r,K=-x,D=-u,r>0){W=$+b(u)*k,H=y+G(-u)*X,I?J.lineTo(W,H):J.moveTo(W,H);for(var c=0;r>c;c++)D+=K,E=D-K/2,m=$+b(D)*k,M=y+G(D)*X,S=$+b(E)*(k/b(K/2)),P=y+G(E)*(X/b(K/2)),J.quadraticCurveTo(S,P,m,M)}},no=function(p,A,D,B,d,S,O,l,C){6===arguments.length&&(Se(S)?(l=S[1],C=S[2],O=S[3],S=S[0]):(O=S,l=S,C=S));var c=A+B,z=D+d,v=d>B?2*B:2*d;return S=v>S?S:v,O=v>O?O:v,l=v>l?l:v,C=v>C?C:v,p.roundRect?(p.roundRect(A,D,B,d,[S,O,C,l]),void 0):(p.moveTo(A+B/2,D),p.arcTo(c,D,c,z,O),p.arcTo(c,z,A,z,C),p.arcTo(A,z,A,D,l),p.arcTo(A,D,c,D,S),p.lineTo(A+B/2,D),void 0)},Ed=function(X,d,O,e,u,v,w){d&&(O=j(O),e=j(e),w||(w=1),X.fillStyle=d,X.beginPath(),X.rect(O,e,w,v),X.rect(O,e,u,w),v-w>0&&X.rect(O,e+v-w,u,w),u-w>0&&X.rect(O+u-w,e,w,v),X.fill())},Wi=function(Y,R,B,A){var f=A.x,N=A.y,X=A.width,j=A.height;if(!(!R||!B||0>=X||0>=j)){var l,O=Kf(R),K=Mm(R),Q=B>0;1===B||-1===B?(Y.fillStyle=Q?O:K,Y.beginPath(),Y.rect(f,N,1,j),Y.rect(f,N,X,1),Y.fill(),Y.fillStyle=Q?K:O,Y.beginPath(),Y.rect(f,N+j-1,X,1),Y.rect(f+X-1,N,1,j),Y.fill()):(B=g(o(B),g(X/2,j/2)),l=Y.createLinearGradient(f,N,f+B,N),l.addColorStop(0,Q?O:K),l.addColorStop(1,R),Y.fillStyle=l,Y.beginPath(),Y.moveTo(f,N),Y.lineTo(f+B,N+B),Y.lineTo(f+B,N+j-B),Y.lineTo(f,N+j),Y.lineTo(f,N),Y.fill(),l=Y.createLinearGradient(f,N,f,N+B),l.addColorStop(0,Q?O:K),l.addColorStop(1,R),Y.fillStyle=l,Y.beginPath(),Y.moveTo(f,N),Y.lineTo(f+B,N+B),Y.lineTo(f+X-B,N+B),Y.lineTo(f+X,N),Y.lineTo(f,N),Y.fill(),l=Y.createLinearGradient(f,N+j,f,N+j-B),l.addColorStop(0,Q?K:O),l.addColorStop(1,R),Y.fillStyle=l,Y.beginPath(),Y.moveTo(f,N+j),Y.lineTo(f+B,N+j-B),Y.lineTo(f+X-B,N+j-B),Y.lineTo(f+X,N+j),Y.lineTo(f,N+j),Y.fill(),l=Y.createLinearGradient(f+X,N,f+X-B,N),l.addColorStop(0,Q?K:O),l.addColorStop(1,R),Y.fillStyle=l,Y.beginPath(),Y.moveTo(f+X,N),Y.lineTo(f+X-B,N+B),Y.lineTo(f+X-B,N+j-B),Y.lineTo(f+X,N+j),Y.lineTo(f+X,N),Y.fill())}},Ff=function(q,A,m,X,Y,b,f){var M=q.createLinearGradient(X,Y,b,f);return M.addColorStop(0,m),M.addColorStop(1,A),M},jc=function(l,h,z,k,G,$,U){var Z=l.createLinearGradient(k,G,$,U);return Z.addColorStop(0,h),Z.addColorStop(.5,z),Z.addColorStop(1,h),Z},bs=function(y,j,r,F,D,x,G){var X=y.createLinearGradient(F,D,x,G);return X.addColorStop(0,j),X.addColorStop(1/3,r),X.addColorStop(2/3,j),X.addColorStop(1,r),X},yo=function(F,n,i,M,k,Q,d,I,K){var B=F.createRadialGradient(M+Q*I,k+d*K,g(Q,d)/24,M+Q/2,k+d/2,C(Q,d)/2);return B.addColorStop(0,i),B.addColorStop(1,n),B},Jg=[0,-1,.22451398828979272,-.30901699437494734,.9510565162951535,-.30901699437494745,.3632712640026804,.11803398874989468,.5877852522924731,.8090169943749473,-1.1102230246251565e-16,.38196601125010515,-.587785252292473,.8090169943749475,-.3632712640026805,.1180339887498949,-.9510565162951536,-.3090169943749473,-.22451398828979285,-.30901699437494734],ci={polygon:function(x,S,Y,T,q,j,v,Q){(j==O||3>j)&&(j=6),v==O&&(v=0),Q==O&&(Q=!0);var l,h=g(T,q),I=h/2,p=new gd(S+T/2,Y+q/2),E=new gd,A=0,y=2*ei/j,V=new gd(I,I);if(Q===!1&&V.multiply({x:T/h,y:q/h}),0===v)for(l=0;j>l;l++)E.set(b(A),G(A)).multiply(V).add(p),0===l?x.moveTo(E.x,E.y):x.lineTo(E.x,E.y),A+=y;else{var W=[];for(l=0;2>l;l++)W.push(new gd(b(A),G(A)).multiply(V).add(p)),A+=y;var n=W.shift(),d=W[0],U=new gd(b(A),G(A)).multiply(V).add(p),f=n.clone().sub(d),M=U.clone().sub(d),o=f.clone().normalize().dot(M.clone().normalize()),w=Math.sqrt((1-o)/(1+o)),u=v/w;for(f.setLength(u).add(d),x.moveTo(f.x,f.y),l=0;j>l;l++)W.push(new gd(b(A),G(A)).multiply(V).add(p)),A+=y,n=W.shift(),d=W[0],x.arcTo(n.x,n.y,d.x,d.y,v)}x.closePath()},arc:function(s,B,X,R,A,E,D,P,T){E==O&&(E=ei),D==O&&(D=Qd),P==O&&(P=!0);var v=B+R/2,W=X+A/2;P&&s.moveTo(v,W),T?Ti(s,v,W,E,D,R/2,A/2):s.arc(v,W,g(R,A)/2,E,D),P&&s.closePath()},rect:function(f,P,H,S,o){f.rect(P,H,S,o)},circle:function(F,D,M,R,G){F.arc(D+R/2,M+G/2,g(R,G)/2,0,Qd,!0)},oval:function(O,F,w,S,z){Ti(O,F+S/2,w+z/2,0,Qd,S/2,z/2)},roundRect:function(x,a,n,B,A,d){d==O&&(d=g(g(B,A)/4,8)),no(x,a,n,B,A,d),x.closePath()},star:function(e,P,r,W,u){var F=2*W,t=2*u,Y=P+W/2,T=r+u/2;e.moveTo(Y-F/4,T-t/12),e.lineTo(P+.306*W,r+.579*u),e.lineTo(Y-F/6,T+t/4),e.lineTo(P+W/2,r+.733*u),e.lineTo(Y+F/6,T+t/4),e.lineTo(P+.693*W,r+.579*u),e.lineTo(Y+F/4,T-t/12),e.lineTo(P+.611*W,r+.332*u),e.lineTo(Y+0,T-t/4),e.lineTo(P+.388*W,r+.332*u),e.closePath()},pentagram:function(H,j,O,k,h){var Z=.5*h,F=j+.5*k,m=O+Z,W=.5257311121191336*k;W>Z&&(W=Z);var z=Jg,R=0;for(H.moveTo(F+W*z[R++],m+W*z[R++]);20>R;)H.lineTo(F+W*z[R++],m+W*z[R++]);H.closePath()},triangle:function(A,S,O,r,w){A.moveTo(S+r/2,O),A.lineTo(S+r,O+w),A.lineTo(S,O+w),A.closePath()},hexagon:function(D,T,U,Y,$){D.moveTo(T,U+$/2),D.lineTo(T+Y/4,U+$),D.lineTo(T+3*Y/4,+U+$),D.lineTo(T+Y,U+$/2),D.lineTo(T+3*Y/4,U),D.lineTo(T+Y/4,U),D.closePath()},pentagon:function(o,Z,t,a,O){var B=2*a,w=2*O,r=Z+a/2,$=t+O/2;o.moveTo(r-B/4,$-w/12),o.lineTo(r-B/6,$+w/4),o.lineTo(r+B/6,$+w/4),o.lineTo(r+B/4,$-w/12),o.lineTo(r+0,$-w/4),o.closePath()},diamond:function(D,y,K,e,v){D.moveTo(y+e/2,K),D.lineTo(y,K+v/2),D.lineTo(y+e/2,K+v),D.lineTo(y+e,K+v/2),D.closePath()},rightTriangle:function(C,M,u,a,l){C.moveTo(M,u),C.lineTo(M+a,u+l),C.lineTo(M,u+l),C.closePath()},parallelogram:function(n,g,y,x,c){var h=x/4;n.moveTo(g+h,y),n.lineTo(g+x,y),n.lineTo(g+x-h,y+c),n.lineTo(g,y+c),n.closePath()},trapezoid:function(O,m,c,j,z){var l=j/4;O.moveTo(m+l,c),O.lineTo(m+j-l,c),O.lineTo(m+j,c+z),O.lineTo(m,c+z),O.closePath()},"linear.southwest":function(d,u,Z,Q,$,q,n){return Ff(d,u,Z,Q,$+n,Q+q,$)},"linear.southeast":function(v,g,p,R,q,c,Z){return Ff(v,g,p,R+c,q+Z,R,q)},"linear.northwest":function(r,X,V,B,F,f,o){return Ff(r,X,V,B,F,B+f,F+o)},"linear.northeast":function(I,k,Y,a,q,s,o){return Ff(I,k,Y,a+s,q,a,q+o)},"linear.north":function(i,L,g,f,k,K,o){return Ff(i,L,g,f,k,f,k+o)},"linear.south":function(B,t,u,m,q,X,o){return Ff(B,t,u,m,q+o,m,q)},"linear.west":function(t,v,W,M,F,S){return Ff(t,v,W,M,F,M+S,F)},"linear.east":function(l,s,C,J,m,N){return Ff(l,s,C,J+N,m,J,m)},"radial.center":function(I,W,Q,K,B,j,l){return yo(I,W,Q,K,B,j,l,.5,.5)},"radial.southwest":function(l,P,d,z,j,S,n){return yo(l,P,d,z,j,S,n,.25,.75)},"radial.southeast":function(n,l,D,U,e,B,N){return yo(n,l,D,U,e,B,N,.75,.75)},"radial.northwest":function(G,O,z,J,P,K,n){return yo(G,O,z,J,P,K,n,.25,.25)},"radial.northeast":function(I,z,K,R,p,o,x){return yo(I,z,K,R,p,o,x,.75,.25)},"radial.north":function(L,J,R,c,O,j,F){return yo(L,J,R,c,O,j,F,.5,.25)},"radial.south":function(D,g,o,C,M,G,N){return yo(D,g,o,C,M,G,N,.5,.75)},"radial.west":function(G,W,X,k,B,Q,q){return yo(G,W,X,k,B,Q,q,.25,.5)},"radial.east":function(o,S,J,v,F,Y,d){return yo(o,S,J,v,F,Y,d,.75,.5)},"spread.horizontal":function(z,E,x,X,e,H){return jc(z,E,x,X,e,X+H,e)},"spread.vertical":function(M,I,D,L,o,E,p){return jc(M,I,D,L,o,L,o+p)},"spread.diagonal":function(G,B,w,M,x,O,q){return jc(G,B,w,M+O,x,M,x+q)},"spread.antidiagonal":function(C,X,f,h,S,R,P){return jc(C,X,f,h,S,h+R,S+P)},"spread.north":function(O,K,z,f,$,E,L){return bs(O,K,z,f,$-L/4,f,$+L+L/4)},"spread.south":function(G,x,B,a,y,C,N){return bs(G,B,x,a,y-N/4,a,y+N+N/4)},"spread.west":function(T,o,U,p,d,u){return bs(T,o,U,p-u/4,d,p+u+u/4,d)},"spread.east":function(h,E,T,I,W,x){return bs(h,T,E,I-x/4,W,I+x+x/4,W)}},rr=function(K,H,N){return new He(K).tf(H,N)},lg=function(M){var b=M.touches[0],f=M.touches[1],V=b.clientX,g=b.clientY,o=f.clientX,h=f.clientY;return N((V-o)*(V-o)+(g-h)*(g-h))},hq=function($){var T=$.touches[0],q=$.touches[1],j=T.clientX,u=T.clientY,d=q.clientX,R=q.clientY;return{x:(j+d)/2,y:(u+R)/2}},mn=(function(){for(var o=0,W=yq.split(""),V=0;V<W.length;V++)o=10*ob(W[V])+o;return hc(H[zf.toString(8*V)+Ip.substr(V)+3],H[zf.toString(8*V)+Ip.substr(V)+4]),o}(),function(T,N,q){for(var b=0;b<q.size();b++){var K=q.get(b);T.co(K)&&N.add(K)}for(b=0;b<q.size();b++)K=q.get(b),mn(T,N,K._children)}),tp=function(h,w,u){for(var k=0;k<u.size();k++){var O=u.get(u.size()-1-k);h.co(O)&&w.add(O)}for(k=0;k<u.size();k++)O=u.get(k),tp(h,w,O._children)},jn=function(u,R,j){for(var M=!1,D=0;D<j.size();D++){var q=j.get(D);u.co(q)?M&&R.add(q):M=1}for(D=0;D<j.size();D++)q=j.get(D),jn(u,R,q._children)},El=function(O,d,Z){for(var c=!1,y=0;y<Z.size();y++){var C=Z.get(Z.size()-1-y);O.co(C)?c&&d.add(C):c=!0}for(y=0;y<Z.size();y++)C=Z.get(y),El(O,d,C._children)},Cd=Q.moveDatas=function(U,k,I,S){var c=S==O;if(0!==k||0!==I||!c&&0!==S){var V=!0,v=[];if(U.forEach(function(G){V&&(G._69O||zg(G)||Yr(G))&&(V=!1)}),V)v=U;else{var g={},u={};U.forEach(function($){g[$._id]=!0});var i={},B=function(K){var c=K._id;return g[c]?(v.push(K),i[c]=!0):i[c]=!1},Y=function(F){var V=F._id;if(u[V])return B(F);var O=i[V];if(O!==n)return O;var X=F._parent;if(X&&(Yr(X)||zg(X))&&Y(X))return i[V]=!0;var p=F._host;return p&&(u[V]=V,O=Y(p),u[V]=n,O)?i[V]=!0:B(F)};U.forEach(function(O){Y(O)})}v.forEach(function(n){if(Cl(n))c?n.translate(k,I):n.translate3d(k,I,S);else{var e=n.s(Zo);if(!e||e.isEmpty())return;var o=new td;e.each(function(P){P=rj(P),c?(P.x+=k,P.y+=I):(P.x+=k,P.y+=S,P.e==O?P.e=I:P.e+=I),o.add(P)}),n.s(Zo,o)}})}},Vo=function(){function v(x,D){return D===x.substring(0,D.length)?!0:!1}function P(B){return parseFloat(B)||0}function E(C,q){if(q==n&&(q=new pd),v(C,"matrix3d")){var c=C.substring(9,C.length-1).split(",");c=c.map(P),q.fromArray(c)}else if(v(C,"matrix")){var c=C.substring(7,C.length-1).split(",");c=c.map(P),q.el[0]=c[0],q.el[1]=c[1],q.el[2]=0,q.el[3]=0,q.el[4]=c[2],q.el[5]=c[3],q.el[6]=0,q.el[7]=0,q.el[8]=0,q.el[9]=0,q.el[10]=1,q.el[11]=0,q.el[12]=c[4],q.el[13]=c[5],q.el[14]=0,q.el[15]=1}return q}function t(R,B){B==n&&(B=new Ri);var w=R.split(/\s+/);return w=w.map(P),B.set(w[0]||0,w[1]||0,w[2]||0),B}var Z,V,Y,l,$,U=function(I,u){Z||(Z=new pd,V=new Ri,Y=new pd,l=new pd,$=new pd),u==n&&(u=new pd);var m=getComputedStyle(I);m.transform&&"none"!==m.transform&&(E(m.transform,Z),t(m.transformOrigin,V),l.setPosition(V),V.negate(),$.setPosition(V),(gr||"preserve-3d"!==m.transformStyle)&&(Z.el[8]=0,Z.el[9]=0,Z.el[10]=1,Z.el[11]=0),u.multiplyMatrices($,u),u.multiplyMatrices(Z,u),u.multiplyMatrices(l,u)),!gr&&m.perspective&&"none"!==m.perspective&&(Y.el[11]=-1/P(m.perspective),t(m.perspectiveOrigin,V),l.setPosition(V),V.negate(),$.setPosition(V),u.multiplyMatrices($,u),u.multiplyMatrices(Y,u),u.multiplyMatrices(l,u));for(var O=I.offsetParent,s=I.offsetLeft,F=I.offsetTop,W=I.parentElement;W&&W!==O;){var d=getComputedStyle(W);if("none"!==d.transform||"none"!==d.perspective)break;W=W.parentElement}return W==n&&I!==I.ownerDocument.documentElement&&"fixed"!==m.position&&(W=I.ownerDocument.documentElement),O!=n&&O!=W&&(s-=W.offsetLeft,F-=W.offsetTop),W&&(s-=W.scrollLeft,F-=W.scrollTop),V.set(s,F,0),l.setPosition(V),u.multiplyMatrices(l,u),W&&U(W,u),u};return function(I,c){var t=I.parentElement;if(t){var g=t.updateAppendMatrix;if(g){delete t.updateAppendMatrix;var C=new pd;U(t,C);var T=new pd;T.getInverse(C),t._matrixAppend=T,t._maxrixPreAppend=C}return c?t._matrixAppend:t._maxrixPreAppend}}}(),Gp=function(f,e){for(;f&&!f.hasOwnProperty(e);)f=y.getPrototypeOf(f);return f&&y.getOwnPropertyDescriptor(f,e)},ai=y.getPrototypeOf?function(r,T,z){var E=Gp(T,z);E&&y.defineProperty(r,z,E)}:function(w,j,S){w[S]=j[S]},Ie={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},_m=function(){var x={1:function(f,d){return{x:f.x-d.width/2,y:f.y-d.height/2}},2:function(r,I){return{x:r.x+I.width/2,y:r.y-I.height/2}},3:function(V,t){return{x:V.x+V.width/2,y:V.y-t.height/2}},4:function(g,z){return{x:g.x+g.width-z.width/2,y:g.y-z.height/2}},5:function(z,f){return{x:z.x+z.width+f.width/2,y:z.y-f.height/2}},6:function(d){return{x:d.x,y:d.y}},7:function(U){return{x:U.x+U.width/2,y:U.y}},8:function(x){return{x:x.x+x.width,y:x.y}},9:function(h,C){return{x:h.x-C.width/2,y:h.y+C.height/2}},10:function(B,c){return{x:B.x+c.width/2,y:B.y+c.height/2}},11:function(n,J){return{x:n.x+n.width/2,y:n.y+J.height/2}},12:function(h,v){return{x:h.x-v.width/2+h.width,y:h.y+v.height/2}},13:function(F,O){return{x:F.x+F.width+O.width/2,y:F.y+O.height/2}},14:function(H,A){return{x:H.x-A.width/2,y:H.y+H.height/2}},15:function(h){return{x:h.x,y:h.y+h.height/2}},16:function(y,T){return{x:y.x+T.width/2,y:y.y+y.height/2}},17:function(o){return{x:o.x+o.width/2,y:o.y+o.height/2}},18:function(g,Z){return{x:g.x+g.width-Z.width/2,y:g.y+g.height/2}},19:function(b){return{x:b.x+b.width,y:b.y+b.height/2}},20:function(j,r){return{x:j.x+j.width+r.width/2,y:j.y+j.height/2}},21:function(v,l){return{x:v.x-l.width/2,y:v.y+v.height-l.height/2}},22:function(D,Y){return{x:D.x+Y.width/2,y:D.y+D.height-Y.height/2}},23:function(r,v){return{x:r.x+r.width/2,y:r.y+r.height-v.height/2}},24:function(O,e){return{x:O.x+O.width-e.width/2,y:O.y+O.height-e.height/2}},25:function(o,Q){return{x:o.x+o.width+Q.width/2,y:o.y+o.height-Q.height/2}},26:function(T){return{x:T.x,y:T.y+T.height}},27:function(F){return{x:F.x+F.width/2,y:F.y+F.height}},28:function($){return{x:$.x+$.width,y:$.y+$.height}},29:function(e,Y){return{x:e.x-Y.width/2,y:e.y+e.height+Y.height/2}},30:function(B,n){return{x:B.x+n.width/2,y:B.y+B.height+n.height/2}},31:function(U,z){return{x:U.x+U.width/2,y:U.y+U.height+z.height/2}},32:function(J,h){return{x:J.x+J.width-h.width/2,y:J.y+J.height+h.height/2}},33:function(F,k){return{x:F.x+F.width+k.width/2,y:F.y+F.height+k.height/2}},34:function(H,a){return{x:H.x,y:H.y-a.height/2}},35:function(j,s){return{x:j.x+j.width,y:j.y-s.height/2}},36:function(O,J){return{x:O.x,y:O.y+O.height+J.height/2}},37:function(h,M){return{x:h.x+h.width,y:h.y+h.height+M.height/2}},38:function(K,I){return{x:K.x+K.width/4,y:K.y-I.height/2}},39:function(O,H){return{x:O.x+3*O.width/4,y:O.y-H.height/2}},40:function(W){return{x:W.x+W.width/4,y:W.y}},41:function(Y){return{x:Y.x+3*Y.width/4,y:Y.y}},42:function(X,q){return{x:X.x+X.width/4,y:X.y+q.height/2}},43:function(H,L){return{x:H.x+3*H.width/4,y:H.y+L.height/2}},44:function(b,O){return{x:b.x+b.width/2,y:b.y+b.height/2-O.height/2}},45:function(E){return{x:E.x+E.width/4,y:E.y+E.height/2}},46:function(d,E){return{x:d.x+d.width/2-E.width/2,y:d.y+d.height/2}},47:function(j,R){return{x:j.x+j.width/2+R.width/2,y:j.y+j.height/2}},48:function(q){return{x:q.x+3*q.width/4,y:q.y+q.height/2}},49:function(H,C){return{x:H.x+H.width/2,y:H.y+H.height/2+C.height/2}},50:function(F,o){return{x:F.x+F.width/4,y:F.y+F.height-o.height/2}},51:function(m,I){return{x:m.x+3*m.width/4,y:m.y+m.height-I.height/2}},52:function(k){return{x:k.x+k.width/4,y:k.y+k.height}},53:function(d){return{x:d.x+3*d.width/4,y:d.y+d.height}},54:function(p,_){return{x:p.x+p.width/4,y:p.y+p.height+_.height/2}},55:function(U,I){return{x:U.x+3*U.width/4,y:U.y+U.height+I.height/2}}};return Gb(H)?function(_,u,z){return x[_](u,z?z:rm)}:void 0}();og(l,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#45C4F9",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#FFF",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var fb=l.reverse,tf=l.transparent,rh=l.rectSelectBackground,Pe=l.dash,bb=l.titleBackground,Jm=l.titleIconBackground,cb=l.headerBackground,Lp=l.headerIconBackground,Sh=l.headerSeparator,uk=l.headerLine,cc=l.contentIconBackground,Gd=l.contentLine,jl=(l.widgetIconHighlight,l.widgetIconBorder),tb=(l.widgetIconGradient,l.imageBackground),ep=l.imageGradient,Gr=l.highlight,gm=l.label,Bk=l.labelSelect;if(pi&&!H.shutAlert1){var Jd=new Date,vh=pi.split("-"),zl=new Date(Jd.getFullYear(),Jd.getMonth(),Jd.getDate()),pi=new Date(ob(vh[0],10),ob(vh[1],10)-1,ob(vh[2],10)),kg=zl.getTime(),Am=pi.getTime(),Pk=p+"_try",Rk=H.alert;try{var di=H.localStorage;if(di&&Rk)if(Am>kg&&1728e6>Am-kg){var Ck=(Am-kg)/864e5;di&&di[Pk]!=Ck&&(di[Pk]=Ck,H.htWillExpire?Rk(H.htWillExpire.replace("{{day}}",Ck)):Rk("HT for Web free trial license will expire in "+Ck+" days, please apply for a new license!"))}else kg>=Am&&(H.htExpired?Rk(H.htExpired):Rk("Your free trial of HT for Web has expired!")),di&&delete di[Pk]}catch(Vb){}}Math.sign===n&&(Math.sign=function(y){return 0>y?-1:y>0?1:+y});var gl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Hi={encode:function(v,W){var i,F,f,q,h,G,x,P="",u=0;for(v=unescape(encodeURIComponent(v));u<v.length;)i=v.charCodeAt(u++),F=v.charCodeAt(u++),f=v.charCodeAt(u++),q=i>>2,h=(3&i)<<4|F>>4,G=(15&F)<<2|f>>6,x=63&f,isNaN(F)?G=x=64:isNaN(f)&&(x=64),P=P+W.charAt(q)+W.charAt(h)+W.charAt(G)+W.charAt(x);return P},decode:function(R,$,c){for(var Y,t,e,K,g,U,b,G="",P=c||0;P<R.length;)K=$.indexOf(R.charAt(P++)),g=$.indexOf(R.charAt(P++)),U=$.indexOf(R.charAt(P++)),b=$.indexOf(R.charAt(P++)),Y=K<<2|g>>4,t=(15&g)<<4|U>>2,e=(3&U)<<6|b,G+=String.fromCharCode(Y),64!=U&&(G+=String.fromCharCode(t)),64!=b&&(G+=String.fromCharCode(e));return G=decodeURIComponent(escape(G))},_utf8_encode:function(H){H=H.replace(/\r\n/g,"\n");for(var o="",f=0;f<H.length;f++){var d=H.charCodeAt(f);128>d?o+=String.fromCharCode(d):d>127&&2048>d?(o+=String.fromCharCode(192|d>>6),o+=String.fromCharCode(128|63&d)):(o+=String.fromCharCode(224|d>>12),o+=String.fromCharCode(128|63&d>>6),o+=String.fromCharCode(128|63&d))}return o},_utf8_decode:function(F){for(var N="",h=0,o=0,s=0,t=0;h<F.length;)o=F.charCodeAt(h),128>o?(N+=String.fromCharCode(o),h++):o>191&&224>o?(s=F.charCodeAt(h+1),N+=String.fromCharCode((31&o)<<6|63&s),h+=2):(s=F.charCodeAt(h+1),t=F.charCodeAt(h+2),N+=String.fromCharCode((15&o)<<12|(63&s)<<6|63&t),h+=3);return N}},_h=[],Dr=[],Tc=f.Math={generateUUID:function(){for(var q=[],x=0;256>x;x++)q[x]=(16>x?"0":"")+x.toString(16).toUpperCase();return function(){var d=0|4294967295*Math.random(),C=0|4294967295*Math.random(),R=0|4294967295*Math.random(),w=0|4294967295*Math.random();return q[255&d]+q[255&d>>8]+q[255&d>>16]+q[255&d>>24]+"-"+q[255&C]+q[255&C>>8]+"-"+q[64|15&C>>16]+q[255&C>>24]+"-"+q[128|63&R]+q[255&R>>8]+"-"+q[255&R>>16]+q[255&R>>24]+q[255&w]+q[255&w>>8]+q[255&w>>16]+q[255&w>>24]}}(),clamp:function(V,g,h){return Math.max(g,Math.min(h,V))},fequal:function(G,x,M){return null==M&&(M=1e-8),Math.abs(G-x)<M},generateIncreasingID:function(){var _=0;return function(){return++_}}(),newIdGenerator:function(){var c=0;return{next:function(){return++c}}},encodeBase64:function(H,i){return Hi.encode(H,i||gl)},decodeBase64:function(U,$){return Hi.decode(U,$||gl)},randomArray:function(k,v){v=v||k.length;for(var m=v-1;m>0;m--){var R=Math.floor(Math.random()*(m+1)),B=k[m];k[m]=k[R],k[R]=B}return k},randomInt:function(X,S){return S===n&&(S=X,X=0),X+Math.floor(Math.random()*(S-X))},randomFloat:function(q,s){return s===n&&(s=q,q=0),q+Math.random()*(s-q)},modToPositive:function(C,W){var c=C%W;return 0>c&&(c+=W),c},roundFloat:function(l,J){var s;return s=1===J?10:2==J?100:3==J||J==O?1e3:Math.pow(10,J),Math.round(l*s)/s},isPOT:function(d){return d>0&&0===(d-1&d)},nearestPOT:function(U){if(!U)return 1;var Q=U;Q--,Q|=Q>>1,Q|=Q>>2,Q|=Q>>4,Q|=Q>>8,Q|=Q>>16,Q++;var x=Q>>1;return U-x>Q-U?Q:x},requestMatrix4:function(){return _h.length>0?_h.pop():new Tc.Matrix4},releaseMatrix4:function(r){_h.push(r)},requestVector3:function(){return Dr.length>0?Dr.pop():new Tc.Vector3},releaseVector3:function(Z){Dr.push(Z)}},Ci=f.Matrix=f.Math.Matrix2d=function(A,j,a,x,n){this.setFromTransform(A,j,a,x,n)},He=Ci;Ci.prototype={},Ci.prototype.constructor=Ci,Ci.prototype.set=function(q,M,E,R,B,N){return this.a=q,this.b=M,this.c=E,this.d=R,this.tx=B,this.ty=N,this},Ci.prototype.setFromTransform=function(A,z,P,j,s){var k=this;if(A===n)return k.a=1,k.b=0,k.c=0,k.d=1,k.tx=0,k.ty=0,void 0;var S,Q;return A?(S=G(A),Q=b(A)):(S=0,Q=1),j=j||1,s=s||1,k.a=Q*j,k.b=S*j,k.c=-S*s,k.d=Q*s,k.tx=z||0,k.ty=P||0,k},Ci.prototype.apply=function(J,d){d=d||new gd;var m=J.x,c=J.y;return d.x=this.a*m+this.c*c+this.tx,d.y=this.b*m+this.d*c+this.ty,d},Ci.prototype.applyInverse=function(W,z){z=z||new gd;var d=1/(this.a*this.d+this.c*-this.b),R=W.x,p=W.y;return z.x=this.d*d*R+-this.c*d*p+(this.ty*this.c-this.tx*this.d)*d,z.y=this.a*d*p+-this.b*d*R+(-this.ty*this.a+this.tx*this.b)*d,z},Ci.prototype.translate=function(G,V){return this.tx+=G,this.ty+=V,this},Ci.prototype.scale=function(f,j){return this.a*=f,this.d*=j,this.c*=f,this.b*=j,this.tx*=f,this.ty*=j,this},Ci.prototype.rotate=function(x){var V=Math.cos(x),y=Math.sin(x),h=this.a,N=this.c,c=this.tx;return this.a=h*V-this.b*y,this.b=h*y+this.b*V,this.c=N*V-this.d*y,this.d=N*y+this.d*V,this.tx=c*V-this.ty*y,this.ty=c*y+this.ty*V,this},Ci.prototype.appendTranslate=function(d,R){return this.tx+=this.a*d+this.c*R,this.ty+=this.b*d+this.d*R,this},Ci.prototype.appendScale=function(j,p){return this.a*=j,this.d*=p,this.c*=p,this.b*=j,this},Ci.prototype.appendRotate=function(x){if(!x)return this;var w=Math.cos(x),E=Math.sin(x),D=this.a,t=this.b;return this.a=D*w+this.c*E,this.b=t*w+this.d*E,this.c=-D*E+this.c*w,this.d=-t*E+this.d*w,this},Ci.prototype.append=function(L){var D=this.a,e=this.b,G=this.c,f=this.d;return this.a=L.a*D+L.b*G,this.b=L.a*e+L.b*f,this.c=L.c*D+L.d*G,this.d=L.c*e+L.d*f,this.tx=L.tx*D+L.ty*G+this.tx,this.ty=L.tx*e+L.ty*f+this.ty,this},Ci.prototype.setTransform=function(t,I,H,w,Q,u,S,C,T){var z,m,M,r,k,X,E,A,U,s;return k=Math.sin(S),X=Math.cos(S),E=Math.cos(T),A=Math.sin(T),U=-Math.sin(C),s=Math.cos(C),z=X*Q,m=k*Q,M=-k*u,r=X*u,this.a=E*z+A*M,this.b=E*m+A*r,this.c=U*z+s*M,this.d=U*m+s*r,this.tx=t+(H*z+w*M),this.ty=I+(H*m+w*r),this},Ci.prototype.prepend=function(I){var C=this.tx;if(1!==I.a||0!==I.b||0!==I.c||1!==I.d){var w=this.a,c=this.c;this.a=w*I.a+this.b*I.c,this.b=w*I.b+this.b*I.d,this.c=c*I.a+this.d*I.c,this.d=c*I.b+this.d*I.d}return this.tx=C*I.a+this.ty*I.c+I.tx,this.ty=C*I.b+this.ty*I.d+I.ty,this},Ci.prototype.transform=Ci.prototype.prepend,Ci.prototype.invert=function(){var h=this.a,W=this.b,M=this.c,v=this.d,C=this.tx,D=h*v-W*M;return this.a=v/D,this.b=-W/D,this.c=-M/D,this.d=h/D,this.tx=(M*this.ty-v*C)/D,this.ty=-(h*this.ty-W*C)/D,this},Ci.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Ci.prototype.clone=function(){var j=new Ci;return j.a=this.a,j.b=this.b,j.c=this.c,j.d=this.d,j.tx=this.tx,j.ty=this.ty,j},Ci.prototype.copy=function(A){return A.a=this.a,A.b=this.b,A.c=this.c,A.d=this.d,A.tx=this.tx,A.ty=this.ty,A},Ci.prototype.tf=function(X,U){1===arguments.length&&(U=X.y,X=X.x);var m=this;return{x:m.a*X+m.c*U+m.tx,y:m.b*X+m.d*U+m.ty}},Ci.prototype.toArray=function(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]},Ci.prototype.fromArray=function(x){return this.a=x[0],this.b=x[1],this.c=x[2],this.d=x[3],this.tx=x[4],this.ty=x[5],this},Ci.prototype.toArray9=function(){return[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1]},Ci.prototype.tfi=function(k,f){1===arguments.length&&(f=k.y,k=k.x);var E=this,t=1/(E.a*E.d+E.c*-E.b);return{x:E.d*t*k+-E.c*t*f+(E.ty*E.c-E.tx*E.d)*t,y:E.a*t*f+-E.b*t*k+(-E.ty*E.a+E.tx*E.b)*t}},Ci.prototype.decompose=function(){var o=this,h=o.a,Q=o.b,q=o.c,J=o.d,j=Math.sqrt(h*h+Q*Q),p=Math.sqrt(q*q+J*J),K=h*J-Q*q;return 0>K&&(J>h?j=-j:p=-p),j&&(h*=1/j,Q*=1/j),p&&(q*=1/p,J*=1/p),{translateX:o.tx,translateY:o.ty,rotation:Math.atan2(Q,h),scaleX:j,scaleY:p}},Ci.IDENTITY=new Ci,Ci.TEMP_MATRIX=new Ci;var zn=f.Math.Quaternion=function(r,v,D,J){this.set(r,v,D,J)};y.assign(zn.prototype,{set:function(X,y,L,D){var i=this;return i._x=X||0,i._y=y||0,i._z=L||0,i._w=D!==n?D:1,i},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function($){var d=this;return d._x=$._x,d._y=$._y,d._z=$._z,d._w=$._w,d},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this},dot:function(X){return this._x*X._x+this._y*X._y+this._z*X._z+this._w*X._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var z=this.length();return 0===z?(this._x=0,this._y=0,this._z=0,this._w=1):(z=1/z,this._x=this._x*z,this._y=this._y*z,this._z=this._z*z,this._w=this._w*z),this},fromArray:function(O,u){u===n&&(u=0);var L=this;return L._x=O[u],L._y=O[u+1],L._z=O[u+2],L._w=O[u+3],this},slerp:function(N,I){if(0===I)return this;if(1===I)return this.copy(N);var A=this._x,T=this._y,D=this._z,g=this._w,d=g*N._w+A*N._x+T*N._y+D*N._z;if(0>d?(this._w=-N._w,this._x=-N._x,this._y=-N._y,this._z=-N._z,d=-d):this.copy(N),d>=1)return this._w=g,this._x=A,this._y=T,this._z=D,this;var o=Math.sqrt(1-d*d);if(Math.abs(o)<.001)return this._w=.5*(g+this._w),this._x=.5*(A+this._x),this._y=.5*(T+this._y),this._z=.5*(D+this._z),this;var t=Math.atan2(o,d),R=Math.sin((1-I)*t)/o,O=Math.sin(I*t)/o;return this._w=g*R+this._w*O,this._x=A*R+this._x*O,this._y=T*R+this._y*O,this._z=D*R+this._z*O,this},equals:function(x){return x._x===this._x&&x._y===this._y&&x._z===this._z&&x._w===this._w},setFromAxisAngle:function(y,m){var w=m/2,H=Math.sin(w);return this._x=y.x*H,this._y=y.y*H,this._z=y.z*H,this._w=Math.cos(w),this},setFromEuler:function(Q){var k=Q._x,g=Q._y,i=Q._z,Y=Q._order,_=Math.cos,J=Math.sin,w=_(k/2),u=_(g/2),W=_(i/2),G=J(k/2),L=J(g/2),D=J(i/2);return"XYZ"===Y?(this._x=G*u*W+w*L*D,this._y=w*L*W-G*u*D,this._z=w*u*D+G*L*W,this._w=w*u*W-G*L*D):"YXZ"===Y?(this._x=G*u*W+w*L*D,this._y=w*L*W-G*u*D,this._z=w*u*D-G*L*W,this._w=w*u*W+G*L*D):"ZXY"===Y?(this._x=G*u*W-w*L*D,this._y=w*L*W+G*u*D,this._z=w*u*D+G*L*W,this._w=w*u*W-G*L*D):"ZYX"===Y?(this._x=G*u*W-w*L*D,this._y=w*L*W+G*u*D,this._z=w*u*D-G*L*W,this._w=w*u*W+G*L*D):"YZX"===Y?(this._x=G*u*W+w*L*D,this._y=w*L*W+G*u*D,this._z=w*u*D-G*L*W,this._w=w*u*W-G*L*D):"XZY"===Y&&(this._x=G*u*W-w*L*D,this._y=w*L*W-G*u*D,this._z=w*u*D+G*L*W,this._w=w*u*W+G*L*D),this},setFromRotationMatrix:function(c){var d,v=c.el,Y=v[0],e=v[4],D=v[8],M=v[1],P=v[5],f=v[9],L=v[2],r=v[6],W=v[10],N=Y+P+W;return N>0?(d=.5/Math.sqrt(N+1),this._w=.25/d,this._x=(r-f)*d,this._y=(D-L)*d,this._z=(M-e)*d):Y>P&&Y>W?(d=2*Math.sqrt(1+Y-P-W),this._w=(r-f)/d,this._x=.25*d,this._y=(e+M)/d,this._z=(D+L)/d):P>W?(d=2*Math.sqrt(1+P-Y-W),this._w=(D-L)/d,this._x=(e+M)/d,this._y=.25*d,this._z=(f+r)/d):(d=2*Math.sqrt(1+W-Y-P),this._w=(M-e)/d,this._x=(D+L)/d,this._y=(f+r)/d,this._z=.25*d),this},setFromToVectors:function(){var i,Z;return function(O,A){return i===n&&(i=new Ri),Z=O.dot(A)+1,1e-7>Z?(Z=0,Math.abs(O.x)>Math.abs(O.z)?i.set(-O.y,O.x,0):i.set(0,-O.z,O.y)):i.crossVectors(O,A),this._x=i.x,this._y=i.y,this._z=i.z,this._w=Z,this.normalize()}}(),setFromUnitVectors:function(){var b,U,X=1e-6;return function(d,h){return b===n&&(b=new Ri),U=d.dot(h)+1,X>U?(U=0,Math.abs(d.x)>Math.abs(d.z)?b.set(-d.y,d.x,0):b.set(0,-d.z,d.y)):b.crossVectors(d,h),this._x=b.x,this._y=b.y,this._z=b.z,this._w=U,this.normalize()}}(),multiply:function(Q){return this.multiplyQuaternions(this,Q)},premultiply:function(i){return this.multiplyQuaternions(i,this)},multiplyQuaternions:function(f,b){var J=f._x,L=f._y,N=f._z,O=f._w,Z=b._x,i=b._y,W=b._z,H=b._w;return this._x=J*H+O*Z+L*W-N*i,this._y=L*H+O*i+N*Z-J*W,this._z=N*H+O*W+J*i-L*Z,this._w=O*H-J*Z-L*i-N*W,this},toArray:function(e,y){return e||(e=[]),y=y||0,e[y]=this._x,e[y+1]=this._y,e[y+2]=this._z,e[y+3]=this._w,e}}),zn.slerpFlat=function($,g,C,v,E,S,K){var d=C[v+0],T=C[v+1],P=C[v+2],L=C[v+3],W=E[S+0],t=E[S+1],f=E[S+2],Z=E[S+3];if(0===K)return $[g+0]=d,$[g+1]=T,$[g+2]=P,$[g+3]=L,void 0;if(1===K)return $[g+0]=W,$[g+1]=t,$[g+2]=f,$[g+3]=Z,void 0;if(L!==Z||d!==W||T!==t||P!==f){var X=1-K,j=d*W+T*t+P*f+L*Z,e=j>=0?1:-1,G=1-j*j;if(G>Number.EPSILON){var _=Math.sqrt(G),F=Math.atan2(_,j*e);X=Math.sin(X*F)/_,K=Math.sin(K*F)/_}var y=K*e;if(d=d*X+W*y,T=T*X+t*y,P=P*X+f*y,L=L*X+Z*y,X===1-K){var I=1/Math.sqrt(d*d+T*T+P*P+L*L);d*=I,T*=I,P*=I,L*=I}}$[g]=d,$[g+1]=T,$[g+2]=P,$[g+3]=L};var Tl=f.Math.Vector4=function(C,V,i,z){this.x=C||0,this.y=V||0,this.z=i||0,this.w=z!==n?z:1};y.assign(Tl.prototype,{isVector4:!0,set:function(m,F,W,i){return this.x=m,this.y=F,this.z=W,this.w=i,this},setScalar:function(i){return this.x=i,this.y=i,this.z=i,this.w=i,this},setX:function(P){return this.x=P,this},setY:function(Y){return this.y=Y,this
},setZ:function(l){return this.z=l,this},setW:function(x){return this.w=x,this},setComponent:function(l,z){switch(l){case 0:this.x=z;break;case 1:this.y=z;break;case 2:this.z=z;break;case 3:this.w=z;break;default:throw new Error("index is out of range: "+l)}return this},getComponent:function(V){switch(V){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+V)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(k){return this.x=k.x,this.y=k.y,this.z=k.z,this.w=k.w!==n?k.w:1,this},add:function(b,W){return W!==n?this.addVectors(b,W):(this.x+=b.x,this.y+=b.y,this.z+=b.z,this.w+=b.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(z,G){return this.x=z.x+G.x,this.y=z.y+G.y,this.z=z.z+G.z,this.w=z.w+G.w,this},addScaledVector:function($,v){return this.x+=$.x*v,this.y+=$.y*v,this.z+=$.z*v,this.w+=$.w*v,this},sub:function(e,u){return u!==n?this.subVectors(e,u):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(y){return this.x-=y,this.y-=y,this.z-=y,this.w-=y,this},subVectors:function(v,o){return this.x=v.x-o.x,this.y=v.y-o.y,this.z=v.z-o.z,this.w=v.w-o.w,this},multiplyScalar:function(S){return this.x*=S,this.y*=S,this.z*=S,this.w*=S,this},applyMatrix4:function(Y){var D=this.x,C=this.y,g=this.z,I=this.w,P=Y.el;return this.x=P[0]*D+P[4]*C+P[8]*g+P[12]*I,this.y=P[1]*D+P[5]*C+P[9]*g+P[13]*I,this.z=P[2]*D+P[6]*C+P[10]*g+P[14]*I,this.w=P[3]*D+P[7]*C+P[11]*g+P[15]*I,this},divideScalar:function(A){return this.multiplyScalar(1/A)},setAxisAngleFromQuaternion:function(m){this.w=2*Math.acos(m.w);var w=Math.sqrt(1-m.w*m.w);return 1e-4>w?(this.x=1,this.y=0,this.z=0):(this.x=m.x/w,this.y=m.y/w,this.z=m.z/w),this},setAxisAngleFromRotationMatrix:function(I){var H,v,m,i,f=.01,k=.1,B=I.el,s=B[0],a=B[4],u=B[8],p=B[1],A=B[5],T=B[9],e=B[2],J=B[6],c=B[10];if(Math.abs(a-p)<f&&Math.abs(u-e)<f&&Math.abs(T-J)<f){if(Math.abs(a+p)<k&&Math.abs(u+e)<k&&Math.abs(T+J)<k&&Math.abs(s+A+c-3)<k)return this.set(1,0,0,0),this;H=Math.PI;var U=(s+1)/2,O=(A+1)/2,w=(c+1)/2,E=(a+p)/4,R=(u+e)/4,h=(T+J)/4;return U>O&&U>w?f>U?(v=0,m=.707106781,i=.707106781):(v=Math.sqrt(U),m=E/v,i=R/v):O>w?f>O?(v=.707106781,m=0,i=.707106781):(m=Math.sqrt(O),v=E/m,i=h/m):f>w?(v=.707106781,m=.707106781,i=0):(i=Math.sqrt(w),v=R/i,m=h/i),this.set(v,m,i,H),this}var C=Math.sqrt((J-T)*(J-T)+(u-e)*(u-e)+(p-a)*(p-a));return Math.abs(C)<.001&&(C=1),this.x=(J-T)/C,this.y=(u-e)/C,this.z=(p-a)/C,this.w=Math.acos((s+A+c-1)/2),this},min:function(v){return this.x=Math.min(this.x,v.x),this.y=Math.min(this.y,v.y),this.z=Math.min(this.z,v.z),this.w=Math.min(this.w,v.w),this},max:function(z){return this.x=Math.max(this.x,z.x),this.y=Math.max(this.y,z.y),this.z=Math.max(this.z,z.z),this.w=Math.max(this.w,z.w),this},clamp:function(s,A){return this.x=Math.max(s.x,Math.min(A.x,this.x)),this.y=Math.max(s.y,Math.min(A.y,this.y)),this.z=Math.max(s.z,Math.min(A.z,this.z)),this.w=Math.max(s.w,Math.min(A.w,this.w)),this},clampScalar:function(){var Z,p;return function(P,G){return Z===n&&(Z=new Tl,p=new Tl),Z.set(P,P,P,P),p.set(G,G,G,G),this.clamp(Z,p)}}(),clampLength:function(b,L){var V=this.length();return this.divideScalar(V||1).multiplyScalar(Math.max(b,Math.min(L,V)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(D){return this.x*D.x+this.y*D.y+this.z*D.z+this.w*D.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(W){return this.normalize().multiplyScalar(W)},lerp:function(p,X){return this.x+=(p.x-this.x)*X,this.y+=(p.y-this.y)*X,this.z+=(p.z-this.z)*X,this.w+=(p.w-this.w)*X,this},lerpVectors:function(Q,a,B){return this.subVectors(a,Q).multiplyScalar(B).add(Q)},equals:function(T){return T.x===this.x&&T.y===this.y&&T.z===this.z&&T.w===this.w},fromArray:function(C,j){return j===n&&(j=0),this.x=C[j],this.y=C[j+1],this.z=C[j+2],this.w=C[j+3],this},toArray:function(c,s){return c===n&&(c=[]),s===n&&(s=0),c[s]=this.x,c[s+1]=this.y,c[s+2]=this.z,c[s+3]=this.w,c},fromBufferAttribute:function(i,o){return this.x=i.getX(o),this.y=i.getY(o),this.z=i.getZ(o),this.w=i.getW(o),this}});var Ri=f.Math.Vector3=function(q,y,z){q===n?(this.x=0,this.y=0,this.z=0):"object"==typeof q?this.copy(q):this.set(q,y==n?q:y,z==n?q:z)},nh=f.Math.Vector3;y.assign(Ri.prototype,{isNaN:function(){return isNaN(this.x)||isNaN(this.y)||isNaN(this.z)},set:function(M,c,S){return this.x=M,this.y=c,this.z=S,this},equals:function(G){return G&&this.x===G.x&&this.y===G.y&&this.z===G.z},setScalar:function(H){return this.x=H,this.y=H,this.z=H,this},setX:function(S){return this.x=S,this},setY:function(Z){return this.y=Z,this},setZ:function(L){return this.z=L,this},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(s){return s.x===n?(this.x=s[0],this.y=s[1],this.z=s[2]):(this.x=s.x,this.y=s.y,this.z=s.z||0),this},add:function(d){return this.x+=d.x,this.y+=d.y,this.z+=d.z,this},addScalar:function(Y){return this.x+=Y,this.y+=Y,this.z+=Y,this},addVectors:function(N,u){return this.x=N.x+u.x,this.y=N.y+u.y,this.z=N.z+u.z,this},addScaledVector:function(E,G){return this.x+=E.x*G,this.y+=E.y*G,this.z+=E.z*G,this},sub:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z,this},subScalar:function(c){return this.x-=c,this.y-=c,this.z-=c,this},subVectors:function(d,h){return this.x=d.x-h.x,this.y=d.y-h.y,this.z=d.z-h.z,this},divide:function(Z){return this.x/=Z.x,this.y/=Z.y,this.z/=Z.z,this},multiply:function(O){return this.x*=O.x,this.y*=O.y,this.z*=O.z,this},multiplyScalar:function(b){return this.x*=b,this.y*=b,this.z*=b,this},divideScalar:function(U){if(0!==U){var x=1/U;this.x*=x,this.y*=x,this.z*=x}else this.x=0,this.y=0,this.z=0;return this},distanceTo:function(A){return Math.sqrt(this.distanceToSquared(A))},distanceToSquared:function(Z){var R=this.x-Z.x,m=this.y-Z.y,z=this.z-Z.z;return R*R+m*m+z*z},distanceToSquared2:function(e){var L=this.x-e[0],m=this.y-e[1],d=this.z-e[2];return L*L+m*m+d*d},divideVectors:function(l,f){return this.x=l.x/f.x,this.y=l.y/f.y,this.z=l.z/f.z,this},multiplyVectors:function(Z,R){return this.x=Z.x*R.x,this.y=Z.y*R.y,this.z=Z.z*R.z,this},transformDirection:function(z){var u=this.x,b=this.y,e=this.z,c=z.el;return this.x=c[0]*u+c[4]*b+c[8]*e,this.y=c[1]*u+c[5]*b+c[9]*e,this.z=c[2]*u+c[6]*b+c[10]*e,this.normalize()},applyAxisAngle:function(){var P=new zn;return function(d,y){return this.applyQuaternion(P.setFromAxisAngle(d,y))}}(),applyEuler:function(){var r=new zn;return function(A){return this.applyQuaternion(r.setFromEuler(A))}}(),applyQuaternion:function(J){var Z=this.x,F=this.y,n=this.z,S=J._x,f=J._y,A=J._z,O=J._w,c=O*Z+f*n-A*F,w=O*F+A*Z-S*n,v=O*n+S*F-f*Z,x=-S*Z-f*F-A*n;return this.x=c*O+x*-S+w*-A-v*-f,this.y=w*O+x*-f+v*-S-c*-A,this.z=v*O+x*-A+c*-f-w*-S,this},applyMatrix4:function(B){var s=this.x,v=this.y,S=this.z,K=B.el,o=1/(K[3]*s+K[7]*v+K[11]*S+K[15]);return this.x=(K[0]*s+K[4]*v+K[8]*S+K[12])*o,this.y=(K[1]*s+K[5]*v+K[9]*S+K[13])*o,this.z=(K[2]*s+K[6]*v+K[10]*S+K[14])*o,this},applyMatrix3:function(S){var F=this.x,m=this.y,N=this.z,o=S.el;return this.x=o[0]*F+o[3]*m+o[6]*N,this.y=o[1]*F+o[4]*m+o[7]*N,this.z=o[2]*F+o[5]*m+o[8]*N,this},applyNormalMatrix:function(X){return this.applyMatrix3(X).normalize()},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},reflect:function(){var E=new Ri;return function(m){return this.sub(E.copy(m).multiplyScalar(2*this.dot(m)))}}(),dot:function(D){return this.x*D.x+this.y*D.y+this.z*D.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){var m=this.length();return m?this.multiplyScalar(1/m):this},setLength:function(v){return this.normalize().multiplyScalar(v)},fromArray:function(d,b){return b===n&&(b=0),this.x=d[b],this.y=d[b+1],this.z=d[b+2],this},toArray:function(F,V){return F===n&&(F=[0,0,0]),V===n&&(V=0),F[V]=this.x,F[V+1]=this.y,F[V+2]=this.z,F},cross:function(Z){return this.crossVectors(this,Z)},angleTo:function(u){var w=this.dot(u)/Math.sqrt(this.lengthSq()*u.lengthSq()),A=1e-6;return w>1+A||-1-A>w?0:Math.acos(Tc.clamp(w,-1,1))},lerp:function(K,v){return this.x+=(K.x-this.x)*v,this.y+=(K.y-this.y)*v,this.z+=(K.z-this.z)*v,this},lerpVectors:function(p,k,Q){return this.subVectors(k,p).multiplyScalar(Q).add(p)},crossVectors:function(Q,V){var u=Q.x,I=Q.y,S=Q.z,k=V.x,c=V.y,P=V.z;return this.x=I*P-S*c,this.y=S*k-u*P,this.z=u*c-I*k,this},min:function(L){return this.x=Math.min(this.x,L.x),this.y=Math.min(this.y,L.y),this.z=Math.min(this.z,L.z),this},max:function(z){return this.x=Math.max(this.x,z.x),this.y=Math.max(this.y,z.y),this.z=Math.max(this.z,z.z),this},setFromMatrixPosition:function(c){return this.setFromMatrixColumn(c,3)},setFromMatrixScale:function($){var l=this.setFromMatrixColumn($,0).length(),M=this.setFromMatrixColumn($,1).length(),L=this.setFromMatrixColumn($,2).length();return this.x=l,this.y=M,this.z=L,this},setFromMatrixColumn:function(_,T){return this.fromArray(_.el,4*T)}}),Ri.UP=new Ri(0,1,0),Ri.AxisX=new Ri(1,0,0),Ri.AxisY=new Ri(0,1,0),Ri.AxisZ=new Ri(0,0,1),Ri.normalizeArray=function(){var D=new Ri;return function(Q){return D.copy(Q).normalize().toArray()}}();var Sr=function(){var s=new Ri;return function(m,n){return n=n||s,n.x=m[0],n.y=m[1],n.z=m[2],n}}(),gd=f.Math.Vector2=function(V,I,E){"object"==typeof V&&(V.x!=n?(I=V.y,E=V.e,V=V.x):(E=V[2],I=V[1],V=V[0])),this.set(V||0,I||0,E)};gd.prototype={},gd.prototype.constructor=gd;var wp=gd;y.defineProperties(gd.prototype,{width:{get:function(){return this.x},set:function(f){this.x=f}},height:{get:function(){return this.y},set:function(R){this.y=R}}}),gd.prototype.clone=function(){return new gd(this.x,this.y,this.e)},gd.prototype.copy=function(o){return this.set(o.x,o.y,o.e),this},gd.prototype.equals=function(U){return U.x===this.x&&U.y===this.y&&U.e===this.e},gd.prototype.set=function(t,I,$){return this.x=t||0,this.y=I||(0!==I?this.x:0),$!=n&&(this.e=$),this},gd.prototype.setScalar=function(g){return this.x=g,this.y=g,this.e=g,this},gd.prototype.setX=function(T){return this.x=T||0,this},gd.prototype.setY=function(j){return this.y=j||0,this},gd.prototype.setE=function(F){return this.e=F||0,this},gd.prototype.add=function(O){return this.x+=O.x,this.y+=O.y,this},gd.prototype.addVectors=function(S,P){return this.x=S.x+P.x,this.y=S.y+P.y,this},gd.prototype.addScalar=function(F){return this.x+=F,this.y+=F,this},gd.prototype.addScaledVector=function(c,R){return this.x+=c.x*R,this.y+=c.y*R,this},gd.prototype.sub=function(j){return this.x-=j.x,this.y-=j.y,this},gd.prototype.subScalar=function(N){return this.x-=N,this.y-=N,this},gd.prototype.subVectors=function(j,V){return this.x=j.x-V.x,this.y=j.y-V.y,this},gd.prototype.multiply=function(t){return this.x*=t.x,this.y*=t.y,this},gd.prototype.multiplyScalar=function(n){return this.x*=n,this.y*=n,this},gd.prototype.divide=function(w){return this.x/=w.x,this.y/=w.y,this},gd.prototype.divideScalar=function(g){return this.multiplyScalar(1/g)},gd.prototype.min=function(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this},gd.prototype.max=function(I){return this.x=Math.max(this.x,I.x),this.y=Math.max(this.y,I.y),this},gd.prototype.fromArray=function(D,f){return f===n&&(f=0),this.x=D[f],this.y=D[f+1],this},gd.prototype.clamp=function(B,T){return this.x=Math.max(B.x,Math.min(T.x,this.x)),this.y=Math.max(B.y,Math.min(T.y,this.y)),this},gd.prototype.clampScalar=function(){var q,m;return function(z,v){return q===n&&(q=new gd,m=new gd),q.set(z,z),m.set(v,v),this.clamp(q,m)}}(),gd.prototype.clampLength=function(j,N){var R=this.length();return this.multiplyScalar(Math.max(j,Math.min(N,R))/R)},gd.prototype.dot=function(s){return this.x*s.x+this.y*s.y},gd.prototype.cross=function(H){return this.x*H.y-this.y*H.x},gd.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},gd.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},gd.prototype.normalize=function(){return this.divideScalar(this.length())},gd.prototype.angle=function(){var Q=Math.atan2(this.y,this.x);return 0>Q&&(Q+=2*Math.PI),Q},gd.prototype.distanceTo=function(n){return Math.sqrt(this.distanceToSquared(n))},gd.prototype.distanceToSquared=function(P){var D=this.x-P.x,l=this.y-P.y;return D*D+l*l},gd.prototype.isNearEnough=function(G){return this.distanceToSquared(G)<1e-8},gd.prototype.setLength=function(u){var o=this.length();return o?this.multiplyScalar(u/o):this},gd.prototype.lerp=function(w,R){return this.x+=(w.x-this.x)*R,this.y+=(w.y-this.y)*R,"number"==typeof w.e&&"number"==typeof this.e&&(this.e+=(w.e-this.e)*R),this},gd.prototype.lerpVectors=function(G,a,E){return this.subVectors(a,G).multiplyScalar(E).add(G)},gd.prototype.rotateAround=function(E,L){var w=E?E.x:0,i=E?E.y:0,g=Math.cos(L),k=Math.sin(L),P=this.x-w,C=this.y-i;return this.x=P*g-C*k+w,this.y=P*k+C*g+i,this};var we=f.Math.Matrix3=function(){this.el=[1,0,0,0,1,0,0,0,1]};y.assign(we.prototype,{isMatrix3:!0,set:function(v,e,f,Q,Y,S,W,q,X){var l=this.el;return l[0]=v,l[1]=Q,l[2]=W,l[3]=e,l[4]=Y,l[5]=q,l[6]=f,l[7]=S,l[8]=X,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.el)},copy:function(g){var i=this.el,n=g.el;return i[0]=n[0],i[1]=n[1],i[2]=n[2],i[3]=n[3],i[4]=n[4],i[5]=n[5],i[6]=n[6],i[7]=n[7],i[8]=n[8],this},setFromMatrix4:function(q){var _=q.el;return this.set(_[0],_[4],_[8],_[1],_[5],_[9],_[2],_[6],_[10]),this},applyToBufferAttribute:function(){var n=new Ri;return function(F){for(var f=0,m=F.count;m>f;f++)n.x=F.getX(f),n.y=F.getY(f),n.z=F.getZ(f),n.applyMatrix3(this),F.setXYZ(f,n.x,n.y,n.z);return F}}(),multiply:function($){return this.multiplyMatrices(this,$)},premultiply:function(I){return this.multiplyMatrices(I,this)},multiplyMatrices:function(R,M){var x=R.el,W=M.el,z=this.el,D=x[0],b=x[3],t=x[6],$=x[1],C=x[4],L=x[7],r=x[2],U=x[5],_=x[8],H=W[0],f=W[3],P=W[6],n=W[1],Y=W[4],m=W[7],S=W[2],e=W[5],p=W[8];return z[0]=D*H+b*n+t*S,z[3]=D*f+b*Y+t*e,z[6]=D*P+b*m+t*p,z[1]=$*H+C*n+L*S,z[4]=$*f+C*Y+L*e,z[7]=$*P+C*m+L*p,z[2]=r*H+U*n+_*S,z[5]=r*f+U*Y+_*e,z[8]=r*P+U*m+_*p,this},multiplyScalar:function(g){var n=this.el;return n[0]*=g,n[3]*=g,n[6]*=g,n[1]*=g,n[4]*=g,n[7]*=g,n[2]*=g,n[5]*=g,n[8]*=g,this},determinant:function(){var O=this.el,p=O[0],e=O[1],D=O[2],M=O[3],g=O[4],b=O[5],w=O[6],K=O[7],f=O[8];return p*g*f-p*b*K-e*M*f+e*b*w+D*M*K-D*g*w},getInverse:function(O){var R=O.el,C=this.el,d=R[0],g=R[1],P=R[2],k=R[3],U=R[4],S=R[5],n=R[6],F=R[7],A=R[8],Z=A*U-S*F,N=S*n-A*k,I=F*k-U*n,$=d*Z+g*N+P*I;if(0===$)return this.identity();var w=1/$;return C[0]=Z*w,C[1]=(P*F-A*g)*w,C[2]=(S*g-P*U)*w,C[3]=N*w,C[4]=(A*d-P*n)*w,C[5]=(P*k-S*d)*w,C[6]=I*w,C[7]=(g*n-F*d)*w,C[8]=(U*d-g*k)*w,this},transpose:function(){var J,I=this.el;return J=I[1],I[1]=I[3],I[3]=J,J=I[2],I[2]=I[6],I[6]=J,J=I[5],I[5]=I[7],I[7]=J,this},getNormalMatrix:function(K){return this.setFromMatrix4(K).getInverse(this).transpose()},transposeIntoArray:function(t){var X=this.el;return t[0]=X[0],t[1]=X[3],t[2]=X[6],t[3]=X[1],t[4]=X[4],t[5]=X[7],t[6]=X[2],t[7]=X[5],t[8]=X[8],this},setUvTransform:function(P,K,t,S,E,W,B){var T=Math.cos(E),L=Math.sin(E);this.set(t*T,t*L,-t*(T*W+L*B)+W+P,-S*L,S*T,-S*(-L*W+T*B)+B+K,0,0,1)},scale:function(u,D){var b=this.el;return b[0]*=u,b[3]*=u,b[6]*=u,b[1]*=D,b[4]*=D,b[7]*=D,this},rotate:function(k){var B=Math.cos(k),l=Math.sin(k),c=this.el,n=c[0],Y=c[3],v=c[6],o=c[1],s=c[4],j=c[7];return c[0]=B*n+l*o,c[3]=B*Y+l*s,c[6]=B*v+l*j,c[1]=-l*n+B*o,c[4]=-l*Y+B*s,c[7]=-l*v+B*j,this},translate:function(e,I){var a=this.el;return a[0]+=e*a[2],a[3]+=e*a[5],a[6]+=e*a[8],a[1]+=I*a[2],a[4]+=I*a[5],a[7]+=I*a[8],this},equals:function(s){for(var p=this.el,f=s.el,h=0;9>h;h++)if(p[h]!==f[h])return!1;return!0},fromArray:function(C,T){T===n&&(T=0);for(var L=0;9>L;L++)this.el[L]=C[L+T];return this},toArray:function(h,s){h===n&&(h=[]),s===n&&(s=0);var O=this.el;return h[s]=O[0],h[s+1]=O[1],h[s+2]=O[2],h[s+3]=O[3],h[s+4]=O[4],h[s+5]=O[5],h[s+6]=O[6],h[s+7]=O[7],h[s+8]=O[8],h}});var Ch=f.Math.Plane=function(g,B){this.normal=g!==n?g:new Ri(1,0,0),this.constant=B!==n?B:0};y.assign(Ch.prototype,{set:function(E,y){return this.normal.copy(E),this.constant=y,this},setComponents:function(E,l,D,p){return this.normal.set(E,l,D),this.constant=p,this},setFromNormalAndCoplanarPoint:function(V,x){return this.normal.copy(V),this.constant=-x.dot(this.normal),this},setFromCoplanarPoints:function(){var Q=new Ri,M=new Ri;return function(I,O,s){var i=Q.subVectors(s,O).cross(M.subVectors(I,O)).normalize();return this.setFromNormalAndCoplanarPoint(i,I),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(J){return this.normal.copy(J.normal),this.constant=J.constant,this},normalize:function(){var j=1/this.normal.length();return this.normal.multiplyScalar(j),this.constant*=j,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(E){return this.normal.dot(E)+this.constant},distanceToSphere:function(I){return this.distanceToPoint(I.center)-I.radius},projectPoint:function(m,k){return k===n&&(k=new Ri),k.copy(this.normal).multiplyScalar(-this.distanceToPoint(m)).add(m)},intersectLine:function(){var D=new Ri;return function(R,P){P===n&&(P=new Ri);var Q=R.delta(D),K=this.normal.dot(Q);if(0===K)return 0===this.distanceToPoint(R.start)?P.copy(R.start):n;var h=-(R.start.dot(this.normal)+this.constant)/K;return 0>h||h>1?n:P.copy(Q).multiplyScalar(h).add(R.start)}}(),intersectsLine:function(Q){var $=this.distanceToPoint(Q.start),M=this.distanceToPoint(Q.end);return 0>$&&M>0||0>M&&$>0},intersectsBox:function(h){return h.intersectsPlane(this)},intersectsSphere:function(j){return j.intersectsPlane(this)},coplanarPoint:function(w){return w===n&&(w=new Ri),w.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var K=new Ri,D=new we;return function(f,I){var _=I||D.getNormalMatrix(f),o=this.coplanarPoint(K).applyMatrix4(f),q=this.normal.applyMatrix3(_).normalize();return this.constant=-o.dot(q),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(p){return p.normal.equals(this.normal)&&p.constant===this.constant}});var Ne=f.Math.Ray=function(W,e){this.origin=W!==n?W.clone():new Ri,this.direction=e!==n?e.clone():new Ri};y.assign(Ne.prototype,{set:function(a,H){return this.origin.copy(a),this.direction.copy(H),this},clone:function(){return(new this.constructor).copy(this)},copy:function(b){return this.origin.copy(b.origin),this.direction.copy(b.direction),this.maxHitLen=b.maxHitLen,this},at:function(G,N){var p=N||new Ri;return p.copy(this.direction).multiplyScalar(G).add(this.origin)},setMaxHitLength:function(X){this.maxHitLen=X},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},applyMatrix4:function(I){var N=this.maxHitLen;if(N){var L=this.direction.clone().multiplyScalar(N).add(this.origin);L.applyMatrix4(I)}return this.origin.applyMatrix4(I),this.direction.transformDirection(I),N&&(this.maxHitLen=this.origin.distanceTo(L)),this},distanceToPlane:function(u){var T=u.normal.dot(this.direction);if(0===T)return 0===u.distanceToPoint(this.origin)?0:null;var P=-(this.origin.dot(u.normal)+u.constant)/T;return P>=0?P:null},intersectPlane:function(R,o){var Y=this.distanceToPlane(R);return null===Y?null:this.at(Y,o)},intersectSphere:function(){var w=new Ri;return function(R,h){w.subVectors(R.center,this.origin);var F=w.dot(this.direction),A=w.dot(w)-F*F,d=R.radius*R.radius;if(A>d)return null;var I=Math.sqrt(d-A),U=F-I,z=F+I;return 0>U&&0>z?null:0>U?this.at(z,h):this.at(U,h)}}(),intersectEllipsoid:function(){var j=new Ri,z=new Ri;return function(C,U){j.subVectors(C.center,this.origin),j.divide(C.radius),z.divideVectors(this.direction,C.radius);var H=z.lengthSq(),g=j.dot(z),t=j.dot(j)*H-g*g;if(t>H)return null;var P=Math.sqrt(H-t),X=(g-P)/H,G=(g+P)/H;return 0>X&&0>G?null:0>X?this.at(G,U):this.at(X,U)}}(),intersectBox:function(z,e){var o,i,c,W,w,D,B=1/this.direction.x,h=1/this.direction.y,x=1/this.direction.z,l=this.origin;if(B>=0?(o=(z.min.x-l.x)*B,i=(z.max.x-l.x)*B):(o=(z.max.x-l.x)*B,i=(z.min.x-l.x)*B),h>=0?(c=(z.min.y-l.y)*h,W=(z.max.y-l.y)*h):(c=(z.max.y-l.y)*h,W=(z.min.y-l.y)*h),o>W||c>i)return null;if((c>o||o!==o)&&(o=c),(i>W||i!==i)&&(i=W),x>=0?(w=(z.min.z-l.z)*x,D=(z.max.z-l.z)*x):(w=(z.max.z-l.z)*x,D=(z.min.z-l.z)*x),o>D||w>i)return null;if((w>o||o!==o)&&(o=w),(i>D||i!==i)&&(i=D),0>i)return null;var n=o>=0?o:i,d=this.maxHitLen;return d&&n>d?null:this.at(n,e)},intersectTriangle:function(){var b=new Ri,i=new Ri,u=new Ri,A=new Ri;return function(O,c,Q,F,z){i.subVectors(c,O),u.subVectors(Q,O),A.crossVectors(i,u);var T,h=this.direction.dot(A);if(h>0){if(F)return null;T=1}else{if(!(0>h))return null;T=-1,h=-h}b.subVectors(this.origin,O);var g=T*this.direction.dot(u.crossVectors(b,u));if(0>g)return null;var W=T*this.direction.dot(i.cross(b));if(0>W||g+W>h)return null;var e=-T*b.dot(A);if(0>e)return null;var Z=e/h,t=this.maxHitLen;return t&&Z>t?null:this.at(Z,z)}}()});var wj=f.Math.Box3=function(d,l){this.min=d!==n?d:new Ri(1/0,1/0,1/0),this.max=l!==n?l:new Ri(-1/0,-1/0,-1/0)};y.assign(wj.prototype,{set:function(W,I){return this.min.copy(W),this.max.copy(I),this},setFromArray:function(X){for(var v=1/0,E=1/0,t=1/0,p=-1/0,k=-1/0,P=-1/0,e=0,n=X.length;n>e;e+=3){var l=X[e],q=X[e+1],G=X[e+2];v>l&&(v=l),E>q&&(E=q),t>G&&(t=G),l>p&&(p=l),q>k&&(k=q),G>P&&(P=G)}return this.min.set(v,E,t),this.max.set(p,k,P),this},setFromPoints:function(w){this.makeEmpty();for(var F=0,O=w.length;O>F;F++)this.expandByPoint(w[F]);return this},clone:function(){return(new this.constructor).copy(this)},intersectsBox:function(p){return p.max.x<this.min.x||p.min.x>this.max.x||p.max.y<this.min.y||p.min.y>this.max.y||p.max.z<this.min.z||p.min.z>this.max.z?!1:!0},copy:function(o){return this.min.copy(o.min),this.max.copy(o.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(f){return this.isEmpty()?f.set(0,0,0):f.addVectors(this.min,this.max).multiplyScalar(.5)},expandByPoint:function(w){return this.min.min(w),this.max.max(w),this},expandByBox:function(m){return this.min.min(m.min),this.max.max(m.max),this},applyMatrix4:function(){var a=[new Ri,new Ri,new Ri,new Ri,new Ri,new Ri,new Ri,new Ri];return function(o){return this.isEmpty()?this:(a[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(o),a[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(o),a[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(o),a[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(o),a[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(o),a[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(o),a[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(o),a[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(o),this.setFromPoints(a),this)}}()});var Gm=f.Math.Sphere=function(c,H){this.center=c!==n?c:new Ri,this.radius=H!==n?H:0};y.assign(Gm.prototype,{set:function(B,c){return this.center.copy(B),this.radius=c,this},setFromPoints:function(){var M=new wj;return function(j,W){var r=this.center;W!==n?r.copy(W):M.setFromPoints(j).getCenter(r);for(var I=0,p=0,L=j.length;L>p;p++)I=Math.max(I,r.distanceToSquared(j[p]));return this.radius=Math.sqrt(I),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(B){return this.center.copy(B.center),this.radius=B.radius,this},empty:function(){return this.radius<=0},containsPoint:function(M){return M.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(B){return B.distanceTo(this.center)-this.radius},intersectsSphere:function(x){var b=this.radius+x.radius;return x.center.distanceToSquared(this.center)<=b*b},intersectsBox:function(M){return M.intersectsSphere(this)},intersectsPlane:function(E){return Math.abs(E.distanceToPoint(this.center))<=this.radius},clampPoint:function(m,v){var q=this.center.distanceToSquared(m);return v===n&&(v=new Ri),v.copy(m),q>this.radius*this.radius&&(v.sub(this.center).normalize(),v.multiplyScalar(this.radius).add(this.center)),v},getBoundingBox:function(U){return U===n&&(U=new wj),U.set(this.center,this.center),U.expandByScalar(this.radius),U},applyMatrix4:function(b){return this.center.applyMatrix4(b),this.radius=this.radius*b.getMaxScaleOnAxis(),this},translate:function(r){return this.center.add(r),this},equals:function(Z){return Z.center.equals(this.center)&&Z.radius===this.radius}});var fh=f.Math.Frustum=function(L,i,Y,I,H,p){this.planes=[L!==n?L:new Ch,i!==n?i:new Ch,Y!==n?Y:new Ch,I!==n?I:new Ch,H!==n?H:new Ch,p!==n?p:new Ch]};y.assign(fh.prototype,{set:function(A,G,r,E,j,K){var B=this.planes;return B[0].copy(A),B[1].copy(G),B[2].copy(r),B[3].copy(E),B[4].copy(j),B[5].copy(K),this},clone:function(){return(new this.constructor).copy(this)},copy:function(O){for(var $=this.planes,f=0;6>f;f++)$[f].copy(O.planes[f]);return this},setFromMatrix:function(X){var S=this.planes,V=X.el,N=V[0],o=V[1],v=V[2],_=V[3],G=V[4],M=V[5],y=V[6],f=V[7],K=V[8],i=V[9],U=V[10],w=V[11],W=V[12],z=V[13],B=V[14],g=V[15];return S[0].setComponents(_-N,f-G,w-K,g-W).normalize(),S[1].setComponents(_+N,f+G,w+K,g+W).normalize(),S[2].setComponents(_+o,f+M,w+i,g+z).normalize(),S[3].setComponents(_-o,f-M,w-i,g-z).normalize(),S[4].setComponents(_-v,f-y,w-U,g-B).normalize(),S[5].setComponents(_+v,f+y,w+U,g+B).normalize(),this},intersectsObject:function(){var p=new Gm;return function(g){var o=g.geometry;return null===o.boundingSphere&&o.computeBoundingSphere(),p.copy(o.boundingSphere).applyMatrix4(g.matrixWorld),this.intersectsSphere(p)}}(),intersectsSprite:function(){var R=new Gm;return function(U){return R.center.set(0,0,0),R.radius=.7071067811865476,R.applyMatrix4(U.matrixWorld),this.intersectsSphere(R)}}(),intersectsSphere:function(l){for(var G=this.planes,o=l.center,D=-l.radius,m=0;6>m;m++){var O=G[m].distanceToPoint(o);if(D>O)return!1}return!0},intersectsBox:function(){var F=new Ri;return function(A){for(var J=this.planes,x=0;6>x;x++){var B=J[x];if(F.x=B.normal.x>0?A.max.x:A.min.x,F.y=B.normal.y>0?A.max.y:A.min.y,F.z=B.normal.z>0?A.max.z:A.min.z,B.distanceToPoint(F)<0)return!1}return!0}}(),containsPoint:function(Y){for(var A=this.planes,n=0;6>n;n++)if(A[n].distanceToPoint(Y)<0)return!1;return!0}});var pd=f.Math.Matrix4=function(){this.el=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};y.assign(pd.prototype,{isMatrix4:!0,set:function(j,W,R,o,M,z,Q,D,E,u,G,$,N,r,X,s){var I=this.el;return I[0]=j,I[4]=W,I[8]=R,I[12]=o,I[1]=M,I[5]=z,I[9]=Q,I[13]=D,I[2]=E,I[6]=u,I[10]=G,I[14]=$,I[3]=N,I[7]=r,I[11]=X,I[15]=s,this},clone:function(){return(new pd).fromArray(this.el)},fromArray:function(P,y){y===n&&(y=0);for(var p=this.el,l=0;16>l;l++)p[l]=P[l+y];return this},getElements:function(){return this.el},scale:function(C){var d=this.el,n=C.x,y=C.y,e=C.z;return d[0]*=n,d[4]*=y,d[8]*=e,d[1]*=n,d[5]*=y,d[9]*=e,d[2]*=n,d[6]*=y,d[10]*=e,d[3]*=n,d[7]*=y,d[11]*=e,this},translate:function(k){var z=this.el,X=k.x||0,I=k.y||0,n=k.z||0;return z[12]+=z[0]*X+z[4]*I+z[8]*n,z[13]+=z[1]*X+z[5]*I+z[9]*n,z[14]+=z[2]*X+z[6]*I+z[10]*n,z[15]+=z[3]*X+z[7]*I+z[11]*n,this},rotate:function(){var x=new pd;return function(c){return x.makeRotationFromQuaternion(c),this.multiply(x)}}(),makeRotationFromEuler:function(H){var v=this.el,Q=H._x,e=H._y,Y=H._z,i=H._order,O=Math.cos(Q),U=Math.sin(Q),$=Math.cos(e),I=Math.sin(e),y=Math.cos(Y),c=Math.sin(Y);if("XYZ"===i){var B=O*y,S=O*c,k=U*y,q=U*c;v[0]=$*y,v[4]=-$*c,v[8]=I,v[1]=S+k*I,v[5]=B-q*I,v[9]=-U*$,v[2]=q-B*I,v[6]=k+S*I,v[10]=O*$}else if("YXZ"===i){var C=$*y,R=$*c,h=I*y,K=I*c;v[0]=C+K*U,v[4]=h*U-R,v[8]=O*I,v[1]=O*c,v[5]=O*y,v[9]=-U,v[2]=R*U-h,v[6]=K+C*U,v[10]=O*$}else if("ZXY"===i){var C=$*y,R=$*c,h=I*y,K=I*c;v[0]=C-K*U,v[4]=-O*c,v[8]=h+R*U,v[1]=R+h*U,v[5]=O*y,v[9]=K-C*U,v[2]=-O*I,v[6]=U,v[10]=O*$}else if("ZYX"===i){var B=O*y,S=O*c,k=U*y,q=U*c;v[0]=$*y,v[4]=k*I-S,v[8]=B*I+q,v[1]=$*c,v[5]=q*I+B,v[9]=S*I-k,v[2]=-I,v[6]=U*$,v[10]=O*$}else if("YZX"===i){var r=O*$,F=O*I,l=U*$,X=U*I;v[0]=$*y,v[4]=X-r*c,v[8]=l*c+F,v[1]=c,v[5]=O*y,v[9]=-U*y,v[2]=-I*y,v[6]=F*c+l,v[10]=r-X*c}else if("XZY"===i){var r=O*$,F=O*I,l=U*$,X=U*I;v[0]=$*y,v[4]=-c,v[8]=I*y,v[1]=r*c+X,v[5]=O*y,v[9]=F*c-l,v[2]=l*c-F,v[6]=U*y,v[10]=X*c+r}return v[3]=0,v[7]=0,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,this},makeRotationFromQuaternion:function(p){var i=this.el,x=p._x,k=p._y,y=p._z,U=p._w,d=x+x,b=k+k,M=y+y,q=x*d,P=x*b,Y=x*M,Q=k*b,m=k*M,T=y*M,D=U*d,l=U*b,R=U*M;return i[0]=1-(Q+T),i[4]=P-R,i[8]=Y+l,i[1]=P+R,i[5]=1-(q+T),i[9]=m-D,i[2]=Y-l,i[6]=m+D,i[10]=1-(q+Q),i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},getInverse:function(Y){var b=this.el,J=Y.el,k=J[0],q=J[1],S=J[2],r=J[3],s=J[4],z=J[5],p=J[6],m=J[7],E=J[8],l=J[9],N=J[10],G=J[11],I=J[12],W=J[13],T=J[14],A=J[15],M=l*T*m-W*N*m+W*p*G-z*T*G-l*p*A+z*N*A,U=I*N*m-E*T*m-I*p*G+s*T*G+E*p*A-s*N*A,d=E*W*m-I*l*m+I*z*G-s*W*G-E*z*A+s*l*A,H=I*l*p-E*W*p-I*z*N+s*W*N+E*z*T-s*l*T,x=k*M+q*U+S*d+r*H;if(0===x)return this.identity();var e=1/x;return b[0]=M*e,b[1]=(W*N*r-l*T*r-W*S*G+q*T*G+l*S*A-q*N*A)*e,b[2]=(z*T*r-W*p*r+W*S*m-q*T*m-z*S*A+q*p*A)*e,b[3]=(l*p*r-z*N*r-l*S*m+q*N*m+z*S*G-q*p*G)*e,b[4]=U*e,b[5]=(E*T*r-I*N*r+I*S*G-k*T*G-E*S*A+k*N*A)*e,b[6]=(I*p*r-s*T*r-I*S*m+k*T*m+s*S*A-k*p*A)*e,b[7]=(s*N*r-E*p*r+E*S*m-k*N*m-s*S*G+k*p*G)*e,b[8]=d*e,b[9]=(I*l*r-E*W*r-I*q*G+k*W*G+E*q*A-k*l*A)*e,b[10]=(s*W*r-I*z*r+I*q*m-k*W*m-s*q*A+k*z*A)*e,b[11]=(E*z*r-s*l*r-E*q*m+k*l*m+s*q*G-k*z*G)*e,b[12]=H*e,b[13]=(E*W*S-I*l*S+I*q*N-k*W*N-E*q*T+k*l*T)*e,b[14]=(I*z*S-s*W*S-I*q*p+k*W*p+s*q*T-k*z*T)*e,b[15]=(s*l*S-E*z*S+E*q*p-k*l*p-s*q*N+k*z*N)*e,this},invert:function(){return this.getInverse(this)},makeRotationAxis:function(v,c){var s=Math.cos(c),I=Math.sin(c),j=1-s,Y=v.x,i=v.y,n=v.z,Z=j*Y,J=j*i;return this.set(Z*Y+s,Z*i-I*n,Z*n+I*i,0,Z*i+I*n,J*i+s,J*n-I*Y,0,Z*n-I*i,J*n+I*Y,j*n*n+s,0,0,0,0,1),this},multiply:function(Q){return this.multiplyMatrices(this,Q)},premultiply:function(X){return this.multiplyMatrices(X,this)},multiplyMatrices:function(k,V){var A=k.el||k,t=V.el||V,G=this.el,T=A[0],e=A[4],v=A[8],g=A[12],S=A[1],z=A[5],E=A[9],b=A[13],n=A[2],q=A[6],Y=A[10],f=A[14],P=A[3],l=A[7],Z=A[11],s=A[15],c=t[0],u=t[4],j=t[8],W=t[12],J=t[1],B=t[5],$=t[9],I=t[13],w=t[2],Q=t[6],y=t[10],F=t[14],a=t[3],m=t[7],O=t[11],r=t[15];return G[0]=T*c+e*J+v*w+g*a,G[4]=T*u+e*B+v*Q+g*m,G[8]=T*j+e*$+v*y+g*O,G[12]=T*W+e*I+v*F+g*r,G[1]=S*c+z*J+E*w+b*a,G[5]=S*u+z*B+E*Q+b*m,G[9]=S*j+z*$+E*y+b*O,G[13]=S*W+z*I+E*F+b*r,G[2]=n*c+q*J+Y*w+f*a,G[6]=n*u+q*B+Y*Q+f*m,G[10]=n*j+q*$+Y*y+f*O,G[14]=n*W+q*I+Y*F+f*r,G[3]=P*c+l*J+Z*w+s*a,G[7]=P*u+l*B+Z*Q+s*m,G[11]=P*j+l*$+Z*y+s*O,G[15]=P*W+l*I+Z*F+s*r,this},lookAt:function(){var Q=new Ri;return function(k,R,g){return Q.subVectors(k,R),this.lookAtDirection(Q,g)}}(),lookAtDirection:function(){var B=new Ri,K=new Ri,V=new Ri;
return function(N,A){A||(A=Ri.UP);var s=this.el;return V.copy(N),0===V.lengthSq()&&(V.z=1),V.normalize(),B.crossVectors(A,V),0===B.lengthSq()&&(1===Math.abs(A.z)?V.x+=1e-4:V.z+=1e-4,V.normalize(),B.crossVectors(A,V)),B.normalize(),K.crossVectors(V,B),s[0]=B.x,s[4]=K.x,s[8]=V.x,s[1]=B.y,s[5]=K.y,s[9]=V.y,s[2]=B.z,s[6]=K.z,s[10]=V.z,this}}(),extractScale:function(){var W;return function(v){W===n&&(W=new Ri),v===n&&(v=new Ri);var e=W.setFromMatrixColumn(this,0).length(),F=W.setFromMatrixColumn(this,1).length(),Z=W.setFromMatrixColumn(this,2).length();return v.set(e,F,Z),v}}(),extractRotation:function(){var R;return function(W){R===n&&(R=new Ri),W===n&&(W=new pd);var A=this.el,T=W.el,t=1/R.setFromMatrixColumn(W,0).length(),g=1/R.setFromMatrixColumn(W,1).length(),E=1/R.setFromMatrixColumn(W,2).length();return A[0]=T[0]*t,A[1]=T[1]*t,A[2]=T[2]*t,A[4]=T[4]*g,A[5]=T[5]*g,A[6]=T[6]*g,A[8]=T[8]*E,A[9]=T[9]*E,A[10]=T[10]*E,this}}(),multiplyScalar:function(i){var s=this.el;return s[0]*=i,s[4]*=i,s[8]*=i,s[12]*=i,s[1]*=i,s[5]*=i,s[9]*=i,s[13]*=i,s[2]*=i,s[6]*=i,s[10]*=i,s[14]*=i,s[3]*=i,s[7]*=i,s[11]*=i,s[15]*=i,this},getPosition:function(M){return M===n&&(M=new Ri),M.setFromMatrixColumn(this,3)},setPosition:function(A){var F=this.el;return F[12]=A.x,F[13]=A.y,F[14]=A.z,this},copyPosition:function(g){var d=this.el,_=g.el;return d[12]=_[12],d[13]=_[13],d[14]=_[14],this},toArray:function(F,P){F===n&&(F=[]),P===n&&(P=0);var J=this.el;return F[P]=J[0],F[P+1]=J[1],F[P+2]=J[2],F[P+3]=J[3],F[P+4]=J[4],F[P+5]=J[5],F[P+6]=J[6],F[P+7]=J[7],F[P+8]=J[8],F[P+9]=J[9],F[P+10]=J[10],F[P+11]=J[11],F[P+12]=J[12],F[P+13]=J[13],F[P+14]=J[14],F[P+15]=J[15],F},determinant:function(){var r=this.el||this,i=r[0],h=r[4],q=r[8],y=r[12],w=r[1],I=r[5],S=r[9],e=r[13],J=r[2],p=r[6],Z=r[10],_=r[14],B=r[3],A=r[7],U=r[11],t=r[15];return B*(+y*S*p-q*e*p-y*I*Z+h*e*Z+q*I*_-h*S*_)+A*(+i*S*_-i*e*Z+y*w*Z-q*w*_+q*e*J-y*S*J)+U*(+i*e*p-i*I*_-y*w*p+h*w*_+y*I*J-h*e*J)+t*(-q*I*J-i*S*p+i*I*Z+q*w*p-h*w*Z+h*S*J)},copy:function(v){var P=this.el,x=v.el||v;return P[0]=x[0],P[1]=x[1],P[2]=x[2],P[3]=x[3],P[4]=x[4],P[5]=x[5],P[6]=x[6],P[7]=x[7],P[8]=x[8],P[9]=x[9],P[10]=x[10],P[11]=x[11],P[12]=x[12],P[13]=x[13],P[14]=x[14],P[15]=x[15],this},composeFromArray:function(A,I,E){var U,c,f,s,j,H,R,g,r,Q,F=this.el;I?(U=I[0],c=I[1],f=I[2],s=I[3]):(U=0,c=0,f=0,s=1);var X=U+U,_=c+c,l=f+f,x=U*X,b=U*_,B=U*l,v=c*_,k=c*l,M=f*l,m=s*X,O=s*_,S=s*l;return E?(j=E[0],H=E[1],R=E[2]):j=H=R=1,A?(g=A[0],r=A[1],Q=A[2]):g=r=Q=0,F[0]=(1-(v+M))*j,F[1]=(b+S)*j,F[2]=(B-O)*j,F[3]=0,F[4]=(b-S)*H,F[5]=(1-(x+M))*H,F[6]=(k+m)*H,F[7]=0,F[8]=(B+O)*R,F[9]=(k-m)*R,F[10]=(1-(x+v))*R,F[11]=0,F[12]=g,F[13]=r,F[14]=Q,F[15]=1,this},compose:function(r,L,w){var E=this.el,l=L._x,f=L._y,z=L._z,e=L._w,U=l+l,p=f+f,I=z+z,d=l*U,j=l*p,G=l*I,W=f*p,V=f*I,y=z*I,_=e*U,H=e*p,T=e*I,M=w.x,a=w.y,h=w.z;return E[0]=(1-(W+y))*M,E[1]=(j+T)*M,E[2]=(G-H)*M,E[3]=0,E[4]=(j-T)*a,E[5]=(1-(d+y))*a,E[6]=(V+_)*a,E[7]=0,E[8]=(G+H)*h,E[9]=(V-_)*h,E[10]=(1-(d+W))*h,E[11]=0,E[12]=r.x,E[13]=r.y,E[14]=r.z,E[15]=1,this},decompose:function(){var W=new Ri,A=new pd;return function(u,w,N){var z=this.el,m=W.set(z[0],z[1],z[2]).length(),l=W.set(z[4],z[5],z[6]).length(),j=W.set(z[8],z[9],z[10]).length(),e=this.determinant();0>e&&(m=-m),u.x=z[12],u.y=z[13],u.z=z[14],A.copy(this);var I=1/m,H=1/l,v=1/j;return A.el[0]*=I,A.el[1]*=I,A.el[2]*=I,A.el[4]*=H,A.el[5]*=H,A.el[6]*=H,A.el[8]*=v,A.el[9]*=v,A.el[10]*=v,w.setFromRotationMatrix(A),N.x=m,N.y=l,N.z=j,this}}(),equals:function(N){for(var j=this.el,J=N.el,z=0;16>z;z++)if(j[z]!==J[z])return!1;return!0}});var Gh=new pd,bf=new pd;pd.determinantOfArray=function(){var m=f.Math.Matrix4.prototype.determinant;return function(A){return A?m.call(A):0}}(),pd.multiplyMatrixArray=function(N,J,X,L,j,G){var S=N.el||N,D=J.el||J,q=X.el||X,R=D[j+0],T=D[j+4],Z=D[j+8],h=D[j+12],B=D[j+1],t=D[j+5],_=D[j+9],v=D[j+13],a=D[j+2],M=D[j+6],O=D[j+10],w=D[j+14],u=D[j+3],W=D[j+7],p=D[j+11],e=D[j+15],$=q[G+0],k=q[G+4],Q=q[G+8],o=q[G+12],Y=q[G+1],b=q[G+5],U=q[G+9],y=q[G+13],f=q[G+2],C=q[G+6],n=q[G+10],m=q[G+14],z=q[G+3],l=q[G+7],i=q[G+11],d=q[G+15];return S[L+0]=R*$+T*Y+Z*f+h*z,S[L+4]=R*k+T*b+Z*C+h*l,S[L+8]=R*Q+T*U+Z*n+h*i,S[L+12]=R*o+T*y+Z*m+h*d,S[L+1]=B*$+t*Y+_*f+v*z,S[L+5]=B*k+t*b+_*C+v*l,S[L+9]=B*Q+t*U+_*n+v*i,S[L+13]=B*o+t*y+_*m+v*d,S[L+2]=a*$+M*Y+O*f+w*z,S[L+6]=a*k+M*b+O*C+w*l,S[L+10]=a*Q+M*U+O*n+w*i,S[L+14]=a*o+M*y+O*m+w*d,S[L+3]=u*$+W*Y+p*f+e*z,S[L+7]=u*k+W*b+p*C+e*l,S[L+11]=u*Q+W*U+p*n+e*i,S[L+15]=u*o+W*y+p*m+e*d,N};var Kc=f.Math.Triangle=function(H,E,N){this.a=H!==n?H:new Ri,this.b=E!==n?E:new Ri,this.c=N!==n?N:new Ri};y.assign(Kc,{barycoordFromPoint:function(){var F=new Ri,a=new Ri,w=new Ri;return function(Y,s,L,Q,k){F.subVectors(Q,s),a.subVectors(L,s),w.subVectors(Y,s);var n=F.dot(F),X=F.dot(a),r=F.dot(w),o=a.dot(a),g=a.dot(w),u=n*o-X*X,N=k||new Ri;if(0===u)return N.set(-2,-1,-1);var $=1/u,O=(o*r-X*g)*$,z=(n*g-X*r)*$;return N.set(1-O-z,z,O)}}(),uvIntersection:function(){var Z=new Ri;return function(S,r,e,t,x,Q,R){return Kc.barycoordFromPoint(S,r,e,t,Z),x.multiplyScalar(Z.x),Q.multiplyScalar(Z.y),R.multiplyScalar(Z.z),x.add(Q).add(R),x.clone()}}()});var Cm=f.Math.Euler=function(x,m,d,W,s){this.set(x,m,d,W,s)};Cm.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Cm.DefaultOrder="XYZ",Cm.ReverseOrder=function(){var k={xyz:"ZYX",xzy:"YZX",yxz:"ZXY",yzx:"XZY",zxy:"YXZ",zyx:"XYZ"};return function(M){return k[M]}}(),y.defineProperties(Cm.prototype,{x:{get:function(){return this._x},set:function(m){this._x=m,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(y){this._y=y,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(_){this._z=_,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(V){this._order=V,this.onChangeCallback()}}}),y.assign(Cm.prototype,{set:function(c,e,o,u,E){return Se(c)&&(E=o,u=e,o=c[2],e=c[1],c=c[0]),u?E&&(u=Cm.ReverseOrder(u)):u="ZYX",this._x=c||0,this._y=e||0,this._z=o||0,this._order=u||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(x){return this._x=x._x,this._y=x._y,this._z=x._z,this._order=x._order,this.onChangeCallback(),this},setFromRotationMatrix:function(I,F,B){var u=f.Math.clamp,R=I.el||I,e=R[0],G=R[4],_=R[8],X=R[1],D=R[5],m=R[9],V=R[2],i=R[6],y=R[10];return F=F||this._order,"XYZ"===F?(this._y=Math.asin(u(_,-1,1)),Math.abs(_)<.99999?(this._x=Math.atan2(-m,y),this._z=Math.atan2(-G,e)):(this._x=Math.atan2(i,D),this._z=0)):"YXZ"===F?(this._x=Math.asin(-u(m,-1,1)),Math.abs(m)<.99999?(this._y=Math.atan2(_,y),this._z=Math.atan2(X,D)):(this._y=Math.atan2(-V,e),this._z=0)):"ZXY"===F?(this._x=Math.asin(u(i,-1,1)),Math.abs(i)<.99999?(this._y=Math.atan2(-V,y),this._z=Math.atan2(-G,D)):(this._y=0,this._z=Math.atan2(X,e))):"ZYX"===F?(this._y=Math.asin(-u(V,-1,1)),Math.abs(V)<.99999?(this._x=Math.atan2(i,y),this._z=Math.atan2(X,e)):(this._x=0,this._z=Math.atan2(-G,D))):"YZX"===F?(this._z=Math.asin(u(X,-1,1)),Math.abs(X)<.99999?(this._x=Math.atan2(-m,D),this._y=Math.atan2(-V,e)):(this._x=0,this._y=Math.atan2(_,y))):"XZY"===F?(this._z=Math.asin(-u(G,-1,1)),Math.abs(G)<.99999?(this._x=Math.atan2(i,D),this._y=Math.atan2(_,e)):(this._x=Math.atan2(-m,y),this._y=0)):console.warn("unsupported order: "+F),this._order=F,B!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var Q=new pd;return function(e,E,U){return Q.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Q,E,U)}}(),setFromVector3:function(u,s){return this.set(u.x,u.y,u.z,s||this._order)},reorder:function(){var C=new zn;return function(l){return C.setFromEuler(this),this.setFromQuaternion(C,l)}}(),equals:function(j){return j._x===this._x&&j._y===this._y&&j._z===this._z&&j._order===this._order},fromArray:function(x){return this._x=x[0],this._y=x[1],this._z=x[2],x[3]!==n&&(this._order=x[3]),this.onChangeCallback(),this},toArray:function(a,F){return a===n&&(a=[]),F===n&&(F=0),a[F]=this._x,a[F+1]=this._y,a[F+2]=this._z,a[F+3]=this._order,a},toVector3:function(i){return i?i.set(this._x,this._y,this._z):new Ri(this._x,this._y,this._z)},onChange:function(_){return this.onChangeCallback=_,this},onChangeCallback:function(){}});var Rc=f.Math.Interpolant=function(j,_,S){this.parameterPositions=j,this._cachedIndex=0;var l=_.length/j.length;this.resultBuffer=S!==n?S:new _.constructor(l),this.sampleValues=_,this.valueSize=l,this.settings=null,this.DefaultSettings_={}};y.assign(Rc.prototype,{evaluate:function(z){var m=this.parameterPositions,F=this._cachedIndex,Q=m[F],h=m[F-1];a:{b:{var r;c:{d:if(!(Q>z)){for(var E=F+2;;){if(Q===n){if(h>z)break d;return F=m.length,this._cachedIndex=F,this.afterEnd_(F-1,z,h)}if(F===E)break;if(h=Q,Q=m[++F],Q>z)break b}r=m.length;break c}if(z>=h)break a;var I=m[1];I>z&&(F=2,h=I);for(var E=F-2;;){if(h===n)return this._cachedIndex=0,this.beforeStart_(0,z,Q);if(F===E)break;if(Q=h,h=m[--F-1],z>=h)break b}r=F,F=0}for(;r>F;){var V=F+r>>>1;z<m[V]?r=V:F=V+1}if(Q=m[F],h=m[F-1],h===n)return this._cachedIndex=0,this.beforeStart_(0,z,Q);if(Q===n)return F=m.length,this._cachedIndex=F,this.afterEnd_(F-1,h,z)}this._cachedIndex=F,this.intervalChanged_(F,h,Q)}return this.interpolateImpl(F,h,z,Q)},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(E){for(var D=this.resultBuffer,F=this.sampleValues,J=this.valueSize,C=E*J,k=0;k!==J;++k)D[k]=F[C+k];return D},interpolateImpl:function(){},intervalChanged_:function(){}}),Rc.prototype.beforeStart_=Rc.prototype.copySampleValue_,Rc.prototype.afterEnd_=Rc.prototype.copySampleValue_,a.prototype=y.create(Rc.prototype),a.prototype.interpolateImpl=function(E){return this.copySampleValue_(E-1)},J.prototype=y.create(Rc.prototype),J.prototype.interpolateImpl=function(F,t,Q,v){for(var H=this.resultBuffer,X=this.sampleValues,D=this.valueSize,o=F*D,J=o-D,B=(Q-t)/(v-t),U=1-B,y=0;y!==D;++y)H[y]=X[J+y]*U+X[o+y]*B;return H},u.prototype=y.create(Rc.prototype),u.prototype.interpolateImpl=function(Y,t,U,n){for(var g=this.resultBuffer,A=this.sampleValues,x=this.valueSize,L=(U-t)/(n-t),i=Y*x,X=i+x;i!==X;i+=4)zn.slerpFlat(g,0,A,i-x,A,i,L);return g},d.prototype=y.create(Rc.prototype),d.prototype.intervalChanged_=function(M,Z,J){var r=this.parameterPositions,O=M-2,P=M+1,E=r[O],N=r[P];if(E===n)switch(this.getSettings_().endingStart){case"ZeroSlope":O=M,E=2*Z-J;break;case"WrapAround":O=r.length-2,E=Z+r[O]-r[O+1];break;default:O=M,E=J}if(N===n)switch(this.getSettings_().endingEnd){case"ZeroSlope":P=M,N=2*J-Z;break;case"WrapAround":P=1,N=J+r[1]-r[0];break;default:P=M-1,N=Z}var f=.5*(J-Z),d=this.valueSize;this._weightPrev=f/(Z-E),this._weightNext=f/(N-J),this._offsetPrev=O*d,this._offsetNext=P*d},d.prototype.interpolateImpl=function(t,l,a,C){for(var P=this.resultBuffer,i=this.sampleValues,H=this.valueSize,R=t*H,y=R-H,p=this._offsetPrev,W=this._offsetNext,n=this._weightPrev,r=this._weightNext,O=(a-l)/(C-l),G=O*O,z=G*O,f=-n*z+2*n*G-n*O,J=(1+n)*z+(-1.5-2*n)*G+(-.5+n)*O+1,m=(-1-r)*z+(1.5+r)*G+.5*O,e=r*z-r*G,Z=0;Z!==H;++Z)P[Z]=f*i[p+Z]+J*i[y+Z]+m*i[R+Z]+e*i[W+Z];return P};var hs={ms_ac:function(Z,l){for(var P=l.ms_ac,V=0;V<P.length;V++)pc(Z,P[V])},ms_listener:function(S){S.addListeners=function(){var y=this,$=df;Q.mockTouch&&($=np.concat(dm).concat(kl)),y.__events__=$;for(var G=0,j=$.length;j>G;G++){var s=$[G];"wheel"===s&&!y.handle_wheel&&y.handle_mousewheel&&(y.handle_wheel=function(k){xq(y,k)}),y["handle_"+s]&&fc(s,y.getView(),y)}},S.removeListeners=function(){var _=this,p=_.__events__;if(p){_.__events__=n;for(var D=0,Z=p.length;Z>D;D++)_["handle_"+p[D]]&&tk(p[D],_.getView(),_)}}},ms_fire:function(z){z.mp=function(c,P,E){this.addPropertyChangeListener(c,P,E)},z.ump=function(F,P){this.removePropertyChangeListener(F,P)},z.fp=function(M,F,D,Y,n){return this.firePropertyChange(M,F,D,Y,n)},z.addPropertyChangeListener=function(W,U,d){var n=this;n._62I||(n._62I=new mf),n._62I.add(W,U,d)},z.removePropertyChangeListener=function(L,X){this._62I&&this._62I.remove(L,X)},z.firePropertyChange=function(_,j,L,Z,d){if(Z){if(Z(j,L))return!1}else if(j===L)return!1;var Q=this,H=d||{};return H.property=_,H.oldValue=j,H.newValue=L,H.source=Q,H.data=Q,Q._62I&&Q._62I.fire(H),Q.onPropertyChanged&&Q.onPropertyChanged(H),!0}},ms_attr:function(R){R.a=function(b,P){var D=this;if(2===arguments.length)D.setAttr(b,P);else{if(!Yo(b))return D.getAttr(b);for(var L in b)D.setAttr(L,b[L])}return D},R.getAttr=function(U,k){if(k===n&&(k=1),this._attrObject&&U in this._attrObject)return this._attrObject[U];if(this.getImage){var Y=this.getImage();if(Vp(Y)&&(Y=qq[Y]),Yo(Y)&&"dataBindings"in Y)for(var y=Y.dataBindings,e=y.length-1;e>=0;e--){var W=y[e];if(W.attr===U){if("defaultValue"in W)return W.defaultValue;break}}}return k?E[U]:n},R.setAttr=function(k,H){var t=this;t._attrObject||(t._attrObject={});var Q=t._attrObject[k];H===n?delete t._attrObject[k]:t._attrObject[k]=H,t.fp&&t.fp("a:"+k,Q,H)&&t.onAttrChanged&&t.onAttrChanged(k,Q,H)},R.getSerializableAttrs=function(){var k,h={};for(k in this._attrObject)h[k]=1;return h}},ms_bnb:function(f){f.getBodyColor=function(w){return w.s("body.color")},f.getBorderColor=function(B){return B.s("border.color")}},_51o:function(l){l.mi=function(e,D,o){this.addInteractorListener(e,D,o)},l.umi=function(P,e){this.removeInteractorListener(P,e)},l.fi=function(T){this.fireInteractorEvent(T)},l.addInteractorListener=function(b,H,z){var q=this;q._63I||(q._63I=new mf),q._63I.add(b,H,z)},l.removeInteractorListener=function(Y,m){this._63I&&this._63I.remove(Y,m)},l.fireInteractorEvent=function(g){this._63I&&this._63I.fire(g)},l.setInteractors=function(z){var P=this,m=P._interactors;m&&m.each(function(A){A.tearDown()}),Se(z)&&(z=new td(z)),P._interactors=z,z&&z.each(function(u){u.setUp()}),P.fp("interactors",m,z),P.invalidateSelection()},l.getInteractors=function(){return this._interactors}},_49o:function(d){d._44O=O,d._45O=O,d.getTopPainters=function(){return this._44O},d.getBottomPainters=function(){return this._45O},d.addTopPainter=function(x){var q=this;q._44O||(q._44O=new td),q._44O.contains(x)||(q._44O.add(x),q.redraw&&q.redraw())},d.removeTopPainter=function(m){var R=this;R._44O&&(R._44O.remove(m),R.redraw&&R.redraw())},d.addBottomPainter=function(w){var D=this;D._45O||(D._45O=new td),D._45O.contains(w)||(D._45O.add(w),D.redraw&&D.redraw())},d.removeBottomPainter=function(x){var m=this;m._45O&&(m._45O.remove(x),m.redraw&&m.redraw())},d._93db=function(Q,A){var d=this;d._45O&&d._45O.each(function(e){e.draw?e.draw(Q,A):e.call(d,Q,A)})},d._92db=function(f,M){var C=this;C._44O&&C._44O.each(function(G){G.draw?G.draw(f,M):G.call(C,f,M)})}},ms_sm:function(t){t.sm=function(){return this.getSelectionModel()},t.setSelectableFunc=function(g){this.sm().setFilterFunc(g)},t.getSelectableFunc=function(){return this.sm().getFilterFunc()},t.getSelectionModel=function(){var l=this;return l._selectionModel?l._selectionModel:l.dm().sm()},t.isSelectionModelShared=function(){return!this._selectionModel},t.setSelectionModelShared=function(F){var y=this,z=y.sm(),M=!y._selectionModel,T=y.handleSelectionChange,r=y.dm();M!==F&&(y.invalidateSelection&&y.invalidateSelection(),F?(r.sm().ms(T,y),y._selectionModel.ums(T,y),y._selectionModel.dispose(),y._selectionModel=O):(r.sm().ums(T,y),y._selectionModel=new ed(r),y._selectionModel.ms(T,y)),y.onSelectionModelSharedChanged(),y.fp("selectionModelShared",M,F),y.fireViewEvent({kind:"selectionModelSharedChange",oldValue:M,newValue:F,oldSelectionModel:z,newSelectionModel:y.sm()}))},t.onSelectionModelSharedChanged=function(){var o=this;o.redraw(),o.invalidateSelection&&o.invalidateSelection()},t.removeSelection=function(){var n=this.dm();n.beginTransaction(),this.sm().toSelection().each(n.remove,n),n.endTransaction()},t.selectAll=function(){var x=this;x.sm().ss(x.dm().toDatas(function(U){return x.isVisible(U)&&x.isSelectable(U)}))},t.isSelected=function(o){return this.sm().co(o)},t.isSelectedById=function(Z){var $=this.dm().getDataById(Z);return $?this.isSelected($):!1},t.isSelectable=function($){return this.sm().isSelectable($)}},ms_tx:function(b){b._64I=0,b._65O=0,b.isScrollable=function(){return this.getWidth()<this._64I},b._40o=function(){return this.isScrollable()},b.getLogicalPoint=function(n){return Re(n,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},b.tx=function(E){return E===n?this.getTranslateX():(this.setTranslateX(E),void 0)},b.getTranslateX=function(){return this._65O},b.setTranslateX=function(Y){var k=this,E=k.getWidth()-k._64I;E>Y&&(Y=E),Y>0&&(Y=0),Y=j(Y);var L=k._65O;k._65O=Y,k.fp(Od,L,Y)}},ms_ty:function(E){E._23Q=0,E._66O=0,E._41o=function(){return this.getHeight()<this._23Q},E.getLogicalPoint=function(d){return Re(d,this._canvas||this._view,this.tx?this.tx():0,this.ty())},E.ty=function(C){return C===n?this.getTranslateY():(this.setTranslateY(C),void 0)},E.getTranslateY=function(){return this._66O},E.setTranslateY=function(J){var x=this,G=x.getHeight()-x._23Q;G>J&&(J=G),J>0&&(J=0),J=j(J);var I=x._66O;x._66O=J,x.fp(Fb,I,J)}},ms_txy:function(N){N._65O=0,N._66O=0,N.tx=function(C){return C===n?this.getTranslateX():(this.setTranslateX(C),void 0)},N.ty=function(b){return b===n?this.getTranslateY():(this.setTranslateY(b),void 0)},N.onTranslateEnded=function(){},N.setTranslate=function(d,D,w){var S=this;if(w=Ub(w)){S._65I&&S._65I.stop(!0);var y=S.tx(),x=S.ty();w.action=function(L){S.setTranslate(y+(d-y)*L,x+(D-x)*L)},w._37o=function(){delete S._66I,delete S._65I,S.onTranslateEnded()},S._66I=1,S._65I=nd(w)}else S.tx(d),S.ty(D)},N.getTranslateX=function(){return this._65O},N.setTranslateX=function(M){var W=this;M=W.adjustTranslateX(M);var G=W._65O;W._65O=M,W.fp(Od,G,M)},N.getTranslateY=function(){return this._66O},N.setTranslateY=function(I){var v=this;I=v.adjustTranslateY(I);var Y=v._66O;v._66O=I,v.fp(Fb,Y,I)},N.adjustTranslateX=function(h){return j(h)},N.adjustTranslateY=function(J){return j(J)},N.translate=function(b,W,a){this.setTranslate(this.tx()+b,this.ty()+W,a)},N.getLogicalPoint=function(O){var B=this;return Re(O,this._canvas||B._view,B.tx(),B.ty())}},ms_dm:function(v){v.dm=function(E){return E?(this.setDataModel(E),void 0):this.getDataModel()},v.getDataModel=function(){return this._dataModel}},ms_lp:function($){$.lp=function(j){return this.getLogicalPoint(j)}},ms_v:function(V){V._disabled=!1,V.setDisabled=function(u,G){var f=this,$=f._disabled;$!==u&&($&&(jf(f._63O),delete f._63O),u&&(Vi(f._view,f._63O=zs(G)),f.iv()),f._disabled=u,f.fp("disabled",$,u))},V.isDisabled=function(){return this._disabled},V.getDisabledDiv=function(){return this._63O},V.getView=function(){return this._view},V.addToDOM=function(x){var L=this,G=L.getView(),W=G.style;x=x||k.body,x.appendChild(G),W.left="0",W.right="0",W.top="0",W.bottom="0",e(H,"resize",function(){L.iv()}),L.iv()},V.setCursor=function(R){"default"===R&&(R=this._defaultCursor||R);var o=this.getView().style;o.cursor=R,o.cursor="-webkit-"+R,o.cursor="-moz-"+R},V.getWidth=function(){return this._view.clientWidth},V.getHeight=function(){return this._view.clientHeight},V.setWidth=function(x){var a=this;a._view.style.width=x+hi,a.iv(),a.fp&&a.fp(ds,O,x)},V.setHeight=function(Y){var l=this;l._view.style.height=Y+hi,l.iv(),l.fp&&l.fp(mg,O,Y)},V.setFocus=function(C){var u=this,H=u._currentEditor;return C&&H&&(H.getView&&(H=H.getView()),H.contains(C.target))?!1:(Ce(u._view),u.endEditing&&u.endEditing(),u.fireViewEvent("focus"),!0)},V.iv=function(d){this.invalidate(d)},V.invalidate=function(h){var s=this;s._68I||(s._68I=1,s._ivTimerId=Ad(s._validateImpl,s,O,h),s._ivTimerDelay=h,s.onInvalidated&&s.onInvalidated(),s.fireViewEvent("invalidate"))},V.validate=function(){var M=this._ivTimerId,r=this._ivTimerDelay;this._validateImpl()!==!1&&M&&ln(M,r)},V._validateImpl=function(){var I=this,e=I._view;if(!I._68I)return!1;if(delete I._68I,e.parentNode)if(0===e.offsetWidth&&0===e.offsetHeight&&I._67I!==O)I._67I===n&&(I._67I=Q.reinvalidateCount),I._67I>0?I._67I--:I._67I=O,I.iv();else{I.fireViewEvent("beginValidate"),I.validateImpl(),I.onValidated&&I.onValidated(),I.fireViewEvent("validate");var f=I._63O;f&&(e.lastChild!==f&&(jf(f),Vi(e,f)),oc(f,0,0,I.getWidth(),I.getHeight())),dk(I),qd(I),_g(I),Xn(I)}},V.layout=function(P,E,F,Z){1===arguments.length?oc(this,P):oc(this,P,E,F,Z)},V.addViewListener=function(_,j,C){var B=this;B._67O||(B._67O=new mf),B._67O.add(_,j,C)},V.removeViewListener=function(X,o){this._67O.remove(X,o)},V.fireViewEvent=function(n){var W=this;W._67O&&(Vp(n)&&(n={kind:n}),W._67O.fire(n)),Q.viewListener&&Q.viewListener(W,n)}},ms_tip:function(B){B.setToolTipEnabled=function(B){var W=this;B?eb||W._13o||(W.enableToolTip(),W.fp("toolTipEnabled",!1,!0)):W._13o&&(W.disableToolTip(),W.fp("toolTipEnabled",!0,!1))},B.isToolTipEnabled=function(){return!!this._13o},B.enableToolTip=function(){var R=this;if(!eb&&!R._13o){R._13o=function(G){if(!G.toolTipView){G.toolTipView=R;var y=R.getToolTip(G);y!=O?(Q.toolTipContinual&&Q.isToolTipShowing()?Qg(G,y):(Sk(),bn={timeout:yd(as,kr),e:G,info:y}),eh={e:G,view:R}):Sk()}};var N=R.getView();e(N,hm,R._13o),e(N,"mouseleave",Q.hideToolTip)}},B.disableToolTip=function(){var i=this;if(i._13o){var N=i.getView();V(N,hm,i._13o),V(N,"mouseleave",Q.hideToolTip),delete i._13o}},B.getToolTip=function(s){var U=this;if(U.getDataAt){var v=U.getDataAt(s);return v?v.getToolTip():O}return U.getValue?U.getValue():void 0}},_52o:function(n){n._zoom=1,n._29I=rm,n.zoomIn=function(V,D){this.setZoom(this._zoom*sr,V,D)},n.zoomOut=function(A,l){this.setZoom(this._zoom/sr,A,l)},n.zoomReset=function(W,A){this.setZoom(1,W,A)},n.scrollZoomIn=function(V){this.setZoom(this._zoom*fm,O,V)},n.scrollZoomOut=function(e){this.setZoom(this._zoom/fm,O,e)},n.pinchZoomIn=function(B){this.setZoom(this._zoom*Qh,O,B)},n.pinchZoomOut=function(E){this.setZoom(this._zoom/Qh,O,E)},n.adjustZoom=function(H){return Xk>H?Xk:H>fk?fk:H},n.getZoom=function(){return this._zoom},n.setZoom=function(b,d,q){var B=this;if(d=Ub(d)){B._14o&&B._14o.stop(!0);var L=B._zoom;d.action=function(M){B._96O(L+(b-L)*M,q)},d._37o=function(){delete B._zooming,delete B._14o,B.onZoomEnded()},B._zooming=1,B._14o=nd(d)}else B._96O(b,q)},n._96O=function(B,g){var y=this;if(B=y.adjustZoom(B),B!==y._zoom){y.validate();var z=y._29I,t=y._zoom;0!==z.width&&0!==z.height&&(g=g?g:{x:z.x+z.width/2,y:z.y+z.height/2},y.tx((g.x-z.x)*t-g.x*B),y.ty((g.y-z.y)*t-g.y*B)),y._zoom=B,y.fp("zoom",t,B)}}},ms_edge:function(M){M._2I=function(J){var g=this;g._44I||(g._44I=new td),g._42I||(g._42I=new td),g._44I.add(J),g._42I.add(J),g._20I()},M._4I=function(b){var O=this;O._44I||(O._44I=new td),O._43I||(O._43I=new td),O._44I.add(b),O._43I.add(b),O._20I()},M._16I=function($){var _=this;_._44I.remove($),_._42I.remove($),_._44I.isEmpty()&&delete _._44I,_._42I.isEmpty()&&delete _._42I,_._20I()},M._18I=function(v){var e=this;e._44I.remove(v),e._43I.remove(v),e._44I.isEmpty()&&delete e._44I,e._43I.isEmpty()&&delete e._43I,e._20I()},M._20I=function(){var $=this;if(delete $._45I,!$._44I||$._44I.isEmpty())return delete $._70O,void 0;var u;$._44I.each(function(Q){Q.isLooped()&&(u||(u={}),u[Q._id]||($._45I||($._45I=new td),$._45I.add(Q),u[Q._id]=Q))}),u?($._70O=new td,$._44I.each(function(_){u[_._id]?"A"===u[_._id]||(u[_._id]="A",$._70O.add(_)):$._70O.add(_)})):$._70O=$._44I},M.hasAgentEdges=function(){return!!this._49I&&!this._49I.isEmpty()},M.getSourceAgentEdges=function(){return this._46I},M.getTargetAgentEdges=function(){return this._47I},M._1I=function(h){var _=this;_._46I||(_._46I=new td),_._48I||(_._48I=new td),_._46I.add(h),_._48I.add(h),_._19I()},M._3I=function(x){var H=this;H._47I||(H._47I=new td),H._48I||(H._48I=new td),H._47I.add(x),H._48I.add(x),H._19I()},M._15I=function(r){var E=this;E._46I.remove(r),E._48I.remove(r),E._46I.isEmpty()&&delete E._46I,E._48I.isEmpty()&&delete E._48I,E._19I()},M._17I=function(b){var C=this;C._47I.remove(b),C._48I.remove(b),C._47I.isEmpty()&&delete C._47I,C._48I.isEmpty()&&delete C._48I,C._19I()},M._19I=function(){var z=this;delete z._49I;var C=z._48I;if(C&&!C.isEmpty()){var S={};C.each(function(E){S[E._id]?z._49I||(z._49I=new td):S[E._id]=E}),z._49I?C.each(function(P){S[P._id]&&(z._49I.add(P),delete S[P._id])}):z._49I=C}},M.getLoopedEdges=function(){return this._45I},M.getEdges=function(){return this._70O},M.getAgentEdges=function(){return this._49I},M.getSourceEdges=function(){return this._42I},M.getTargetEdges=function(){return this._43I},M._8I=function(){this._70O&&this._70O.each(function(_){_._7I()})}}};og(Q,{getVersion:function(){return"7.6.0-dev24"}},!0);var Kq=function(l){return l.devicePixelRatio?l.devicePixelRatio:l.screen&&l.screen.logicalXDPI?l.screen.deviceXDPI/l.screen.logicalXDPI:1};og(Q,{numberDigits:5,crossOrigin:"",baseZIndex:n,isTouchable:eb,mockTouch:!0,devicePixelRatio:Kq(H),reinvalidateCount:3,hitMaxArea:3e3,imageCacheThreshold:20,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:l.disabledBackground,forceHierarchicalSerialization:!0,extractBatchTranslation:!1,extractShapeTranslation:!1,extractPolylineTranslation:!1,extractVerticesTranslation:!1,envmapProbeMinWaitTime:300,envmapProbeMaxWaitTime:25e3,EnvmapTextureSize:1024,hoverDelay:600,clickDelay:200,toolTipDelay:800,toolTipContinual:!1,getDragger:function(){return Nh},lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],blockMinSize:1,textExtraWidth:4,encodeStringKey:null,doubleClickSpeed:500,doubleClickRange:1,doubleTouchRange:20,touchMoveThreshold:10,animDuration:200,animEasing:function(D){return D*D},labelColor:gm,labelSelectColor:Bk,labelFont:"12px arial, sans-serif",widgetIndent:eb?30:20,widgetRowHeight:eb?30:20,widgetHeaderHeight:eb?32:22,widgetTitleHeight:eb?34:24,scrollBarColor:tf,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:eb?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,pinchZoomThreshold:1,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:Fl,intersectionLineLine:Vj,isEnter:Fe,isEsc:af,isDelete:lm,isSpace:vr,isLeft:nn,isUp:Fq,isRight:Fk,isDown:No,isTouchEvent:Nd,getTarget:re,isString:Vp,isNumber:fe,isBoolean:vd,isArray:Se,isSelectAll:bj,isFunction:Le,isObject:Yo,getPropertyValue:ah,setPropertyValue:oj,addMethod:og,createGradient:function(D,R,M,t,o,x,X,K){var E=ci[R];return E(D,M,t,o,x,X,K)},appendToScreen:function(j){j=j.getView?j.getView():j,(k.fullscreenElement||k.mozFullScreenElement||k.webkitFullscreenElement||k.msFullscreenElement||k.body).appendChild(j)},encodeString:function(r){return f.Math.encodeBase64(r,Q.encodeStringKey)},decodeString:function(K){return f.Math.decodeBase64(K,Q.encodeStringKey)},findView:function(C){var W=function(E,I){var Z=I._ht;Z&&E.push(Z);var r=I.children,f=r.length;if(f)for(var T=0;f>T;T++)W(E,r[T])},e=[];W(e,k.body);var I=function(N,u){for(var w="2d"===u?mo.GraphView:ch.Graph3dView,V=0,F=N.length;F>V;V++)if(N[V]instanceof w)return e[V];return null};return"all"===C?e:"2d"===C?I(e,"2d"):"3d"===C?I(e,"3d"):I(e,"3d")||I(e,"2d")},toggleFullscreen:function(p){var U=p.getView();if(k.fullscreenElement||k.mozFullScreenElement||k.webkitFullscreenElement||k.msFullscreenElement)k.exitFullscreen?k.exitFullscreen():k.msExitFullscreen?k.msExitFullscreen():k.mozCancelFullScreen?k.mozCancelFullScreen():k.webkitExitFullscreen&&k.webkitExitFullscreen();else{var m=!0;if(p.isSelfViewEvent){var b=p.getX(),H=p.getY(),K=p.getWidth(),q=p.getHeight(),I=U.style.background,y=U.style.backgroundColor;I||y||(U.style.backgroundColor="white"),U.requestFullscreen?U.requestFullscreen():U.msRequestFullscreen?U.msRequestFullscreen():U.mozRequestFullScreen?U.mozRequestFullScreen():U.webkitRequestFullscreen&&U.webkitRequestFullscreen();var Q=setInterval(function(){if(U!==(k.fullscreenElement||k.mozFullScreenElement||k.webkitFullscreenElement||k.msFullscreenElement))clearInterval(Q),p.setX(b),p.setY(H),p.setWidth(K),p.setHeight(q),p._fullscreen=!1,U.style.oldBackgroundColor=y,p.iv();else{var x=f.Default.getWindowInfo();(m||x.width!==p.getWidth()||x.height!==p.getHeight())&&(p.setX(x.left),p.setY(x.top),p.setWidth(x.width),p.setHeight(x.height),p._fullscreen=!0,p.iv(),m=!1)}},500)}else{var d=U.style.left,u=U.style.top,K=U.style.width,q=U.style.height,I=U.style.background,y=U.style.backgroundColor;I||y||(U.style.backgroundColor="white"),U.requestFullscreen?U.requestFullscreen():U.msRequestFullscreen?U.msRequestFullscreen():U.mozRequestFullScreen?U.mozRequestFullScreen():U.webkitRequestFullscreen&&U.webkitRequestFullscreen();var Q=setInterval(function(){if(U!==(k.fullscreenElement||k.mozFullScreenElement||k.webkitFullscreenElement||k.msFullscreenElement))clearInterval(Q),U.style.left=d,U.style.top=u,U.style.width=K,U.style.height=q,U.style.oldBackgroundColor=y,p.iv();else{var A=f.Default.getWindowInfo();(m||A.width!==p.getWidth()||A.height!==p.getHeight())&&(oc(p),m=!1)}},500)}}},appendTimeStamp:function(l){return l},setCompType:function(K,A){Vp(A)&&A.substr(0,12)==eq&&(A=Q.parse(A)),Le(A)||Yo(A)?ti[K]=A:Ug(K)},getCompType:function(Q){var s=ti[Q];return s===n&&cg.test(Q)&&Ug(Q),s},getCompTypeMap:function(){return ti},drawCompType:function(n,K,D,t,M,c){n(K,D,t,M,c)},numberListener:function(){var O={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(j){var K=j.keyCode;O[K]||65===K&&Q.isCtrlDown(j)||86===K&&Q.isCtrlDown(j)||67===K&&Q.isCtrlDown(j)||88===K&&Q.isCtrlDown(j)||K>=35&&40>=K||(j.shiftKey||48>K||K>57)&&(96>K||K>105)&&j.preventDefault()}}(),ignoreKeyCodes:[122,123],preventDefault:function(j){var K=j.target.tagName;("DIV"===K||"CANVAS"===K)&&!(Q.ignoreKeyCodes.indexOf(j.keyCode)>=0)&&("keydown"!==j.type||nn(j)||Fk(j)||Fq(j)||No(j)||lm(j)||65===j.keyCode&&(j.metaKey||j.ctrlKey))&&j.cancelable===!0&&(j.preventDefault(),j.preventManipulation&&j.preventManipulation())},getWindowInfo:function(){var J=k.documentElement,K=J&&(J.scrollLeft||J.scrollTop)?J:k.body;return{target:K,left:K.scrollLeft,top:K.scrollTop,width:H.innerWidth||K.clientWidth,height:H.innerHeight||K.clientHeight}},isDragging:function(){return!!Nh},isLeftButton:function(V){return Nd(V)?!0:0===V.button},isMiddleButton:function(A){return Nd(A)?!1:A&&(1===A.button||4&(A.buttons||0))},isRightButton:function(b){return Nd(b)?!1:b&&(2===b.button||2&(b.buttons||0))},isInput:function(D){if(!D)return!1;var k=D.tagName;return"INPUT"===k||"TEXTAREA"===k||"SELECT"===k},getTouchCount:function(f){return Nd(f)?f.touches.length:1},isDoubleClick:function(){function h(t){t.details=0,t.timeout=null,t.lastPoint=null}var R={};return qk=new ji,xf=qk.getTime(),function(N){if(Nl(N)>1)return!1;var o=N.button==O?"":N.button,F=N.type+o,a=F+"_isDoubleClick",p=R[F];if(p||(p=R[F]={details:0,timeout:null,lastPoint:null}),N[a]===n){N[a]=!0;var z=_d(N);p.timeout&&(rn(p.timeout),p.timeout=null);var g=Nd(N)?Q.doubleTouchRange:Q.doubleClickRange;p.lastPoint&&xh(p.lastPoint,z)>g&&h(p),p.lastPoint=z,p.details++,p.timeout=yd(function(){h(this)}.bind(p),Q.doubleClickSpeed)}return 2===p.details}}(),isShiftDown:function(e){return e?e.shiftKey:Bd["16"]},isCtrlDown:function(J){return J?vq?J.metaKey:J.ctrlKey:vq?Bd["91"]:Bd["17"]},getClientPoint:function(l){return Nd(l)&&(l=Cr(l)),{x:l.clientX,y:l.clientY}},isMouseEvent:function(R){return R instanceof MouseEvent||0===R.type.indexOf("mouse")},getTargetElement:function(p){var Y,N=Rj(p);if(Y=Q.isMouseEvent(p)||!k.elementFromPoint?p.target:k.elementFromPoint(N.x,N.y),gr&&k.elementFromPoint){for(var i=[],A=[];"none"===Y.style.pointerEvents;)i.push(Y),A.push(Y.style.display||""),Y.style.display="none",Y=k.elementFromPoint(N.x,N.y);i.forEach(function(K,f){K.style.display=A[f]})}return Y},getPagePoint:function(E){return Nd(E)&&(E=Cr(E)),{x:E.pageX,y:E.pageY}},createObject:function(Q,p){var J=new Q;for(var K in p){var V=p[K];if(Le(V))J[K]=V;else if(0===K.indexOf("s:"))J.s(K.substr(2),p[K]);else if(0===K.indexOf("a:"))J.a(K.substr(2),p[K]);else{var I=ff(K),V=p[K];J[I]?(J[I](V),"setToolTip"===I&&J.enableToolTip&&J.enableToolTip()):J[K]=V}}return J},setImage:function(d,l,m,k){var R=arguments.length;4===R?Zr(d,k,l,m):2===R?Vp(l)?l.substr(0,12)==eq?lq(d,Q.parse(l)):Zr(d,l):lq(d,l):1===R&&Zr(d,d)
},getImage:function(V,C,T){var a;if(V==O)return O;if(Yo(V)?a=V:(a=qq[V],V&&a===n&&(bl&&bl[V]||Zr(V,V))),C&&a&&a.tagName){var J;J="override"===T?"colors_override":"override_rgb"===T?"colors_override_rgb":"override_a"===T?"colors_override_a":"colors",a[J]||(a[J]={__count__:0});var A=a[J][C];return A||(a[J].__count__>Q.imageCacheThreshold&&(a[J]={__count__:0}),A=Ui(a,cs(C),a.width,a.height,T),a[J][C]=A,a[J].__count__++),A}return a},isImageComplete:function(t,N,W){var o=Nn(t);if(!o)return!1;if(o.tagName)return o.complete;for(var R,t,r,k=o.comps,G=!0,B=0,i=k.length;i>B;B++)if(R=k[B],r=R.type,"image"===R.type){t=R.name,t&&t.func&&(t=rq(t,N));var F=Ki(t,N,W);if(!F){G=!1;break}}else if(cg.test(r)&&Q.getCompType(r)===n){G=!1,Ug(r);break}return G},getId:function(){var D=1;return function(){return++D}}(),callLater:function(L,E,d,U){var g=function(){L.apply(E,d)};return U?yd(g,U):H.requestAnimationFrame(g)},cancelLater:function(J,j){j?rn(J):H.cancelAnimationFrame(J)},clone:function(U){if(null==U||"object"!=typeof U)return U;if(U instanceof Date){var j=new Date;return j.setTime(U.getTime()),j}if(U instanceof Array){for(var j=[],d=0,t=U.length;t>d;d++)j[d]=rj(U[d]);return j}if(U instanceof td){for(var j=new td,d=0,t=U.length;t>d;d++)j.set(d,rj(U.get(d)));return j}if(U instanceof Om)return U;if(U instanceof gk){var j=new gk;return j.deserialize(U.serialize()),j}if(U instanceof y){var j={};for(var p in U)U.hasOwnProperty(p)&&(j[p]=rj(U[p]));return j}return U},callWhenLoaded:function(l,o){o=o||100;var U=nl(l,o);Vn||(Vn={}),Vn[U]={tick:U,cb:l,delay:o}},beforeLoadURL:function(j,f){if(Vn){var h={};for(var f in Vn){var l=Vn[f];rn(l.tick);var o=nl(l.cb,l.delay);h[o]={tick:o,delay:l.delay,cb:l.cb}}Vn=h}return Q.convertURL?Q.convertURL(j,f):j},convertURL:function(y){return y},handleRefGraphLoaded:function(){},handleCompTypeLoaded:function(){},handleImageLoaded:function(){},handleUnfoundImage:function(){return Q.getImage("default_blank")},resizeImage:function(O,d,n,W){n||(n=d),W||(W=qb());var D=W.getContext("2d");return Wk(W,d,n,1),D.drawImage(O,0,0,d,n),W},resizeImagePOT:function(v,q,P){if(!v||!v.tagName)return v;var z=v.width,g=v.height;if(!z||!g)return v;if(Tc.isPOT(z)&&Tc.isPOT(g)&&(!q||z===g))return v;var H,K;return q?K=H=Tc.nearestPOT(Math.min(z,g)):(H=Tc.nearestPOT(z),K=Tc.nearestPOT(g)),Q.resizeImage(v,H,K,P)},sortFunc:function(k,U){if(k===U)return 0;if(k==O&&U!=O)return 1;if(k!=O&&U==O)return-1;if(k==O&&U==O)return 0;var j,e=typeof k,z=typeof U;return e===Xj&&z===Xj?j=k.localeCompare(U):e===Dq&&z===Dq&&(j=k-U),j===n&&(j=(""+k).localeCompare(""+U)),j>0?1:0>j?-1:0},getClassMap:function(){return Il},getClass:function(Y){if(Vp(Y)){var M,y=Il[Y];if(!y){M=Y.split("."),y=H;for(var R=0;R<M.length;R++)y=y[M[R]];Il[Y]=y}return y}return Y},def:function(z,O,o){var D,L,p,j=function(){};if(j.prototype=O.prototype,D=new j,Vp(z)){if(Il[z])throw"'"+z+"' already defined";p=_b(z),D.getClassName=function(){return z}}else p=z;if(D.constructor=p,D.getClass=function(){return p},D.getSuperClass=function(){return O},o)for(L in o)hs[L]&&hs.hasOwnProperty(L)?hs[L](D,o):ai(D,o,L);p.prototype=D,p.superClass=O.prototype},startAnim:function(){var G=function(n){n.duration&&(n.startTime=vm()),n.timeId=Ad(n.tick,O,O,n.interval)};return function(w){return w=rj(w),w.easing=w.easing||Q.animEasing,w.duration||w.frames||(w.duration=Q.animDuration),w.t=0,w.duration?w.interval=0:(w.frame=0,w.interval=w.interval||10),w.tick=function(){if(w.duration){var N=(vm()-w.startTime)/w.duration;if(N>1&&(N=1),w.t=N,w.action(w.easing(N),N),!w.isRunning())return;1===N?w.stop():w._isPaused||(w.timeId=Ad(w.tick))}else{if(w.frame++,N=w.t=w.frame/w.frames,w.action(w.easing(N),N),!w.isRunning())return;w.frame<w.frames?w._isPaused||(w.timeId=Ad(w.tick,O,O,w.interval)):w.stop()}},w.resume=function(){w._isPaused&&(delete w._isPaused,w.duration?w.t<1&&(w.startTime=vm()-w.duration*w.t,w.timeId=Ad(w.tick)):w.frame<w.frames&&(w.timeId=Ad(w.tick,O,O,w.interval)))},w.pause=function(){ln(w.timeId,!w.duration),w._isPaused=!0},w.isPaused=function(){return this._isPaused},w.stop=function(o){w.isRunning()&&(ln(w.timeId,!w.duration),delete w.timeId,w.duration?w.t<1&&o&&(w.t=1,w.action(w.easing(1),1)):w.frame<w.frames&&o&&(w.frame=w.frames,w.action(w.easing(1),1)),w._37o&&w._37o(),w.finishFunc&&w.finishFunc())},w.isRunning=function(){return w.timeId!=O},w.delay?Ad(G,O,[w],w.delay):G(w),w}}(),getTextSize:function(){var J={},_=k?qb().getContext("2d"):O;return function(S,u){_.font=S?S:Nb;var y=J[_.font];return y||(y=2*_.measureText("e").width+4,J[_.font]=y),{width:_.measureText(u).width+Q.textExtraWidth,height:y}}}(),drawText:function(T,w,q,n,k,s,o,Q,l,V,I){if(w!=O){var L=Ye(q,w),M={};M.y=V&&V!==ej?V===pj?s+L.height/2:s+Q-L.height/2:s+Q/2,M.x=l&&l!==wq?l===hb?k+o-L.width/2:k+o/2:k+L.width/2,Uo(T,w,M,q,n),I&&jb(T,w,q,n,M.x,M.y,L.width,I)}},getDistance:function(E,T){var U=E.length;return T?3===U?N(Hc(E[0]-T[0])+Hc(E[1]-T[1])+Hc(E[2]-T[2])):2===U?N(Hc(E[0]-T[0])+Hc(E[1]-T[1])):E.z===n?N(Hc(T.x-E.x)+Hc(T.y-E.y)):N(Hc(T.x-E.x)+Hc(T.y-E.y)+Hc(T.z-E.z)):3===U?N(Hc(E[0])+Hc(E[1])+Hc(E[2])):2===U?N(Hc(E[0])+Hc(E[1])):void 0},brighter:function(C,G){return 0>G&&(G=-G),tg(C,G?G:40)},darker:function(Y,m){return m>0&&(m=-m),tg(Y,m?m:-40)},traverse:function(){function i(d){var o=function(R,l,W,y){W&&W(R,l);var z;if(z=""===d?R.getChildren():R[d],z instanceof f.List&&(z=z.getArray()),z)for(var Y=0,I=z.length;I>Y;Y++)o(z[Y],R,W,y);y&&y(R,l)};return o}var Q={};return function(h,k,N,K){K=K||"";var P;(P=Q[K])||(P=Q[K]=i(K)),P(h,null,k,N)}}(),unionPoint:function(N,m){if(!N)return O;if(2===arguments.length)return N&&m?{x:g(N.x,m.x),y:g(N.y,m.y),width:o(N.x-m.x),height:o(N.y-m.y)}:O;var Z=N;if(Z._as&&(Z=Z._as),Z.length===n)return O;var K=Z.length;if(0>=K)return O;for(var z=1,D=Z[0],V={x:D.x,y:D.y,width:0,height:0};K>z;z++){D=Z[z];var w=g(V.x,D.x),R=C(V.x+V.width,D.x),b=g(V.y,D.y),v=C(V.y+V.height,D.y);V.x=w,V.y=b,V.width=R-w,V.height=v-b}return V},unionRect:function(D,s){if(D&&!s)return rj(D);if(!D&&s)return rj(s);if(D&&s){var w={x:g(D.x,s.x),y:g(D.y,s.y)};return w.width=C(D.x+D.width,s.x+s.width)-w.x,w.height=C(D.y+D.height,s.y+s.height)-w.y,w}return O},containsPoint:function(D,Y,L,I){if(I!=O&&1!==I){var B=D.x+D.width/2,j=D.y+D.height/2;D={x:B-D.width/2*I,y:j-D.height/2*I,width:D.width*I,height:D.height*I}}if(L){var Z=D.width/2,F=D.height/2,r=G(-L),o=b(-L),u=Y.x-D.x-Z,J=Y.y-D.y-F;return Y={x:o*u-r*J,y:r*u+o*J},Ol({x:-Z,y:-F,width:D.width,height:D.height},Y)}return!(!D||Y.x<D.x||Y.y<D.y||Y.x>D.x+D.width||Y.y>D.y+D.height)},containsRect:function(R,t){if(!R||!t)return!1;var o=t.x,P=t.y,U=t.width,J=t.height,e=R.width,D=R.height;if(0>(e|D|U|J))return!1;var z=R.x,q=R.y;if(z>o||q>P)return!1;if(e+=z,U+=o,o>=U){if(e>=z||U>e)return!1}else if(e>=z&&U>e)return!1;if(D+=q,J+=P,P>=J){if(D>=q||J>D)return!1}else if(D>=q&&J>D)return!1;return!0},intersectsRect:function(o,D){if(!o||!D)return!1;var l=D.width,P=D.height,N=o.width,u=o.height;if(0>=N||0>=u||0>=l||0>=P)return!1;var E=D.x,A=D.y,Q=o.x,F=o.y;return N+=Q,u+=F,l+=E,P+=A,N>E&&u>A&&l>Q&&P>F},intersection:function(X,E){if(!X||!E)return O;var m=E.x,o=E.y,G=X.x,A=X.y,h=m,d=o,Y=G,k=A;return h+=E.width,d+=E.height,Y+=X.width,k+=X.height,G>m&&(m=G),A>o&&(o=A),h>Y&&(h=Y),d>k&&(d=k),h-=m,d-=o,0>=h||0>=d?O:{x:m,y:o,width:h,height:d}},grow:function(k,o,c){c===n&&(c=o),k.x-=o,k.y-=c,k.width=k.width+2*o,k.height=k.height+2*c},getScreenPoint:function(j,E,J,A,u,M,i){var U=J.getBoundingClientRect(),K=j*(M||1)-J.scrollLeft+(A||0),P=E*(i||1)-J.scrollTop+(u||0),p=Vo(J,!1);if(p){var t=new Ri(K,P,0);return t.applyMatrix4(p),console.log(t),{x:t.x,y:t.y}}return{x:K+U.left,y:P+U.top}},getLogicalPoint:function(l,E,d,Q,s,R){var k,v,h=E.getBoundingClientRect();l.target?(Pp(l)?vq?Bd["91"]=!0:Bd["17"]=!0:vq?Bd["91"]=!1:Bd["17"]=!1,Bd["16"]=Sl(l)?!0:!1,l=Nd(l)?Cr(l):l,k=l.clientX,v=l.clientY):(k=l.x,v=l.y);var r=Vo(E,!0);if(r){var D=new Ri(k,v,0);D.applyMatrix4(r);do{if(Math.abs(D.z)<=1e-6)break;var c=new Ri(k,v,1);if(c.applyMatrix4(matrix),Math.abs(c.z)<=1e-6){D=c;break}if(c.sub(D),Math.abs(c.z)<=1e-6)break;D.addScaledVector(c,-D.z/c.z)}while(!1);return{x:(D.x+E.scrollLeft-(d||0))/(s||1),y:(D.y+E.scrollTop-(Q||0))/(R||1)}}return{x:(k-h.left+E.scrollLeft-(d||0))/(s||1),y:(v-h.top+E.scrollTop-(Q||0))/(R||1)}},removeHTML:function(){var q;return function(h){return h&&h.getView&&(h=h.getView()),h&&h.parentNode?q===h?!0:(q=h,h.parentNode.removeChild(h),q=O,!0):!1}}(),getToolTipDiv:function(){if(!Do){Do=Lj(),yb=Lj();var J=Do.style;Q.baseZIndex!=O&&(J.zIndex=ob(Q.baseZIndex)+3+""),J.whiteSpace="nowrap",J.color=Q.toolTipLabelColor,J.background=Q.toolTipBackground,J.font=Q.toolTipLabelFont,J.padding="5px",J.boxShadow="0px 0px 3px "+Q.toolTipShadowColor}return Do},isToolTipShowing:function(){return Do&&Do.parentNode?!0:yb&&yb.parentNode?!0:!1},updateToolTipContent:function(q,v){if(Q.isToolTipShowing()&&(v||(v=eh&&eh.view),q===n&&v&&eh.e&&(q=v.getToolTip(eh.e)),q!=O)){var W;q.html?(q=q.html,W=yb):W=Do,W.innerHTML=q}},hideToolTip:function(){if(Pf(),Q.isToolTipShowing()){jf(Do),jf(yb);var l=eh&&eh.view;l&&l.onHideToolTip&&l.onHideToolTip(),eh=O}},showToolTip:function(V,y,L){if(!V||y==O)return Sk(),void 0;Q.getToolTipDiv();var d,u;if(y.html?(y=y.html,d=yb,jf(Do)):(d=Do,jf(yb)),u=d.style,d.innerHTML="",y instanceof HTMLElement?d.appendChild(y):d.innerHTML=y,d.parentNode||f.Default.appendToScreen(d),V.target){V=Rj(V);var w=se(),N=V.x,c=V.y,s=eb?60:12;if(eb){var b=d.getBoundingClientRect();u.left=N-b.width/2+hi,u.top=c-b.height-s<w.top?c+s+hi:c-b.height-s+hi}else{u.left=N+s+hi,u.top=c+s+hi;var b=d.getBoundingClientRect();b.left+b.width>w.width&&(u.left=N-s-b.width+hi),b.top+b.height>w.height&&(u.top=c-s-b.height+hi),b.left<0&&(u.left=N+s+hi),b.top<0&&(u.top=c+s+hi)}}else u.left=V.x+hi,u.top=V.y+hi;Pf(),L===n?L=eh&&eh.view:eh={e:V,view:L},L&&L.onShowToolTip&&L.onShowToolTip()},startDragging:function(w,j,P){P==n&&(P=!0),w!==Nh&&(Nh?P&&(Nd(j)?Nh.handleWindowTouchEnd(j):Nh.handleWindowMouseUp(j)):Nd(j)?(e(H,co,_i),e(H,ro,mp),e(H,"blur",mp)):(e(H,hm,Wg),e(H,km,ag),e(H,"blur",ag)),Nh=w)},getImageMap:function(){return qq},toBoundaries:function(n,$,Z,t){var J=[];return yp(n,$,Z,t).forEach(function(r){var V=[];r.forEach(function(l){V.push(l.x,l.y)}),J.push(V)}),J},getCurrentKeyCodeMap:function(){return Bd},drawCenterImage:function(D,q,w,J,X,i,x,R){!X&&i&&i.isSelfViewEvent&&(X=i);var P=Yj(q,X,i),d=kp(q,X,i);Nq(D,q,j(w-P/2),j(J-d/2),P,d,X,i,x,R)},drawStretchImage:function(r,n,c,F,l,q,L,k,R,b,$,K){!k&&R&&R.isSelfViewEvent&&(k=R);var I,Z=Yj(n,k,R,q),x=kp(n,k,R,L);"uniform"===c?(I=g(q/Z,L/x),Z*=I,x*=I,F+=j((q-Z)/2),l+=j((L-x)/2),q=Z,L=x):"centerUniform"===c&&((Z>q||x>L)&&(I=g(q/Z,L/x),Z*=I,x*=I),F+=j((q-Z)/2),l+=j((L-x)/2),q=Z,L=x);var e=r.interactiveInfo;if(e){var M;if(M="center"===c?{x:F+q/2-Z/2,y:l+L/2-x/2,width:Z,height:x}:{x:F,y:l,width:q,height:L},e.rect){var u=e.compInfos,J=u.length;J&&(u[J-1].rect.image=n)}else e.rect=M}if("center"===c){var C=$!==!1&&(Z>q||x>L);C&&(r.save(),r.beginPath(),r.rect(F,l,q,L),r.clip()),Nq(r,n,F+q/2-Z/2,l+L/2-x/2,Z,x,k,R,b,K),C&&r.restore()}else Nq(r,n,F,l,q,L,k,R,b,K)},toCanvas:function(U,W,c,B,Y,L,e,Q,p){U=Nn(U,e),W=W||Yj(U,Y),c=c||kp(U,Y);var X=qb(),g=sc(X);return Q?(Wk(X,W,c,Q),g.scale(Q,Q)):Wk(X,W,c,1),ks(g,U,B,0,0,W,c,Y,L,e,p),U&&U.clampToEdge&&(X.clampToEdge=U.clampToEdge),g.restore(),X},toGrayColor:function(l){if(!l)return l;var F=nm(l),z=j(.299*F[0]+.587*F[1]+.114*F[2]);return"rgba("+z+","+z+","+z+","+F[3]/255+")"},createGradientImage:function(b,n,F,Z){for(var x=["L",0,0,b,0,1,0,0,1,0,0],H=0,B=Math.min(n.length,F.length);B>H;H++)x.push(F[H],n[H]);var q=f.Default.toCanvas({width:b,height:b,clampToEdge:!0,comps:[{type:"shape",rotation:Z||0,points:[0,0,b,0,b,b,0,b],background:"#ffffff",gradientPack:x}]});return q},createElement:function(J,Y,V,s){var e=k.createElement(J);return Lc(e,Y||l.widgetBorder,2),e.style.font=V?V:Nb,s!=O&&(e.value=s),Q.onElementCreated&&Q.onElementCreated(e),e},containedInView:function(L,p){var O=Dj(p).getBoundingClientRect();return Ol({x:O.left,y:O.top,width:O.width,height:O.height},_d(L))},isIsolating:function(){return pk>0},setIsolating:function(R){R?pk++:pk--},getMSMap:function(){return hs},stringify:function(g,d,s){var R=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()};var N=gk.prototype.toJSON;gk.prototype.toJSON=function(){return"__ht__dataModel"+this.serialize(0)},d=s?0:d==O?2:d;var L=JSON.stringify(g,function(q,s){return"function"==typeof s?"__ht__"+(s.__ht__||s.toString()):fe(s)?kd(s):Ii(s)?null:s instanceof f.List?"__ht__list"+(s.__ht__list||Q.stringify(s._as)):s},d);return Date.prototype.toJSON=R,gk.prototype.toJSON=N,s&&(L=eq+Fh(L)),L},parse:function(M,p){return Vp(M)?M.substr(0,12)!=eq||(M=Af(M.substr(12)),Vp(M))?(p=p||{},JSON.parse(M,function(I,G){if(Vp(G))if(p.ignoreFunction||"__ht__function"!=G.substr(0,14)){if(!p.ignoreDate&&"__ht__date"==G.substr(0,10))return new Date(ob(G.substr(10)));if("__ht__list"===G.substr(0,10))return new td(Q.parse(G.substr(10)));if(!p.ignoreDataModel&&"__ht__dataModel"===G.substr(0,15)){var $=new gk;return $.deserialize(Q.parse(G.substr(15))),$}}else{var u=G.indexOf("{")+1,K=G.lastIndexOf("}"),P=G.indexOf("(")+1,R=G.indexOf(")");if(u&&K&&P&&R)try{var f=new Function(G.substring(P,R),G.substring(u,K));return f.__ht__=G.substr(6),f}catch(A){throw console.info("=== SyntaxError ===\n",G),A}}return G})):M:M},loadJS:function(y,C){C&&y.push(C);var c=y.shift();if(Se(c))y=c.contact(y),Q.loadJS(y);else if(Le(c))c(),Q.loadJS(y);else if(Vp(c)){var b=k.createElement("script");b.onload=function(){Q.loadJS(y)},b.setAttribute("src",c),k.getElementsByTagName("head")[0].appendChild(b)}else y.length&&Q.loadJS(y)},extendClass:function(F,O){var g=F.prototype;for(var y in O)hs[y]&&hs.hasOwnProperty(y)?hs[y](g,O):g[y]=O[y]},toRoundedCorner:function(){function z(u,N,q){u.x=N.x,u.y=N.e||q,u.z=N.y}var o=new Ri,e=new Ri,f=new Ri,H=new Ri;return function(c,E){var U,k=0;c.getPoints&&(k=c.getElevation(),c=c.getPoints()),U=c instanceof td?c:new td(c);var X=U.size();if(0>=E)return{points:U};var R=new td,D=new td,G=U.get(0);z(o,G,k),R.add(G),D.add(1);for(var Q=1;X>Q;Q++)if(X>Q+1){var Z=U.get(Q),V=U.get(Q+1);z(e,Z,k),z(f,V,k),H.subVectors(o,e).setLength(Math.min(.99*H.length(),E)).add(e),Z.e!==n||G.e!==n?R.add({x:H.x,y:H.z,e:H.y}):R.add({x:H.x,y:H.z}),R.add(Z),H.subVectors(f,e).setLength(Math.min(.99*H.length(),E)).add(e),Z.e!==n||V.e!==n?R.add(G={x:H.x,y:H.z,e:H.y}):R.add(G={x:H.x,y:H.z}),o.copy(H),D.addAll([2,3])}else R.add(U.get(Q)),D.add(2);return{points:R,segments:D}}}(),toColorData:nm,setCanvas:Wk,createDiv:Lj,createDisabledDiv:zs,createView:Kj,createCanvas:qb,appendChild:Vi,initContext:sc,checkLoadingImage:dk,translateAndScale:aj,layout:oc,getPosition:_m,drawPoints:pg,drawRoundRect:no,drawBorder:Ed,setFocus:Ce,getter:wh,setter:ff,isEmptyObject:ck,cameraPriority:function(){var T={skybox:0,main:1e4,top:1e7,infinity:1/0};return y.seal(y.defineProperties({},{skybox:{configurable:!1,enumerable:!1,get:function(){return T.skybox},set:function(t){if(t>=T.main)throw new RangeError("Skybox camera must have lower priority than the main camera.");T.skybox=Number(t)}},main:{configurable:!1,enumerable:!1,get:function(){return T.main},set:function(O){if(O<=T.skybox)throw new RangeError("Main camera must have higher priority than the skybox camera.");if(O>=T.top)throw new RangeError("Main camera must have lower priority than the top camera.");T.main=Number(O)}},top:{configurable:!1,enumerable:!1,get:function(){return T.top},set:function(o){if(o<=T.main)throw new RangeError("Top camera must have higher priority than the main camera.");T.top=Number(o)}}}))}(),addFontFace:function(){function L(m){var t=m.substr(m.lastIndexOf(".")+1);m=Q.convertURL?Q.convertURL(m):m;var W=o[t]||t;return{postfix:t,url:"url("+m+') format("'+W+'")'}}function J(S,f){return w[S.postfix]-w[f.postfix]}var o={ttf:"truetype",otf:"opentype",eot:"embedded-opentype"},w={eot:0,woff2:1,woff:2,ttf:3,otf:4};return function(g,F,l,b){if(g){b&&Q.removeFontFace(g,!0);var u;if(u=Be[g])return u.parentNode||k.head.appendChild(u),l&&l(u),void 0;if(Vp(F)&&(F=[F]),F=F.filter(function(Z){return Vp(Z)?Z.length>0:!1}),0!==F.length){F=F.map(L);var i="";F.sort(J).forEach(function(q){i+=", "+q.url}),i=i.substr(2);var u=k.createElement("style");u.innerText='@font-face{font-family: "'+g+'";src: '+i+";}",k.head.appendChild(u),Be[g]=u,l&&l(u)}}}}(),clearFontFace:function(){if(!ck(Be)){for(var m in Be)Q.removeFontFace(m);Be={}}},removeFontFace:function(i,Q){if(i){var V=i;if(V.tagName){if(jf(V),Q){var n=[];for(var Z in Be)Be[Z]===V&&n.push(Z);var x=n.length;if(x>0)for(var p=0,x=n.length;x>p;p++)delete Be[n[p]]}}else(V=Be[i])&&(jf(V),Q&&delete Be[i])}},getFontFaceMap:function(){return Be},handleFontFacesLoaded:function(){}},!0),k&&k.fonts&&k.fonts.addEventListener&&k.fonts.addEventListener("loadingdone",function(X){Q.handleFontFacesLoaded(X.fontfaces),Q.findView("all").forEach(function(C){C.redraw?C.redraw():C.iv()})}),og(K,{autoAdjustIndex:1,hierarchicalRendering:1,adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1,doubleClickToToggle:1,continuousLayout:1,syncSize:1},!0);var We=Q.disabledOpacity,kr=Q.toolTipDelay,mr=Q.devicePixelRatio,jg=Q.autoMakeVisible,Bm=Q.autoHideScrollBar,_l=Q.imageGradient,Qg=Q.showToolTip,Sk=Q.hideToolTip,am=Q.dashPattern,Bl=Q.lineCap,jq=Q.lineJoin,Pn=Q.labelColor,qn=Q.labelSelectColor,Nb=Q.labelFont,rk=Q.widgetIndent,Xe=Q.widgetRowHeight,Jb=Q.widgetHeaderHeight,hk=Q.widgetTitleHeight,sk=Q.scrollBarColor,fj=Q.scrollBarSize,Sc=Q.scrollBarTimeout,wd=Q.scrollBarMinLength,Vm=Q.scrollBarInteractiveSize,sr=Q.zoomIncrement,fm=Q.scrollZoomIncrement,Qh=Q.pinchZoomIncrement,fk=Q.zoomMax,Xk=Q.zoomMin,Xf=Q.createObject,tn=Q.preventDefault,ak=Q.setImage,Nn=Q.getImage,Ki=Q.isImageComplete,Pq=Q.drawCenterImage,ks=Q.drawStretchImage,jp=Q.getId,Ad=Q.callLater,ln=Q.cancelLater,uq=Q.sortFunc,rj=Q.clone,_b=Q.getClass,nd=Q.startAnim,Kf=Q.brighter,Mm=Q.darker,Cb=Q.drawText,Ye=Q.getTextSize,Hb=Q.isLeftButton,Wr=Q.isMiddleButton,Xd=Q.isRightButton,Nl=Q.getTouchCount,Tn=Q.isDoubleClick,Sl=Q.isShiftDown,Pp=Q.isCtrlDown,_d=Q.getClientPoint,Rj=Q.getPagePoint,xh=Q.getDistance,pe=Q.unionPoint,$b=Q.unionRect,Ol=Q.containsPoint,Bh=Q.containsRect,Gj=Q.intersectsRect,Kb=Q.intersection,se=Q.getWindowInfo,Zp=Q.grow,Re=Q.getLogicalPoint,ec=Q.getScreenPoint,ug=Q.startDragging,jf=Q.removeHTML,$f=Q.createElement,ae=Q.segmentResolution,Yc=Q.shapeResolution,xd=Q.shapeSide,vn=Q.def,Yf=function(F,l,A){vn(p+"."+F,l,A)},lb=function(q,b){q.childNodes.forEach(function(p){b(p),lb(p,b)})};og(Q,{toolTipLabelColor:Pn,toolTipLabelFont:Nb,toolTipBackground:l.toolTipBackground,toolTipShadowColor:tf,debugTipLabelFont:Nb,debugTipLabelColor:Pn,debugTipBackground:l.toolTipBackground,drawBreakableText:Jj,setDevicePixelRatio:function(e){mr=Q.devicePixelRatio="number"==typeof e?e:Kq(H),lb(k.body,function(I){var z=I._ht;z&&z._canvas&&(Wk(z._canvas,z.getWidth(),z.getHeight()),z.redraw?z.redraw():z.iv())})},getPosition3dGap:function(){return Hf()}},!0);var xk=1e-6,ul="undefined"!=typeof Uint16Array?Uint16Array:Array,bq="undefined"!=typeof Uint32Array?Uint32Array:ul,yr="undefined"!=typeof Float32Array?Float32Array:Array,js=function(h,R,A){var C=[h[0]-R[0],h[1]-R[1],h[2]-R[2]];if(A){var n=xh(C);n>0&&(C[0]/=n,C[1]/=n,C[2]/=n)}return C},Qm=function(){var u="charCodeAt",L=2*(2*jr.length+1);for(var Z in H)if(Z===p+wq[0]+(hi.length+2)){var V=H[Z];if(!V)break;for(var _=V.length,w=0;_>w;w++)if(V[w][u](0)===L&&V[w+1]!=O&&V[w+1]===hi[0]&&V[w+2]!=O&&V[w+2][u](0)===L){for(var P=w+3;_>P;P++)if(V[P][u](0)===L){if(0==V[P+1])for(var S,c=P+2;_>c;c++){if(V[c][u](0)===L){0==V[c-1]&&S&&(Po=S.substr(0,S.length-1));break}S==O?S=V[c]:S+=V[c]}break}break}break}return function(O){return[-O[0],-O[1],-O[2]]}}(),Fc=function(s,K){return 3===s.length?s[0]*K[0]+s[1]*K[1]+s[2]*K[2]:s[0]*K[0]+s[1]*K[1]},ib=function(){var $=new Array(16);return $[0]=1,$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=1,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[10]=1,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$},kh=ib(),Bg=function(f){var l=new Array(16);return l[0]=f[0],l[1]=f[1],l[2]=f[2],l[3]=f[3],l[4]=f[4],l[5]=f[5],l[6]=f[6],l[7]=f[7],l[8]=f[8],l[9]=f[9],l[10]=f[10],l[11]=f[11],l[12]=f[12],l[13]=f[13],l[14]=f[14],l[15]=f[15],l},_c=function(R,E){return R[0]=E[0],R[1]=E[1],R[2]=E[2],R[3]=E[3],R[4]=E[4],R[5]=E[5],R[6]=E[6],R[7]=E[7],R[8]=E[8],R[9]=E[9],R[10]=E[10],R[11]=E[11],R[12]=E[12],R[13]=E[13],R[14]=E[14],R[15]=E[15],R},Ok=function(W){return W[0]=1,W[1]=0,W[2]=0,W[3]=0,W[4]=0,W[5]=1,W[6]=0,W[7]=0,W[8]=0,W[9]=0,W[10]=1,W[11]=0,W[12]=0,W[13]=0,W[14]=0,W[15]=1,W},Qr=function(h,i){var P=h[0],S=h[1],H=h[2];return h[0]=i[0]*P+i[4]*S+i[8]*H+i[12],h[1]=i[1]*P+i[5]*S+i[9]*H+i[13],h[2]=i[2]*P+i[6]*S+i[10]*H+i[14],h},Tq=function(i,K){var V=i[0],c=i[1],M=i[2],D=i[3];return i[0]=K[0]*V+K[4]*c+K[8]*M+K[12]*D,i[1]=K[1]*V+K[5]*c+K[9]*M+K[13]*D,i[2]=K[2]*V+K[6]*c+K[10]*M+K[14]*D,i[3]=K[3]*V+K[7]*c+K[11]*M+K[15]*D,i},$q=function(A,V,Z){var i,t;if("number"==typeof A?t=A:A&&(t=A.length,i=!0),t)for(var f,o=0,C=0;t>o;o++)f=V?g(t-1,1==C?o+1:2==C?o-1:o):o,Z(i?A[f]:f),++C>2&&(C=0)},ap=function(){var R,H,e,K,F=Vf(Al[1]+Al[7]),Q=Vf(Al[0]+Al[3]-Al[10]),T=Vf(Al[8]+2),U=function(){return H=e.charAt(R),R+=1,H},Y=function(){var o="";if(H===T)for(;U();){if(H===T)return U(),o;o+=H}else U()},y=function(){for(;H&&" ">=H;)U()},k=function(){var b,C={};if(H===F){if(U(),y(),H===Q)return U(),C;for(;H;){if(b=Y(),y(),U(),C[b]=K(),y(),H===Q)return U(),C;U(),y()}}};return K=function(){switch(y(),H){case F:return k();default:return Y()}},function(z){if(q={},z){var D;if(e=z,R=0,H=" ",D=K(),y(),!H)return D}}}(),ii=function(v,H){if(H){var g=G(H),J=b(H),Y=v[4],e=v[5],c=v[6],R=v[7],U=v[8],u=v[9],w=v[10],L=v[11];v[4]=Y*J+U*g,v[5]=e*J+u*g,v[6]=c*J+w*g,v[7]=R*J+L*g,v[8]=U*J-Y*g,v[9]=u*J-e*g,v[10]=w*J-c*g,v[11]=L*J-R*g}},mk=function(g,I){if(I){var O=G(I),V=b(I),$=g[0],C=g[1],f=g[2],M=g[3],z=g[8],s=g[9],r=g[10],k=g[11];g[0]=$*V-z*O,g[1]=C*V-s*O,g[2]=f*V-r*O,g[3]=M*V-k*O,g[8]=$*O+z*V,g[9]=C*O+s*V,g[10]=f*O+r*V,g[11]=M*O+k*V}},Yk=function(F,C){if(C){var U=G(C),f=b(C),L=F[0],I=F[1],c=F[2],y=F[3],W=F[4],k=F[5],r=F[6],T=F[7];F[0]=L*f+W*U,F[1]=I*f+k*U,F[2]=c*f+r*U,F[3]=y*f+T*U,F[4]=W*f-L*U,F[5]=k*f-I*U,F[6]=r*f-c*U,F[7]=T*f-y*U}},Xi=function(f,S,k){return Qn(O,k===!1?O:f.getFinalScale3d(),f.getFinalRotation3d(),f.getRotationMode(),f.p3(),O,S)},Qn=function(F,J,a,g,o,A,$){return A||(A=ib()),o&&cj(A,o),cl(A,a,g),$&&Tg(A,A,$),J&&Vr(A,J),F&&Tg(A,A,F),A},Qf=function(u,L,Y){L=ob(L),Y=ob(Y);var i=this;i.g=u,i._84O=L,i._85O=Y,i._70I=!0,i.F=0,i._83O=L+Y,i.pen={x:0,y:0}},Gq="lineDashOffset",an="setLineDash",il=function(d){for(var g in d)1===g.length&&(Gq=d[g]);return g?1:0},Br=function(q,M,r){return $d(M)?q:q[an]?(q[an](M),r&&(q.lineDashOffset=r),q):new Qf(q,M[0],M.length>1?M[1]:M[0])},bh=function(V,z){!$d(z)&&V[an]&&(V[an](Ec),V.lineDashOffset=0)};vn(Qf,y,{_69I:6,moveTo:function(j,V){var u=this,I=u.pen;I.x=j,I.y=V,u.g.moveTo(j,V),u.start||(u.start={x:j,y:V})},lineTo:function(c,x){var h=this,R=h.pen,J=c-R.x,K=x-R.y,U=Tr(K,J),m=b(U),r=G(U),Z=h._23O(R.x,R.y,c,x),M=h._85O,i=h._84O,E=h._83O;if(h.F){if(h.F>Z)return h._70I?h._72I(c,x):h.moveTo(c,x),h.F-=Z,void 0;if(h._70I?h._72I(R.x+m*h.F,R.y+r*h.F):h.moveTo(R.x+m*h.F,R.y+r*h.F),Z-=h.F,h.F=0,h._70I=!h._70I,!Z)return}var t=B(Z/E);if(t){for(var V=m*i,e=r*i,l=m*M,f=r*M,z=0;t>z;z++)h._70I?(h._72I(R.x+V,R.y+e),h.moveTo(R.x+l,R.y+f)):(h.moveTo(R.x+l,R.y+f),h._72I(R.x+V,R.y+e));Z-=E*t}h._70I?Z>i?(h._72I(R.x+m*i,R.y+r*i),h.moveTo(c,x),h.F=M-(Z-i),h._70I=!1):(h._72I(c,x),Z===i?(h.F=0,h._70I=!h._70I):(h.F=i-Z,h.moveTo(c,x))):Z>M?(h.moveTo(R.x+m*M,R.y+r*M),h._72I(c,x),h.F=i-(Z-M),h._70I=!0):(h.moveTo(c,x),Z===M?(h.F=0,h._70I=!h._70I):h.F=M-Z)},quadraticCurveTo:function(D,f,d,r){var _,e=this,V=e.pen,k=V.x,H=V.y,Y=e._22O(k,H,D,f,d,r),y=0,u=0,j=e._85O,$=e._84O;if(e.F){if(e.F>Y)return e._70I?e._71I(D,f,d,r):e.moveTo(d,r),e.F-=Y,void 0;if(y=e.F/Y,_=e._20O(k,H,D,f,d,r,y),e._70I?e._71I(_[2],_[3],_[4],_[5]):e.moveTo(_[4],_[5]),e.F=0,e._70I=!e._70I,!Y)return}var p=Y-Y*y,U=B(p/e._83O),T=$/Y,v=j/Y;if(U)for(var N=0;U>N;N++)e._70I?(u=y+T,_=e._21O(k,H,D,f,d,r,y,u),e._71I(_[2],_[3],_[4],_[5]),y=u,u=y+v,_=e._21O(k,H,D,f,d,r,y,u),e.moveTo(_[4],_[5])):(u=y+v,_=e._21O(k,H,D,f,d,r,y,u),e.moveTo(_[4],_[5]),y=u,u=y+T,_=e._21O(k,H,D,f,d,r,y,u),e._71I(_[2],_[3],_[4],_[5])),y=u;p=Y-Y*y,e._70I?p>$?(u=y+T,_=e._21O(k,H,D,f,d,r,y,u),e._71I(_[2],_[3],_[4],_[5]),e.moveTo(d,r),e.F=j-(p-$),e._70I=!1):(_=e._19O(k,H,D,f,d,r,y),e._71I(_[2],_[3],_[4],_[5]),Y===$?(e.F=0,e._70I=!e._70I):(e.F=$-p,e.moveTo(d,r))):p>j?(u=y+v,_=e._21O(k,H,D,f,d,r,y,u),e.moveTo(_[4],_[5]),_=e._19O(k,H,D,f,d,r,u),e._71I(_[2],_[3],_[4],_[5]),e.F=$-(p-j),e._70I=!0):(e.moveTo(d,r),p===j?(e.F=0,e._70I=!e._70I):e.F=j-p)},bezierCurveTo:function(){var R=arguments;this.pen={x:R[4],y:R[5]},this.g.bezierCurveTo(R[0],R[1],R[2],R[3],R[4],R[5])},arc:function(N,X,f,L,k,i){i||(L=-L,k=-k),wi(this,N,X,L,k-L,f,f,!1)},rect:function(s,K,e,p){var f=this;f.pen={x:s,y:K},f.moveTo(s,K),f.lineTo(s,K+p),f.lineTo(s+e,K+p),f.lineTo(s+e,K),f.lineTo(s,K)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(u,Z,S,H){var T=S-u,W=H-Z;return N(T*T+W*W)},_22O:function(U,t,q,K,Z,s,x){for(var T,W,b,j,i,M,e,E=0,m=U,L=t,d=x>0?x:this._69I,k=1;d>=k;k++)b=k/d,j=1-b,i=j*j,M=2*b*j,e=b*b,T=i*U+M*q+e*Z,W=i*t+M*K+e*s,E+=this._23O(m,L,T,W),m=T,L=W;return E},_21O:function(o,b,j,L,U,G,H,W){var m=this;if(0===H)return m._20O(o,b,j,L,U,G,W);if(1===W)return m._19O(o,b,j,L,U,G,H);var s=m._20O(o,b,j,L,U,G,W);return s.push(H/W),m._19O.apply(m,s)},_20O:function(k,v,o,l,s,r,t){if(1!==t){var R=o+(s-o)*t,g=l+(r-l)*t;o=k+(o-k)*t,l=v+(l-v)*t,s=o+(R-o)*t,r=l+(g-l)*t}return[k,v,o,l,s,r]},_19O:function(f,P,A,Z,H,e,u){if(1!==u){var t=f+(A-f)*u,d=P+(Z-P)*u;A+=(H-A)*u,Z+=(e-Z)*u,f=t+(A-t)*u,P=d+(Z-d)*u}return[f,P,A,Z,H,e]},_72I:function(i,P){var Z=this.pen;(i!==Z.x||P!==Z.y)&&(Z.x=i,Z.y=P,this.g.lineTo(i,P))},_71I:function(e,A,O,N){var T=this.pen;(e!==O||A!==N||O!==T.x||N!==T.y)&&(T.x=O,T.y=N,this.g.quadraticCurveTo(e,A,O,N))}}),hs.ms_quickVisible=function(S){S._4BQ=!1,S._4CQ=function(A){var D=A._4EQ;return D!==n?D:D=A._4EQ=this._4FQ(A)},S._4DQ=function(o){if(!o)return this.dm().each(function(s){s._4EQ=n}),void 0;o._4EQ=n;var v=this;if(o instanceof $c||zg(o)||o instanceof _f||o.ISubGraph)o.eachChild(function(M){v.invalidateQuickVisible(M)});else if(o.getEdges){var i=o.getEdges();i&&i.each(function(R){v.invalidateQuickVisible(R)})}},S.enableQuickVisibleMode=function(){this._4BQ||(this._4BQ=!0,this._4FQ=this.isVisible,this.isVisible=this._4CQ,this.invalidateQuickVisible=this._4DQ)},S.disableQuickVisibleMode=function(){this._4BQ&&(this._4BQ=!1,this.isVisible=this._4FQ,this.invalidateQuickVisible=rc)},S.isQuickVisibleMode=function(){return this._4BQ},S.invalidateQuickVisible=rc},Dd=Ik()+1,fl&&H.console&&Dd&&!1&&(H.navigator&&H.navigator.userAgent.toLowerCase().indexOf("chrome")>-1?H.console.log.apply(console,["Hightopo - Version锛�"+f.Default.getVersion()+" - %cTrial锛歨ttp://hightopo.com/request.html","color: #f00;"]):H.console.log("Hightopo - Version锛�"+f.Default.getVersion()+" - Trial锛歨ttp://hightopo.com/request.html"));var mc=O,zm=O,qd=Q.checkLoadingCompType=function($){mc&&!$._72O_&&(zm||(zm={}),zm[$._72O_=jp()]=$)},Ug=function(R,N){if(N||(N=R),N&&(mc||(mc={}),!mc[R])){var G=new Wh;if(mc[N]={request:G,url:N},N=Q.beforeLoadURL(N,R),N.data){var m=Q.parse(N.data);ve(R,m),Q.handleCompTypeLoaded(R,m)}else{G.onload=function(){if(200===this.status||0===this.status){var y=Q.parse(G.getResponseText());ve(R,y),Q.handleCompTypeLoaded(R,y)}else ve(R,O)},G.onerror=function(){ve(R,O)};var C={};C.url=encodeURI(N),C.sync=!1,G.send(C)}}},ve=function(l,K){if(ti[l]=K,delete mc[l],ck(mc)&&(mc=O,zm)){for(var W in zm){var y=zm[W];y.invalidateAll&&y.invalidateAll(n,"compTypeLoaded",l),y.redraw&&y.redraw(),y.iv(),delete y._72O_}zm=O}if(K&&zm)for(var W in zm){var y=zm[W];y.invalidateAll&&y.invalidateAll(n,"compTypeLoading",l),y.redraw&&y.redraw(),y.iv()}},qg=l.chart,Tm="",al=!0,Um=Q.compStack=[],Lh=/^style@/,Ef=/^attr@/,oh=/^field@/,yi={x:.5,y:.5},Cg=function(){al=!0},oe=function(){return al},$m=function(b,f,Q){if(!b)return!1;var X;return Q&&Q.isImageFitSize&&(X=Q.isImageFitSize(f,b)),X==O&&(X=rq(b.fitSize,f,Q)),X},Yj=function(t,r,b,A){if(!t)return 0;if($m(t,r,b)&&A)return A;var R=rq(t.width,r,b);return null==R?20:R},kp=function(n,l,G,O){if(!n)return 0;if($m(n,l,G)&&O)return O;var Y=rq(n.height,l,G);return null==Y?20:Y},rq=function(Q,B,b){if(!Q||!Q.func)return Q;var d,F=Q.func,Y=Q.value;return d=Le(F)?b&&b.vectorDataBindingDisabled&&!Q.isSafeFunc?Y:F(B,b):B instanceof Om||(f.ui?B instanceof f.ui.View:0)?Ef.test(F)?B.a(Tm+F.slice(5)):Lh.test(F)?B.s(Tm+F.slice(6)):oh.test(F)?B[F.slice(6)]:B[F]?B[F](b):Y:Y,Y!==n&&d==O?Y:d},Nq=Q.drawImage=function(){var _,s,p,J,B,F,M=3,Y=6,r=function(f,y){f.getValue&&f.getValue.compType===y||(f.getValue=function(m){var S=u(f,m);if(S===n&&y.properties){var t=y.properties[m];t&&(S=t.defaultValue)}return S},f.getColor=function(N,D){return D===!0?E(N):E(f.getValue(N))},f.getValue.compType=y)},u=function(V,I,j){var Y,f=!1;if(V.prefix&&s instanceof Om){var t=s.a(Tm+I);t!==n&&(f=!0,Y=t)}return Y===n&&(Y=V[I]),Y&&Y.func&&(f=!0,Y=rq(Y,s,p)),j&&(Y=j(Y),f||(V[I]=Y)),Y},E=function(d,f){var l;return l=f?u(d,f):d,_&&_.compGray&&l?Q.toGrayColor(l):B&&l?Pm(l,B,F):l},R=function(T){if(Se(T)){for(var j=new td,C=T.length,H=0;C>H;H+=2)j.add({x:T[H],y:T[H+1]});T=j}return T},N=function(O){var j=u(O,"anchorX"),F=u(O,"anchorY");if(j!==n||F!==n)return{x:j===n?yi.x:j,y:F===n?yi.y:F};var $=u(O,"type"),X=u(O,"name");if("image"!==$||!X)return yi;var E=Nn(X);return E&&E.anchorX!==n&&E.anchorY!==n?{x:E.anchorX,y:E.anchorY}:yi},v=function(S,R){var L=u(S,Ro),b=N(S);if(Se(L)){var n=L.length,K=u(S,"relative"),_=R.width,x=R.height;if(4===n)L={x:L[0],y:L[1],width:L[2],height:L[3]},K&&(L.x*=_,L.y*=x,L.width*=_,L.height*=x);else if(3===n){var F=L[0];L={width:L[1],height:L[2]},K&&(L.width*=_,L.height*=x),"object"==typeof F?F.length&&(F={x:F[0],y:F[1]}):F=_m(F,R,L),L.x=F.x-L.width*b.x,L.y=F.y-L.height*b.y}L.x+=u(S,"offsetX")||0,L.y+=u(S,"offsetY")||0,!K&&R.fitSize&&(L=U(S,L,R))}return L},U=function(Z,y,x){if(y){var n,Y,b,M={x:y.x,y:y.y,width:y.width,height:y.height},l=N(Z),i=u(Z,"layoutH"),k=u(Z,"layoutV"),$=1,X=1,K=0,g=0,c=1,o=1;switch(i){case"left":break;case"right":M.x+=x.width-x.rw;break;case"center":M.x+=.5*(x.width-x.rw);break;case"scale":case"leftright":default:n=u(Z,Ni)||0,n&&(K=Math.abs(g=Math.sin(n)),c=Math.abs(o=Math.cos(n))),"leftright"!==i?($+=c*(x.widthScale-1),X+=K*(x.widthScale-1)):($+=M.width?c*(x.width-x.rw)/M.width:0,X+=M.height?K*(x.width-x.rw)/M.height:0,Y=-Math.min(-l.x*o+l.y*g,-l.x*o-(1-l.y)*g,(1-l.x)*o+l.y*g,(1-l.x)*o-(1-l.y)*g))}switch(k){case"top":break;case"bottom":M.y+=x.height-x.rh;break;case"center":M.y+=.5*(x.height-x.rh);break;case"scale":case"topbottom":default:n==O&&(n=u(Z,Ni),n&&(K=Math.abs(g=Math.sin(n)),c=Math.abs(o=Math.cos(n)))),"topbottom"!==k?($+=K*(x.heightScale-1),X+=c*(x.heightScale-1)):($+=M.width?K*(x.height-x.rh)/M.width:0,X+=M.height?c*(x.height-x.rh)/M.height:0,b=-Math.min(-l.x*g-l.y*o,-l.x*g+(1-l.y)*o,(1-l.x)*g-l.y*o,(1-l.x)*g+(1-l.y)*o))}return(1!==$||1!==X)&&("scale"!==i&&i?"leftright"===i&&(M.x+=M.width*(1-$)*l.x+Y*(x.width-x.rw)):M.x+=M.x*(x.widthScale-1)+l.x*M.width*(x.widthScale-$),"scale"!==k&&k?"topbottom"===k&&(M.y+=M.height*(1-X)*l.y+b*(x.height-x.rh)):M.y+=M.y*(x.heightScale-1)+l.y*M.height*(x.heightScale-X),M.width*=$,M.height*=X),M.width<0&&(M.width=0),M.height<0&&(M.height=0),M}},V=function(S){return Se(S)?new td(S):S},e=function(v,O,Y,j,o,P,h){var x=_.interactiveInfo,E=v.transform;if(E)return _.save(),_.setTransform(E.a,E.b,E.c,E.d,E.tx,E.ty),x&&x.compInfos.push({comp:v,rect:O,matrix:E.clone(),prefix:Tm,refRect:x.refRect}),!0;o===n&&(o=1),P===n&&(P=1);var S=u(v,"clipPercentage"),b=sg(Y,O);if(b&&!j&&1===o&&1===P&&S==n)return x&&x.compInfos.push({comp:v,rect:O,matrix:x.matrix.clone(),prefix:Tm,refRect:x.refRect}),!1;
h=h||yi;var G=O.x+O.width*h.x,D=O.y+O.height*h.y,i=Y.x+Y.width*h.x,I=Y.y+Y.height*h.y,M=Y.width?o*(O.width/Y.width):1,e=Y.height?P*(O.height/Y.height):1;if(_.save(),x&&(x.matrix.appendTranslate(G,D).appendRotate(j).appendScale(M,e).appendTranslate(-i,-I),x.compInfos.push({comp:v,rect:O,matrix:x.matrix.clone(),prefix:Tm,refRect:x.refRect})),on(_,G,D),Hd(_,j||0),bp(_,M,e),on(_,-i,-I),S!=n){var N=zr(Y,u(v,"clipDirection"),S);_.beginPath(),_.rect(N.x,N.y,N.width,N.height),_.clip()}return!0},d=function(){_.restore()},X=function(G,V,z){var t=u(G,"path"),y=u(G,Ni),o=u(G,"scaleX"),H=u(G,"scaleY"),U=N(G),n=O,m=fg(null,t);if(z||(z=G.unionRect,z||(z=pe(m),G.path.func||(G.unionRect=z)),n=z),z){n||(n=G.unionRect,n||(n=pe(m),G.path.func||(G.unionRect=n)));var f=e(G,z,n,y,o,H,U),h=u(G,"borderPattern"),g=Br(_,h),L=E(G,"background"),X=E(G,"borderColor"),c=u(G,"borderWidth"),D=u(G,"gradient"),x=E(G,"gradientColor"),T=u(G,"border3d"),Z=E(G,"border3dColor"),l=u(G,"border3dAccuracy"),w=_.lineJoin,$=_.lineCap;_.lineJoin=u(G,"borderJoin")||jq,_.lineCap=u(G,"borderCap")||Bl,L?(Uq(_,L,D,x,n),fg(_,t),_.fill(),g!==_&&fg(_,t)):fg(_,t);var s=u(G,"borderWidthAbsolute");if(s&&(_.save(),_.setTransform(1,0,0,1,0,0)),c&&X&&(_.lineWidth=c,_.strokeStyle=X,_.stroke(),T&&db(_,X,Z,c,J,l)),bh(_,h),u(G,"dash")){var C=u(G,"dashWidth")||c;if(C>0){h=u(G,"dashPattern")||am;var g=Br(_,h,u(G,"dashOffset")),S=E(G,"dashColor")||E(Pe);g!==_&&fg(_,t),_.strokeStyle=S,_.lineWidth=C,_.stroke(),u(G,"dash3d")&&db(_,S,E(G,"dash3dColor"),C,J,u(G,"dash3dAccuracy")),bh(_,h)}}s&&_.restore(),V===Ro&&Wi(_,L,u(G,"depth"),n),_.lineJoin=w,_.lineCap=$,f&&d()}},S=function(b,f,x,Z){var t=u(b,mh,R),i=u(b,Ni),g=N(b);if(t&&Z.fitSize){var m=new td,K=pe(t),S=U(b,K,Z),r=K.x+g.x*K.width,H=K.y+g.y*K.height,j=S.x+g.x*S.width,I=S.y+g.y*S.height,A=K.width?S.width/K.width:1,$=K.height?S.height/K.height:1;t.each(function(c){m.add({x:j+(c.x-r)*A,y:I+(c.y-H)*$})}),t=m,b.unionRect=null}var h=u(b,"scaleX"),k=u(b,"scaleY"),D=f===En,P=O;if(!x&&D&&(x=b.unionRect,x||(x=pe(t),b.points.func||(b.unionRect=x)),P=x),x){D?P||(P=b.unionRect,P||(P=pe(t),b.points.func||(b.unionRect=P))):P=x;var a,C,q,z,o=e(b,x,P,i,h,k,g),w=u(b,"borderPattern"),v=Br(_,w),X=E(b,"background"),Y=Nn(u(b,"repeatImage"),B,F),M=u(b,"gradientPack"),W=u(b,"borderGradientPack"),y=E(b,"borderColor"),T=u(b,"borderWidth"),L=Nn(u(b,"borderRepeatImage"),B,F),G=u(b,"segments",V),Q=u(b,"gradient"),c=E(b,"gradientColor"),l=u(b,"border3d"),Zi=E(b,"border3dColor"),nc=u(b,"border3dAccuracy"),Mq=u(b,"closePath"),mr=u(b,"fillRule")||"nonzero",Em=_.lineJoin,ee=_.lineCap;if(_.lineJoin=u(b,"borderJoin")||jq,_.lineCap=u(b,"borderCap")||Bl,D)if(X||Y||M){var br=u(b,"fillClipPercentage");if(br!=n){var Ip=zr(P,u(b,"fillClipDirection"),br);_.save(),_.beginPath(),_.rect(Ip.x,Ip.y,Ip.width,Ip.height),_.clip()}pg(_,t,G,Mq),M?Hj(_,M,E,!1,P):Y?xg(_,Y,B,F,s,p):Uq(_,X,Q,c,P),_.fill(mr),M&&_.restore(),br!=n&&_.restore(),v!==_&&pg(v,t,G,Mq)}else pg(v,t,G,Mq);else if("roundRect"===f?a=u(b,"cornerRadius"):"polygon"===f?(a=u(b,"polygonSide"),C=u(b,"cornerRadius"),q=u(b,"regular")):"arc"===f&&(a=u(b,"arcFrom"),C=u(b,"arcTo"),q=u(b,"arcClose"),z=u(b,"arcOval")),X||Y||M){var br=u(b,"fillClipPercentage");if(br!=n){var Ip=zr(P,u(b,"fillClipDirection"),br);_.save(),_.beginPath(),_.rect(Ip.x,Ip.y,Ip.width,Ip.height),_.clip()}Jo(_,f,P,a,C,q,z),M?Hj(_,M,E,!1,P):Y?xg(_,Y,B,F,s,p):Uq(_,X,Q,c,P),_.fill(mr),M&&_.restore(),br!=n&&_.restore(),_!==v&&Jo(v,f,P,a,C,q,z)}else Jo(v,f,P,a,C,q,z);var si=u(b,"borderWidthAbsolute");if(si&&(_.save(),_.setTransform(1,0,0,1,0,0)),T&&(y||L||W)&&(_.lineWidth=T,W?Hj(_,W,E,!0,P):L?Eh(_,L,B,F,s,p):_.strokeStyle=y,_.stroke(),W&&_.restore(),l&&db(_,y,Zi,T,J,nc)),bh(_,w),u(b,"dash")){var ko=u(b,"dashWidth")||T;if(ko>0){w=u(b,"dashPattern")||am;var v=Br(_,w,u(b,"dashOffset")),ll=E(b,"dashColor")||E(Pe);v!==_&&(D?pg(v,t,G,Mq):Jo(v,f,P,a,C,q,z)),_.strokeStyle=ll,_.lineWidth=ko,_.stroke(),u(b,"dash3d")&&db(_,ll,E(b,"dash3dColor"),ko,J,u(b,"dash3dAccuracy")),bh(_,w)}}si&&_.restore(),f===Ro&&Wi(_,X,u(b,"depth"),P),_.lineJoin=Em,_.lineCap=ee,o&&d()}},k=function(d,e){var Y=B||u(d,zc),J=F||u(d,"blendMode"),g=u(d,"name"),P=Nn(g,Y,J);P&&P.cacheRule!=O&&(P=Hh(_,P,u(d,"stretch"),e.width,e.height,s,p,Y)),P?ks(_,P,u(d,"stretch"),e.x,e.y,e.width,e.height,s,p,Y,null,J):al=!1},c=function(R,j){var Z=u(R,"text");if(Z!=O){Z+="";var y,w=u(R,"gradientPack"),T=u(R,"gradient"),c=E(R,"gradientColor"),b=u(R,"font"),L=u(R,"vertical"),e=u(R,"verticalGap")||0,U=u(R,"align"),v=u(R,"vAlign"),t=u(R,"decoration"),g=u(R,"letterGap")||0,S=u(R,"wrap"),i=u(R,"borderWidth"),N=u(R,"borderColor"),m=Ye(b,Z);if(w?(y=Hj(_,w,E,!1,j),_.restore()):y=E(R,zc),!w&&T&&(y=Q.createGradient(_,T,y||Q.labelColor,c||l.imageGradient,j.x,j.y,j.width,j.height)),i&&Se(N)&&(N=Hj(_,N,E,!1,j),_.restore()),L){null==e&&(e=1);var s,Y,p,M=[],k=[];s=S?hn(Z,j.height,b,g,L,e):[Z],_.textBaseline=pj,_.font=b,s.forEach(function(a){for(var w=a.length,X=0,z=(w-1)*e,W=0;w>W;W++){var G=_.measureText(a[W]);M.push(G),z+=G.fontBoundingBoxDescent||m.height,X=C(X,G.width)}k.push({width:X,height:z})});var P=(s.length-1)*g;k.forEach(function(M){P+=M.width}),Y=U&&U!==wq?U===hb?j.x+j.width-P:j.x+(j.width-P)/2:j.x;var H=0;s.forEach(function(J,s){var W=k[s],u=J.length;p=v&&v!==ej?v===pj?j.y:j.y+j.height-W.height:j.y+(j.height-W.height)/2;for(var c=0;u>c;c++){var z=J[c],U=M[H],D=U.fontBoundingBoxDescent||m.height;wn(_,z,b,y,{x:Y,y:p,width:W.width,height:D},je,v,t,g,i,N),p+=D+e,H++}Y+=W.width+g})}else{var s=S?hn(Z,j.width,b,g,L,e):Z.split("\n"),r=s.length;if(r>1){var o=Ye(b,Z),W=o.height,V=r*W+e*(r-1),D=rj(j);return v&&v!==ej?v===ri&&(D.y=j.y+j.height-V):D.y=j.y+(j.height-V)/2,D.height=V,Jj(_,s,D,b,y,U||wq,t,g,i,N),void 0}wn(_,Z,b,y,j,U,v,t,g,i,N)}}},L=function(I,l){Ed(_,E(I,zc),l.x,l.y,l.width,l.height,u(I,"width"))},a=function(h,z){var x=u(h,$j),R=0;if(x&&(x.forEach(function(G){R+=G}),R>0)){for(var U=u(h,"colors")||qg,S=u(h,"startAngle")||0,l=u(h,"hollow"),$=u(h,Ip),f=u(h,Oe),p=u(h,Li),K=$?new td:O,o=z.x,H=z.y,d=z.width,t=z.height,P=o+d/2,Z=H+t/2,y=g(d,t)/2,w=0,Q=0;Q<x.length;Q++){var N=x[Q],k=Qd*N/R,e=S+k;if(_.fillStyle=U[w++],w===U.length&&(w=0),_.beginPath(),l){var r=P+b(S)*y/2,V=Z+G(S)*y/2,n=P+b(e)*y,v=Z+G(e)*y;_.moveTo(r,V),_.arc(P,Z,y/2,S,e,!1),_.lineTo(n,v),_.arc(P,Z,y,e,S,!0)}else _.moveTo(P,Z),_.arc(P,Z,y,e,S,!0);K&&(k=(S+e)/2,K.add({text:Le($)?$(N,Q,R,s):N,x:P+.75*b(k)*y,y:Z+.75*G(k)*y})),_.closePath(),_.fill(),S=e}K&&K.each(function(Y){Cb(_,Y.text,f,p,Y.x,Y.y,0,0,je)})}},w=function(X,K){var e=u(X,pl);if(e&&e.length>0){var V=e.length,Q=u(X,Ip),D=u(X,Oe),v=u(X,Li),T=Q?new td:O,E=u(X,"minValue")||0,h=u(X,"maxValue");if(h==O&&(h=0,e.forEach(function(S){u(S,$j).forEach(function(w){h=C(h,w)})})),E===h)return;for(var H=K.height/(h-E),r=K.y+h*H,L=u(e[0],$j).length,I=K.width/(3*L+1),c=2*I/V,g=0,U=0;V>U;U++)for(var a=e[U],o=u(a,zc),k=u(a,"colors"),m=u(a,$j),N=0;L>N;N++){k?_.fillStyle=k[N]:o?_.fillStyle=o:(_.fillStyle=qg[g++],g===qg.length&&(g=0));var i=m[N],R=i*H,y=K.x+(1+3*N)*I+U*c;if(Kl(_,y,r-R,c,R),T){var Z=Le(Q)?Q(i,N,a,s):i,B=Ye(D,Z).height;T.add({x:y,y:r-R-B,width:c,height:B,text:Z})}}T&&T.each(function(r){Cb(_,r.text,D,v,r.x,r.y,r.width,r.height,je)})}},I=function(i,W){var B=u(i,pl);if(B&&B.length>0){var w=B.length,n=u(B[0],$j).length,A=W.width/(3*n+1),h=0,S=u(i,"maxValue"),N=u(i,Ip),q=u(i,Oe),k=u(i,Li),T=N?new td:O;if(S==O){S=0;for(var $=0;n>$;$++){for(var p=0,y=0;w>y;y++)p+=u(B[y],$j)[$];S=C(S,p)}}if(S>0){for(var $=0;n>$;$++)for(var X=W.y+W.height,y=0;w>y;y++){var x=B[y],c=u(x,zc),Y=u(x,$j)[$],f=Y/S*W.height;c?_.fillStyle=c:(_.fillStyle=qg[h++],h===qg.length&&(h=0)),X-=f;var L={x:W.x+(1+3*$)*A,y:X,width:2*A,height:f};Kl(_,L.x,L.y,L.width,L.height),T&&(L.text=Le(N)?N(Y,$,x,s):Y,T.add(L))}T&&T.each(function(C){Cb(_,C.text,q,k,C.x,C.y,C.width,C.height,je)})}}},z=function(v,J){var i=u(v,pl);if(i&&i.length>0){for(var d=i.length,n=u(i[0],$j).length,F=J.width/(3*n+1),$=0,N=u(v,Ip),y=u(v,Oe),m=u(v,Li),V=N?new td:O,h=0;n>h;h++){for(var S=0,f=0;d>f;f++)S+=u(i[f],$j)[h];if(S>0){var A=J.y+J.height;for(f=0;d>f;f++){var K=i[f],j=u(K,zc),X=u(K,$j)[h],E=X/S*J.height;j?_.fillStyle=j:(_.fillStyle=qg[$++],$===qg.length&&($=0)),A-=E;var q={x:J.x+(1+3*h)*F,y:A,width:2*F,height:E};Kl(_,q.x,q.y,q.width,q.height),V&&(q.text=Le(N)?N(X,h,K,s):X,V.add(q))}}}V&&V.each(function(o){Cb(_,o.text,y,m,o.x,o.y,o.width,o.height,je)})}},i=function(t,E){var D=u(t,pl);if(D&&D.length>0){var K=D.length,m=u(t,"minValue")||0,Y=u(t,"maxValue");if(Y==O&&(Y=0,D.forEach(function(s){u(s,$j).forEach(function(c){Y=C(Y,c)})})),m===Y)return;for(var b=E.height/(Y-m),F=E.y+Y*b,d=u(D[0],$j).length,k=E.width/(3*d+1),o=0,X=u(t,"lineWidth")||2,l=u(t,"line3d"),M=u(t,"linePoint"),f=u(t,Ip),c=u(t,Oe),Q=u(t,Li),I=0;K>I;I++){var H=D[I],S=u(H,zc),L=u(H,$j);S?_.strokeStyle=S:(S=_.strokeStyle=qg[o++],o===qg.length&&(o=0)),_.beginPath();for(var j=0;d>j;j++){var z=E.x+(2+3*j)*k,y=F-L[j]*b;0===j?_.moveTo(z,y):_.lineTo(z,y)}if(_.lineWidth=X,_.stroke(),l&&db(_,S,O,X,J),M||f){var v,Z=X/2+2;for(j=0;d>j;j++){var N=L[j];if(z=E.x+(2+3*j)*k,y=F-N*b,Le(M)?M(_,z,y,S,j,H,s):M&&(_.fillStyle=S,_.beginPath(),_.arc(z,y,Z,0,Qd,!0),_.fill()),Le(f)?v=f(N,j,H,s):f&&(v=N),v){var P=Ye(c,v).height,x=_.shadowBlur;if(x){var w=_.shadowOffsetX,p=_.shadowOffsetY,q=_.shadowColor;_.shadowOffsetX=0,_.shadowOffsetY=0,_.shadowBlur=0,_.shadowColor=O}Cb(_,v,c,Q,z,y-P-Z+2,0,P,je),x&&(_.shadowOffsetX=w,_.shadowOffsetY=p,_.shadowBlur=x,_.shadowColor=q)}}}}}},x=function(G){_=G[0],s=G[1],p=G[2],J=G[3],B=G[4],F=G[5]},T=function(){return[_,s,p,J,B,F]},$=function(c,r){var W;p&&p.getDrawableState?W=p.getDrawableState(s):p&&p.getState?W=p.getState(s):(W=s instanceof Om?s.s($e):null,(W===n||null===W)&&(W=u(c,$e)));var A=u(r,$e);return A!==n&&null!==A&&A!==W?!1:u(r,Dg)},P={border:L,image:k,text:c,pieChart:a,columnChart:w,stackedColumnChart:I,percentageColumnChart:z,lineChart:i};return function(L,j,o,y,c,C,b,G,l,i){if(j&&c&&C){var W=T();_=L,s=b,p=G,!s&&p&&p.isSelfViewEvent&&(s=p),J=p?p._zoom?p._zoom:1:1,B=l,F=i;var q=c,g=C;if(yj()){var D,K,Z,w,t,I,z;0===_[Wp]?yj[0]&&(D=!0):D=!0,_.texureImage2D?yj[1]&&(K=!0):K=!0,_.texureImage3D?yj[2]&&(Z=!0):Z=!0,_.drawDNDState?yj[3]&&(t=!0):t=!0,_.drawRect?yj[Oe[2]]&&(z=!0):z=!0,f[$i[1]+zk[0]+Oi[1]]?yj[zk[0]]&&(I=!0):I=!0,Mc.widget[0]?yj[4]&&(w=!0):w=!0,D&&K&&Z&&w&&t&&I&&z&&(q=o,g=y)}if(j.tagName)return Vp(Po)&&!H[Po]||_.drawImage(j,q,g,c,C),x(W),void 0;if(0==u(j,"visible"))return x(W),void 0;B||(B=rq(j.color,s,p)),i||(F=rq(j.blendMode,s,p)),Vp(Po)&&!H[Po]&&(c=q,C=g);var a=Yj(j,s,p,c),k=kp(j,s,p,C),m={x:0,y:0,width:a,height:k,fitSize:$m(j,s,p)},A=u(j,"clip"),U=u(j,"opacity");if(m.fitSize){var h=m.rw=rq(j.width,s,p)||20;m.widthScale=a/h;var Gb=m.rh=rq(j.height,s,p)||20;m.heightScale=k/Gb}if(_.save(),_.interactiveInfo){var cp=_.interactiveInfo.matrix,pc=cp.clone();cp.appendTranslate(q,g).appendScale(c/a,C/k),_.interactiveInfo.refRect=m}on(_,q,g),(a!==c||k!==C)&&_.scale(c/a,C/k),A&&(Le(A)?A(_,a,k,s,p,j):(_.beginPath(),_.rect(0,0,a,k),_.clip())),U!=O&&(_.globalAlpha*=U),u(j,"comps").forEach(function(B){if(B.prefix){var z=Tm,o=rq(B.prefix,s,p);o&&(Tm=Tm+o+".")}if(0==$(j,B))return B.prefix&&(Tm=z),void 0;if(Um.splice(0,0,B),_.interactiveInfo)var t=_.interactiveInfo.matrix.clone();var h=u(B,"opacity"),L=u(B,"shadow"),C=u(B,"type"),T=u(B,"refRect")||m,U=v(B,T);if(h!=O){var q=_.globalAlpha;_.globalAlpha*=h}if(L){var l=J*Q.devicePixelRatio,K=_.shadowOffsetX,i=_.shadowOffsetY,x=_.shadowBlur,w=_.shadowColor,G=u(B,"shadowOffsetX"),D=u(B,"shadowOffsetY"),H=u(B,"shadowBlur"),a=E(B,"shadowColor");_.shadowOffsetX=(G==O?M:G)*l,_.shadowOffsetY=(D==O?M:D)*l,_.shadowBlur=(H==O?Y:H)*l,_.shadowColor=a||E(Gr)}if("save"===C)_.save();else if("endClip"===C||"restore"===C)_.restore();else if("clip"===C)_.save(),pg(_,u(B,"points",R),u(B,"segments",V),!0),_.clip();else if(ci[C]){if(U=U||{x:0,y:0,width:T.width,height:T.height},S(B,C,U,T),B.prefix&&0===B.prefix.indexOf("ui.")&&p&&f.ui&&p instanceof f.ui.View){p._vectorCompInfo||(p._vectorCompInfo=[]);for(var g=!1,k=0;k<p._vectorCompInfo.length;k++){var W=p._vectorCompInfo[k];if(B.prefix===W.comp.prefix&&b===W.data){p._vectorCompInfo[k]={comp:B,type:C,rect:U,compRefRect:T,data:b,image:j,transform:_.getTransform()},g=!0;break}}g||p._vectorCompInfo.push({comp:B,type:C,rect:U,compRefRect:T,data:b,image:j,transform:_.getTransform()})}}else if(C===En)S(B,C,U,T);else if("SVGPath"===C)X(B,C,U);else{U=U||{x:0,y:0,width:T.width,height:T.height};var A=u(B,Ni),c=u(B,"scaleX"),F=u(B,"scaleY"),Z=N(B),y=e(B,U,U,A,c,F,Z);if(Le(C))r(B,C),Q.drawCompType(C,_,U,B,s,p);else if(Q.getCompType(C)){var I=Q.getCompType(C),_n=I.func||I;r(B,I),Q.drawCompType(_n,_,U,B,s,p)}else P[C]?P[C](B,U):Q.getCompType(C)===n&&cg.test(C)&&(Ug(C),al=!1);y&&d()}L&&(_.shadowOffsetX=K,_.shadowOffsetY=i,_.shadowBlur=x,_.shadowColor=w),h!=O&&(_.globalAlpha=q),_.interactiveInfo&&(_.interactiveInfo.matrix=t),B.prefix&&(Tm=z),Um.splice(0,1)}),_.interactiveInfo&&(_.interactiveInfo.matrix=pc),_.restore(),x(W)}}}();Q.getCurrentComp=function(){return Um[0]},Q.getParentComp=function(){return Um[1]},Q.getInternal=function(){return{isEnter:Fe,isEsc:af,isSpace:vr,isLeft:nn,isUp:Fq,isRight:Fk,isDown:No,addMethod:og,superCall:Ig,toPointsArray:yp,translateAndScale:aj,appendArray:To,createWorldMatrix:Qn,vec3TransformMat4:Qr,setCanvas:Wk,createDiv:Lj,createView:Kj,createCanvas:qb,createImage:im,initContext:sc,layout:oc,fillRect:Kl,Mat:He,drawBorder:Ed,isString:Vp,setBorder:Lc,getPropertyValue:ah,setPropertyValue:oj,drawVerticalLine:lf,draw3DRect:Wi,getPinchDist:lg,isSameRect:sg,getPosition:_m,intersectionLineRect:Fl,getNodeRect:xm,getEdgeAgentPosition:Hq,getEdgeHostPosition:Pd,getImageWidth:Yj,getImageHeight:kp,initItemElement:Md,drawPoints:pg,createG2:Br,closePopup:er,isH:Lg,createAnim:Ub,createNormalMatrix:Ij,makeUVMatrix:Ir,toColorArray:cs,createNormals:Zc,toFloatArray:gq,glMV:ns,glPop:Si,batchShape:Eg,createNodeMatrix:Xi,getShapeModel:Xb,getFaceInfo:hp,transformAppend:On,drawFaceInfo:Lm,glUploadData:eg,glUploadElementData:_j,glDrawArray:ir,glDrawElement:nr,glBindTexture:Lf,pickValueToColor:$s,to3dPointsArray:eo,setGLDebugMode:function(q){Sf=q},cube:function(){return{vs:Qj,is:vo,uv:id}},ui:function(){return{DataUI:Te,NodeUI:le,EdgeUI:pf,GroupUI:Tp,ShapeUI:Ac,GridUI:Up,Data3dUI:ot,Node3dUI:pt,Shape3dUI:st}},getInternalVersion:function(){return"U2FsdGVkX1+jU90g/Zz4GNT5K+PwtaJdGrst5O9+BtA="},getDragger:function(){return Nh},addMSMap:function(T){og(hs,T)},k:I,overrideTimerFunc:function(z,m){Ad=f.Default.callLater=z,ln=f.Default.cancelLater=m},canEnterEditDetailMode:Ze,addEventListener:e,removeEventListener:V,createGradientByPackedData:Hj}},function(y){function W(r,f){r!=O&&(f==O&&Xj!=typeof r?this._54O(r,256):this._54O(r,f))}function A(){return new W(O)}function R(n,Y,U,p,W,O){for(;--O>=0;){var u=Y*this[n++]+U[p]+W;W=B(u/67108864),U[p++]=67108863&u}return W}function Y(v,m,d,$,Y,K){for(var g=32767&m,D=m>>15;--K>=0;){var i=32767&this[v],E=this[v++]>>15,o=D*i+E*g;i=g*i+((32767&o)<<15)+d[$]+(1073741823&Y),Y=(i>>>30)+(o>>>15)+D*E+(Y>>>30),d[$++]=1073741823&i}return Y}function h(J,r,z,K,M,l){for(var L=16383&r,V=r>>14;--l>=0;){var s=16383&this[J],b=this[J++]>>14,k=V*s+b*L;s=L*s+((16383&k)<<14)+z[K]+M,M=(s>>28)+(k>>14)+V*b,z[K++]=268435455&s}return M}function J(v){return pe.charAt(v)}function H(I,U){var v=Hk[I.charCodeAt(U)];return v==O?-1:v}function Q(O){for(var i=this.t-1;i>=0;--i)O[i]=this[i];O.t=this.t,O.s=this.s}function k(S){this.t=1,this.s=0>S?-1:0,S>0?this[0]=S:-1>S?this[0]=S+this.DV:this.t=0}function E(e){var Y=A();return Y._58O(e),Y}function m(c,w){var g,X=this;if(16==w)g=4;else if(8==w)g=3;else if(256==w)g=8;else if(2==w)g=1;else if(32==w)g=5;else{if(4!=w)return X.fromRadix(c,w),void 0;g=2}X.t=0,X.s=0;for(var E=c.length,x=!1,o=0;--E>=0;){var F=8==g?255&c[E]:H(c,E);0>F?"-"==c.charAt(E)&&(x=!0):(x=!1,0==o?X[X.t++]=F:o+g>X.DB?(X[X.t-1]|=(F&(1<<X.DB-o)-1)<<o,X[X.t++]=F>>X.DB-o):X[X.t-1]|=F<<o,o+=g,o>=X.DB&&(o-=X.DB))}8==g&&0!=(128&c[0])&&(X.s=-1,o>0&&(X[X.t-1]|=(1<<X.DB-o)-1<<o)),X._57O(),x&&W.ZERO._78O(X,X)}function j(){for(var e=this,K=e.s&e.DM;e.t>0&&e[e.t-1]==K;)--e.t}function Z(w){var z=this;if(z.s<0)return"-"+z._85O()[Dc](w);var u;if(16==w)u=4;else if(8==w)u=3;else if(2==w)u=1;else if(32==w)u=5;else{if(4!=w)return z.toRadix(w);u=2}var U,r=(1<<u)-1,B=!1,k="",x=z.t,$=z.DB-x*z.DB%u;if(x-->0)for($<z.DB&&(U=z[x]>>$)>0&&(B=!0,k=J(U));x>=0;)u>$?(U=(z[x]&(1<<$)-1)<<u-$,U|=z[--x]>>($+=z.DB-u)):(U=z[x]>>($-=u)&r,0>=$&&($+=z.DB,--x)),U>0&&(B=!0),B&&(k+=J(U));return B?k:"0"}function e(){var w=A();return W.ZERO._78O(this,w),w}function o(){return this.s<0?this._85O():this}function T(q){var P=this,G=P.s-q.s;if(0!=G)return G;var O=P.t;if(G=O-q.t,0!=G)return P.s<0?-G:G;for(;--O>=0;)if(0!=(G=P[O]-q[O]))return G;return 0}function c(b){var T,S=1;return 0!=(T=b>>>16)&&(b=T,S+=16),0!=(T=b>>8)&&(b=T,S+=8),0!=(T=b>>4)&&(b=T,S+=4),0!=(T=b>>2)&&(b=T,S+=2),0!=(T=b>>1)&&(b=T,S+=1),S}function _(){var $=this;return $.t<=0?0:$.DB*($.t-1)+c($[$.t-1]^$.s&$.DM)}function F(B,V){var r;for(r=this.t-1;r>=0;--r)V[r+B]=this[r];for(r=B-1;r>=0;--r)V[r]=0;V.t=this.t+B,V.s=this.s}function X(p,h){for(var M=p;M<this.t;++M)h[M-p]=this[M];h.t=C(this.t-p,0),h.s=this.s}function r(Y,r){var I,K=this,_=Y%K.DB,f=K.DB-_,R=(1<<f)-1,t=B(Y/K.DB),X=K.s<<_&K.DM;for(I=K.t-1;I>=0;--I)r[I+t+1]=K[I]>>f|X,X=(K[I]&R)<<_;for(I=t-1;I>=0;--I)r[I]=0;r[t]=X,r.t=K.t+t+1,r.s=K.s,r._57O()}function P(l,A){var E=this;A.s=E.s;var R=B(l/E.DB);if(R>=E.t)return A.t=0,void 0;var Y=l%E.DB,I=E.DB-Y,H=(1<<Y)-1;A[0]=E[R]>>Y;for(var S=R+1;S<E.t;++S)A[S-R-1]|=(E[S]&H)<<I,A[S-R]=E[S]>>Y;Y>0&&(A[E.t-R-1]|=(E.s&H)<<I),A.t=E.t-R,A._57O()}function f(O,H){for(var j=this,J=0,w=0,f=g(O.t,j.t);f>J;)w+=j[J]-O[J],H[J++]=w&j.DM,w>>=j.DB;if(O.t<j.t){for(w-=O.s;J<j.t;)w+=j[J],H[J++]=w&j.DM,w>>=j.DB;w+=j.s}else{for(w+=j.s;J<O.t;)w-=O[J],H[J++]=w&j.DM,w>>=j.DB;w-=O.s}H.s=0>w?-1:0,-1>w?H[J++]=j.DV+w:w>0&&(H[J++]=w),H.t=J,H._57O()}function z(h,Q){var V=this.abs(),i=h.abs(),l=V.t;for(Q.t=l+i.t;--l>=0;)Q[l]=0;for(l=0;l<i.t;++l)Q[l+V.t]=V.am(0,i[l],Q,l,0,V.t);Q.s=0,Q._57O(),this.s!=h.s&&W.ZERO._78O(Q,Q)}function v(h){for(var w=this.abs(),t=h.t=2*w.t;--t>=0;)h[t]=0;for(t=0;t<w.t-1;++t){var c=w.am(t,w[t],h,2*t,0,1);(h[t+w.t]+=w.am(t+1,2*w[t],h,2*t+1,c,w.t-t-1))>=w.DV&&(h[t+w.t]-=w.DV,h[t+w.t+1]=1)}h.t>0&&(h[h.t-1]+=w.am(t,w[t],h,2*t,0,1)),h.s=0,h._57O()}function U(m,i,R){var N=m.abs(),d=this;if(!(N.t<=0)){var V=d.abs();if(V.t<N.t)return i!=O&&i._58O(0),R!=O&&d._77O(R),void 0;R==O&&(R=A());var v=A(),r=d.s,x=m.s,u=d.DB-c(N[N.t-1]);u>0?(N._44O(u,v),V._44O(u,R)):(N._77O(v),V._77O(R));var P=v.t,F=v[P-1];if(0!=F){var C=F*(1<<d.F1)+(P>1?v[P-2]>>d.F2:0),f=d.FV/C,Y=(1<<d.F1)/C,t=1<<d.F2,a=R.t,l=a-P,Z=i==O?A():i;for(v._59O(l,Z),R._52O(Z)>=0&&(R[R.t++]=1,R._78O(Z,R)),W.ONE._59O(P,Z),Z._78O(v,v);v.t<P;)v[v.t++]=0;for(;--l>=0;){var s=R[--a]==F?d.DM:B(R[a]*f+(R[a-1]+t)*Y);if((R[a]+=v.am(0,s,R,l,0,P))<s)for(v._59O(l,Z),R._78O(Z,R);R[a]<--s;)R._78O(Z,R)}i!=O&&(R._45O(P,i),r!=x&&W.ZERO._78O(i,i)),R.t=P,R._57O(),u>0&&R._46O(u,R),0>r&&W.ZERO._78O(R,R)}}}function n(m){var e=A();return this.abs()._49O(m,O,e),this.s<0&&e._52O(W.ZERO)>0&&m._78O(e,e),e}function V(p){this.m=p}function t(k){return k.s<0||k._52O(this.m)>=0?k.mod(this.m):k}function K(Z){return Z}function w(D){D._49O(this.m,O,D)}function x(I,e,y){I._47O(e,y),this._74O(y)}function l(U,m){U._48O(m),this._74O(m)}function u(){if(this.t<1)return 0;var y=this[0];if(0==(1&y))return 0;var P=3&y;return P=15&P*(2-(15&y)*P),P=255&P*(2-(255&y)*P),P=65535&P*(2-(65535&(65535&y)*P)),P=P*(2-y*P%this.DV)%this.DV,P>0?this.DV-P:-P}function q(Q){var J=this;J.m=Q,J.mp=Q._50O(),J.mpl=32767&J.mp,J.mph=J.mp>>15,J.um=(1<<Q.DB-15)-1,J.mt2=2*Q.t}function i(I){var Y=A();return I.abs()._59O(this.m.t,Y),Y._49O(this.m,O,Y),I.s<0&&Y._52O(W.ZERO)>0&&this.m._78O(Y,Y),Y}function D(k){var v=A();return k._77O(v),this._74O(v),v}function d(T){for(var P=this;T.t<=P.mt2;)T[T.t++]=0;for(var m=0;m<P.m.t;++m){var B=32767&T[m],M=B*P.mpl+((B*P.mph+(T[m]>>15)*P.mpl&P.um)<<15)&T.DM;for(B=m+P.m.t,T[B]+=P.m.am(0,M,T,m,0,P.m.t);T[B]>=T.DV;)T[B]-=T.DV,T[++B]++}T._57O(),T._45O(P.m.t,T),T._52O(P.m)>=0&&T._78O(P.m,T)}function $(j,R){j._48O(R),this._74O(R)}function a(i,N,l){i._47O(N,l),this._74O(l)}function S(){return 0==(this.t>0?1&this[0]:this.s)}function Om(o,t){if(o>4294967295||1>o)return W.ONE;var G=A(),U=A(),v=t._73O(this),r=c(o)-1;for(v._77O(G);--r>=0;)if(t._76O(G,U),(o&1<<r)>0)t._75O(U,v,G);else{var B=G;G=U,U=B}return t.revert(G)}function Kn(j,c){var g;return g=256>j||c._51O()?new V(c):new q(c),this.exp(j,g)}function qp(){var K=this;if(K.s<0){if(1==K.t)return K[0]-K.DV;if(0==K.t)return-1}else{if(1==K.t)return K[0];if(0==K.t)return 0}return(K[1]&(1<<32-K.DB)-1)<<K.DB|K[0]}function Ko(U,s){return new W(U,s)}function nd(){var d=this;d.n=O,d.e=0,d.d=O,d.p=O,d.q=O,d.dmp1=O,d.dmq1=O,d._10A=O}function Fb(r){return r._53O(this.e,this.n)}function hn(h){var z,B,$,Z="",g=0;for(z=0;z<h.length&&h.charAt(z)!=km;++z)$=Tg.indexOf(h.charAt(z)),0>$||(0==g?(Z+=J($>>2),B=3&$,g=1):1==g?(Z+=J(B<<2|$>>4),B=15&$,g=2):2==g?(Z+=J(B),Z+=J($>>2),B=3&$,g=3):(Z+=J(B<<2|$>>4),Z+=J(15&$),g=0));return 1==g&&(Z+=J(B<<2)),Z}function zo(z){var C=z.split(""),A=hn(z);return C.forEach(function(R){var m=R.length;m>0&&A&&(Df+=ob(R))}),A}function uj(b,g){var Y=fn._4O.Util._56O(b,"ss"),r={},q=0;return r.v=Y==g,r.t=1,r.s=0>q?-1:0,zi=r.v,q>0?r[0]=q:-1>q?r[0]=q+r.DV:r.t=0,[Y,r]}function Id(A){var V=38,T=A.substring(0,V);if(T&&30==T.indexOf("05000420")){var q=["ss",A.substring(V)];return q}return[]}function or(D,Z){Z=Z.replace(jo,""),Z=Z.replace(/[ \n]+/g,"");var K=Ko(Z,16);if(K._55O()>this.n._55O())return 0;var a=this._37O(K),w=a[Dc](16).replace(/^1f+00/,""),N=Id(w);if(0==N.length)return!1;for(var t,h,g,Q=.5,s=xd,P=[0,.5,.75,.875,.9375],l=[],f=[],O=[],n=Qd/s,R=N[1],X=uj(D,R)[0],q=0,U=0;q<P.length;q++){var T=0===q%2?0:.5;for(t=0;s>=t;t++)h=(t+T)*n,g=1-P[q],l.push(b(h)*Q*g,-Q+2*P[q]*Q,-G(h)*Q*g),f.push((t+T)/s,g)}for(q=0;q<P.length-1;q++){var y=q*(s+1),r=(q+1)*(s+1);for(t=0;s>t;t++)O.push(y+t,r+t+1,r+t,y+t,y+t+1,r+t+1)}return O.forEach(function(S){U+=S}),R==X&&U>10}var eb,Zp=0xdeadbeefcafe,Gm=15715070==(16777215&Zp),Dc="toString",mg="",Mj="nat",yj=function(){};M=y["D"+11182[Dc](L(2,5))];var sp=W.prototype;kk+=Uj.substr(0,1);var Zb=y.navigator?y.navigator.appName:"";Gm&&"Microsoft Internet Explorer"==Zb?(sp.am=Y,eb=30):Gm&&"Netscape"!=Zb?(sp.am=R,eb=26):(sp.am=h,eb=28),sp.DB=eb,sp.DM=(1<<eb)-1,sp.DV=1<<eb;var Wk=52;sp.FV=L(2,Wk),sp.F1=Wk-eb,sp.F2=2*eb-Wk;var tj,xi,pe="0123456789abcdefghijklmnopqrstuvwxyz",Hk=[],_k=function(w){return String.fromCharCode(w)};for(tj="0".charCodeAt(0),xi=0;9>=xi;++xi)Hk[tj++]=xi;for(tj="a".charCodeAt(0),xi=10;36>xi;++xi)Hk[tj++]=xi;for(tj="A".charCodeAt(0),xi=10;36>xi;++xi)Hk[tj++]=xi;var Oc=V.prototype;Oc._73O=t,Oc.revert=K,Oc._74O=w,Oc._75O=x,Oc._76O=l;var To=q.prototype;To._73O=i,To.revert=D,To._74O=d,To._75O=a,To._76O=$,sp._77O=Q,sp._58O=k,sp._54O=m,sp._57O=j,sp._59O=F,sp._45O=X,sp._44O=r,sp._46O=P,sp._78O=f,sp._47O=z,sp._48O=v,sp._49O=U,sp._50O=u,sp._51O=S,sp.exp=Om,sp.toString=Z,sp._85O=e,sp.abs=o,sp._52O=T,sp._55O=_,sp.mod=n,sp._53O=Kn,W.ZERO=E(0),W.ONE=E(1),sp._86O=qp;var zs=function(K,X){var y=this;y.isPublic=!0,typeof K!==Xj?(y.n=K,y.e=X):K!=O&&X!=O&&K.length>0&&X.length>0&&(y.n=Ko(K,16),y.e=ob(X,16))};Of=function(){var X,N,D=zo(kp),E=D.substr(0,4),G=D.substr(4,2),u=D.substr(6,2),K=1,v=!K,i=I,B=[],t=Dn.charAt(7);if(M&&(M[Dc]().indexOf(Mj)<0||M[kk][Dc]().indexOf(Mj)<0||!D?X=O:(D=new M(E-0,G-K,u-0),N=D.setHours(9),M[kk]()>N?X=ac[t]:v=!0)),D&&X&&X[0]&&X[s(.5)]&&i){var r=ap(X[0]),S=ap(X[1]);for(var x in S)B.push(x);var q,k=0,b=r[B[k]],H=S[B[k++]],e=S[B[k++]],J=S[B[k++]],g=S[B[k++]],F=S[B[k++]],Y=S[B[k++]],$=r[B[k]],m=S[B[k++]],p=yi._27O(i);if(b===H&&p&&m){q=H+e+J+g+F+Y;var j=!Y||Y===lo||!lo&&Y===(cg+"")[0];if(!j&&Y)for(var C,Z=0,P=Y.length;P>Z;Z++)Y[Z]===Zd[k]?C===lo?j=!0:C[0]===$k[5]&&lo&&lo.indexOf(C.substr(1))>=0?j=!0:C=O:(C==O?C=Y[Z]:C+=Y[Z],Z===P-1&&(C===lo?j=!0:C[0]===$k[5]&&lo&&lo.indexOf(C.substr(1))>=0&&(j=!0)));q&&p._31O(q,m)&&p._31O(b,$)&&j&&(!F||M[kk]()<F)&&(v=!0)}}return v||(Jo=$d),t};var Ag=nd.prototype;Ag._37O=Fb,Ag._38O=zs;var Tg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",km="=",Je=25,up=10,kp="ICISFQ==",rk=rk||function(I,O){var v={},M=v._7A={},e=M._6A=function(){function c(){}return{_80O:function(s){c.prototype=this;var V=new c;return s&&V._5A(s),V.hasOwnProperty("_82O")||(V._82O=function(){V.$super._82O.apply(this,arguments)}),V._82O.prototype=V,V.$super=this,V},_3A:function(){var O=this._80O();return O._82O.apply(O,arguments),O},_82O:function(){},_5A:function(c){for(var k in c)c.hasOwnProperty(k)&&(this[k]=c[k]);c.hasOwnProperty(Dc)&&(this.toString=c.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),c=M._39O=e._80O({_82O:function(z,p){z=this._84O=z||[],this._65O=p!=O?p:4*z.length},toString:function(L){return(L||x).stringify(this)},_89O:function(y){var H=this._84O,P=y._84O,v=this._65O,r=y._65O;if(this._57O(),v%4)for(var S=0;r>S;S++){var q=255&P[S>>>2]>>>24-8*(S%4);H[v+S>>>2]|=q<<24-8*((v+S)%4)}else if(P.length>65535)for(var S=0;r>S;S+=4)H[v+S>>>2]=P[S>>>2];else H.push.apply(H,P);return this._65O+=r,this},_57O:function(){var G=this._84O,H=this._65O;G[H>>>2]&=4294967295<<32-8*(H%4),G.length=s(H/4)},_88O:function(){var X=e._88O.call(this);return X._84O=this._84O.slice(0),X},_87O:function(A){for(var u=[],z=0;A>z;z+=4)u.push(0|4294967296*Ik);return new c._82O(u,A)}}),w=v._2A={},x=w._69O={stringify:function(_){var H,s=_._84O,r=_._65O,n=[];for(H=0;r>H;H++){var t=255&s[H>>>2]>>>24-8*(H%4);n.push((t>>>4).toString(16)),n.push((15&t).toString(16))}return n.join("")},_68O:function(D){for(var B=D.length,l=[],d=0;B>d;d+=2)l[d>>>3]|=ob(D.substr(d,2),16)<<24-4*(d%8);return new c._82O(l,B/2)}},n=w._8A={stringify:function(O){var f,K=O._84O,P=O._65O,x=[];for(f=0;P>f;f++){var R=255&K[f>>>2]>>>24-8*(f%4);x.push(_k(R))}return x.join("")},_68O:function(z){var Y,Z=z.length,S=[];for(Y=0;Z>Y;Y++)S[Y>>>2]|=(255&z.charCodeAt(Y))<<24-8*(Y%4);return new c._82O(S,Z)}},y=w._9A={stringify:function(T){try{return decodeURIComponent(escape(n.stringify(T)))}catch(P){throw new Error("")}},_68O:function(M){return n._68O(unescape(encodeURIComponent(M)))}},A=M._32O=e._80O({_1A:function(){this._83O=new c._82O,this._23O=0},_33O:function(x){typeof x==Xj&&(x=y._68O(x)),this._83O._89O(x),this._23O+=x._65O},_25O:function(p){var Q=this._83O,D=Q._84O,h=Q._65O,I=this._79O,k=4*I,H=h/k;H=p?s(H):C((0|H)-this._22O,0);var U=H*I,e=g(4*U,h);if(U){for(var V=0;U>V;V+=I)this._20O(D,V);var v=D.splice(0,U);Q._65O-=e}return new c._82O(v,e)},_88O:function(){var L=e._88O.call(this);return L._83O=this._83O._88O(),L},_22O:0});M._66O=A._80O({cfg:e._80O(),_82O:function(k){this.cfg=this.cfg._80O(k),this._1A()},_1A:function(){A._1A.call(this),this._34O()},_81O:function(j){return this._33O(j),this._25O(),this},_72O:function(j){j&&this._33O(j);var r=this._21O();return r},_79O:16,_26O:function(q){return function(M,C){return new q._82O(C)._72O(M)}},_19O:function(q){return function(c,O){return new Z._71O._82O(q,O)._72O(c)}}});var Z=v._67O={};return v}();!function(){var U=rk,V=U._7A,Y=V._39O,m=V._66O,g=U._67O,h=[],G=[];!function(){function J(e){for(var D=N(e),r=2;D>=r;r++)if(!(e%r))return!1;return!0}function $(L){return 0|4294967296*(L-(0|L))}for(var e=2,T=0;64>T;)J(e)&&(8>T&&(h[T]=$(L(e,.5))),G[T]=$(L(e,1/3)),T++),e++}();var W=[],z=g._41O=m._80O({_34O:function(){this._64O=new Y._82O(h.slice(0))},_20O:function(P,s){for(var N=this._64O._84O,m=N[0],y=N[1],L=N[2],e=N[3],n=N[4],C=N[5],Y=N[6],X=N[7],p=0;64>p;p++){if(16>p)W[p]=0|P[s+p];else{var h=W[p-15],K=(h<<25|h>>>7)^(h<<14|h>>>18)^h>>>3,Q=W[p-2],A=(Q<<15|Q>>>17)^(Q<<13|Q>>>19)^Q>>>10;W[p]=K+W[p-7]+A+W[p-16]}var J=n&C^~n&Y,U=m&y^m&L^y&L,d=(m<<30|m>>>2)^(m<<19|m>>>13)^(m<<10|m>>>22),$=(n<<26|n>>>6)^(n<<21|n>>>11)^(n<<7|n>>>25),v=X+$+J+G[p]+W[p],R=d+U;X=Y,Y=C,C=n,n=0|e+v,e=L,L=y,y=m,m=0|v+R}N[0]=0|N[0]+m,N[1]=0|N[1]+y,N[2]=0|N[2]+L,N[3]=0|N[3]+e,N[4]=0|N[4]+n,N[5]=0|N[5]+C,N[6]=0|N[6]+Y,N[7]=0|N[7]+X},_21O:function(){var W=this._83O,z=W._84O,M=8*this._23O,m=8*W._65O;return z[m>>>5]|=128<<24-m%32,z[(m+64>>>9<<4)+14]=B(M/4294967296),z[(m+64>>>9<<4)+15]=M,W._65O=4*z.length,this._25O(),this._64O},_88O:function(){var h=m._88O.call(this);return h._64O=this._64O._88O(),h}});U._41O=m._26O(z),U._42O=m._19O(z)}();var jo=new RegExp("");jo.compile("[^0-9a-f]","gi"),nd._28O=-1,nd._29O=-2,Ag._31O=or,Ag._63O=or,nd._43O=-2;var df=new function(){var c=this;c._5O=function(f,n){if("8"!=f.substring(n+2,n+3))return 1;var e=ob(f.substring(n+3,n+4));return 0==e?-1:e>0&&10>e?e+1:-2},c._13O=function(x,t){var H=c._5O(x,t);return 1>H?"":x.substring(t+2,t+2+2*H)},c._12O=function(V,y){var v=c._13O(V,y);if(""==v)return-1;var G;return G=ob(v.substring(0,1))<8?new W(v,16):new W(v.substring(2),16),G._86O()},c._6O=function(f,x){var T=c._5O(f,x);return 0>T?T:x+2*(T+1)},c._11O=function(D,v){var Z=c._6O(D,v),u=c._12O(D,v);return D.substring(Z,Z+2*u)},c._10O=function(y,q){var K=c._6O(y,q),t=c._12O(y,q);return K+2*t},c._7O=function(M,Z){var x=[],B=c._6O(M,Z);x.push(B);for(var z=c._12O(M,Z),Q=B,W=0;;){var f=c._10O(M,Q);if(f==O||f-B>=2*z)break;if(W>=200)break;x.push(f),Q=f,W++}return x}};if(df._90O=_k(up+24),df._91O=p+_k(up*up+8),fn==O||!fn)var fn={};fn._4O!=O&&fn._4O||(fn._4O={});var _r=fn._4O;fn._4O.Util=new function(){var a=this;a._56O=function(j){var q=new fn._4O._3O;return q._30O(j)},a._4A=function(I){var i=new fn._4O._3O;return i._36O(I)},a._11A=function(F){var $=new _r._3O;return $._30O(F)}},fn._4O._3O=function(){var M=this;M._8O=function(S,P){if("ss"==S&&"cj"==P){try{M.md=rk._67O._41O._3A()}catch(K){yj(mg)}M._24O=function(u){M.md._81O(u)},M._35O=function(k){var V=rk._2A._69O._68O(k);M.md._81O(V)},M._60O=function(){var L=M.md._72O();return L[Dc](rk._2A._69O)},M._30O=function(e){return M._24O(e),M._60O()},M._36O=function(V){return M._35O(V),M._60O()}}},M._24O=function(){yj(mg)},M._35O=function(){yj(mg)},M._60O=function(){yj(mg)},M._30O=function(){yj(mg)},M._36O=function(){yj(mg)},M._8O("ss","cj")},Nc=function(H){var T=Np[fs[7]],$=1,D=!1;if(dc.a!=Np[Dq])return dc.a;if(dc.forEach(function(E){$*=E}),H>$){if(T&&T[1]&&T[0]){var y=T[0],z=T[1];z=z.split(df._90O),y=y.split(df._90O);var W=z[3],w=y[3],s=z[7],N=z[11],B=z[15],A=z[19],L=z[23],b=z[27],G=y[7],g=W+s+N+B+A+L,O=L?!1:!0,S=w===W;if(L===json_or_bin_pattern.toString()[0]&&(L=L+L+L),L){var f=L&&L.split(ff("firefox")[3]);if(f)for(var U=0;U<f.length;U++){var F=f[U];if(F[0]===Ve[8]&&(F=F.substring(1)),Nj.indexOf(F)>=0){O=!0;break}}}D=S&&oq()(w,G)&&oq()(g,b)&&O&&(!A||A>H),D&&N.indexOf(Bf.length)>=0&&(Nc[Bf.length]=Bf),D&&N.indexOf(Bf.length+1)>=0&&(Nc[Bf.length+1]=Bf),D&&N.indexOf(Bf.length+3)>=0&&(Nc[Bf.length+3]=Bf),D&&N.indexOf(tm.length)>=0&&(Nc[tm.length]=tm)}D||(Te.prototype._42=as)}else D=!0,Nc[Bf.length]=Nc[Bf.length+1]=Nc[Bf.length+3]=Nc[tm.length]=Bf;return dc.a=D,D},Je=String.fromCharCode(Je+20);var we=function($){return $=$.replace(jo,mg),$=$.replace(/[ \n]+/g,mg)},bq="30",Fq="06",Nb="02",Li="03",di=Ko,kd=/^1f+00/,yi=function(){var h;return h={_18O:function(v){var z=v,V=z.replace(/\s+/g,""),O=hn(V);return O},_14O:function(N){var o=this._18O(N),x=this._15O(o);return x},_15O:function(U){var S=this._17O(U);if("2a864886f70d010101"==S._61O){var M=this._16O(S.key),W=new nd;return W._38O(M.n,M.e),W}yj(mg)},_16O:function(N){var Z={};N.substr(0,2)!=bq&&yj(mg);var A=df._7O(N,0);return 2!=A.length&&yj(mg),N.substr(A[0],2)!=Nb&&yj(mg),Z.n=df._11O(N,A[0]),N.substr(A[1],2)!=Nb&&yj(mg),Z.e=df._11O(N,A[1]),Z},_17O:function(c){var I={};I._40O=O;var M=df._7O(c,0);2!=M.length&&yj(mg);var V=M[0];c.substr(V,2)!=bq&&yj(mg);var i=df._7O(c,V);return 2!=i.length&&yj(mg),c.substr(i[0],2)!=Fq&&yj(mg),I._61O=df._11O(c,i[0]),c.substr(i[1],2)==Fq?I._40O=df._11O(c,i[1]):c.substr(i[1],2)==bq&&(I._40O={},I._40O.p=df._70O(c,i[1],[0],Nb),I._40O.q=df._70O(c,i[1],[1],Nb),I._40O.g=df._70O(c,i[1],[2],Nb)),c.substr(M[1],2)!=Li&&yj(mg),I.key=df._11O(c,M[1]).substr(2),I}},h._17O?h:O}(),om=yi._27O=function(K){return yi._14O(K)};oq=function(){return function(i,J){if(i&&J){J=we(J);var o=di(J,L(2,4)),y=this;if(!y||!y.n||o._55O()>y.n._55O())return 0;
var X=y._37O(o),a=X[Dc](L(2,4)).replace(kd,""),Y=Id(a);if(0==Y.length)return!1;var E=Y[0],K=Y[1],r=function(u){return fn._4O.Util._56O(u,E)},e=r(i);return K==e}}.bind(om(I))};var vj,dh;return function(){var i=es.length-Nm.length;if(i>0)for(var W=0;i>W;W++)vj=_r.Util,dh=we}(),li=function(k,y){y=dh(y);var n=om(Gq),i=hi.length,v=2*i,D=di(y,L(i,v)),b=n,I=!0;if(b){var V=b[Eb[0]];V&&D._55O()<=V._55O()&&(I=!1)}if(I)return 0;var U=b._37O(D),G=U[Dc](L(i,v)).replace(kd,""),$=Id(G);if(0==$.length)return!1;var B=$[0],A=$[1],R=vj._11A(k,B);return A==R},yi}(H,y),og(Q,{load:function(){var m={},D=function(U){return U?"c_"+(U.sync?"1":"0")+"_"+(U.post?"1":"0")+"_"+(U.responseType||"H")+"_"+(U.mimeType||"H")+"_"+(U.data?JSON.stringify(U.data):"H"):""};return function(M,B,g){var s,i=m[M],O=D(g);return i&&(s=i[O])?(s.push(B),void 0):(m[M]||(i=m[M]={count:0}),s=i[O]=[B],i.count++,Q.xhrLoad(M,function(k){delete i[O],i.count--,i.count||delete m[M],s.forEach(function(v){v(k)})},g),void 0)}}(),asyncEach:function(c,F,W){"function"!=typeof W&&(W=Function.prototype);var Q=new Array(c.length),V=0,z=!1;c.forEach(function(J,s){F(J,function(l,m){return z?void 0:l?(z=!0,W(null)):(Q[s]=m,V++,V===c.length?W(Q):void 0)})})},xhrLoad:function(n,E,H){var z=!1;Se(n)||(z=!0,n=[n]),H=H||{};var q=H.sync,D=null,O=H.method||"GET";return H.post&&(O="POST"),H.method=O,Q.asyncEach(n,function(E,t){if(E=Q.beforeLoadURL(E),E.data)t(null,E.data);else{H.url=encodeURI(E);var W=new Wh;W.onload=function(){200===this.status||0===this.status?t(null,W.getResponseText()):t(!0)},W.onerror=function(){t(!0)},W.send(H)}},function(G){var r="function"==typeof E;(r||q)&&(D=z&&G?G[0]:G,r&&E(D))}),q?D:void 0}});var xi=y.setPrototypeOf||function(r,N){return r.__proto__=N,r},lj=y.getPrototypeOf||function(i){return i.__proto__},cn=y.freeze;y.isFrozen;var Cj=function(){var A=function(e){return e};return function(e){return e&&e.length?new Function("o",["return o['",e.join("']['"),"'];"].join("")):A}}(),ng=function(){var Q=function(V,$){return V=$};return function(w){return w&&w.length?new Function("o","v",["return o['",w.join("']['"),"'] = v;"].join("")):Q}}();!function(){function s(t){var d=[];if(t)for(var O;(O=U.exec(t))!=n;)d.push(O[1]);return d}function V(A,l){var R=T.exec(l);this._cell=A,this._key=R[1],this._format=R[2],this._style=s(R[3])}function B(m){for(var H=this._cellList=[],Z=this._paramList=[],l=m.split(G),N=0,k=l.length;k>N;++N){var e=l[N];if("{{"!==e)for(var c=e.split(u),d=0,Q=c.length;Q>d;++d){var h=c[d];u.test(h)?(Z.push(new V(H.length,h)),H.push(n)):h.length>0&&H.push(h)}else H.push("{")}this._formatList=this._cellList.slice(0)}var J={},A={},G=/(\{\{)/,u=/(\{\w+(?:\:\w+(?:\&[\w\.])*)?\})/,T=/\{(\w+)(?:\:(\w+)((?:\&[\w\.])*))?\}/,U=/\&([\w\.]*)/g;B.prototype._73O=function(g){for(var W=this._paramList.length;W--;){var R=this._paramList[W],j=g[ob(R._key)+1],t=A[R._format];t&&(j=t(j,R._style)),this._formatList[R._cell]=j}return this._formatList.join("")},B.prototype._map=function(w){for(var I=this._paramList.length;I--;){var _=this._paramList[I],k=w[_._key],K=A[_._format];K&&(k=K(k,_._style)),this._formatList[_._cell]=k}return this._formatList.join("")};var e=function(f){var W=J[f];return W||(J[f]=W=new B(f)),W._73O(arguments)};return e.map=function(X,w){var j=J[X];return j||(J[X]=j=new B(X)),j._map(w)},e.setValueFormat=function(Q,N){A[Q]=N},e.gc=function(){J.length=0},e.__parsed=J,e}();var ts=function(){function s(c,v,f,j){var E=c?c.path.slice(0):[];v&&E.push(v),this.desc=f,this.name=v,this.path=cn(E),this.getter=Cj(E),this.setter=ng(E),this.isLeaf=j,this.parent=c,this.children=[],this.childMap={}}return s.create=function(){function H(V,$,t,x){var j=x(t),E=new s(V,$,t,j);if(!j){for(var N=E.children,_=E.childMap,G=y.keys(t),F=0,S=G.length;S>F;++F){var a=G[F],A=H(E,a,t[a],x);N.push(A),_[A.name]=A}E.children=cn(N),E.childMap=cn(_)}return cn(E),E}return function(z,G){return H(n,n,z,G)}}(),s.prototype.forEach=function(d,Y){for(var O=this.children,s=0,i=O.length;i>s;++s){var z=O[s];d(z,Y)}},s}(),cn=y.freeze,Qi=1,ar={main:{mask:1,priority:Q.cameraPriority.main,clearDepth:!1,ignore:!1},top:{mask:2,priority:Q.cameraPriority.top,ignore:!1}},Wd="main",Qb=ar[Wd].mask,Sg=function(X,a,t,T){X=X||0;var E;if(t&&a in t)E=t[a].mask;else if(a in ar)E=ar[a].mask,!T&&t&&(t[a]=rj(ar[a]));else{if(T)return X;var L=1;if(t){var W=y.keys(t);Hm.forEach(function(L){W.indexOf(L)<0&&W.push(L)}),L=W.length}else L=Lk;if(L>=32)throw new Error("Only 31 render layer can be defined.");var p={mask:1<<L,priority:ar[Wd].priority};t?t[a]=p:(Lk++,ar[a]=p,E=ar[a].mask,Hm=si(y.keys(ar)),Lk=Hm.length,Qi++)}return X|=E},Bp=function(N,l,_){var c=0;if("string"==typeof N)c=Sg(c,N,l,_);else for(var O=0,G=N.length;G>O;++O)c=Sg(c,N[O],l,_);return c},wm=function(n,o){return n&&o&&n&o},si=function(l){return l.sort(function(K,J){return ar[K].priority-ar[J].priority})},Hm=si(y.keys(ar)),Lk=Hm.length;og(Q,{setRenderLayerInfo:function(s,V){if(Sg(0,s),V){for(var j in V)ar[s][j]=V[j];V.priority&&(Hm=si(y.keys(ar)))}},getRenderLayerInfo:function(c){return ar[c]}},!0);var td=f.List=function(){this._as=[];var X,h,W=arguments.length;if(1===W){var U=arguments[0];if(Sb(U)&&(U=U._as),Se(U))for(h=U.length,X=0;h>X;X++)this._as.push(U[X]);else U!=O&&this._as.push(U)}else if(W>1)for(X=0;W>X;X++)this._as.push(arguments[X])};Yf("List",y,{forEach:function(D,p){this.each(D,p)},push:function(){for(var t=0;t<arguments.length;t++)this.add(arguments[t])},pop:function(){return this._as.pop()},shift:function(){return this._as.shift()},unshift:function(){return this._as.unshift.apply(this._as,arguments)},size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(W,c){return c===n?this._as.push(W):this._as.splice(c,0,W)},addAll:function(r){Sb(r)&&(r=r._as),Se(r)?To(this._as,r):this._as.push(r)},get:function(C){return this._as[C]},slice:function(D,Q){return new td(this._as.slice(D,Q))},remove:function(X){var m=this._as.indexOf(X);return m>=0&&m<this._as.length&&this.removeAt(m),m},removeAt:function(E){return this._as.splice(E,1)[0]},set:function(N,D){return this._as[N]=D},clear:function(){return this._as.splice(0,this._as.length)},contains:function(z){return this._as.indexOf(z)>=0},indexOf:function(I){return this._as.indexOf(I)},each:function(S,U){for(var D=0,F=this._as.length;F>D;D++){var L=this._as[D];U?S.call(U,L,D,this):S(L,D,this)}},reverseEach:function(F,C){for(var l=this._as.length-1;l>=0;l--){var Q=this._as[l];C?F.call(C,Q):F(Q)}},getArray:function(){return this._as},toArray:function(A,J){if(A){for(var Y,T=[],C=0,B=this._as.length;B>C;C++)Y=this._as[C],J?A.call(J,Y)&&T.push(Y):A(Y)&&T.push(Y);return T}return this._as.concat()},toList:function(c,u){if(c){for(var R,r=new td,C=0,v=this._as.length;v>C;C++)R=this._as[C],u?c.call(u,R)&&r.add(R):c(R)&&r.add(R);return r}return new td(this)},reverse:function(){this._as.reverse()},sort:function(O){return this._as.sort(O?O:uq),this},toString:function(){return this._as.toString()}}),y.defineProperties(td.prototype,{length:{get:function(){return this._as.length},set:function(S){this._as.length=S}}});var ps=new td;og(ps,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:rc,each:rc,reverseEach:rc,toArray:function(){return[]},toList:function(){return new td},add:As,addAll:As,set:As,remove:As,removeAt:As,clear:As});var mf=f.Notifier=function(){this._f=0};Yf("Notifier",y,{contains:function(z,B){if(this._ls)for(var n,Y=0,j=this._ls.size();j>Y;Y++)if(n=this._ls.get(Y),z===n.l&&B===n.s)return!0;return!1},add:function(B,a,Y){var l=this,T={l:B,s:a,a:Y};l._ls||(l._ls=new td),l._f?(l._as||(l._as=new td),l._as.add(T)):T.a?l._ls.add(T,0):l._ls.add(T)},remove:function(o,t){var C=this;C._ls&&(C._f?(C._rs||(C._rs=new td),C._rs.add({l:o,s:t})):C._remove(o,t))},_remove:function(c,P){for(var V,F=this._ls,o=0,R=F.size();R>o;o++)if(V=F.get(o),V.l===c&&V.s===P)return F.removeAt(o),void 0},fire:function(j){var E=this,s=E._ls;if(E._b=1e4,s){++E._f;try{for(var a,u=0,V=s.size();V>u;u++)a=s.get(u),a.s?a.l.call(a.s,j):a.l(j)}catch(j){yd(function(){throw j})}finally{if(--E._f)return;if(E._rs){for(V=E._rs.size(),u=0;V>u;u++)a=E._rs.get(u),E._remove(a.l,a.s);delete E._rs}if(E._as){for(V=E._as.size(),u=0;V>u;u++)a=E._as.get(u),a.a?s.add(a,0):s.add(a);delete E._as}}}}});var Om=f.Data=function(){this._id=jp()};Yf("Data",y,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","styleMap","layer","adjustChildrenToTop","dataBindings"],ms_dm:1,ms_attr:1,_icon:O,_parent:O,_children:ps,_childMap:O,_styleMap:O,_layer:"0",_renderLayer:Wd,_renderLayerMask:Qb,_adjustChildrenToTop:!1,getRenderLayerMask:function(){return this._renderLayerMask||Qb},getRenderLayer:function(){return this._renderLayer||Wd},setRenderLayer:function(g){var E=this,r=Sg(0,g,null,!0);E._renderLayerMask=r;var s=E._renderLayer;E._renderLayer=g,E.fp("renderLayer",s,E._renderLayer)},testRenderLayer:function(x){var k=ar[x];return k&&wm(this._renderLayerMask,ar[x].mask)},getUIClass:function(){return O},_22Q:function(){return O},beginTransaction:function(){this._dataModel&&this._dataModel.beginTransaction()},endTransaction:function(){this._dataModel&&this._dataModel.endTransaction()},s:function(i,e){var x=this;if(2===arguments.length)x.setStyle(i,e);else{if(!Yo(i))return x.getStyle(i);for(var B in i)x.setStyle(B,i[B])}return x},fp:function(V,I,T,J,b){return this.firePropertyChange(V,I,T,J,b)},firePropertyChange:function(x,X,r,c,h){if(c){if(c(X,r))return!1}else if(X===r)return!1;var u=this,D=h||{};return D.property=x,D.oldValue=X,D.newValue=r,D.data=u,u._dataModel&&u._dataModel.handleDataPropertyChange(D),u.onPropertyChanged(D),!0},onPropertyChanged:function(o){var B=this,X=B._parent,p=o.property;if(zg(X)){var H=B.s(ee),u="s:ingroup"===p;(H&&ko[p]||p===u)&&X._81I(),(H||u)&&X.fp("childChange",!0,!1)}Yr(X)&&(ko[p]||"elevation"===p||Jh[p]||"scaleTall"===p||"tall"===p)&&X.updateFromChildren(),("s:alwaysOnTop"===p||"s:shape3d.alwaysOnTop"===p)&&(o.newValue?this.setRenderLayer("top"):this.setRenderLayer(n))},_21I:function(Y){var s=this;if(Y&&s._dataModel)throw"Remove data from dataModel before adding";s._dataModel=Y},removeFromDataModel:function(){this._dataModel?this._dataModel.remove(this):this.setParent(null)},clearChildrenFromDataModel:function(){for(var p=0,G=this._children.toArray(),M=G.length;M>p;p++)G[p].removeFromDataModel()},getId:function(){return this._id},setId:function(M){this._id=M},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(m,$){return this._children.toList(m,$)},eachChild:function(B,S){this._children.each(B,S)},addChild:function(L,H){var M=this;L!==M&&(M._children===ps&&(M._children=new td,M._childMap={}),H>=0||(H=M._children.size()),M._childMap[L._id]||M.isDescendantOf(L)||(L._parent&&L._parent.removeChild(L),(0>H||H>M._children.size())&&(H=M._children.size()),M._children.add(L,H),M._childMap[L._id]=L,L.setParent(M),M.onChildAdded(L,H),M.fp(uo,O,L)))},onChildAdded:function(){},removeChild:function(x){var T=this;if(T._childMap&&T._childMap[x._id]){var A=T._children.remove(x);delete T._childMap[x._id],T.fp(uo,x,O),x.setParent(O,A),T.onChildRemoved(x,A)}},onChildRemoved:function(){},getChildAt:function(B){return this._children.get(B)},clearChildren:function(){var u=this;if(!u._children.isEmpty())for(var g=0,m=u._children.toArray(),I=m.length;I>g;g++)u.removeChild(m[g])},getParent:function(){return this._parent},setParent:function(h,Q){var r=this;if(!(r._73I||r._parent===h||r===h||h&&h.isDescendantOf(r))){var $,S=r._parent;r._parent=h,r._73I=1,S?(Q==O&&(Q=S.getChildren().indexOf(r)),S.removeChild(r)):r._dataModel&&Q==O&&(Q=r._dataModel.getRoots().indexOf(r)),h&&(h.addChild(r),$=h.getChildren().indexOf(r)),delete r._73I,r.fp("parent",S,h,n,{oldIndex:Q,newIndex:$}),r.onParentChanged(S,h)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function($){return $?this.isDescendantOf($)||$.isDescendantOf(this):!1},isParentOf:function(R){return R&&this._childMap?!!this._childMap[R._id]:!1},isDescendantOf:function(i){if(!i||i.isEmpty())return!1;for(var l=this._parent;l;){if(i===l)return!0;l=l._parent}return!1},getStyle:function(U,c){c===n&&(c=1);var L=this._styleMap?this._styleMap[U]:n;return L===n&&c?A[U]:L},setStyle:function(J,Q){var H=this;H._styleMap||(H._styleMap={});var O=H._styleMap[J];Q===n?delete H._styleMap[J]:H._styleMap[J]=Q,H.fp("s:"+J,O,Q)&&H.onStyleChanged(J,O,Q)},onStyleChanged:function(){},iv:function(e){this.invalidate(e)},invalidate:function(A){this.fp(A||"*",!1,!0)},toString:function(){var M=this;return M._displayName||M._name||M._tag||M._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(q,H){var r=this,c=r.s(jj);r.beginTransaction(),c||r.s(jj,c={}),H?c[q]=H:delete c[q],r.fp(jj,O,c),r.endTransaction()},removeStyleIcon:function(k){var j=this.s(jj);if(j){var L=j[k];delete j[k],this.fp(jj,O,j)}return L},_calcAnchorMatrix3d:function(){},appendAnchorMatrix3d:function(z){var e=this;if(e.hasOwnProperty("_anchor")||e.hasOwnProperty("_anchorElevation")){var w=e.getAnchor3d(),B={x:w.x-.5,y:w.y-.5,z:w.z-.5};cj(z,[-B.x,-B.y,-B.z])}},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,renderLayer:1,tag:1,adjustChildrenToTop:1,dataBindings:1}},getSerializableStyles:function(){var i,B={};for(i in this._styleMap)B[i]=1;return B},getCurrentPrefix:function(){return this._interactPrefix||Tm},ca:function(T,s){var X=this.getCurrentPrefix();return T=X+T,2===arguments.length?this.a(T,s):this.a(T)}});var gk=f.DataModel=function(){var f=this;f._isDeserializing=0,f._datas=new td,f._dataMap={},f._roots=new td,f._rootMap={},f._fsDataMap={},f._78O={},f._reflectorMap={},f._36I=new mf,f._35I=new mf,f._serializeNotifier=new mf,f._selectionModel=new ed(f);var y=f._29Q=[],r=f._scheduleCallback=function(){for(var P=Date.now(),q=0;q<y.length;q++){var W=y[q];W.enabled&&P-W.lastTime>W.interval&&(W.beforeAction&&W.beforeAction(),W.action&&f.each(function(S){W.action(S)}),W.afterAction&&W.afterAction(),W.lastTime=P)}y.length&&(f._30Q=H.requestAnimationFrame(r))}};Yf("DataModel",y,{ms_fire:1,ms_attr:1,ms_ac:["layers","name","autoAdjustIndex","hierarchicalRendering","background","envmapType","envmap","postProcessingData","init"],_name:n,_autoAdjustIndex:!0,_hierarchicalRendering:!1,_background:n,_init:n,_envmap:n,_envmapType:n,_postProcessingData:n,sm:function(){return this.getSelectionModel()},mm:function(J,U,A){this.addDataModelChangeListener(J,U,A)},umm:function(s,z){this.removeDataModelChangeListener(s,z)},md:function(Z,X,k){this.addDataPropertyChangeListener(Z,X,k)},umd:function(r,S){this.removeDataPropertyChangeListener(r,S)},mh:function(K,v,x){this.addHierarchyChangeListener(K,v,x)},umh:function(b,B){this.removeHierarchyChangeListener(b,B)},getAttrObject:function(){return this._attrObject},setAttrObject:function(W){return this._attrObject=W},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getFullscreenDatas:function(){return this._fsDataMap},getReflectors:function(){return this._reflectorMap},getDataById:function(R){return this._dataMap[R]},removeDataById:function(W){this.remove(this.getDataById(W))},toDatas:function(A,n){return this._datas.toList(A,n)},each:function(X,K){this._datas.each(X,K)},getDataByTag:function(n){return this._78O[n]},getTagMap:function(){return this._78O},removeDataByTag:function(H){this.remove(this.getDataByTag(H))},add:function(f,w,$){var L=this,T=f._id,y=f._tag,j=L._roots;if(L._dataMap[T])throw"'"+T+"' already exists";y!=O&&(L._78O[y]=f),L._dataMap[T]=f,$>=0?L._datas.add(f,$):L._datas.add(f),f._parent||(L._rootMap[T]=f,w>=0?j.add(f,w):j.add(f)),f.s("fullscreen")!==n&&(L._fsDataMap[T]=f),f.s("shape3d.reflector")&&(L._reflectorMap[T]=f),f._21I(L),L.onAdded(f),L._36I.fire({kind:"add",data:f,rootsIndex:w,datasIndex:$})},onAdded:function(){},remove:function(Z,M){if(Z){var u=this,Y=Z._id,l=M&&M.keepStructure,A=M&&M.keepChildren,X=Z.getTag();if(Z._dataModel===u){var z=Z instanceof $c;z&&Q.setIsolating(!0),this.beginTransaction(),l?u._removingData||(u._removingData=Z):u.prepareRemove(Z),A||Z.toChildren().each(function(U){u.remove(U,M)},u),l?u._removingData===Z&&(Z._parent&&Z._parent.removeChild(Z),delete u._removingData):Z._parent&&Z._parent.removeChild(Z);var v=u._datas.remove(Z);delete u._dataMap[Y],X!=O&&delete u._78O[X];var s;u._rootMap[Y]&&(delete u._rootMap[Y],s=u._roots.remove(Z)),u._fsDataMap[Y]&&delete u._fsDataMap[Y],u._reflectorMap[Y]&&delete u._reflectorMap[Y],Z._21I(O),u.onRemoved(Z),u._36I.fire({kind:Id,data:Z,rootsIndex:s,datasIndex:v}),this.endTransaction(),z&&Q.setIsolating(!1)}}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var H=this;if(H._datas.size()){var j=H._historyManager?this.toJSON():n;H._datas.toArray().forEach(function(X){X._21I(O)}),H._datas.clear(),H._dataMap={},H._roots.clear(),H._rootMap={},H._fsDataMap={},H._reflectorMap={},H._78O={},H._36I.fire({kind:cp,json:j})}},contains:function(G){return G&&G._dataModel===this},handleDataPropertyChange:function(X){var y=this,A=X.data,M=X.property;if("parent"===M){var Q=A._id,v=y._rootMap,i=y._roots;A._parent?v[Q]&&(delete v[Q],i.remove(A)):v[Q]||(v[Q]=A,i.add(A))}else if("tag"===M){var H=X.oldValue,j=X.newValue,S=y._78O;H!=O&&delete S[H],j!=O&&(S[j]=A)}else if("s:fullscreen"===M){var Q=A._id,k=y._fsDataMap;X.oldValue!=O&&delete k[Q],X.newValue!=O&&(k[Q]=A)}else if("s:shape3d.reflector"===M){var Q=A._id,q=y._reflectorMap;X.oldValue&&delete q[Q],X.newValue&&(q[Q]=A)}this.onDataPropertyChanged(A,X),this._35I.fire(X)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(z,q,N){this._36I.add(z,q,N)},removeDataModelChangeListener:function(T,a){this._36I.remove(T,a)},addSerializeListener:function(N,n,d){this._serializeNotifier.add(N,n,d)},removeSerializeListener:function(i,D){this._serializeNotifier.remove(i,D)},fireSerializeEvent:function(f){this._serializeNotifier.fire(f)},addDataPropertyChangeListener:function(e,T,n){this._35I.add(e,T,n)},removeDataPropertyChangeListener:function(u,t){this._35I.remove(u,t)},_38I:function(N,j,o){this._37I&&this._37I.fire({data:N,oldIndex:j,newIndex:o})},addHierarchyChangeListener:function(X,t,c){this._37I||(this._37I=new mf),this._37I.add(X,t,c)},removeHierarchyChangeListener:function(Y,B){this._37I.remove(Y,B)},getSiblings:function(x){var R=x._parent;return R?R._children:this._roots},eachByHierarchical:function(x,y,X){if(y)return this._eachByHierarchical(x,y,X);for(var p=0,i=this._roots,I=i.size();I>p;p++)if(this._eachByHierarchical(x,i.get(p),X)===!1)return!1;return!0},_eachByHierarchical:function(W,P,K){if(K){if(W.call(K,P)===!1)return!1}else if(W(P)===!1)return!1;for(var F=P.size(),q=0;F>q;q++)if(this._eachByHierarchical(W,P.getChildAt(q),K)===!1)return!1;return!0},reverseEachByHierarchical:function(m,L,J){if(L)return this._reverseEachByHierarchical(m,L,J);for(var Y=this._roots,D=Y.size(),I=D-1;I>=0;I--)if(this._reverseEachByHierarchical(m,Y.get(I),J)===!1)return!1;return!0},_reverseEachByHierarchical:function(v,j,K){for(var s=j.size(),l=s-1;l>=0;l--)if(this._reverseEachByHierarchical(v,j.getChildAt(l),K)===!1)return!1;if(K){if(v.call(K,j)===!1)return!1}else if(v(j)===!1)return!1;return!0},eachByDepthFirst:function(D,s,b){if(s)return this._11I(D,s,b);for(var L=0,H=this._roots,n=H.size();n>L;L++)if(this._11I(D,H.get(L),b)===!1)return!1;return!0},_11I:function(X,w,$){for(var R=w.size(),P=0;R>P;P++)if(this._11I(X,w.getChildAt(P),$)===!1)return!1;if($){if(X.call($,w)===!1)return!1}else if(X(w)===!1)return!1;return!0},eachByBreadthFirst:function(c,U,t){var r=new td;for(U?r.add(U):this._roots.each(r.add,r);r.size()>0;)if(U=r.removeAt(0),U.eachChild(r.add,r),t){if(c.call(t,U)===!1)return!1}else if(c(U)===!1)return!1;return!0},moveTo:function($,K){var E=this.getSiblings($),u=E.indexOf($);u===K||0>u||K>=0&&K<=E.size()&&(E.remove($),K>E.size()&&K--,E.add($,K),this._38I($,u,K))},moveUp:function(k){this.moveTo(k,this.getSiblings(k).indexOf(k)-1)},moveDown:function(k){this.moveTo(k,this.getSiblings(k).indexOf(k)+1)},moveToTop:function(f){this.moveTo(f,0)},moveToBottom:function(A){this.moveTo(A,this.getSiblings(A).size())},moveSelectionUp:function(W){this.beginTransaction(),W||(W=this.sm());var P=new td;jn(W,P,this._roots),P.each(this.moveUp,this),this.endTransaction()},moveSelectionDown:function(U){this.beginTransaction(),U||(U=this.sm());var i=new td;El(U,i,this._roots),i.each(this.moveDown,this),this.endTransaction()},moveSelectionToTop:function(Z){this.beginTransaction(),Z||(Z=this.sm());var G=new td;tp(Z,G,this._roots),G.each(this.moveToTop,this),this.endTransaction()},moveSelectionToBottom:function(C){this.beginTransaction(),C||(C=this.sm());var u=new td;mn(C,u,this._roots),u.each(this.moveToBottom,this),this.endTransaction()},moveToIndex:function(W,j,g){var _=this.getDatas();null==g&&(g=_.indexOf(W)),g===j||0>g||j>=0&&j<=_.size()&&(_.remove(W),j>_.size()&&j--,_.add(W,j),this._76I(W,g,j))},bringForward:function(j){this.moveToIndex(j,this.getDatas().indexOf(j)+1)},bringToFront:function(W){this.moveToIndex(W,this.size())},sendBackward:function(t){this.moveToIndex(t,this.getDatas().indexOf(t)-1)},sendToBack:function(N){this.moveToIndex(N,0)},bringSelectionForward:function(U){this.beginTransaction(),U||(U=this.sm());for(var X=new td,Q=this.getDatas(),l=!1,M=0;M<Q.size();M++){var b=Q.get(Q.size()-1-M);U.contains(b)?l&&X.add(b):l=!0}X.each(this.bringForward,this),this.endTransaction()},bringSelectionToFront:function(B){this.beginTransaction(),B||(B=this.sm());for(var f=new td,W=this.getDatas(),Q=0;Q<W.size();Q++){var x=W.get(Q);B.contains(x)&&f.add(x)}f.each(this.bringToFront,this),this.endTransaction()},sendSelectionBackward:function(R){this.beginTransaction(),R||(R=this.sm());for(var P=new td,X=this.getDatas(),l=!1,$=0;$<X.size();$++){var r=X.get($);R.contains(r)?l&&P.add(r):l=!0}P.each(this.sendBackward,this),this.endTransaction()},sendSelectionToBack:function(w){this.beginTransaction(),w||(w=this.sm());for(var m=new td,V=this.getDatas(),h=0;h<V.size();h++){var n=V.get(V.size()-1-h);w.contains(n)&&m.add(n)}m.each(this.sendToBack,this),this.endTransaction()},addScheduleTask:function(i){var m=this;m.removeScheduleTask(i),i.enabled==O&&(i.enabled=!0),i.interval==O&&(i.interval=10),i.lastTime=Date.now(),m._29Q.push(i),m._30Q==O&&(m._30Q=H.requestAnimationFrame(m._scheduleCallback))},removeScheduleTask:function(I){var n=this,S=n._29Q,m=S.indexOf(I);m>=0&&S.splice(m,1),S.length||n._30Q==O||(H.cancelAnimationFrame(n._30Q),delete n._30Q)},getHistoryManager:function(){return this._historyManager},enableHistoryManager:function(F){this._historyManager||new f.HistoryManager(this),null!=F&&this._historyManager.setMaxHistoryCount(F),this._historyManager.setDisabled(!1)},disableHistoryManager:function(){this._historyManager&&this._historyManager.setDisabled(!0)},clearHistoryManager:function(){this._historyManager&&this._historyManager.clear()},undo:function(d){this._historyManager&&this._historyManager.undo(d)},redo:function(X){this._historyManager&&this._historyManager.redo(X)},beginTransaction:function(){this._historyManager&&this._historyManager.beginTransaction()},endTransaction:function(){this._historyManager&&this._historyManager.endTransaction()},addHistory:function(O){this._historyManager&&this._historyManager.addHistory(O)},onHistoryManagerChanged:function(){},isDeserializing:function(){return this._isDeserializing>0},setDeserializing:function(t){t?this._isDeserializing++:this._isDeserializing--},isCubicEnvmap:function(){return!1},setCubicEnvmap:function(){},setEnvmap:function(J){var I=this._envmap;this._envmap=J,I===J&&Se(I)&&Se(J)&&(I=[]),this.fp("envmap",I,J)}});var ed=f.SelectionModel=function(v){var A=this;A._68O=De,A._map={},A._73O=new td,A._74I=new mf,A._21I(v)};Yf("SelectionModel",y,{ms_fire:1,ms_dm:1,ms:function(S,Q,T){this.addSelectionChangeListener(S,Q,T)},ums:function(w,K){this.removeSelectionChangeListener(w,K)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===Jq},co:function(X){return this._map[X._id]!=O},ss:function(n){this.setSelection(n)},as:function(B){this.appendSelection(B)},rs:function(g){this.removeSelection(g)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(C){var G=this;if(G._68O!==C&&(C===Eb||C===Jq||C===De)){G.cs();var R=G._68O;G._68O=C,G.fp("selectionMode",R,C)}},_21I:function(H){var E=this,K=E._dataModel;K!==H&&(K&&(E.cs(),K.umm(E.handleDataModelChange,E)),E._dataModel=H,H.mm(E.handleDataModelChange,E,!0),E.fp(Rf,K,H))},dispose:function(){var g=this;g.cs(),g._dataModel.umm(g.handleDataModelChange,g)},handleDataModelChange:function(s){var W=this;if(s.kind===Id){var G=s.data;W.co(G)&&(W._73O.remove(G),delete W._map[G._id],W._75I(Id,new td(G)))}else s.kind===cp&&W.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(f){var X=this;if(X._filterFunc!==f){X.cs();var d=X._filterFunc;X._filterFunc=f,X.fp("filterFunc",d,X._filterFunc)}},_75I:function(y,u,D,c){D&&(this._73O.each(function(J){c[J._id]?D.remove(J):D.add(J)}),u=D.toList()),this._74I.fire({kind:y,datas:new td(u)})},addSelectionChangeListener:function(y,F,q){this._74I.add(y,F,q)},removeSelectionChangeListener:function(O,K){this._74I.remove(O,K)},_97O:function(o,P){for(var c,V=this,T=0,y=new td(o);T<y.size();T++)c=y.get(T),(V._filterFunc&&!V._filterFunc(c)||P&&V.co(c)||!P&&!V.co(c)||!V._dataModel.contains(c))&&(y.removeAt(T),T--);return y},appendSelection:function(S){var X=this;if(X._68O!==Eb){var z,W,R=X._73O,a=X._97O(S,!0);a.isEmpty()||(X.sg()&&(z=new td(R),W=X._map,R.clear(),X._map={},a=new td(a.get(a.size()-1))),a.each(function(N){R.add(N),X._map[N._id]=N}),X._75I("append",a,z,W))}},removeSelection:function(q){var W=this,N=W._97O(q),M=0,e=N.size();if(0!==e){for(;e>M;M++){var Y=N.get(M);W._73O.remove(Y),delete W._map[Y._id]}W._75I(Id,N)}},toSelection:function(k,$){return this._73O.toList(k,$)},getSelection:function(){return this._73O},each:function(E,R){this._73O.each(E,R)},setSelection:function(N){var F=this,p=F._73O;if(F._68O!==Eb&&!(p.isEmpty()&&!N||1===p.size()&&F.ld()===N)){var L=new td(p),D=F._map;p.clear(),F._map={};var $=F._97O(N,!0);F.sg()&&$.size()>1&&($=new td($.get($.size()-1))),$.each(function(U){p.add(U),F._map[U._id]=U}),F._75I("set",O,L,D)}},clearSelection:function(){var p=this,Y=p._73O;if(Y.size()>0){var Q=Y.toList();Y.clear(),p._map={},p._75I(cp,Q)}},selectAll:function(){var L=this;if(L._68O!==Eb){var K,n,x=L._dataModel.toDatas();if(L._filterFunc)for(K=0;K<x.size();K++)n=x.get(K),L._filterFunc(n)||(x.removeAt(K),K--);var q=L._73O,N=new td(q),R=L._map;q.clear(),L._map={},L.sg()&&x.size()>1&&(x=new td(x.get(x.size()-1)));var S=x.size();for(K=0;S>K;K++)n=x.get(K),q.add(n),L._map[n._id]=n;L._75I("all",O,N,R)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(X){return this._map[X._id]!=O},getLastData:function(){var J=this._73O;return J.size()>0?J.get(J.size()-1):O},getFirstData:function(){var h=this._73O;return h.size()>0?h.get(0):O},isSelectable:function(I){var a=this;return I&&a._68O!==Eb?a._filterFunc?a._filterFunc(I):!0:!1},getTopSelection:function(){var J=this,z=new td;return J._73O.each(function(w){for(var L=w.getParent();L;){if(J.contains(L)){w=O;break}L=L.parent}w&&z.add(w)}),z}});var xm=function(){return sl(0),function(N,x){var v;if(Ah(x)){var A=N.getDataUI(x);A&&A._88I&&(v=A._88I.rect)}return v?v:x.getRect()}}();og(Q,{edgeGroupAgentFunc:O,graphViewAutoScrollZone:16,graphViewZoomable:!0,graphViewResettable:!1,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:l.rectSelectBorder,graphViewRectSelectBackground:rh,graphViewEditPointSize:eb?17:7,graphViewEditPointBorderColor:l.editPointBorder,graphViewEditPointBackground:l.editPointBackground,setEdgeType:function(y,C,p){ce[y]=C,nj[y]=p},getEdgeType:function(Y){return ce[Y]},getEdgeTypeMap:function(){return ce},getNodeRect:xm},!0);var Mk={"layout.h":n,"layout.v":n,"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":n,"2d.attachable":!1,"2d.hostable":!1,interactive:!1,preventDefaultWhenInteractive:!0,disableDoubleClick:!1,"image.stretch":"fill",icons:n,ingroup:!0,"body.color":n,"2d.gray":!1,fullscreen:n,"fullscreen.gap":2,"fullscreen.lock":!1,opacity:n,pixelPerfect:!0,keepAspectRatio:!1,"attach.points":null,"attach.style":null,"attach.close.threshold":16,"vector.layoutable":!1,"clip.direction":"top","clip.percentage":n,"clip.host":!1,"select.color":Gr,"select.width":1,"select.padding":2,"select.type":Ro,"shadow.interactable":!0,shadow:!1,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,shadow2:!1,"shadow2.color":Gr,"shadow2.blur":6,"shadow2.offset.x":3,"shadow2.offset.y":3,"border.color":n,"border.width":2,"border.padding":2,"border.type":Ro,label:n,"label.font":n,"label.color":Pn,"label.background":n,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":n,"label.max":n,"label.opacity":n,"label.scale":1,"label.align":n,"label.selectable":!0,"label.decoration":n,label2:n,"label2.font":n,"label2.color":Pn,"label2.background":n,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":n,"label2.max":n,"label2.opacity":n,"label2.scale":1,"label2.align":n,"label2.selectable":!0,"label2.decoration":n,note:n,"note.expanded":!0,"note.font":n,"note.color":qn,"note.background":Gr,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":n,"note.toggleable":!0,"note.border.width":1,"note.border.color":n,"note.opacity":n,"note.scale":1,"note.align":n,note2:n,"note2.expanded":!0,"note2.font":n,"note2.color":qn,"note2.background":Gr,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":n,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":n,"note2.opacity":n,"note2.scale":1,"note2.align":n,"group.type":n,"group.image":n,"group.image.stretch":"fill","group.repeat.image":n,"group.border.repeat.image":n,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":n,"group.title.color":qn,"group.title.background":l.groupTitleBackground,"group.title.align":wq,"group.title.orientation":pj,"group.background":l.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":n,"group.border.color":tb,"group.border.radius":n,"group.border.cap":Bl,"group.border.join":jq,"group.border.width.absolute":!1,"group.splitLine":!1,"group.gradient":O,"group.gradient.color":"#FFF",shape:n,"shape.background":tb,"shape.repeat.image":n,"shape.border.repeat.image":n,"shape.border.width":0,"shape.border.width.absolute":!1,"shape.border.color":tb,"shape.border.3d":!1,"shape.border.3d.color":n,"shape.border.3d.accuracy":n,"shape.border.cap":Bl,"shape.border.join":jq,"shape.border.pattern":n,"shape.gradient":O,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":am,"shape.dash.offset":0,"shape.dash.color":Pe,"shape.dash.width":n,"shape.dash.3d":!1,"shape.dash.3d.color":n,"shape.dash.3d.accuracy":n,"shape.polygon.side":6,"shape.arc.from":ei,"shape.arc.to":Qd,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":n,"shape.gradient.pack":n,"shape.border.gradient.pack":n,"shape.fill.rule":"nonzero","shape.fill.clip.direction":"top","shape.fill.clip.percentage":n,"shape.foreground":n,"shape.foreground.gradient":O,"shape.foreground.gradient.color":"#FFF","shape.foreground.clip.direction":"top","shape.foreground.clip.percentage":n,"shape.regular":!0,"autolayout.gap":n,"autolayout.hgap":n,"autolayout.vgap":n,"edge.type":n,"edge.points":n,"edge.segments":n,"edge.color":tb,"edge.width":2,"edge.width.absolute":!1,"edge.repeat.image":null,"edge.offset":0,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":n,"edge.3d.accuracy":n,"edge.cap":Bl,"edge.join":jq,"edge.source.position":17,"edge.source.anchor.x":n,"edge.source.anchor.y":n,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.source.index":-1,"edge.source.percent":0,"edge.target.position":17,"edge.target.anchor.x":n,"edge.target.anchor.y":n,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.target.index":-1,"edge.target.percent":0,"edge.pattern":n,"edge.dash":!1,"edge.dash.pattern":am,"edge.dash.offset":0,"edge.dash.color":Pe,"edge.dash.width":n,"edge.dash.3d":!1,"edge.dash.3d.color":n,"edge.dash.3d.accuracy":n,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":n,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":n,"grid.column.percents":n,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":l.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":l.gridCellBorderColor,"grid.block":n,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":l.gridBlockColor,text:"","text.align":"left","text.vAlign":"middle","text.color":Pn,"text.gradient.pack":n,"text.font":Nb,"text.shadow":!1,"text.shadow.color":Gr,"text.shadow.blur":6,"text.shadow.offset.x":3,"text.shadow.offset.y":3,"text.scale.x":1,"text.scale.y":1,"text.gradient":n,"text.gradient.color":"#FFF","text.decoration":n,"text.vertical":!1,"text.vertical.gap":1,"text.wrap":!1,"text.letter.gap":null,"text.border.color":Gr,"text.border.width":0,keepPosition:!0};
Mk[$e]=n,og(A,Mk,!0),og(gk,{_76I:function(n,m,R){this._39I&&this._39I.fire({data:n,oldIndex:m,newIndex:R})},addIndexChangeListener:function(j,w,V){var K=this;K._39I||(K._39I=new mf),K._39I.add(j,w,V)},removeIndexChangeListener:function(B,R){this._39I.remove(B,R)},prepareRemove:function(P){ld(P)&&(P.setSource(O),P.setTarget(O)),P._70O&&P._70O.toList().each(this.remove,this),P._69O&&P._69O.toList().each(function(c){c.setHost(O)}),P._host&&P.setHost(O)},onAdded:function(l){this.isAutoAdjustIndex()&&this.adjustIndex(l)},onDataPropertyChanged:function(N,g){Mq[g.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(N)},isAdjustable:function(U){return Cl(U)||ld(U)},isAdjustedToBottom:function(t){return zg(t)?t.isExpanded()&&hr(t):!1},adjustIndex:function(Y){var o=this;this.isHierarchicalRendering()||(o.isAdjustedToBottom(Y)?(o.sendToBottom(Y),Y.eachChild(o.adjustIndex,o)):o.sendToTop(Y))},sendToTop:function(S){var $=this;if($.contains(S)&&$.isAdjustable(S)){var O=$._datas;if(S!==O.get($.size()-1)){var z=O.indexOf(S);O.removeAt(z),O.add(S),$._76I(S,z,$.size()-1)}if(ld(S)){var h=S._40I;h&&!$.isAdjustedToBottom(h)&&$.sendToTop(h),h=S._41I,h&&!$.isAdjustedToBottom(h)&&$.sendToTop(h)}S._69O&&S._69O.each(function(f){f.isRelatedTo(S)||Cl(S)&&f.isLoopedHostOn(S)||$.sendToTop(f)}),S.ISubGraph||(!zg(S)||S.isExpanded())&&S._adjustChildrenToTop&&S.eachChild(function(k){ld(k)||$.sendToTop(k)})}},sendToBottom:function(o,Q){var y=this;if(o!==Q&&y.contains(o)&&y.isAdjustable(o)&&(!Q||y.contains(Q))){var w=y._datas,s=w.remove(o),v=Q?y._datas.indexOf(Q):0;if(w.add(o,v),s!==v){y._76I(o,s,v);var V=o._parent;!V||V.ISubGraph||ld(V)||y.sendToBottom(o._parent,o)}}}}),og(hs,{ms_edit:function(n){n._46O=function(v){var s=this,y=s.gv.dm(),o=s._index,W=s._89I,U=s._node,D=s._shape,H=s._edge,a=s._77I;U&&W?(this.fi({kind:"endEditRect",event:v,data:U,direction:W}),y.endTransaction()):D&&o>=0?(s.fi({kind:"endEditPoint",event:v,data:D,index:o}),y.endTransaction()):H&&o>=0?(s.fi({kind:"endEditPoint",event:v,data:H,index:o}),y.endTransaction()):a&&(s.fi({kind:"endEditRotation",event:v,data:a}),y.endTransaction())},n._78I=function(x){var w=this;w.autoScroll(x);var J=w.gv.lp(x),N=w._index,Z=w._89I,$=w._node,V=w._shape,k=w._edge,t=w._77I;if($&&Z)w._80O(J),w.fi({kind:"betweenEditRect",event:x,data:$,direction:Z});else if(V&&N>=0)J.e=V.getPoints().get(N).e,V.setPoint(N,J),w.fi({kind:"betweenEditPoint",event:x,data:V,index:N});else if(k&&N>=0){var a=k.s(Zo);J.e=a.get(N).e,a.set(N,J),k.fp(Zo,O,a),w.fi({kind:"betweenEditPoint",event:x,data:k,index:N})}else if(t){var F=t.p(),v=t.getScale(),r=th+Tr(J.y-F.y,J.x-F.x);v.y<0&&(r+=ei),o(r)<.04&&(r=0),t.setRotation(r),w.fi({kind:"betweenEditRotation",event:x,data:t})}},n._80O=function(I){var H=this,V=H._node,y=H._rect,t=y.x,M=y.y,m=y.width,J=y.height,d=H._89I,O=H._anchor,v=H._matrix,I=v.tfi(I);"northwest"===d?y=pe(I,{x:t+m,y:M+J}):d===Bf?y=pe({x:t,y:I.y},{x:t+m,y:M+J}):"northeast"===d?y=pe({x:t,y:I.y},{x:I.x,y:M+J}):d===Uj?y=pe({x:I.x,y:M},{x:t+m,y:M+J}):d===em?y=pe({x:t,y:M},{x:I.x,y:M+J}):"southwest"===d?y=pe({x:I.x,y:M},{x:t+m,y:I.y}):"south"===d?y=pe({x:t,y:M},{x:t+m,y:I.y}):"southeast"===d&&(y=pe({x:t,y:M},I)),V.setPosition(v.tf(y.x+y.width*O.x,y.y+y.height*O.y)),V.setWidth(y.width),V.setHeight(y.height)},n._80I=function(v,e,j,i){var u=this,O=u.gv._zoom,Q=(u.gv.getEditPointSize()+2)/O;return Ol({x:e-Q/2,y:j-Q/2,width:Q,height:Q},v)?(u._89I!==i&&(u._89I=i),!0):!1},n._79I=function(R,S,$){var g=this,N=g.gv,j=S?N.getDataUI(S):O,h=j?j._55O:O;if(h){var F,Z,C,r,H=N._zoom,U=(N.getEditPointSize()+2)/H,z=N.lp(R);if(Cl(S)){if(h._56O&&Cl(S)&&(Z=h._98o,Ol({x:Z.x-U/2,y:Z.y-U/2,width:U,height:U},z)))return g._77I=S,$&&g.fi({kind:"beginEditRotation",event:R,data:S}),g.setCursor("crosshair"),!0;if(h._43O&&S instanceof um)for(C=S.getPoints(),F=C.size()-1;F>=0;F--)if(Z=C.get(F),Ol({x:Z.x-U/2,y:Z.y-U/2,width:U,height:U},z))return g._index=F,g._shape=S,$&&g.fi({kind:"beginEditPoint",event:R,data:S,index:F}),g.setCursor("crosshair"),!0;if(h._42O)for(var d=S.getEditControlPoints(),y=["northwest",-1,-1,Uj,-1,0,"southwest",-1,1,"south",0,1,"southeast",1,1,em,1,0,"northeast",1,-1,Bf,0,-1],F=0,r=d.length;r>F;F++){var D=y[3*F],o=d[F];if(g._80I(z,o.x,o.y,D)){g._node=S;var u=S.getWidth(),l=S.getHeight(),I=S.getAnchor();g._rect={x:-u*I.x,y:-l*I.y,width:u,height:l},g._anchor=I,g._matrix=S.getMatrix();var W=S.getRotation(),M=b(W),m=G(W),B=y[3*F+1]*hd(S.getScale().x),p=y[3*F+2]*hd(S.getScale().y),Q=Math.atan2(-m*B-M*p,M*B-m*p),n=(Math.round(Q/(Math.PI/4))+8)%8,X=[Uh,"nesw-resize",Dn,"nwse-resize",Uh,"nesw-resize",Dn,"nwse-resize"][n];return g.setCursor(X),$&&g.fi({kind:"beginEditRect",event:R,data:S,direction:g._89I}),!0}}}if(h._43O&&ld(S)&&S.s(Oi)===mh&&(C=S.s(Zo)))for(F=C.size()-1;F>=0;F--)if(Z=C.get(F),Ol({x:Z.x-U/2,y:Z.y-U/2,width:U,height:U},z))return g._index=F,g._edge=S,$&&g.fi({kind:"beginEditPoint",event:R,data:S,index:F}),g.setCursor("crosshair"),!0}return!1}},ms_gv:function(X){X._currentSubGraph=O,X._initView=function(){this._fpsInfo={time:0,fps:0,frames:0}},X.upSubGraph=function(){this.setCurrentSubGraph(hf(this._currentSubGraph))},X.isVisible=function(W){var T=this;if(hf(W)!==T._currentSubGraph)return!1;if(ld(W)){var Z=W._40I,j=W._41I;if(!Z||!j)return!1;if(!(W.s("edge.independent")||T.isVisible(Z)&&T.isVisible(j)))return!1;if(W.isEdgeGroupHidden())return!1}else for(var s=W._parent;s&&!s.ISubGraph;){if(zg(s)&&(!s.isExpanded()||!T.isVisible(s)))return!1;s=s._parent}if(W._parent instanceof $c&&!T.isVisible(W._parent))return!1;if(W._refGraph instanceof _f&&!T.isVisible(W._refGraph))return!1;if(T instanceof Is){if(!W.s("3d.visible"))return!1}else{var d=T.getLayersInfo();if(d){var V=d[W._layer];if(V&&V.visible===!1)return!1}if(!W.s("2d.visible"))return!1}return T._visibleFunc?T._visibleFunc(W):!0},X.handleSelectionChange=function(K){var z=this;K.datas.each(function(v){z.invalidateData(v);var H=v._parent;zg(H)&&Cl(v)&&v.s(ee)&&(z.invalidateData(H),H._49I&&H._49I.each(function(O){z.invalidateData(O)}))}),z.onSelectionChanged(K)},X.onSelectionChanged=function(R){var f=this,t=f.sm();if(1===t.size()&&("set"===R.kind||"append"===R.kind)){var o=t.ld();f.isAutoMakeVisible()&&f.makeVisible(o),f.adjustIndex&&f._dataModel.isAutoAdjustIndex()&&f.adjustIndex(o)}},X.makeVisible=function(I){if(I){var K=this,N=K.getDataUI?K.getDataUI(I):K.getData3dUI(I);if(N){var R=I,q=hf(I);for(q!==K._currentSubGraph&&K.setCurrentSubGraph(q);(R=R._parent)&&R!==q;)zg(R)&&R.setExpanded(!0);K._23I=I,K.iv()}}},X.getLabel=function(e){var c=e.getStyle(Ip);return c===n?e.getName():c},X.getLabelBackground=function(K){return K.getStyle("label.background")},X.getLabelColor=function(r){return r.getStyle("label.color")},X.getLabel2=function(W){return W.getStyle("label2")},X.getLabel2Background=function(C){return C.getStyle("label2.background")},X.getLabel2Color=function(a){return a.getStyle("label2.color")},X.getNote=function(p){return p.getStyle(Ep)},X.getNoteBackground=function(y){return y.getStyle("note.background")},X.getNote2=function(t){return t.getStyle(Gk)},X.getNote2Background=function(i){return i.getStyle("note2.background")},X.handleClick=function(A,f,c){var e=this;f?(e.fi({kind:"clickData",event:A,data:f,part:c}),e.onDataClicked(f,A)):(e.fi({kind:"clickBackground",event:A}),e.onBackgroundClicked(A))},X.handleDoubleClick=function(a,w,L){var W=this;Hb(a)&&(w?(W.fi({kind:"doubleClickData",event:a,data:w,part:L}),W.onDataDoubleClicked(w,a,L),W.checkDoubleClickOnNote(a,w,L)||W.checkDoubleClickOnRotation&&W.checkDoubleClickOnRotation(a,w,L)||(ld(w)?W.onEdgeDoubleClicked(w,a,L):w.ISubGraph?W.onSubGraphDoubleClicked(w,a,L):zg(w)?W.onGroupDoubleClicked(w,a,L):w.IDoorWindow?W.onDoorWindowDoubleClicked(w,a,L):w.ICSGBox&&W.onCSGBoxDoubleClicked(w,a,L))):(W.fi({kind:"doubleClickBackground",event:a}),W.onBackgroundDoubleClicked(a)))},X.onSubGraphDoubleClicked=function(g){this.setCurrentSubGraph(g)},X.onEdgeDoubleClicked=function(G,c){this.isEditable(G)||(G.ISubGraph&&!Pp(c)?this.setCurrentSubGraph(G):G.s("edge.toggleable")&&G.toggle())},X._39Q=function(g){return this.isInteractive(g)?this.preventDefaultWhenInteractive(g):!1},X.preventDefaultWhenInteractive=function(f){return f.s("preventDefaultWhenInteractive")},X.onGroupDoubleClicked=function(W){W.s("group.toggleable")&&W.toggle()},X.onDoorWindowDoubleClicked=function(t){t.s("dw.toggleable")&&t.toggle(!0)},X.onCSGBoxDoubleClicked=function(u,R){var f=this;if(f instanceof Is){var h=f.intersectObject(R,u);h&&u.s(h.part+".toggleable")&&u.toggleFace(h.part,!0)}},X.onBackgroundClicked=function(){},X.onBackgroundDoubleClicked=function(){this.upSubGraph()},X.onDataClicked=function(){},X.onDataDoubleClicked=function(){},X.onAutoLayoutEnded=function(){},X.onMoveEnded=function(){},X.onPanEnded=function(){},X.onPinchEnded=function(){},X.onRectSelectEnded=function(){},X.onZoomEnded=function(){},X.serialize=function(x){return this.dm().serialize(x)},X.toJSON=function(){return this.dm().toJSON()},X.deserialize=function(v,m){var w=this;m=m instanceof Om?{rootParent:m}:vd(m)?{setId:m}:Le(m)?{finishFunc:m}:m||{},m.view=w;var U=w.dm();return m.reset&&(U.setAttrObject({}),U.setLayers(n),U.setName(n),U.setAutoAdjustIndex(!0),U.setHierarchicalRendering(!1),U.setBackground(n),U.setInit(n),U.setPostProcessingData(n),U.setEnvmap(n),U.setEnvmapType(n),w.disableToolTip(),w instanceof f.graph.GraphView?(w.setZoomable(Q.graphViewZoomable),w.setPannable(Q.graphViewPannable),w.setRectSelectable(Q.graphViewRectSelectable)):w instanceof f.graph3d.Graph3dView&&(w.shadowMap.resetProperties(),w.setDashDisabled(Q.graph3dViewDashDisabled),w.setUvClipEnabled(Q.graph3dViewUvClipEnabled),w.getHighlightHelper().resetProperties(),w.resetHeadlightProperties(),w.resetFogProperties(),w.setBatchInfoMap({}),w.setBatchColorDisabled(Q.graph3dViewBatchColorDisabled),w.setBatchInstancedDisabled(Q.graph3dViewBatchInstancedDisabled),w.setBatchBlendDisabled(Q.graph3dViewBatchBlendDisabled),w.setBatchBrightnessDisabled(Q.graph3dViewBatchBrightnessDisabled),w.setFlowBlendMode(Q.graph3dViewFlowBlendMode),w.setMoveStep(Q.graph3dViewMoveStep),w.setRotateStep(Q.graph3dViewRotateStep),w.setSortable(Q.graph3dViewSortable),w.setSortFunc(n),w.setSkybox(n),w.setToneMapping(n),w.setToneMappingExposure(1))),m.__innerHandler__=function(A){if(vd(U.a("toolTipEnable"))&&(U.a("toolTipEnable")?w.enableToolTip():w.disableToolTip()),Se(U.a("fontFaces"))&&U.a("fontFaces").forEach(function(H){Q.addFontFace(H.name,H.url)}),w instanceof f.graph.GraphView&&(vd(U.a("zoomable"))&&w.setZoomable&&w.setZoomable(U.a("zoomable")),vd(U.a("pannable"))&&w.setPannable&&w.setPannable(U.a("pannable")),vd(U.a("rectSelectable"))&&w.setRectSelectable&&w.setRectSelectable(U.a("rectSelectable")),U.a("fitContent")===!0&&w.fitContent&&w.fitContent(!0,0)),w instanceof f.graph3d.Graph3dView){var b=A.scene;b&&b.shadow!=O&&w.shadowMap.setShadow(b.shadow,b.shadowParams);var F=U.a("sceneContext");F?(F.eye&&w.setEye(F.eye),F.center&&w.setCenter(F.center),fe(F.far)&&w.setFar(F.far),fe(F.near)&&w.setNear(F.near)):(fe(U.a("sceneNear"))&&w.setNear(U.a("sceneNear")),fe(U.a("sceneFar"))&&w.setFar(U.a("sceneFar")),b&&(b.eye&&w.setEye(b.eye),b.center&&w.setCenter(b.center))),fe(U.a("sceneFovy"))&&w.setFovy(U.a("sceneFovy")),vd(U.a("sceneOrtho"))&&w.setOrtho(U.a("sceneOrtho")),fe(U.a("sceneOrthoWidth"))&&w.setOrthoWidth(U.a("sceneOrthoWidth")),vd(U.a("sceneShadowEnabled"))&&(U.a("sceneShadowEnabled")?w.enableShadow():w.disableShadow()),fe(U.a("sceneShadowDegreeX"))&&w.setShadowDegreeX(U.a("sceneShadowDegreeX")),fe(U.a("sceneShadowDegreeZ"))&&w.setShadowDegreeZ(U.a("sceneShadowDegreeZ")),fe(U.a("sceneShadowIntensity"))&&w.setShadowIntensity(U.a("sceneShadowIntensity")),U.a("sceneShadowQuality")!=O&&w.setShadowQuality(U.a("sceneShadowQuality")),U.a("sceneShadowType")&&w.setShadowType(U.a("sceneShadowType")),fe(U.a("sceneShadowRadius"))&&w.setShadowRadius(U.a("sceneShadowRadius")),fe(U.a("sceneShadowBias"))&&w.setShadowBias(U.a("sceneShadowBias")),vd(U.a("sceneDashEnable"))&&w.setDashDisabled(!U.a("sceneDashEnable")),vd(U.a("sceneUvClipEnabled"))&&w.setUvClipEnabled(U.a("sceneUvClipEnabled")),Vp(U.a("sceneHighlightMode"))&&w.setHighlightMode(U.a("sceneHighlightMode")),fe(U.a("sceneHighlightWidth"))&&w.setHighlightWidth(U.a("sceneHighlightWidth")),U.a("sceneHighlightColor")&&w.setHighlightColor(U.a("sceneHighlightColor")),U.a("sceneHighlightType")&&w.setHighlightType(U.a("sceneHighlightType")),U.a("sceneHighlightGlow")&&w.setHighlightGlow(U.a("sceneHighlightGlow")),U.a("sceneHighlightStrength")&&w.setHighlightStrength(U.a("sceneHighlightStrength")),vd(U.a("sceneHeadlightEnable"))&&w.setHeadlightDisabled(!U.a("sceneHeadlightEnable")),U.a("sceneHeadlightDirection")!=O&&w.setHeadlightDirection(U.a("sceneHeadlightDirection")),fe(U.a("sceneHeadlightRange"))&&w.setHeadlightRange(U.a("sceneHeadlightRange")),U.a("sceneHeadlightColor")&&w.setHeadlightColor(U.a("sceneHeadlightColor")),fe(U.a("sceneHeadlightIntensity"))&&w.setHeadlightIntensity(U.a("sceneHeadlightIntensity")),fe(U.a("sceneHeadlightAmbientIntensity"))&&w.setHeadlightAmbientIntensity(U.a("sceneHeadlightAmbientIntensity")),fe(U.a("sceneHeadlightRatioForPhysicalMaterial"))&&w.setHeadlightRatioForPhysicalMaterial(U.a("sceneHeadlightRatioForPhysicalMaterial")),fe(U.a("sceneHeadlightGroup"))&&w.setHeadlightGroup(U.a("sceneHeadlightGroup")),vd(U.a("sceneFogEnable"))&&w.setFogDisabled(!U.a("sceneFogEnable")),U.a("sceneFogMode")&&w.setFogMode(U.a("sceneFogMode")),fe(U.a("sceneFogDensity"))&&w.setFogDensity(U.a("sceneFogDensity")),U.a("sceneFogColor")&&w.setFogColor(U.a("sceneFogColor")),fe(U.a("sceneFogNear"))&&w.setFogNear(U.a("sceneFogNear")),fe(U.a("sceneFogFar"))&&w.setFogFar(U.a("sceneFogFar")),vd(U.a("sceneBatchBrightnessDisabled"))&&w.setBatchBrightnessDisabled(U.a("sceneBatchBrightnessDisabled")),U.a("sceneFlowBlendMode")!==n&&w.setFlowBlendMode(U.a("sceneFlowBlendMode")),U.a("sceneToneMapping")!==n&&w.setToneMapping(U.a("sceneToneMapping")),fe(U.a("sceneToneMappingExposure"))&&w.setToneMappingExposure(U.a("sceneToneMappingExposure")),vd(U.a("sceneBatchBlendDisabled"))&&w.setBatchBlendDisabled(U.a("sceneBatchBlendDisabled")),vd(U.a("sceneBatchColorDisabled"))&&w.setBatchColorDisabled(U.a("sceneBatchColorDisabled")),vd(U.a("sceneBatchInstancedDisabled"))&&w.setBatchInstancedDisabled(U.a("sceneBatchInstancedDisabled")),U.a("sceneBatchInfoMap")&&w.setBatchInfoMap(U.a("sceneBatchInfoMap")),U.a("sceneRenderLayerInfoMap")&&w.setRenderLayerInfoMap(U.a("sceneRenderLayerInfoMap")),fe(U.a("sceneMoveStep"))&&w.setMoveStep(U.a("sceneMoveStep")),fe(U.a("sceneRotateStep"))&&w.setRotateStep(U.a("sceneRotateStep")),vd(U.a("sceneSortable"))&&w.setSortable(U.a("sceneSortable")),Le(U.a("sceneSortFunc"))&&w.setSortFunc(U.a("sceneSortFunc"));var G=U.a("sceneSkyboxType")||"sphere";if(G!=O){var l={},o=!1,X=U.a("sceneSkyboxColor");if("sphere"===G){l.shape3d=G;var Z=U.a("sceneSkyboxImage");Z&&(l["shape3d.image"]=Z,o=!0)}else"cube"===G?(l.shape3d=n,["front","back","left","right","top","bottom"].forEach(function(Z){var t=Z+".image",E=Z.charAt(0).toUpperCase()+Z.slice(1),x=U.a("sceneSkybox"+E+"Image");x&&(l[t]=x,o=!0)})):"color"===G&&X&&(o=!0);if(o){var T=new ih,D=U.a("sceneSkyboxDiameter");if(fe(D)?T.s3(D,D,D):T.s3(20,20,20),l["body.color"]=U.a("sceneSkyboxBodyColor"),l.envmap=U.a("sceneSkyboxEnvmap"),l["envmap.probe"]=U.a("sceneSkyboxEnvmapProbe"),l.roughness=U.a("sceneSkyboxRoughness"),l["shape3d.light"]=l["all.light"]=U.a("sceneSkyboxLight"),l["light.mask"]=U.a("sceneSkyboxLightMask"),l["headlight.ambientIntensity"]=U.a("sceneSkyboxHeadLightAmbientIntensity"),l["skybox.blur.size"]=U.a("sceneSkyboxBlurSize"),l["skybox.blur.resolution"]=U.a("sceneSkyboxBlurResolution"),l["texture.wrap"]="clampToEdge",l["3d.clipbox.mask"]=Bi,l["effect.flow.mask"]=Bi,"color"===G){l.shape3d="sphere";var C=2,e=1024,Z=T.s("shape3d.image"),W=Z&&f.Default.getImage(Z);W&&"CANVAS"===W.tagName||(W=k.createElement("canvas"),Z=f.Math.generateUUID(),f.Default.setImage(Z,W)),Z&&w.getTextureMap()&&w.deleteTexture(Z),f.Default.setCanvas(W,C,e,1);var s=W.getContext("2d");s.clearRect(0,0,C,e),s.beginPath(),s.rect(0,0,C,e),Hj(s,X,function(m){return m},!1,{x:0,y:0,width:C,height:e}),s.fill(),s.restore(),l["shape3d.image"]=Z}T.s(l),["X","Y","Z"].forEach(function(w){var u=U.a("sceneSkyboxRotation"+w);fe(u)&&T["setRotation"+w](u)}),w.setSkybox(T)}}}},U.deserialize(v,m.rootParent,m)},X.isDebugTipShowing=function(){return!!this._debugDiv},X.showDebugTip=function(){var t=this,q=t._debugDiv;if(!q){q=t._debugDiv=k.createElement("div"),q.style.position="absolute",q.style.overflow="hidden",q.style.font=Q.debugTipLabelFont,q.style.padding="6px",q.style.backgroundColor=Q.debugTipBackground,q.style.color=Q.debugTipLabelColor;var d=t.getView();t._79O?d.insertBefore(q,t._79O):d.appendChild(q);var y=function(){t.redraw();var X=t._canvas,J="FPS: "+t._fpsInfo.fps+"<br/>"+"Datas: "+t.dm().getDatas().length+(X?"<br/>Size: "+X.width+" * "+X.height:""),G=t.dm()._historyManager;G&&(J+="<br/>Undoes: "+G.getHistories().length+" index: "+G.getHistoryIndex());var E=t.getDebugTip();E&&(J+="<hr>"+E),q.innerHTML=J,t._isDebugging&&requestAnimationFrame(y)};requestAnimationFrame(y),t._isDebugging=!0}},X.hideDebugTip=function(){var q=this,H=q._debugDiv;H&&(delete q._debugDiv,q.getView().removeChild(H),q._isDebugging=!1)},X.updateDOMAppendMatrix=function(){var Y=this.getView();Y&&(Y.updateAppendMatrix=!0)},X.countFrame=function(){if(this._isDebugging){var l=Date.now(),x=this._fpsInfo;l-x.time>1e3?(x.fps=Math.round(1e5*(x.frames+1)/(l-x.time))/100,x.time=l,x.frames=0):x.frames++}}},ms_icons:function(H){H.getRotation=function(k){return k==O?0:k},H._15O=function(){var X=this,h=X.s(jj);if(h){var U=X,D=X.data||X._data,g=D.getRotation&&D.getRotation(),Y=X._38o={icons:h,rects:{}};for(var m in h){var K=h[m],c=rq(K.shape3d,D,U);if(!(rq(K.visible,D,U)===!1||rq(K.for3d,D,U)&&!X.I3d||c&&!X.I3d)){var n=c?[c]:rq(K.names,D,U),H=n?n.length:0,C=rq(K.position,D,U)||3,P=rq(K.offsetX,D,U)||0,v=rq(K.offsetY,D,U)||0,r=rq(K.direction,D,U)||em,l=rq(K.gap,D,U),z=l!=O?l:1,x=rq(K.rotation,D,U),j=rq(K.keepOrien,D,U),b=rq(K.rotationFixed,D,U)?x:X.getRotation(x,j,C),V=O,y=Y.rects[m]=new Array(H);fe(g)&&(fe(b)?b+=g:b=g),y.rotation=b;for(var J=0;H>J;J++){var u,t,A,d,$=n[J];if(c)A=0,d=0;else{var w=Nn($);A=rq(K.width,D,U),d=rq(K.height,D,U),A==O&&(A=Yj(w,D)),d==O&&(d=kp(w,D))}if(V?r===em?P+=A/2:r===Uj?P-=A/2:r===Bf?v-=d/2:v+=d/2:V={width:A,height:d},X.I3d){var f=-A/2,o=-d/2;t={width:A,height:d,mat:X._16O(rq(K.autorotate,D,U),C,V,rq(K.face,D,U)||ll,rq(K.t3,D,U),rq(K.r3,D,U),rq(K.rotationMode,D,U),P,v),vs:new yr([f,-o,0,f,-o-d,0,f+A,-o-d,0,f+A,-o,0])}}else u=X.getPosition(C,P,v,V,rq(K.positionFixed,D,U)),t={x:u.x-A/2,y:u.y-d/2,width:A,height:d},X._68o(t,b);y[J]=t,r===em?P+=A/2+z:r===Uj?P-=A/2+z:r===Bf?v-=d/2+z:v+=d/2+z}}}}}}});var Mj={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},qp={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Rp={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},Mq={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},ko={position:1,width:1,height:1,expanded:1,rotation:1,anchor:1,scale:1,"s:edge.points":1},Ll={"edge.type":1,"edge.group":1},Jh={rotation:1,rotationX:1,rotationZ:1,rotation3d:1},kq={rotation:1,position:1,width:1,height:1,anchor:1,scale:1,host:1,"s:vector.layoutable":1},sb={position:1,width:1,height:1,anchor:1,scale:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},Xq={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},xb={shape:1,thickness:1,position:1,anchor:1,scale:1},hf=function(B){if(!B)return O;if(ld(B)){var j=B._40I,q=B._41I;if(!j||!q)return O;var V=hf(j),x=hf(q);return V===x?V:O}for(var L=B._parent;ld(L)&&!L.ISubGraph;)L=L._parent;return L?L.ISubGraph?L:hf(L):O},sd=function(M,J,S,u){var o=J.getStyle(S)*u;o&&Zp(M,o),o=J.getStyle(S+".left")*u,o&&(M.x-=o,M.width+=o),o=J.getStyle(S+".right")*u,o&&(M.width+=o),o=J.getStyle(S+".top")*u,o&&(M.y-=o,M.height+=o),o=J.getStyle(S+".bottom")*u,o&&(M.height+=o),M.width<0&&(M.width=-M.width,M.x-=M.width),M.height<0&&(M.height=-M.height,M.y-=M.height)},hr=function(k){for(var C,j=0,B=k.size();B>j;j++)if(C=k.getChildAt(j),Cl(C)&&hr(C))return!0;return k.hasAgentEdges()},Sd=function(Y){if(!Y)return O;for(var o=Y._parent;zg(o);){if(!zg(o._parent))return o.isExpanded()?Y:o;o.isExpanded()||(Y=o),o=o._parent}return Y},Tf=function(j,v){if(!j||!v)return O;var d,g,Q,e=hf(j),K=hf(v);if(e!==K){for(;K&&e!==K;)K=hf(K);if(e===K)return j;d=new td,d.add(j,0);for(var E=j._parent;Cl(E)&&!v.isDescendantOf(E);)d.add(E,0),E=E._parent;for(Q=d.size(),g=0;Q>g;g++){var k=d.get(g);if(zg(k)&&!k.isExpanded())return k;if(k.ISubGraph)return k}return j}return j},uf=function(r){if(r.isLooped())return r._source;var z=Sd(r._source),I=Sd(r._target);return z===I?r._source:Tf(z,I)},Rd=function(q){if(q.isLooped())return q._target;var O=Sd(q._source),o=Sd(q._target);return O===o?q._target:Tf(o,O)},Pd=function(P,q,W){"target"!==W&&(W="source");var B="target"===W?q.getTargetAgent():q.getSourceAgent(),F="edge."+W+".";if(ld(B)){var u=P.getDataUI(B);u._79o();var d=q.s(F+"index");if(d>=0){var R=Jp(u);return R[Math.max(0,Math.min(d,R.length-1))]}var a=q.s(F+"percent")||0;a=Math.max(0,Math.min(a,1));var T=oo(u);return Im(T,100*a)}return Hq(P,B,q.s(F+"position"),q.s(F+"offset.x"),q.s(F+"offset.y"),q.s(F+"anchor.x"),q.s(F+"anchor.y"))},Hq=function(w,P,j,R,d,F,D){if(!P)return O;var H,$=P.getRotation?P.getRotation():0;if(F!==n||D!==n){F=F===n?.5:F,D=D===n?.5:D;var f=P.getScale();if($&&!Ah(P,w)||f.x<0||f.y<0){var g=P.getPosition(),l=P.getWidth(),c=P.getHeight(),K=P.getAnchor(),h=new He($,g.x,g.y,f.x,f.y);j=h.tf((F-K.x)*l,(D-K.y)*c)}else H=xm(w,P),j={x:H.x+F*H.width,y:H.y+D*H.height}}else j=_m(j,xm(w,P));if($){var S=b($),r=G($),e=R*S-d*r;d=R*r+d*S,R=e}return j.x+=R,j.y+=d,j},nb=function(Q,h){if(!Q||!h)return O;var p,G,E,s,_,T;if(Q===h){if(s=Q.getLoopedEdges(),!s)return O;s=new td(s)}else{if(_=Q.getAgentEdges(),T=h.getAgentEdges(),!_||!T)return O;for(G=_.size(),p=0;G>p;p++)E=_.get(p),T.contains(E)&&(s||(s=new td),s.add(E))}if(s)for(p=0;p<s.size();p++)E=s.get(p),E.getStyle(Oi)===mh&&(E._22I(O),s.removeAt(p),p--);return s},ze=function(K,l){var A=nb(K,l);if(A&&!A.isEmpty()){if(1===A.size())return A.get(0)._22I(O),void 0;var Z=new td,v=new td;A.each(function(k){var u=k.s("edge.group");Z.contains(u)||Z.add(u)}),Z.sort(),Z.each(function(t){v.add(new f.EdgeGroup(A.toList(function(n){return t===n.s("edge.group")}),v))}),v.each(function(B){B.each(function(j){j._22I(B)})})}},Lo=function(u,O,d){var I=u._canvas;u._zoom;var C=Re(O,I),v=Re(d,I);return{x:C.x-v.x,y:C.y-v.y}},vg=function(f,v){if(v){var b=v.rect,u=v.color,p=v.rotation,M=v.labelWidth,V=v.background,k=v.opacity,Y=v.scale,W=Y!=O&&1!==Y;if(k!=O){var q=f.globalAlpha;f.globalAlpha*=k}if(p||W){f.save();var i=b.x+b.width/2,s=b.y+b.height/2;on(f,i,s),p&&Hd(f,p),W&&f.scale(Y,Y),on(f,-i,-s)}if(V&&Kl(f,b.x,b.y,b.width,b.height,V),M){var T=b.width,N=f.createLinearGradient(b.x,b.y,b.x+T,b.y);N.addColorStop(0,u),N.addColorStop(.9,u),N.addColorStop(1,Uc),u=N,b.width=M}Jj(f,v.ss,b,v.font,u,v.align,v.decoration),M&&(b.width=T),(p||W)&&f.restore(),k!=O&&(f.globalAlpha=q)}},Ai=function(c,q){if(q){var f=q.rect,R=f.x,r=f.y,I=f.width,H=f.height,B=q.background,F=q.backgroundImage,Z=q.borderWidth,k=q.borderColor,i=q.labelWidth,o=q.opacity,e=q.scale,E=e!=O&&1!==e;if(o!=O){var _=c.globalAlpha;c.globalAlpha*=o}if(E){c.save();var T=f.x+f.width/2,X=f.y+f.height/2;on(c,T,X),c.scale(e,e),on(c,-T,-X)}if(q.expanded){var w=g(8,I/4),s=r+H-8;if(c.fillStyle=B,c.beginPath(),c.moveTo(R,r),c.lineTo(R,s),c.lineTo(R+I/2,s),c.lineTo(R+I/2,r+H),c.lineTo(R+I/2+w,s),c.lineTo(R+I,s),c.lineTo(R+I,r),c.closePath(),c.fill(),Z&&(c.lineWidth=Z,c.lineJoin="round",c.lineCap="round",k?(c.strokeStyle=k,c.stroke()):(c.strokeStyle=Mm(B),c.beginPath(),c.moveTo(R+I,r),c.lineTo(R+I,s),c.lineTo(R+I/2+w,s),c.lineTo(R+I/2,r+H),c.stroke(),c.strokeStyle=Kf(B),c.beginPath(),c.moveTo(R+I,r),c.lineTo(R,r),c.lineTo(R,s),c.lineTo(R+I/2,s),c.lineTo(R+I/2,r+H),c.stroke())),F)ks(c,Nn(F),Iq,f.x,f.y,f.width,f.height-8,q.data,q.view);else{if(f.height-=8,B=q.color,i){var J=I,v=c.createLinearGradient(R,r,R+J,r);v.addColorStop(0,B),v.addColorStop(.9,B),v.addColorStop(1,Uc),B=v,f.width=i}Jj(c,q.ss,f,q.font,B,q.align),i&&(f.width=J),f.height+=8}}else if(q.icon)Nq(c,Nn(q.icon),R,r,I,H,q.data,q.view);else{var P=I/2;Z&&(c.lineWidth=Z,c.lineJoin="round",c.lineCap="round",c.strokeStyle=k?k:Mm(B),c.beginPath(),c.arc(R+P,r+P,P,th,1.6*ei,!0),c.moveTo(R+P,r+H),c.lineTo(R+I-P/5,r+P),c.stroke(),c.strokeStyle=k?k:Kf(B),c.beginPath(),c.arc(R+P,r+P,P,1.6*ei,th,!0),c.moveTo(R+P,r+H),c.lineTo(R+P/5,r+P),c.stroke()),c.fillStyle=B,c.beginPath(),c.arc(R+P,r+P,P,0,Qd,!0),c.moveTo(R+P,r+H),c.lineTo(R+I-P/5,r+P),c.lineTo(R+P/5,r+P),c.closePath(),c.fill(),c.fillStyle=q.color,c.beginPath(),c.arc(R+P,r+P,P/3,0,Qd,!0),c.fill()}E&&c.restore(),o!=O&&(c.globalAlpha=_)}},of=function(q,c){return c>2*q?q:c/2},po=function(i,P,k,F){if(!i||!P)return 0;var B=Tr(P.y-i.y,P.x-i.x);return k||(B=P.x<i.x?B+ei:B),B+F},$p=function(J,H,g,K,s,S,Y){Y&&(J.x>H.x||J.x===H.x&&J.y>H.y)&&(g=Ie[g],s=-s);var x=_m(g,{x:0,y:0,width:xh(J,H),height:0},S);return x.x+=K,x.y+=s,x=new He(Tr(H.y-J.y,H.x-J.x)).tf(x),x.x+=J.x,x.y+=J.y,x},vl=function(e,S,f,X,r){if(e._19Q=!0,!f.getEdgeGroup())return X?f.s("edge.gap"):0;if(ld(f.getSourceAgent())||ld(f.getTargetAgent()))return 0;var Z,m=0,V=0,J=0;if(f.getEdgeGroup().getSiblings().each(function(c){c.each(function(s){if(S.isVisible(s)&&s.s(Oi)==r){var w=s.s("edge.gap");Z?(V+=J/2+w/2,J=w):(Z=s,J=w),s===f&&(m=V)}})}),X)return V-m+J;var d=m-V/2;return Z&&f._40I!==Z._40I&&(e._19Q=!1),d},Ze=function(Q){var w=Q._getValidSelection();if(1===w.length){var O=w[0],S=O instanceof f.Edge;if(O instanceof f.Shape||S){if(S){var R=O.s("edge.type");if(R&&"points"!==R)return}var e=Q.gv;if((!e.isPointEditable||e.isPointEditable(O))&&e.isEditable(O))return O}}},yg=function(){var i=function(N){var B=[];return N.forEach(function(I){B.push({x:I.x,y:I.y}),B.push({x:I.x+I.width,y:I.y+I.height}),B.push({x:I.x+I.width,y:I.y}),B.push({x:I.x,y:I.y+I.height})}),B};return function(f,Y,l){if("oval"===f){var X=0,m=l.height/l.width,B=m*m,x=l.x+l.width/2,R=l.y+l.height/2,O=i(Y);O.forEach(function(J){var K=J.x-x,F=J.y-R,M=K*K+F*F/B;M>X&&(X=M)}),X=N(X);var V=m*X;return{x:x-X,y:R-V,width:2*X,height:2*V}}if("circle"===f){var h=0,x=l.x+l.width/2,R=l.y+l.height/2,O=i(Y);return O.forEach(function(C){var E=C.x-x,S=C.y-R,L=E*E+S*S;L>h&&(h=L)}),h=N(h),{x:x-h,y:R-h,width:2*h,height:2*h}}return"roundRect"===f?(Zp(l,g(l.width,l.height)/16),l):l}}(),mo=f.graph={},ni=function(M,d,A){vn(p+".graph."+M,d,A)};f.layout={};var ol={},Hh=function(u,E,$,Y,V,k,C,i){var U=C._zoom;if(!U)return E;if(U!==C._cacheZoom&&(C._cacheZoom=U,C._cacheImage={}),U*=mr,Y=Math.ceil(Y),V=Math.ceil(V),Y*U>2048||V*U>2048)return E;var s=[E.uuid,Y,V,$].join("_");if(k instanceof f.Data){var L=E.dataBindings;if(L)for(var j=L.length-1;j>=0;j--){var w=k.a(L[j].attr);Yo(w)||Se(w)||(s+="_"+w)}}var D=k.s("state");if(D&&(s+="_"+D),E.cacheRule){var X;X=Le(E.cacheRule)?E.cacheRule(k,C):rq(E.cacheRule,k,C),s+="_"+X}var p,S=1;V>=Y&&S>Y*U?(p=V/Y,Y=S/U,V=Y*p):Y>=V&&S>V*U&&(p=Y/V,V=S/U,Y=V*p),Y=Math.ceil(Y),V=Math.ceil(V);var F=C._cacheImage[s];if(!F){if(Cg(),F=f.Default.toCanvas(E,Y,V,$,k,C,i,U),!oe())return E;C._cacheImage[s]=F}return F};og(Q,{setImageCacheRule:function(Y,e){var W;e||"object"!=typeof Y?(W={},W[Y]=e):W=Y;for(var R in W){var c=W[R];Vp(R)?(vn=Nn(R),vn?vn.cacheRule=c:ol[R]=c):R.cacheRule=c}}});var Dc={comps:[{type:En,points:[85,50,70,115,100,71,86,107,88,49,47,84,43,49,111,104,75,102,104,98,73,65,53,116,67,120,117,81,70,112,67,56,102,104,101,76,43,49,70,43,57,120,81,61],borderWidth:1,borderColor:O}]};if(Dc[ds]=Dc[mg]=160,H.Image){var Kr=new H.Image;Kr.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAALUlEQVRYR+3QQREAAAABQfqXFsNnFTizzXk99+MAAQIECBAgQIAAAQIECBAgMBo/ACHo7lH9AAAAAElFTkSuQmCC",ak("default_blank",Kr)}ak("node_image",im(30,30,[{type:Ro,rect:[4,5,22,16],gradient:_l,gradientColor:ep,background:tb},{type:Ro,rect:[2,3,26,20],borderWidth:1,borderColor:tb},{type:Ro,rect:[11,23,8,4],background:tb},{type:Ro,rect:[6,27,18,2],background:tb}])),ak("node_icon",im(16,16,[{type:Ro,rect:[2,2,12,10],gradient:_l,gradientColor:ep,background:tb},{type:Wq,rect:[2,2,12,10],width:1,color:tb},{type:Ro,rect:[6,12,4,2],background:tb},{type:Ro,rect:[4,14,8,1],background:tb}])),ak("block_icon",im(16,16,[{type:Wq,rect:[1,1,14,14],width:1,color:tb}])),ak("group_image",im(66,39,[{type:Ro,rect:[44.3,18,18.1,12.8],gradient:_l,gradientColor:ep,background:tb},{type:Ro,rect:[3.3,17.8,18.1,12.8],gradient:_l,gradientColor:ep,background:tb},{type:Ro,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:tb,gradient:_l,gradientColor:ep,background:tb},{type:Ro,rect:[26.2,29.4,12.8,4.2],background:tb},{type:Ro,rect:[21.3,33.5,22.5,2.3],background:tb},{type:Ro,rect:[5.3,32.7,14.1,2.1],background:tb},{type:Ro,rect:[9,30.4,6.7,2.4],background:tb},{type:Ro,rect:[50,30.7,6.7,2.4],background:tb},{type:Ro,rect:[46.3,33,14.1,2.1],background:tb}])),ak("group_icon",im(16,16,[{type:Ro,rect:[4,12,4,2],background:tb},{type:Ro,rect:[2,13,8,1],background:tb},{type:Ro,rect:[12,12,2,1],background:tb},{type:Ro,rect:[11,13,4,1],background:tb},{type:Ro,rect:[10,7,6,5],gradient:_l,gradientColor:ep,background:tb},{type:Ro,rect:[1,2,10,10],gradient:_l,gradientColor:ep,background:tb},{type:Wq,rect:[1,2,10,10],width:1,color:tb}])),ak("refGraph_icon",im(16,16,[{type:"shape",borderWidth:1,borderColor:tb,borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:tb,borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}])),ak("edge_icon",im(16,16,[{type:Ro,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:_l,gradientColor:ep,background:tb},{type:Ro,rect:[10.8,1,4,4],background:tb},{type:Ro,rect:[1,11,4,4],background:tb}])),ak("subGraph_image",im(72,45,[{type:En,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:_l,gradientColor:ep,background:tb},{type:Ro,rect:[29.6,30.7,3.6,1.8],background:tb},{type:Ro,rect:[28.4,32.3,6,1.2],background:tb},{type:Ro,rect:[37.3,32,10.8,1.8],background:tb},{type:Ro,rect:[39.1,29.9,7.2,2.3],background:tb},{type:Ro,rect:[26.6,23.7,9.6,7.2],gradient:_l,gradientColor:ep,background:tb},{type:Ro,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:tb,gradient:_l,gradientColor:ep,background:tb}])),ak("subGraph_icon",im(17,17,[{type:En,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:_l,gradientColor:ep,background:tb}])),ak("shape_icon",im(16,16,[{type:En,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:tb}])),ak("polyline_icon",im(16,16,[{type:En,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:tb},dr(7.5,.4),dr(7.5,6.3),dr(13.6,6.3),dr(13.6,14),dr(.7,13.9),dr(.7,.3)])),ak("grid_icon",im(16,16,[{type:Ro,rect:[1,1,4,4],background:tb,gradient:_l,gradientColor:ep},{type:Ro,rect:[6,1,4,4],background:tb,gradient:_l,gradientColor:ep},{type:Ro,rect:[11,1,4,4],background:tb,gradient:_l,gradientColor:ep},{type:Ro,rect:[11,6,4,4],background:tb,gradient:_l,gradientColor:ep},{type:Ro,rect:[6,6,4,4],background:tb,gradient:_l,gradientColor:ep},{type:Ro,rect:[1,6,4,4],background:tb,gradient:_l,gradientColor:ep},{type:Ro,rect:[11,11,4,4],background:tb,gradient:_l,gradientColor:ep},{type:Ro,rect:[6,11,4,4],background:tb,gradient:_l,gradientColor:ep},{type:Ro,rect:[1,11,4,4],background:tb,gradient:_l,gradientColor:ep}])),ak("light_icon",im(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:tb},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:tb,gradient:_l,gradientColor:ep,background:{func:function(g){var J=g?g.s(xj):O;
return Se(J)?"rgb("+ob(255*J[0])+","+ob(255*J[1])+","+ob(255*J[2])+")":J||tb}}}])),ak("text_icon",im(16,16,[{type:"shape",points:[3,3,13,3,8,3,8,14],segments:[1,2,1,2],borderWidth:1,borderColor:tb}])),ak("border_image",{fitSize:!0,comps:[{type:"border",relative:!0,rect:[0,0,1,1],color:{func:"style@border_color"},width:{func:"style@border_width"}}]}),ak("columnChart_image",{fitSize:!0,boundExtend:150,comps:[{type:{func:"style@chart.type"},relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"}}]}),ak("lineChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"lineChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"},linePoint:{func:"style@chart.line.point"},lineWidth:{func:"style@chart.line.width"},line3d:{func:"style@chart.line.3d"}}]}),ak("pieChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"pieChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},hollow:{func:"style@chart.hollow"},startAngle:{func:"style@chart.start.angle"},values:{func:"style@chart.values"},colors:{func:"style@chart.colors"}}]});var ur=function(o,h,H,E,l,J){var C,c,N,T,F,K,q,W,Z,f,d,n=[];if(Math.abs(E)>2*Math.PI&&(E=2*Math.PI),F=Math.ceil(Math.abs(E)/(Math.PI/4)),C=E/F,c=-C,N=-H,F>0){K=o+Math.cos(H)*l,q=h+Math.sin(-H)*J,n.push({x:K,y:q});for(var i=0;F>i;i++)N+=c,T=N-c/2,W=o+Math.cos(N)*l,Z=h+Math.sin(N)*J,f=o+Math.cos(T)*(l/Math.cos(c/2)),d=h+Math.sin(T)*(J/Math.cos(c/2)),n.push({x:f,y:d}),n.push({x:W,y:Z})}return n},$g=function(z){if(z){var n=z._data;if(n instanceof f.Shape)return{points:n.getPoints(),segments:n.getSegments()};var _;if(n instanceof f.Edge&&(_=z._78o)){var L,w,T=_.type,P=_.points,N=_.segments,h=_.edgeTypeInfo;if(!T||P){var p=_.sourcePoint,G=p.x,F=p.y,m=_.targetPoint,X=m.x,k=m.y;if(T)N?(L=new td({x:G,y:F}),L.addAll(P),L.add({x:X,y:k}),w=new td(N._as)):(L=new td({x:G,y:F}),P.each(function(I){L.add(I)}),L.add({x:X,y:k}));else if(_.looped){L=new td(ur(G,F,0,2*Math.PI,_.radius,_.radius)),w=new td([1]);for(var D=0;D<(L.size()-1)/2;D++)w.add(3)}else L=new td,_.center?(L.add({x:_.c1.x,y:_.c1.y}),L.add({x:G,y:F}),L.add({x:X,y:k}),L.add({x:_.c2.x,y:_.c2.y})):(L.add({x:G,y:F}),L.add({x:X,y:k}))}else h&&(L=new td(h.points._as),h.segments&&(w=new td(h.segments._as)));return{points:L,segments:w}}}},oo=function(w,B,P){if(null==B){var W=$g(w);if(!W)return;B=W.points,P=W.segments}if(B){if(Array.isArray(B)&&(B=new td(B)),"number"==typeof B.get(0)){for(var M=new f.List,e=0;e<B.size();e+=2)M.add({x:B.get(e),y:B.get(e+1)});B=M}if(!P){P=[1];for(var c=B.length-1;c>0;c--)P.push(2)}Array.isArray(P)&&(P=new td(P));for(var y=yp(B._as,P._as,50),R=y.length,F=[],e=0;R>e;e++){var l=y[e];l.length>1&&F.push(l)}return F}},ij=function(p){for(var E=0,P=p.length-1,v=0;P>v;v++){var o=p[v],m=p[v+1],$=m.x-o.x,I=m.y-o.y;E+=Math.sqrt($*$+I*I)}return E},rs=function(O,r){for(var D=0,E=r.length,Y=0;E>Y;Y++){var C=r[Y];if(D+=C,D>O)return Y}return Math.min(Y,E-1)},_r=function(P,K){for(var v=0,y=0,e=0,Y=P.length-1,l=0;Y>l;l++){var Q=P[l],R=P[l+1],h=R.x-Q.x,r=R.y-Q.y;if(e=Math.sqrt(h*h+r*r),v+=e,v>K){v-=e,y=l;break}}var L=P[y],I=P[y+1],B=Math.atan2(I.y-L.y,I.x-L.x),s=K-v,r=Math.sin(B)*s,h=Math.cos(B)*s;return{x:L.x+h,y:L.y+r}},Im=function(w,I){if(w){var E;if(0===I)E=w[0][0];else if(100===I)w=w[w.length-1],E=w[w.length-1];else{for(var Z=0,F=[],r=w.length,W=0;r>W;W++){var K=w[W],M=ij(K);Z+=M,F.push(M)}for(var N=Z*I/100,t=rs(N,F),p=0,f=0;t>f;f++)p+=F[f];N-=p,E=_r(w[t],N)}return E}},Jp=function(c){var b,C;if(c instanceof Te){var k=$g(c);b=k.points,C=k.segments}else b=arguments[0],C=arguments[1];var L,Z,I,q,H=[],Q=-1;for(Z=0,I=C?C.length:b.length;I>Z;Z++){if(L=C?C.get(Z):1,3===L)q=2;else if(4===L)q=3;else{if(5===L)continue;q=1}Q+=q,H.push(b.get(Q))}return H},Wc=function(j,q,W,t){function V(W){if(W>=0&&1>=W){x=q(W);var y=(j.x-x.x)*(j.x-x.x)+(j.y-x.y)*(j.y-x.y);return z>y?(z=y,k=W,!0):!1}}W=W||100,t=t||1e-5;for(var z=1/0,k=0,x=new gd,y=0;W>y;++y)V(y/W);for(var s=1/(2*W);s>t;)V(k-s)||V(k+s)||(s/=2);return k};og(Q,{_edgeProtectMethod:{getStraightLinePoints:oo,calculateLineLength:ij,calcSegmentIndexByDistance:rs,calculatePointAlongLine:_r,getPercentPosition:Im,getRealPointsFromDataUI:Jp}});var rl=function(d,S){for(var F=d.vertices,L=0;L<F.length;L++){var w=F[L],K=w.y;w.y=w.z,w.z=-K,S&&(w.y+=S)}},jh=function(E){for(var d,S,V,w,y,e,K=[],x=[],Q=[],s=E.faces,I=0,T=0,g=0,f=s.length;f>I;I++,T+=6,g+=9){var O=s[I];1===O.i?(d||(d=[],S=[],V=[]),Ge(O,I,T,g,E,d,V,S)):2===O.i?(w||(w=[],y=[],e=[]),Ge(O,I,T,g,E,w,e,y)):Ge(O,I,T,g,E,K,Q,x)}return{vs:K,uv:x,ns:Q,top_vs:d,top_uv:S,top_ns:V,bottom_vs:w,bottom_uv:y,bottom_ns:e}},Ge=function(f,x,b,h,K,W,Z,g){var c=K.vertices,Q=K.faceVertexUvs,O=c[f.a],o=c[f.b],r=c[f.c];W.push(O.x,O.y,O.z,o.x,o.y,o.z,r.x,r.y,r.z);var J,X,M,u=f.vertexNormals;3===u.length?(J=u[0],X=u[1],M=u[2]):J=X=M=f.normal,Z.push(J.x,J.y,J.z,X.x,X.y,X.z,M.x,M.y,M.z);var i=Q[0][x][0],l=Q[0][x][1],n=Q[0][x][2];g.push(i.x,i.y,l.x,l.y,n.x,n.y)},ik=function(b){var W;W=Se(b)?b:[b];var T,Z,e,w,G,u,L,N,y=1/0,a=1/0,$=1/0,i=-1/0,v=-1/0,Y=-1/0,Q=["vs","top_vs","bottom_vs"];for(T=0,Z=W.length;Z>T;T++)for(N=W[T],e=0,w=Q.length;w>e;e++)if(L=N[Q[e]])for(G=0,u=L.length;u>G;G+=3)y=g(y,L[G]),a=g(a,L[G+1]),$=g($,L[G+2]),i=C(i,L[G]),v=C(v,L[G+1]),Y=C(Y,L[G+2]);var E={min:{x:y,y:a,z:$},max:{x:i,y:v,z:Y}};return b.boundingBox=E,E},Nr=function(){function M(h,C){return h.dot(C)>0}function r(n,V,I,p,o,a,h){for(var s,K,l=[V,I,p],c=[o,a,h],q=[],W=l.length,z=!0;W--&&z;){for(var E=l[W],D=c.length,Y=!1;D--;)if(E.equals(c[D])){c.splice(D,1),q.push(E),Y=!0;break}if(!Y){if(s){z=!1;break}s=E}}return z&&2===q.length&&(K=c[0],u.subVectors(s,q[0]),F.subVectors(K,q[0]),x.subVectors(s,q[1]),u.x*x.y*F.z+x.x*F.y*u.z+F.x*u.y*x.z-F.x*x.y*u.z-F.y*x.z*u.x-F.z*x.x*u.y<1e-6&&(U.subVectors(K,q[1]),b.subVectors(q[1],q[0]),M(b,u)&&M(b,F)&&(b.negate(),M(b,x)&&M(b,U))))?(n.push(q[1].x,q[1].y,q[1].z),n.push(s.x,s.y,s.z),n.push(s.x,s.y,s.z),n.push(q[0].x,q[0].y,q[0].z),n.push(q[0].x,q[0].y,q[0].z),n.push(K.x,K.y,K.z),n.push(K.x,K.y,K.z),n.push(q[1].x,q[1].y,q[1].z),2):(n.push(V.x,V.y,V.z),n.push(I.x,I.y,I.z),n.push(I.x,I.y,I.z),n.push(p.x,p.y,p.z),n.push(p.x,p.y,p.z),n.push(V.x,V.y,V.z),1)}function A(){this._vertexMap={},this._lineMap={},this._lineList=[]}function S(N,j,v,l,W,A,m){var f=[v,W];N[0]===l&&f.reverse();var M=[f[0]._key,f[1]._key].join("|"),e=N._triangles[M];e||(N._triangles[M]=e={});var d=[A._key,m._key].join("|");e[d]||(e[d]=[A,m])}function p(J,u,g){var Y=J._planes[g._key];if(!Y)for(var G in J._planes){var c=J._planes[G];if(c._normal.angleTo(g)<.001){Y=c;break}}return Y?(Y._vertices.indexOf(u)<0&&Y._vertices.push(u),void 0):(J._planes[g._key]={_normal:g,_vertices:[u]},void 0)}function O(B,I){return 0===I?"0|0|0":1/0===Math.abs(I)?[B.x,B.y,B.z].join("|"):[Math.round(m.angleTo(B)*I),Math.round(Z.angleTo(B)*I),Math.round(l.angleTo(B)*I)].join("|")}function X(d,h){var J=d._ctlineModel;if(J||(d._ctlineModel=J=[]),J[0])return J[0];var b;b=Se(d)?d:[d];var F,z,P,$,H,E,e,x,O,l,Z,n,G,p,I,i,K,W,L,c=["","top_","bottom_"];J=[];var u=[];for(Gl(b,h,u),F=0,z=u.length;z>F;F++)if(l=u[F])for(Fj(l),P=0,$=c.length;$>P;P++)if(O=l[c[P]+"lvs"])for(K=J.length,W=O.length,J.length=K+W,L=0;W>L;++L,++K)J[K]=O[L];else if(e=l[c[P]+"vs"]){x=l[c[P]+"is"],E=x?x.length:e.length/3;for(var H=0;E-1>H;)x?(Z=x[H],n=x[H+1],G=x[H+2],p=x[H+3],I=x[H+4],i=x[H+5]):(Z=H,n=H+1,G=H+2,p=H+3,I=H+4,i=H+5),j.fromArray(e,3*Z),s.fromArray(e,3*n),k.fromArray(e,3*G),o.fromArray(e,3*p),R.fromArray(e,3*I),V.fromArray(e,3*i),H+=3*r(J,j,s,k,o,R,V);E>H&&(x?(Z=x[H],n=x[H+1],G=x[H+2]):(Z=H,n=H+1,G=H+2),j.fromArray(e,3*Z),s.fromArray(e,3*n),k.fromArray(e,3*G),J.push(j.x,j.y,j.z),J.push(s.x,s.y,s.z),J.push(s.x,s.y,s.z),J.push(k.x,k.y,k.z),J.push(k.x,k.y,k.z),J.push(j.x,j.y,j.z))}return d._ctlineModel[0]=J,J}function i(X,W,f){var H=X._ctlineModel;H||(X._ctlineModel=H=[]);var S=H[1];if(S&&S.epsilon===f)return S;S=[],S.epsilon=f;var i;i=Se(X)?X:[X];var Z,q,Q,K,m,r,I,x,b,T,M,v,y=["","top_","bottom_"],O=new A,U=[];for(Gl(i,W,U),Z=0,q=U.length;q>Z;Z++)if(b=U[Z])for(Fj(b),Q=0,K=y.length;K>Q;Q++)if(I=b[y[Q]+"vs"]){x=b[y[Q]+"is"],r=x?x.length:I.length/3;for(var m=0,m=0;r>m;m+=3)x?(T=x[m],M=x[m+1],v=x[m+2]):(T=m,M=m+1,v=m+2),O._addTriangle(I,n,T,M,v,f)}return O._toLineVS(S),X._ctlineModel[1]=S,S}function $(m,j,H){var z=m._ctlineModel;z||(m._ctlineModel=z=[]);var Z=z[2];if(Z&&Z.epsilon===H)return Z;Z=[],Z.epsilon=H;var X;X=Se(m)?m:[m];var r,h,f,x,K,g,N,D,c,C,L,e,M,q=["","top_","bottom_"],Y=new A,p=[];for(Gl(X,j,p),r=0,h=p.length;h>r;r++)if(C=p[r])for(Fj(C),f=0,x=q.length;x>f;f++)if(N=C[q[f]+"vs"]){D=C[q[f]+"is"],c=C[q[f]+"ns"],g=D?D.length:N.length/3;for(var K=0,K=0;g>K;K+=3)D?(L=D[K],e=D[K+1],M=D[K+2]):(L=K,e=K+1,M=K+2),Y._addTriangle(N,c,L,e,M,H)}return Y._toLineVS(Z),m._ctlineModel[2]=Z,Z}var j=new Ri,s=new Ri,k=new Ri,o=new Ri,R=new Ri,V=new Ri,u=new Ri,x=new Ri,F=new Ri,U=new Ri,b=new Ri,v=new Ri;A.prototype._findVertex=function($,R){v.fromArray($,3*R);var n=[v.x,v.y,v.z].join(","),o=this._vertexMap[n];if(!o){var u=v.clone();u._key=n,this._vertexMap[n]=o=u}return o},A.prototype._findLine=function(T,z){var Z=[T,z];T._key>z._key&&Z.reverse(),Z._key=[Z[0]._key,Z[1]._key].join("|");var P=this._lineMap[Z._key];return P||(this._lineMap[Z._key]=P=Z,Z._triangles={},Z._planes={},this._lineList.push(Z)),P};var m=new Ri(1,0,0),Z=new Ri(0,1,0),l=new Ri(0,0,1),P=new Ri,g=new Ri;return A.prototype._addTriangle=function(a,U,i,$,f,A){var y,Q,C,c=this._findVertex(a,i),x=this._findVertex(a,$),d=this._findVertex(a,f),F=this._findLine(c,x),n=this._findLine(x,d),J=this._findLine(d,c);U?(y=(new Ri).fromArray(U,3*i),y._key=O(y,A),Q=(new Ri).fromArray(U,3*$),Q._key=O(Q,A),C=(new Ri).fromArray(U,3*f),C._key=O(C,A),S(F,c,y,x,Q,d,C),S(n,x,Q,d,C,c,y),S(J,d,C,c,y,x,Q)):(g.subVectors(d,x),P.subVectors(x,c),y=(new Ri).crossVectors(P,g),y._key=O(y,A),p(F,d,y),p(n,c,y),p(J,x,y))},A.prototype._toLineVS=function(e){for(var m=this._lineList,d=0,u=m.length;u>d;++d){var i=m[d],P=!1;for(var Y in i._triangles)if(1==y.keys(i._triangles[Y]).length){e.push(i[0].x,i[0].y,i[0].z,i[1].x,i[1].y,i[1].z),P=!0;break}if(!P)for(var C in i._planes)if(1==i._planes[C]._vertices.length){e.push(i[0].x,i[0].y,i[0].z,i[1].x,i[1].y,i[1].z),P=!0;break}}},[X,i,$]}(),Jf=function(S,l){var e=S._lineModel;if(e)return e;var c;c=Se(S)?S:[S];var U,r,a,R,N,v,T,m,t,F,h,z,i=["","top_","bottom_"];e=[];var X=[];for(Gl(S,l,X),U=0,r=X.length;r>U;U++)if(t=X[U])for(a=0,R=i.length;R>a;a++)if(T=t[i[a]+"vs"]){m=t[i[a]+"is"],v=m?m.length:T.length/3;for(var N=0;v>N;N+=3)m?(F=m[N],h=m[N+1],z=m[N+2]):(F=N,h=N+1,z=N+2),F*=3,h*=3,z*=3,e.push(T[F],T[F+1],T[F+2],T[h],T[h+1],T[h+2],T[h],T[h+1],T[h+2],T[z],T[z+1],T[z+2],T[z],T[z+1],T[z+2],T[F],T[F+1],T[F+2])}return S._lineModel=e,e},tc=function(T,Y,F,w,j,P,y,H,f,N){F==O&&(F=!0),w==O&&(w=!0),y==O&&(y=1),H==O&&(H=0);var Z=new Fp;pg(Z,T,Y,f),Z=Z.toShapes();var e=n;return N&&(N.length?e={minX:N[0],minY:-N[3],maxX:N[2],maxY:-N[1]}:(e={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},Z.forEach(function(T){var i=T.getBoundingBox();e.minX=g(i.minX,e.minX),e.minY=g(i.minY,e.minY),e.maxX=C(i.maxX,e.maxX),e.maxY=C(i.maxY,e.maxY)}))),jh(new dq(Z,{top:F,bottom:w,curveSegments:j,amount:y,repeatUVLength:P,boundingBox:e},-y/2+H))},Ej=function(j,L){this.repeatUVLength=j,this._bb=L};Ej.prototype={generateTopUV:function(r,T,G,U,Z,g,X){var L,s,K,J,o=r.vertices,n=o[U].x,N=o[U].y,t=o[Z].x,x=o[Z].y,e=o[g].x,f=o[g].y,I=this.repeatUVLength;if(I)L=0,s=0,K=I,J=I;else{this._bb||(this._bb=T.getBoundingBox());var j=this._bb;L=j.minX,s=j.minY,K=j.maxX-L,J=j.maxY-s}return X?[new wp((n-L)/K,(N-s)/J),new wp((t-L)/K,(x-s)/J),new wp((e-L)/K,(f-s)/J)]:[new wp((n-L)/K,1-(N-s)/J),new wp((t-L)/K,1-(x-s)/J),new wp((e-L)/K,1-(f-s)/J)]},generateBottomUV:function(M,G,C,Q,D,E){return this.generateTopUV(M,G,C,Q,D,E,!0)},generateSideWallUV:function(S,G,A,k,V,J,Q,K,D,L,m,y){if(!this._cl){for(var B,R,W=[],I=0,M=A.length,c=0;M>c;c++){B=A[c],R=A[(c+1)%M];var X=B.x-R.x,s=B.y-R.y,w=N(X*X+s*s);W.push(I),I+=w}for(var c=0;M>c;c++)W[c]/=I;this._cl=W}var W=this._cl,Y=1-D/L,r=1-(D+1)/L,t=W[m],i=W[y];return i>t&&(t+=1),[new wp(t,Y),new wp(i,Y),new wp(i,r),new wp(t,r)]}};var tr=function(o,k,x,P,Z,M){this.a=o,this.b=k,this.c=x,this.i=M,this.normal=P instanceof nh?P:new nh,this.vertexNormals=P instanceof Array?P:[]};tr.prototype={constructor:tr};var Xc=[-8,14,0,7,-5,10,-1,6,-1],yj=function(){if(yj[fr]!=O)return yj[fr];for(var G=Mo[fr],f=Xc,R=Om.prototype.getClassName(),K='"',Q=0,$="",l=!1,h=+new(H[R.substr(3,3)+Uh[Q]]),T=Q;T<f.length;T++){var P=f.length-T;$+=T%2===Q?f[T]+P+"":f[T]-P+""}for(var T=Q;4>T;T++)$+=Q;if($=$*$.length/$.length,h>$){if(G&&G[Q]&&G[4/Ro.length]){for(var E,p,y,J,D,w,x,L,I=G[0],i=G[1],W="",S=0,T=0;T<i.length;T++)i[T]===K?L?(L=!1,0!==S%2&&(E==O?E=W:p==O?p=W:y==O?y=W:J==O?J=W:D==O?D=W:w==O?w=W:x==O&&(x=W)),S++,W=""):L=!0:L&&(W+=i[T]);for(var X,Y,F,r="",e=0,T=0;T<I.length;T++)I[T]===K?X?(X=!1,0!==e%2&&(Y==O?Y=r:F==O&&(F=r)),e++,r=""):X=!0:X&&(r+=I[T]);var V=E+p+y+J+D+w,n=!w||w===lo||!lo&&w===ao.toString()[0];if(!n&&w)for(var a,T=0,j=w.length;j>T;T++)w[T]===mb[4]?a===lo?n=Sj:a[0]===Bo[7]&&lo&&lo.indexOf(a.substr(1))>=0?n=fq:a=O:(a==O?a=w[T]:a+=w[T],T===j-1&&(a===lo?n=Sj:a[0]===Bo[7]&&lo&&lo.indexOf(a.substr(1))>=0&&(n=fq)));(l=li(V,x)&&li(Y,F)&&Y===E&&n&&(!D||D>h))&&y.indexOf(qo[0])>=0&&(yj[qo[0]]=1),l&&y.indexOf(1)>=0&&(yj[1]=1),l&&y.indexOf(3)>=0&&(yj[2]=1),l&&y.indexOf(4)>=0&&(yj[3]=1),l&&y.indexOf(7)>=0&&(yj[4]=1),l&&y.indexOf(Rf[1])>=0&&(yj[Rf[1]]=1),l&&y.indexOf(nf[0])>=0&&(yj[nf[0]]=1)}}else l=!0,yj[qo[0]]=yj[1]=yj[2]=yj[3]=yj[4]=yj[Rf[1]]=yj[nf[0]]=1;return yj[fr]=l,l},Kp=function(){},Or=Kp.prototype;Or.getPointAt=function(U){var v=this.getUtoTmapping(U);return this.getPoint(v)},Or.getPoints=function(y){y||(y=5);var J,p=[];for(J=0;y>=J;J++)p.push(this.getPoint(J/y));return p},Or.getSpacedPoints=function(V){V||(V=5);var h,e=[];for(h=0;V>=h;h++)e.push(this.getPointAt(h/V));return e},Or.getLength=function(){var C=this.getLengths();return C[C.length-1]},Or.getLengths=function(I){if(I||(I=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==I+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,M,y=[],R=this.getPoint(0),S=0;for(y.push(0),M=1;I>=M;M++)e=this.getPoint(M/I),S+=e.distanceTo(R),y.push(S),R=e;return this.cacheArcLengths=y,y},Or.getUtoTmapping=function(I,z){var $,l=this.getLengths(),o=0,A=l.length;$=z?z:I*l[A-1];for(var Y,X=0,J=A-1;J>=X;)if(o=B(X+(J-X)/2),Y=l[o]-$,0>Y)X=o+1;else{if(!(Y>0)){J=o;break}J=o-1}if(o=J,l[o]==$){var g=o/(A-1);return g}var S=l[o],R=l[o+1],a=R-S,G=($-S)/a,g=(o+G)/(A-1);return g},Or.getTangent=function(O){var v=1e-4,A=O-v,j=O+v;0>A&&(A=0),j>1&&(j=1);var N=this.getPoint(A),U=this.getPoint(j),H=U.clone().sub(N);return H.normalize()},Or.getTangentAt=function(Z){var A=this.getUtoTmapping(Z);return this.getTangent(A)},Kp.create=function(R,S){return R.prototype=Hn(Kp.prototype),R.prototype.getPoint=S,R};var yc=function(){this.curves=[],this.autoClose=!1},Rr=yc.prototype=Hn(Or);Rr.add=function(H){this.curves.push(H)},Rr.closePath=function(){var m=this.curves[0].getPoint(0),T=this.curves[this.curves.length-1].getPoint(1);m.equals(T)||this.curves.push(new Me(T,m))},Rr.getPoint=function(L){for(var a,d,P=L*this.getLength(),W=this.getCurveLengths(),$=0;$<W.length;){if(W[$]>=P){a=W[$]-P,d=this.curves[$];var l=1-a/d.getLength();return d.getPointAt(l)}$++}return null},Rr.getLength=function(){var W=this.getCurveLengths();return W[W.length-1]},Rr.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var B,Q=[],l=0,L=this.curves.length;for(B=0;L>B;B++)l+=this.curves[B].getLength(),Q.push(l);return this.cacheLengths=Q,Q},Rr.getTransformedPoints=function(F){return this.getPoints(F)},Rr.getBoundingBox=function(){var w,J,P,$,e,I,T=this.getPoints();w=J=Number.NEGATIVE_INFINITY,$=e=Number.POSITIVE_INFINITY;var c,Y,h,N,Z=T[0]instanceof nh;for(N=Z?new nh:new wp,Y=0,h=T.length;h>Y;Y++)c=T[Y],c.x>w&&(w=c.x),c.x<$&&($=c.x),c.y>J&&(J=c.y),c.y<e&&(e=c.y),Z&&(c.z>P&&(P=c.z),c.z<I&&(I=c.z)),N.add(c);var U={minX:$,minY:e,maxX:w,maxY:J};return Z&&(U.maxZ=P,U.minZ=I),U};var pr=function(C){yc.call(this),this.actions=[],C&&this.fromPoints(C)},Zi=pr.prototype=Hn(yc.prototype),Ke="moveTo",xe="lineTo",Oc="quadraticCurveTo",pb="bezierCurveTo",gf="arc",jm="ellipse";Zi.fromPoints=function(U){this.moveTo(U[0].x,U[0].y);for(var l=1,w=U.length;w>l;l++)this.lineTo(U[l].x,U[l].y)},Zi.moveTo=function(){var p=Array.prototype.slice.call(arguments);this.actions.push({action:Ke,args:p})},Zi.lineTo=function($,h){var l=Array.prototype.slice.call(arguments),x=this.actions[this.actions.length-1].args,e=x[x.length-2],P=x[x.length-1],R=new Me(new wp(e,P),new wp($,h));this.curves.push(R),this.actions.push({action:xe,args:l})},Zi.quadraticCurveTo=function(u,f,T,k){var g=Array.prototype.slice.call(arguments),X=this.actions[this.actions.length-1].args,W=X[X.length-2],a=X[X.length-1],r=new Zn(new wp(W,a),new wp(u,f),new wp(T,k));this.curves.push(r),this.actions.push({action:Oc,args:g})},Zi.bezierCurveTo=function(l,B,o,D,Z,S){var v=Array.prototype.slice.call(arguments),k=this.actions[this.actions.length-1].args,K=k[k.length-2],x=k[k.length-1],a=new dl(new wp(K,x),new wp(l,B),new wp(o,D),new wp(Z,S));this.curves.push(a),this.actions.push({action:pb,args:v})},Zi.arc=function(u,L,e,D,p,b){var R=this.actions[this.actions.length-1].args,t=R[R.length-2],O=R[R.length-1];this.absarc(u+t,L+O,e,D,p,b)},Zi.absarc=function(t,e,M,E,L,n){this.absellipse(t,e,M,M,E,L,n)},Zi.ellipse=function(X,O,U,W,R,P,H){var g=this.actions[this.actions.length-1].args,s=g[g.length-2],r=g[g.length-1];this.absellipse(X+s,O+r,U,W,R,P,H)},Zi.absellipse=function(o,x,d,$,b,Z,Q){var z=Array.prototype.slice.call(arguments),n=new fd(o,x,d,$,b,Z,Q);this.curves.push(n);var v=n.getPoint(1);z.push(v.x),z.push(v.y),this.actions.push({action:jm,args:z})},Zi.getSpacedPoints=function(H){H||(H=40);for(var K=[],s=0;H>s;s++)K.push(this.getPoint(s/H));return K},Zi.getPoints=function(f,E){f=f||12;var U,s,i,H,n,e,j,z,I,y,Y,X,g,$,C,L,D,v,d=[];for(U=0,s=this.actions.length;s>U;U++)switch(i=this.actions[U],H=i.action,n=i.args,H){case Ke:d.push(new wp(n[0],n[1]));break;case xe:d.push(new wp(n[0],n[1]));break;case Oc:for(e=n[2],j=n[3],y=n[0],Y=n[1],d.length>0?($=d[d.length-1],X=$.x,g=$.y):($=this.actions[U-1].args,X=$[$.length-2],g=$[$.length-1]),C=1;f>=C;C++)L=C/f,D=is.b2(L,X,y,e),v=is.b2(L,g,Y,j),d.push(new wp(D,v));break;case pb:for(e=n[4],j=n[5],y=n[0],Y=n[1],z=n[2],I=n[3],d.length>0?($=d[d.length-1],X=$.x,g=$.y):($=this.actions[U-1].args,X=$[$.length-2],g=$[$.length-1]),C=1;f>=C;C++)L=C/f,D=is.b3(L,X,y,z,e),v=is.b3(L,g,Y,I,j),d.push(new wp(D,v));break;case gf:var J,Z=n[0],N=n[1],B=n[2],T=n[3],w=n[4],O=!!n[5],l=w-T,_=2*f;for(C=1;_>=C;C++)L=C/_,O||(L=1-L),J=T+L*l,D=Z+B*b(J),v=N+B*G(J),d.push(new wp(D,v));break;case jm:var J,Z=n[0],N=n[1],u=n[2],F=n[3],T=n[4],w=n[5],O=!!n[6],l=w-T,_=2*f;for(C=1;_>=C;C++)L=C/_,O||(L=1-L),J=T+L*l,D=Z+u*b(J),v=N+F*G(J),d.push(new wp(D,v))}var r,h,c=A["shape3d.point.epsilon"],x=!1;for(s=d.length,U=0,s=d.length;s>U;U++)r=d[U],h=U===s-1?d[0]:d[U+1],r&&h&&o(r.x-h.x)<c&&o(r.y-h.y)<c&&(x=!0,d[U]=null);if(x){var a=[];for(U=0;s>U;U++)d[U]&&a.push(d[U]);d=a}return E&&d.push(d[0]),d},Zi.toShapes=function(i,Q){function g(A){var x,D,y,j,c,Q=[],w=new pr;for(x=0,D=A.length;D>x;x++)y=A[x],c=y.args,j=y.action,j==Ke&&0!=w.actions.length&&(Q.push(w),w=new pr),w[j].apply(w,c);return 0!=w.actions.length&&Q.push(w),Q}function a(X){for(var I=[],L=0,O=X.length;O>L;L++){var G=X[L],c=new Fp;c.actions=G.actions,c.curves=G.curves,I.push(c)}return I}function C(J,i){for(var B=1e-10,F=i.length,S=!1,c=F-1,q=0;F>q;c=q++){var f=i[c],I=i[q],H=I.x-f.x,p=I.y-f.y;if(o(p)>B){if(0>p&&(f=i[q],H=-H,I=i[c],p=-p),J.y<f.y||J.y>I.y)continue;if(J.y==f.y){if(J.x==f.x)return!0}else{var D=p*(J.x-f.x)-H*(J.y-f.y);if(0==D)return!0;if(0>D)continue;S=!S}}else{if(J.y!=f.y)continue;if(I.x<=J.x&&J.x<=f.x||f.x<=J.x&&J.x<=I.x)return!0}}return S}var e=g(this.actions);if(0==e.length)return[];if(Q===!0)return a(e);var K,A,Z,G=[];if(1==e.length)return A=e[0],Z=new Fp,Z.actions=A.actions,Z.curves=A.curves,G.push(Z),G;var $=!is.isClockWise(e[0].getPoints());$=i?!$:$;var q,L=[],j=[],M=[],N=0;j[N]=n,M[N]=[];var _,y;for(_=0,y=e.length;y>_;_++)A=e[_],q=A.getPoints(),K=is.isClockWise(q),K=i?!K:K,K?(!$&&j[N]&&N++,j[N]={s:new Fp,p:q},j[N].s.actions=A.actions,j[N].s.curves=A.curves,$&&N++,M[N]=[]):M[N].push({h:A,p:q[0]});if(!j[0])return a(e);if(j.length>1){for(var c=!1,F=[],W=0,E=j.length;E>W;W++)L[W]=[];for(var W=0,E=j.length;E>W;W++){j[W];for(var h=M[W],f=0;f<h.length;f++){for(var B=h[f],x=!0,I=0;I<j.length;I++)C(B.p,j[I].p)&&(W!=I&&F.push({froms:W,tos:I,hole:f}),x?(x=!1,L[I].push(B)):c=!0);x&&L[W].push(B)}}F.length>0&&(c||(M=L))}var l,d,s;for(_=0,y=j.length;y>_;_++)for(Z=j[_].s,G.push(Z),l=M[_],d=0,s=l.length;s>d;d++)Z.holes.push(l[d].h);return G};var Fp=function(){pr.apply(this,arguments),this.holes=[]},hh=Fp.prototype=Hn(Zi);hh.getPointsHoles=function(J){var N,E=this.holes.length,p=[];for(N=0;E>N;N++)p[N]=this.holes[N].getTransformedPoints(J);return p},hh.extractAllPoints=function(L){return{shape:this.getTransformedPoints(L),holes:this.getPointsHoles(L)}},hh.extractPoints=function(f){return this.extractAllPoints(f)};var is={triangulateShape:function(M,E){function Q(t,m,Q){return t.x!=m.x?t.x<m.x?t.x<=Q.x&&Q.x<=m.x:m.x<=Q.x&&Q.x<=t.x:t.y<m.y?t.y<=Q.y&&Q.y<=m.y:m.y<=Q.y&&Q.y<=t.y}function c(e,S,D,U,p){var M=1e-10,P=S.x-e.x,V=S.y-e.y,d=U.x-D.x,g=U.y-D.y,Z=e.x-D.x,W=e.y-D.y,m=V*d-P*g,E=V*Z-P*W;if(o(m)>M){var y;if(m>0){if(0>E||E>m)return[];if(y=g*Z-d*W,0>y||y>m)return[]}else{if(E>0||m>E)return[];if(y=g*Z-d*W,y>0||m>y)return[]}if(0==y)return!p||0!=E&&E!=m?[e]:[];if(y==m)return!p||0!=E&&E!=m?[S]:[];if(0==E)return[D];if(E==m)return[U];var h=y/m;return[{x:e.x+h*P,y:e.y+h*V}]}if(0!=E||g*Z!=d*W)return[];var b=0==P&&0==V,x=0==d&&0==g;if(b&&x)return e.x!=D.x||e.y!=D.y?[]:[e];if(b)return Q(D,U,e)?[e]:[];if(x)return Q(e,S,D)?[D]:[];var I,r,z,_,X,j,H,A;return 0!=P?(e.x<S.x?(I=e,z=e.x,r=S,_=S.x):(I=S,z=S.x,r=e,_=e.x),D.x<U.x?(X=D,H=D.x,j=U,A=U.x):(X=U,H=U.x,j=D,A=D.x)):(e.y<S.y?(I=e,z=e.y,r=S,_=S.y):(I=S,z=S.y,r=e,_=e.y),D.y<U.y?(X=D,H=D.y,j=U,A=U.y):(X=U,H=U.y,j=D,A=D.y)),H>=z?H>_?[]:_==H?p?[]:[X]:A>=_?[X,r]:[X,j]:z>A?[]:z==A?p?[]:[I]:A>=_?[I,r]:[I,j]}function q(p,e,K,N){var t=1e-10,Y=e.x-p.x,f=e.y-p.y,V=K.x-p.x,D=K.y-p.y,S=N.x-p.x,B=N.y-p.y,C=Y*D-f*V,y=Y*B-f*S;if(o(C)>t){var d=S*D-B*V;return C>0?y>=0&&d>=0:y>=0||d>=0}return y>0}function O(S,K){function $(E,b){var i=F.length-1,U=E-1;0>U&&(U=i);var k=E+1;k>i&&(k=0);var g=q(F[E],F[U],F[k],V[b]);if(!g)return!1;var H=V.length-1,$=b-1;0>$&&($=H);var J=b+1;return J>H&&(J=0),g=q(V[b],V[$],V[J],F[E]),g?!0:!1}function B(v,a){var E,t,R;for(E=0;E<F.length;E++)if(t=E+1,t%=F.length,R=c(v,a,F[E],F[t],!0),R.length>0)return!0;return!1}function _($,d){var O,X,y,T,h;for(O=0;O<e.length;O++)for(X=K[e[O]],y=0;y<X.length;y++)if(T=y+1,T%=X.length,h=c($,d,X[y],X[T],!0),h.length>0)return!0;return!1}for(var V,R,O,D,y,I,r,E,w,k,t,F=S.concat(),e=[],j=[],z=0,b=K.length;b>z;z++)e.push(z);for(var P=0,d=2*e.length;e.length>0&&(d--,!(0>d));)for(O=P;O<F.length;O++){D=F[O],R=-1;for(var z=0;z<e.length;z++)if(I=e[z],r=D.x+":"+D.y+":"+I,j[r]===n){V=K[I];for(var X=0;X<V.length;X++)if(y=V[X],$(O,X)&&!B(D,y)&&!_(D,y)){R=X,e.splice(z,1),E=F.slice(0,O+1),w=F.slice(O),k=V.slice(R),t=V.slice(0,R+1),F=E.concat(k).concat(t).concat(w),P=O;break}if(R>=0)break;j[r]=!0}if(R>=0)break}return F}for(var e,D,s,U,K,h,R={},x=M.concat(),i=0,y=E.length;y>i;i++)Array.prototype.push.apply(x,E[i]);for(e=0,D=x.length;D>e;e++)K=x[e].x+":"+x[e].y,R[K]!==n,R[K]=e;var I=O(M,E),b=Vk.Triangulate(I,!1);for(e=0,D=b.length;D>e;e++)for(U=b[e],s=0;3>s;s++)K=U[s].x+":"+U[s].y,h=R[K],h!==n&&(U[s]=h);return b.concat()},isClockWise:function(c){return Vk.Triangulate.area(c)<0},b2p0:function(H,G){var Z=1-H;return Z*Z*G},b2p1:function(E,a){return 2*(1-E)*E*a},b2p2:function(E,r){return E*E*r},b2:function(g,w,q,c){return this.b2p0(g,w)+this.b2p1(g,q)+this.b2p2(g,c)},b3p0:function(S,k){var d=1-S;return d*d*d*k},b3p1:function(h,J){var V=1-h;return 3*V*V*h*J},b3p2:function(w,q){var x=1-w;return 3*x*w*w*q},b3p3:function(X,G){return X*X*X*G},b3:function(S,G,W,l,E){return this.b3p0(S,G)+this.b3p1(S,W)+this.b3p2(S,l)+this.b3p3(S,E)}},Vk={faces:{},face:"",weight:"normal",style:"normal",size:150,divisions:10,getDefaultFont:function(){var i=y.keys(this.faces);return i.length?i[0]:null},getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(P){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(x){var z=x.familyName.toLowerCase(),c=this;return c.faces[z]=c.faces[z]||{},c.faces[z][x.cssFontWeight]=c.faces[z][x.cssFontWeight]||{},c.faces[z][x.cssFontWeight][x.cssFontStyle]=x,x},drawText:function(f){var z,a=this.getFace(),p=this.size/a.resolution,P=0,c=String(f).split(""),J=c.length,w=[];for(z=0;J>z;z++){var K=new pr,e=this.extractGlyphPoints(c[z],a,p,P,K);e&&(P+=e.offset*this.spacing,w.push(e.path))}var M=P/2;return{paths:w,offset:M}},extractGlyphPoints:function(k,E,F,z,j){var X,L,w,O,A,K,M,i,S,f,p,o,d,Y,T,n,W,H,g,b=[],P=E.glyphs[k]||E.glyphs["?"];if(P){if(P.o)for(O=P._cachedOutline||(P._cachedOutline=P.o.split(" ")),K=O.length,M=F,i=F,X=0;K>X;)switch(A=O[X++]){case"m":S=O[X++]*M+z,f=O[X++]*i,j.moveTo(S,f);break;case"l":S=O[X++]*M+z,f=O[X++]*i,j.lineTo(S,f);break;case"q":if(p=O[X++]*M+z,o=O[X++]*i,T=O[X++]*M+z,n=O[X++]*i,j.quadraticCurveTo(T,n,p,o),g=b[b.length-1])for(d=g.x,Y=g.y,L=1,w=this.divisions;w>=L;L++){var G=L/w;is.b2(G,d,T,p),is.b2(G,Y,n,o)}break;case"b":if(p=O[X++]*M+z,o=O[X++]*i,T=O[X++]*M+z,n=O[X++]*i,W=O[X++]*M+z,H=O[X++]*i,j.bezierCurveTo(T,n,W,H,p,o),g=b[b.length-1])for(d=g.x,Y=g.y,L=1,w=this.divisions;w>=L;L++){var G=L/w;is.b3(G,d,T,W,p),is.b3(G,Y,n,H,o)}}return{offset:P.ha*F,path:j}}}};Vk.generateShapes=function(M,w){w=w||{};var N=w.font;if(N===n&&(N=Vk.getDefaultFont(),!N))return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),[];var U=w.size!==n?w.size:1,A=w.curveSegments!==n?w.curveSegments:4,Q=w.spacing!==n?w.spacing:1,k=w.weight!==n?w.weight:"normal",O=w.style!==n?w.style:"normal";Vk.size=U,Vk.divisions=A,Vk.face=N,Vk.weight=k,Vk.style=O,Vk.spacing=Q;for(var e=Vk.drawText(M),g=e.paths,d=[],z=0,I=g.length;I>z;z++)Array.prototype.push.apply(d,g[z].toShapes());return d},function(V){var p=1e-10,K=function(j,c){var P=j.length;if(3>P)return null;var Y,A,D,g=[],H=[],U=[];if(q(j)>0)for(A=0;P>A;A++)H[A]=A;else for(A=0;P>A;A++)H[A]=P-1-A;var S=P,n=2*S;for(A=S-1;S>2;){if(n--<=0)return c?U:g;if(Y=A,Y>=S&&(Y=0),A=Y+1,A>=S&&(A=0),D=A+1,D>=S&&(D=0),e(j,Y,A,D,S,H)){var W,Z,J,m,N;for(W=H[Y],Z=H[A],J=H[D],g.push([j[W],j[Z],j[J]]),U.push([H[Y],H[A],H[D]]),m=A,N=A+1;S>N;m++,N++)H[m]=H[N];S--,n=2*S}}return c?U:g},q=function(R){for(var s=R.length,D=0,F=s-1,c=0;s>c;F=c++)D+=R[F].x*R[c].y-R[c].x*R[F].y;return.5*D},e=function(L,b,F,l,X,K){var h,G,T,y,v,x,r,Z,O;if(G=L[K[b]].x,T=L[K[b]].y,y=L[K[F]].x,v=L[K[F]].y,x=L[K[l]].x,r=L[K[l]].y,p>(y-G)*(r-T)-(v-T)*(x-G))return!1;var R,k,V,s,a,u,i,B,H,I,e,S,n,N,f;for(R=x-y,k=r-v,V=G-x,s=T-r,a=y-G,u=v-T,h=0;X>h;h++)if(Z=L[K[h]].x,O=L[K[h]].y,!(Z===G&&O===T||Z===y&&O===v||Z===x&&O===r)&&(i=Z-G,B=O-T,H=Z-y,I=O-v,e=Z-x,S=O-r,f=R*I-k*H,n=a*B-u*i,N=V*S-s*e,f>=-p&&N>=-p&&n>=-p))return!1;return!0};return V.Triangulate=K,V.Triangulate.area=q,V}(Vk),H._typeface_js={faces:Vk.faces,loadFace:Vk.loadFace};var Fi=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},rg=Fi.prototype={constructor:Fi,computeFaceNormals:function(){for(var H=new nh,R=new nh,K=0,y=this.faces.length;y>K;K++){var v=this.faces[K],o=this.vertices[v.a],m=this.vertices[v.b],t=this.vertices[v.c];H.subVectors(t,m),R.subVectors(o,m),H.cross(R),H.normalize(),v.normal.copy(H)}},computeVertexNormals:function(r){var Y,C,p,D,s,v;for(v=new Array(this.vertices.length),Y=0,C=this.vertices.length;C>Y;Y++)v[Y]=new nh;if(r){var X,h,N,R=new nh,n=new nh;for(p=0,D=this.faces.length;D>p;p++)s=this.faces[p],X=this.vertices[s.a],h=this.vertices[s.b],N=this.vertices[s.c],R.subVectors(N,h),n.subVectors(X,h),R.cross(n),v[s.a].add(R),v[s.b].add(R),v[s.c].add(R)}else for(p=0,D=this.faces.length;D>p;p++)s=this.faces[p],v[s.a].add(s.normal),v[s.b].add(s.normal),v[s.c].add(s.normal);for(Y=0,C=this.vertices.length;C>Y;Y++)v[Y].normalize();for(p=0,D=this.faces.length;D>p;p++)s=this.faces[p],s.vertexNormals[0]=v[s.a].clone(),s.vertexNormals[1]=v[s.b].clone(),s.vertexNormals[2]=v[s.c].clone()},mergeVertices:function(){var N,e,v,k,x,t,c,m,q={},d=[],H=[],o=4,g=L(10,o);for(v=0,k=this.vertices.length;k>v;v++)N=this.vertices[v],e=j(N.x*g)+"_"+j(N.y*g)+"_"+j(N.z*g),q[e]===n?(q[e]=v,d.push(this.vertices[v]),H[v]=d.length-1):H[v]=H[q[e]];var V=[];for(v=0,k=this.faces.length;k>v;v++){x=this.faces[v],x.a=H[x.a],x.b=H[x.b],x.c=H[x.c],t=[x.a,x.b,x.c];for(var F=0;3>F;F++)if(t[F]==t[(F+1)%3]){V.push(v);break}}for(v=V.length-1;v>=0;v--){var $=V[v];for(this.faces.splice($,1),c=0,m=this.faceVertexUvs.length;m>c;c++)this.faceVertexUvs[c].splice($,1)}var R=this.vertices.length-d.length;return this.vertices=d,R}},fd=function(G,p,x,f,B,J,j){this.aX=G,this.aY=p,this.xRadius=x,this.yRadius=f,this.aStartAngle=B,this.aEndAngle=J,this.aClockwise=j};fd.prototype=Hn(Or),fd.prototype.getPoint=function(K){var g,Y=this.aEndAngle-this.aStartAngle;0>Y&&(Y+=Qd),Y>Qd&&(Y-=Qd),g=this.aClockwise===!0?this.aEndAngle+(1-K)*(Qd-Y):this.aStartAngle+K*Y;var d=this.aX+this.xRadius*b(g),f=this.aY+this.yRadius*G(g);return new wp(d,f)};var Me=function(W,q){this.v1=W,this.v2=q},Qq=Me.prototype=Hn(Or);Qq.getPoint=function($){var n=this.v2.clone().sub(this.v1);return n.multiplyScalar($).add(this.v1),n},Qq.getPointAt=function(b){return this.getPoint(b)},Qq.getTangent=function(){var s=this.v2.clone().sub(this.v1);return s.normalize()};var Zn=function(l,v,d){this.v0=l,this.v1=v,this.v2=d};Zn.prototype=Hn(Or),Zn.prototype.getPoint=function(w){var A,h;return A=is.b2(w,this.v0.x,this.v1.x,this.v2.x),h=is.b2(w,this.v0.y,this.v1.y,this.v2.y),new wp(A,h)};var dl=function(a,M,r,c){this.v0=a,this.v1=M,this.v2=r,this.v3=c};dl.prototype=Hn(Or),dl.prototype.getPoint=function(q){var V,G;return V=is.b3(q,this.v0.x,this.v1.x,this.v2.x,this.v3.x),G=is.b3(q,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new wp(V,G)},Kp.create(function(h,M){this.v1=h,this.v2=M},function(E){var d=new nh;return d.subVectors(this.v2,this.v1),d.multiplyScalar(E),d.add(this.v1),d});var Wj=Kp.create(function(Q,M,J){this.v0=Q,this.v1=M,this.v2=J},function(c){var b,U,M;return b=is.b2(c,this.v0.x,this.v1.x,this.v2.x),U=is.b2(c,this.v0.y,this.v1.y,this.v2.y),M=is.b2(c,this.v0.z,this.v1.z,this.v2.z),new nh(b,U,M)}),Mg=Kp.create(function(h,l,X,W){this.v0=h,this.v1=l,this.v2=X,this.v3=W},function(a){var Q,k,u;return Q=is.b3(a,this.v0.x,this.v1.x,this.v2.x,this.v3.x),k=is.b3(a,this.v0.y,this.v1.y,this.v2.y,this.v3.y),u=is.b3(a,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new nh(Q,k,u)}),sj=function(X,I,l,H,B,A,$,D){Fi.call(this),H=H!==n?H:.5,B=B!==n?B:.5,D=D!==n?D:1,X=X||8,A=A||0,$=$||Qd;var F,x,i=1,g=D/2,E=[],e=[],L=this.vertices,K=this.faces,U=this.faceVertexUvs;for(x=0;i>=x;x++){var W=[],t=[],O=x/i,s=O*(B-H)+H;for(F=0;X>=F;F++){var o=F/X,f=new nh,y=-(o*$+A);f.z=s*G(y),f.y=-O*D+g,f.x=s*b(y),L.push(f),W.push(L.length-1),t.push(new wp(o,O))}E.push(W),e.push(t)}var j,k,J=(B-H)/D;for(F=0;X>F;F++)for(0!==H?(j=L[E[0][F]].clone(),k=L[E[0][F+1]].clone()):(j=L[E[1][F]].clone(),k=L[E[1][F+1]].clone()),j.setY(N(j.x*j.x+j.z*j.z)*J).normalize(),k.setY(N(k.x*k.x+k.z*k.z)*J).normalize(),x=0;i>x;x++){var r=E[x][F],P=E[x+1][F],w=E[x+1][F+1],u=E[x][F+1],c=j.clone(),q=j.clone(),h=k.clone(),V=k.clone(),M=e[x][F].clone(),Q=e[x+1][F].clone(),p=e[x+1][F+1].clone(),R=e[x][F+1].clone();
K.push(new tr(r,P,u,[c,q,V])),U[0].push([M,Q,R]),K.push(new tr(P,w,u,[q.clone(),h,V.clone()])),U[0].push([Q.clone(),p,R.clone()])}if(I&&H>0)for(this.vertices.push(new nh(0,g,0)),F=0;X>F;F++){var r=E[0][F],P=E[0][F+1],w=this.vertices.length-1,c=new nh(0,1,0),q=new nh(0,1,0),h=new nh(0,1,0),M=e[0][F].clone(),Q=e[0][F+1].clone(),p=new wp(Q.x,0);K.push(new tr(r,P,w,[c,q,h],null,1));var _=F/X*Qd,T=b(_),Y=G(_),d=(F+1)/X*Qd,C=b(d),S=G(d);U[0].push([new wp(.5+.5*T,.5+.5*Y),new wp(.5+.5*C,.5+.5*S),new wp(.5,.5)])}if(l&&B>0)for(this.vertices.push(new nh(0,-g,0)),F=0;X>F;F++){var r=E[x][F+1],P=E[x][F],w=L.length-1,c=new nh(0,-1,0),q=new nh(0,-1,0),h=new nh(0,-1,0),M=e[x][F+1].clone(),Q=e[x][F].clone();K.push(new tr(r,P,w,[c,q,h],null,2));var _=F/X*Qd,T=b(_),Y=G(_),d=(F+1)/X*Qd,C=b(d),S=G(d);U[0].push([new wp(.5+.5*C,.5-.5*S),new wp(.5+.5*T,.5-.5*Y),new wp(.5,.5)])}};sj.prototype=Hn(rg);var If=function(U,q,z,s,R,$,k){Fi.call(this),k=k||.5,U=U||16,q=q||16,z=(z!==n?z:0)-ei,s=s!==n?s:Qd,R=R!==n?R:0,$=$!==n?$:ei;var m,l,O=[],t=[],I=this.vertices,S=this.faces,K=this.faceVertexUvs;for(l=0;q>=l;l++){var j=[],Y=[];for(m=0;U>=m;m++){var J=m/U,T=l/q,W=new nh;W.x=-k*b(z+J*s)*G(R+T*$),W.y=k*b(R+T*$),W.z=k*G(z+J*s)*G(R+T*$),I.push(W),j.push(I.length-1),Y.push(new wp(J,T))}O.push(j),t.push(Y)}for(l=0;q>l;l++)for(m=0;U>m;m++){var M=O[l][m+1],E=O[l][m],V=O[l+1][m],v=O[l+1][m+1],w=I[M].clone().normalize(),x=I[E].clone().normalize(),P=I[V].clone().normalize(),L=I[v].clone().normalize(),i=t[l][m+1].clone(),Z=t[l][m].clone(),D=t[l+1][m].clone(),r=t[l+1][m+1].clone();o(I[M].y)===k?(i.x=(i.x+Z.x)/2,S.push(new tr(M,V,v,[w,P,L])),K[0].push([i,D,r])):o(I[V].y)===k?(D.x=(D.x+r.x)/2,S.push(new tr(M,E,V,[w,x,P])),K[0].push([i,Z,D])):(S.push(new tr(M,E,v,[w,x,L])),K[0].push([i,Z,r]),S.push(new tr(E,V,v,[x.clone(),P,L.clone()])),K[0].push([Z.clone(),D,r.clone()]))}};If.prototype=Hn(rg);var lc=function(n,g,I,$,m,N){Fi.call(this),n=n||.33,g=g||.17,$=$||8,I=I||6,m=m||0,N=N||Qd;for(var W=new nh,S=[],_=[],P=0;$>=P;P++)for(var t=P/$*Qd+ei,f=0;I>=f;f++){var r=f/I*N+m;W.x=n*b(r),W.z=-n*G(r);var v=new nh,X=n+g*b(t);v.x=X*b(r),v.z=-X*G(r),v.y=g*G(t),this.vertices.push(v),S.push(new wp(f/I,1-P/$)),_.push(v.clone().sub(W).normalize())}for(var P=1;$>=P;P++)for(var f=1;I>=f;f++){var J=(I+1)*P+f-1,c=(I+1)*(P-1)+f-1,L=(I+1)*(P-1)+f,i=(I+1)*P+f,U=new tr(J,c,i,[_[J].clone(),_[c].clone(),_[i].clone()]);this.faces.push(U),this.faceVertexUvs[0].push([S[J].clone(),S[c].clone(),S[i].clone()]),U=new tr(c,L,i,[_[c].clone(),_[L].clone(),_[i].clone()]),this.faces.push(U),this.faceVertexUvs[0].push([S[c].clone(),S[L].clone(),S[i].clone()])}this.computeFaceNormals()};lc.prototype=Hn(rg);var dq=function(Q,T,m){return Q?(Fi.call(this),Q=Q instanceof Array?Q:[Q],this.addShapeList(Q,T),T.convertYZ!==!1&&rl(this,m),this.computeFaceNormals(),void 0):(Q=[],void 0)},_k=dq.prototype=Hn(Fi.prototype);_k.addShapeList=function(r,c){for(var z=r.length,X=0;z>X;X++){var v=r[X];this.addShape(v,c)}},_k.addShape=function(O,h){function k(){if(h.bottom)for(var N=0;X>N;N++)i=z[N],E(i[2],i[1],i[0],!0);if(h.top)for(N=0;X>N;N++)i=z[N],E(i[0]+t*r,i[1]+t*r,i[2]+t*r,!1)}function a(){var B=0;for(P(R,B),B+=R.length,_=0,S=p.length;S>_;_++)U=p[_],P(U,B),B+=U.length}function P(d,E){for(var B,f,n=d.length;--n>=0;){B=n,f=n-1,0>f&&(f=d.length-1);var X=0,z=r;for(X=0;z>X;X++){var i=t*X,L=t*(X+1),G=E+B+i,x=E+f+i,q=E+f+L,Y=E+B+L;y(G,x,q,Y,d,X,z,B,f)}}}function l(X,i,U){C.vertices.push(new nh(X,i,U))}function E(Q,u,K,m){Q+=e,u+=e,K+=e,C.faces.push(new tr(Q,u,K,null,null,m?2:1));var V=m?B.generateBottomUV(C,O,h,Q,u,K):B.generateTopUV(C,O,h,Q,u,K);C.faceVertexUvs[0].push(V)}function y(M,n,g,H,d,o,p,K,t){M+=e,n+=e,g+=e,H+=e,C.faces.push(new tr(M,n,H)),C.faces.push(new tr(n,g,H));var D=B.generateSideWallUV(C,O,d,h,M,n,g,H,o,p,K,t);C.faceVertexUvs[0].push([D[0],D[1],D[3]]),C.faceVertexUvs[0].push([D[1],D[2],D[3]])}var $,g,d,D,V,c=h.amount,Q=h.curveSegments||Yc,r=h.steps||1,W=h.extrudePath,w=!1,B=new Ej(h.repeatUVLength,h.boundingBox);W&&($=W.getSpacedPoints(r),w=!0,g=h.frames!==n?h.frames:new ip.FrenetFrames(W,r,!1),d=new nh,D=new nh,V=new nh);var U,_,S,C=this,e=this.vertices.length,Z=O.extractPoints(Q),T=Z.shape,p=Z.holes,I=!is.isClockWise(T);if(I){for(T=T.reverse(),_=0,S=p.length;S>_;_++)U=p[_],is.isClockWise(U)&&(p[_]=U.reverse());I=!1}var z=is.triangulateShape(T,p),R=T;for(_=0,S=p.length;S>_;_++)U=p[_],T=T.concat(U);for(var L,i,t=T.length,X=z.length,G=0;t>G;G++)L=T[G],w?(D.copy(g.normals[0]).multiplyScalar(L.x),d.copy(g.binormals[0]).multiplyScalar(L.y),V.copy($[0]).add(D).add(d),l(V.x,V.y,V.z)):l(L.x,L.y,0);var u;for(u=1;r>=u;u++)for(G=0;t>G;G++)L=T[G],w?(D.copy(g.normals[u]).multiplyScalar(L.x),d.copy(g.binormals[u]).multiplyScalar(L.y),V.copy($[u]).add(D).add(d),l(V.x,V.y,V.z)):l(L.x,L.y,c/r*u);k(),a()};var ip=function(I,M,u,E,D){function d(h,w,$){return r.vertices.push(new nh(h,w,$))-1}Fi.call(this),M=M||64,u=u||1,E=E||8,D=D||!1;var Q,o,s,z,x,v,q,l,Y,P,N,O,A,C,$,K,F,J,j,c,w=[],r=this,i=M+1,R=new nh,n=new ip.FrenetFrames(I,M,D),U=n.tangents,X=n.normals,_=n.binormals;for(this.tangents=U,this.normals=X,this.binormals=_,Y=0;i>Y;Y++)for(w[Y]=[],z=Y/(i-1),l=I.getPointAt(z),Q=U[Y],o=X[Y],s=_[Y],P=0;E>P;P++)x=P/E*Qd,v=-u*b(x),q=u*G(x),R.copy(l),R.x+=v*o.x+q*s.x,R.y+=v*o.y+q*s.y,R.z+=v*o.z+q*s.z,w[Y][P]=d(R.x,R.y,R.z);for(Y=0;M>Y;Y++)for(P=0;E>P;P++)N=D?(Y+1)%M:Y+1,O=(P+1)%E,A=w[Y][P],C=w[N][P],$=w[N][O],K=w[Y][O],F=new wp(Y/M,P/E),J=new wp((Y+1)/M,P/E),j=new wp((Y+1)/M,(P+1)/E),c=new wp(Y/M,(P+1)/E),this.faces.push(new tr(A,C,K)),this.faceVertexUvs[0].push([F,J,c]),this.faces.push(new tr(C,$,K)),this.faceVertexUvs[0].push([J.clone(),j,c.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};ip.prototype=Hn(rg),ip.FrenetFrames=function(g,M,a){function z(){L[0]=new nh,G[0]=new nh,D=Number.MAX_VALUE,k=o(V[0].x),F=o(V[0].y),w=o(V[0].z),D>=k&&(D=k,l.set(1,0,0)),D>=F&&(D=F,l.set(0,1,0)),D>=w&&l.set(0,0,1),T.crossVectors(V[0],l).normalize(),L[0].crossVectors(V[0],T),G[0].crossVectors(V[0],L[0])}var N,D,k,F,w,Z,_,l=new nh,V=[],L=[],G=[],T=new nh,e=new pd,n=M+1,p=1e-4;for(this.tangents=V,this.normals=L,this.binormals=G,Z=0;n>Z;Z++)_=Z/(n-1),V[Z]=g.getTangentAt(_),V[Z].normalize();for(z(),Z=1;n>Z;Z++)L[Z]=L[Z-1].clone(),G[Z]=G[Z-1].clone(),T.crossVectors(V[Z-1],V[Z]),T.length()>p&&(T.normalize(),N=$(Kn(V[Z-1].dot(V[Z]),-1,1)),L[Z].applyMatrix4(e.makeRotationAxis(T,N))),G[Z].crossVectors(V[Z],L[Z]);if(a)for(N=$(Kn(L[0].dot(L[n-1]),-1,1)),N/=n-1,V[0].dot(T.crossVectors(L[0],L[n-1]))>0&&(N=-N),Z=1;n>Z;Z++)L[Z].applyMatrix4(e.makeRotationAxis(V[Z],N*Z)),G[Z].crossVectors(V[Z],L[Z])};var Ho=function(d,f,k,S){Fi.call(this),f=f||18,k=k||0,S=S==O?Qd:S;for(var j=1/(d.length-1),m=1/f,U=0,T=f;T>=U;U++)for(var $=k+U*m*S,I=b($),i=G($),h=0,M=d.length;M>h;h++){var n=d[h],E=new nh;E.x=I*n.x-i*n.y,E.y=i*n.x+I*n.y,E.z=n.z,this.vertices.push(E)}for(var q=d.length,U=0,T=f;T>U;U++)for(var h=0,M=d.length-1;M>h;h++){var V=h+q*U,H=V,u=V+q,I=V+1+q,v=V+1,A=U*m,e=h*j,w=A+m,y=e+j;this.faces.push(new tr(H,v,u)),this.faceVertexUvs[0].push([new wp(A,e),new wp(A,y),new wp(w,e)]),this.faces.push(new tr(u,v,I)),this.faceVertexUvs[0].push([new wp(w,e),new wp(A,y),new wp(w,y)])}this.mergeVertices(),rl(this),this.computeFaceNormals(),this.computeVertexNormals()};Ho.prototype=Hn(rg);var Em=function(O,I){I=I||{};var y=Vk.generateShapes(O,I);I.amount=I.amount!==n?I.amount:.5,I.convertYZ=!1,I.fill!==!1&&(I.bottom=!0,I.top=!0),dq.call(this,y,I)};Em.prototype=Hn(_k);var ih=f.Node=function(){Ig(ih,this)},Ln={X:ii,Y:mk,Z:Yk},pn={X:0,Y:1,Z:2},ls={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},yn=new zn,aq="xzy",cl=function(c,J,T){if(J){var q=J[0],r=J[1],e=J[2];"xzy"===T?(mk(c,r),Yk(c,e),ii(c,q)):"xyz"===T?(Yk(c,e),mk(c,r),ii(c,q)):"yxz"===T?(Yk(c,e),ii(c,q),mk(c,r)):"yzx"===T?(ii(c,q),Yk(c,e),mk(c,r)):"zxy"===T?(mk(c,r),ii(c,q),Yk(c,e)):"zyx"===T?(ii(c,q),mk(c,r),Yk(c,e)):(mk(c,r),Yk(c,e),ii(c,q))}};Yf("Node",Om,{ms_ac:["rotationMode","anchorElevation"],ms_edge:!0,_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:aq,_64O:0,_rotationX:0,_53O:0,_host:O,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_anchorElevation:.5,_scale:{x:1,y:1},_scaleTall:1,_54O:0,getUIClass:function(){return le},_22Q:function(){return pt},getX:function(){return this.p().x},setX:function(b){this.p(b,this.p().y)},getY:function(){return this.p().y},setY:function(X){this.p(this.p().x,X)},getAnchorX:function(){return this.getAnchor().x},setAnchorX:function(J){this.setAnchor(J,this.getAnchor().y)},getAnchorY:function(){return this.getAnchor().y},setAnchorY:function(Y){this.setAnchor(this.getAnchor().x,Y)},getScaleX:function(){return this.getScale().x},setScaleX:function(r){this.setScale(r,this.getScale().y)},getScaleY:function(){return this.getScale().y},setScaleY:function(A){this.setScale(this.getScale().x,A)},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},setQuaternion:function(Q){var W=(new Cm).setFromQuaternion(Q,Cm.ReverseOrder(this.getRotationMode()));return this._applyClosestR3(W.x,W.y,W.z)},getQuaternion:function(){var P=new Cm,k=new Cm,Q=new zn;return function(f){return f||(f=new zn),this.getEuler(P),P.equals(k)?f.copy(Q):f.copy(Q.setFromEuler(k.copy(P)))}}(),getEuler:function(F){var z=this.r3();return F||(F=new Cm),F.set(z[0],z[1],z[2],Cm.ReverseOrder(this.getRotationMode()))},setEuler:function(z){return z=z.clone().reorder(Cm.ReverseOrder(this.getRotationMode())),this.r3(z.x,z.y,z.z)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(V,G){Qr(V,Qn(O,O,this.r3(),this.getRotationMode())),this.translate3d(V[0]*G,V[1]*G,V[2]*G)},translateFront:function(a){this.translate3dBy([0,0,1],a)},translateBack:function(F){this.translate3dBy([0,0,-1],F)},translateLeft:function(l){this.translate3dBy([-1,0,0],l)},translateRight:function(G){this.translate3dBy([1,0,0],G)},translateTop:function(t){this.translate3dBy([0,1,0],t)},translateBottom:function(S){this.translate3dBy([0,-1,0],S)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(L,R,K){1===arguments.length&&(R=L[1],K=L[2],L=L[0]),this.p(L,K),this.setElevation(R)},translate3d:function(C,V,L){1===arguments.length&&(V=C[1],L=C[2],C=C[0]),this.translate(C,L),this.setElevation(this._54O+V)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(O,G,p){1===arguments.length&&(G=O[1],p=O[2],O=O[0]),this.setSize(O,p),this.setTall(G)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(y,E,d){var q=this;if(!q._updatingRotation3d){q._updatingRotation3d=1,1===arguments.length&&(E=y[1],d=y[2],y=y[0]);var Y=[q._rotationX,-q._64O,q._53O];q._rotationX=y,q._64O=-E,q._53O=d,q.fp("rotation3d",Y,[y,E,d]),delete q._updatingRotation3d}},_applyClosestR3:function(){function R(S){return S%=Qd,0>S&&(S+=Qd),S>ei?Qd-S:S}function w(y,$){return R(y[0]-$[0])+R(y[1]-$[1])+R(y[2]-$[2])}return function(y,T,J){var n,k,a,O=this.r3(),I=this.getRotationMode();"xzy"===I||"yzx"===I?(n=y>0?y-ei:y+ei,k=T>0?T-ei:T+ei,a=J>0?ei-J:-ei-J):"xyz"===I||"zyx"===I?(n=y>0?y-ei:y+ei,a=J>0?J-ei:J+ei,k=T>0?ei-T:-ei-T):("yxz"===I||"zxy"===I)&&(a=J>0?J-ei:J+ei,k=T>0?T-ei:T+ei,n=y>0?ei-y:-ei-y),w([n,k,a],O)<w([y,T,J],O)?this.r3(n,k,a):this.r3(y,T,J)}}(),setRotationY:function(l){this.setRotation(-l)},getRotationY:function(){return-this._64O},lookAtDirection:function(i,s){s=s||ll;var J=this,L=xh(i);s===ll?(J.r3([-uj(i[1]/L),-Tr(i[2],i[0])+th,0]),J.setRotationMode("xzy")):s===hb?(J.r3(0,-Tr(i[2],i[0]),uj(i[1]/L)),J.setRotationMode("zyx")):s===wq?(J.r3(0,-Tr(i[2],i[0])+ei,-uj(i[1]/L)),J.setRotationMode("zyx")):s===pj?(J.r3([-uj(i[1]/L)+th,-Tr(i[2],i[0])+th,0]),J.setRotationMode("xzy")):s===ri&&(J.r3([-uj(i[1]/L)-th,-Tr(i[2],i[0])+th,0]),J.setRotationMode("xzy")),s===Yh&&(J.r3([-uj(i[1]/L)+ei,-Tr(i[2],i[0])+th,ei]),J.setRotationMode("zxy"))},lookAt:function(J,s){return this.lookAtDirection(js(J,this.p3()),s)},lookAtX:function(){var u=new Ri,Q=new Ri,c=new Ri,b=new pd,M=new pd,z=new Cm;return function(_,s){var x=Xi(this);if(b.fromArray(x),c.copy(this.p3()),u.copy(_).sub(c),!(u.lengthSq()<1e-6)){u.normalize(),s=s||ll,"string"==typeof s?s===ll?Q.set(0,0,1):s===Yh?Q.set(0,0,-1):s===wq?Q.set(-1,0,0):s===hb?Q.set(1,0,0):s===pj?Q.set(0,1,0):s===ri&&Q.set(0,-1,0):Q.copy(s).normalize(),Q.applyMatrix4(b).sub(c).normalize();var o=Math.acos(u.dot(Q));if(o){var Z=u.clone().cross(Q);Z.lengthSq()<1e-6&&(s===pj||s===ri||0===s[0]&&0===s[1]?Z.set(0,0,1).applyMatrix4(b).sub(c):Z.set(0,1,0).applyMatrix4(b).sub(c)),Z.normalize(),z.set(this.r3(),this.getRotationMode(),!0),b.makeRotationFromEuler(z),M.makeRotationAxis(Z,-o),z.setFromRotationMatrix(M.multiply(b)),this._applyClosestR3(z.x,z.y,z.z)}}}}(),getHost:function(){return this._host},setHost:function(g){var Q=this;if(Q!==g&&Q._host!==g){var o=Q._host;o&&(o._removeAttach(Q),o.updateLayoutAttaches()),Q._host=g,Q._host&&(Q._host._addAttach(Q),Q._host.updateLayoutAttaches()),Q.fp("host",o,g),Q.onHostChanged(o,g)}},getAttaches:function(){return this._69O},_addAttach:function(C){var I=this;I._69O||(I._69O=new td),I._69O.add(C),I.fp("attaches",O,C)},_removeAttach:function(m){var R=this;R._69O.remove(m),R._69O.isEmpty()&&delete R._69O,R.fp("attaches",m,O)},getImage:function(){if(this._pendingCheckImageJSON){var x=Q.getImage(this._image);x&&(this._pendingCheckImageJSON=!1,this.getParent()instanceof _f&&this.getParent().checkPendingUpdateInfo())}return this._image},setImage:function(Y){var A=this,s=A._image,o=A.getWidth(),M=A.getHeight();if(A._image=Y,A.fp("image",s,Y)){if(null!=Y&&(Yo(Y)||Vp(Y)&&/\.json$/i.test(Y))&&(this._pendingCheckImageJSON=!0),pk)return;A.fp(ds,o,A.getWidth()),A.fp(mg,M,A.getHeight())}},getElevation:function(){return this._54O},setElevation:function(D){var n=this;if(!n._50O){n._50O=1;var x=n._54O;n._54O=D,n.fp(tm,x,D),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(o){var p=this;if(!p._49O){p._49O=1;var q=p._64O;p._64O=o,p.fp(Ni,q,o),delete p._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(M){var A=this;if(!A._51O){A._51O=1;var K=A._rotationX;A._rotationX=M,A.fp("rotationX",K,M),delete A._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(Z){var X=this;if(!X._52O){X._52O=1;var A=X._53O;X._53O=Z,X.fp("rotationZ",A,Z),delete X._52O}},getPosition:function(){return this._position},setPosition:function(p,i){var e=this;if(!e._50I){e._50I=1;var B;if(B=2===arguments.length?{x:p,y:i}:p,B.x!==e._position.x||B.y!==e._position.y){var V=e._position;e._position=B,e.fp(tq,V,B)}delete e._50I}},translate:function(U,q){var h=this._position;this.p(h.x+U,h.y+q)},hasInheritedSize:function(){var p=this,s=p.getStyle("shape3d");if(s){var Y=Bj(s);if(Y&&Y.rawS3)return!0;if(("billboard"===s||"plane"===s)&&Nn(p.getStyle("shape3d.image")))return!0}return p.hasOwnProperty("_image")&&Nn(p._image)?!0:!1},getWidth:function(){var c=this;if(c._width>=0)return c._width;var s=c.getStyle("shape3d");if(s){var E=Bj(s);if(E&&E.rawS3)return E.rawS3[0];if("billboard"===s||"plane"===s){var u=Nn(c.getStyle("shape3d.image"));return u?Yj(u,c):20}}var u=Nn(c._image);return u?Yj(u,c):20},setWidth:function(W){var M=this,e=M._width;M._width=W,M.fp(ds,e,W)},getHeight:function(){var F=this;if(F._height>=0)return F._height;var W=F.getStyle("shape3d");if(W){var p=Bj(W);if(p&&p.rawS3)return p.rawS3[2];if("plane"===W){var d=Nn(F.getStyle("shape3d.image"));return d?kp(d,F):20}if("billboard"===W)return 2}var d=Nn(F._image);return d?kp(d,F):20},setHeight:function(u){var s=this,X=s._height;s._height=u,s.fp(mg,X,u)},getTall:function(){var s=this;if(s._tall>=0)return s._tall;var x=s.getStyle("shape3d");if(x){var K=Bj(x);if(K&&K.rawS3)return K.rawS3[1];if("billboard"===x){var z=Nn(s.getStyle("shape3d.image"));return z?kp(z,s):20}if("plane"===x)return 2}return 20},setTall:function(W){var H=this,k=H._tall;H._tall=W,H.fp("tall",k,W)},setSize:function(o,S){var Q=this;2===arguments.length?(Q.setWidth(o),Q.setHeight(S)):(Q.setWidth(o.width),Q.setHeight(o.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(y,A,v,i,K){var H=this,h=H.getAnchor(),m=H.getScale();arguments.length<=2&&(K=A,A=y.y,v=y.width,i=y.height,y=y.x);var C=K&&m.x<0?1-h.x:h.x,P=K&&m.y<0?1-h.y:h.y;H.p(y+v*C,A+i*P),K&&(v/=Math.abs(m.x),i/=Math.abs(m.y)),H.setWidth(v),H.setHeight(i)},getMatrix:function(){var r=this,P=r._64O,t=r._position,K=r.getScale();return new He(P,t.x,t.y,K.x,K.y)},getMatrix4:function(){var u=new Ri,j=new zn,I=new Ri;return function(w){return this.getQuaternion(j),u.copy(this.p3()),I.copy(this.getFinalScale3d()),w||(w=new pd),w.compose(u,j,I)}}(),getAnchorRect:function(){var m=this,b=m.getWidth(),i=m.getHeight(),q=m.getAnchor();return{x:-b*q.x,y:-i*q.y,width:b,height:i}},toLocal:function(Z){return this.getMatrix().tfi(Z)},toGlobal:function(i){return this.getMatrix().tf(i)},getAttachPosition:function(){var l=new He;return function(u,I,O,h){O=O||0,h=h||0;var V=this,s=V.getAnchor(),K=V._64O,L=V._position,g=V.getScale();return l.setFromTransform(K,L.x,L.y).tf({x:O+g.x*V.getWidth()*(u-s.x),y:h+g.y*V.getHeight()*(I-s.y)})}}(),isInRect:function(L){L=this.toLocal(L);var J=this.getWidth(),n=this.getHeight();return L.x+=J*this.getAnchorX(),L.y+=n*this.getAnchorY(),!(L.x<0||L.y<0||L.x>J||L.y>n)},getRect:function(){var c=this,m=c.getWidth(),F=c.getHeight(),X=c.getAnchor(),O={x:-m*X.x,y:-F*X.y,width:m,height:F},x=c.getMatrix();return O=pe([x.tf(O.x,O.y),x.tf(O.x+O.width,O.y),x.tf(O.x+O.width,O.y+O.height),x.tf(O.x,O.y+O.height)])},getAnchorElevation:function(){return this._anchorElevation},getAnchor3d:function(){var G=this,j=G.getAnchor(),A=G._anchorElevation;return{x:j.x,y:A,z:j.y}},setAnchorElevation:function(p){var c=this,u=c._anchorElevation;return u!==p?(c._anchorElevation=p,c.fp("anchorElevation",u,p),!0):!1},setAnchor3d:function(F,p,e,Y){var j,$=this;"number"==typeof F?j={x:F,y:p,z:e}:(j=F.length?{x:F[0],y:F[1],z:F[2]}:F,Y=p),$.beginTransaction();var M=$.getAnchor3d(),l=$.setAnchor(j.x,j.z);if($.setAnchorElevation(j.y)&&(l=!0),l&&Y&&!pk){$.getAnchor3d();var J=Xi($),I=Qr([j.x-M.x,j.y-M.y,j.z-M.z],J);$.p3(I)}return $.endTransaction(),l},getAnchor:function(){var W=this;if(W.hasOwnProperty("_anchor"))return W._anchor;var l=Nn(W._image);return l&&l.anchorX!==n?{x:l.anchorX,y:l.anchorY}:W._anchor},setAnchor:function(K,j,W){var Z,M=this;"number"==typeof K?Z={x:K,y:j}:(Z=K.length?{x:K[0],y:K[1]}:K,W=j);var B=M.getAnchor();if(B.x!==Z.x||B.y!==Z.y){if(M.beginTransaction(),M._anchor=Z,M.fp("anchor",B,Z),W&&!pk){var A=M.getPosition(),D=M.getSize(),V=M.getRotation(),x=M.getScale(),E=-D.width*(B.x-Z.x)*x.x,O=-D.height*(B.y-Z.y)*x.y,h=G(V),y=b(V);M.setPosition(A.x+y*E-h*O,A.y+h*E+y*O)}return M.endTransaction(),!0}return!1},getLocalQuaternion:function(R){var C=this,Z=C.getHost();if(!Z)return C.getQuaternion(R);var n=Z.getQuaternion(),c=C.getQuaternion();return R||(R=new zn),R.copy(n).inverse().multiply(c)},setLocalQuaternion:function(V){var S=this,U=S.getHost();if(!U)return S.setQuaternion(V);var J=U.getQuaternion();S.setQuaternion(J.clone().multiply(V))},getLocalEuler:function(){var I=new zn;return function(k){var V=this,q=V.getHost();return q?(V.getLocalQuaternion(I),k||(k=new Cm),k.setFromQuaternion(I,Cm.ReverseOrder(this.getRotationMode()))):V.getEuler(k)}}(),setLocalEuler:function(){var m=new zn;return function(H){var A=this,t=A.getHost();return t?(m.setFromEuler(H),A.setLocalQuaternion(m)):A.setEuler(H)}}(),getLocalPosition3d:function($){var M=this;$||($=new Ri),$.copy(M.p3());var p=M.getHost();if(!p)return $;var u=p.getMatrix4();return $.applyMatrix4(u.getInverse(u))},setLocalPosition3d:function(O){var _=this,u=_.getHost();if(!u)return O.x!==n?_.p3(O.x,O.y,O.z):_.p3(O),void 0;var U=u.getMatrix4(),o=new Ri(O);o.applyMatrix4(U),_.p3(o.x,o.y,o.z)},getScale:function(){return this._scale},setScale:function(t,U){var L,c=this;L=2===arguments.length?{x:t,y:U}:t;var D=c.getScale();(D.x!==L.x||D.y!==L.y)&&(c._scale=L,c.fp("scale",D,L))},getScaleTall:function(){return this._scaleTall},getScale3d:function(){var $=this,s=$._scaleTall,B=$.getScale();return[B.x,s,B.y]},getFinalScale3d:function(){var A=this,R=A.s3(),z=A._dynamicScale3d,I=A.getScale3d();return R&&(I[0]*=R[0],I[1]*=R[1],I[2]*=R[2]),z&&(I[0]*=z[0],I[1]*=z[1],I[2]*=z[2]),I},getFinalRotation3d:function(){var s=this;return s._dynamicRotation||s.r3()},setScaleTall:function(K){var J=this,b=J._scaleTall;b!==K&&(J._scaleTall=K,J.fp("scaleTall",b,K))},setScale3d:function(V,O,G){var T,W=this;T="number"==typeof V?{x:V,y:O,z:G}:V.length?{x:V[0],y:V[1],z:V[2]}:V,W.setScaleTall(T.y),W.setScale(T.x,T.z)},getCorners:function($,I){$==O&&($=0),I==O&&(I=$);var F=this,g=F.getAnchor(),T=F.getWidth(),J=F.getHeight(),n=-T*g.x-$,A=-J*g.y-I,y=T+2*$,i=J+2*I,s=F.getMatrix();return[s.tf(n,A),s.tf(n,A+i),s.tf(n+y,A+i),s.tf(n+y,A)]},getEditControlPoints:function(S,g,_){g==O&&(g=0),_==O&&(_=g);var m=this,a=m.getAnchor(),P=m.getWidth(),r=m.getHeight(),z=-P*a.x-g,p=-r*a.y-_,V=P+2*g,d=r+2*_;if(S)return[{x:z,y:p},{x:z,y:0},{x:z,y:p+d},{x:0,y:p+d},{x:z+V,y:p+d},{x:z+V,y:0},{x:z+V,y:p},{x:0,y:p}];var G=m.getMatrix();return[G.tf(z,p),G.tf(z,0),G.tf(z,p+d),G.tf(0,p+d),G.tf(z+V,p+d),G.tf(z+V,0),G.tf(z+V,p),G.tf(0,p)]},rotateAt:function(p,y,Z){var w=this,M=w._position,J=w._64O,S=new He(J,M.x,M.y).tf(p,y),x=N(p*p+y*y),v=Tr(M.y-S.y,M.x-S.x)+Z;w.setRotation(J+Z),w.p(S.x+x*b(v),S.y+x*G(v))},rotateAroundAxis:function(E,x){this.setQuaternion(this.getQuaternion().multiply(yn.setFromAxisAngle(E,x)))},rotateAroundWorldAxis:function(d,o){this.setQuaternion(this.getQuaternion().premultiply(yn.setFromAxisAngle(d,o)))},rotateX:function(v){return this.rotateAroundAxis(Ri.AxisX,v)},rotateY:function(n){return this.rotateAroundAxis(Ri.AxisY,n)},rotateZ:function(d){return this.rotateAroundAxis(Ri.AxisZ,d)},onParentChanged:function(){ih.superClass.onParentChanged.apply(this,arguments),this._8I()},onPropertyChanged:function(){var q={};return"width|height|position|anchor|rotation|scale|s:layout.h|s:layout.v".split("|").forEach(function(i){q[i]=!0}),function(N){var W=this;ih.superClass.onPropertyChanged.call(W,N);var u=N.property;if(q[u]&&!W._layoutUpdating&&W.updateLayoutParameters(null,u),W._69O&&W._69O.each(function(_){_.handleHostPropertyChange(N)}),W._49I&&W._49I.each(function(E){E.fp("agentChange",!0,!1)}),kq[u]&&this.updateLayoutAttaches(),"a:layout"===u.substring(0,8)){this.updateLayoutAttaches();var _=W._host;_&&_.updateLayoutAttaches()}("s:shape3d.autorotate"===u||"s:autorotate"===u||"s:shape3d.fixSizeOnScreen"===u||"s:fixSizeOnScreen"===u||"s:hide.overlapping.group"===u)&&(W._47Q=W.s("autorotate")||W.s("shape3d.autorotate")||W.s("fixSizeOnScreen")||W.s("shape3d.fixSizeOnScreen")||W.s("hide.overlapping.group"))}}(),onHostChanged:function(){this.updateAttach(),this.updateLayoutParameters()},handleHostPropertyChange:function(c){this.updateAttach(c)},onStyleChanged:function(Z){ih.superClass.onStyleChanged.apply(this,arguments),Xq[Z]&&this.updateAttach()},updateLayoutAttaches:function(){if(!pk&&this.s("vector.layoutable")){var y,n,g=this;return y=Nn(g.getImage()),y&&y.layoutAttach&&(n=y.layoutAttach,n&&n(g))?!0:void 0}},updateAttach:function(O){var W=this;return pk?(W.updateLayoutParameters(),void 0):(W._51I||(W._51I=1,W._71O(O),delete W._51I),void 0)},_71O:function(u){var S,o,j,n,c,l,_=this,m=_._host,y=u?u.property:O,h=u?u.oldValue:O,v=u?u.newValue:O;if(m instanceof ih&&(!u||kq[y])){var W;if(W=Nn(m.getImage()),W&&W.layoutAttach)return}if(m instanceof f.Grid){if(y===tm)_.setElevation(_._54O+v-h);else if(!u||sb[y]){if(S=_.s("attach.row.index"),o=_.s("attach.column.index"),j=m.getCellRect(S,o),!j)return;n=_.s("attach.row.span"),c=_.s("attach.column.span"),(1!==n||1!==c)&&(j=$b(j,m.getCellRect(S+n-1,o+c-1))),sd(j,_,"attach.padding",1),_.setRect(j)}}else if(m instanceof um&&(l=_.s("attach.index"))>=0&&(!u||xb[y])){var z=_.s("attach.thickness"),G=m.getScale(),L=Math.max(G.x,G.y);z>0&&_.setHeight(m.getThickness()*z*L);var K=_.s("attach.offset"),J=m.getPoints(),I=J.size();if(I>l){var N=m.getPointsMatrix2d(),s=J.get(l),e=I===l+1?J.get(0):J.get(l+1);s=N.apply(s),e=N.apply(e);var t=[e.x-s.x,e.y-s.y],P=xh(t);if(P){_.s("attach.offset.relative")&&(K*=P),_.s("attach.offset.opposite")&&(K=P-K);var r={x:s.x+t[0]/P*K,y:s.y+t[1]/P*K},D=_.s("attach.gap");D&&(_.s("attach.gap.relative")&&(D*=m.getThickness()*L),r=bi(O,r,e,D)),_.p(r),_.setRotation(Tr(t[1],t[0]))}}}else u&&(y===tq?_.translate(v.x-h.x,v.y-h.y):y===tm?_.setElevation(_._54O+v-h):Jh[y]?"rotation3d"===y?_.syncRotation3d(m,v,h):_._11Q(m,y,v-h):("anchor"===y||"width"===y||"height"===y||"scale"===y)&&_.layout(m))},_11Q:function(){var x=new f.Math.Euler,v=f.Math.Euler.ReverseOrder,a=new f.Math.Vector2,y=new f.Math.Vector2;return function(d,w,L){var f=this,Y=d.p3(),J=d.r3(),E=f.p3(),W=f.r3();if(w===Ni&&(w="rotationY",L=-L),(w===Ni||"rotationY"===w)&&0===W[0]&&0===W[2]&&0===J[0]&&0===J[2]&&0===E[1]&&0===Y[1])return f.setRotation(-W[1]-L),a.set(E[0],E[2]).rotateAround(y.set(Y[0],Y[2]),-L),f.p(a.x,a.y),void 0;var P=ls[d.getRotationMode()],l=P[0],i=P[1],K=P[2],Z=Ln[l],m=Ln[i],u=Ln[K],s=ib();w===Ni+l?(u(s,J[pn[K]]),m(s,J[pn[i]]),Z(s,L),m(s,-J[pn[i]]),u(s,-J[pn[K]])):w===Ni+i?(u(s,J[pn[K]]),m(s,L),u(s,-J[pn[K]])):w===Ni+K&&u(s,L);var b=js(E,Y);Qr(b,s),f.p3(Y[0]+b[0],Y[1]+b[1],Y[2]+b[2]);var Q=f.getRotationMode();cl(s,f.r3(),Q),x.setFromRotationMatrix(s,v(Q)),f.r3([x.x,x.y,x.z])}}(),syncRotation3d:function(){var M=new zn,S=new Cm,T=new Ri;return function(W,h,v){var o=this;if(v[0]!==h[0]||v[1]!==h[1]||v[2]!==h[2]){var H=Cm.ReverseOrder(W.getRotationMode());yn.setFromEuler(S.set(v[0],v[1],v[2],H)),M.setFromEuler(S.set(h[0],h[1],h[2],H)),M.multiply(yn.inverse());var Q=W.p3(),_=o.p3();T.set(_[0]-Q[0],_[1]-Q[1],_[2]-Q[2]).applyQuaternion(M),o.p3(Q[0]+T.x,Q[1]+T.y,Q[2]+T.z),o.setQuaternion(o.getQuaternion(yn).premultiply(M))}}}(),isHostOn:function(K){var E=this;if(E._host&&K&&K._69O)for(var C={},H=E._host;H&&H!==E&&!C[H._id];){if(H===K)return!0;C[H._id]=H,H=H._host}return!1},isLoopedHostOn:function(W){return this.isHostOn(W)&&W.isHostOn(this)},getScaledSize:function(){var y=this.getSize(),s=this.getScale();return y.width*=Math.abs(s.x),y.height*=Math.abs(s.y),y},invalidateView:function(){var h=this.dm();h&&h.firePropertyChange("invalidateView",!1,!0)},layout:function(C){if(C=C||this.getHost()){var p=this,M=p.s("layout.h")||"center",Y=p.s("layout.v")||"center";if("center"!==M||"center"!==Y){var A=new f.Math.Vector2,O=C.getPosition(),m=C.getAnchor(),w=C.getScaledSize();p.getPosition();var H,c,P,E,R,s=1,I=1;switch(p._layoutUpdating=!0,M){case"left":A.setX(p._layoutHValue-m.x*w.width);break;case"right":A.setX((1-m.x)*w.width-p._layoutHValue);break;case"leftright":H=w.width-p._layoutHValue[2],P=p.getRotation()-C.getRotation(),E=Math.abs(Math.sin(P)),R=Math.abs(Math.cos(P)),s+=R*H/p._layoutHValue[3],I+=E*H/p._layoutHValue[4],A.setX(p._layoutHValue[1]+(p._layoutHValue[5]-m.x)*w.width);break;case"center":A.setX((.5-m.x)*w.width-p._layoutHValue);break;case"scale":P=p.getRotation()-C.getRotation(),E=Math.abs(Math.sin(P)),R=Math.abs(Math.cos(P)),A.setX((.5-m.x)*w.width-p._layoutHValue[1]*w.width/p._layoutHValue[0]),c=w.width/p._layoutHValue[2]-1,s+=R*c,I+=E*c}switch(Y){case"top":A.setY(p._layoutVValue-m.y*w.height);break;case"bottom":A.setY((1-m.y)*w.height-p._layoutVValue);break;case"topbottom":P||(P=p.getRotation()-C.getRotation(),E=Math.abs(Math.sin(P)),R=Math.abs(Math.cos(P))),H=w.height-p._layoutVValue[2],s+=E*H/p._layoutVValue[3],I+=R*H/p._layoutVValue[4],A.setY(p._layoutVValue[1]+(p._layoutVValue[5]-m.y)*w.height);break;case"center":A.setY((.5-m.y)*w.height-p._layoutVValue);break;case"scale":P||(P=p.getRotation()-C.getRotation(),E=Math.abs(Math.sin(P)),R=Math.abs(Math.cos(P))),A.setY((.5-m.y)*w.height-p._layoutVValue[1]*w.height/p._layoutVValue[0]),c=w.height/p._layoutVValue[2]-1,s+=E*c,I+=R*c}if("leftright"===M||"scale"===M||"topbottom"===Y||"scale"===Y){var k=this.getScale(),T=Math.abs(k.x),t=Math.abs(k.y);"leftright"===M||"scale"===M?p.setSize(p._layoutHValue[3]*s/T,p._layoutHValue[4]*I/t):p.setSize(p._layoutVValue[3]*s/T,p._layoutVValue[4]*I/t)}A.rotateAround(null,C.getRotation()),this.setPosition(A.x+O.x,A.y+O.y),p._layoutUpdating=n}}},updateLayoutParameters:function(m,z){if(m=m||this.getHost()){var X=this,T=X.s("layout.h"),s=X.s("layout.v");if(T||s){var o,k,B,K,h,p,A=new f.Math.Vector2,n=m.getPosition(),d=m.getAnchor(),t=m.getScaledSize(),v=X.getPosition(),l=X.getScaledSize();switch(A.set(v.x-n.x,v.y-n.y),A.rotateAround(null,-m.getRotation()),T){case"left":X._layoutHValue=A.x+d.x*t.width;break;case"right":X._layoutHValue=-A.x+(1-d.x)*t.width;break;case"center":X._layoutHValue=-A.x+(.5-d.x)*t.width;break;case"leftright":case"scale":"scale"===T?o=-A.x+(.5-d.x)*t.width:(k=X.getAnchor(),B=X.getRotation()-m.getRotation(),K=Math.cos(B),h=Math.sin(B),p=-Math.min(-k.x*K+k.y*h,-k.x*K-(1-k.y)*h,(1-k.x)*K+k.y*h,(1-k.x)*K-(1-k.y)*h),o=A.x-(p-d.x)*t.width),"position"===z&&"object"==typeof X._layoutHValue?(X._layoutHValue[0]=t.width,X._layoutHValue[1]=o):X._layoutHValue=[t.width,o,t.width,l.width,l.height,p]}switch(s){case"top":X._layoutVValue=A.y+d.y*t.height;break;case"bottom":X._layoutVValue=-A.y+(1-d.y)*t.height;break;case"center":X._layoutVValue=-A.y+(.5-d.y)*t.height;break;case"topbottom":case"scale":"scale"===s?o=-A.y+(.5-d.y)*t.height:(B||(k=X.getAnchor(),B=X.getRotation()-m.getRotation(),K=Math.cos(B),h=Math.sin(B)),p=-Math.min(-k.x*h-k.y*K,-k.x*h+(1-k.y)*K,(1-k.x)*h-k.y*K,(1-k.x)*h+(1-k.y)*K),o=A.y-(p-d.y)*t.height),"position"===z&&"object"==typeof X._layoutVValue?(X._layoutVValue[0]=t.height,X._layoutVValue[1]=o):X._layoutVValue=[t.height,o,t.height,l.width,l.height,p]}}}},getSerializableProperties:function(){var J=ih.superClass.getSerializableProperties.call(this);return og(J,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,anchor:1,anchorElevation:1,scale:1,scaleTall:1,_width:1,_height:1,_tall:1,elevation:1}),J}});var ic=f.Edge=function(F,A){var k=this;Ig(ic,k),k.setSource(F),k.setTarget(A)};Yf("Edge",Om,{ms_edge:!0,_icon:"edge_icon",getUIClass:function(){return pf},_22Q:function(){return rt},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},canSetSourceTarget:function(S){if(S===this)return!1;if(Cl(S))return!0;for(var D,s,q,c,b,z=[this],d=-1,r=0;r>d;)if(d++,D=z[d],s=D._44I)for(s=s.getArray(),c=0,b=s.length;b>c;c++)if(q=s[c],ld(q)&&!(z.indexOf(q)>=0)){if(q===S)return!1;z.push(q),r++}return!0},setSource:function(p){var z=this;if(z._source!==p&&z.canSetSourceTarget(p)){var M=z._source;z._source=p,M&&M._16I(z),p&&p._2I(z),z._7I(),z.fp("source",M,p)}},setTarget:function(X){var e=this;if(e._target!==X&&e.canSetSourceTarget(X)){var a=e._target;e._target=X,a&&a._18I(e),X&&X._4I(e),e._7I(),e.fp("target",a,X)}},isLooped:function(){var y=this;return y._source===y._target&&Cl(y._source)&&Cl(y._target)},onPropertyChanged:function(){var X={};return["source","target","sourceAgent","targetAgent","edgeGroup","agentChange","s:edge.width","s:edge.type","s:edge.offset","s:edge.center","s:edge.points","s:edge.segments","s:edge.gap","s:edge.source.t3","s:edge.target.t3","s:edge.color","s:edge.gradient.color","s:edge.pattern","s:edge.dash","s:edge.dash.color","s:edge.dash.pattern","s:edge.dash.offset","s:edge.dash","s:edge.dash","s:repeat.uv.length","s:body.color","s:shape3d","s:shape3d.visible","s:shape3d.image","s:shape3d.smooth","s:shape3d.resolution","s:shape3d.color","s:shape3d.blend","s:shape3d.side","s:shape3d.start.angle","s:shape3d.sweep.angle","s:shape3d.top.cap","s:shape3d.top.image","s:shape3d.top.visible","s:shape3d.top.color","s:shape3d.bottom.cap","s:shape3d.bottom.image","s:shape3d.bottom.visible","s:shape3d.bottom.color","s:shape3d.from.visible","s:shape3d.from.color","s:shape3d.to.visible","s:shape3d.to.color","s:shape3d.uv.union"].forEach(function(F){X[F]=!0
}),function(j){var I=this;I._49I&&I._49I.each(function(s){s.fp("agentChange",!0,!1)}),("s:alwaysOnTop"===j.property||"s:shape3d.alwaysOnTop"===j.property)&&(j.newValue?this.setRenderLayer("top"):this.setRenderLayer(n)),X[j.property]&&(this._needChangeGeometry=!0)}}(),_7I:function(){var b,D=this,h=uf(D);D._40I!==h&&(b=this._40I,b&&b._15I(D),D._40I=h,h&&h._1I(D),D.fp("sourceAgent",b,h),ze(b,D._41I),ze(h,D._41I));var O=Rd(D);D._41I!==O&&(b=D._41I,b&&b._17I(D),D._41I=O,O&&O._3I(D),D.fp("targetAgent",b,O),ze(b,D._40I),ze(O,D._40I))},_22I:function(b){this._52I=b,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var h=this;return h._52I&&h._52I.get(0)!==h&&!h.getStyle(Kd)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var G=this,b=G._52I;return b&&!G.getStyle(Kd)&&b.size()>1&&G===b.get(0)},toggle:function(){this.beginTransaction();var C=this._52I,_=!this.s(Kd);C&&C.size()>1&&(C.each(function(W){W.s(Kd,_)}),C.getSiblings().each(function(r){r!==C&&r.each(function(k){k.fp("edgeGroup",O,r)})})),this.endTransaction()},setStyle:function(P,S){(P===Zo||"edge.segments"===P)&&(S=Gg(S)),ic.superClass.setStyle.call(this,P,S)},onStyleChanged:function(l){ic.superClass.onStyleChanged.apply(this,arguments),Ll[l]&&ze(this._41I,this._40I)},getSerializableProperties:function(){var y=ic.superClass.getSerializableProperties.call(this);return og(y,{source:1,target:1}),y}});var So=f.Group=function(){Ig(So,this)};Yf("Group",ih,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return Tp},onChildAdded:function(){So.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){So.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var x=this;if(!x._54I&&!pk){var k=x.getChildrenRect();k&&(x._53I=1,x.p(_m(x.s("group.position"),k,x.getSize())),delete x._53I)}},getChildrenRect:function(){var v,q=this;return q.eachChild(function(m){Cl(m)&&(v=$b(v,q.getChildRect(m)))}),v},getChildRect:function(E){var x;return Cl(E)&&E.s(ee)&&(zg(E)&&E.isExpanded()&&E.eachChild(function(e){x=$b(x,E.getChildRect(e))}),!x&&E.getRect&&(x=E.getRect())),x},setPosition:function(n,N){var z=this;if(!z._54I){var U;U=2===arguments.length?{x:n,y:N}:n,pk||z._53I||(z._54I=1,Cd(z._children,U.x-z._position.x,U.y-z._position.y),delete z._54I),So.superClass.setPosition.call(this,U)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(O){var J=this;if(J._57O!==O){var n=J._57O;J._57O=O,J.fp("expanded",n,J._57O),J._fireInvalidateDeep(),J._8I()}},_fireInvalidateDeep:function(){this.eachChild(function(K){zg(K)?K._fireInvalidateDeep():K.iv()})},_8I:function(){So.superClass._8I.call(this),this.eachChild(function(F){Cl(F)&&F._8I()})},onStyleChanged:function(V){So.superClass.onStyleChanged.apply(this,arguments),"group.position"===V&&this._81I()},getSerializableProperties:function(){var t=So.superClass.getSerializableProperties.call(this);return t.expanded=1,t}});var gh=f.Camera=function(){Ig(gh,this),this.s({"shadow.cast":!1,"shadow.receive":!1,shape3d:"billboard"}),this._viewMatrix=new Tc.Matrix4,this._projectMatrix=new Tc.Matrix4,this.setScale3d(1,1,-1),this.setCullingMask("main,top"),this._projectMatrixDirty=!0};gh.CubeDirectionParam=[1,0,0,0,-1,0,-1,0,0,0,-1,0,0,1,0,0,0,1,0,-1,0,0,0,-1,0,0,1,0,-1,0,0,0,-1,0,-1,0],Yf("Camera",ih,{_22Q:function(){return Camera3dUI},attachRenderTarget:function(R){this._projectMatrixDirty=!0,this.renderTarget=R},detachRenderTarget:function(){this._projectMatrixDirty=!0,this.renderTarget=null},setCullingMask:function(F){var E=F.split(",");this._cullingLayers=E,this._cullingMask=Bp(E,null,!0),this.gv&&(this._currentCullingMask=Bp(E,this.gv.getRenderLayerInfoMap(),!0))},isLayerVisible:function(Q){var N,K;return this.gv?(N=this.gv.getRenderLayerInfo(Q),K=this._currentCullingMask):(N=ar[Q],K=this._cullingMask),N&&wm(K,N.mask)},isOrtho:function(){return"ortho"===this.s("camera.type")&&!this.isCube()},isCube:function(){return this.renderTarget&&this.renderTarget.isCube()},isPerspective:function(){return!this.isOrtho()},setViewMatrix:function(){var D=new f.Math.Matrix4,T=new f.Math.Euler;return function(p){var v=this;p.isMatrix4?v._viewMatrix.copy(p):v._viewMatrix.fromArray(p),D.getInverse(v._viewMatrix),v.p3(D.getPosition().toArray()),T.set(0,0,0,v.getRotationMode(),!0).setFromRotationMatrix(D),v.r3([T.x,T.y,T.z])}}(),getViewMatrix:function(g){var C=this,T=Qn(null,null,C.r3(),C.getRotationMode(),C.p3()),Y=C._viewMatrix;return Y.fromArray(T).getInverse(Y),Y.toArray(g)},setProjectMatrix:function(Z){var d=this;Z.isMatrix4?d._projectMatrix.copy(Z):d._projectMatrix.fromArray(Z),Z=d._projectMatrix.getElements(),d.isOrtho()?d.s({"camera.near":(Z[14]+1)/Z[10],"camera.far":(Z[14]-1)/Z[10],"camera.ortho.width":2/Z[0]}):d.s({"camera.near":Z[14]/(Z[10]-1),"camera.far":Z[14]/(Z[10]+1),"camera.fovy":2*Math.atan(1/Z[5]),"camera.aspect":Z[5]/Z[0]}),d._projectMatrixDirty=!1},onPropertyChanged:function(I){var v=this;gh.superClass.onPropertyChanged.call(v,I);var L=I.property;("s:camera.near"===L||"s:camera.far"===L||"s:camera.fovy"===L||"s:camera.aspect"===L||"s:camera.ortho.width"===L)&&(v._projectMatrixDirty=!0)},getProjectMatrix:function(){var f=this;if(f._projectMatrixDirty){var b=f.gv,o=f.isCube(),L=o?1:f.s("camera.aspect")||(b?b.getAspect():null)||Q.graph3dViewAspect,z=f.s("camera.near")||(b?b.getNear():null)||Q.graph3dViewNear,r=f.s("camera.far")||(b?b.getFar():null)||Q.graph3dViewFar,s=ib();if(f.isOrtho()){var V=f.s("camera.ortho.width")||(b?b.getOrthoWidth():null)||Q.graph3dViewOrthoWidth,n=V/2,y=n/L;Dp(s,-n,n,-y,y,z,r)}else{var K=o?Math.PI/2:f.s("camera.fovy")||(b?b.getFovy():null)||Q.graph3dViewFovy;nq(s,K,L,z,r)}f._projectMatrix.fromArray(s),f._projectMatrixDirty=!1}return f._projectMatrix.toArray()},lookAt:function(i,v){var w=this.p3();return i.x?this.lookAtDirection([i.x-w[0],i.y-w[1],i.z-w[2]],v):this.lookAtDirection([i[0]-w[0],i[1]-w[1],i[2]-w[2]],v)},lookAtDirection:function(){var m=new f.Math.Matrix4,O=new f.Math.Euler,n=new f.Math.Vector3,D=new f.Math.Vector3;return function(q,U){m.lookAtDirection(n.copy(q).multiplyScalar(-1),U?D.copy(U):D.set(0,1,0)),O.set(0,0,0,this.getRotationMode(),!0).setFromRotationMatrix(m),this.r3([O.x,O.y,O.z])}}(),updateAndRender:function(o){return o.syncRenderState(),o.updateScene(),this.render(o)},getSize:function(t){var v=this.renderTarget;if(v)return[v.width,v.height];if(!t)return[0,0];var w=t.getDevicePixelRatio();return[t.getWidth()*w,t.getHeight()*w]},getWidth:function(K){return this.getSize(K)[0]},getHeight:function(G){return this.getSize(G)[1]},render:function(W){var U=this,c=W.getGL();if(!c)return!1;this._currentCullingMask=Bp(this._cullingLayers,W.getRenderLayerInfoMap(),!0);var E=U.renderTarget,G=U.getSize(W);U.gv=W,W._camera=U;var P=W._frameState.renderState.glState,I=P.color.clear.slice(0);dh(c,U.s("camera.background"));var r=W.getEye;if(W.getEye=function(){return U.p3()},W.syncRenderState(),U.isCube())for(var L=gh.CubeDirectionParam,S=0;6>S;S++)E&&E.bind(c,S),W._18Q=null,U.lookAtDirection([L[6*S+0],L[6*S+1],L[6*S+2]],[L[6*S+3],L[6*S+4],L[6*S+5]]),U.s("camera.clear")!==!1&&c.clear(16384),W.setViewport(c,0,0,G[0],G[1]),U.s("camera.onlySky")?W.renderSky():W.renderScene({renderAxis:U.s("camera.renderAxis"),renderGrid:U.s("camera.renderGrid"),renderEdit:U.s("camera.renderEdit"),renderShadowMap:U.s("camera.renderShadowMap"),renderReflector:!1}),W._18Q=null,E&&E.unbind(c);else E&&E.bind(c),W._18Q=null,U.s("camera.clear")!==!1&&c.clear(16384),W.overlappingBox.clear(),W.setViewport(c,0,0,G[0],G[1]),U.s("camera.onlySky")?W.renderSky():W.renderScene({renderAxis:U.s("camera.renderAxis"),renderGrid:U.s("camera.renderGrid"),renderEdit:U.s("camera.renderEdit"),renderShadowMap:U.s("camera.renderShadowMap")}),W._18Q=null,E&&E.unbind(c);return W.getEye=r,dh(c,I),W._camera=null,U.gv=null,!0}});var $c=f.Block=function(){Ig($c,this),this.s({"shadow.cast":!1,"shadow.receive":!1})};Yf("Block",ih,{_icon:"block_icon",_clickThroughEnabled:!1,_syncSize:!0,_scaleMode:"2d",ms_ac:["clickThroughEnabled","syncSize","scaleMode"],getUIClass:function(){return Vl},_22Q:function(){return qt},onChildAdded:function(){$c.superClass.onChildAdded.apply(this,arguments),this.updateFromChildren()},onChildRemoved:function(){$c.superClass.onChildRemoved.apply(this,arguments),this.updateFromChildren()},_getBoundingBox:function(){function M(d,p,j){J.fromArray(Xi(p));var $=p.getAnchor3d();d.push((new Ri).set(0-$.x,0-$.y,0-$.z).applyMatrix4(J).applyMatrix4(j)),d.push((new Ri).set(0-$.x,0-$.y,1-$.z).applyMatrix4(J).applyMatrix4(j)),d.push((new Ri).set(0-$.x,1-$.y,0-$.z).applyMatrix4(J).applyMatrix4(j)),d.push((new Ri).set(0-$.x,1-$.y,1-$.z).applyMatrix4(J).applyMatrix4(j)),d.push((new Ri).set(1-$.x,0-$.y,0-$.z).applyMatrix4(J).applyMatrix4(j)),d.push((new Ri).set(1-$.x,0-$.y,1-$.z).applyMatrix4(J).applyMatrix4(j)),d.push((new Ri).set(1-$.x,1-$.y,0-$.z).applyMatrix4(J).applyMatrix4(j)),d.push((new Ri).set(1-$.x,1-$.y,1-$.z).applyMatrix4(J).applyMatrix4(j))}function N(x,L){var v=(new pd).makeRotationFromEuler(this.getEuler()).setPosition((new Ri).fromArray(this.p3()));v.getInverse(v),x.forEach(function(V){Cl(V)&&M(L,V,v)})}var J=new pd;return function(e,Q){if(e instanceof ih&&(e=[e]),!e||0===e.length)return O;var Q=[];N.call(this,e,Q);var u=[1/0,1/0,1/0],I=[-1/0,-1/0,-1/0];return Q.forEach(function(h){u[0]=Math.min(h.x,u[0]),u[1]=Math.min(h.y,u[1]),u[2]=Math.min(h.z,u[2]),I[0]=Math.max(h.x,I[0]),I[1]=Math.max(h.y,I[1]),I[2]=Math.max(h.z,I[2])}),{min:u,max:I}}}(),updateFromChildren:function(){var M=this;if(!pk&&!M._updatingToChildren&&M._syncSize&&0!==M.size()&&!M._freezeSyncFromChildren){var t=this._getBoundingBox(M.toChildren(Cl));if(t){M._updatingFromChildren=1;var v=(new Ri).fromArray(this.getScale3d()),s=(new Ri).fromArray(t.min),c=(new Ri).fromArray(t.max),V=Q.blockMinSize,f=new Ri,P=c.clone().sub(s);0===P.x&&f.setX(.5),0===P.y&&f.setY(.5),0===P.z&&f.setZ(.5);var S=this._width==O||-1===this._width,j=new Ri(this.getAnchor3d()),o=v.clone().multiply((new Ri).fromArray(this.s3())),y=P.clone();0===y.x&&y.setX(V),0===y.y&&y.setY(V),0===y.z&&y.setZ(V);var X=j.clone().multiply(o),W=X.clone().multiplyScalar(-1).sub(s).divide(y).add(X.divide(y)).add(f),l=this.s("keepPosition");if(S||this._anchorChanged||this._scaleChanged||!l){!S&&l&&(j=W);var N=j.clone().multiply(P).add(s).applyEuler(this.getEuler()).add((new Ri).fromArray(this.p3()));this.p3([N.x,N.y,N.z])}else this.setAnchor3d(W.x,W.y,W.z);var r=new Ri(1,1,1).divide(v).multiply(P);this.s3(Math.abs(r.x),Math.abs(r.y),Math.abs(r.z)),delete M._updatingFromChildren}}},setPosition:function(Q,W){var h=this;if(!h._updatingToChildren){var J;J=2===arguments.length?{x:Q,y:W}:Q,pk||h._updatingFromChildren||(h._updatingToChildren=1,Cd(h._children,J.x-h._position.x,J.y-h._position.y),delete h._updatingToChildren),$c.superClass.setPosition.call(this,J)}},setSize3d:function(){this.beginTransaction(),$c.superClass.setSize3d.apply(this,arguments),this.endTransaction()},setTall:function(W){var B=this;if(!B._updatingToChildren){this.beginTransaction(),W=C(W,Q.blockMinSize);var n=B.getTall();if(W!==n&&$c.superClass.setTall.call(B,W),!pk&&!B._updatingFromChildren){B._updatingToChildren=1;var U=W/n;B._adjustChildTallOrScale(U,"size"),delete B._updatingToChildren,B.updateFromChildren()}this.endTransaction()}},setWidth:function(N){return this.setSize(N,this.getHeight())},setHeight:function(N){return this.setSize(this.getWidth(),N)},setSize:function(x,f){var _=Q.blockMinSize;x=C(x,_),f=C(f,_);var Y=this;if(!Y._updatingToChildren){2!==arguments.length&&(f=x.height,x=x.width),this.beginTransaction();var U=Y.getWidth(),m=Y.getHeight();if(x!==U&&$c.superClass.setWidth.call(Y,x),f!==m&&$c.superClass.setHeight.call(Y,f),!pk&&!Y._updatingFromChildren){Y._updatingToChildren=1;var k=x/U,g=f/m;Y._adjustChildScaleOrSize(k,g,"size"),delete Y._updatingToChildren,Y.updateFromChildren()}this.endTransaction()}},_adjustChildScaleOrSize:function(M,r,W){var z=this;if(z._syncSize){var K=z.getPosition(),Q=z.getRotation();z.eachChild(function(k){if(Cl(k)){var X=k.getPosition(),Y=k.getRotation(),y=k.getWidth(),R=k.getHeight(),w=k.getScale(),g=w.x*y,F=w.y*R;if(0!==g&&0!==F){0>M*r&&k.setRotation(-1*Y);var u=new He(Y,X.x,X.y,g,F);u.translate(-K.x,-K.y),u.rotate(-Q),Y=Tr(u.b*Math.sign(g),u.a*Math.sign(g)),u.scale(M,r);var d,m,T,j=b(Y);if(Math.abs(j)<.001?(d=G(Y),m=u.b/d,T=-u.c/d):(m=u.a/j,T=u.d/j),"scale"===W)k.setScale(m/y,T/R);else if("size"===W){var Z=m/w.x,L=T/w.y;k.setScale(hd(m)*Math.abs(w.x),hd(T)*Math.abs(w.y)),k instanceof f.Shape?(k.setWidthForce(Math.max(Math.abs(Z),1e-5)),k.setHeightForce(Math.max(Math.abs(L),1e-5))):k.setSize(Math.max(.01,Math.abs(Z)),Math.max(.01,Math.abs(L)))}u.rotate(Q),u.translate(K.x,K.y),k.setPosition(u.tx,u.ty)}}})}},_calcChangeFactor:function(g,G,Q,H){var $,J,h,W;return $=o(g),J=o(Q),h=$>J?$/J:J/$,$=o(G),J=o(H),W=$>J?$/J:J/$,C(h,W)},setElevation:function(w){var W=this;if(!W._updatingToChildren){var n=W.getElevation(),t=w-n;0!==t&&(pk||W._updatingFromChildren||(W._updatingToChildren=1,Cd(W._children,0,t,0),delete W._updatingToChildren),$c.superClass.setElevation.apply(W,arguments))}},setScaleTall:function(E){var e=this;if(!e._updatingToChildren){var $=e.getScaleTall();if(o(E)<.01&&(E=.01*(hd(E)||hd($))),"3d"===e._scaleMode){var M=e.getScale();return e.setScale3d(M.x,E,M.y),void 0}if($c.superClass.setScaleTall.call(e,E),!pk&&!e._updatingFromChildren){e._updatingToChildren=1;var F=E/$;e._adjustChildTallOrScale(F,"scale"),delete e._updatingToChildren,e._scaleChanged=1,this.updateFromChildren(),delete e._scaleChanged}}},_adjustChildTallOrScale:function(m,B){var M=this;if(M._syncSize){var v=M.getElevation();M.eachChild(function($){if(Cl($)){if("size"===B){var y=$.getTall();0>m&&$.setScaleTall(-1*$.getScaleTall()),$.setTall(Math.max(.01,Math.abs(y*m)))}else{var t=$.getScaleTall();$.setScaleTall(t*m)}$.setElevation(v+($.getElevation()-v)*m)}})}},setAnchor3d:function(){if(!this._updatingToChildren){this.beginTransaction();var x=$c.superClass.setAnchor3d.apply(this,arguments);return x&&!pk&&!this._updatingFromChildren&&this._syncSize&&(this._anchorChanged=1,this.updateFromChildren(),delete this._anchorChanged),this.endTransaction(),x}},setAnchor:function(){var G=this;if(!G._updatingToChildren){var K=G.getAnchor(),U=$c.superClass.setAnchor.apply(G,arguments);if(pk||G._updatingFromChildren||!G._syncSize)return U;G._updatingToChildren=1;var B=G.getAnchor(),O=G.getSize(),r=O.width*(K.x-B.x),x=O.height*(K.y-B.y),T=(new pd).compose(new Ri,this.getQuaternion(),new Ri(this.getScale3d())),u=new Ri(r,0,x).applyMatrix4(T);return G.eachChild(function(M){if(Cl(M)){var C=new Ri(M.p3());M.p3(C.add(u).toArray())}}),delete G._updatingToChildren,U}},setAnchorElevation:function(){var A=this;if(!A._updatingToChildren){var N=A.getAnchorElevation(),h=$c.superClass.setAnchorElevation.apply(A,arguments);if(pk||A._updatingFromChildren||!A._syncSize)return h;A._updatingToChildren=1;var E=A.getAnchorElevation(),R=A.getTall()*(N-E),J=(new pd).compose(new Ri,this.getQuaternion(),new Ri(this.getScale3d())),k=new Ri(0,R,0).applyMatrix4(J);return A.eachChild(function(f){if(Cl(f)){var a=new Ri(f.p3());f.p3(a.add(k).toArray())}}),delete A._updatingToChildren,h}},setRotation:function(s){this._updateChildrenRotation3d("rotation",s)},setRotationX:function(O){this._updateChildrenRotation3d("rotationX",O)},setRotationZ:function(l){this._updateChildrenRotation3d("rotationZ",l)},setRotation3d:function(){var r=this;if(!r._updatingToChildren){var O=r.r3();$c.superClass.setRotation3d.apply(r,arguments);var Q=r.r3();pk||r._updatingFromChildren||(r._updatingToChildren=1,r.eachChild(function(f){Cl(f)&&f.syncRotation3d(r,Q,O)}),delete r._updatingToChildren)}},_updateChildrenRotation3d:function(n,I){var A=this;if(!A._updatingToChildren){var O=A[wh(n)]();$c.superClass[ff(n)].call(A,I),pk||A._updatingFromChildren||this._updateRotationToChildren(n,I-O)}},_updateRotationToChildren:function(g,f){var L=this;L._updatingToChildren=1,L.eachChild(function(B){Cl(B)&&B._11Q(L,g,f)}),delete L._updatingToChildren},setScale:function(j,p){var y=this;if(!y._updatingToChildren){null==p&&(p=j.y,j=j.x);var s=y.getScale();if(o(j)<.01&&(j=.01*(hd(j)||hd(s.x))),o(p)<.01&&(p=.01*(hd(p)||hd(s.y))),"3d"===y._scaleMode)return y.setScale3d(j,y.getScaleTall(),p),void 0;if($c.superClass.setScale.call(y,j,p),!pk&&!y._updatingFromChildren){y._updatingToChildren=1;var z=j/s.x,Z=p/s.y;y._adjustChildScaleOrSize(z,Z,"scale"),delete y._updatingToChildren,y._scaleChanged=1,y.updateFromChildren(),delete y._scaleChanged}}},onPropertyChanged:function(t){$c.superClass.onPropertyChanged.call(this,t),"s:3d.visible"===t.property&&this._invalidateChildrenBatch()},_invalidateChildrenBatch:function(){this.eachChild(function(U){(U.s("batch")||U.s("wf.geometry")||U.s("wf.visible"))&&U.iv(),U instanceof $c&&U._invalidateChildrenBatch()})},getSerializableProperties:function(){var y=$c.superClass.getSerializableProperties.call(this);return y.clickThroughEnabled=1,y.syncSize=1,y.scaleMode=1,y},setScale3d:function(){var l=new Ri,c=new Ri,k=new Ri,C=new pd,W=new zn,s=new Ri;return function(V,M,L){var J,N=this;if(J="number"==typeof V?{x:V,y:M,z:L}:V.length?{x:V[0],y:V[1],z:V[2]}:V,"3d"!==N._scaleMode)return $c.superClass.setScale3d.apply(N,arguments),void 0;if(N._syncSize&&0!==N.size()){var H=N.getMatrix4();H.getInverse(H),$c.superClass.setScaleTall.call(N,J.y),$c.superClass.setScale.call(N,J.x,J.z);var e=N.getMatrix4();pk||N._updatingFromChildren||(N._updatingToChildren=1,N.eachChild(function(R){if(Cl(R)){if(c.fromArray(R.s3()),R instanceof f.Polyline){var K=R.getThickness();c.x=c.x||K,c.y=c.y||K,c.z=c.z||K,s.copy(R.getScale3d()).multiplyScalar(K),R.getQuaternion(W),l.copy(R.p3()),k.copy(R.getFinalScale3d()),k.x=k.x||s.x,k.y=k.y||s.y,k.z=k.z||s.z,C.compose(l,W,k)}else R.getMatrix4(C);C.premultiply(H).premultiply(e),C.decompose(l,W,k),k.divide(c),R.setQuaternion(W),R.p3(l.toArray()),R.setScale3d(k.toArray())}}),delete N._updatingToChildren,N._scaleChanged=1,N.updateFromChildren(),delete N._scaleChanged)}}}()});var Cs=f.Grid=function(){Ig(f.Grid,this)};Yf("Grid",ih,{IRotatable:!1,_icon:"grid_icon",_image:O,getUIClass:function(){return Up},setRotation:function(){},getCellRect:function(x,y){var S=this,C=S.s("grid.row.count"),i=S.s("grid.column.count");if(0>=C||0>=i||0>x||x>=C||0>y||y>=i)return O;var M,U,l,m=S.getRect(),Z=S.s("grid.row.percents"),R=S.s("grid.column.percents");if(sd(m,S,"grid.border",-1),Z&&Z._as&&(Z=Z._as),R&&R._as&&(R=R._as),Z&&Z.length===C){for(l=0,M=0;x>M;M++)l+=m.height*Z[M];m.y+=l,m.height=m.height*Z[x]}else m.height=m.height/C,m.y+=m.height*x;if(R&&R.length===i){for(U=0,M=0;y>M;M++)U+=m.width*R[M];m.x+=U,m.width=m.width*R[y]}else m.width=m.width/i,m.x+=m.width*y;return Zp(m,-S.s("grid.gap")),m}});var Rm=f.Text=function(){Ig(Rm,this),this.setSize(100,50),this.s("text","TEXT")};Yf("Text",ih,{_icon:"text_icon",_image:"__text__",getUIClass:function(){return up},setWidth:function(_){_||(_=.001),Rm.superClass.setWidth.call(this,_)},setHeight:function($){$||($=.001),Rm.superClass.setHeight.call(this,$)},toLabel:function(){return this._displayName||this._name||this.s("text")}}),ak("__text__",{width:{value:100,isSafeFunc:!0,func:function(p){return p?p._width:100}},height:{value:50,isSafeFunc:!0,func:function(U){return U?U._height:50}},comps:[{type:"text",relative:!0,rect:[0,0,1,1],text:{func:"style@text"},align:{func:"style@text.align"},vAlign:{func:"style@text.vAlign"},color:{func:"style@text.color"},font:{func:"style@text.font"},shadow:{func:"style@text.shadow"},shadowColor:{func:"style@text.shadow.color"},shadowBlur:{func:"style@text.shadow.blur"},shadowOffsetX:{func:"style@text.shadow.offset.x"},shadowOffsetY:{func:"style@text.shadow.offset.y"},scaleX:{func:"style@text.scale.x"},scaleY:{func:"style@text.scale.y"},gradient:{func:"style@text.gradient"},gradientColor:{func:"style@text.gradient.color"},gradientPack:{func:"style@text.gradient.pack"},decoration:{func:"style@text.decoration"},vertical:{func:"style@text.vertical"},verticalGap:{func:"style@text.vertical.gap"},wrap:{func:"style@text.wrap"},letterGap:{func:"style@text.letter.gap"},borderWidth:{func:"style@text.border.width"},borderColor:{func:"style@text.border.color"}}]});var um=f.Shape=function(){Ig(um,this),this._59O=new td};um.__de__=Dc,Yf("Shape",ih,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return Ac},_22Q:function(){return st},getLength:function(L){return Jr(yp(this._59O,this._58O,L,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var F=this._58O;return F?new td(F._as.slice(0)):F},setSegments:function(Q){var U=this._58O;Q=Q?Se(Q)?new td(Q.slice(0)):new td(Q._as.slice(0)):null,(U&&Q&&U._as.join(",")!==Q._as.join(",")||U!==Q)&&(this._58O=Q,this.fp("segments",U,Q))},getPoints:function(){return this._59O},toPoints:function(){var P=this._59O;return new td(P._as.slice(0))},getPointsMatrix2d:function(){var T=this,z=new Tc.Matrix2d,p=T.getPosition(),L=T.getScale(),Z=T.getRotation();return z.translate(-p.x,-p.y).scale(L.x,L.y).rotate(Z).translate(p.x,p.y),z},getPointsMatrix3d:function(){return function(){var q=this,x=new Tc.Matrix4,b=x.getElements(),Q=q.p3();cj(b,Q),cl(b,q.getFinalRotation3d(),q.getRotationMode());var f=q.getScale3d(),t=q._dynamicScale3d;return t&&(f[0]*=t[0],f[1]*=t[1],f[2]*=t[2]),Vr(b,f),cj(b,Qm(Q)),x}}(),setPoints:function(V,D){var N=this,A=N._59O;V=V?Se(V)?new td(V.slice(0)):new td(V._as.slice(0)):new td;var z,W,b,L,M,v;D&&(z=N.getPosition(),v=new He(N.getRotation(),0,0,N.getScale().x,N.getScale().y)),(A&&V&&A._as.join(",")!==V._as.join(",")||A!==V)&&(N._59O=V,N.fs(),N.fp("points",A,V)),D&&(W=N.getPosition(),b=W.x-z.x,L=W.y-z.y,M=v.tf(b,L),N.setPosition(W.x-b+M.x,W.y-L+M.y))},setPoints3d:function(y,a){var J=new Ri(this.p3()),P=this.getPointsMatrix3d();if(P.setPosition(new Ri),he.superClass.setPoints.call(this,y),a){var j=new Ri(this.p3()),S=j.clone().sub(J).applyMatrix4(P);J.add(S),this.p3(J.x,J.y,J.z)}},addPoint:function(E,y,o){var j=this.toPoints();j.add(E,y),this.setPoints(j,o)},setPoint:function(x,z,g){var m=this.toPoints();m.set(x,z),this.setPoints(m,g)},removePointAt:function(m){var u=this.toPoints();u.removeAt(m),this.setPoints(u)},setWidthForce:function(k){var L=this;if(!L._55I&&!pk&&L.getWidth()){L._55I=1;var N=L._position.x,z=k/L.getWidth(),Q=L.toPoints(),P=new td;1!==z&&(Q.each(function(S){P.add({x:(S.x-N)*z+N,y:S.y,e:S.e})}),L.setPoints(P),ac(L,[z,0,0,1,N*(1-z),0]),L.fs()),delete L._55I}um.superClass.setWidth.call(L,k)},setWidth:function(F){return this.setWidthForce(xk>F?xk:F)},setHeightForce:function(N){var i=this;if(!i._55I&&!pk&&i.getHeight()){i._55I=1;var z=i._position.y,O=N/i.getHeight(),M=i.toPoints(),x=new td;1!==O&&(M.each(function(n){x.add({x:n.x,y:(n.y-z)*O+z,e:n.e})}),i.setPoints(x),ac(i,[1,0,0,O,0,z*(1-O)]),i.fs()),delete i._55I}um.superClass.setHeight.call(i,N)},setHeight:function(l){return this.setHeightForce(xk>l?xk:l)},setAnchorElevation:function(l){var a=this;a._55I=!0;var v=a._updatingAnchor3d,M=!pk&&!v;if(M){var h,p=l,o=a.getAnchorElevation(),e=a.getTall();h=e*(o-p),0!==h&&a.shiftPointsElevation(h)}var U=um.superClass.setAnchorElevation.apply(a,arguments);return v||delete a._55I,U},getShapeElevation:function(){var X=this,t=X._54O;return t-(X.getTall()||0)*(X._anchorElevation-.5)},setAnchor3d:function(a,P,U,N){var H,$=this;if("number"==typeof a?H={x:a,y:P,z:U}:(H=a.length?{x:a[0],y:a[1],z:a[2]}:a,N=P),$._55I=!0,$._updatingAnchor3d=!0,$.beginTransaction(),!pk){var V=$.getAnchor3d(),g=$.getSize(),Z=$.getTall(),e=g.width*(V.x-H.x),k=g.height*(V.z-H.z),F=Z*(V.y-H.y);N||$.shiftPoints(e,k,F);var s=$.p3()}var v=um.superClass.setAnchor3d.apply($,arguments);if(!pk&&N){var y=$.p3();$.shiftPoints(y[0]-s[0]+e,y[2]-s[2]+k,y[1]-s[1]+F)}return $.endTransaction(),delete $._updatingAnchor3d,delete $._55I,v},setAnchor:function(E,f,j){var A=this;A._55I=!0;var b=A._updatingAnchor3d,B=!pk&&!b;if(B){var W,H,Q;"number"==typeof E?Q={x:E,y:f}:(Q=E.length?{x:E[0],y:E[1]}:E,j=f);var v=A.getAnchor(),G=A.getSize();W=G.width*(v.x-Q.x),H=G.height*(v.y-Q.y),j||A.shiftPoints(W,H);var z=A.getPosition()}var J=um.superClass.setAnchor.apply(A,arguments);if(B){var h=A.getPosition();j&&A.shiftPoints(h.x-z.x+W,h.y-z.y+H)}return b||delete A._55I,J},shiftPoints:function(k,T,V){if(k||T||V){var d=this,o=d.getElevation()||0,D=d.toPoints(),G=new td;D.each(function(u){var Y=u.e;V&&(Y=(Y==O?o:Y)+V),G.add({x:u.x+k,y:u.y+T,e:Y})}),d.setPoints(G),d.fs()}},shiftPointsElevation:function(W){return this.shiftPoints(0,0,W)},setPosition:function(W,l){var o,S=this;if(!S._28Q){if(S._28Q=1,!S._55I&&!pk){o=2===arguments.length?{x:W,y:l}:W;var T=o.x-S._position.x,X=o.y-S._position.y;if(0===T&&0===X)return delete S._28Q,void 0;S._55I=1,S.shiftPoints(T,X),ac(S,[1,0,0,1,T,X]),delete S._55I}um.superClass.setPosition.apply(S,arguments),delete S._28Q}},fs:function(){this.fireShapeChange()},_70I:function(){var $=this;if(2!==$._59O.size())return!1;var X=$._58O;return X?2===X.size()&&1===X.get(0)&&2===X.get(1)?!0:!1:!0},fireShapeChange:function(){var V=this;if(!V._55I&&!pk){var l=pe(V._59O);l&&(V._55I=1,V.setRect(l),delete V._55I)}V.fp(En,!1,!0)},getSerializableProperties:function(){var X=um.superClass.getSerializableProperties.call(this);return X.segments=1,X.points=1,X.thickness=1,X.closePath=1,X}});var qj=f.Points=function(){Ig(qj,this)};Yf("Points",ih,{_59O:[],_colors:[],_sizes:[],_uvoffsets:[],_22Q:function(){return tt},getPoints:function(){return this._59O},setPoints:function(W){var Z=this._59O;W=W?W.slice(0):[];var x=W[0];if(fe(x)){var w=W;W=[];for(var P=0,z=w.length;z>P;P+=3)W.push({x:w[P],e:w[P+1],y:w[P+2]})}this._59O=W,this._pointsDirty=!0,this.fp("points",Z,this._59O)},setPoint:function(h,R){var V=this._59O.slice(0);V[h]=R,this.setPoints(V)},addPoint:function(R){this.setPoint(this._59O.length,R)},getColors:function(){return this._colors},setColors:function(R){var M=this._colors;R=R?R.slice(0):[],this._colors=R,this._colorsDirty=!0,this.fp("colors",M,R)},setPointColor:function(P,j){var C=this._colors.slice(0);C[P]=j,this.setColors(C)},getSizes:function(){return this._sizes},setSizes:function($){var n=this._sizes;$=$?$.slice(0):[],this._sizes=$,this._sizesDirty=!0,this.fp("sizes",n,this._sizes)},setPointSize:function(J,p){var Y=this._sizes.slice(0);Y[J]=p,this.setSizes(Y)},getUvoffsets:function(){return this._uvoffsets},setUvoffsets:function(F){var t=this._uvoffsets;F=F?F.slice(0):[],this._uvoffsets=F,this._offsetsDirty=!0,this.fp("uvoffsets",t,this._uvoffsets)},setPointUvoffset:function(y,h,Y){var E;"object"==typeof h?(E=h[0],Y=h[1]):E=h;var P=this._uvoffsets.slice(0);P[2*y+0]=E,P[2*y+1]=Y,this.setUvoffsets(P)},getPointInfo:function(N){var y=this.getPoints();if(!y||y[N]==O)return O;var h=y[N],j=[h.x,h.e,h.y],$=this.mat||Xi(this),L=[j[0],j[1],j[2]];Qr(L,$);var f=this.getColors(),Q=f[N]||this.s("points.color"),u=this.getSizes(),m=u[N];return{size:m==O?this.s("points.size"):m,color:Q,local:j,world:L}},getSerializableProperties:function(){var t=qj.superClass.getSerializableProperties.call(this);return t.points=1,t.colors=1,t.sizes=1,t.uvoffsets=1,t},onPropertyChanged:function(P){qj.superClass.onPropertyChanged.call(this,P);var o=P.property;"s:points.color"===o?this._colorsDirty=!0:"s:points.size"===o?this._sizesDirty=!0:"s:points.model"===o&&(this._modelDirty=!0)},getWidth:function(){var F=this;if(F._width>=0)return F._width;var c=F.getStyle("points.model");if(c){var H=Bj(c);if(H&&H.rawS3)return H.rawS3[0]}return 1},getHeight:function(){var _=this;if(_._height>=0)return _._height;var R=_.getStyle("points.model");if(R){var L=Bj(R);if(L&&L.rawS3)return L.rawS3[2]}return 1},getTall:function(){var N=this;if(N._tall>=0)return N._tall;var i=N.getStyle("points.model");if(i){var X=Bj(i);if(X&&X.rawS3)return X.rawS3[1]}return 1}});var he=f.Polyline=function(){Ig(he,this),this.s({"shape.background":null,"shape.border.width":2})};Yf("Polyline",um,{_icon:"polyline_icon",_22Q:function(){return wt},getUIClass:function(){return uh},setClosePath:function(){},setTall:function(d){var p=this;if(p.beginTransaction(),!p._55I&&!p._24Q&&!pk&&p.getTall()){p._24Q=1;var t=p._54O,h=d/p.getTall();if(1!==h){var z=p.toPoints(),x=new td;z.each(function(T){x.add({x:T.x,y:T.y,e:T.e==O?T.e:(T.e-t)*h+t})}),p.setPoints(x),p.fs()}delete p._24Q}he.superClass.setTall.call(p,d),p.endTransaction()},setElevation:function(g){var f=this;if(f.beginTransaction(),!f._55I&&!f._24Q&&!pk){f._24Q=1;var d=g-f._54O;0!==d&&f.shiftPointsElevation(d),delete f._24Q}he.superClass.setElevation.apply(f,arguments),f.endTransaction()},fireShapeChange:function(){var V=this,p=V._59O;if(!V._55I&&!V._24Q&&!pk){var M=p.size();if(M){var X=1,R=p.get(0),b=V._54O;R.e==O&&(R.e=b);for(var c=R.e,a=0;M>X;X++){R=p.get(X),R.e==O&&(R.e=b);var K=g(c,R.e),Y=C(c+a,R.e);c=K,a=Y-K}V._24Q=1,V.setTall(a),V.setElevation(c+a*V._anchorElevation),delete V._24Q}}he.superClass.fireShapeChange.apply(V,arguments)},onPropertyChanged:function(){var y={};return["points","segments","thickness","position","elevation","rotation","rotationX","rotationZ","rotationMode","scale","scaleTall","s:shape.border.color","s:shape.border.gradient.color","s:shape.border.pattern","s:shape.dash","s:shape.dash.color","s:shape.dash.pattern","s:shape.dash.offset","s:shape.dash","s:shape.dash","s:3d.clip.direction","s:repeat.uv.length","s:body.color","s:shape3d","s:shape3d.visible","s:shape3d.image","s:shape3d.smooth","s:shape3d.resolution","s:shape3d.color","s:shape3d.blend","s:shape3d.side","s:shape3d.start.angle","s:shape3d.sweep.angle","s:shape3d.top.cap","s:shape3d.top.image","s:shape3d.top.visible","s:shape3d.top.color","s:shape3d.bottom.cap","s:shape3d.bottom.image","s:shape3d.bottom.visible","s:shape3d.bottom.color","s:shape3d.from.visible","s:shape3d.from.color","s:shape3d.to.visible","s:shape3d.to.color","s:shape3d.uv.union"].forEach(function(H){y[H]=!0}),function(Y){he.superClass.onPropertyChanged.call(this,Y),y[Y.property]&&(this._needChangeGeometry=!0)}}()});var gp=f.SubGraph=function(){Ig(gp,this)};Yf("SubGraph",ih,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){gp.superClass._8I.call(this),this.eachChild(function(i){Cl(i)&&i._8I()})}}),Q.loadingRefGraph=0;var _f=f.RefGraph=function(){Ig(_f,this)};Yf("RefGraph",$c,{_icon:"refGraph_icon",getRef:function(){return this._ref},setRef:function(V){var B=this._ref;this._ref=V,this.fp("ref",B,V),this.updateRef()},_21I:function(){_f.superClass._21I.apply(this,arguments),this.updateRef()},updateRef:function(){var j=this;if(Q.loadingRefGraph++,j.clearChildrenFromDataModel(),Q.loadingRefGraph--,j._ref&&j._dataModel){j._xhrLoadHandler&&(j._xhrLoadHandler.cancel=!0);var z=pk,Y=j._xhrLoadHandler=function(y){if(y&&j._dataModel){Q.loadingRefGraph++;var R=j._pendingUpdateInfo={needToRestore:z};z&&(R.p3=j.p3(),R.s3=j.s3(),R.r3=j.r3(),R.anchor3d=j.getAnchor3d(),R.scale3d=j.getScale3d()),j.r3(0,0,0),j.setScale3d(1,1,1),j.setAnchor3d(.5,.5,.5),j.p3(0,0,0);var W=Q.parse(y),s=j._dataModel.deserialize(W,j,{justDatas:!0});s.each(function(o){o._refGraph=j}),j.checkPendingUpdateInfo(),Q.loadingRefGraph--,Q.handleRefGraphLoaded(j,s,W)}};Y.xhrLoadCalled=!1,Q.load(j._ref,function(w){Y.cancel||(Y.xhrLoadCalled?Y(w):Ad(function(){Y(w)}))}),Y.xhrLoadCalled=!0}},checkPendingUpdateInfo:function(){var J=this,X=J._pendingUpdateInfo;if(!X)return J.onPendingUpdated&&(Q.loadingRefGraph++,J.onPendingUpdated(),Q.loadingRefGraph--),void 0;var E=!0;this.eachChild(function(C){(C._pendingCheckImageJSON||C._pendingUpdateInfo)&&(E=!1)}),E&&(Q.loadingRefGraph++,J._pendingUpdateInfo=null,J.updateFromChildren(),X.needToRestore&&(J.setAnchor3d(X.anchor3d),J.setScale3d(X.scale3d),J.r3(X.r3),J.p3(X.p3)),this.getParent()instanceof _f&&this.getParent().checkPendingUpdateInfo(),J.onPendingUpdated&&J.onPendingUpdated(),Q.loadingRefGraph--)},getSerializableProperties:function(){var n=_f.superClass.getSerializableProperties.call(this);
return n.ref=1,n}}),f.EdgeGroup=function(P,t){this._70O=P,this._siblings=t;for(var y,C,V=0,i=P.size(),E=A[Kd];i>V;V++)if(y=P.get(V).getStyle(Kd,!1),y!=O){E=y;break}E==O&&(E=!0);var z=Q.edgeGroupAgentFunc;for(z&&(C=z(P),C&&C!==P.get(0)&&(P.remove(C),P.add(C,0))),V=0;i>V;V++)P.get(V).s(Kd,E)},Yf("EdgeGroup",y,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(Y){return this._70O.get(Y)},indexOf:function($){return this._70O.indexOf($)},each:function(C,k){this._70O.each(C,k)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(Z,g){this._siblings.each(function(e){e._70O.each(Z,g)})}});var Hk=function(A,L,$){var w=vf[A]={type:A,action:L};if($)for(var y in $)w[y]=$[y]};og(Q,{setConnectAction:Hk,getConnectAction:function(v,d){if(!d){if(!v)return null;d=v.getCurrentConnectActionType()}return vf[d]},doConnectAction:function(H,L,E,k){k=k||H.getCurrentConnectActionType();var B=vf[k];if(!B)return!1;var N=B.action;return N?(L instanceof zo.Group?H.sm().getSelection().each(function(M){N.call(null,H,M,E)}):N.call(null,H,L,E),!0):!1},doDeleteConnectionAction:function(n,e,N){N=N||n.getCurrentConnectActionType();var g=vf[N];if(!g||!g.delete)return!1;var M=g.delete.action;return M?(e instanceof zo.Group?n.sm().getSelection().each(function(l){M.call(null,n,l)}):M.call(null,n,e),!0):!1}});var ml=f.JSONSerializer=function(w,p){this.dm=this._dataModel=w,this._hierarchical=Q.forceHierarchicalSerialization?!0:p==O?w.isHierarchicalRendering():p};Yf("JSONSerializer",y,{ms_ac:["hierarchical"],serialize:function(A){return Q.stringify(this.toJSON(),A)},toJSON:function(){var G,I=this,m=I.dm,U=m.getRoots(),B=I.json={v:Q.getVersion(),p:{},a:{},d:[]},g=m.getSerializableAttrs();(G=m.getInit())&&(B.init=G),(G=m.getName())&&(B.p.name=G),(G=m.getBackground())&&(B.p.background=G),(G=m.getLayers())&&(B.p.layers=G),(G=m.getEnvmap())&&(B.p.envmap=G),(G=m.getEnvmapType())&&(B.p.envmapType=G),B.p.autoAdjustIndex=m.isAutoAdjustIndex(),B.p.hierarchicalRendering=m.isHierarchicalRendering();for(var A in g){var v=m.a(A);v!==n&&I[fs](A,v,B.a)}return ck(B.a)&&delete B.a,I._hierarchical?U.each(I.serializeData,this):m.each(function(E){I.serializeData(E)}),m.fireSerializeEvent({type:"serialize",json:B}),m.getPostProcessingData()&&(B.p.postProcessingData=m.getPostProcessingData()),B},isSerializable:function(){return!0},getProperties:function(M){return M.getSerializableProperties()},getStyles:function(f){return f.getSerializableStyles()},getAttrs:function(o){return o.getSerializableAttrs()},serializeData:function(i){var j=this;if(j.isSerializable(i)&&!i._refGraph){var k,W,V,N,K,b,U=_b(i.getClassName())||i.getClass(),S=new U,u={c:i.getClassName(),i:i.getId(),p:{},s:{},a:{}};j.json.d.push(u),k=j.getProperties(i);for(W in k)if(/^_/.test(W)){if(V=i[W],!("_width"!==W&&"_height"!==W||V!=O&&-1!==V)){if(K==n){var e;b=(i.s("layout.h")||i.s("layout.v"))&&i.getHost()||i instanceof f.Node&&(e=i.getParent())&&e instanceof f.Block||i.s("fullscreen"),K=i.hasInheritedSize()}b&&K&&(V=i[W]="_width"===W?i.getWidth():i.getHeight())}V!==S[W]&&j[fs](W.substr(1),V,u.p)}else N=wh(W),i[N]&&(V=i[N](),V!==S[N]()&&j[fs](W,V,u.p));k=j.getStyles(i);for(W in k)V=i.s(W),V!==S.s(W)&&j[fs](W,V,u.s);k=j.getAttrs(i);for(W in k)V=i.a(W),V!==S.a(W)&&j[fs](W,V,u.a);ck(u.p)&&delete u.p,ck(u.s)&&delete u.s,ck(u.a)&&delete u.a}j._hierarchical&&i.getChildren().each(j.serializeData,j)},serializeValue:function(P,t,S){Sb(t)?t={__a:t._as}:t instanceof Om?t={__i:t.getId()}:t instanceof gk&&(t={__dm:t.serialize(0)}),S[P]=t},deserialize:function(g,h,C){var k=this;return Vp(g)&&/.json$/.test(g)?(Q.xhrLoad(g,function(o){k.deserializeImpl(o,h,C)}),void 0):k.deserializeImpl(g,h,C)},deserializeImpl:function(E,h,a){var b=this,I=b.dm;I.setDeserializing(!0),a=vd(a)?{setId:a}:Le(a)?{finishFunc:a}:a||{},E=b.json=Vp(E)?Q.parse(E):E,!a.justDatas&&E.a&&E.a.onPreDeserialize&&!a.disableOnPreDeserialize&&E.a.onPreDeserialize(E,I,a.view),I.beginTransaction(),pk++,b._82I={};var r=new td,A=new td,F=0,u=E.d.length;if(a.justDatas||(!a.disableInit&&Le(E.init)&&E.init(I),I.setInit(E.init)),!a.justDatas){for(var Y in E.a)I.a(Y,b[Er](E.a[Y]));for(var m in E.p)I[ff(m)](E.p[m])}for(;u>F;F++){var G=E.d[F],B=_b(G.c),C=new B,X=G.i;a.setId&&X!=O&&(C._id=X),b._82I[X]=C,r.add(C),A.add(G)}for(F=0;u>F;F++)b.deserializeData(r.get(F),A.get(F));return r.each(function(b){h&&!b.getParent()&&b.setParent(h),I.add(b)}),a.__innerHandler__&&a.__innerHandler__(E,I,a.view,r),I.fireSerializeEvent({type:"deserialize",json:E}),pk--,I.endTransaction(),!a.justDatas&&E.a&&E.a.onPostDeserialize&&!a.disableOnPostDeserialize&&E.a.onPostDeserialize(E,I,a.view,r),a.finishFunc&&a.finishFunc(E,I,a.view,r),I.setDeserializing(!1),r},deserializeData:function(a,h){for(var q in h.p)a[ff(q)](this[Er](h.p[q]));for(q in h.s)a.s(q,this[Er](h.s[q]));for(q in h.a)a.a(q,this[Er](h.a[q]))},deserializeValue:function(T){if(Yo(T)){var t=T.__i;if(t!=O)return this._82I[t];if(t=T.__dm,t!=O){var v=new f.DataModel;return v.deserialize(t),v}if(t=T.__a,Se(t))return new td(t)}return T}}),og(gk,{serialize:function(v,G){return new ml(this,G).serialize(v)},toJSON:function(e){return new ml(this,e).toJSON()},deserialize:function(q,h,C){return new ml(this).deserialize(q,h,C)}});var ws=f.OverlappingBox=function(V){this.gv=V,this.boxes={}};Yf("OverlappingBox",y,{clear:function(){var V,o,K=this.boxes;for(V in K)o=K[V],o.length=0},isOverlapping:function(c,i){var H,G,K=this,X=K.boxes,o=X[c];o?(H=o.rects,G=o.length):o=X[c]={rects:H=[],length:G=0};var z,v,i;for(z=0;G>z;z++)if(v=H[z],v.x<i.x+i.w&&v.x+v.w>i.x&&v.y<i.y+i.h&&v.h+v.y>i.y)return!0;return H.length<=G?(H.push(i),o.length++):H[o.length++]=i,!1}}),og(Q,{fetch:function(Q,R){R=R||{},Q.open(R.method||"GET",R.url||"",!(null!=R.sync?R.sync:!1)),"json"===R.dataType&&Q.setRequestHeader("Content-Type","application/json"),R.responseType&&(Q.responseType=R.responseType),Q.send(R.data)},convertImageSrc:function(A,k){k&&"function"==typeof k||(k=function(){}),k(A)}});var Wh=f.Request=function(){};Yf("Request",y,{_mimeType:n,getXhr:function(){return this._xhr||(this._xhr=new XMLHttpRequest,this.overrideMimeType("text/plain")),this._xhr},send:function(z){var m=this.getXhr();z.mimeType&&this.overrideMimeType(z.mimeType),m.onload=this.onload,m.onerror=this.onerror,Q.fetch(m,z)},onload:function(){},onerror:function(){},getResponseType:function(){return this.getXhr().responseType},setOverrideMimeType:function(s){this.overrideMimeType(s)},getMimeType:function(){return this._mimeType},overrideMimeType:function(X){this.getXhr().overrideMimeType(this._mimeType=X)},getResponseHeader:function(I){return this.getXhr().getResponseHeader(I)},getResponseText:function(){var u=this.getXhr();return u.response||u.responseText},getStatus:function(){return this.getXhr().status}});var Ob={},Og={},Cp={},us={},Xn=function(M){for(var q in Cp){var N=Cp[q];N&&!M["_loading_"+q+"_"]&&(us[q][M["_loading_"+q+"_"]=jp()]=M)}},_q=function(i,t){var e=Cp[i]={},J=Ob[i]={},s=us[i]={},W=i.charAt(0).toUpperCase()+i.substr(1);t=t||ui;var U=t.handleLoaded||rc,_=function(P,Y){var t;if((t=U(P,Y))&&(Y=t),J[P]=Y,delete e[P],ck(e)&&s){for(var l in s){var c=s[l];c.invalidateAll&&c.invalidateAll(n,i+"Loaded",P),c.redraw&&c.redraw(),c.iv(),delete c["_loading_"+i+"_"]}return s=us[i]={},void 0}if(Y&&!ck(s))for(var l in s){var c=s[l];c.invalidateAll&&c.invalidateAll(n,i+"Loading",P),c.redraw&&c.redraw(),c.iv()}},X="load"+W+"ByURL";if(Og[X]=function(M,w){if(w=w||M,w&&!e[M]){var $=new Wh;e[M]={request:$,url:w};var k=!1;if("string"==typeof w&&(k=cg.test(w),w=Q.beforeLoadURL(w,M)),w.data){var I=w.data;k&&I&&(I=Q.parse(I)),_(M,I),I&&Q["handle"+W+"Loaded"](M,I)}else{$.onload=function(){if(200===this.status||0===this.status){var l=$.getResponseText();k&&(l=Q.parse(l)),_(M,l),Q["handle"+W+"Loaded"](M,l)}else _(M,O)},$.onerror=function(){_(M,O)};var A={};if(A.url=encodeURI(w),A.sync=!1,t.loadingParam)for(var X in t.loadingParam)A[X]=t.loadingParam[X];$.send(A)}}},Q["get"+W]=function(w){var Y=J[w];return Y===n&&Og[X](w),Y},Q["get"+W+"Map"]=function(){return J},"shader"==i){var P=function($,i){i&&null!==i.data&&(J[$]=null,Fo[$]=null),Og[X]($,i)};Q.setShader=function(b,R,K){if(Vp(R)&&R.match(/\/\/ *FS/i))Fo[b]=null,J[b]=R;else if(Vp(R)&&Vp(K)){var L,a,l=0,Y=function(){l>0||(e[b]=null,L&&a?P(b,{data:L+"\n// FS\n"+a}):P(b,{data:null}))};R.match(/void\s+main/i)?L=R:(l++,Q.xhrLoad(R,function(a){L=a,l--,Y()})),K.match(/void\s+main/i)?a=K:(l++,Q.xhrLoad(K,function(h){a=h,l--,Y()})),l&&(e[b]={}),Y()}else P(b,R)}}else Q["set"+W]=function(d,S){Vp(S)&&S.substr(0,12)==eq&&(S=Q.parse(S)),Le(S)||Yo(S)?J[d]=S:Og[X](d)};Q["handle"+W+"Loaded"]=function(){}};Q.registerResourceLoader=function(L,t){_q(L,t)},mo.GraphView=function(M){var U=this;U._24I={},U._34I=new td,U.enableDirtyRect(),U._25I={},U._56I={},U._view=Kj(1,U),U._canvas=qb(U._view),U.dm(M?M:new gk),this._coreInteractor=new Pc(this),U.setEditable(!1),U.setScrollBarVisible(Q.graphViewScrollBarVisible),U._initView()},ni("GraphView",y,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:[om,$i,zk,Ve,"resettable","editInteractor",Bo,"zoomable","pannable","rectSelectable","autoScrollZone",Zd,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","anchorEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_zoomable:Q.graphViewZoomable,_resettable:Q.graphViewResettable,_pannable:Q.graphViewPannable,_rectSelectable:Q.graphViewRectSelectable,_autoScrollZone:Q.graphViewAutoScrollZone,_rectSelectBackground:Q.graphViewRectSelectBackground,_rectSelectBorderColor:Q.graphViewRectSelectBorderColor,_editPointSize:Q.graphViewEditPointSize,_editPointBorderColor:Q.graphViewEditPointBorderColor,_editPointBackground:Q.graphViewEditPointBackground,_scrollBarColor:sk,_scrollBarSize:fj,_autoHideScrollBar:Bm,_autoMakeVisible:jg,_currentActionType:null,getCoreInteractor:function(){return this._coreInteractor},getLayers:function(){return this._dataModel.getLayers()},setLayers:function(Z){this._dataModel.setLayers(Z)},setEditable:function(f){var K=this,H=K.__interactorMap__;if(!H){var B=mo.XEditInteractor;H=K.__interactorMap__={scrollBar:new Bq(K),select:new Jc(K),edit:B?new B(K):new xr(K),text:new kf(K),move:new sm(K),"default":new Ak(K),touch:new ss(K,{editable:!1})}}f?(K._uieditable=!0,K.setInteractors([H.scrollBar,H.select,H.text,H.edit,H.move,H.default,H.touch])):(K._uieditable=!1,K.setInteractors([H.scrollBar,H.select,H.move,H.default,H.touch]))},getCanvas:function(){return this._canvas},_33I:function(v){var a=v.getUIClass();return a?new a(this,v):O},getDataUI:function(k){var Y=this,H=Y._25I[k._id];return H===n&&(H=Y._33I(k),Y._25I[k._id]=H),H},getNodeRect:function(Z){return Q.getNodeRect(this,Z)},getFullscreenDatas:function(){return this._dataModel.getFullscreenDatas()},getEdgeInfo:function(x){var r=this.getDataUI(x);return r?(r._79o(),r._78o):null},getEdgeSourcePosition:function(w){var f=this,M=f.getDataUI(w),s=M.s,J=M._data._40I;return Hq(f,J,s("edge.source.position"),s("edge.source.offset.x"),s("edge.source.offset.y"),s("edge.source.anchor.x"),s("edge.source.anchor.y"))},getEdgeTargetPosition:function(Q){var $=this,j=$.getDataUI(Q),B=j.s,S=j._data._41I;return Hq($,S,B("edge.target.position"),B("edge.target.offset.x"),B("edge.target.offset.y"),B("edge.target.anchor.x"),B("edge.target.anchor.y"))},invalidateAll:function(Y){var p=this;if(Y){for(var $ in p._25I){var w=p._25I[$];w&&w.dispose()}p._25I={},p._56I={},p._24I={},p._34I.clear(),p.redraw()}else p.dm().each(function(K){p.invalidateData(K)})},invalidateSelection:function(){var w=this;w.sm().each(function(X){w.invalidateData(X)})},invalidateData:function(d){var X=this;X._24I[d._id]=d,X._21Q(d),X.iv()},_21Q:function(Q){var S=this,k=S._24I;if(ld(Q)&&nj[Q.s(Oi)]){var B=Q.getSourceAgent();B&&B.getAgentEdges().each(function(i){k[i._id]=i}),B=Q.getTargetAgent(),B&&B.getAgentEdges().each(function(F){k[F._id]=F}),S.iv()}},redraw:function(A){var I=this;I._32I||(A?I._34I.add(A):(I._32I=1,I._34I.clear()),I.iv())},each:function(G,r){var H,C,k,N=0,B=this.getLayers(),v=this._dataModel,J=v._datas._as,I=J.length;if(B){var b,U={};v.isHierarchicalRendering()&&v.eachByHierarchical(function(r){k=r._layer,b=U[k],b||(b=U[k]=[]),b.push(r)});for(var j=B.length;j>N;N++)if(k=B[N],Yo(k)&&(k=k.name),v.isHierarchicalRendering()){b=U[k];var i,H,d;if(b&&(i=b.length)>0)for(var t=0;i>t;t++)if(H=b[t],d=r?G.call(r,H):G(H),d===!1)return}else for(var t=0;I>t;t++)if(H=J[t],H._layer===k&&(C=r?G.call(r,H):G(H),C===!1))return}else if(v.isHierarchicalRendering())this._dataModel.eachByHierarchical(G,null,r);else for(;I>N;N++)if(H=J[N],C=r?G.call(r,H):G(H),C===!1)return},reverseEach:function(d,$){var s,h,r,n,v=this._dataModel,e=v._layers,D=v._datas._as,H=D.length;if(e){var N,y={};for(v.isHierarchicalRendering()&&v.reverseEachByHierarchical(function(O){n=O._layer,N=y[n],N||(N=y[n]=[]),N.push(O)}),s=e.length-1;s>=0;s--)if(n=e[s],Yo(n)&&(n=n.name),v.isHierarchicalRendering()){N=y[n];var O,h,A;if(N&&(O=N.length)>0)for(var T=0;O>T;T++)if(h=N[T],A=$?d.call($,h):d(h),A===!1)return}else for(var T=H-1;T>=0;T--)if(h=D[T],h._layer===n&&(r=$?d.call($,h):d(h),r===!1))return}else if(v.isHierarchicalRendering())v.reverseEachByHierarchical(d,null,$);else for(s=H-1;s>=0;s--)if(h=D[s],r=$?d.call($,h):d(h),r===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var o=this,w=o._84I;if(!w){var e=this.dm().a("width"),W=this.dm().a("height");e>0&&W>0?o._84I={x:0,y:0,width:e,height:W}:(o.each(function(z){o.isVisible(z)&&(w=$b(w,o.getDataUIBounds(z)))}),o._84I=w?w:rm)}return o._84I},getScrollRect:function(){return $b(this.getContentRect(),this._29I)},makeCenter:function(o,y,x){var E=this;if(!E.getWidth()||!E.getHeight())return x||Ad(E.makeCenter,E,[o,y,!0],500),void 0;E.makeVisible(o),E.validate();var $=E.getDataUIBounds(o);if($){var m=E.getWidth(),C=E.getHeight(),g=$.x+$.width/2,G=$.y+$.height/2,J=-g*E._zoom+m/2,Q=-G*E._zoom+C/2;E.setTranslate(J,Q,y)}},fitData:function(w,b,e,p,$){var V=this;if(!V.getWidth()||!V.getHeight())return $||Ad(V.fitData,V,[w,b,e,p,!0],500),void 0;var P=function(){V.makeVisible(w),V.validate();var Q=V.getDataUIBounds(w);Q&&(Q=rj(Q),Zp(Q,e==O?20:e),V.fitRect(Q,b,p))};b?Q.callWhenLoaded(P):P()},fitContent:function(b,C,y,T){var q=this;if(!q.getWidth()||!q.getHeight())return T||Ad(q.fitContent,q,[b,C,y,!0],500),void 0;var H=function(){q.validate();var B=rj(q.getContentRect());Zp(B,C==O?20:C),q.fitRect(B,b,y)};b?Q.callWhenLoaded(H):H()},fitRect:function(O,T,o){var w=this,E=w.getWidth(),v=w.getHeight(),b=O.x+O.width/2,d=O.y+O.height/2,y=g(E/O.width,v/O.height),j=w._zoom,V=-b*j+E/2,J=-d*j+v/2;0===y||isNaN(y)||(o&&(y=g(1,y)),T?(w._65I&&(delete w._65I.finishFunc,w._65I.stop(!0)),w._14o&&w._14o.stop(!0),w.setTranslate(V,J,{finishFunc:function(){w.setZoom(y,T)}})):(w.setTranslate(V,J),w.setZoom(y)))},fitSelection:function(t,H,F){var K=this,m=K.sm(),T=null;m.size()&&(m.each(function(k){T=$b(K.getDataUIBounds(k),T)}),t&&Zp(T,t),K.fitRect(T,H,F))},toCanvas:function(z,J,n){J=J||this._zoom,this.validateImpl();var m=this,M=m.getContentRect();n&&Zp(M,n),M.width||(M.width=10),M.height||(M.height=10);var V=qb(),Q=M.x*J,r=M.y*J,R=Math.ceil(M.width*J),l=Math.ceil(M.height*J);Wk(V,R,l,1);var G=sc(V);z=z||this._dataModel.getBackground(),z&&Kl(G,0,0,R,l,z),on(G,-Q,-r),G.scale(J,J);var y=this._zoom;return this._zoom=J,m._42(G),this._zoom=y,G.restore(),V},toDataURL:function(s,R,n,W){return this.toCanvas(s,n,W).toDataURL(R||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(h,P){var r=this,A=r.dm().getBackground();if(A){var _=r.dm().a("width"),G=r.dm().a("height");_>0&&G>0&&Kl(h,0,0,_,G,A)}var y=r.__htmlOrderList,n=[],L=r._forcedLayoutHTML;if(r._93db(h,P),r.each(function(J){var A=r.getDataUI(J);if(A){var u=r._56I[J._id],c=A._htmlView;if(u){var t=A._79o();if(c=A._htmlView,f.HtmlNode&&J instanceof f.HtmlNode)A._42(h);else{var o=r.getViewRect(),E=c&&c.layoutHTML;!P||Gj(P,t)?(E&&(c.layoutHTML(),A.__outerLayout&&delete A.__outerLayout),A._42(h)):Gj(o,t)||!E||A.__outerLayout&&!L||(c.layoutHTML(),A.__outerLayout=!0)}}c&&(n.push(c),c.getView&&(c=c.getView()),c.style.display=u?"block":Eb)}}),y&&n.length>0){var Q=!1;if(y.length!==n.length)Q=!0;else for(var H=0;H<n.length;H++)if(n[H]!==y[H]){Q=!0;break}Q&&(n.forEach(function(W){W.autoAdjustIndex!==!1&&r.appendHTML(W,!0)}),this.__htmlOrderList=n)}else this.__htmlOrderList=n;r._92db(h,P)},disableDirtyRect:function(){this._shouldRedrawAll=c},enableDirtyRect:function(){var r=this;r._shouldRedrawAll=function(){return r._32I}},validateImpl:function(){this.tryUpdateRootData();var X,a,W,r,Z,G=this,J=G.tx(),v=G.ty(),N=G._zoom,H=G._canvas,e=this.getWidth(),l=this.getHeight(),t=G._29I,D={x:-J/N,y:-v/N,width:e/N,height:l/N},p={},R=G._34I,o=G._24I,g=G._shouldRedrawAll(),d=G._23I;G._24I={},(e!==H.clientWidth||l!==H.clientHeight)&&(Wk(H,e,l),g=1,G._forcedLayoutHTML=1),g||sg(D,t)||(g=1,G._forcedLayoutHTML=1),G._29I=D,G.each(function(m){a=m._id;var z=p[a]=G.isVisible(m);z!==G._56I[a]&&(o[a]=m,W=G.getDataUI(o[a]),W&&W._84o(z),G._84o(m,z))},G);for(a in o)W=G.getDataUI(o[a]),W&&(!g&&G._56I[a]&&(Z=W._79o(),Z&&R.add(Z)),W.invalidate()),G._83I=1;if(G._56I=p,!g)for(a in o)p[a]&&(W=G.getDataUI(o[a]),W&&(Z=W._79o(),Z&&R.add(Z)));if(g?r=D:(R.each(function(c){Gj(D,c)&&(r=$b(r,c))}),r&&(Zp(r,C(1,1/N)),r.x=B(r.x*N)/N,r.y=B(r.y*N)/N,r.width=s(r.width*N)/N,r.height=s(r.height*N)/N,r=Kb(D,r))),G._74O=r,r&&0!==r.width&&0!==r.height){X=sc(H);var Q=r.x,f=r.y,Y=r.width,A=r.height;Q=Math.floor((Q*N+J)*mr),f=Math.floor((f*N+v)*mr),Y=Math.ceil(Y*N*mr)+1,A=Math.ceil(A*N*mr)+1,g||(r.x=(Q/mr-J)/N,r.y=(f/mr-v)/N,r.width=Y/mr/N,r.height=A/mr/N),X.beginPath(),X.rect(Q,f,Y,A),X.clip(),X.clearRect(Q,f,Y,A),aj(X,J,v,N),G._42(X,r),X.restore(),delete G._74O}if(R.clear(),delete G._32I,delete G._forcedLayoutHTML,d&&e>0&&l>0){var W=G.getDataUI(d);if(W){var Z=W._79o(),F=G._29I,M=F.x,y=F.y,k=F.width,I=F.height,N=G._zoom;Z&&!Gj(Z,F)&&(Z.x+Z.width<M&&G.tx(-Z.x*N),Z.x>M+k&&G.tx(-(Z.x+Z.width-k)*N),Z.y+Z.height<y&&G.ty(-Z.y*N),Z.y>y+I&&G.ty(-(Z.y+Z.height-I)*N))}delete G._23I}G._83I&&(delete G._83I,delete G._84I),G._98O(),G.countFrame(),ck(G._24I)||Ad(G.iv,G)},isValidGuideLineSource:function(){return!0},tryUpdateRootData:function(){if(!this._rootDataUpdating){this._rootDataUpdating=!0;var C,w=this.getFullscreenDatas();for(var T in w)C=w[T],this.scaleRootData(C);this.onRootDataUpdated&&this.onRootDataUpdated(),this._rootDataUpdating=!1}},scaleRootData:function(L){var r=L.s("fullscreen");if("uniform"===r||"fill"===r){L.getRotation()&&L.setRotation(0);var f=L.s("fullscreen.gap")||0,c=this.getWidth(),$=this.getHeight();if(c&&$){var M,N,g,t=c-2*f,F=$-2*f,K=L.getAnchor(),R=L.getScaledSize(),_=R.width,V=R.height,d=L.s("fullscreen.lock");if(d)return"uniform"===r?t/F>_/V?(M=F/V,_=V*t/F):(M=t/_,V=_*F/t):"v"===d?(M=F/V,_=t/M,L.getWidth()!==_&&L.setWidth(_)):(M=t/_,V=F/M,L.getHeight()!==V&&L.setHeight(V)),this.setZoom(M),N=f-(L.getX()-K.x*_)*M,g=f-(L.getY()-K.y*V)*M,N!==this.tx()&&this.tx(N),g!==this.ty()&&this.ty(g),void 0;N=this.tx(),g=this.ty(),M=this._zoom;var m={x:(-N+f)/M,y:(-g+f)/M,width:t/M,height:F/M};if("uniform"===r){var X=_/V,S=Math.min(m.width,m.height*X),A=S/X;m.x+=.5*(m.width-S),m.y+=.5*(m.height-A),m.width=S,m.height=A}t=m.width/L.getScaleX(),F=m.height/L.getScaleY(),(L.getWidth()!=t||L.getHeight()!==F)&&L.setSize(t,F);var G=m.x+K.x*m.width,w=m.y+K.y*m.height,q=L.getPosition();(G!==q.x||w!==q.y)&&L.setPosition(G,w)}}},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(w){var _=this;w!==_.isScrollBarVisible()&&(w?(Vi(_._view,_._79O=Lj()),Vi(_._79O,_._27I=Lj()),Vi(_._79O,_._28I=Lj())):(jf(_._79O),delete _._79O,delete _._27I,delete _._28I),_.fp("scrollBarVisible",!w,w))},getDebugTip:function(){return""},showScrollBar:function(){var P=this;P._79O&&(P._85I||(yd(function(){P._86I()},Sc),P.iv()),P._85I=new Date)},_86I:function(){var S=this;if(S._85I){var L=new Date,n=L.getTime();n-S._85I.getTime()>=Sc?(delete S._85I,S.iv()):yd(function(){S._86I()},Sc)}},getVScrollBar:function(){return this._27I},getHScrollBar:function(){return this._28I},_98O:function(){var $=this,_=this._27I,o=this._28I;if($._79O){if($._autoHideScrollBar&&!$._85I)return _.style.visibility=Bc,o.style.visibility=Bc,void 0;var I=$.getScrollBarColor(),N=$._zoom,d=$.getScrollBarSize(),F=$.getViewRect(),w=$.getScrollRect(),U=F.height*N,r=w.height*N,H=F.width*N-d-2,f=U*((F.y-w.y)*N/r),G=U*(U/r),R=_.style;r-.5>U?(wd>G&&(f=f+G/2-wd/2,0>f&&(f=0),f+wd>U&&(f=U-wd),G=wd),oc(_,H,f,d,G),R.visibility=Dg,R.background=I,R.borderRadius=d/2+hi):R.visibility=Bc;var n=F.width*N,A=w.width*N,f=F.height*N-d-2,H=n*((F.x-w.x)*N/A),Y=n*(n/A),R=o.style;A-.5>n?(wd>Y&&(H=H+Y/2-wd/2,0>H&&(H=0),H+wd>n&&(H=n-wd),Y=wd),oc(o,H,f,Y,d),R.visibility=Dg,R.background=I,R.borderRadius=d/2+hi):R.visibility=Bc}},setDataModel:function(j){var z=this,L=z._dataModel,O=z._selectionModel;L!==j&&(L&&(L.ump(z.handleDataModelPropertyChange,z),L.umm(z.handleDataModelChange,z),L.umd(z.handleDataPropertyChange,z),L.removeIndexChangeListener(z._75O,z),L.removeHierarchyChangeListener(z.handleHierarchyChange,z),O||L.sm().ums(z.handleSelectionChange,z)),z._dataModel=j,j.mp(z.handleDataModelPropertyChange,z),j.mm(z.handleDataModelChange,z),j.md(z.handleDataPropertyChange,z),j.addIndexChangeListener(z._75O,z),j.addHierarchyChangeListener(z.handleHierarchyChange,z),O?O._21I(j):j.sm().ms(z.handleSelectionChange,z),z.invalidateAll(!0),z.fp(Rf,L,j),z.updateBackground())},getLayersInfo:function(){if(this._layersInfo===n){var y=this.getLayers();y?(this._layersInfo={},y.forEach(function(L){var Q=Yo(L)?L.name:L;this._layersInfo[Q]=L},this)):this._layersInfo=null}return this._layersInfo},calculateEdgePosition:function(y,G,L){var e,z,n,B,o=this;y instanceof f.Data?(B=o.getDataUI(y),n=oo(B)):(n=oo(null,arguments[0],arguments[1]),G=arguments[2],L=arguments[3]),2===G.length&&(G=new gd(G[0],G[1]));var p=Wc(G,function(c){return Im(n,100*c)},100,.001),q=Im(n,100*p);if(!L){var t=B?Jp(B):Jp(arguments[0],arguments[1]),J=new gd(q.x,q.y),Z=49/(o._zoom*o._zoom);for(e=0,z=t.length;z>e;e++)if(J.distanceToSquared(t[e])<Z)return{index:e,point:t[e],distance:Math.sqrt((t[e].x-G.x)*(t[e].x-G.x)+(t[e].y-G.y)*(t[e].y-G.y))}}return{percent:p,point:q,distance:Math.sqrt((q.x-G.x)*(q.x-G.x)+(q.y-G.y)*(q.y-G.y))}},getPercentPositionOfPath:function(H,n){var c;if(H instanceof f.Data){var i=this.getDataUI(H);c=oo(i)}else c=oo(null,arguments[0],arguments[1]),n=arguments[2];return Im(c,n)},getNeareastPositionOfPath:function(){return this.calculateEdgePosition.apply(this,arguments)},getPointsOfPath:function(){function Z(L,h,W,g,X,R){var P=new gd(h.get(W)),Z=R.apply(P);L.push({local:P,world:Z,type:X,index:W,realIndex:g})}return function(n){var j,I;if(n instanceof f.Data){var d=this.getDataUI(n),q=$g(d);j=q.points,I=q.segments}else j=arguments[0],I=arguments[1];var F,U,b,D=n instanceof f.Shape?n.getPointsMatrix2d():new Tc.Matrix2d,m=[],P=-1,h=-1;for(U=0,b=I?I.length:j.length;b>U;U++)F=I?I.get(U):1,5!==F&&(h++,3===F?(Z(m,j,P+1,h,"C",D),Z(m,j,P+2,h,"M",D),P+=2):4===F?(Z(m,j,P+1,h-1,"R",D),Z(m,j,P+2,h,"L",D),Z(m,j,P+3,h,"M",D),P+=3):(Z(m,j,P+1,h,"M",D),P+=1));return m}}(),calculateAttachPoint:function(){var f=new gd,G=new gd,v=new gd;return function(P,N){var W=this.getAttachPoints(P);if(!W||!W.length)return null;v.set(N.x,N.y);for(var X,y,R,Z,d,K=1/0,J=0,b=W.length;b>J;J++)R=W[J],G.x=R.x,G.y=R.y,f.x=R.offsetX||0,f.y=R.offsetY||0,Z=Hq(this,P,0,f.x,f.y,G.x,G.y),y=v.distanceToSquared(Z),K>y&&(X=J,K=y,d=Z);K=Math.sqrt(K);var S=this.getAttachStyle(P);if("close"===S){var q=P.s("attach.close.threshold")/this._zoom;if(K>q)return null}return{index:X,distance:K,info:W[X],point:d}}}(),getAttachPoints:function(L){var o=L.s("attach.points");if(o)return o;var A=Nn(L._image);return A?rq(A.attachPoints,L,this)||null:void 0},getAttachStyle:function(d){var f=d.s("attach.style");if(f)return f;var M=Nn(d._image);return M?rq(M.attachStyle,d,this)||"close":void 0},updateLayers:function(){this._layersInfo=n,this.invalidateSelection(),this.redraw()},updateBackground:function(){var K=this.dm().a("width"),D=this.dm().a("height");this._canvas.style.background=K>0&&D>0?"":this.dm().getBackground()||""},handleDataModelPropertyChange:function(n){if("background"===n.property){var r=this._canvas.style.background,V=n.newValue||"";this.updateBackground(),this.fp("canvasBackground",r,V),this.redraw()}else"a:width"===n.property||"a:height"===n.property?(this._83I=1,this.updateBackground(),this.redraw()):"layers"===n.property?this.updateLayers():"hierarchicalRendering"===n.property&&this.redraw()},handleDataPropertyChange:function(B){this.dm().isHierarchicalRendering()&&"parent"===B.property&&B.data.hasChildren()&&this.redraw(),this.invalidateData(B.data)},onPropertyChanged:function(O){var r=this,Y=O.property;if(r.redraw(),"zoom"===Y){var l=r.sm().getSelection();l.size()&&l.each(function(l){l.invalidate()})}else"dataModel"===Y&&(r._83I=1);Rp[Y]?r.showScrollBar():Y===Bo&&r.onCurrentSubGraphChanged(O)},onCurrentSubGraphChanged:function(){this.sm().cs(),this.reset()},handleDataModelChange:function(y){var N=this,X=y.kind,p=y.data;if(N._83I=1,"add"===X)N.invalidateData(p),ld(p)&&p.getEdgeGroup()&&p.getEdgeGroup().eachSiblingEdge(N.invalidateData,N),p.getHost&&p.getHost()&&p.getHost().updateLayoutAttaches();else if(X===Id){N._21Q(p);var _=p._id,M=N._25I[_];if(M){if(N._56I[_]){var s=M._79o();s&&N.redraw(s)}M.dispose(),delete N._25I[_],delete N._24I[_],delete N._56I[_]}p===N._currentSubGraph&&N.setCurrentSubGraph(O)}else X===cp&&(N.invalidateAll(!0),N.setCurrentSubGraph(O))},_75O:function(O){this.invalidateData(O.data)},handleHierarchyChange:function(Z){this.dm().isHierarchicalRendering()&&Z.data.hasChildren()&&this.redraw(),this.invalidateData(Z.data)},adjustIndex:function(z){var H=this;if(H.isVisible(z)){H.dm().beginTransaction();for(var V=z;V._parent&&H.isVisible(V._parent);)V=V._parent;V&&V!==z&&H._dataModel.adjustIndex(V),H._dataModel.adjustIndex(z),H.dm().endTransaction()}},getImage:function(R){return R.getImage?R.getImage():n},getSelectWidth:function(H){var f=Nn(this.getImage(H));return f&&rq(f.disableSelectedBorder,H,this)?0:H.s("select.width")},getSelectColor:function(Q){return Q.s("select.color")},isSelectable:function(C,P){if(this.isSelected(C))return!0;if(!P&&C.getParent()instanceof $c&&this.isSelectable(C.getParent(),!0)&&C.getParent().isSyncSize())return!1;var f=this.getLayersInfo();if(f){var l=f[C._layer];if(l&&l.selectable===!1)return!1}return C.s("2d.selectable")&&this.sm().isSelectable(C)},isMovable:function(c){var _=this;if(ld(c)&&c.getStyle(Oi)!==mh)return!1;var f=this.getLayersInfo();if(f){var u=f[c._layer];if(u&&u.movable===!1)return!1}return c.s("2d.movable")?_._movableFunc?_._movableFunc(c):!0:!1},isEditable:function(l){var m=this;if(f._uiSerializing)return m._uieditable;if(!m._editInteractor||!m.isSelected(l))return!1;if(zg(l)){var t=m.getDataUI(l);if(!t||t._88I)return!1}if(ld(l)&&l.getStyle(Oi)!==mh)return!1;var k=this.getLayersInfo();if(k){var W=k[l._layer];if(W&&W.editable===!1)return!1}return l.s("2d.editable")?m._editableFunc?m._editableFunc(l):!0:!1},handleDelete:function(){this._editInteractor&&(this._editInteractor.handleDelete?this._editInteractor.handleDelete():this.removeSelection())},isPointEditable:function(x){return Cl(x)&&0!==x.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(x):!0},isRectEditable:function(f){return this._rectEditableFunc?this._rectEditableFunc(f):!0},isAnchorEditable:function(G){return this._anchorEditableFunc?this._anchorEditableFunc(G):!0},isRotationEditable:function(r){return r.setRotation&&r.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(r):!0:!1},isSourceTargetEditable:function(){return!0},getRotationPoint:function(f){var X=f.getAnchor(),J=f.getScale(),O=this._zoom,p=rr(f.getRotation(),0,-f.getHeight()*J.y*X.y-(J.y<0?-1:1)*(eb?32:16)/O),G=f.p();return p.x+=G.x,p.y+=G.y,p},getLogicalPoint:function(I){var Z=this;return Re(I,Z._canvas,Z.tx(),Z.ty(),Z._zoom,Z._zoom)},getScreenPoint:function(g,E){var L,j=this;return"object"==typeof g?g.x!==n?(L=g.x,E=g.y):(L=g[0],E=g[1]):L=g,ec(L,E,j._canvas,j.tx(),j.ty(),j._zoom,j._zoom)},getSelectedDataAt:function(N){var u=this;return this.getDataAt(N,function(m){return u.isSelected(m)})},getDataInfoAt:function(F,a,A){var m,f=this.lp(F),t=this.getDataAt(f,a,A);if(t){var v=this.getDataUI(t);m={data:t,ui:v,point:f};var U=v._38o;if(U){var j=U.icons;for(var I in j){var q=j[I],B=U.rects[I];if(B)for(var w=rq(q.names,t,this),V=w?w.length:0,E=B.rotation,y=V-1;y>=0;y--){var M=w[y],J=B[y];if(Ol(J,f,E))return m.part="icons",m.name=I,m.icon=M,m.rect=J,m.index=y,m.rotation=E,m}}}if(this.isNoteVisible(t)){if(v.note2Info&&Ol(v.note2Info.clickRect,f,O,v.note2Info.scale))return m.part="note2",m;if(v.noteInfo&&Ol(v.noteInfo.clickRect,f,O,v.noteInfo.scale))return m.part="note",m}if(this.isLabelVisible(t)){if(v.label2Info&&Ol(v.label2Info.rect,f,v.label2Info.rotation,v.label2Info.scale))return m.part="label2",m;if(v.labelInfo&&Ol(v.labelInfo.rect,f,v.labelInfo.rotation,v.labelInfo.scale))return m.part="label",m}if(t.isInRect&&t.isInRect(f))return m.part="body",m}return m},getDataAt:function(P,a,v){P.target&&(P=this.lp(P));var d,B=this._zoom;return this.reverseEach(function(F){return(a?a(F):this.isSelectable(F))&&this.rectIntersects(F,zj(P.x,P.y,v,B))?(d=F,!1):void 0},this),d},getIconInfoAt:function(C,Z){var V=this;if(C.target&&(C=V.lp(C)),Z||(Z=V.getDataAt(C)),Z){var R=V.getDataUI(Z);if(R&&R._38o){var T,e=R._38o,x=new td;for(T in e.icons)x.add(T);for(var j=x.size()-1;j>=0;j--){T=x.get(j);for(var N=e.rects[T],B=N.rotation,u=N.length-1;u>=0;u--){var W=N[u],t=W.width,J=W.height,F={x:C.x-W.x-t/2,y:C.y-W.y-J/2};B!=O&&(F=rr(-B,F.x,F.y));var W={x:-t/2,y:-J/2,width:t,height:J};if(Ol(W,F))return{key:T,index:u,name:e.icons[T].names[u],rect:N[u],point:C,rotation:B,relativeRect:W,relativePoint:F,data:Z}}}}}return O},getDatasInRect:function(O,r,g){g===n&&(g=1);var z=this,P=new td;return z.reverseEach(function(R){g&&!z.isSelectable(R)||(r?z.rectIntersects(R,O):z.rectContains(R,O))&&P.add(R)}),P},moveSelection:function(f,z){var x=this;x.dm().beginTransaction(),Cd(x.sm().toSelection(x.isMovable,x),f,z),x.dm().endTransaction()},moveDatas:function(v,A,T){var d=this;d.dm().beginTransaction(),v instanceof td||(v=new td(v)),Cd(v,A,T),d.dm().endTransaction()},getDataUIBounds:function(n){var r=this.getDataUI(n);return r?r._79o():O},drawData:function(T,L,o){var S=this.getDataUI(L);if(S){var J=S._79o();(!o||Gj(o,J))&&(S._42(T),L instanceof f.Block&&L.eachChild(function(j){this.isVisible(j)&&this.drawData(T,j,o)},this))}},getBoundsForGroup:function(s){return s.s(ee)?this.getDataUIBounds(s):O},isPixelPerfect:function(n){return n.s("pixelPerfect")},rectIntersects:function(y,X){this.validate();var S=O;if(this._56I[y._id]){var q=this._25I[y._id];if(q){var l=q._79o();if(Bh(X,l))S=!0;else if((X=Kb(X,l))&&(q.rectIntersects&&(S=q.rectIntersects(X)),S==O)){if(!this.isPixelPerfect(y))return!0;var o=X.x,r=X.y,K=X.width,T=X.height,e=this._zoom,d=Q.hitMaxArea,$=K*T*e*e;if($>d){var s=Math.sqrt(d/$);e*=s}K*=e,T*=e,2>K&&(K=2),2>T&&(T=2),o*=e,r*=e;var L=rp(K,T);on(L,-o,-r),L.scale(e,e),this._drawForChecking=!0,this.drawData(L,y,X),this._drawForChecking=!1;try{for(var F=0,P=L.getImageData(0,0,K,T).data;F<P.length;F+=4)if(0!==P[F+3]){S=!0;break}L.restore()}catch(_){so=O,S=!1}}}}return S?!0:!1},rectContains:function(d,n){if(this._56I[d._id]){var q=this._25I[d._id];if(q)return Bh(n,q._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(A){if(!Q.isInput(A.target)){var U=this,M=U._focusData,$=M&&U._25I[M._id],j=0,I=U._dataModel._datas;if(!(M&&M._enabled&&M._editable&&$&&$.onKeyDown&&$.onKeyDown(A)===!0))if(9===A.keyCode&&(M&&(j=I.indexOf(M),Sl(A)?-1===--j&&(j=0):++j===I.size()&&(j=0)),U._focusData=M=I.get(j),U.sm().setSelection(M)),bj(A)?U.selectAll():vr(A)&&U.isResettable()&&U.reset(),U.sm().isEmpty()){if(U._editing)return;
var T=U.tx(),q=U.ty(),z=!1,C=Sl()?100:10;nn(A)&&(T-=C,z=!0),Fq(A)&&(q-=C,z=!0),Fk(A)&&(T+=C,z=!0),No(A)&&(q+=C,z=!0),z&&U.setTranslate(T,q)}else{lm(A)&&U.handleDelete(A);var H=Sl()?10:1;nn(A)&&(U.moveSelection(-H,0),U.fi({kind:"moveLeft"})),Fq(A)&&(U.moveSelection(0,-H),U.fi({kind:"moveUp"})),Fk(A)&&(U.moveSelection(H,0),U.fi({kind:"moveRight"})),No(A)&&(U.moveSelection(0,H),U.fi({kind:"moveDown"}))}}},handleScroll:function(T,I){if(tn(T),this.isZoomable()){if(!this.getEditInteractor()){var p=this.getDataAt(T);if(p){var v=Nn(this.getImage(p));if(v&&rq(v.scrollable,p,this))return}}var W=this.getFullscreenDatas();for(var k in W)if(W[k].s("fullscreen.lock"))return;var n=this.lp(T);I>0?this.scrollZoomIn(n):0>I&&this.scrollZoomOut(n)}},handlePinch:function(y,W,k){this.isZoomable()&&(Math.abs(W-k)<Q.pinchZoomThreshold||(W>k?this.pinchZoomIn(y):this.pinchZoomOut(y)))},checkDoubleClickOnNote:function(F,B){var J=this,c=J.lp(F),f=J.getDataUI(B),v=f.note2Info;return v&&B.s("note2.toggleable")&&Ol(v.clickRect,c)?(B.s(Dh,!B.s(Dh)),J.fi({kind:"toggleNote2",event:F,data:B}),!0):(v=f.noteInfo,v&&B.s("note.toggleable")&&Ol(v.clickRect,c)?(B.s(Ng,!B.s(Ng)),J.fi({kind:"toggleNote",event:F,data:B}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(T,x){var W=this,s=W.getAutoScrollZone(),K=s/W.getZoom(),g=s/4,q=W._29I,L=W.lp(T),O={x:W.tx(),y:W.ty()};return L&&s>0&&q&&(L.x-q.x<K?W.translate(g,0):q.x+q.width-L.x<K&&W.translate(-g,0),L.y-q.y<K?W.translate(0,g):q.y+q.height-L.y<K&&W.translate(0,-g)),O.x=W.tx()-O.x,O.y=W.ty()-O.y,x&&(x.x+=O.x,x.y+=O.y),O},getMoveMode:function(b,p){var A=p.s("2d.move.mode");return A?A:Bd["88"]?"x":Bd["89"]?"y":"xy"},getSerializableProperties:function(){return{scrollBarColor:1,scrollBarSize:1,autoMakeVisible:1,autoHideScrollBar:1,editable:1,resettable:1,pannable:1,rectSelectable:1,autoScrollZone:1,visibleFunc:1,movableFunc:1,editableFunc:1,pointEditableFunc:1,rectEditableFunc:1,anchorEditableFunc:1,rotationEditableFunc:1,rectSelectBackground:1,rectSelectBorderColor:1,editPointSize:1,editPointBorderColor:1,editPointBackground:1,hoverDelay:1,dataModel:1,selectionModel:1,currentSubGraph:1,zoom:1,translateX:1,translateY:1}},serializeProperty:function(N,t,w){var m=this;return"currentSubGraph"===t?{__i:N.getId()}:w.serializeProperty(N,t,m)},deserializeProperty:function(Y,u,x){var r=this;if("currentSubGraph"===u){var M=r.dm(),I=M.__idMap;return I[Y.__i]}return x.deserializeProperty(Y,u,r)},setDefaultCursor:function(Q,U){this._defaultCursor=Q,U!==!1&&this.setCursor(Q)},getCurrentConnectActionType:function(){return this._currentActionType},setCurrentConnectActionType:function(N){return N===O||Q.getConnectAction(null,N)?(this._currentActionType=N,this.redraw(),!0):!1},getEditStyle:function(L){var F=this.getEditInteractor();return F?F.getStyle(L):n},setEditStyle:function(I,o,A){var d=this.getEditInteractor();return d?(d.setStyle(I,o,A),!0):!1},isConnectActionVisible:function(m){var q=Q.getConnectAction(this);if(!q)return!1;var d=q.visible;return Le(d)&&(d=d(this,m)),d},isInteractive:function(R){if(this._drawForChecking)return!1;var p=Nn(this.getImage(R));return p&&rq(p.interactive,R,this)?!0:R.s("interactive")},getRenderingStyleIconName:function(){return Jl},appendHTML:function(b,M){var g=this.getView();if(!(M||b&&b.parentNode!==g))return!1;var n=b.getView&&b.getView(),G=b.beforeCanvas;if(!M&&n&&n.parentNode===g)return!1;(b.getView||b.isSelfViewEvent)&&(b=b.getView());var F=this.getEditInteractor();return G?g.insertBefore(b,this.getCanvas()):F&&F._canvas?g.insertBefore(b,F._canvas):this.isScrollBarVisible()?g.insertBefore(b,this.getView().lastChild):Vi(g,b),!0},_layoutHTMLImpl:function($,q,f){if(arguments.length>1){var e,P=this,a=P._zoom;if(q.getView&&(e=q,q=q.getView()),q.style.position="absolute",f){var U=$.getRect();oc(e||q,P.tx()+U.x*a,P.ty()+U.y*a,U.width*a,U.height*a)}else{var u=new Ci,U=$.getAnchorRect(),B=$.getPosition(),Q=$.getScale(),F=q.style;oc(e||q,U),u.appendTranslate(P.tx(),P.ty()),u.appendScale(a,a),u.append(new Ci($.getRotation(),B.x,B.y,Q.x,Q.y)),Go(F,"transform","matrix("+u.a.toFixed(5)+", "+u.b.toFixed(5)+", "+u.c.toFixed(5)+",\n    "+u.d.toFixed(5)+", "+u.tx.toFixed(5)+", "+u.ty.toFixed(5)+")"),Go(F,"transformOrigin",(-U.x).toFixed(5)+"px "+(-U.y).toFixed(5)+"px"),q.updateAppendMatrix=!0}}else this._layoutHTML&&this._layoutHTML()},getTextEditInfo:function(A){return A instanceof Rm?{name:"text",accessType:"s",font:A.s("text.font"),isMultiline:!0}:void 0},getState:function(W){var V="state",B=W.s(V);if(B)return B;var o=Nn(W._image);return o?rq(o[V],W,this)||null:void 0},getShape:function(o){return o.getStyle(En)}}),y.defineProperties(mo.GraphView.prototype,{layoutHTML:{get:function(){return this._layoutHTMLImplBind||(this._layoutHTMLImplBind=this._layoutHTMLImpl.bind(this)),this._layoutHTMLImplBind},set:function($){this._layoutHTML=$}}});var Te=function(X,$){var r=this;r.gv=X,r.s=function(u){return $.getStyle(u)},r._data=$,r._87I=new td},Jl=O;vn(Te,y,{_6I:O,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.s("shadow")||this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},getSelectWidth:function(){var v=this,A=v.gv.isSelected(v._data);return!A||v.isShadowed()?0:v.gv.getSelectWidth(v._data)},getSelectColor:function(){return this.gv.getSelectColor(this._data)},getBodyColor:function(g){var c=this._data,B=this.gv.getBodyColor(c);return B?B:g?c.getStyle(g):O},_2Q:function(a){return this.s(a)},_1Q:function(C,q,T,c){var o=this.s,E=o("2d.gray"),g=o(q+".dash.color");if(E&&(g=Q.toGrayColor(g)),C.strokeStyle=g,C.lineWidth=T,C.stroke(),o(q+".dash.3d")){var N=o(q+".dash.3d.color");db(C,g,E?Q.toGrayColor(N):N,T,this.gv._zoom,o(q+".dash.3d.accuracy"))}bh(C,c)},invalidate:function(){this._6I=O},_79o:function(){var A=this;if(!A._6I){var h=A._data,j=A.gv;A.labelInfo=A.label2Info=A.noteInfo=A.note2Info=A._38o=O,A._87I.clear(),A.interactiveInfo=j.isInteractive(h)?{}:O,A._3O(),A._55O=j.isEditable(h)?{_42O:j.isRectEditable(h),_43O:j.isPointEditable(h),_56O:j.isRotationEditable(h)}:O,A._6I=A._81o()}return A._6I},_3O:function(){},getPosition:function(){return rm},_68o:function(o,J){o&&this._87I.add(Xr(o,J))},_81o:function(){var p=this,d=p.s;p._24O(Ip,"getLabel"),p._24O(_n,"getLabel2"),p._26O(Ep,"getNote"),p._26O(Gk,"getNote2"),p._15O(),p._55O&&p._48O();var T;if(p._87I.each(function(P){T=$b(T,P)}),T&&d("shadow.interactable")){var q=p.isShadowed(),R=d("shadow2"),K=rj(T);R?(K.x+=d("shadow2.offset.x"),K.y+=d("shadow2.offset.y"),Zp(K,d("shadow2.blur"))):q&&(K.x+=d("shadow.offset.x"),K.y+=d("shadow.offset.y"),Zp(K,d("shadow.blur"))),T=$b(T,K)}return p._87I.clear(),T},_42:function(r){var H=this,Y=H._data,M=H.gv,T=H.s,$=T("opacity"),v=this.isShadowed(),t=T("shadow2");if(v||t){var z=r.shadowOffsetX,g=r.shadowOffsetY,A=r.shadowBlur,J=r.shadowColor,i=M.getZoom()*Q.devicePixelRatio,h=v?"shadow":"shadow2";r.shadowOffsetX=T(h+".offset.x")*i,r.shadowOffsetY=T(h+".offset.y")*i,r.shadowBlur=T(h+".blur")*i,r.shadowColor=v?H.getSelectColor():T(h+".color")}if($!=O){var V=r.globalAlpha;r.globalAlpha=$}H._80o(r),M.isLabelVisible(Y)&&((!M._drawForChecking||T("label.selectable"))&&vg(r,H.labelInfo),(!M._drawForChecking||T("label2.selectable"))&&vg(r,H.label2Info)),M.isNoteVisible(Y)&&(Ai(r,H.noteInfo),Ai(r,H.note2Info)),H._99O(r),$!=O&&(r.globalAlpha=V),(v||t)&&(r.shadowOffsetX=z,r.shadowOffsetY=g,r.shadowBlur=A,r.shadowColor=J)},_80o:function(){},_47O:function(){},_24O:function(G,$){var r=this,E=r._data,X=r.gv,Y=r.s,z=X[$](E);if(z!=O){var y=Y(G+".scale"),S=Y(G+".max"),b=Y(G+".position"),C=r[G+"Info"]={label:z,scale:y,color:X[$+"Color"](E),font:Y(G+".font"),opacity:Y(G+".opacity"),align:Y(G+".align"),decoration:Y(G+".decoration"),rotation:r.getRotation(Y(G+".rotation"),!1,b),background:X[$+"Background"](E)},l=Ib(C,z);S>0&&S<l.width&&(C.labelWidth=l.width,l.width=S),1!==y&&(l.width*=y,l.height*=y);var h=r.getPosition(b,Y(G+".offset.x"),Y(G+".offset.y"),l,Y(G+".position.fixed"));if(l.x=h.x-l.width/2,l.y=h.y-l.height/2,r._68o(C.rect=l,C.rotation),1!==y){var a=l.width/y,K=l.height/y;C.rect={x:h.x-a/2,y:h.y-K/2,width:a,height:K}}}},_26O:function(E,H){var W=this,o=W.gv,e=W._data,w=W.s,i=o[H](e);if(i!=O){var c,Q,u=w(E+".scale"),A=W[E+"Info"]={note:i,scale:u,data:e,view:o,expanded:w(E+".expanded"),font:w(E+".font"),color:w(E+".color"),opacity:w(E+".opacity"),align:w(E+".align"),icon:w(E+".icon"),backgroundImage:w(E+".backgroundImage"),borderWidth:w(E+".border.width"),borderColor:w(E+".border.color"),background:o[H+"Background"](e)},n=W.getPosition(w(E+".position"),w(E+".offset.x"),w(E+".offset.y")),j=n.x,R=n.y;if(A.expanded){var q,S=w(E+".max"),K=w(E+".backgroundImage");K?(K=Nn(K),q={width:Yj(K,e),height:kp(K,e)}):q=Ib(A,i),q.width+=6,q.height+=2,S>0&&S<q.width&&(A.labelWidth=q.width,q.width=S),c=q.width,Q=q.height+8,A.clickRect={x:j-c*u/2,y:R-Q*u,width:c*u,height:Q*u*q.height/Q}}else{var $=w(E+".icon");$?($=Nn($),c=Yj($,e),Q=kp($,e)):(c=12,Q=18),A.clickRect={x:j-c*u/2,y:R-Q*u,width:c*u,height:Q*u}}A.rect={x:j-c/2,y:R-Q*u/2-Q/2,width:c,height:Q};var p=s(A.borderWidth/2)*u;W._68o({x:j-c*u/2-p,y:R-Q*u-p,width:c*u+2*p,height:Q*u+2*p})}},_48O:function(){},_99O:function(d){var x=this,b=x._38o;if(b){var C=x.gv,n=x._data,R=b.icons,P=x.interactiveInfo;P&&(P._38o={});for(var $ in R){var B=R[$],g=b.rects[$];if(g){P&&(P._38o[$]=[]);var Y=rq(B.opacity,n,C),u=rq(B.names,n,C),F=u?u.length:0,z=g.rotation;if(Y!=O){var c=d.globalAlpha;d.globalAlpha*=Y}for(var j=0;F>j;j++){var H=u[j],v=Nn(H),a=g[j];if(z){var G=a.x+a.width/2,w=a.y+a.height/2;d.save(),on(d,G,w),Hd(d,z),on(d,-G,-w)}P&&P._38o[$].push(d.interactiveInfo={compInfos:[],matrix:z?new Ci(z,G,w).appendTranslate(-G,-w):new Ci});var N=Jl;Jl=$,ks(d,v,rq(B.stretch,n,C),a.x,a.y,a.width,a.height,x._data,x.gv),Jl=N,d.interactiveInfo=O,z&&d.restore()}Y!=O&&(d.globalAlpha=c)}}}}});var le=function(R,c){Ig(le,this,[R,c])};vn(le,Te,{_checkEmptyRect:!0,_40O:function(I,B){var E=this,l=E.s,j=I.rect;(I.borderColor=E.gv.getBorderColor(E._data))&&(I.borderType=l("border.type"),I.borderWidth=l("border.width"),I.borderPadding=l("border.padding"),B=C(B,I.borderPadding+I.borderWidth/2));var f=E._data.getScale(),K=C(1,C(o(f.x),o(f.y)));if(I.selectWidth=E.getSelectWidth()){var P=E.gv._zoom;I.selectType=l("select.type"),I._97o=E.getSelectColor(),I.selectPadding=l("select.padding"),B=C(B,(I.selectPadding+I.selectWidth/2/P)/K)}B>0&&(B*=K,j=rj(j),Zp(j,B)),E._68o(j)},_39O:function(Z,n){var o,u=this,f=n.rect;if(n.borderWidth>0&&(o=n.borderPadding,Z.strokeStyle=n.borderColor,Z.lineWidth=n.borderWidth,Jo(Z,n.borderType,{x:f.x-o,y:f.y-o,width:f.width+2*o,height:f.height+2*o}),Z.stroke()),n.selectWidth>0){var q=u.gv._zoom;if(o=n.selectPadding,Z.strokeStyle=n._97o,Z.lineWidth=n.selectWidth/q,n.rotation!=O){Z.save(),Z.translate(n.position.x,n.position.y),Z.rotate(n.rotation);var V=u._data,h=V.getWidth(),N=V.getHeight(),R=n.scale,X=n.anchor;f={x:R.x*-h*X.x,y:R.y*-N*X.y,width:R.x*h,height:R.y*N}}Jo(Z,n.selectType,{x:f.x-o,y:f.y-o,width:f.width+2*o,height:f.height+2*o}),n.rotation!=O&&Z.restore(),Z.stroke()}},dispose:function(){var J=this,f=J._htmlView;le.superClass.dispose.call(J),f&&(f.onHTMLRemoved&&f.onHTMLRemoved(),jf(f))},_3O:function(){var _,x=this,r=x.s,S=x._data,X=x.gv,P=X.getShape(S),Z=x.getBodyColor(),j=r("shape.border.color"),w=x._83o=P?{shape:P,_53o:x.getBodyColor("shape.background"),_27Q:Nn(r("shape.repeat.image"),Z),shapeGradientPack:r("shape.gradient.pack"),shapeBorderGradientPack:r("shape.border.gradient.pack"),_54o:r("shape.border.width"),_55o:j,shapeBorderRepeatImage:Nn(r("shape.border.repeat.image"),j),_56o:r("shape.border.3d"),_57o:r("shape.border.3d.color"),_58o:r("shape.border.3d.accuracy"),shapeGradient:r("shape.gradient"),_59o:r("shape.gradient.color"),_60o:r("shape.border.pattern"),_61o:r("shape.border.cap"),_62o:r("shape.border.join"),shapeForeground:r("shape.foreground"),bodyColor:Z,gray:r("2d.gray")}:{img:Nn(X.getImage(S),Z),bodyColor:Z,gray:r("2d.gray"),stretch:r("image.stretch")},p=w.img;p&&p.renderHTML?(x._htmlInfo&&x._htmlInfo.img!==p&&(x._htmlInfo=O),x._htmlInfo||(x._htmlInfo={img:p,cache:{}}),_=p.renderHTML(S,X,x._htmlInfo.cache)):x._htmlInfo=O,x._htmlView&&x._htmlView!==_&&(x._htmlView.onHTMLRemoved&&x._htmlView.onHTMLRemoved(),jf(x._htmlView.getView?x._htmlView.getView():x._htmlView)),(x._htmlView=_)&&X.appendHTML(_)&&(_.onHTMLAddedSync&&_.onHTMLAddedSync(),_.onHTMLAdded&&Ad(_.onHTMLAdded)),w.rect=S.getRect(),w.position=S.p(),w.scale=S.getScale(),w.anchor=S.getAnchor(),w.rotation=S.getRotation(),P===Ro&&(w._63o=r("shape.depth"));var q=0;if(P)q=Mo(O,w._54o/2,w._62o),x.s("shape.dash")&&(q=C(q,(x.s("shape.dash.width")||w._54o)/2));else if(p&&p.boundExtend)if(q=rq(p.boundExtend,S,X),p.boundExtendAbsolute){var F=S.getScale();q/=X._zoom*C(1,C(o(F.x),o(F.y)))}else if(!rq(p.fitSize,S,X)){var Q=rq(p.width,S,X),t=rq(p.height,S,X);q*=C(S.getWidth()/Q,S.getHeight()/t)}x._40O(w,q);var c=r("clip.percentage");if(c!=n&&(w.clipRect=zr(S.getAnchorRect(),r("clip.direction"),c)),P){var d=r("shape.fill.clip.percentage");d!=n&&(w.shapeClipRect=zr(S.getAnchorRect(),r("shape.fill.clip.direction"),d));var L=r("shape.foreground.clip.percentage");L!=n&&(w.shapeForegroundClipRect=zr(S.getAnchorRect(),r("shape.foreground.clip.direction"),L))}var g=r("clip.host");g&&S.getHost()&&(w.clipHost=!0)},getPosition:function(U,X,Q,E){var a=_m(U,this._83o.rect,E);return a.x+=X,a.y+=Q,a},_80o:function(h){var c=this,W=c.s,v=c.gv,f=c._data,w=c._83o,V=w.rect,E=w.position,M=w.rotation,X=w.anchor,N=w.scale,C=w.shape,j=w.clipHost,r=w.clipRect;if(!c._checkEmptyRect||V.width>0&&V.height>0){if(j){var Z=f.getHost().getCorners();h.save(),h.beginPath(),Z.forEach(function(W,K){K?h.lineTo(W.x,W.y):h.moveTo(W.x,W.y)}),h.clip()}var U=f.getSize();if(U.x=-U.width*X.x,U.y=-U.height*X.y,wc&&!fi&&on(h,U.width,U.height),h.save(),on(h,E.x,E.y),Hd(h,M),bp(h,N.x,N.y),r&&(h.beginPath(),h.rect(r.x,r.y,r.width,r.height),h.clip()),v._drawForChecking&&w.img&&rq(w.img.pixelPerfect,f,v)===!1)Kl(h,U.x,U.y,U.width,U.height,"#888888");else if(c.freeDraw)c.freeDraw(h,U,w);else if(C){var H,$,i,g,p=w._60o,z=Br(h,p),n=w._27Q,R=w._54o,m=w.shapeGradientPack,e=w.gray,G=h.lineJoin,Y=h.lineCap,S=function(i){return e?Q.toGrayColor(i):i};"roundRect"===C?H=W("shape.corner.radius"):"polygon"===C?(H=W("shape.polygon.side"),$=W("shape.corner.radius"),i=W("shape.regular")):"arc"===C&&(H=W("shape.arc.from"),$=W("shape.arc.to"),i=W("shape.arc.close"),g=W("shape.arc.oval")),h.lineJoin=w._62o,h.lineCap=w._61o;var A=S(w._53o);if(A||n||m){var b=w.shapeClipRect;b&&(h.save(),h.beginPath(),h.rect(b.x,b.y,b.width,b.height),h.clip()),Jo(h,C,U,H,$,i,g),m?Hj(h,m,function(P){return Pm(P,w.bodyColor)},!1,U):n?xg(h,n,S(w.bodyColor),null,f,v):Uq(h,A,w.shapeGradient,S(w._59o),U),h.fill(),m&&h.restore(),b&&h.restore(),h!==z&&Jo(z,C,U,H,$,i,g)}else Jo(z,C,U,H,$,i,g);var k=w.shapeForeground;if(k){h.save();var D=w.shapeForegroundClipRect;D&&(h.beginPath(),h.rect(D.x,D.y,D.width,D.height),h.clip()),Jo(h,C,U,H,$,i,g),Uq(h,k,W("shape.foreground.gradient"),S(W("shape.foreground.gradient.color")),U),h.fill(),h.restore()}if(R>0){var x=W("shape.border.width.absolute");x&&(h.save(),h.setTransform(1,0,0,1,0,0)),h.lineWidth=R;var u=S(w._55o),L=w.shapeBorderGradientPack;L?Hj(h,L,S,!0,U):w.shapeBorderRepeatImage?Eh(h,w.shapeBorderRepeatImage,u,null,f,v):h.strokeStyle=u,h.stroke(),L&&h.restore(),x&&h.restore(),w._56o&&db(h,u,S(w._57o),R,v._zoom,w._58o)}if(bh(h,p),W("shape.dash")){var q=W("shape.dash.width")||R;if(q>0){p=W("shape.dash.pattern");var z=Br(h,p,c._2Q("shape.dash.offset"));z!==h&&Jo(z,C,U,H,$,i,g),c._1Q(h,"shape",q,p)}}Wi(h,A,w._63o,U),h.lineJoin=G,h.lineCap=Y}else{var l=c.interactiveInfo;l&&(h.interactiveInfo=l.bodyInfo={compInfos:[],matrix:new Ci(M,E.x,E.y,N.x,N.y)}),w.gray&&(h.compGray=!0);var J=w.img;J&&J.cacheRule!=O&&(J=Hh(h,J,w.stretch,U.width,U.height,f,v,w.bodyColor)),ks(h,J,w.stretch,U.x,U.y,U.width,U.height,f,v,w.bodyColor),h.compGray=!1,h.interactiveInfo=O}h.restore(),j&&h.restore()}c._39O(h,w)},_48O:function(){},_47O:function(){}});var pf=function(H,z){Ig(pf,this,[H,z])},Gn=function(f,J,k,e){var s=xh(f,J);return k=e?g(k,s):of(k,s),s?k/=s:k=0,{x:f.x+(J.x-f.x)*k,y:f.y+(J.y-f.y)*k}};vn(pf,Te,{_3O:function(){var f,y=this,b=y._data,z=y.gv,u=y.s,J=u(Oi),e=b.isLooped(),D=u("edge.width"),j=y.getBodyColor("edge.color"),a=u("edge.center"),I=u("edge.offset"),V=z.getBorderColor(b),$=V?u("border.width"):0,N=y.getSelectWidth(),p=b._40I,M=b._41I,E=y._78o=p&&M?{looped:e,type:J,width:D,center:a,color:j,repeatImage:Nn(u("edge.repeat.image"),j),borderColor:V,borderWidth:$,_97o:N?y.getSelectColor():O,selectWidth:N,pattern:u("edge.pattern"),cap:u("edge.cap"),join:u("edge.join"),is3d:u("edge.3d"),_67o:u("edge.3d.color"),_66o:u("edge.3d.accuracy"),gray:u("2d.gray")}:O;if(E){var L=Q.getEdgeType(J);if(L){var w=L(b,vl(y,z,b,e,J),z,y._19Q);w.points&&w.points.size()>1?(E.edgeTypeInfo=w,f=pe(E.edgeTypeInfo.points)):w[Wn]&&w.rect&&(E.edgeTypeInfo=w,f=w.rect)}else{var t=u("edge.source.anchor.x"),F=u("edge.source.anchor.y"),U=u("edge.target.anchor.x"),K=u("edge.target.anchor.y"),Z=Pd(z,b,"source"),g=Pd(z,b,"target");if(J===mh){var l=E.points=u(Zo)||ps,H=l.size();E.segments=u("edge.segments");var v=t!==n||F!==n||ld(p),S=U!==n||K!==n||ld(M);if(!a)if(I)v||(Z=Gn(Z,H?l.get(0):g,I,H)),S||(g=Gn(g,H?l.get(H-1):Z,I,H));else{var R;v||(R=Fl(Z,H?l.get(0):g,xm(z,p)),R&&(Z={x:R[0],y:R[1]})),S||(R=Fl(H?l.get(H-1):Z,g,xm(z,M)),R&&(g={x:R[0],y:R[1]}))}f=$b(pe(E.points),pe(Z,g))}else{var x=vl(y,z,b,e,J);if(y._19Q||(x=-x),e)Z=rj(Z),Z.x=z.getNodeRect(p).x,E.radius=x,f={x:Z.x-x,y:Z.y-x,width:2*x,height:2*x};else{var q=xh(Z,g),Y=of(I,q),m={x:Y,y:x},W={x:q-Y,y:x},s=Tr(g.y-Z.y,g.x-Z.x),c=E.mat=new He(s);if(E.orienAngle=s,E.angle=g.x<Z.x?s+ei:s,E.rect={x:m.x,y:m.y,width:W.x-m.x,height:0},E.origin=Z,m=c.tf(m),m.x+=Z.x,m.y+=Z.y,W=c.tf(W),W.x+=Z.x,W.y+=Z.y,a){var X={x:q,y:0};X=c.tf(X),X.x+=Z.x,X.y+=Z.y,f=pe([Z,m,W,X]),E.c1=Z,E.c2=X}else f=pe(m,W);Z=m,g=W}}E.sourcePoint=Z,E.targetPoint=g,b._lastSourcePoint=Z,b._lastTargetPoint=g}var h=0;u("edge.dash")&&(h=u("edge.dash.width")||D);var G="square"===E.cap?.71:.5;Mo(f,C(h*G,D*G+$+N),E.join),y._68o(f)}},getRotation:function(z,Z,H){z=z||0;var o=this._78o;if(o){var F,r=o.angle,T=o.points,V=o.edgeTypeInfo;if(r!=O)return Z?o.orienAngle+z:r+z;if(V&&V[Wn])return V.getRotation?V.getRotation(this,z,Z,H):0;if(V&&V.points){var q=V.points;return F=q.size(),qp[H]?F&&0===F%2?po(q.get(F/2-1),q.get(F/2),Z,z):z:Mj[H]?po(q.get(0),q.get(1),Z,z):po(q.get(F-2),q.get(F-1),Z,z)}if(T)return F=T.size(),qp[H]?F&&0===F%2?po(T.get(F/2-1),T.get(F/2),Z,z):0===F?po(o.sourcePoint,o.targetPoint,Z,z):z:Mj[H]?po(o.sourcePoint,F?T.get(0):o.targetPoint,Z,z):po(F?T.get(F-1):o.sourcePoint,o.targetPoint,Z,z)}return z},getPosition:function(M,K,J,V,k){var n=this._78o;if(n){var $,o=n.type,l=n.points,Q=n.edgeTypeInfo,i=n.sourcePoint,p=n.targetPoint;if(!o)return n.looped?{x:i.x-n.radius+K,y:i.y+J}:(k&&i&&p&&(i.x>p.x||i.x===p.x&&i.y>p.y)&&(M=Ie[M],J=-J),$=_m(M,n.rect,V),$.x+=K,$.y+=J,$=n.mat.tf($),$.x+=n.origin.x,$.y+=n.origin.y,$);if(Q&&Q[Wn])return Q.getPosition?Q.getPosition(this,M,K,J,V,k):{x:(i.x+p.x)/2,y:(i.y+p.y)/2};if(l){var $,_=l.size();if(qp[M]){if(_){var w=_%2;if(0===w)return $p(l.get(_/2-1),l.get(_/2),M,K,J,V,k);$=l.get((_-w)/2)}else $={x:(i.x+p.x)/2,y:(i.y+p.y)/2};return $=_m(M,{x:$.x,y:$.y,width:0,height:0},V),$.x+=K,$.y+=J,$}return Mj[M]?$p(i,_?l.get(0):p,M,K,J,V,k):$p(_?l.get(_-1):i,p,M,K,J,V,k)}if(Q){var d=Q.points,_=d.size();if(qp[M]){var w=_%2;return 0===w?$p(d.get(_/2-1),d.get(_/2),M,K,J,V,k):($=d.get((_-w)/2),$=_m(M,{x:$.x,y:$.y,width:0,height:0},V),$.x+=K,$.y+=J,$)}return Mj[M]?$p(d.get(0),d.get(1),M,K,J,V,k):$p(d.get(_-2),d.get(_-1),M,K,J,V,k)}}return rm},_42:function(U){this._78o&&pf.superClass._42.call(this,U)},drawPath:function(y,h){y.beginPath();var a=h.type,G=h.points,v=h.segments,u=h.edgeTypeInfo;if(!a||G){var Q=h.sourcePoint,L=Q.x,r=Q.y,S=h.targetPoint,W=S.x,n=S.y;if(a)if(v){var J=new td({x:L,y:r});J.addAll(G),J.add({x:W,y:n}),pg(y,J,v)}else y.moveTo(L,r),G.each(function(q){y.lineTo(q.x,q.y)}),y.lineTo(W,n);else h.looped?y.arc(L,r,h.radius,0,Qd,!0):h.center?(y.moveTo(h.c1.x,h.c1.y),y.lineTo(L,r),y.lineTo(W,n),y.lineTo(h.c2.x,h.c2.y)):(y.moveTo(L,r),y.lineTo(W,n))}else u&&(u.points?pg(y,u.points,u.segments):u[Wn]&&u[Wn](y,u))},_80o:function(s){var d=this,v=d.s,K=d._78o,A=K.width,e=K.selectWidth,k=K.borderWidth,R=K.repeatImage,g=s.lineJoin,Y=s.lineCap,p=K.gray,L=K.pattern;s.lineJoin=K.join,s.lineCap=K.cap,d.drawPath(Br(s,L),K);var j=v("edge.width.absolute");j&&(s.save(),s.setTransform(1,0,0,1,0,0)),e&&(s.strokeStyle=K._97o,s.lineWidth=A+2*(k+e),s.stroke()),k&&(s.strokeStyle=p?Q.toGrayColor(K.borderColor):K.borderColor,s.lineWidth=A+2*k,s.stroke());var E=p?Q.toGrayColor(K.color):K.color;if(R?Eh(s,R,E,null,d._data,d.gv):s.strokeStyle=E,s.lineWidth=A,s.stroke(),K.is3d){var h=p?Q.toGrayColor(K._67o):K._67o;db(s,E,h,A,d.gv._zoom,K._66o)}if(v("edge.dash")){L=v("edge.dash.pattern");var $=Br(s,L,d._2Q("edge.dash.offset"));$!==s&&d.drawPath($,K),d._1Q(s,"edge",v("edge.dash.width")||A,L)}j&&s.restore(),bh(s,L),s.lineJoin=g,s.lineCap=Y},_48O:function(){},_47O:function(){}});var Tp=function(h,M){Ig(Tp,this,[h,M])};vn(Tp,le,{_3O:function(){var F,g,N=this,J=N.s,M=N._data,l=N.gv;if(N._88I=O,M.isExpanded()&&M.eachChild(function(s){if(Cl(s)){var v=l.getBoundsForGroup(s);v&&(g||(g=[]),g.push(v),F=$b(F,v))}}),F){var e=l.getLabel(M),K=J("group.type"),G=J("group.border.width")||0,t=J("group.border.width.absolute"),y=G/2;t&&(G/=l._zoom),F=yg(K,g,F),sd(F,M,"group.padding",1),Zp(F,G);var Y=N._88I={type:K,rect:F,_64o:F};if(!K&&e!=O){var R,S=N.labelInfo={label:e,color:J("group.title.color"),font:J("group.title.font"),align:J("group.title.align")},r=Ib(S,e),_=r.width+G,H=r.height+G,X=J("group.title.align"),a=J("group.title.orientation");if(a===pj||a===ri?(F.height+=G,_>F.width&&(F.width=_)):(a===wq||a===hb)&&(F.width+=G,_>F.height&&(F.height=_)),R=X===wq?F.x:X===hb?F.x+F.width-_:F.x+F.width/2-_/2,a===ri)Y.titleRect={x:F.x,y:F.y+F.height,width:F.width,height:H},Y.rect={x:F.x,y:F.y,width:F.width,height:F.height+H},S.rect={x:R,y:F.y+F.height,width:_,height:H};else if(a===wq){var Q=Y.titleRect={x:F.x-H,y:F.y,width:H,height:F.height};Y.rect={x:F.x-H,y:F.y,width:F.width+H,height:F.height},S.rect={x:Q.x+H/2-F.height/2,y:Q.y+F.height/2-H/2,width:F.height,height:H},S.rotation=-Math.PI/2}else if(a===hb){var Q=Y.titleRect={x:F.x+F.width,y:F.y,width:H,height:F.height};Y.rect={x:F.x,y:F.y,width:F.width+H,height:F.height},S.rect={x:Q.x+H/2-F.height/2,y:Q.y+F.height/2-H/2,width:F.height,height:H},S.rotation=Math.PI/2}else Y.titleRect={x:F.x,y:F.y-H,width:F.width,height:H},Y.rect={x:F.x,y:F.y-H,width:F.width,height:F.height+H},S.rect={x:R,y:F.y-H-y,width:_,height:H+G}}N._40O(Y,J("group.border.width")/2)}else Tp.superClass._3O.call(N)},getPosition:function(k,T,N,R){var M=this._88I;if(M){var p=_m(k,M.rect,R);return p.x+=T,p.y+=N,p}return Tp.superClass.getPosition.apply(this,arguments)},_24O:function(b,y){var D=this._88I;(!D||D.type||"label2"===b)&&Tp.superClass._24O.call(this,b,y)},_80o:function(m){var F=this,e=F._88I;if(e){var Z=F._data,I=F.s,u=F.gv,x=e.type,i=e.rect,R=e._64o,Q=e.titleRect,n=F.getBodyColor(),J=Nn(I("group.image"),n),q=I("group.image.stretch"),G=F.getBodyColor("group.background"),C=Nn(I("group.repeat.image"),n),w=I("group.gradient.pack"),K=I("group.gradient"),h=I("group.gradient.color"),b=I("group.border.width"),Y=I("group.border.color"),l=I("group.border.pattern"),f=I("group.title.orientation"),S=I("group.depth"),s=I("group.border.radius"),$=I("group.border.join"),g=I("group.border.cap"),M=I("group.border.width.absolute");M&&(b/=u._zoom);var P=Y,D=I("group.border.repeat.image");if(D&&(D=Nn(D,Y))&&(P=$l(m,D,Y,null,Z,u)),x){var B=m.lineJoin,L=m.lineCap;if(m.lineJoin=$,m.lineCap=g,J){if(m.save(),Jo(m,x,i,s),m.clip(),ks(m,J,q,i.x,i.y,i.width,i.height,Z,u,n),m.restore(),b>0){var p=Br(m,l);Jo(p,x,i,s),m.lineWidth=b,m.strokeStyle=P,m.stroke(),bh(m,l)}}else{var p=Br(m,l);G||C||w?(Jo(m,x,i,s),w?Hj(m,w,function(K){return Pm(K,n)},!1,i):C?xg(m,C,n,null,Z,u):Uq(m,G,K,h,i),m.fill(),w&&m.restore(),m!==p&&Jo(p,x,i,s)):Jo(p,x,i,s),b>0&&(m.lineWidth=b,m.strokeStyle=P,m.stroke()),bh(m,l),x===Ro&&Wi(m,G,S,i)}m.lineJoin=B,m.lineCap=L}else{var y=I("group.title.background");if((!s||0>s)&&(s=0),J)ks(m,J,q,R.x,R.y,R.width,R.height,Z,u,F.getBodyColor());else if(G||C)if(C?xg(m,C,n,null,Z,u):Uq(m,G,K,h,R),0===b)Jo(m,Ro,R),m.fill(),Wi(m,G,S,R);else{switch(m.beginPath(),f){case ri:no(m,R.x,R.y,R.width,R.height,s,s,0,0);break;case wq:no(m,R.x,R.y,R.width,R.height,0,s,0,s);break;case hb:no(m,R.x,R.y,R.width,R.height,s,0,s,0);break;case pj:no(m,R.x,R.y,R.width,R.height,0,0,s,s)}m.fill()}if(Q&&y)if(0===b)Kl(m,Q.x,Q.y,Q.width,Q.height,y),Wi(m,y,S,Q);else{switch(m.beginPath(),m.fillStyle=y,f){case ri:no(m,Q.x,Q.y,Q.width,Q.height,0,0,s,s);break;case wq:no(m,Q.x,Q.y,Q.width,Q.height,s,0,s,0);break;case hb:no(m,Q.x,Q.y,Q.width,Q.height,0,s,0,s);break;case pj:no(m,Q.x,Q.y,Q.width,Q.height,s,s,0,0)}m.fill()}if(b>0){var p=Br(m,l);if(Jo(p,"roundRect",i,s),m.save(),m.lineWidth=b,m.strokeStyle=P,m.lineJoin=$,m.lineCap=g,m.closePath(),m.stroke(),Q&&I("group.splitLine")){var c=Q.x,r=Q.y,H=Q.width,v=Q.height;m.beginPath(),f===ri?(m.moveTo(c,r),m.lineTo(c+H,r)):f===wq?(m.moveTo(c+H,r),m.lineTo(c+H,r+v)):f===hb?(m.moveTo(c,r),m.lineTo(c,r+v)):(m.moveTo(c,r+v),m.lineTo(c+H,r+v))}m.stroke(),m.restore(),bh(p,l)}}F._39O(m,e)}else Tp.superClass._80o.call(F,m)}});var Vl=function(u,O){Ig(Vl,this,[u,O])};vn(Vl,le,{_80o:function(w){this._39O(w,this._83o)}});var Ac=function(E,d){Ig(Ac,this,[E,d])};vn(Ac,le,{_3O:function(){var q=this,e=q._data,E=q.s,A=q.gv,B=e.getPoints(),Q=A.getBorderColor(e),H=Q?E("border.width"):0,b=q.getSelectWidth(),k=E("shape.border.width"),h=e.getRect(),L=e.getAnchorRect(),J=A.getBodyColor(e),t=E("shape.border.color"),u=q._99o=B.isEmpty()?O:{rect:h,rotation:e.getRotation(),fillRule:E("shape.fill.rule"),scale:e.getScale(),position:e.p(),points:B,segments:e.getSegments(),bodyColor:J,borderColor:Q,borderWidth:H,_94o:E("shape.border.3d"),_95o:E("shape.border.3d.color"),_96o:E("shape.border.3d.accuracy"),_97o:b?q.getSelectColor():O,selectWidth:b,_53o:E("shape.background"),_27Q:Nn(E("shape.repeat.image"),J),shapeGradientPack:E("shape.gradient.pack"),shapeBorderGradientPack:E("shape.border.gradient.pack"),_54o:k,_55o:t,shapeBorderRepeatImage:Nn(E("shape.border.repeat.image"),t),shapeGradient:E("shape.gradient"),_59o:E("shape.gradient.color"),_60o:E("shape.border.pattern"),_61o:E("shape.border.cap"),_62o:E("shape.border.join"),shapeForeground:E("shape.foreground"),gray:E("2d.gray")};if(u){L.x+=u.position.x,L.y+=u.position.y,u.gradientRect=L;var V=e.getScale(),G=C(1,C(o(V.x),o(V.y)));E("shape.dash")&&E("shape.dash.width")>k&&(k=E("shape.dash.width"));var P,S=E("shape.border.width.absolute");P=S?(k+H+b)/q.gv._zoom/G:k*("square"===u._61o?.71:.5)+H+b/q.gv._zoom/G,P&&(P*=G,h=rj(h),Mo(h,P,u._62o)),q._68o(h);var K=E("clip.percentage");K!=n&&(u.clipRect=zr(e.getAnchorRect(),E("clip.direction"),K));var I=E("shape.fill.clip.percentage");I!=n&&(u.shapeClipRect=zr(e.getAnchorRect(),E("shape.fill.clip.direction"),I));var m=E("shape.foreground.clip.percentage");m!=n&&(u.shapeForegroundClipRect=zr(e.getAnchorRect(),E("shape.foreground.clip.direction"),m))}},getPosition:function(p,L,V,h){var B=this._99o;if(B){var C=_m(p,B.rect,h);return C.x+=L,C.y+=V,C}return rm},_42:function(k){this._99o&&Ac.superClass._42.call(this,k)},_80o:function(Y){var E,O=this,b=O.s,t=O._99o,L=t.position,g=t.scale,X=t.rotation,B=t.borderWidth,R=O.gv._zoom,j=t.selectWidth/R,D=t._27Q,N=t.shapeGradientPack,h=t._54o,H=t.clipRect,C=t.shapeClipRect,S=t.points,o=t.segments,T=O._data.isClosePath(),n=t.fillRule,m=t.gray,a=function(N){return m?Q.toGrayColor(N):N},W=a(t._53o),i=W||D||N;Y.save(),on(Y,L.x,L.y),Hd(Y,X),bp(Y,g.x,g.y),H&&(Y.beginPath(),Y.rect(H.x,H.y,H.width,H.height),Y.clip()),i&&C&&(Y.save(),Y.beginPath(),Y.rect(C.x,C.y,C.width,C.height),Y.clip());var U=rj(t.rect);f.Default.extractShapeTranslation?(S=rj(S),S.forEach(function(r){r.x-=L.x,r.y-=L.y}),U.x-=L.x,U.y-=L.y):on(Y,-L.x,-L.y);var F=b("shape.border.width.absolute"),d=t._60o;F&&d&&(d=d.map(function(S){return S*R}));var J=Br(Y,d),V=Y.lineJoin,x=Y.lineCap;Y.lineJoin=t._62o,Y.lineCap=t._61o;var K=a(t.bodyColor);i?(pg(Y,S,o,T),N?Hj(Y,N,function($){return Pm($,t.bodyColor)},!1,U):D?xg(Y,D,K,null,O._data,O.gv):(E=K?K:W,Uq(Y,E,t.shapeGradient,a(t._59o),t.gradientRect)),Y.fill(n),N&&Y.restore(),C&&(Y.restore(),on(Y,-L.x,-L.y)),J!==Y&&pg(J,S,o,T)):pg(J,S,o,T);var A=t.shapeForeground;if(A){Y.save();var P=t.shapeForegroundClipRect;P&&(on(Y,L.x,L.y),Y.beginPath(),Y.rect(P.x,P.y,P.width,P.height),Y.clip(),on(Y,-L.x,-L.y)),pg(Y,S,o,T),Uq(Y,A,b("shape.foreground.gradient"),a(b("shape.foreground.gradient.color")),t.gradientRect),Y.fill(n),Y.restore()}if(F&&(Y.save(),Y.setTransform(1,0,0,1,0,0)),j&&(Y.strokeStyle=t._97o,Y.lineWidth=h+2*(B+j),Y.stroke()),B&&(Y.strokeStyle=a(t.borderColor),Y.lineWidth=h+2*B,Y.stroke()),h){E=a(t._55o);var e=t.shapeBorderGradientPack;e?Hj(Y,e,a,!0,U):t.shapeBorderRepeatImage?Eh(Y,t.shapeBorderRepeatImage,E,null,O._data,O.gv):(!W&&K&&(E=K),Y.strokeStyle=E),Y.lineWidth=h,Y.stroke(),e&&Y.restore(),t._94o&&db(Y,E,a(t._95o),h,R,t._96o)}if(bh(Y,d),b("shape.dash")){var c=b("shape.dash.width")||h;if(c>0){d=b("shape.dash.pattern"),F&&(d=d.map(function(w){return w*R}));var J=Br(Y,d,O._2Q("shape.dash.offset"));J!==Y&&pg(J,S,o,T),O._1Q(Y,"shape",c,d)}}F&&Y.restore(),Y.lineJoin=V,Y.lineCap=x,Y.restore()},_48O:function(){},_47O:function(){}});var uh=function(E,T){Ig(uh,this,[E,T])};vn(uh,Ac,{getRotation:function(){var F=new gd,E=new gd,X=new Ci;return function(H,Q,K){H=H||0;var e=this._data,U=e.getPoints(),m=U.size();if(m>1){var S,c,T=e.p(),i=e.getScale();if(X.identity().translate(-T.x,-T.y).scale(i.x,i.y).translate(T.x,T.y),qp[K]){var Z=m%2,v=(m-Z)/2;S=U.get(v-1),c=U.get(v)}else Mj[K]?(S=U.get(0),c=U.get(1)):(S=U.get(m-2),c=U.get(m-1));return X.apply(S,F),X.apply(c,E),po(F,E,Q,H)}return H}}(),getPosition:function(){var s=new gd,e=new gd,u=new gd;return function(G,a,V,k,h){var c=this._data,U=c.getPoints(),C=U.size();if(C>1){var m,r,R=c.getPointsMatrix2d();if(qp[G]){var x=C%2,l=(C-x)/2;if(m=U.get(l-1),r=U.get(l),0!==x){var I=_m(G,rm,k);return I.x+=a,I.y+=V,R.apply(m,s),R.apply(r,e),R.identity().rotate(u.copy(e).sub(s).angle()).apply(I,s).add(e)}}else Mj[G]?(m=U.get(0),r=U.get(1)):(m=U.get(C-2),r=U.get(C-1));return R.apply(m,s),R.apply(r,e),$p(s,e,G,a,V,k,h)}return rm}}()});var Up=function(v,K){Ig(Up,this,[v,K])};vn(Up,le,{_3O:function(){var U=this;Up.superClass._3O.call(U);var X=U.s,G=U._83o;U._82o=G.img||G.shape?O:{background:U.getBodyColor("grid.background"),depth:X("grid.depth"),rect:G.rect,_88o:X("grid.cell.depth"),cellBorderColor:X("grid.cell.border.color"),_89o:X("grid.row.count"),_90o:X("grid.column.count"),block:X("grid.block"),_91o:X("grid.block.color"),_92o:X("grid.block.padding"),_93o:X("grid.block.width")}},_80o:function(M){var d=this,w=d._82o;if(!w)return Up.superClass._80o.call(d,M),void 0;var j,p,z=d._data,y=w.background,n=w.rect,m=w.block,B=w._91o,N=w._92o,A=w._93o,D=w._88o,L=w.cellBorderColor,r=w._89o,u=w._90o;if(y)if(Kl(M,n.x,n.y,n.width,n.height,y),Wi(M,y,w.depth,n),D)for(j=0;r>j;j++)for(p=0;u>p;p++)n=z.getCellRect(j,p),n&&Wi(M,y,D,n);else if(L){for(M.beginPath(),j=0;r>j;j++)for(p=0;u>p;p++)n=z.getCellRect(j,p),n&&M.rect(n.x,n.y,n.width,n.height);M.strokeStyle=L,M.lineWidth=1,M.stroke()}if("h"===m)for(j=0;r>j;j++)n=$b(z.getCellRect(j,0),z.getCellRect(j,u-1)),Zp(n,N),Ed(M,B,n.x,n.y,n.width,n.height,A);else if("v"===m)for(p=0;u>p;p++)n=$b(z.getCellRect(0,p),z.getCellRect(r-1,p)),Zp(n,N),Ed(M,B,n.x,n.y,n.width,n.height,A);d._39O(M,d._83o)}});var up=function(h,E){Ig(up,this,[h,E])},cq=k?qb().getContext("2d"):O;vn(up,le,{_checkEmptyRect:!1,_81o:function(){var j=this._data,T=up.superClass._81o.call(this),Y=j.s("text");if(Y!=O){Y+="";var H,k=j.s("text.font"),B=j.s("text.align"),D=j.s("text.vAlign"),m=j.s("text.wrap"),K=j.s("text.vertical"),R=j.s("text.vertical.gap"),$=j.s("text.letter.gap")||0,W=j.getWidth(),i=j.getHeight();
if(null==R&&(R=1),K){var Z;Z=m?hn(Y,i,k,$,K,R):[Y];var v=(Z.length-1)*$,A=0;cq.textBaseline=pj,cq.font=k,Z.forEach(function(O){for(var N=O.length,$=0,p=(N-1)*R,d=0;N>d;d++){var r=cq.measureText(O[d]);p+=r.fontBoundingBoxDescent||Ye(k,O[d]).height,$=C($,r.width)}v+=$,A=C(p,A)});var d=(Z.length-1)*$;Z.forEach(function(s){d+=s}),H={width:v,height:A}}else{var Z=m?hn(Y,W,k,$,K,R):Y.split("\n"),w=Z.length;if(w>1){var c=Ye(k,Y).height,v=0,A=c*w+R*(w-1);Z.forEach(function(D){v=C(v,Ye(k,D).width)}),H={width:v,height:A}}else H=Ye(k,Y),$&&(H.width+=(Y.length-1)*$)}var N,E,Q=H.width,f=H.height,n=j.getAnchor();"left"===B?N=-W*n.x:"center"===B?N=-W*n.x+(W-Q)/2:"right"===B&&(N=W*(1-n.x)-H.width),"top"===D?E=-i*n.y:"middle"===D?E=-i*n.y+(i-f)/2:"bottom"===D&&(E=i*(1-n.y)-H.height);var g,V=j.getMatrix();if(g=pe([V.tf(N,E),V.tf(N+Q,E),V.tf(N+Q,E+f),V.tf(N,E+f)]),T=$b(T,g),T&&j.s("text.shadow")){var t=rj(T);t.x+=j.s("text.shadow.offset.x"),t.y+=j.s("text.shadow.offset.y"),Zp(t,j.s("text.shadow.blur")),T=$b(T,t)}}return T}});var Nf=mo.Interactor=function(M){this.gv=this._graphView=M};ni("Interactor",y,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(F){this.gv.fi(F)},setCursor:function(O){eb||this.gv.setCursor(O)},startDragging:function(w){var C=this;C._lastClientPoint=_d(w),C._lastLogicalPoint=C.gv.lp(w),ug(C,w)},clearDragging:function(){var I=this;I._lastClientPoint=I._lastLogicalPoint=I._logicalPoint=O},autoScroll:function(r){return this.gv.autoScroll(r,this._lastClientPoint)}});var ye=O,kb=function(o){ye.handleWindowTouchMove(o)},vp=function(v){ye.handleWindowTouchEnd(v),V(H,co,kb),V(H,ro,vp),ye=O},Mr=function(s){ye.handleWindowMouseMove(s)},hg=function(u){ye.handleWindowMouseUp(u),V(H,hm,Mr),V(H,km,hg),ye=O},Fm=function(T,X){if(T!==ye){var U=Nd(X);ye?U?ye.handleWindowTouchEnd(X):ye.handleWindowMouseUp(X):U?(e(H,co,kb),e(H,ro,vp)):(e(H,hm,Mr),e(H,km,hg)),ye=T}},Pc=function(b){var z=this;z.gv=b,z._is2d=b instanceof mo.GraphView,z._eventListeners={},["mousedown","mousemove","mouseleave","touchstart","touchmove",Zb,"wheel"].forEach(function(D){z.addListener(D)}),z.initImageResource()};vn(Pc,Nf,{enableVR:function(e){var Q=this;!!Q._vrEnable!==e&&(Q._vrEnable=e,e?Q.gv.vr.mp(Q.onVRControllerChange,Q):Q.gv.vr.ump(Q.onVRControllerChange,Q))},onVRControllerChange:function(r){var V=this,K=r.property,m=r.newValue,Z=m.id,O=V.gv.vr.getController(Z),U=O.getRay();if(U){U.controllerId=Z;var Y=V.gv.vr.getRayEventType(U,K,m[$e]);switch(Y){case"down":V.handle_mousedown(U);break;case"up":ye&&hg(U);break;case"move":V.handle_mousemove(U),ye&&V.handleWindowMouseMove(U)}}},setPreventEventDefault:function(T,h){var D=this,e=D._eventListeners[T];e?e._prevent=h:D._eventListeners[T]=e={_removal:n,_prevent:h}},removeListener:function(c){var z=this,C=z._eventListeners[c];C&&C._removal&&(C._removal(),C._removal=n)},addListener:function(w){var I=this,k=I._eventListeners[w];if(k||(I._eventListeners[w]=k={_removal:n,_prevent:!0}),!k||!k._removal){var M=function(d){k._prevent&&Q.preventDefault(d),I.disabled||I.gv._48Q||("wheel"===w?xq(I,d):I["handle_"+w](d))};e(I.gv.getView(),w,M),k._removal=function(){V(I.gv.getView(),w,M)}}},handleWindowTouchMove:function(u){this.handleWindowMouseMove(u)},handleWindowMouseMove:function(A){return!this.downInfo||Nd(A)&&1!==Nl(A)?(this.isDragging&&(this.handleDownInfo("onEndDrag",A),this.isDragging=!1),void 0):(this.isDragging?this.handleDownInfo("onDrag",A):(this.handleDownInfo("onBeginDrag",A),this.isDragging=!0),void 0)},handleWindowTouchEnd:function(s){this.handleWindowMouseUp(s)},handleWindowMouseUp:function(T){if(this.isDragging&&(this.handleDownInfo("onEndDrag",T),this.isDragging=!1),this.downInfo){var L=this.handle("onUp",T);if(L&&L.data===this.downInfo.data){this.handleMissingUp(T);var R=this,x=2===T.button?"onContextMenu":"onClick",$=L.data;if($.s("disableDoubleClick")||!R._dbclickTimer)return R._dbclickTimer=yd(function(){delete R._dbclickTimer,R.handleClick(T,x,L),this.downInfo=O},Q.clickDelay),void 0;rn(R._dbclickTimer),delete R._dbclickTimer,x="onDoubleClick",R.handleClick(T,x,L)}else this.handleDownInfo("onUp",T);this.downInfo=O,this.downComps=O}},handle_mouseleave:function(_){var n=this,R=n.gv;n._hoverTimer&&(rn(n._hoverTimer),delete n._hoverTimer);var J=n.currentInfo?n.currentInfo.data:O;if(J){J.s("onLeave")&&J.s("onLeave")(_,J,R),n.fire("data","onLeave",_,J);var H=n.currentInfo?n.currentInfo.hits:O;if(H)for(var U in H)n.handleLeave(_,U);n.currentInfo=O}},handle_mousewheel:function(Y){Y.scrollDelta=Y.wheelDelta/40,this.handle("onScroll",Y)},handle_DOMMouseScroll:function(A){A.scrollDelta=2===A.axis?-A.detail:0,this.handle("onScroll",A)},handle_touchstart:function(o){this.handle_mousedown(o)},handle_touchmove:function(Y){this.handle("onMove",Y)},handle_mousedown:function(b){this.isDragging&&(this.handleDownInfo("onEndDrag",b),this.isDragging=!1),this.downComps=[],this.downInfo=this.handle("onDown",b),this.downInfo&&Fm(this,b)},handle_mousemove:function(D){var B=this,F=B.gv;if(B._hoverTimer&&(rn(B._hoverTimer),delete B._hoverTimer),!F._panning&&!F._moving){var o,X,L,u=B.handle("onMove",D),U=this.currentInfo?this.currentInfo.data:O,z=this.currentInfo?this.currentInfo.hits:O;if(u&&(X=u.data,L=u.hits,B._hoverTimer=yd(function(){rn(B._hoverTimer),delete B._hoverTimer,B.handle("onHover",D,u)},F.getHoverDelay()||Q.hoverDelay)),X!==U){if(U&&(U.s("onLeave")&&U.s("onLeave")(D,U,F),this.fire("data","onLeave",D,U)),X&&(X.s("onEnter")&&X.s("onEnter")(D,X,F),this.fire("data","onEnter",D,X)),z)for(o in z)this.handleLeave(D,o);if(L)for(o in L){var M=L[o],V=X._interactPrefix=M.prefix,J=V&&X.a(V+"onEnter")||M.target.onEnter;J&&J.call(M.target,D,X,F,M.point,M.width,M.height),this.fire(M.type,"onEnter",M.event,M.data,M.image,M.comp,M.point,M),X._interactPrefix=null}}else{if(z)for(o in z)L&&L[o]||this.handleLeave(D,o);if(L)for(o in L)if(!z||!z[o]){var M=L[o],V=X._interactPrefix=M.prefix,J=V&&X.a(V+"onEnter")||M.target.onEnter;J&&J.call(M.target,D,X,F,M.point,M.width,M.height),this.fire(M.type,"onEnter",M.event,M.data,M.image,M.comp,M.point,M),X._interactPrefix=null}}this.currentInfo=u}},handle:function($,q,J){var H,C=this,Q=C.gv;if(C._is2d){if(J=J||Q.getDataInfoAt(q),!J||!Q.isInteractive(J.data))return;if(H=J.ui.interactiveInfo){var j,P=J.data;if(P.s($)&&P.s($)(q,P,Q),this.fire("data",$,q,P),"body"===J.part&&H.bodyInfo)j="body",J.hits=this.handleImage(j,Q.getImage(P),$,q,P,J.point,H.bodyInfo);else if("icons"===J.part&&H._38o){var l=H._38o[J.name];l&&l[J.index]&&(j="icons|"+J.name+"|"+J.index,J.hits=this.handleImage(j,J.icon,$,q,P,J.point,l[J.index]))}}return J}var P,K;if(!J)if(q&&q instanceof f.Math.Ray&&Q.isVREnabled()){var V=Q.vr.intersectWorld(q);if(P=V.data,K=V.intersect,Q.vr.renderRayDuringInteraction(q,P,K),!P)return;var Z=Q.getData3dUI(P);if(H=Z.interactiveInfo,!H)return;J={data:P,part:K.part,ui:Z}}else{if(J=this.getDataInfoAt(q),!J)return;J&&(J={data:J.data,part:J.part})}if(Q.isInteractive(J.data)){if(!K){P=J.data;var Z=Q.getData3dUI(P);if(J.ui=Z,H=Z.interactiveInfo,!H)return J;if(K=Q.intersectObject(q,P),!K)return J}P.s($)&&P.s($)(q,P,Q),this.fire("data",$,q,P);var U,y=K.part;return"body"!==y&&(U=P.s(y+".image")||P.s("shape3d."+y+".image")),U||(U=P.s("all.image")||P.s("shape3d.image")),U?(H="object"==typeof U?H[U.uuid]:H[U],H&&H.bodyInfo?(J.part="body",J.interactiveInfo=H,J.point=this._convertUVToPoint(K.uv,H,P,y,U),J.image=U,J.hits=this.handleImage("body",U,$,q,P,J.point,H.bodyInfo),J):J):J}},_handleLeaveOrMissing:function(J,l,u){var a="leave"===J?this.currentInfo:this.downInfo;if(a){var X=a.interactiveInfo||a.ui.interactiveInfo;if(X){var D,t,U=a.data;if(this._is2d){if(t=this.gv.lp(l),"body"===a.part&&X.bodyInfo)D="body","leave"===J?this.handleLeaveImage(u,D,this.gv.getImage(U),l,U,t,X.bodyInfo):this.handleMissingUpImage(D,this.gv.getImage(U),l,U,t,X.bodyInfo);else if("icons"===a.part&&X._38o){var m=X._38o[a.name];m&&m[a.index]&&(D="icons|"+a.name+"|"+a.index,"leave"===J?this.handleLeaveImage(u,D,a.icon,l,U,t,m[a.index]):this.handleMissingUpImage(D,a.icon,l,U,t,m[a.index]))}}else{if(!X.bodyInfo)return;var e=this.gv.intersectObject(l,U);t=e&&e.uv?this._convertUVToPoint(e.uv,X,U,e.part,a.image):{x:1/0,y:1/0},"leave"===J?this.handleLeaveImage(u,"body",a.image,l,U,t,X.bodyInfo):this.handleMissingUpImage("body",a.image,l,U,t,X.bodyInfo)}}}},handleClick:function(P,U,R){var g=this,t=this.downInfo;if(t&&R){var k,d=R.interactiveInfo||R.ui.interactiveInfo,v=R.data,C=this.gv;if(v.s(U)&&v.s(U)(P,v,C),g.fire("data",U,P,v),d)if(this._is2d){if(t.part===R.part){var L=C.lp(P);"body"===R.part&&d.bodyInfo&&(k="body",this.handleClickImage(k,C.getImage(v),U,P,v,L,d.bodyInfo,R))}}else{if(!d.bodyInfo)return;var m=C.intersectObject(P,v);if(!m)return;L=this._convertUVToPoint(m.uv,d,v,m.part,t.image),this.handleClickImage("body",t.image,U,P,v,L,d.bodyInfo,R)}}},handleDownInfo:function(D,s){if(this.downInfo){var O=this.downInfo,C=this.gv,P=O.interactiveInfo||O.ui.interactiveInfo;if(P){var N,J=O.data;if(J.s(D)&&J.s(D)(s,J,C),this.fire("data",D,s,J),this._is2d){var k=C.lp(s);if("body"===O.part&&P.bodyInfo)N="body",this.handleDownInfoImage(N,C.getImage(J),D,s,J,k,P.bodyInfo);else if("icons"===O.part&&P._38o){var o=P._38o[O.name];o&&o[O.index]&&(N="icons|"+O.name+"|"+O.index,this.handleDownInfoImage(N,O.icon,D,s,J,k,o[O.index]))}}else{if(!P.bodyInfo)return;var $;if("onBeginDrag"===D?($=C._raycaster.intersectObjectAndRecordTriangle(s,J),$&&(P.beginDragIntersectInfo=$.triangleInfo)):$=C.intersectObject(s,J),!$&&("onDrag"!==D&&"onEndDrag"!==D||!P.beginDragIntersectInfo||($=C._raycaster.intersectLastTriangle(s,P.beginDragIntersectInfo)),!$))return;k=this._convertUVToPoint($.uv,P,J,$.part,O.image),this.handleDownInfoImage("body",O.image,D,s,J,k,P.bodyInfo)}}}},fire:function(k,P,o,X,H,j,v,f){this.gv.fi({kind:P,type:k,event:o,data:X,image:H,comp:j,view:this.gv,point:v,width:f?f.width:n,height:f?f.height:n})},handleImage:function(U,_,d,W,Q,D,r){var v={};if(_&&(_=Nn(_))){var o=this.gv,K=r.rect,B=this.convertPoint(D,r);B.inRect&&(_[d]&&_[d](W,Q,o,B,K.width,K.height),this.fire("image",d,W,Q,_,n,B,K),v[U+"|image"]={target:_,type:"image",image:_,data:Q,event:W,point:B,width:K.width,height:K.height});for(var C,t=r.compInfos,S=_,e=t.length-1;e>=0;e--){var i=t[e],w=i.comp;if(B=this.convertPoint(D,i,S,w,o,Q),B.inRect){K=i.rect;var E=Q._interactPrefix=i.prefix,s=E&&Q.a(E+d)||w[d];if(s&&(C=s.call(w,W,Q,o,B,K.width,K.height)),this.fire("comp",d,W,Q,_,w,B,K),C!==!0&&(_=K.image)&&(_[d]&&(C=_[d](W,Q,o,B,K.width,K.height)),this.fire("image",d,W,Q,_,n,B,K)),Q._interactPrefix=null,v[U+"|"+e]={target:w,type:"comp",comp:w,image:_,data:Q,event:W,point:B,width:K.width,height:K.height,prefix:E},this.downComps&&this.downComps.push(w),_&&(v[U+"|"+e+"|image"]={target:_,type:"image",image:_,data:Q,event:W,point:B,width:K.width,height:K.height,prefix:E}),C===!0)break}}}return v},handleLeave:function(q,l){return this._handleLeaveOrMissing("leave",q,l)},handleMissingUp:function(a){return this._handleLeaveOrMissing("missing",a)},handleLeaveImage:function(Y,C,r,R,b,u,h){if(r&&(r=Nn(r))){var k=this.gv,v=h.rect,M=this.convertPoint(u,h);Y===C+"|image"&&(r.onLeave&&r.onLeave(R,b,k,M,v.width,v.height),this.fire("image","onLeave",R,b,r,n,M,v));for(var o,q=h.compInfos,Q=r,i=q.length-1;i>=0;i--){var a=q[i],w=a.comp;M=this.convertPoint(u,a,Q,w,k,b),v=a.rect;var m=b._interactPrefix=a.prefix;if(Y===C+"|"+i){var H=m&&b.a(m+"onLeave")||w.onLeave;H&&(o=H.call(w,R,b,k,M,v.width,v.height)),this.fire("comp","onLeave",R,b,r,w,M,v)}if(o!==!0&&(r=v.image)&&Y===C+"|"+i+"|image"&&(r.onLeave&&(o=r.onLeave(R,b,k,M,v.width,v.height)),this.fire("image","onLeave",R,b,r,n,M,v)),b._interactPrefix=null,o===!0)break}}},handleMissingUpImage:function(N,I,M,h,w,R){var U="onUp",A=this.downInfo.hits;if(A&&I&&(I=Nn(I))){var u=this.gv,z=R.rect,B=this.convertPoint(w,R);!B.inRect&&A[N+"|image"]&&(I[U]&&I[U](M,h,u,B,z.width,z.height),this.fire("image",U,M,h,I,n,B,z));for(var i,Z=R.compInfos,G=I,b=Z.length-1;b>=0;b--){var _=Z[b],S=_.comp;if(B=this.convertPoint(w,_,G,S,u,h),!B.inRect){z=_.rect;var D=h._interactPrefix=_.prefix;if(A[N+"|"+b]){var m=D&&h.a(D+U)||S[U];m&&(i=m.call(S,M,h,u,B,z.width,z.height)),this.fire("comp",U,M,h,I,S,B,z)}if(i!==!0&&(I=z.image)&&A[N+"|"+b+"|image"]&&(I[U]&&(i=I[U](M,h,u,B,z.width,z.height)),this.fire("image",U,M,h,I,n,B,z)),h._interactPrefix=null,i===!0)break}}}},handleDownInfoImage:function(v,$,w,b,E,z,Q){var p=this.downInfo.hits;if(p&&$&&($=Nn($))){var F=this.gv,P=Q.rect,u=this.convertPoint(z,Q);p[v+"|image"]&&($[w]&&$[w](b,E,F,u,P.width,P.height),this.fire("image",w,b,E,$,n,u,P));for(var T,J=Q.compInfos,e=$,c=J.length-1;c>=0;c--){var D=J[c],d=D.comp;u=this.convertPoint(z,D,e,d,F,E),P=D.rect;var f=E._interactPrefix=D.prefix,M=["onDrag","onEndDrag"].indexOf(w)>=0;if(!M&&p[v+"|"+c]||M&&this.downComps&&this.downComps.indexOf(d)>=0){var I=f&&E.a(f+w)||d[w];I&&(T=I.call(d,b,E,F,u,P.width,P.height)),this.fire("comp",w,b,E,$,d,u,P)}if(T!==!0&&($=P.image)&&p[v+"|"+c+"|image"]&&($[w]&&(T=$[w](b,E,F,u,P.width,P.height)),this.fire("image",w,b,E,$,n,u,P)),E._interactPrefix=null,T===!0)break}}},handleClickImage:function(D,K,t,X,o,s,y,w){var V=this.downInfo.hits,g=w.hits;if(V&&K&&(K=Nn(K))){var a=this.gv,k=y.rect,J=this.convertPoint(s,y);V[D+"|image"]&&(K[t]&&K[t](X,o,a,J,k.width,k.height),this.fire("image",t,X,o,K,n,J,k));for(var S,Y=y.compInfos,C=K,Z=Y.length-1;Z>=0;Z--){var H=Y[Z],c=H.comp;J=this.convertPoint(s,H,C,c,a,o),k=H.rect;var W=o._interactPrefix=H.prefix;if(V[D+"|"+Z]&&g[D+"|"+Z]){var E=W&&o.a(W+t)||c[t];E&&(S=E.call(c,X,o,a,J,k.width,k.height)),this.fire("comp",t,X,o,K,c,J,k)}if(S!==!0&&(K=k.image)&&V[D+"|"+Z+"|image"]&&(K[t]&&(S=K[t](X,o,a,J,k.width,k.height)),this.fire("image",t,X,o,K,n,J,k)),o._interactPrefix=null,S===!0)break}}},initImageResource:function(){Q.setImage("coreInteractorRayHitImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",opacity:.3,rotation:-1.593,rect:[.73315,.6933,14.5337,14.61341]},{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",rotation:-1.593,rect:[3.56695,3.75073,8.8661,8.49856]}]})},_convertUVToPoint:function(g,Y,z,k,i){if(!g)return{x:1/0,y:1/0};var K=Y.bodyInfo.rect;if(z&&i){var R,l;if("body"===k?(l=z.s("shape3d.uv.scale"),R=z.s("shape3d.uv.offset")):(l=z.s(k+".uv.scale")||z.s("all.uv.scale"),R=z.s(k+".uv.offset")||z.s("all.uv.offset")),l||R){i=Q.getImage(i);var G=Tc.isPOT(i.width)&&Tc.isPOT(i.height),M=g.x*(l?l[0]:1)+(R?R[0]:0),x=g.y*(l?l[1]:1)+(R?R[1]:0);G&&(M=M%1+(M>0?0:1),x=x%1+(x>0?0:1)),g.set(M,x)}}var J=g.clone(),E=g.multiply({x:K.width,y:K.height});return E.local=J,E},convertPoint:function(j,y,L,C,W,N){var S=y.rect,H=y.matrix.applyInverse(j).sub(S),P=H.x>=0&&H.y>=0&&H.x<=S.width&&H.y<=S.height;if(!P)return H;if(C&&rq(C.pixelPerfect,N,W)){var S,X=1;this._is2d?(X=W.getZoom(),S=zj(j.x,j.y,n,X)):S=zj(j.x,j.y);var V=!1,T=S.x,p=S.y,I=S.width,A=S.height,t=Q.hitMaxArea,d=I*A*X*X;if(d>t){var f=Math.sqrt(t/d);X*=f}I*=X,A*=X,2>I&&(I=2),2>A&&(A=2),T*=X,p*=X;var R=rp(I,A),v=new Ci(0,-T,-p,X,X);v.append(y.matrix),W._drawForChecking=!0,C.transform=v;var F=L.fitSize;y.refRect&&y.refRect.fitSize?(C.refRect=y.refRect,L.fitSize=!0):L.fitSize=!1;var w=L.comps;L.comps=[C],Nq(R,L,0,0,I,A,N,self),L.comps=w,L.fitSize=F,delete C.refRect,delete C.unionRect,delete C.transform,W._drawForChecking=!1;try{for(var Y=0,b=R.getImageData(0,0,I,A).data;Y<b.length;Y+=4)if(0!==b[Y+3]){V=!0;break}R.restore()}catch(c){so=O,V=!1}H.inRect=V}else H.inRect=!0;return H},getDataInfoAt:function(s,R){return Us.prototype.getDataInfoAt.call(this,s,R)}});var Ak=mo.DefaultInteractor=function(K){Ig(Ak,this,[K])};ni("DefaultInteractor",Nf,{handle_mousedown:function(P){tn(P);var c=this,e=c.gv,T=e.getDataAt(P);if(e.setFocus(P)&&!e._editing&&!e._scrolling){Tn(P)?e.handleDoubleClick(P,T):e.handleClick(P,T);var $=Wr(P);!vr()&&!$&&T&&(e.isMovable(T)||e._39Q(T))||!e.isPannable()||!Hb(P)&&!$||Pp(P)||(c._tx=e.tx(),c._ty=e.ty(),c.startDragging(P))}},handleWindowMouseUp:function(G){var l=this,P=l.gv;P._panning&&(delete P._panning,P.onPanEnded(),l.fi({kind:"endPan",event:G})),delete l._tx,delete l._ty,l.clearDragging()},handle_mousemove:function(t){var q=this,y=q.gv;q._hoverTimer&&(rn(q._hoverTimer),delete q._hoverTimer),q._hoverTimer=yd(function(){q.fi({kind:"hover",event:t}),rn(q._hoverTimer),delete q._hoverTimer},y.getHoverDelay()||Q.hoverDelay)},handle_mouseleave:function(){var T=this;T._hoverTimer&&(rn(T._hoverTimer),delete T._hoverTimer)},handleWindowMouseMove:function(K){var o=this,k=o.gv;o.fi({kind:k._panning?"betweenPan":"beginPan",event:K}),k._panning=1;var F=Lo(k,K,o._lastClientPoint);k.setTranslate(o._tx+F.x,o._ty+F.y)},handle_mousewheel:function(H){this.gv.handleScroll(H,H.wheelDelta)},handle_DOMMouseScroll:function(w){2===w.axis&&this.gv.handleScroll(w,-w.detail)},handle_keydown:function(F){this.gv.handleKeyDown(F)}});var Jc=mo.SelectInteractor=function(V){Ig(Jc,this,[V])};ni("SelectInteractor",Nf,{_42:function(){var F=this,k=F.gv,U=k.getZoom(),E=F.mark,$=F.div;$||($=F.div=Lj(),Vi(F.getView(),$));var u={};u.x=E.x*U+k.tx(),u.y=E.y*U+k.ty(),u.width=E.width*U,u.height=E.height*U,oc($,u),this.intersects()?($.style.border="",$.style.background=k.getRectSelectBackground()):($.style.background="",$.style.border="1px solid "+k.getRectSelectBorderColor())},handle_mousedown:function(M){var f=this,l=f.gv;if(f._57I=O,f.pendingClickThrough=O,!(l._editing||l._scrolling||vr()||Wr(M))){var u=l.getDataAt(M),x=l.sm();u?Pp(M)?x.co(u)?x.rs(u):x.as(u):x.co(u)?u instanceof $c&&u.isClickThroughEnabled()&&Hb(M)&&(f.pendingClickThrough=_d(M)):x.ss(u):Pp(M)||!l.isPannable()?Hb(M)&&(Pp(M)||x.cs(),l.isRectSelectable()&&(f.startDragging(M),l._77O=1)):Hb(M)&&(f._57I=_d(M))}},handle_mouseup:function(P){var $=this,A=$.gv,q=$._57I;if(q&&(xh(q,_d(P))<=1&&A.sm().cs(),$._57I=O),$.pendingClickThrough){if(xh($.pendingClickThrough,_d(P))<=1){var _=A.getDataAt(P);if(_ instanceof $c&&_.isClickThroughEnabled()){var g=A.getDataAt(P,function(s){var x=s.getParent()===_&&A.isSelectable(s,!0);return x});g&&(P.clickThrough=!0,A.sm().ss(g))}}$.pendingClickThrough=O}},handleWindowMouseUp:function(m){this.clear(m)},handleWindowMouseMove:function(c){var Q=this,f=Q.gv;Q._logicalPoint=f.lp(c),Q.mark?(Q.fi({kind:"betweenRectSelect",event:c}),f.isPannable()&&Q.autoScroll(c),Q.redraw()):Q.fi({kind:"beginRectSelect",event:c}),Q.mark=pe(Q._lastLogicalPoint,Q._logicalPoint),Q.redraw()},intersects:function(){var Q=this,y=Q._lastLogicalPoint,o=Q._logicalPoint;return y.x>o.x||y.y>o.y},clear:function(y){var G=this,W=G.gv,g=G.mark;if(G._57I=O,G.pendingClickThrough=O,G._lastLogicalPoint){if(g){if(0!==g.width&&0!==g.height){var b=W.getDatasInRect(g,G.intersects());if(!b.isEmpty()){var i=W.sm(),C=i.toSelection(),n=Sl(y),$=y.altKey;b.each(function(q){i.co(q)?(!n||n&&$)&&C.remove(q):(!$||n&&$)&&C.add(q)}),i.ss(C)}}jf(G.div),delete G.div,delete G.mark,G.redraw(),G.fi({kind:"endRectSelect",event:y}),W.onRectSelectEnded()}G.clearDragging(),delete W._77O}},redraw:function(){var g=this;g._draw||(g._draw=1,yd(function(){g.mark&&g._42(),delete g._draw},16))}});var sm=mo.MoveInteractor=function(i){Ig(sm,this,[i])};ni("MoveInteractor",Nf,{handle_mousedown:function(m){var e=this,I=e.gv;if(Hb(m)&&!I._editing&&!I._scrolling&&!vr()){var S=I.getSelectedDataAt(m);!S||I._39Q(S)&&!I.isMovable(S)?I._focusData=O:(e._data=S,I.handleMouseDown&&I.handleMouseDown(m,S),e.startDragging(m),I.isMovable(S)&&(I._moving=1))}},handleWindowMouseUp:function(Z){var w=this,e=w.gv;e.handleMouseUp&&e.handleMouseUp(Z,w._data),w.clear(Z)},handleWindowMouseMove:function(y){var W=this,R=W._data,p=W.gv;if((!p._93O||!p._93O(y,R))&&p._moving){W._logicalPoint||W.fi({kind:"prepareMove",event:y});var T=W._logicalPoint?"betweenMove":"beginMove",V={kind:T,event:y},h=W._logicalPoint=p.lp(y);"beginMove"!==T||W._alreadyBeginTransaction||(W._alreadyBeginTransaction=!0,p.getDataModel().beginTransaction());var v=W._calcShift(T,y),C=v.x,J=v.y,_=W.gv.getMoveMode(y,R);_&&("x"===_?J=0:"y"===_?C=0:"xy"!==_&&(C=J=0)),p.moveSelection(C,J),W._lastLogicalPoint=h,W.autoScroll(y),W.fi(V)}},_calcShift:function(){var d=this,G=d._logicalPoint,O=d._lastLogicalPoint,P=G.x-O.x,u=G.y-O.y;return{x:P,y:u}},clear:function($){var S=this,U=S.gv;S._lastLogicalPoint&&(S._lastLogicalPoint=S._data=U._moving=O,S._logicalPoint&&(S.fi({kind:"endMove",event:$}),U.onMoveEnded()),S.clearDragging()),S._alreadyBeginTransaction&&(S._alreadyBeginTransaction=!1,U.getDataModel().endTransaction())}});var kf=mo.TextEditInteractor=function(q){Ig(kf,this,[q]),this.init()};ni("TextEditInteractor",Nf,{setUp:function(){var o=this;kf.superClass.setUp.call(o),o.gv.mp(o.handleGvPropertyChange,o)},teatDown:function(){var L=this;kf.superClass.teatDown.call(L),L.gv.ump(L.handleGvPropertyChange,L)},handleGvPropertyChange:function(){this._editTarget&&this.endTextEdit()},init:function(){var u=this,b=this.input=k.createElement("input"),$=b.style;b.text="text",$.border="1px solid #d8d8d8",$.position="absolute",$.padding="2px 3px",$.outline="none",$.marginLeft="-90px",$.marginTop="-16px",$.backgroundColor="rgba(255,255,255, 1)",$.fontSize="14px",$.width="180px",$.height="32px",$.boxShadow="0 0 13px rgba(16,142,233, 0.5)",$.textAlign="center",$.boxSizing="border-box",e(b,"keyup",function(V){return Fe(V)&&u.endTextEdit(),af(V)?(u.endTextEdit(!0),void 0):void 0}),e(b,"focus",function(){b.select()});var o=this.textarea=k.createElement("textarea"),Z=this.wrap=k.createElement("div");Z.appendChild(o),$=o.style,$.margin=0,$.padding="4px",$.overflow="hidden",$.boxSizing="border-box",$.position="absolute",$.outline="none",$.backgroundColor="transparent",$.resize="none",$.textAlign="center",$.fontSize="14px",$.borderWidth=0,$.width="100%",$=Z.style,$.boxSizing="border-box",$.margin=0,$.padding=0,$.position="absolute",$.boxShadow="0 0 13px rgba(16,142,233, 0.5)",$.border="1px solid #d8d8d8",$.backgroundColor="rgba(255,255,255, 1)",$.zIndex="10",e(o,"keydown",function(n){return(Sl()||Pp())&&Fe(n)?(u.endTextEdit(),void 0):af(n)?(u.endTextEdit(!0),void 0):(u._editTarget instanceof Rm||u.calculateTextareaHeight(String.fromCharCode(n.keyCode)),void 0)}),e(o,"focus",function(){o.select()});var P=function(L){L.stopPropagation()};e(b,"mousedown",P),e(b,"touchstart",P),e(o,"mousedown",P),e(o,"touchstart",P),e(o,"click",P),u.SIZING_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],u.HIDDEN_TEXTAREA_STYLE="visibility:hidden; min-height:0 !important;max-height:none !important;height:0 !important;visibility:hidden !important;overflow:hidden !important;position:absolute !important;z-index:-1000 !important;top:0 !important;right:0 !important",u.handleWindowClick=function(n){var Q=u._editingDOM;if(Q){var t=Q.getBoundingClientRect(),p=_d(n);Ol(t,p)||u.endTextEdit()}}},handle_mousedown:function(F){var X=this,c=X.gv;if(Tn(F)&&!c._editing){var k=c.getDataAt(F);if(k){var n=c.getTextEditInfo(k);n&&(this._editInfo=n,this._editTarget=k,c._editing=!0,n.isMultiline?this.handleMultilineEdit():this.handleTextEdit())}}},handleMultilineEdit:function(){var C=this,y=C.gv,x=C._editTarget,w=C.getTargetValue(),W=C.textarea,Y=C.wrap,V=this._editInfo;this.hiddenTextarea||this.createHiddenTextarea(),(null===w||w===n)&&(w=""),W.value=w,V.font&&(W.style.font=V.font),C._editingDOM=W,y.appendHTML(Y),this.layoutHTML(Y,x),x instanceof Rm?W.style.height="100%":(W.style.height="auto",this.calculateTextareaHeight()),yd(function(){W.focus(),e(H,"mousedown",C.handleWindowClick),e(H,"touchstart",C.handleWindowClick)},10)},handleTextEdit:function(){var B=this,S=B.gv,t=B._editTarget,o=B.getTargetValue(),v=B.input;(null===o||o===n)&&(o=""),v.value=o,B._editingDOM=v,S.getView().appendChild(v),this.layoutHTML(v,t),yd(function(){v.focus(),e(H,"mousedown",B.handleWindowClick),e(H,"touchstart",B.handleWindowClick)},10)},layoutHTML:function(W,F){var V=this.gv,a=V.getZoom();if(F instanceof Rm){var v=V.getDataUI(F),X=v._6I,Q=F.getScale(),_=W.style;W.style.left=X.x*a+V.tx()+"px",W.style.top=X.y*a+V.ty()+"px",W.style.width=v._6I.width+"px",W.style.height=v._6I.height+"px",Go(_,"transform","scale("+a*Q.x+","+a*Q.y+")"),Go(_,"transformOrigin","0px 0px")}else if(F instanceof ih){var X=F.getRect(),G=X.width*a;W.style.left=(X.x+X.width/2)*a+V.tx()+"px",W.style.top=(X.y+X.height/2)*a+V.ty()+"px",W.style.width=G+"px",W.style.marginLeft=-G/2+"px"}else if(F instanceof f.Edge){var v=V.getDataUI(F),X=v._6I;W.style.left=(X.x+X.width/2)*a+V.tx()+"px",W.style.top=(X.y+X.height/2)*a+V.ty()+"px"}},endTextEdit:function(c){var N=this,b=N._editInfo.isMultiline?N.wrap:N.input,x=N._editInfo.isMultiline?N.textarea:N.input;c||N.setTargetValue(x.value),N.gv.getView().removeChild(b),N.gv._editing=!1,delete N._editingDOM,delete N._editTarget,V(H,"mousedown",N.handleWindowClick),V(H,"touchstart",N.handleWindowClick)},setTargetValue:function(j){var X=this,z=X._editTarget,H=X._editInfo,i=H.accessType,Z=H.name;if(Z&&i||(i="p",Z="name"),"p"===i){var a=f.Default.setter(Z);z[a](j)}else"a"===i?z.a(Z,j):z.s(Z,j)},getTargetValue:function(){var p=this,r=p._editTarget,n=p._editInfo,l=n.accessType,w=n.name;if(w&&l||(l="p",w="name"),"p"===l){var K=f.Default.getter(w);return r[K]()}return"a"===l?r.a(w):r.s(w)},createHiddenTextarea:function(){this.hiddenTextarea=k.createElement("textarea"),this.hiddenTextarea.setAttribute("style","margin:0; padding:0; position:absolute; overflowY:scroll; resize:none; box-sizing:border-box;pointer-events: none;opacity:0;"),this.hiddenTextarea.setAttribute("rows","1"),this.gv.getView().appendChild(this.hiddenTextarea)},calculateHTMLStyle:function(W,u){if(u&&this.computedStyleCache)return this.computedStyleCache;var Q=this,P=H.getComputedStyle(W),M=P.getPropertyValue("box-sizing")||P.getPropertyValue("-moz-box-sizing")||P.getPropertyValue("-webkit-box-sizing"),c=parseFloat(P.getPropertyValue("padding-bottom"))+parseFloat(P.getPropertyValue("padding-top")),A=parseFloat(P.getPropertyValue("border-bottom-width"))+parseFloat(P.getPropertyValue("border-top-width")),e=Q.SIZING_STYLE.map(function(H){return H+":"+P.getPropertyValue(H)}).join(";"),F={sizingStyle:e,paddingSize:c,borderSize:A,boxSizing:M};return u&&(this.computedStyleCache=F),F},calculateTextareaHeight:function(O){O=O||"";var l=this,A=l.textarea,i=l.hiddenTextarea,k=l.wrap,x=32,b=l.calculateHTMLStyle(A,!1),R=b.paddingSize,h=b.borderSize,J=b.boxSizing,K=b.sizingStyle;i.setAttribute("style",K+";"+l.HIDDEN_TEXTAREA_STYLE),i.value=A.value+O;var t=i.scrollHeight;"border-box"===J?t+=h:"content-box"===J&&(t-=R),A.style.height=t+"px",k.style.height=Math.max(t,x)+"px",k.style.marginTop=t*-.5+"px"}});var Bq=mo.ScrollBarInteractor=function(w){Ig(Bq,this,[w])};ni("ScrollBarInteractor",Nf,{_41o:function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},_40o:function(){return this.gv.getViewRect().width<this.gv.getScrollRect().width},isV:function(F){var r=this.gv.getViewRect();return this._41o()&&(r.x+r.width-this.gv.lp(F).x)*this.gv.getZoom()<Vm},isH:function(x){var V=this.gv.getViewRect();return this._40o()&&(V.y+V.height-this.gv.lp(x).y)*this.gv.getZoom()<Vm},handle_mousemove:function(g){this.handle_touchmove(g)},handle_touchmove:function(O){if(!Nh&&Hb(O)&&this.gv.isScrollBarVisible()){var j=this,Q=j.isV(O),Z=j.isH(O);(Q||Z)&&j.gv.showScrollBar(),j.gv._scrolling=Q||Z}},handleWindowMouseUp:function(U){this.handleWindowTouchEnd(U)},handleWindowTouchEnd:function(j){this._state=this._cp=this._tx=this._ty=this.gv._scrolling=O,this.fi({kind:"endScroll",event:j})},handle_mousedown:function(r){this.handle_touchstart(r)},handle_touchstart:function($){var g=this;if(g.gv.setFocus($),tn($),g.handle_touchmove($),!(Nl($)>1)&&g.gv._scrolling&&g.gv.isScrollBarVisible()){g._cp=_d($),g._tx=g.gv.tx(),g._ty=g.gv.ty();var d=g.isV($);g._state=d?"vScroll":"hScroll",ug(g,$),g.fi({kind:"beginScroll",event:$})}},handleWindowMouseMove:function(h){this.handleWindowTouchMove(h)},handleWindowTouchMove:function(K){var m=_d(K),g=this.gv.getViewRect(),L=this.gv.getScrollRect();"vScroll"===this._state?this.gv.ty(this._ty+(this._cp.y-m.y)*L.height/g.height):"hScroll"===this._state&&this.gv.tx(this._tx+(this._cp.x-m.x)*L.width/g.width),this.fi({kind:"betweenScroll",event:K})}});var ss=mo.TouchInteractor=function(Y,e){e=e||{},e.selectable===n&&(e.selectable=!0),e.movable===n&&(e.movable=!0),e.pannable===n&&(e.pannable=!0),e.pinchable===n&&(e.pinchable=!0),e.editable===n&&(e.editable=!0),this.params=e,Ig(ss,this,[Y])};ni("TouchInteractor",Nf,{ms_edit:1,setUp:function(){var e=this;ss.superClass.setUp.call(e),eb&&e.params.editable&&e.gv.setEditInteractor(e)},tearDown:function(){var g=this;ss.superClass.tearDown.call(g),eb&&g.params.editable&&g.gv.setEditInteractor(O)},clear:function(B){var u=this,h=u.gv;h._moving&&(u.fi({kind:"endMove",event:B}),delete h._moving,h.onMoveEnded(),h.dm().endTransaction()),h._panning&&(u.fi({kind:"endPan",event:B}),delete h._panning,h.onPanEnded()),h._pinching&&(u.fi({kind:"endPinch",event:B}),delete h._pinching,h.onPinchEnded()),h._editing&&(u._46O(B),u._77I=u._node=u._edge=u._shape=u._rect=u._89I=u._index=h._editing=O),u.pendingClickThrough=u._moving=u._panning=u._pinching=u._editing=u._57I=u._data=u._beginHistory=O,u.clearDragging()},handle_touchstart:function(C){var I=this;if(!I.gv._editing){tn(C),I._57I=O,I.pendingClickThrough=O;var w=I.params,H=I.gv,N=H.sm(),s=H.getDataAt(C),n=Nl(C);if(1===n){if(Tn(C))return H.handleDoubleClick(C,s),void 0;H.handleClick(C,s),s&&(H.handleMouseDown&&H.handleMouseDown(C,s),I._data=s),w.selectable||(s=O),s&&(N.co(s)?s instanceof $c&&s.isClickThroughEnabled()&&(I.pendingClickThrough=_d(C)):N.ss(s),w.editable&&H.isEditable(s)&&I._79I(C,s,!0)?(I._editing=1,I.startDragging(C)):w.movable&&H.isMovable(s)&&(I._moving=1,I.startDragging(C))),s&&(H.isMovable(s)||H._39Q(s))||(I._57I=_d(C),w.pannable&&H.isPannable()&&(I._panning=1,I.startDragging(C),I._translate={x:H.tx(),y:H.ty()}))}else if(w.pinchable&&2===n){if(!H.getEditInteractor()&&s){var W=Nn(H.getImage(s));if(W&&rq(W.scrollable,s,this))return}I._pinching=1,I.startDragging(C);var e=H.getView(),g=H.getZoom(),j=e.getBoundingClientRect(),x=C.touches[0],J=C.touches[1],R={x:(x.clientX+J.clientX)/2-j.left,y:(x.clientY+J.clientY)/2-j.top};R.x-=H.tx(),R.y-=H.ty(),R.x/=g,R.y/=g,I._p=R,I._d=lg(C)}}},handle_touchend:function(W){var Q=this,d=Q.gv,Y=Q._57I,z=Q._data;if(Y&&(xh(Y,_d(W))<=1&&!d.getDataAt(W)&&d.sm().cs(),Q._57I=O),z&&d.handleMouseUp&&d.handleMouseUp(W,z),Q.pendingClickThrough){if(xh(Q.pendingClickThrough,_d(W))<=1){var z=d.getDataAt(W);if(z instanceof $c&&z.isClickThroughEnabled()){var l=d.getDataAt(W,function(i){var w=i.getParent()===z&&d.isSelectable(i,!0);return w});l&&(W.clickThrough=!0,d.sm().ss(l))}}Q.pendingClickThrough=O}},handleWindowTouchEnd:function(p){this.clear(p)},handleWindowTouchMove:function(M){var A=this,l=A.gv,n=Nl(M);if(1===n){var $=_d(M),J=Lo(l,$,A._lastClientPoint),U=xh({x:0,y:0},J);if(A._editing&&(A._beginHistory||(A._beginHistory=1,l.dm().beginTransaction()),l._editing=1,A._78I(M)),A._moving){if(!l._moving&&U<Q.touchMoveThreshold)return;A._beginHistory||(A._beginHistory=1,l.dm().beginTransaction()),A.handleMove(M)}else if(A._panning){if(!l._panning&&U<Q.touchMoveThreshold)return;l.setTranslate(A._translate.x+J.x,A._translate.y+J.y),A.fi({kind:l._panning?"betweenPan":"beginPan",event:M}),l._panning=1}}else if(2===n&&A._pinching){var p=lg(M);l.handlePinch(A._p,p,A._d),A._d=p,A.fi({kind:l._pinching?"betweenPinch":"beginPinch",event:M}),l._pinching=1}},handleMove:function(K){var v=this,G=v.gv,s=G.lp(K);G._93O&&G._93O(K,v._data)||(G.moveSelection(s.x-v._lastLogicalPoint.x,s.y-v._lastLogicalPoint.y),v._lastLogicalPoint=s,v.autoScroll(K),v.fi({kind:G._moving?"betweenMove":"beginMove",event:K}),G._moving=1)}});var f=H.ht,zo=f.graph._editor={Math:f.Math,Guide:{}};zo.getStyle=function(L){var o,Q=zo.StyleMap;
return Q&&(o=Q[L],o!==n)?o:zo.DefaultStyleMap[L]},zo.setStyle=function(a,u){var h=zo.StyleMap;h||(h=zo.StyleMap={}),h[a]=u},zo.inEdit=function(F){return F._inXEdit===!0},zo.startEdit=function(G){G._inXEdit=!0,zo.Inject.doInject(G)},zo._46O=function(i){i._inXEdit=!1,zo.Inject.undoInject(i)},zo.toScreenPosition=function(Q,W){var H=Q.tx(),c=Q.ty(),C=Q._zoom;return new zo.Math.Vector2(W.x*C+H,W.y*C+c)},zo.checkHit=function(i,w,u){return i.distanceTo(w)<u?!0:!1},zo.toWorldPosition=function(o,U){var L=o.tx(),C=o.ty(),W=o._zoom;return{x:(U.x-L)/W,y:(U.y-C)/W}},zo.setAntialias=function(y,h){for(var c,g=["imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","msImageSmoothingEnabled"],o=0,P=g.length;P>o&&(c=g[o],!(c in y));o++);y[c],y[c]=h},zo.getTargetCornersOnScreen=function(c,b){if(!b)return null;var o,w=[];if(Ah(b,c)){var X=xm(c,b);o=[{x:X.x,y:X.y},{x:X.x+X.width,y:X.y},{x:X.x+X.width,y:X.y+X.height},{x:X.x,y:X.y+X.height}]}else{if(!b.getCorners)return null;o=b.getCorners()}return o.forEach(function(j){var u=zo.toScreenPosition(c,j);w.push(u.x,u.y)}),w},zo.log=function(){};var Xm;zo.updateTipInfo=function(I,x,r){if(r){var c=f.Default.getLogicalPoint(I,x._canvas);c.x+=zo.Icons.TipShiftX,c.y+=zo.Icons.TipShiftY,Xm={helperPos:c,text:r,size:r.length}}else Xm=O},zo.drawTip=function(G,y){Xm&&zo.Icons.DrawIcon(y,G,zo.Icons.TipHelper,Xm)};var or=zo.Inject={_modules:[]};or.registAsModule=function(o,j){var x={},g={};for(var P in o){var e=j.prototype[P];x[P]=e}o.getBackup=function(n){return x[n]},o.getBackups=function(){return x},g.doInject=function(){for(var k in o)"getBackup"!==k&&(j.prototype[k]=o[k])},g.undoInject=function(){for(var O in o)"getBackup"!==O&&(j.prototype[O]=x[O])},or._modules.push(g)},or.doInject=function(G){for(var r,Y=or._modules,Q=0,n=Y.length;n>Q;Q++)r=Y[Q],r.doInject(G)},or.undoInject=function($){for(var D,r=or._modules,B=0,k=r.length;k>B;B++)D=r[B],D.undoInject($)};var Nf=f.graph.EditInteractor=function(t){var e=this,J=k.createElement("canvas");J.className="editCanvas",J.style.position="absolute",e._uuid=f.Math.generateUUID(),e._styleMap={},e._canvas=J,e._context=J.getContext("2d"),Nf.superClass.constructor.call(e,t),this._editDetail=!1,zo.setAntialias(e._context,!1),e._subModules=e.initSubModule(),e._gridGuide=new zo.Guide.Grid(e),e._rectGuide=new zo.Guide.Rect(e),e._hoverGuide=new zo.Guide.Hover(e)},xr=Nf;f.Default.def(Nf,f.graph.Interactor,{ms_edit:1,ms_fire:1}),y.defineProperties(Nf.prototype,{editDetail:{get:function(){var N=!!this._editDetail;return N},set:function(G){var V=this,F=V._editDetail;F!==G&&(V._editDetail=G,V.gv._editing=G,V.fp("editDetail",F,G),V.fp("pointsEditingMode",F,G),V.fi({kind:G?"beginEditPoints":"endEditPoints"}))}},gvEditing:{get:function(){return this.gv._editing},set:function(Q){(!this._editDetail||Q)&&(this.gv._editing=Q,Q||(this.editDetail=!1))}},editing:{get:function(){return this._editing},set:function(f){this._editing=f,this.gvEditing=f}},editingModule:{get:function(){return this._editMod}},pointsEditingMode:{get:function(){return this.editDetail},set:function(i){var V=this;V.editDetail!==i&&(i?V._tryEnterEditDetailMode():V._tryQuitEditDetailMode())}},gridEnabled:{get:function(){var j=this._gridEnabled;if(!j)return!1;var M=this.gv;return M?!0:!0},set:function(S){S!==this._gridEnabled&&(this._gridEnabled=S,this._42())}},alignmentGuideEnabled:{get:function(){return this._agEnabled},set:function(b){b!==this._agEnabled&&(this._agEnabled=b,this._42())}},gridGuide:{get:function(){return this._gridGuide}},rectGuide:{get:function(){return this._rectGuide}},hoverGuide:{get:function(){return this._hoverGuide}}}),Nf.prototype.initSubModule=function(){var i=this;return[new zo.Anchor(i),new zo.RotateX(i),new zo.MoveDummy(i),new zo.Rect(i),new zo.Curve(i),new zo.MoveHelper(i)]},Nf.prototype.getSubModule=function(Q){var b,f,W,l=this._subModules;for(f=0,W=l.length;W>f;f++)if(b=l[f],b.catalog===Q)return b},Nf.prototype.invokeSubModule=function(u,a){for(var e,h,A,C=this,r=C._subModules,I=Array.prototype.slice.call(arguments,2),w=0,R=r.length;R>w;w++)if(e=r[w],h=e[u],h&&(A=h.apply(e,I),A!=n&&a))return e},Nf.prototype.invokeSubModuleInverse=function(s,_){var p=this,I=p._subModules;if(I)for(var B,o,z,e=Array.prototype.slice.call(arguments,2),b=I.length-1;b>=0;b--)if(B=I[b],o=B[s],o&&(z=o.apply(B,e),z!=n&&_))return B},Nf.prototype.setUp=function(){zo.log("setUp");var n=this,Z=n.gv,B=Z.getView(),v=n._canvas;Nf.superClass.setUp.call(n),Z.setEditInteractor(n),Z._79O?B.insertBefore(v,Z._79O):B.appendChild(v),zo.startEdit(Z),n.invokeSubModule("setUp"),Z.dm().mm(n._onDataModelChanged,n),Z.dm().md(n._onDataPropertyChanged,n)},Nf.prototype.tearDown=function(){zo.log("tearDown");var C=this,M=C.gv,d=M.getView();C._resetCustomCursorStyle(),Nf.superClass.tearDown.call(C),M.dm().umm(C._onDataModelChanged,C),M.dm().umd(C._onDataPropertyChanged,C),M.setEditInteractor(null),d.removeChild(C._canvas),C._drawTimer&&(rn(C._drawTimer),C._drawTimer=null),zo._46O(M),C.invokeSubModule("tearDown")},Nf.prototype._onDataModelChanged=function(T){var R=this;("clear"===T.kind||"remove"===T.kind&&R.editDetail&&T.data===R.getSubModule("Curve").target)&&(R.editDetail=!1,R._42())},Nf.prototype._onDataPropertyChanged=function(M){var s=this;if(s.editDetail){var d=s.getSubModule("Curve"),u=M.data;u===d.target&&(u._writing||d._handleDataChanged(M))}},Nf.prototype.clear=function(){zo.log("clear")},Nf.prototype.redraw=function(){this._42()},Nf.prototype._42=function(){var T=this;T._drawTimer||(T._drawTimer=yd(function(){T._drawTimer=null,T.drawImpl()},0))},Nf.prototype.drawImpl=function(){var F;for(F in{_42:!0})break;return function(){var g=this,P=g._canvas,H=g.gv,G=H.getWidth(),O=H.getHeight(),n=g._context,N=f.Default.getInternal(),A=Q.devicePixelRatio;(P.width!==G||P.height!==O)&&N.setCanvas(P,G,O,A),n.clearRect(0,0,P.width,P.height);var u=g._getValidSelection();n.save(),n.scale(A,A),g._gridGuide._42(),g.invokeSubModuleInverse(F,!1,n,H,u),g._rectGuide._42(),g._hoverGuide._42(),n.restore()}}(),Nf.prototype._getValidSelection=function(){var h=this,a=h.gv,B=a.sm().getSelection(),X=[];return B.each(function(J){a.isVisible(J)&&a.isEditable(J)&&X.push(J)}),X},Nf.prototype.handle_touchmove=function(O){return this.handle_mousemove(O)},Nf.prototype.handle_mousemove=function(V){if(!f.Default.isDragging()){var J=this;if((J.editDetail||!vr()&&!Wr(V))&&!J.gv._externalEditing){if(J.gvEditing=!1,J._checkEdit(V))J.gvEditing=!0;else{if(!J.getStyle("hoverGuideVisible"))return;J.hoverData=J.gv.getDataAt(V)}J._42()}}},Nf.prototype.handle_touchstart=function(i){return this.handle_mousedown(i)},Nf.prototype.handle_mousedown=function(h){tn(h);var x=this;if((x.editDetail||!vr()&&!Wr(h))&&!x.gv._externalEditing){if(Tn(h)&&!h.clickThrough){if(x.editDetail){if(x._tryQuitEditDetailMode(h))return}else if(x._tryEnterEditDetailMode())return;x.gv.dm().beginTransaction();var l=x.invokeSubModule("handleDoubleClick",!0,h);if(x.gv.dm().endTransaction(),l)return}var G=x._checkEdit(h);G&&(x._downPosition=x._getLogicalPoint(h),x.gv.dm().beginTransaction(),G.startEdit(x,h),x.editing=!0)}},Nf.prototype._checkEdit=function(L){var b=this,$=b.gv,G=b._getLogicalPoint(L),k=b.invokeSubModule("check",!0,$,L,G)||null;return b._editMod=k,k},Nf.prototype.handleWindowTouchMove=function(b){return this.handleWindowMouseMove(b)},Nf.prototype.handleWindowMouseMove=function(r){var x=this,U=x._downPosition;if(U){var n=x._getLogicalPoint(r);if(n.distanceTo(U)<x.getStyle("moveSensitivity"))return;delete x._downPosition}var B=x._editMod;B&&B.handleEdit(x.gv,r),x.redraw()},Nf.prototype._getLogicalPoint=function(Q){var o=this,K=f.Default.getLogicalPoint(Q,o._canvas);return new zo.Math.Vector2(K)},Nf.prototype.handleWindowTouchEnd=function(J){return this.handleWindowMouseUp(J)},Nf.prototype.handleWindowMouseUp=function(){var k;for(k in{_46O:!0})break;return function(Q){var d=this;d.editing=!1,d.setCursor("default"),d.invokeSubModule(k,!1,Q),d._42(),d.gv.dm().endTransaction()}}(),Nf.prototype.handle_mousewheel=function(p){var E=this;tn(p),E.invokeSubModule("preHandleScroll",!0)||E.gv.handleScroll(p,p.wheelDelta)},Nf.prototype.handleDelete=function(){var f=this;if(!f.editDetail){f.gv.dm().beginTransaction();var t=f.invokeSubModule("handleNormalStateDelete",!0);return f.gv.dm().endTransaction(),t||f.gv.removeSelection(),void 0}f.gv.dm().beginTransaction(),f.invokeSubModule("handleDelete",!0),f.gv.dm().endTransaction(),f._42()},Nf.prototype.handle_keydown=function(S){var H=this;if((S.metaKey||S.ctrlKey)&&H._42(),vr(S)&&!H.editing)return H.gvEditing=!1,H.setCursor("default"),H._42(),void 0;var m=Fe(S);return H.editDetail?((m||af(S))&&(H.editDetail=!1,H._42()),H.gv.dm().beginTransaction(),H.invokeSubModule("handle_keydown",!0,S),H.gv.dm().endTransaction(),void 0):(H.gv.dm().beginTransaction(),H.invokeSubModule("handleNormalStateKeyDown",!0,S),H.gv.dm().endTransaction(),m&&H._tryEnterEditDetailMode(),void 0)},Nf.prototype.handle_keyup=function(E){this.gv.dm().beginTransaction(),this.invokeSubModule("handle_keyup",!0,E),this.gv.dm().endTransaction()},Nf.prototype._tryEnterEditDetailMode=function(){var O=this;return!O.editDetail&&O.invokeSubModule("canEnterEditDetailMode",!0)&&1===O._getValidSelection().length?(O.editDetail=!0,O._42(),!0):void 0},Nf.prototype._tryQuitEditDetailMode=function(D){var E=this;return E.editDetail?!D||E.invokeSubModule("canQuitEditDetailMode",!0,D)?(E.editDetail=!1,E._42(),!0):!1:!1},Nf.prototype.setStyle=function(K,y,P){var r=this;P?zo.setStyle(K,y):r._styleMap[K]=y,"baseColor"===K&&(ok=y),r.fp("styleChanged",null,{key:K,value:y,base:P}),r._42()},Nf.prototype.getStyle=function(H){var _=this,l=_._styleMap[H];return l!==n?l:zo.getStyle(H)},Nf.prototype.setCursor=function(p){this._resetCustomCursorStyle(),f.graph.EditInteractor.superClass.setCursor.call(this,p)},Nf.prototype._drawHostGuide=function(v){var P=this,D=P._context,_=P.gv;zo.Icons.DrawIcon(P,D,zo.Icons.NodeHoverGuide,v.corners);var C=v.host;if(C){var t=_.getAttachPoints(C);if(t&&t.length)for(var I=0,p=t.length;p>I;I++){var o=t[I],k=Hq(_,C,0,o.offsetX||0,o.offsetY||0,o.x,o.y);k=zo.toScreenPosition(_,k),k.isAttach=v.attach===I,zo.Icons.DrawIcon(P,D,zo.Icons.AttachPoint,k)}}},Nf.prototype._resetCustomCursorStyle=function(){var c=this;if(c._customStyle){var w=this.gv.getView();w.classList&&w.classList.remove&&w.classList.remove(c._customStyle),c._customStyle=null}},Nf.prototype._setRotateCursor=function(g){var J=this,x=J._cursorFactory;x||(x=J._cursorFactory=new zo.CursorFactory(J));var P=x.getRotateCursor(g),C=J.gv.getView();J._resetCustomCursorStyle(),J._customStyle=P,C.classList&&C.classList.add&&C.classList.add(P)};var Vc=zo.Group=function(k){var w=this;w._entities=k,w._64O=0,w._position={x:0,y:0},w._scale={x:1,y:1},w._anchor={x:.5,y:.5},w._anchor2={x:.5,y:.5}};Vc.prototype={},Vc.prototype.constructor=Vc;var de=null,Qe=null;Vc.findOrCreateGroup=function(u,q){if(Qe===q&&de&&de.checkIsMe(u))return de;Qe=q;var _=new zo.Group(u);return _.getKeyOb()?(de=_,_):void 0},Vc.prototype.checkIsMe=function(o){var V=this._entities;if(V.length!==o.length)return!1;var d,Z={},X=o.length;for(d=0;X>d;d++)Z[o[d]._id]=!0;for(d=0;X>d;d++)if(!Z[V[d]._id])return!1;return!0},Vc.prototype.getRotation=function(){return this._64O},Vc.prototype.getPosition=function(){return this._position},Vc.prototype.getAnchor=function(){return this._anchor},Vc.prototype.getWidth=function(){return this._width},Vc.prototype.getScale=function(){return this._scale},Vc.prototype.getSize=function(){return{width:this._width,height:this._height}},Vc.prototype.getHeight=function(){return this._height},Vc.prototype.getKeyOb=function(){for(var O=this._entities,A=O.length-1;A>=0;A--){var s=O[A];if(this.isNode(s))return s}},Vc.prototype.getAnchor2=function(){var M=this,g=M.rotateCenter;if(g)return g;var j=M.getKeyOb();if(!j)return M._anchor;var f=M._anchor2,u=j.getMatrix();return u.tf({x:j.getWidth()*(f.x-j.getAnchor().x),y:j.getHeight()*(f.y-j.getAnchor().y)})},Vc.prototype.setAnchor2=function(p,e){var n=this,Q=n.getKeyOb();if(Q){var A,R=Q.getMatrix();A="number"==typeof p?{x:p,y:e}:p;var t=R.tfi(A);n._anchor2={x:Q.getAnchor().x+t.x/Q.getWidth(),y:Q.getAnchor().y+t.y/Q.getHeight()}}},Vc.prototype.setRotation=function(){},Vc.prototype.beginRotate=function(X){this.rotateCenter=X.pos,this.rotateMode=X.groupRotateMode},Vc.prototype.endRotate=function(){delete this.rotateCenter,delete this.rotateMode},Vc.prototype.addRotation=function(A,Q,C){return"batch"===Q?this._addRotationInBatchMode(A,C):"block"===Q?this._addRotationInBlockMode(A,C):void 0},Vc.prototype._addRotationInBlockMode=function(n,Q){var X=this,y=X.rotateCenter||X.getPosition();X._entities.forEach(function(k){if(X.isNode(k)&&(!Q||Q(k))){var x=k.getMatrix();x.translate(-y.x,-y.y),x.rotate(n),x.translate(y.x,y.y);var M=Math.sign(k.getScale().x);k.setRotation(Tr(x.b*M,x.a*M)),k.setPosition(x.tx,x.ty)}})},Vc.prototype._addRotationInBatchMode=function(S,N){var Z=this,W=Z._anchor2;Z._entities.forEach(function(T){if(Z.isNode(T)&&(!N||N(T))){var L=T.getAnchor(),o=T.getMatrix(),b=o.tf({x:T.getWidth()*(W.x-L.x),y:T.getHeight()*(W.y-L.y)}),y=new zo.Math.Matrix2d;y.set(o.a,o.b,o.c,o.d,o.tx,o.ty),y.translate(-b.x,-b.y),y.rotate(S),y.translate(b.x,b.y);var K=Math.sign(T.getScale().x);T.setRotation(Tr(y.b*K,y.a*K)),T.setPosition(y.tx,y.ty)}})},Vc.prototype.setPosition=function(d){var j,y,s,G,T=this,e=T._position,L=d.x-e.x,U=d.y-e.y,g=T._entities;for(y=0,s=g.length;s>y;y++)j=g[y],Cl(j)&&(G=j.getPosition(),j.setPosition(G.x+L,G.y+U));T._position=d},Vc.prototype.setScale=function(V,w){var E=this,I=V/E._scale.x,$=w/E._scale.y;E._adjustChildScaleOrSize(I,$,"size"),E._scale={x:V,y:w}},Vc.prototype.getRect=function(){var I=this,M=I._position,w=I._width,v=I._height;return{x:M.x-w/2,y:M.y-v/2,width:w,height:v}},Vc.prototype.setSize=function(x,u){var N=this,x=Math.max(1,x),u=Math.max(1,u),y=x/N._width,t=u/N._height;N._adjustChildScaleOrSize(y,t,"size"),N._width=x,N._height=u},Vc.prototype._adjustChildScaleOrSize=function(M,p,y){var S,d,k,o,X,B,G,q,K,N,t,_,b,T,s=this,V=s._position,$=s._entities,E=new zo.Math.Matrix2d;for(d=0,k=$.length;k>d;d++)if(S=$[d],s.isNode(S)){if(o=S.getPosition(),X=S.getRotation(),B=S.getWidth(),G=S.getHeight(),q=S.getScale(),t=q.x*B,_=q.y*G,E.identity().scale(t,_).rotate(X).translate(o.x,o.y).translate(-V.x,-V.y).rotate(-s._64O),X=Tr(E.b*Math.sign(t),E.a*Math.sign(t)),E.scale(M,p),K=Math.cos(X),N=Math.sin(X),Math.abs(K)<.001?(b=E.b/N,T=-E.c/N):(b=E.a/K,T=E.d/K),"scale"===y)S.setScale(b/B,T/G);else if("size"===y){var Z=b/q.x,r=T/q.y;S.setScale(hd(b)*Math.abs(q.x),hd(T)*Math.abs(q.y)),S.setSize(Math.max(.1,Math.abs(Z)),Math.max(.1,Math.abs(r)))}E.rotate(s._64O).translate(V.x,V.y),S.setPosition(E.tx,E.ty)}},Vc.prototype.getMatrix=function(){var Z=this,s=Z._position,X=f.Default.getInternal(),D=Z._scale;return new X.Mat(Z._64O,s.x,s.y,D.x,D.y)},Vc.prototype.toGlobal=function(y){return this.getMatrix().tf(y)},Vc.prototype.getCorners=function(){var $=this,z=$._width,c=$._height,p=$._anchor,L=-z*p.x,S=-c*p.y,d=$.getMatrix();return[d.tf(L,S),d.tf(L,S+c),d.tf(L+z,S+c),d.tf(L+z,S)]},Vc.prototype.calcInfo=function(){var i,R,J,b,v,Y,d=this,E=[],F=d._entities,Q=d._64O;for(b=0,v=F.length;v>b;b++)Y=F[b],d.isNode(Y)&&Y.getCorners&&E.push.apply(E,Y.getCorners());if(E.length){var z=Math.cos(-Q),H=Math.sin(-Q),W=1/0,y=-1/0,w=1/0,S=-1/0;for(b=0,v=E.length;v>b;b++)J=E[b],i=J.x,R=J.y,J.x=z*i-H*R,J.y=H*i+z*R,W=Math.min(W,J.x),y=Math.max(y,J.x),w=Math.min(w,J.y),S=Math.max(S,J.y);d._width=(y-W)/d._scale.x,d._height=(S-w)/d._scale.y,z=Math.cos(Q),H=Math.sin(Q);var t=d._anchor;i=W+(y-W)*t.x,R=w+(S-w)*t.y,d._position={x:z*i-H*R,y:H*i+z*R}}},Vc.prototype.isNode=function(i){return Cl(i)?Ah(i)?i.size()?!1:!0:!0:!1},Vc.prototype._42=function(O,r,K){var J,Y,h,c,j,L,z,M,q=this,d=q._entities,N=q.rotateMode;for("batch"===N&&(M=q.getKeyOb()),J=0,Y=d.length;Y>J;J++)h=d[J],q.isNode(h)&&(L=h.getRect(),c=zo.toScreenPosition(K,{x:L.x,y:L.y}),j=zo.toScreenPosition(K,{x:L.x+L.width,y:L.y+L.height}),z={min:c,max:j},h===M&&(z.isKeyOb=!0),zo.Icons.DrawIcon(O,r,zo.Icons.GroupSubEntityRect,z))};var Dl=zo.CurveActiving=function(u,R){this._curve=u,this._interactor=u._interactor,this.silent=!0;for(var O in R)this[O]=R[O];delete this.silent};Dl.prototype={},Dl.prototype.constructor=Dl,y.defineProperties(Dl.prototype,{point:{get:function(){return this._point},set:function(i){var d=this;d._point=i,d.editingCtrl||d.silent||d._firePointChange()}},pairs:{get:function(){return this._pairs},set:function(s){var q=this;q._pairs=s,q.editingCtrl&&!q.silent&&q._firePointChange()}}}),Dl.prototype._firePointChange=function(){var C=this,J=C.getCurrentEditingPoint(),s=C._interactor;if(!J)return s.fi({kind:"selectPoint"}),void 0;var S=this._curve.target;if(S){var u=zo.getDataMatrix(S).invert(),W=J.e;J=u.apply(zo.toWorldPosition(s.gv,J)),J.e=W;var r=C._lastFirePoint;r&&Math.abs(J.x-r.x)<1e-5&&Math.abs(J.y-r.y)<1e-5&&(J.e==n&&r.e==n||Math.abs(J.e-r.e)<1e-5)||(C._lastFirePoint=J,s.fi({kind:"selectPoint",x:J.x,y:J.y,e:J.e}))}},Dl.prototype.dispose=function(){this._interactor.fi({kind:"selectPoint"})},Dl.prototype.getCurrentEditingPoint=function(){var P=this,S=P.editingCtrl;if(S){var n=P.pairs;if(n){var Y=n[S.pairId];if(Y){var $=Y[S.type];if($)return $}}}return P._point};var Aq=zo.CursorFactory=function(S){var o=this;o._interactor=S,o._rotateCursorStyles={}};Aq.prototype={},Aq.prototype.constructor=Aq,Aq.prototype.getRotateCursor=function(I){var e=this;0>I&&(I+=2*Math.PI);var g=e._interactor,V=g.getStyle("rotateCursorSize"),a=g.getStyle("rotateCursorRound"),W=Math.round(180*(I/Math.PI)/a);W*a>=360&&(W=0);var z=e._rotateCursorStyles,L="htCustomRotateStyle_"+V+"_"+a+"_"+W;return z[L]||(e._produceRotateCursor(L,V,a,W),z[L]=!0),L},Aq.prototype._produceRotateCursor=function(m,V,n,e){var w=this;w._interactor;var P=w._canvas;P||(P=w._canvas=k.createElement("canvas"));var U=Q.devicePixelRatio;P.width=P.height=V*U,P.style.width=P.style.height=V+" px";var S=P.getContext("2d");zo.setAntialias(S,!1),S.scale(U,U);var W,G,z,b,d,O=Math.round(V/2),Y=""+O+" "+O+",auto !important;",j=4;W=Math.PI/180*e*n,S.clearRect(0,0,V,V),S.save(),S.scale(V/32,V/32),S.translate(16,15),S.rotate(W+Math.PI/2),S.beginPath(),S.moveTo(-8,0),S.lineTo(-8,j),S.lineTo(-8+j,j),S.moveTo(8,0),S.lineTo(8,j),S.lineTo(8-j,j),S.moveTo(-8,j),S.quadraticCurveTo(0,-6,8,j),S.restore(),S.lineCap="round",S.lineJoin="miter",S.strokeStyle="white",S.lineWidth=4,S.stroke(),S.strokeStyle="black",S.lineWidth=2,S.stroke(),G=JSON.stringify(P.toDataURL()),b="cursor:url("+G+")"+Y,1!==U&&(z='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+V+'px" height="'+V+'px"><image xlink:href='+G+' width="'+V+'" height="'+V+'"/></svg>',b+="cursor:url(data:image/svg+xml;base64,"+btoa(z)+")"+Y,b+="cursor:-webkit-image-set(url("+G+")"+U+"x,url("+G+")1x)"+Y),d=k.createElement("style"),d.textContent="body."+m+" *, ."+m+"{"+b+"}",k.head.appendChild(d)};var Cs=zo.Guide.Grid=function(Q){var I=this;I._interactor=Q,I._alignmentGuideId=0,I._xAlignmentGuide=[],I._yAlignmentGuide=[]};Cs.prototype={},Cs.prototype.constructor=Cs,y.defineProperties(Cs.prototype,{gridBlockSize:{get:function(){var f=this;return f._gridBlockSize||f._interactor.getStyle("gridBlockSize")},set:function(e){this._gridBlockSize=e,this._interactor._42()}},gridThickLinesEvery:{get:function(){var b=this;return b._gridThickLinesEvery||b._interactor.getStyle("gridThickLinesEvery")},set:function(j){this._gridThickLinesEvery=j,this._interactor._42()}},gridEnabled:{get:function(){var W=this,U=W._interactor;return U.gridEnabled&&W.isValidGrid()}}}),Cs.prototype._42=function(){var H=this,o=H._interactor;H.gridEnabled&&H.drawGrid(),o.alignmentGuideEnabled&&H.drawAlignmentGuide()},Cs.prototype.makeMatrix=function(){var M=this,c=M._interactor.getStyle("gridAngle"),Z=M._interactor.getStyle("gridRotation"),L=new zo.Math.Matrix2d,S=Math.sin(c),o=Math.cos(c);return L.set(1,0,o,S,0,0),L.rotate(Z),L},Cs.prototype.isValidGrid=function(){var l=this,q=Math.PI,O=l._interactor,V=O.gv;if(V._zoom<O.getStyle("gridZoomThreshold"))return!1;var J=O.getStyle("gridAngle"),I=Math.abs(180*(J%q/q)),C=1-1e-8;return C>I||I>180-C?!1:!0},Cs.prototype.drawAlignmentGuide=function(){var F=this,J=F._interactor,H=J.gv,z=J._canvas,Y=J._context,k=z.width,W=z.height,j=H.tx(),v=H.ty(),Z=H._zoom;Y.beginPath(),Y.strokeStyle=J.getStyle("gridAlignmentGuideColor"),Y.lineWidth=1,F._xAlignmentGuide.forEach(function(C){var D=C.p*Z+j;Y.moveTo(D,0),Y.lineTo(D,W)}),F._yAlignmentGuide.forEach(function(q){var w=q.p*Z+v;Y.moveTo(0,w),Y.lineTo(k,w)}),Y.stroke()},Cs.prototype.drawGrid=function(){function B(N,X,k,F){var o=zo.toScreenPosition(Z,m.apply({x:N,y:X})),V=zo.toScreenPosition(Z,m.apply({x:k,y:F}));d.moveTo(o.x,o.y),d.lineTo(V.x,V.y)}var O=this,k=O._interactor,q=O.gridBlockSize,D=O.gridThickLinesEvery,H=k.getStyle("gridThickColor"),f=k.getStyle("gridLightColor"),Z=k.gv,p=k._canvas,d=k._context,l=p.width,W=p.height,m=O.makeMatrix(),V=m.applyInverse(zo.toWorldPosition(Z,{x:0,y:0})),_=m.applyInverse(zo.toWorldPosition(Z,{x:l,y:0})),t=m.applyInverse(zo.toWorldPosition(Z,{x:0,y:W})),R=m.applyInverse(zo.toWorldPosition(Z,{x:l,y:W})),X=Math.min(V.x,_.x,t.x,R.x),s=Math.max(V.x,_.x,t.x,R.x),c=Math.min(V.y,_.y,t.y,R.y),A=Math.max(V.y,_.y,t.y,R.y);l=s-X,W=A-c;var n=Math.ceil(X/q),E=Math.floor(s/q),u=Math.ceil(c/q),r=Math.floor(A/q);Z.tx(),Z.ty(),Z._zoom;var Y,N,F;for(d.save(),d.lineWidth=1,d.beginPath(),d.strokeStyle=H,F=Math.ceil(n/D)*D;E>=F;F+=D)Y=F*q,B(Y,c,Y,A);for(F=Math.ceil(u/D)*D;r>=F;F+=D)N=F*q,B(X,N,s,N);for(d.stroke(),d.beginPath(),d.strokeStyle=f,F=n;E>=F;F++)0!==F%D&&(Y=F*q,B(Y,c,Y,A));for(F=u;r>=F;F++)0!==F%D&&(N=F*q,B(X,N,s,N));d.stroke(),d.restore()},Cs.prototype.getAlignmentGuides=function(){var U=this;return{x:U._xAlignmentGuide,y:U._yAlignmentGuide}},Cs.prototype.addAlignmentGuide=function(z,v,W){var l=this,y="x"===z?l._xAlignmentGuide:l._yAlignmentGuide,W=W?W:++l._alignmentGuideId,E={p:v,id:W};if(y.length){var H=l._findClosestAlignmentGuide(E.p,y);H.dis<0?y.splice(H.index+1,0,E):y.splice(H.index,0,E)}else y.push(E);return l._interactor._42(),W},Cs.prototype.findClosest=function(J,t,p){var q=this,X=q._interactor,u=X.gv;p&&(J=zo.toWorldPosition(u,J));var d,z,F,T=1/0,I=1/0,w=J.x,f=J.y;if(q.gridEnabled){var e=q.gridBlockSize,O=q.makeMatrix(),r=O.applyInverse(J);r=O.apply({x:Math.round(r.x/e)*e,y:Math.round(r.y/e)*e}),T=r.x-w,I=r.y-f,F=!0}if(X.alignmentGuideEnabled&&(d=q._findClosestAlignmentGuide(w,q._xAlignmentGuide).dis,z=q._findClosestAlignmentGuide(f,q._yAlignmentGuide).dis,Math.abs(d)<Math.abs(T)&&(T=d,F=!0),Math.abs(z)<Math.abs(I)&&(I=z,F=!0)),F){F=!1;var Y=u._zoom,j=X.getStyle("smartGuideThreshold")/Y,v={};if(Math.abs(T)<j&&"y"!==t&&(v.x=p?T*Y:T,F=!0),Math.abs(I)<j&&"x"!==t&&(v.y=p?I*Y:I,F=!0),F)return v}},Cs.prototype._findClosestAlignmentGuide=function(M,h){if(!h.length)return{dis:1/0};for(var T,b=0,Y=h.length-1;Y-b>1;)T=Math.floor((b+Y)/2),h[T].p<M?b=T:Y=T;var g=h[b].p-M,H=h[Y].p-M;return Math.abs(g)<=Math.abs(H)?{line:h[b],dis:g,index:b}:{line:h[Y],dis:H,index:Y}},Cs.prototype.removeAllAlignmentGuide=function(k){var U=this;"y"!==k&&(U._xAlignmentGuide=[]),"x"!==k&&(U._yAlignmentGuide=[]),U._interactor._42()},Cs.prototype.removeAlignmentGuide=function(W){for(var w,N,l,r=this,n=r._xAlignmentGuide,H=0;2>H;H++)for(n=0===H?r._xAlignmentGuide:r._yAlignmentGuide,w=0,N=n.length;N>w;w++)if(l=n[w],l.id===W)return n.splice(w,1),r._interactor._42(),{axis:0===H?"x":"y",position:l.p};return!1},Cs.prototype.adjustAlignmentGuide=function(O,v){var Z=this,H=Z.removeAlignmentGuide(O);return H?(Z.addAlignmentGuide(H.axis,v,O),!0):!1};var Wb=zo.Guide.Rect=function(G){var l=this;l._interactor=G};Wb.prototype={},Wb.prototype.constructor=Wb,Wb.prototype.gatherRects=function(){var W,I,l,H,D=this,g=D._interactor.gv,x=[],T=[],O={x:x,y:T},s={},V=g.getDataModel(),z=V.a("width"),v=V.a("height");z&&v&&(W=0,I=0,l=z,H=v,x.push({node:V,type:0,p:W},{node:V,type:1,p:W+l/2},{node:V,type:2,p:W+l}),T.push({node:V,type:0,p:I},{node:V,type:1,p:I+H/2},{node:V,type:2,p:I+H}),s[V._id||0]={x:W,y:I,width:l,height:H}),V.each(function(o){if(Cl(o)&&!g.isSelected(o)&&g.isVisible(o)&&g.isValidGuideLineSource(o)){var h=!1;if(g.sm().getSelection().each(function(b){h||(o.isHostOn(b)?h=!0:o.isDescendantOf(b)&&(h=!0))}),!h){var X=o.getRect();W=X.x,I=X.y,l=X.width,H=X.height,x.push({node:o,type:0,p:W},{node:o,type:1,p:W+l/2},{node:o,type:2,p:W+l}),T.push({node:o,type:0,p:I},{node:o,type:1,p:I+H/2},{node:o,type:2,p:I+H}),s[o._id]=X}}}),x.sort(function(w,K){return w.p-K.p}),T.sort(function(d,N){return d.p-N.p}),D._grid=O,D._87I=s},Wb.prototype.gatherLines=function(f,m,r){var v,H,p,y,Z,I,s,N,L,B,P,u,t=this,e=[t.findClosest({x:f.x,y:f.y},m),t.findClosest({x:f.x+f.w/2,y:f.y+f.h/2},m),t.findClosest({x:f.x+f.w,y:f.y+f.h},m)],A={},g=t._87I;r=r||255;var E,C;for(t._guideLine=[],v=0;2>v;v++)for(A={},0===v?(y="y",N=f.x,L=N+f.w):(y="x",N=f.y,L=N+f.h),H=0;3>H;H++)Z=e[H],Z&&isFinite(Z[y])&&(E=1<<3*v+H,r&E&&(I=Z[y+"Line"],s=I.node,C=s._id||0,A[C]||(A[C]=!0,u=g[C],"y"===y?(B=u.x,P=u.x+u.width):(B=u.y,P=u.y+u.height),p=I.p,t._guideLine.push({type:y,a:N,b:L,c:B,d:P,p:p,center:1===I.type}))))},Wb.prototype._binarySearchClosest=function(H,O){if(!O.length)return{dis:1/0};for(var G,A=0,B=O.length-1;B-A>1;)G=Math.floor((A+B)/2),O[G].p<H?A=G:B=G;var a=O[A].p-H,j=O[B].p-H;return Math.abs(a)<=Math.abs(j)?{line:O[A],dis:a}:{line:O[B],dis:j}},Wb.prototype.findClosest=function(d,C,f){var T=this,F=T._interactor,A=F.gv,e=T._grid;f&&(d=zo.toWorldPosition(A,d));var Y,w=T._binarySearchClosest(d.x,e.x),s=T._binarySearchClosest(d.y,e.y),Q=w.dis,z=s.dis,B=A._zoom,o=F.getStyle("smartGuideThreshold")/B,E={};return Math.abs(Q)<o&&"y"!==C&&(E.x=f?Q*B:Q,E.xLine=w.line,Y=!0),Math.abs(z)<o&&"x"!==C&&(E.y=f?z*B:z,E.yLine=s.line,Y=!0),Y?E:void 0},Wb.prototype._42=function(){var $=this,V=$._guideLine;if(V&&!f.Default.isCtrlDown()){var E=$._interactor;if(E.getStyle("guideLineVisible")){var N,B,M,L,h,b,S,n,c,p,u,e,m,z,Z,H,q,R=E.gv,U=E._context,r=R.tx(),t=R.ty(),G=R._zoom,K=E.getStyle("guideLineTextSpacing");for(N=0,B=V.length;B>N;N++)M=V[N],n=M.type,c=M.p,p=M.a,u=M.b,e=M.c,m=M.d,z=Math.min(p,e),Z=Math.max(u,m),"x"===n?(L=c*G+r,h=z*G+t,b=L,S=Z*G+t):(L=z*G+r,h=c*G+t,b=Z*G+r,S=h),zo.Icons.DrawIcon(E,U,zo.Icons.MoveLineGuide,{rect:[L,h,b,S],center:M.center}),m>=p&&u>=e||(z=p>m?m:u,Z=p>m?p:e,q=Z-z,"x"===n?(M.center2center||(L-=K,b=L),h=z*G+t,S=Z*G+t,H=zo.Icons.MoveLineGuideDistanceV):"y"===n&&(M.center2center||(h-=K,S=h),L=z*G+r,b=Z*G+r,H=zo.Icons.MoveLineGuideDistanceH),zo.Icons.DrawIcon(E,U,H,{x0:L,y0:h,x1:b,y1:S,dis:q}))}}},Wb.prototype.clear=function(){this._guideLine=null};var zb=zo.Guide.Hover=function(Z){var y=this;y._interactor=Z};zb.prototype={},zb.prototype.constructor=zb,y.defineProperties(zb.prototype,{}),zb.prototype._42=function(){var w=this._interactor;if(w.getStyle("hoverGuideVisible")&&!w.gvEditing){var V=w.hoverData,t=w.gv;if(!Cl(V)||t.isSelected(V))return w.hoverData=null,void 0;var q=xm(t,V),h=zo.toScreenPosition(t,{x:q.x,y:q.y}),i=zo.toScreenPosition(t,{x:q.x+q.width,y:q.y+q.height});zo.Icons.DrawIcon(w,w._context,zo.Icons.HoverDataRect,{min:h,max:i,color:w.getStyle("hoverGuideColor")||w.getStyle("baseColor"),borderWidth:w.getStyle("hoverGuideBorderWidth")||1,borderPattern:w.getStyle("hoverGuideBorderPattern")||[1,4]})}},zo.DefaultStyleMap={baseColor:"rgb(51,153,255)",pointSize:[24,9],checkSize:7,rotateCheckSize:10,moveSensitivity:10,moveDummyThreshold:32,moveDummyPosition:[0,0,-16,-16],moveDummyLineExtraShift:[-32,0],moveDummySensitivity:16,keepAspectRatio:!1,rotateRound:Math.PI/2,shiftRotateRound:Math.PI/12,rotateSensitivity:Math.PI/60,rotateAsClock:!1,rotateTipVisible:!0,shiftLineRotateRound:Math.PI/4,anchorMovable:!0,anchorVisible:!0,anchorHideThreshold:25,anchorOutsideVisibleThreshold:.25,anchorRound:.25,anchorSensitivity:.02,smartGuideThreshold:8,curveIntersectSize:5,curvePointIntersectSize:8,edgeHostDetectPerFrame:!0,edgeHostEdgeMaxDistance:12,edgeHostEdgeHighlighColor:"#5d5d5d",edgeHostPointHighlighColor:"red",edgeHostHighlighPeriod:1500,edgeElevationEditable:!1,attachThreshold:25,guideLineVisible:!0,guideLineTextSpacing:0,hoverGuideVisible:!1,hoverGuideColor:null,gridBlockSize:40,gridThickLinesEvery:10,gridThickColor:"#5d5d5d",gridLightColor:"#d0d0d0",gridZoomThreshold:.25,gridAlignmentGuideColor:"#ff0000",gridAngle:Math.PI/2,gridRotation:0,groupRotateModeDefault:"block",groupRotateModeKey:["ctrlKey","metaKey"],rotateCursorSize:32,rotateCursorRound:45,tipTextColor:"#ffffff",tipBackground:"#333333",curveHighlightColor:"#30599e",rectPointBackground:"white",rectPointBorderColor:"#666666",rectPointShadowColor:"rgba(0,0,0,0.35)",shapeCtrlPointBackground:"white",shapeCtrlPointBorderColor:null,shapeCtrlPointHighlightBorder:null,shapeHighlighPointBackground:"#30599e",curveElevationVisible:!0,curveElevationIntersectSize:8,curveElevationGuideShift:[20,0],curveTipVisible:!0,connectGuideVisible:!0,connectGuideShift:[1,.25,8,0],connectGuideIntersectSize:8,connectGuideGarbageIntersectsize:25,connectGuideGarbageShift:[1,1,-48,-48]};var me=zo.Icons={},jo=1e4,fo=null,ok=zo.DefaultStyleMap.baseColor,yk="rgb(183,232,135)",dj="rgb(255,204,153)",ph=6;f.Default.setImage("Icons.RectPoint",{width:ph,height:ph,comps:[{type:"rect",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return ok}},rect:[0,0,ph,ph]}]}),me.GroupSubEntityRect={comps:[{type:"shape",points:{func:function(){var W=me.GroupSubEntityRect.data;if(!W)return[];var g=W.min,r=W.max;return[g.x,g.y,g.x,r.y,r.x,r.y,r.x,g.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return me.GroupSubEntityRect.data.isKeyOb?ok:ok}}}]};var ud=4;me.HoverDataRect={comps:[{type:"shape",points:{func:function(){var f=me.HoverDataRect.data;if(!f)return[];var q=f.min,$=f.max,m=ud;return q.x-=m,q.y-=m,$.x+=m,$.y+=m,[q.x,q.y,q.x,$.y,$.x,$.y,$.x,q.y]}},segments:[1,2,2,2,5],background:null,borderWidth:{func:function(){return me.HoverDataRect.data.borderWidth}},borderColor:{func:function(){return me.HoverDataRect.data.color}},borderCap:"butt",borderPattern:{func:function(){return me.HoverDataRect.data.borderPattern}}}]},me.Line={comps:[{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[me.Line.data.P1.x,me.Line.data.P1.y],ph,ph]}}},{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[me.Line.data.P2.x,me.Line.data.P2.y],ph,ph]}}}]},me.NodeHoverGuide={comps:[{type:"shape",points:{func:function(){return me.NodeHoverGuide.data}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:"#3399FF"}]},me.Rect={comps:[{type:"shape",points:{func:function(){var m=me.Rect.data;if(!m)return[];var W=m.LT,s=m.LB,Y=m.RB,q=m.RT;return[W.x,W.y,s.x,s.y,Y.x,Y.y,q.x,q.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return ok}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return me.Rect.data.rotation}},rect:{func:function(){return[[me.Rect.data.LT.x,me.Rect.data.LT.y],ph,ph]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return me.Rect.data.rotation}},rect:{func:function(){return[[me.Rect.data.LB.x,me.Rect.data.LB.y],ph,ph]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return me.Rect.data.rotation}},rect:{func:function(){return[[me.Rect.data.RB.x,me.Rect.data.RB.y],ph,ph]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return me.Rect.data.rotation}},rect:{func:function(){return[[me.Rect.data.RT.x,me.Rect.data.RT.y],ph,ph]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return me.Rect.data.rotation}},visible:{func:function(){return me.Rect.data.L?!0:!1}},rect:{func:function(){return[[me.Rect.data.L.x,me.Rect.data.L.y],ph,ph]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return me.Rect.data.rotation}},visible:{func:function(){return me.Rect.data.R?!0:!1}},rect:{func:function(){return[[me.Rect.data.R.x,me.Rect.data.R.y],ph,ph]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return me.Rect.data.rotation
}},visible:{func:function(){return me.Rect.data.T?!0:!1}},rect:{func:function(){return[[me.Rect.data.T.x,me.Rect.data.T.y],ph,ph]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return me.Rect.data.rotation}},visible:{func:function(){return me.Rect.data.B?!0:!1}},rect:{func:function(){return[[me.Rect.data.B.x,me.Rect.data.B.y],ph,ph]}}}]};var Rl=16;f.Default.setImage("Icons.Anchor",{width:12,height:12,comps:[{type:"shape",borderWidth:1,borderColor:{func:function(){return ok}},borderCap:"round",shadowColor:"#1ABC9C",points:[.50928,6,11.49072,6,6,6,6,.50928,6,11.49072]},{type:"circle",borderWidth:1,borderColor:{func:function(){return ok}},shadowColor:"#1ABC9C",rect:[2.84391,2.84391,6.53697,6.53697]}]}),me.Anchor={comps:[{type:"image",name:"Icons.Anchor",rect:{func:function(){return[[me.Anchor.data.POS.x,me.Anchor.data.POS.y],Rl,Rl]}}}]},me.TipShiftX=12,me.TipShiftY=12;var cm=[8,28];me.TipHelper={comps:[{type:"roundRect",rect:{func:function(){return[me.TipHelper.data.helperPos.x,me.TipHelper.data.helperPos.y,cm[0]*me.TipHelper.data.size,cm[1]]}},background:{func:function(){return fo.getStyle("tipBackground")}},opacity:.6},{type:"text",text:{func:function(){return me.TipHelper.data.text}},rect:{func:function(){return[me.TipHelper.data.helperPos.x,me.TipHelper.data.helperPos.y,cm[0]*me.TipHelper.data.size,cm[1]]}},color:{func:function(){return fo.getStyle("tipTextColor")}},font:"bold 12px Arial",align:"center"}]};var qe=7;me.ShapePoint={comps:[{type:"circle",visible:{func:function(){return!!me.ShapePoint.data.dynamicVisible}},rect:{func:function(){var H=me.ShapePoint.data.point,z=me.ShapePoint.data.size||qe;return[H,z+10,z+10]}},background:{func:function(){var Z=Date.now(),S=me.ShapePoint.data.dynamicPeriod||1500,M=Math.sin(Z%S/S*Math.PI);return"rgba(27,124,22,"+.5*M+")"}},borderWidth:0},{type:"circle",rect:{func:function(){var L=me.ShapePoint.data.point,g=me.ShapePoint.data.size||qe;return[L,g,g]}},background:{func:function(){var G=me.ShapePoint.data.isEnd;return G?"rgba(27,124,222,0.7)":"#ffffff"}},borderWidth:1,borderColor:{func:function(){return me.ShapePoint.data.color||ok}}},{type:"rect",visible:{func:function(){return!!me.ShapePoint.data.dynamicVisible}},background:"red",borderWidth:0,rotation:Math.PI/4,borderColor:{func:function(){return ok}},rect:{func:function(){var o=5;return[me.ShapePoint.data.point,o,o]}}}]},me.ShapeBgCurve={comps:[{type:"shape",visible:{func:function(){return!!me.ShapeBgCurve.data.dynamicVisible}},points:{func:function(){return me.ShapeBgCurve.data.P}},segments:{func:function(){return me.ShapeBgCurve.data.S}},background:null,borderWidth:6,borderColor:{func:function(){var B=Date.now(),y=me.ShapeBgCurve.data.dynamicPeriod||1500,f=Math.sin(B%y/y*Math.PI);return"rgba(27,124,22,"+.3*f+")"}}},{type:"shape",points:{func:function(){return me.ShapeBgCurve.data.P}},segments:{func:function(){return me.ShapeBgCurve.data.S}},background:null,borderWidth:1,borderColor:{func:function(){return me.ShapeBgCurve.data.color||ok}}}]};var hj=8;me.ShapeHighlighPoint={comps:[{type:"circle",rect:{func:function(){var S=me.ShapeHighlighPoint.data;return[[S.x,S.y],hj,hj]}},background:{func:function(){return fo.getStyle("shapeHighlighPointBackground")}},borderWidth:0}]};var qh=10;me.ShapeHighlighRealPoint={comps:[{type:"circle",rect:{func:function(){var k=me.ShapeHighlighRealPoint.data;return[[k.x,k.y],qh,qh]}},background:"#ffffff",borderWidth:2,borderColor:{func:function(){return ok}}}]};var Oh=8;me.ShapeHighlighCtrlPoint={comps:[{type:"shape",points:{func:function(){var H=me.ShapeHighlighCtrlPoint.data,f=H.x,G=H.y,R=Oh/2;return[f-R,G-R,f-R,G+R,f+R,G+R,f+R,G-R]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return fo.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return fo.getStyle("shapeCtrlPointBorderColor")||ok}}}]};var sq=3;me.ShapeHighlightCurve={comps:[{type:"shape",points:{func:function(){return me.ShapeHighlightCurve.data}},segments:[1,4],background:null,borderWidth:sq,borderColor:{func:function(){return fo.getStyle("curveHighlightColor")}}}]},me.ShapeGuideLine={comps:[{type:"shape",points:{func:function(){return me.ShapeGuideLine.data}},background:null,borderWidth:1,borderColor:"rgb(255,204,153)"}]},me.MoveLineGuide={comps:[{type:"shape",points:{func:function(){return me.MoveLineGuide.data.rect}},background:null,borderWidth:1,borderColor:{func:function(){return me.MoveLineGuide.data.center?yk:dj}}}]};var kn=5;me.MoveLineGuideDistanceH={comps:[{type:"shape",points:{func:function(){var h=me.MoveLineGuideDistanceH.data,M=h.x0,U=h.y0;return[M,U-kn,M,U+kn]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:dj},{type:"shape",points:{func:function(){var O=me.MoveLineGuideDistanceH.data,P=O.x1,T=O.y1;return[P,T-kn,P,T+kn]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:dj},{type:"text",text:{func:function(){return Math.round(me.MoveLineGuideDistanceH.data.dis)}},rect:{func:function(){var i=me.MoveLineGuideDistanceH.data;return[[(i.x0+i.x1)/2,i.y0-10],20,20]}},color:dj,font:"12px Arial",align:"center"}]},me.MoveLineGuideDistanceV={comps:[{type:"shape",points:{func:function(){var u=me.MoveLineGuideDistanceV.data,h=u.x0,I=u.y0;return[h-kn,I,h+kn,I]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:dj},{type:"shape",points:{func:function(){var P=me.MoveLineGuideDistanceV.data,H=P.x1,f=P.y1;return[H-kn,f,H+kn,f]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:dj},{type:"text",text:{func:function(){return Math.round(me.MoveLineGuideDistanceV.data.dis)}},rect:{func:function(){var z=me.MoveLineGuideDistanceV.data;return[[z.x0-10,(z.y0+z.y1)/2],20,20]}},color:dj,font:"12px Arial",align:"center"}]},f.Default.setImage("Icons.EdgeElevationGuideImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[.5,.5,15,15]},{type:"shape",borderWidth:2,borderColor:"rgb(44,44,44)",borderCap:"round",points:[4,8,8,4,12,8,8,4,8,13],segments:[1,2,2,1,2]}]}),me.EdgeElevationGuide={comps:[{type:"image",name:"Icons.EdgeElevationGuideImage",rect:{func:function(){var I=me.EdgeElevationGuide.data,b=I.x,j=I.y,A=fo.getStyle("curveElevationIntersectSize"),z=fo.getStyle("curveElevationGuideShift");return b+=z[0],j+=z[1],[b-A,j-A,2*A,2*A]}}}]},f.Default.setImage("Icons.ConnectGuideBgImage",{width:12,height:12,comps:[{type:"shape",background:"#3399ff",fillRule:"evenodd",shadowColor:"#1ABC9C",rotation:3.14159,points:[6.00001,11.99999,6.00001,11.99999,2.6863,11.99999,1e-5,9.30695,1e-5,5.99999,1e-5,5.99999,1e-5,2.68628,2.69305,-1e-5,6.00001,-1e-5,12.00001,-1e-5,11.99998,12.00001,6.00001,11.99999],segments:[1,2,4,2,4,2,2,2]}]}),f.Default.setImage("Icons.ConnectGuideHeaderImage",{width:12,height:12,comps:[{type:"oval",background:"#3399FF",borderColor:"#3399FF",shadowColor:"#1ABC9C",rect:[0,0,12,12]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.76,2.56,8.2,5.98,4.76,9.44]}]}),me.ConnectGuide={comps:[{type:"image",name:"Icons.ConnectGuideBgImage",rotation:{func:function(){return me.ConnectGuide.data.rotation}},rect:{func:function(){var u=me.ConnectGuide.data.connect;u.x,u.y;var h=fo.getStyle("connectGuideIntersectSize");return[[u.x,u.y],2*h,2*h]}}},{type:"image",name:"Icons.ConnectGuideHeaderImage",rect:{func:function(){var u=me.ConnectGuide.data.cursorPos||me.ConnectGuide.data.connect,i=fo.getStyle("connectGuideIntersectSize");return[[u.x,u.y],2*i-2,2*i-2]}}},{type:"shape",background:null,borderColor:"#3399ff",borderWidth:2,segments:[1,4],points:{func:function(){var i=me.ConnectGuide.data.connect,A=me.ConnectGuide.data.cursorPos||i;return[i.x,i.y,i.x+.5*(A.x-i.x),i.y,A.x+.5*(i.x-A.x),A.y,A.x,A.y]}}}]},f.Default.setImage("Icons.ConnectGuideGarbageImage",{width:48,height:48,comps:[{type:"oval",background:"rgba(0,0,0,0.1)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,48,48]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[19.84721,19.69091,19.84721,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[24.10371,19.69091,24.10371,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[28.15279,19.69091,28.15279,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[11.23055,15.22377,36.76945,15.189,19.12302,15.17121,20.94722,11.5228,26.41985,11.5228,28.24406,15.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[15.48702,15.22377,17.02595,21.25344]}]}),f.Default.setImage("Icons.ConnectGuideDeletingImage",{width:56,height:56,comps:[{type:"oval",background:"rgba(232,0,0,0.75)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,56,56]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[22.67939,27.69091,22.67939,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[26.93588,27.69091,26.93588,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[30.98497,27.69091,30.98497,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",anchorX:0,anchorY:1,rotation:5.65062,points:[14.06272,23.22377,39.60163,23.189,21.9552,23.17121,23.7794,19.5228,29.25203,19.5228,31.07623,23.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[18.3192,23.22377,17.02595,21.25344]}]}),me.ConnectGuideGarbage={comps:[{type:"image",name:{func:function(){var H=me.ConnectGuideGarbage.data.hover;return H?"Icons.ConnectGuideDeletingImage":"Icons.ConnectGuideGarbageImage"}},rect:{func:function(){var c=me.ConnectGuideGarbage.data,v=fo.getStyle("connectGuideGarbageIntersectsize");return c.hover&&(v+=5),[[c.x,c.y],2*v,2*v]}}}]};var Db=6;me.ShapeActivingCtrl={comps:[{type:"shape",visible:{func:function(){return me.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var I=me.ShapeActivingCtrl.data;return[I.point.x,I.point.y,I.c1.x,I.c1.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return ok}}},{type:"shape",visible:{func:function(){return me.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var C=me.ShapeActivingCtrl.data;return[C.point.x,C.point.y,C.c2.x,C.c2.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return ok}}},{type:"shape",visible:{func:function(){return me.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var P=me.ShapeActivingCtrl.data.c1,w=P.x,o=P.y,g=Db/2;return"c1"===me.ShapeActivingCtrl.data.hl&&(g+=.5),[w-g,o-g,w-g,o+g,w+g,o+g,w+g,o-g]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return fo.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c1"===me.ShapeActivingCtrl.data.hl?fo.getStyle("shapeCtrlPointHighlightBorder")||ok:fo.getStyle("shapeCtrlPointBorderColor")||ok}}},{type:"shape",visible:{func:function(){return me.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var Y=me.ShapeActivingCtrl.data.c2,y=Y.x,e=Y.y,j=Db/2;return"c2"===me.ShapeActivingCtrl.data.hl&&(j+=.5),[y-j,e-j,y-j,e+j,y+j,e+j,y+j,e-j]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return fo.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c2"===me.ShapeActivingCtrl.data.hl?fo.getStyle("shapeCtrlPointHighlightBorder")||ok:fo.getStyle("shapeCtrlPointBorderColor")||ok}}}]},me.RoundPoint={comps:[{type:"circle",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return ok}},rect:{func:function(){return[[me.RoundPoint.data.x,me.RoundPoint.data.y],ph,ph]}}}]},me.AttachPoint={comps:[{type:"rect",background:{func:function(){return me.AttachPoint.data.isAttach?"rgb(51,153,255)":"rgb(247,247,247)"}},borderWidth:1,rotation:Math.PI/4,borderColor:{func:function(){return ok}},rect:{func:function(){var s=me.AttachPoint.data.isAttach?ph+4:ph;return[[me.AttachPoint.data.x,me.AttachPoint.data.y],s,s]}}}]},me.SimpleRect={comps:[{type:"rect",background:null,borderWidth:{func:function(){return me.SimpleRect.data.borderWidth||1}},borderColor:{func:function(){return me.SimpleRect.data.color||ok}},rect:{func:function(){var N=me.SimpleRect.data;return[N.x,N.y,N.width,N.height]}}}]},f.Default.setImage("Icons.MoveDummyImage",{width:32,height:32,boundExtend:12,attachStyle:"close",comps:[{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",shadow:!0,shadowColor:"rgba(0,0,0,0.25)",shadowOffsetX:0,rect:[0,0,32,32]},{type:"shape",background:"rgb(51,153,255)",pixelPerfect:!0,points:[8.65079,11.90713,9.05502,11.46921,9.70629,11.46921,10.11052,11.90713,10.51476,12.28891,10.51476,12.92895,10.11052,13.34441,8.49359,14.97258,12.2889,14.97258,12.85034,14.97258,13.29949,15.42172,13.29949,15.99439,13.29949,16.57828,12.85034,17.0162,12.2889,17.0162,8.49359,17.0162,10.11052,18.6556,10.51476,19.0486,10.51476,19.7111,10.11052,20.09288,9.70629,20.50834,9.05502,20.50834,8.65079,20.09288,5.32709,16.76917,5.28217,16.71303,4.87794,16.32002,4.87794,15.67998,5.28217,15.26452,8.65079,11.90713,8.65079,11.90713,8.65079,11.90713,13.3444,10.09931,13.3444,10.09931,12.94017,10.50354,12.2889,10.50354,11.88467,10.09931,11.48043,9.69507,11.48043,9.0438,11.88467,8.63957,15.27574,5.25973,15.66874,4.86672,16.32001,4.86672,16.73547,5.25973,16.76917,5.31586,20.10409,8.63957,20.50832,9.0438,20.50832,9.68385,20.10409,10.09931,19.69986,10.49231,19.07105,10.50354,18.64436,10.09931,17.02742,8.45991,17.02742,12.26646,17.02742,12.83912,16.55581,13.31072,15.99438,13.31072,15.43295,13.31072,14.98379,12.83912,14.98379,12.26646,14.96134,8.45991,13.3444,10.09931,13.3444,10.09931,13.3444,10.09931,21.90069,13.33318,21.90069,13.33318,21.49646,12.91771,21.49646,12.27768,21.90069,11.89591,22.31615,11.45798,22.94497,11.45798,23.36043,11.89591,26.72904,15.2533,27.12205,15.66876,27.12205,16.3088,26.72904,16.7018,26.6729,16.75794,23.36043,20.08165,22.94497,20.49711,22.31615,20.49711,21.90069,20.08165,21.49646,19.69987,21.49646,19.03737,21.90069,18.64437,23.51763,17.00498,19.72231,17.00498,19.14965,17.00498,18.71173,16.56705,18.71173,15.98316,18.71173,15.41049,19.14965,14.96135,19.72231,14.96135,23.51763,14.96135,21.90069,13.33318,21.90069,13.33318,21.90069,13.33318,11.88467,23.32675,11.88467,23.32675,11.48043,22.94498,11.48043,22.27125,11.88467,21.88948,12.2889,21.48523,12.94017,21.48523,13.3444,21.88948,14.96134,23.52887,14.98379,19.7111,14.98379,19.14966,15.43295,18.67805,15.99438,18.67805,16.55581,18.67805,17.02742,19.14966,17.02742,19.7111,17.02742,23.52887,18.64436,21.88948,19.07105,21.48523,19.69986,21.48523,20.10409,21.88948,20.50832,22.27125,20.50832,22.94498,20.10409,23.32675,16.76917,26.65045,16.73547,26.72905,16.32001,27.13329,15.66874,27.13329,15.27574,26.72905,11.88467,23.32675,11.88467,23.32675,11.88467,23.32675],segments:[1,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2]}]}),me.MoveDummy={comps:[{type:"image",name:"Icons.MoveDummyImage",rect:{func:function(){var b=me.MoveDummy.data;return[[b.pos.x,b.pos.y],2*b.size,2*b.size]}}}]},zo.Icons.DrawIcon=function(Z,v,N,r){N.width=N.height=jo,N.data=r,fo=Z,f.Default.drawImage(v,N,0,0,jo,jo),fo=n},zo.Icons.MapPoints=function(u,I){for(var X=0,z=u.length;z>X;X++)u[X]/=I},zo.roundTo=function(M,J,c){var v=Math.abs(M%J);return c>v||c>J-v?J*Math.round(M/J):M},zo.toFixed=function(F){return Math.round(100*F)/100},zo.getDataMatrix=function(q){if(q instanceof f.Shape){var V=new f.Math.Matrix2d,Q=q.getPosition();return V.translate(-Q.x,-Q.y).scale(q.getScale().x,q.getScale().y).rotate(q.getRotation()).translate(Q.x,Q.y),V}return q.getMatrix?q.getMatrix():new f.Math.Matrix2d};var Bs=zo.Math.Curve=function(){this._curves=[]};Bs.prototype={},Bs.prototype.constructor=Bs,Bs.prototype.createFromHtShape=function(D,y,m){y instanceof f.List&&(y=y.toArray());var $,U,I,g,q,J,k,Y=this,V=null,Q=null,s=0,E=zo.Math.Vector2,N=zo.Math.CubicBezier,G=function(Y){return new E(D[Y],D[Y+1],m?m[Y/2]:n)};for(U=0,I=y.length;I>U;U++){switch(g=y[U],q=null,g){case 1:Q=G(s),V=Q,s+=2;break;case 2:$=G(s),s+=2,q=new N(Q,Q.clone(),$.clone(),$),Q=$;break;case 3:J=G(s),$=G(s+2),s+=4,q=new N(Q,J.clone().sub(Q).multiplyScalar(2/3).add(Q),J.clone().sub($).multiplyScalar(2/3).add($),$),Q=$;break;case 4:J=G(s),k=G(s+2),$=G(s+4),s+=6,q=new N(Q,J,k,$),Q=$;break;case 5:if(!V)break;q=new N(Q,Q.clone(),V.clone(),V),Q=null,V=null}q&&(q._index=Y._curves.length,Y._curves.push(q))}},Bs.prototype.checkPoint=function(A,z){var H,t,S,f,k,V=this,g=V._curves;for(H=0,t=g.length;t>H;H++)if(f=g[H],k=f.intersectRect(A,z,z),k.length)return S=0,k.forEach(function(I){S+=I.t}),S/=k.length,A=f.getPointAt(S),A.t=S,{bezier:f,intersection:A}},Bs.prototype.insertKnot=function(G,U){var p=G.insertKnot(U),Z=this,v=Z._curves;v.splice(G._index,1,p[0],p[1])},Bs.prototype._isCloseEnough=function($,e){return Math.abs($.x-e.x)<1e-6&&Math.abs($.y-e.y)<1e-6},Bs.prototype._isSamePoint=function(n,v){return n===v},Bs.prototype.moveRealPoint=function(D,U){var l=this,O=l._curves,V=U.clone().sub(D);O.forEach(function(e){var n=e._p1;e._p2,e._p3;var o=e._p4;l._isSamePoint(n,D)&&(e._p2.add(V),e._p1=U),l._isSamePoint(o,D)&&(e._p3.add(V),e._p4=U)})},Bs.prototype.moveCtrlDueToRealPointMovement=function(S,K){var s=this,O=s._curves,W=function(W){W.add(K),W.e&&K.e&&(W.e+=K.e)};O.forEach(function(n){var G=n._p1;n._p2,n._p3;var r=n._p4;s._isSamePoint(G,S)&&W(n._p2),s._isSamePoint(r,S)&&W(n._p3)})},Bs.prototype.moveCtrlPoint=function(L,A,N){var p=L[N];if(p){p.e!==n&&(A.e=p.e);var t=this,d=t._curves;A.clone().sub(p),d.forEach(function(w){var S;"c2"===N?S="_p2":"c1"===N&&(S="_p3"),t._isSamePoint(w[S],p)&&(w[S]=A)}),L[N]=A}},Bs.prototype.deleteRealPoint=function(s,f){var d,N,B,p,b,I,r,g=this,c=g._curves,_={},Y=[],j=zo.Math.CubicBezier;for(N=0,B=c.length;B>N;N++)d=c[N],p=d._p1,b=d._p2,I=d._p3,r=d._p4,(_[N]||!g._isSamePoint(p,s))&&(g._isSamePoint(r,s)?B>N+1&&g._isSamePoint(c[N+1]._p1,s)&&(f||Y.push(new j(p,b,c[N+1]._p3,c[N+1]._p4))):Y.push(d));g._curves=Y},Bs.prototype.findPairs=function(t,D){var r,B,N,p,R,V,Q,P,E=this,f=E._curves,y={},O=[];for(B=0,N=f.length;N>B;B++)r=f[B],p=r._p1,R=r._p2,V=r._p3,Q=r._p4,!y[B]&&E._isSamePoint(p,t)&&(D?O.push({point:p,r2:Q}):O.push({point:p,c2:R})),E._isSamePoint(Q,t)&&(P=D?{point:Q,r1:p}:{point:Q,c1:V},N>B+1&&E._isSamePoint(f[B+1]._p1,t)&&(D?P.r2=f[B+1]._p4:P.c2=f[B+1]._p2,y[B+1]=!0),O.push(P));return O},Bs.prototype.toHtShape=function(){var b=this,c=b._curves,Y=[],D=[],v={x:1/0,y:1/0};return c.forEach(function(C){var Q=C._p1,K=C._p2,B=C._p3,g=C._p4;return b._isCloseEnough(Q,v)||(Y.push(1),D.push(Q.clone())),v=g,b._isCloseEnough(Q,K)&&b._isCloseEnough(B,g)?(Y.push(2),D.push(g.clone()),void 0):(Y.push(4),D.push(K.clone(),B.clone(),g.clone()),void 0)}),{segments:Y,points:D}};var Pj=zo.Math.CubicBezier=function(Z,$,g,j){var s=this;s._id=zo.Math.CubicBezier._globalId++,s._p1=Z,s._p2=$,s._p3=g,s._p4=j};Pj._globalId=1,Pj.prototype={},Pj.prototype.constructor=Pj,Pj.prototype.toString=function(){return this._id},Pj.prototype.intersectRect=function(e,B,E){var y=B/2,b=E/2,g=e.x,i=e.y,T=zo.Math.Vector2,r=new T(-y+g,-b+i),K=new T(y+g,b+i),s=new T(K.x,r.y),V=new T(r.x,K.y),a=this,z=a.intersectLine(r,s),P=a.intersectLine(s,K),m=a.intersectLine(K,V),v=a.intersectLine(V,r),D=z.concat(P).concat(m).concat(v);return D},Pj.prototype.intersectLine=function(Y,G){var B,_,I,r,S,K,s,z,C,x,E,l,u,N=this,M=Y.clone().min(G),f=Y.clone().max(G);r=N._p1,S=N._p2,K=N._p3,s=N._p4,B=r.clone().multiplyScalar(-1),_=S.clone().multiplyScalar(3),I=K.clone().multiplyScalar(-3),E=B.add(_).add(I).add(s),B=r.clone().multiplyScalar(3),_=S.clone().multiplyScalar(-6),I=K.clone().multiplyScalar(3),x=B.add(_).add(I),B=r.clone().multiplyScalar(-3),_=S.clone().multiplyScalar(3),C=B.add(_),z=r.clone(),u=new zo.Math.Vector2(Y.y-G.y,G.x-Y.x),l=Y.x*G.y-G.x*Y.y;for(var O=N.getRoots(u.dot(E),u.dot(x),u.dot(C),u.dot(z)+l),$=new Array,X=0,J=O.length;J>X;X++){var p=O[X];if(!(0>p||p>1)){var T=N.getPointAt(p);T.t=p,Y.x==G.x?M.y<=T.y&&T.y<=f.y&&$.push(T):Y.y==G.y?M.x<=T.x&&T.x<=f.x&&$.push(T):T.x>=M.x&&T.y>=M.y&&T.x<=f.x&&T.y<=f.y&&$.push(T)}}return $},Pj.prototype.solveTForPoint=function(x){var E,P,K,g,o=this;E=o._p1.x-x.x,P=o._p2.x-x.x,K=o._p3.x-x.x,g=o._p4.x-x.x;for(var W=o.getRoots(g-3*K+3*P-E,3*K-6*P+3*E,3*P-3*E,E),m=n,e=1/0,y=0,F=W.length;F>y;y++){var R=W[y];if(!(0>R||R>1)){var V=o.getPointAt(R);V.t=R;var u=Math.abs(V.y-x.y);e>u&&(e=u,m=V)}}return m},Pj.prototype.getPointAt=function(B){var o=this,z=o._p1,y=o._p2,I=o._p3,H=o._p4,q=z.clone().lerp(y,B),U=y.clone().lerp(I,B),R=I.clone().lerp(H,B),N=q.lerp(U,B),b=U.lerp(R,B);return N.lerp(b,B)},Pj.prototype.getPointByPercentage=function(P){var t=this.length*P,Z=this._cacheLength,n=Z.length;if(0===t)return Z[0].point;if(P>=1)return Z[n-1].point;for(var O=0;n>O;O++){var f=Z[O];if(!(f.len<t)){var S=Z[O-1];return f.point.clone().sub(S.point).setLength(t-S.len).add(S.point)}}},Pj.prototype.getTByPercentage=function(o){var M=this.length*o,I=this._cacheLength,f=I.length;if(0===M||0>=o)return I[0].t;if(o>=1)return I[f-1].t;for(var D=0;f>D;D++){var j=I[D];if(!(j.len<M)){var g=I[D-1];return(M-g.len)/(j.len-g.len)*(j.t-g.t)+g.t}}},Pj.prototype.getRoots=function(K,B,C,X){var G,p,T,F,d,k=new Array;if(Math.abs(K)<1e-6){var G=B,p=C/G,T=X/G,F=p*p-4*T;if(F>0){var d=Math.sqrt(F);k.push(.5*(-p+d)),k.push(.5*(-p-d))}else 0==F&&k.push(.5*-p)}B/=K,C/=K,X/=K,G=(3*C-B*B)/3,p=(2*B*B*B-9*C*B+27*X)/27;var I=B/3,m=p*p/4+G*G*G/27,y=p/2;if(Math.abs(m)<=1e-6&&(m=0),m>0){var f,S,d=Math.sqrt(m);f=-y+d,S=f>=0?Math.pow(f,1/3):-Math.pow(-f,1/3),f=-y-d,f>=0?S+=Math.pow(f,1/3):S-=Math.pow(-f,1/3),k.push(S-I)}else if(0>m){var D=Math.sqrt(-G/3),w=Math.atan2(Math.sqrt(-m),-y)/3,h=Math.cos(w),W=Math.sin(w),n=Math.sqrt(3);k.push(2*D*h-I),k.push(-D*(h+n*W)-I),k.push(-D*(h-n*W)-I)}else{var f;f=y>=0?-Math.pow(y,1/3):Math.pow(-y,1/3),k.push(2*f-I),k.push(-f-I)}return k},Pj.prototype._70I=function(){var e=this;return e._p1.distanceToSquared(e._p2)<1e-10&&e._p3.distanceToSquared(e._p4)<1e-10},Pj.prototype.insertKnot=function(E){var o=this,O=o._p1,r=o._p2,w=o._p3,S=o._p4,Q=O.clone().lerp(r,E),H=r.clone().lerp(w,E),k=w.clone().lerp(S,E),s=Q.clone().lerp(H,E),L=H.clone().lerp(k,E),F=s.clone().lerp(L,E);return o._70I()?(O.clone().lerp(S,E),[new zo.Math.CubicBezier(O,O.clone(),F.clone(),F),new zo.Math.CubicBezier(F,F.clone(),S.clone(),S)]):[new zo.Math.CubicBezier(O,Q,s,F),new zo.Math.CubicBezier(F,L,k,S)]},y.defineProperties(Pj.prototype,{length:{get:function(){var U=this._cacheLength;if(!U){U=this._cacheLength=[];for(var F=this._p1,h=0,n=0;1>=h;){var z=this.getPointAt(h+=.001);n+=z.clone().sub(F).length(),F=z,U.push({len:n,t:h,point:z.clone()})}}return U[U.length-1].len}},p1:{get:function(){return this._p1},set:function(G){this._p1=G,this._cacheLength=n}},p2:{get:function(){return this._p2},set:function(K){this._p2=K,this._cacheLength=n}},p3:{get:function(){return this._p3},set:function(h){this._p3=h,this._cacheLength=n}},p4:{get:function(){return this._p4},set:function(x){this._p4=x,this._cacheLength=n}}});var pf=f.Default.getInternal().ui().EdgeUI,Ld={_47O:function(h){var H=this,f=Ld.getBackups()._47O;zo.inEdit(H.gv)||f.call(H,h)}};zo.Inject.registAsModule(Ld,pf);var le=f.Default.getInternal().ui().NodeUI,Bn={_47O:function(A){var V=this,i=Bn.getBackups()._47O;zo.inEdit(V.gv)||i.call(V,A)},getSelectWidth:function(){var f=this,S=f.gv,c=f._data;if(S.isEditable(c)&&zo.inEdit(S))return 0;var H=Bn.getBackup("getSelectWidth");return H.call(f)}};zo.Inject.registAsModule(Bn,le);var Ee=f.graph.GraphView,Pi={_editPointSize:function(){var n=f.Default.isTouchable,K=zo.getStyle("pointSize");return K[n?0:1]}(),isPointEditable:function(I){var m=this;if(zo.inEdit(m))return m._pointEditableFunc?m._pointEditableFunc(I):!0;var v=Pi.getBackup("isPointEditable");v.call(m,I)},isEditable:function(h){var V,w=this,G=Pi.getBackup("isEditable");if(V=h instanceof zo.Group?!0:G.call(w,h),!zo.inEdit(w))return V;if(!(h instanceof f.Edge))return V;if(!h.s("2d.editable"))return!1;var A=w.getEditableFunc();return A?A(h):!0},_42:function(A,r){var n=this,T=Pi.getBackups()._42;if(T.call(n,A,r),zo.inEdit(n)){var g=n.getEditInteractor();g.drawImpl()}}};zo.Inject.registAsModule(Pi,Ee);var Ac=f.Default.getInternal().ui().ShapeUI,Rn={_47O:function(M){var _=this,e=Rn.getBackups()._47O;zo.inEdit(_.gv)||e.call(_,M)}};zo.Inject.registAsModule(Rn,Ac);var Ak=f.graph.DefaultInteractor,Tk={handle_mousewheel:function(g){var v=this,d=Tk.getBackup("handle_mousewheel");zo.inEdit(v.gv)||d.call(v,g)}};zo.Inject.registAsModule(Tk,Ak);var sm=f.graph.MoveInteractor,jd={_calcShift:function(t,q){var m=this,z=jd.getBackup("_calcShift"),H=m.gv;if(!zo.inEdit(H))return z.call(m,t,q);var K=H.getEditInteractor(),d=K.getSubModule("Move").calcShift(t,q,m);return d||z.call(m,t,q)},clear:function(i){var l=this,H=jd.getBackup("clear");H.call(l,i);var p=l.gv;if(zo.inEdit(p)){var d=p.getEditInteractor();d.getSubModule("Move").clear(i)}}};zo.Inject.registAsModule(jd,sm);var Wb=zo.Rect=function(_){this.catalog="Rect",this._interactor=_};Wb.prototype={},Wb.prototype.constructor=Wb,Wb.prototype.gatherInfo=function(X,i){var K=this;if(1===i.length){var M=i[0];return M instanceof f.Shape&&M._70I()?K.gatherLine(X,M):Ah(M,X)?!1:K.gatherSingleTarget(X,M)}return i.length>1?K.gatherMultiTargets(X,i):!1},Wb.prototype.gatherSingleTarget=function(R,D){if(D.getCorners){var I,q=this,e=q.info;q.target=D,I=q.screenInfo={};var G=D.getCorners();e.LT=new zo.Math.Vector2(G[0]),e.LB=new zo.Math.Vector2(G[1]),e.RB=new zo.Math.Vector2(G[2]),e.RT=new zo.Math.Vector2(G[3]),e.T=e.LT.clone().add(e.RT).divideScalar(2),e.B=e.LB.clone().add(e.RB).divideScalar(2),e.L=e.LT.clone().add(e.LB).divideScalar(2),e.R=e.RT.clone().add(e.RB).divideScalar(2);for(var V in e)I[V]=zo.toScreenPosition(R,e[V]);var O=q._interactor,E=O.getStyle("checkSize"),o=function(e,s,B){var W=s.clone().sub(e).setLength(-E),K=B.clone().sub(e).setLength(-E),q=W.add(K).add(e);return q};return I.rotLT=o(I.LT,I.RT,I.LB),I.rotLB=o(I.LB,I.LT,I.RB),I.rotRB=o(I.RB,I.LB,I.RT),I.rotRT=o(I.RT,I.LT,I.RB),I.rotT=I.rotLT.clone().add(I.rotRT).divideScalar(2),I.rotB=I.rotLB.clone().add(I.rotRB).divideScalar(2),I.rotL=I.rotLT.clone().add(I.rotLB).divideScalar(2),I.rotR=I.rotRT.clone().add(I.rotRB).divideScalar(2),I.rotation=D.getRotation(),q.gatherConnectInfo(),!0}},Wb.prototype.gatherConnectInfo=function(){var a=this,c=a.target,C=a._interactor,x=a.screenInfo,o=C.gv;if(o.isConnectActionVisible(c)&&C.getStyle("connectGuideVisible")){var A;c.s&&(A=c.s("connectGuideShift")),A||(A=C.getStyle("connectGuideShift"));var D=c.getAnchor(),O=c.getSize(),b=c.toGlobal({x:O.width*(A[0]-D.x),y:O.height*(A[1]-D.y)});b=zo.toScreenPosition(o,b),x.P1?b.add(x.P2.clone().sub(x.P1).setLength(A[2])):(b.add(x.RT.clone().sub(x.LT).setLength(A[2])),b.add(x.LB.clone().sub(x.LT).setLength(A[3]))),x.connect=b}},Wb.prototype.gatherMultiTargets=function(i,t){var B=zo.Group.findOrCreateGroup(t,this._interactor._uuid);if(!B)return!1;var q=this;return q.editing&&"rotate"!==q.editing.mode||B.calcInfo(),q.gatherSingleTarget(i,B)},Wb.prototype.gatherLine=function(y,w){this.target=w;var I=this.screenInfo={},n=w.getPoints(),O=zo.getDataMatrix(w);return I.P1=zo.toScreenPosition(y,O.apply(n.get(0))),I.P2=zo.toScreenPosition(y,O.apply(n.get(1))),this.gatherConnectInfo(),!0},Wb.ResizeKeys=["LT","RB","LB","RT","L","R","B","T"],Wb.ResizeDirection=[{x:-1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],Wb.RotateKeys=["rotLT","rotRB","rotLB","rotRT","rotL","rotR","rotB","rotT"],Wb.prototype.check=function(S,k,j){if(f.Default.isLeftButton(k)){var T=this;if(T.editing=null,T.tipInfo=null,T.screenInfo){var O=T.target,i=S.isEditable(O),U=T.screenInfo;if(i&&U.connect){var b=T._checkConnect(j);if(b)return b}if(U.P1)return T._checkLine(j);var N,H,C,E=null,e=T._interactor,Y=e.getStyle("checkSize");if(i&&S.isRectEditable(O))for(H=0;H<zo.Rect.ResizeKeys.length;H++)if(C=zo.Rect.ResizeKeys[H],zo.checkHit(j,U[C],Y)){E=C,N="resize";break}if(!E&&i&&S.isRotationEditable(O)&&!e.getStyle("rotateAsClock")){var q=e.getStyle("rotateCheckSize");for(H=0;H<zo.Rect.RotateKeys.length;H++)if(C=zo.Rect.RotateKeys[H],zo.checkHit(j,U[C],q)){E=C,N="rotate";break}}if(!E)return e.setCursor("default"),void 0;if("rotate"===N){var I,G=S.lp(k);if(O instanceof zo.Group){var n=e.getStyle("groupRotateModeKey");"string"==typeof n&&(n=[n]);for(var J=!1,v=0,m=n.length;m>v;v++)if(k[n[v]]){J=!0;break}var p=e.getStyle("groupRotateModeDefault");I=J?"batch"===p?"block":"batch":p}var A="batch"===I?O.getAnchor2():O.getPosition(),$=Math.atan2(G.y-A.y,G.x-A.x);e._setRotateCursor($),T.editing={mode:N,key:E,pos:A,flipY:O.getScale().y<0,rotation:O.getRotation(),hitRot:$},I&&(T.editing.groupRotateMode=I)}else{var u=zo.Rect.ResizeKeys.indexOf(E),V=zo.Rect.ResizeDirection[u],M=Math.cos(O.getRotation()),z=Math.sin(O.getRotation()),D=V.x*Math.sign(O.getScale().x),Q=V.y*Math.sign(O.getScale().y),o=Math.atan2(-z*D-M*Q,M*D-z*Q),x=(Math.round(o/(Math.PI/4))+8)%8,t=["ew-resize","nesw-resize","ns-resize","nwse-resize","ew-resize","nesw-resize","ns-resize","nwse-resize"][x];this._interactor.setCursor(t);var d=O.getWidth(),P=O.getHeight(),a=O.getAnchor();T.editing={mode:N,key:E,rect:{x:-d*a.x,y:-P*a.y,width:d,height:P},anchor:a,matrix:O.getMatrix()}}return E}}},Wb.prototype._checkLine=function(p){var P=this;P.screenInfo;var c,T=P._interactor.getStyle("checkSize");if(zo.checkHit(p,P.screenInfo.P1,T))c="P1";else{if(!zo.checkHit(p,P.screenInfo.P2,T))return this._interactor.setCursor("default"),void 0;c="P2"}return P.editing={mode:"line",key:c},c},Wb.prototype._checkConnect=function(B){var C=this,P=C.screenInfo,W=C._interactor,r=W.getStyle("connectGuideIntersectSize"),H=P.connect,M=B.x,K=H.x;if(K>M&&r>K-M&&Math.abs(H.y-B.y)<r||M>=K&&zo.checkHit(B,H,r)){var t="connect",m=Q.getConnectAction(W.gv);if(C.editing={mode:t},m&&m.delete)if(C.target instanceof zo.Group){var x=!0;W.gv.sm().getSelection().each(function(J){m.delete.visible.call(null,W.gv,J)||(x=!1)}),C.editing.hasDeleteAction=x}else m.delete.visible.call(null,W.gv,C.target)&&(C.editing.hasDeleteAction=!0);return W.setCursor("default"),t}},Wb.prototype._fireEditEvent=function(s,X){var T=this._interactor,o=this.editing;if(o){var Q=o.mode;Q="rotate"===Q?"Rotation":"connect"===Q?"Connection":"resize"===Q?"Rect":Q[0].toUpperCase()+Q.slice(1),T.fi({kind:s+"Edit"+Q,event:X})}},Wb.prototype.startEdit=function(L,O){L.startDragging(O);var y=this;y._interactor.fi({kind:"prepareEdit",event:O});var p=y.editing,A=y.target;if(p){if(y._fireEditEvent("begin",O),p.started=!0,"rotate"===p.mode)return p.groupRotateMode&&A.beginRotate(p),L._42(),void 0;if("connect"!==p.mode)("line"===p.mode||A&&0===A.getRotation())&&(y._inSmartGuide=!0,y._interactor.rectGuide.gatherRects());else if(p.hasDeleteAction){var f=L.gv,v=y._interactor.getStyle("connectGuideGarbageShift");p.garbageInfo={x:f.getWidth()*v[0]+v[2],y:f.getHeight()*v[1]+v[3],size:y._interactor.getStyle("connectGuideGarbageIntersectsize")},L._42()}}},Wb.prototype._46O=function(Z){var F,V,e=this,t=e.editing,B=e.target;if(t){if("connect"===t.mode&&!t.canceled&&!t.deleted)try{t.garbageInfo&&t.garbageInfo.hover?Q.doDeleteConnectionAction(e._interactor.gv,B):Q.doConnectAction(e._interactor.gv,B,t.target)}catch(I){console.error(I)}V=t.freezeFlag,F=e.editing.groupRotateMode,e._fireEditEvent("end",Z),e.editing=null}e.tipInfo=null,e._inSmartGuide&&(e._interactor.rectGuide.clear(),e._inSmartGuide=!1),F&&B&&B.endRotate(),B instanceof f.Block&&(V===n?delete B._freezeSyncFromChildren:B._freezeSyncFromChildren=V,B.updateFromChildren())},Wb.prototype.handleNormalStateDelete=function(){var S=this,m=S.editing;if(m&&"connect"===m.mode&&!m.canceled&&!m.deleted){if(m.garbageInfo){try{Q.doDeleteConnectionAction(S._interactor.gv,S.target)
}catch(M){console.error(M)}m.garbageInfo=null}return m.cursorPos=null,m.targetCorners=null,m.deleted=!0,S._interactor._42(),!0}},Wb.prototype.handleNormalStateKeyDown=function(r){var A=this,u=A.editing;return!u||"connect"!==u.mode||u.canceled||u.deleted?void 0:f.Default.isEsc(r)?(u.cursorPos=null,u.targetCorners=null,u.canceled=!0,A._interactor._42(),!0):void 0},Wb.prototype.handleEdit=function(U,S){var J=this,i=J.editing;if(i){var x,O,P,Y,A,T=J.target,z=i.key,h=i.mode,E=U.lp(S),y=J._interactor;if("connect"===h){if(i.canceled)return;if(i.deleted)return;i.cursorPos=y._getLogicalPoint(S);var Z=i.garbageInfo;return Z&&zo.checkHit(i.cursorPos,Z,Z.size)?(Z.hover=!0,i.target=null,i.targetCorners=null):(Z&&(Z.hover=!1),i.target=U.getDataAt(E,function(o){return U.isSelectable(o)?Cl(o)?!0:!1:!1})||null,i.targetCorners=zo.getTargetCornersOnScreen(U,i.target)),y._42(),void 0}if("rotate"===h){var t,o,g=i.pos,l=Math.atan2(E.y-g.y,E.x-g.x);if(i.groupRotateMode?o=l-i.hitRot:(t=l-i.hitRot,o=i.rotation+t),o%=2*Math.PI,0>o&&(o+=2*Math.PI),!f.Default.isCtrlDown(S)){var Q,r;Sl(S)?(Q=y.getStyle("shiftRotateRound"),r=Q/2):(Q=y.getStyle("rotateRound"),r=y.getStyle("rotateSensitivity")),o=zo.roundTo(o,Q,r)}i.groupRotateMode?(t=o-(i.lastRotation||0),0!==t&&(T.addRotation(t,i.groupRotateMode,function(g){return U.isRotationEditable(g)}),i.lastRotation=o)):T.setRotation(o),y._setRotateCursor(l),o>Math.PI&&(o-=2*Math.PI);var p=180*(o/Math.PI);p=p.toFixed(2),x=""+p+"掳"}else if("resize"===h){var q=i.rect;P=q.x,Y=q.y;var D,W=q.width,B=q.height,j=i.anchor,X=i.matrix,c=T.s&&T.s("keepAspectRatio")||y.getStyle("keepAspectRatio");Sl(S)&&(c=!c);var L=J._unionPointMode1,a=J._unionPointMode2;if(J._inSmartGuide&&!f.Default.isCtrlDown(S)&&!c){var K;"L"===z||"R"===z?K="x":("T"===z||"B"===z)&&(K="y"),J._adsorbedToClosest(E,K),A=!0}D=X.tfi(E);var H;"LT"===z?(q=L(D,{x:P+W,y:Y+B},W,B,c),H=9):"T"===z?(q=a({x:P,y:D.y},{x:P+W,y:Y+B},W,B,c,"v"),H=1):"RT"===z?(q=L(D,{x:P,y:Y+B},W,B,c),H=33):"L"===z?(q=a({x:D.x,y:Y},{x:P+W,y:Y+B},W,B,c,"h"),H=8):"R"===z?(q=a({x:P,y:Y},{x:D.x,y:Y+B},W,B,c,"h"),H=32):"LB"===z?(q=L(D,{x:P+W,y:Y},W,B,c),H=12):"B"===z?(q=a({x:P,y:Y},{x:P+W,y:D.y},W,B,c,"v"),H=4):"RB"===z&&(q=L(D,{x:P,y:Y},W,B,c),H=36);var N=X.tf(q.x+q.width*j.x,q.y+q.height*j.y);T instanceof f.Block&&(i.hasOwnProperty("freezeFlag")||(i.freezeFlag=T._freezeSyncFromChildren,T._freezeSyncFromChildren=!0)),T.setPosition(N),T.setSize(q.width,q.height),A&&(O=T.getRect(),y.rectGuide.gatherLines({node:T,x:O.x,y:O.y,w:O.width,h:O.height},K,H)),x=""+Math.round(q.width)+" * "+Math.round(q.height)}else if("line"===h){if(Sl(S)){var u=T.getPoints(),F="P1"===z?u.get(1):u.get(0),e={x:E.x-F.x,y:E.y-F.y},w=y.getStyle("shiftLineRotateRound"),$=J._shiftDirList;if(!$||J._shiftRotateRound!==w){J._shiftRotateRound=w,J._shiftDirList=$=[];for(var n=0;n<Math.PI;n+=w)$.push({x:G(n),y:b(n)})}for(var m,v=0,M=0,C=$.length;C>M;M++){var R=$[M],_=R.x*e.x+R.y*e.y;Math.abs(_)>Math.abs(v)&&(v=_,m=R)}E={x:F.x+m.x*v,y:F.y+m.y*v},y.rectGuide.clear()}else J._inSmartGuide&&!f.Default.isCtrlDown(S)&&(J._adsorbedToClosest(E),A=!0);var s=zo.getDataMatrix(T).applyInverse(E);T.setPoint("P1"===z?0:1,s,!0);var d=T.getPoints(),I=d.get(0),k=d.get(1);P=I.x-k.x,Y=I.y-k.y,x=" "+Math.round(Math.sqrt(P*P+Y*Y))+" ",A&&(O=T.getRect(),y.rectGuide.gatherLines({node:T,x:O.x,y:O.y,w:O.width,h:O.height}))}if(x){var V=f.Default.getLogicalPoint(S,y._canvas);V.x+=zo.Icons.TipShiftX,V.y+=zo.Icons.TipShiftY,J.tipInfo={helperPos:V,text:x,size:x.length}}J._fireEditEvent("between",S)}},Wb.prototype._unionPointMode1=function(o,v,s,u,L){if(L&&s&&u){var Y=o.x-v.x,R=o.y-v.y;Math.abs(Y*u)<Math.abs(R*s)?(R=Math.sign(R)*Math.abs(Y*u/s),o.y=v.y+R):(Y=Math.sign(Y)*Math.abs(R*s/u),o.x=v.x+Y)}return f.Default.unionPoint(o,v)},Wb.prototype._unionPointMode2=function(b,s,J,T,c,h){var z=f.Default.unionPoint(b,s);if(c&&J&&T){var x;"v"===h?(x=z.x+z.width/2,z.width=J*z.height/T,z.x=x-z.width/2):(x=z.y+z.height/2,z.height=T*z.width/J,z.y=x-z.height/2)}return z},Wb.prototype._adsorbedToClosest=function(G,F){var m=this,a=m._interactor,f=a.rectGuide.findClosest(G,F),L=a.gridGuide.findClosest(G,F),t=1/0,z=1/0;f&&(isFinite(f.x)&&(t=f.x),isFinite(f.y)&&(z=f.y)),L&&(isFinite(L.x)&&Math.abs(L.x)<Math.abs(t)&&(t=L.x),isFinite(L.y)&&Math.abs(L.y)<Math.abs(z)&&(z=L.y)),isFinite(t)&&(G.x+=t),isFinite(z)&&(G.y+=z)},Wb.prototype._42=function(q,W,y){var F=this;F.info={},F.screenInfo=null;var z=F._interactor;if(!z.editDetail&&F.gatherInfo(W,y)){var c=F.editing,O=c?c.groupRotateMode:null,g=F.screenInfo;if("block"!==O||!c||!c.started){if(g.P1?zo.Icons.DrawIcon(z,q,zo.Icons.Line,g):zo.Icons.DrawIcon(z,q,zo.Icons.Rect,g),g.connect&&(zo.Icons.DrawIcon(z,q,zo.Icons.ConnectGuide,{rotation:g.rotation,connect:g.connect,cursorPos:c?c.cursorPos:null}),c)){if(c.targetCorners){for(var m={x:1/0,y:1/0},R={x:-1/0,y:-1/0},x=0,H=c.targetCorners.length;H>x;x+=2)m.x=Math.min(m.x,c.targetCorners[x]),R.x=Math.max(R.x,c.targetCorners[x]),m.y=Math.min(m.y,c.targetCorners[x+1]),R.y=Math.max(R.y,c.targetCorners[x+1]);zo.Icons.DrawIcon(z,q,zo.Icons.HoverDataRect,{min:m,max:R,color:z.getStyle("hoverGuideColor")||z.getStyle("baseColor")})}c.garbageInfo&&zo.Icons.DrawIcon(z,q,zo.Icons.ConnectGuideGarbage,c.garbageInfo)}z.getStyle("rotateTipVisible")&&F.tipInfo&&zo.Icons.DrawIcon(z,q,zo.Icons.TipHelper,F.tipInfo)}F.target instanceof zo.Group&&F.target._42(z,q,W)}};var mi=zo.Anchor=function(e){this.catalog="Anchor",this._interactor=e};mi.prototype={},mi.prototype.constructor=mi,mi.prototype.gatherInfo=function(L,u){var U=this;if(1===u.length){var I=u[0];if(!I.getAnchor)return;if(I instanceof f.Shape&&I._70I())return;if(Ah(I,L))return;return U.gatherSingleTarget(L,u[0])}return u.length>1?U.gatherMultiTargets(L,u):!1},mi.prototype.gatherSingleTarget=function(h,k){var E=this;return E.info.POS=k.getPosition(),E.screenInfo.POS=zo.toScreenPosition(h,E.info.POS),E.target=k,!0},mi.prototype.gatherMultiTargets=function(l,s){var q=this,n=zo.Group.findOrCreateGroup(s,this._interactor._uuid);return n?(q.screenInfo.POS=zo.toScreenPosition(l,n.getAnchor2()),q.target=n,!0):!1},mi.prototype.isVisible=function(){var i=this,N=i._interactor;if(N.getStyle("anchorVisible")===!1)return!1;var u=i.target;if(u){if(this.editing)return!0;var B=u.getAnchor(),Q=N.getStyle("anchorOutsideVisibleThreshold");if(B.x<-Q||B.x>1+Q||B.y<-Q||B.y>1+Q)return!0;var d=u.getSize(),Z=u.getScale(),T=Math.min(Math.abs(d.width*Z.x),Math.abs(d.height*Z.y));if(T*N.gv._zoom<N.getStyle("anchorHideThreshold"))return!1}return!0},mi.prototype.check=function(d,H,W){if(f.Default.isLeftButton(H)){var Q=this,w=Q._interactor;if(Q.isVisible()&&w.getStyle("anchorMovable")!==!1){Q.editing=null,Q.tipInfo=null;var i=Q.target;if(i&&d.isAnchorEditable(i)&&d.isEditable(i)){var S;if(Q.screenInfo&&(S=Q.screenInfo.POS)&&zo.checkHit(W,new zo.Math.Vector2(S),w.getStyle("checkSize"))){if(i instanceof zo.Group)return Q.editing={},!0;var R=i.getWidth(),t=i.getHeight(),F=i.getAnchor();return Q.editing={rect:{x:-R*F.x,y:-t*F.y,width:R,height:t},anchor:F,matrix:i.getMatrix()},!0}}}}},mi.prototype.startEdit=function(Z,H){Z.startDragging(H),Z.fi({kind:"beginEditAnchor",event:H})},mi.prototype._46O=function(c){var z=this;z.editing&&(z.editing=null,z._interactor.fi({kind:"endEditAnchor",event:c})),z.tipInfo=null},mi.prototype.handleEdit=function(F,v){var r=this,_=r.target;if(_){var p=r.editing;if(p){var u=F.lp(v),R=r._interactor;if(_ instanceof zo.Group)return _.setAnchor2(u),R._42(),void 0;var V=p.matrix,Y=V.tfi(u),X=p.rect,G=(Y.x-X.x)/X.width,y=(Y.y-X.y)/X.height;if(!f.Default.isCtrlDown(v)){var O=R.getStyle("anchorRound"),c=R.getStyle("anchorSensitivity");G=zo.roundTo(G,O,c),y=zo.roundTo(y,O,c)}_.setAnchor(G,y,!0);var l=f.Default.getLogicalPoint(v,R._canvas);l.x+=zo.Icons.TipShiftX,l.y+=zo.Icons.TipShiftY;var S=""+G.toFixed(2)+", "+y.toFixed(2);r.tipInfo={helperPos:l,text:S,size:S.length},R.fi({kind:"betweenEditAnchor",event:v})}}},mi.prototype._42=function(I,p,Q){var R=this;R.info={},R.screenInfo={};var l=R._interactor;l.editDetail||R.gatherInfo(p,Q)&&R.isVisible()&&(zo.Icons.DrawIcon(l,I,zo.Icons.Anchor,R.screenInfo),R.tipInfo&&zo.Icons.DrawIcon(l,I,zo.Icons.TipHelper,R.tipInfo))};var Ih=zo.MoveDummy=function(Z){this.catalog="MoveDummy",this._interactor=Z};Ih.prototype={},Ih.prototype.constructor=Ih,Ih.prototype.gatherInfo=function(){var j=this,q=this._interactor.getSubModule("Rect");if(q){var C=q.screenInfo;if(C){var I=j._interactor,P=j.getMovableTarget(q.target);if(P){var L=I.getStyle("moveDummyThreshold");if(L!==!1){var p=C.LT||C.P1,h=C.RT||C.P2,E=C.LB||p;if(p){var $=C.P1,F=Math.min(p.distanceTo(E),p.distanceTo(h));if(!(L!==!0&&F>L)){var O=I.getStyle("moveDummyPosition"),o=h.clone().sub(p),r=E.clone().sub(p),D=O[2],W=O[3];if($){var Y=I.getStyle("moveDummyLineExtraShift");Y&&(D+=Y[0],W+=Y[1])}var M=p.clone().add(o.clone().multiplyScalar(O[0])).add(o.setLength(D)).add(r.clone().multiplyScalar(O[1])).add(r.setLength(W));return j.screenInfo.pos=M,j.screenInfo.size=I.getStyle("moveDummySensitivity"),!0}}}}}}},Ih.prototype.getMovableTarget=function(N){var B=this._interactor.gv;if(Cl(N)){if(B.isMovable(N))return N}else if(N instanceof zo.Group)for(var g=N._entities,L=g.length-1;L>=0;L--){var A=g[L];if(Cl(A)&&B.isMovable(A))return A}return null},Ih.prototype.getMoveInteractor=function(){for(var d,w,g,i=this._interactor.gv,T=i.getInteractors(),d=0,w=T.length;w>d;d++)if(g=T.get(d),g instanceof sm)return g},Ih.prototype.startEdit=function(t,W){t.startDragging(W);var C=this.getMoveInteractor();if(C){var B=this.selectedTarget,l=t.gv;l._moving=1,C._data=B,l.handleMouseDown&&l.handleMouseDown(W,B)}},Ih.prototype._46O=function(T){var c=this,m=c.getMoveInteractor();m&&(m.handleWindowMouseUp(T),c.selectedTarget=null)},Ih.prototype.handleEdit=function(m,o){var C=this.getMoveInteractor();C&&C.handleWindowMouseMove(o)},Ih.prototype.check=function(J,c,h){if(this.selectedTarget=null,f.Default.isLeftButton(c)&&!J._scrolling&&!vr()){var z=this;if(z.screenInfo){var v=z.screenInfo.pos;if(v&&!(h.distanceTo(v)>z.screenInfo.size)){var k=z._interactor;return z.selectedTarget=z.getMovableTarget(k.getSubModule("Rect").target),k.setCursor("default"),!0}}}},Ih.prototype._42=function(L,$,S){var D=this;D.screenInfo={};var Z=D._interactor;Z.editDetail||D.gatherInfo($,S)&&(!Z.editing||D.selectedTarget)&&zo.Icons.DrawIcon(Z,L,zo.Icons.MoveDummy,D.screenInfo)};var ne=zo.RotateX=function(m){this.catalog="RotateX",this._interactor=m};ne.prototype={},ne.prototype.constructor=ne,ne.prototype.gatherInfo=function(D,V){var p=this;if(1===V.length){var v=V[0];return v instanceof f.Shape&&v._70I()||Ah(v,D)?!1:p.gatherSingleTarget(D,v)}return V.length>1?p.gatherMultiTargets(D,V):!1},ne.prototype.gatherSingleTarget=function(){var $=new f.Math.Vector2,r=new f.Math.Vector2,E=new f.Math.Vector2,j=new f.Math.Vector2,q=function(d,v){var C=d.x-v.x,p=d.y-v.y;return C*C+p*p};return function(b,i){if(i.getCorners){var k=this,X=i.getCorners(),c=15,v=i.getPosition();$.copy(X[0]),E.copy(X[1]),j.copy(X[3]),r.copy($).add(j).divideScalar(2).add($.sub(E).setLength(c/b.getZoom()));var G=Math.max(q(v,X[0]),q(v,X[1]),q(v,X[2]),q(v,X[3]));return k.info.POS=r.clone(),k.screenInfo.POS=zo.toScreenPosition(b,k.info.POS),k.screenInfo.LEN=Math.sqrt(G)*b.getZoom()+c,k.screenInfo.CENTER=zo.toScreenPosition(b,v),k.target=i,!0}}}(),ne.prototype.gatherMultiTargets=function(J,I){var s=this,K=zo.Group.findOrCreateGroup(I,this._interactor._uuid);if(!K)return!1;var s=this;return s.gatherSingleTarget(J,K)},ne.prototype.isVisible=function(){var R=this._interactor;if(!R.getStyle("rotateAsClock"))return!1;var B=this.target;if(!B)return!0;var m=R.gv;return m.isEditable(B)&&m.isRotationEditable(B)?!0:!1},ne.prototype.check=function(K,e,G){var l=this,U=l._checkImpl(K,e,G);return(U||l._clockPainted)&&l._interactor._42(),U},ne.prototype._checkImpl=function(S,X,k){if(f.Default.isLeftButton(X)){var G=this;G.editing=null,G.tipInfo=null;var q;if(G.screenInfo&&(q=G.screenInfo.POS)&&G.isVisible()){var t=G._interactor;if(zo.checkHit(k,q,t.getStyle("checkSize"))){var L=G.target,T=S.lp(X),y=L.getPosition(),x=Math.atan2(T.y-y.y,T.x-y.x);return t._setRotateCursor(x),G.editing={pos:y,rotation:L.getRotation(),hitRot:x,groupRotateMode:"block",screenInfo:{CENTER:G.screenInfo.CENTER,LEN:G.screenInfo.LEN}},!0}}}},ne.prototype.startEdit=function($,k){$.startDragging(k),$.fi({kind:"beginEditRotation",event:k}),this.target instanceof zo.Group&&this.target.beginRotate(this.editing)},ne.prototype._46O=function(E){var O=this;O.editing&&(O.editing=null,O._interactor.fi({kind:"endEditRotation",event:E})),O.target instanceof zo.Group&&O.target.endRotate(),O.tipInfo=null},ne.prototype.handleEdit=function(D,S){var m=this,n=m.editing;if(n){var l,X,d=m.target,J=D.lp(S),t=m._interactor,G=n.pos,p=Math.atan2(J.y-G.y,J.x-G.x),C=d instanceof zo.Group;if(C?X=p-n.hitRot:(l=p-n.hitRot,X=n.rotation+l),X%=2*Math.PI,0>X&&(X+=2*Math.PI),!f.Default.isCtrlDown(S)){var A,k;Sl(S)?(A=t.getStyle("shiftRotateRound"),k=A/2):(A=t.getStyle("rotateRound"),k=t.getStyle("rotateSensitivity")),X=zo.roundTo(X,A,k)}C?(l=X-(n.lastRotation||0),0!==l&&(d.addRotation(l,n.groupRotateMode,function(k){return D.isRotationEditable(k)}),n.lastRotation=X)):d.setRotation(X),t._setRotateCursor(p),X>Math.PI&&(X-=2*Math.PI);var u=180*(X/Math.PI),B=""+u.toFixed(2)+"掳",L=f.Default.getLogicalPoint(S,t._canvas);L.x+=zo.Icons.TipShiftX,L.y+=zo.Icons.TipShiftY,m.tipInfo={helperPos:L,text:B,size:B.length},t.fi({kind:"betweenEditRotation",event:S})}},ne.prototype._42=function(X,k,K){var B=this;B._clockPainted=!1,B.info={},B.screenInfo={};var P=B._interactor;P.editDetail||B.gatherInfo(k,K)&&B.isVisible()&&(zo.Icons.DrawIcon(P,X,zo.Icons.RoundPoint,B.screenInfo.POS),P.getStyle("rotateTipVisible")&&B.tipInfo&&zo.Icons.DrawIcon(P,X,zo.Icons.TipHelper,B.tipInfo),B.editing&&B.drawClock(X))},ne.prototype.drawClock=function(S){S.save();var j=this;j._clockPainted=!0;var x=j.editing||{},V=x.screenInfo||j.screenInfo,g=V.LEN,e=g+8,U=g+18;S.save(),S.translate(V.CENTER.x,V.CENTER.y),S.beginPath(),S.strokeStyle="rgb(150, 150, 150)";for(var L,c,r,Y,w,H=0;360>H;H++)L=H*Math.PI/180,0===H%5&&(c=b(L)*g,r=G(L)*g,Y=b(L)*e,w=G(L)*e,S.moveTo(c,r),S.lineTo(Y,w)),0===H%45&&(c=b(L)*g,r=G(L)*g,Y=b(L)*U,w=G(L)*U,S.moveTo(c,r),S.lineTo(Y,w));S.stroke(),S.rotate(-th);var Z=x.lastRotation||j.target.getRotation();S.beginPath(),S.fillStyle="rgba(255, 0, 0, 0.1)",S.strokeStyle="rgb(157, 157, 157)",S.moveTo(0,0),S.arc(0,0,U,0,Z,!1),S.fill(),S.beginPath(),S.moveTo(0+U,0),S.arc(0,0,U,0,Z,!1),S.stroke(),S.restore()};var Bs=zo.Curve=function(Z){this.catalog="Curve",this._interactor=Z};Bs.prototype={},Bs.prototype.constructor=Bs,y.defineProperties(Bs.prototype,{activing:{get:function(){return this._activing},set:function(l){var b=this;if(l)b._activing=new zo.CurveActiving(this,l),b.gatherSingleTarget(b._interactor.gv,b.target);else{var F=b._activing;F&&F.dispose(),b._activing=null}}}}),Bs.PointType={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3},Bs.prototype.setUp=function(){var S=this,I=S._interactor;I&&I.gv.mp(S._onGraphviewPropertyChanged,S)},Bs.prototype._onGraphviewPropertyChanged=function(S){("zoom"===S.property||"translateX"===S.property||"translateY"===S.property)&&this._handleDataChanged()},Bs.prototype.tearDown=function(){var q=this,V=q._interactor;V&&V.gv.ump(q._onGraphviewPropertyChanged,q)},Bs.prototype.canEnterEditDetailMode=function(){var H=Ze(this._interactor);return H?this.target=H:void 0},Bs.prototype.canQuitEditDetailMode=function(B){var $=this,_=$._interactor._getLogicalPoint(B);return $._checkEditRealPoint(_)?void 0:$._interactor.gv.getDataAt(B)!==$.target?!0:void 0},Bs.prototype.preHandleScroll=function(){var l=this.editing;return l&&l.inEdit?!0:void 0},Bs.prototype.getCurrentSelectintStatus=function(){var G=this;if(G.activing&&!G.activing.selections){if(G.activing.status!=n)return G.activing.status;var K=function(N){var Y=G.activing.status;G.activing.status=N,G._interactor.fp("shapePointStatus",Y,N)},s=zo.Curve.PointType,g=G.activing.point,Z=G.activing.pairs;if(!Z||1!==Z.length)return K(s.Mirrored);var m=Z[0],P=m.c1&&m.c1.isNearEnough(g),S=m.c2&&m.c2.isNearEnough(g);if(!m.c1||!m.c2)return P||S?K(s.Straight):K(s.Disconnected);if(P&&S)return K(s.Straight);if(P||S)return K(s.Asymmetric);var I=m.c1.clone().sub(g),O=m.c2.clone().sub(g);return Math.abs(I.x*O.y-I.y*O.x)>1e-5||I.x*O.x>0?K(s.Disconnected):Math.abs(I.length()-O.length())>1e-5?K(s.Asymmetric):K(s.Mirrored)}},Bs.prototype.handle_keydown=function(W){var Z=this;if(Z._interactor.editDetail){var l=zo.Curve.PointType;"1"===W.key?Z._setCurrentSelectionStatus(l.Straight):"2"===W.key?Z._setCurrentSelectionStatus(l.Mirrored):"3"===W.key?Z._setCurrentSelectionStatus(l.Disconnected):"4"===W.key&&Z._setCurrentSelectionStatus(l.Asymmetric)}},Bs.prototype.setCurrentSelectionStatus=function(a){var S=this,t=S._interactor;if(t){var g=t.gv;g.dm().beginTransaction(),this._setCurrentSelectionStatus(a),g.dm().endTransaction()}},Bs.prototype._setCurrentSelectionStatus=function(c){var Y=this,j=Y.activing;if(j){var J=Y.getCurrentSelectintStatus();if(null!==J&&J!==c){j.status=c;var F=Y.activing.point,Q=Y.activing.pairs;if(Q&&1===Q.length){var E=Q[0],n=Y.screenInfo.curve,L=zo.Curve.PointType,N=Y._interactor,p=function(){Y._writeToHt(),N.fp("shapePointStatus",J,c),Y.check(N.gv,null,new zo.Math.Vector2(N._lastLogicalPoint))};if(c===L.Straight)return n.moveCtrlPoint(E,F,"c1"),n.moveCtrlPoint(E,F,"c2"),p(),void 0;if(J===L.Straight){var B=n.findPairs(F,!0),O=B[0],A=O.r1||F,g=O.r2||F,M=g.clone().sub(A).multiplyScalar(.25);return n.moveCtrlPoint(E,F.clone().sub(M),"c1"),n.moveCtrlPoint(E,F.clone().add(M),"c2"),p(),void 0}var s=E.c1,V=E.c2;if(s&&V){if(c===L.Mirrored)return n.moveCtrlPoint(E,F.clone().multiplyScalar(2).sub(V),"c1"),p(),void 0;if(c===L.Asymmetric&&J===L.Disconnected){var z=s.clone().sub(F).length(),M=F.clone().sub(V).setLength(z).add(F);return n.moveCtrlPoint(E,M,"c1"),p(),void 0}}j._firePointChange(),N.fp("shapePointStatus",J,c),Y.check(N.gv,null,new zo.Math.Vector2(N._lastLogicalPoint))}}}},Bs.prototype._handleDataChanged=function(){var E="s:edge.points,s:edge.segments,points,segments,shape,position,rotation,scale".split(",");return function(F){var f=this;if(f.screenInfo&&f.target){if(F&&E.indexOf(F.property)<0)return;var I=f._interactor;f.gatherSingleTarget(I.gv,f.target,!0),f.check(I.gv,null,new zo.Math.Vector2(I._lastLogicalPoint)),I._42()}}}(),Bs.prototype.gatherSingleTarget=function($,c,V){var d,Y,E=this;E.screenInfo&&E.screenInfo.curve&&(Y=E.screenInfo.curve._curves);var C=E.editing;d=C?E.screenInfo:E.screenInfo={};var h,j,J=c instanceof f.Edge;J?(h=c.s("edge.segments"),j=c.s("edge.points")||new f.List):(h=c._58O,j=c._59O),d.S=h;var k,W=d.P=[],K=zo.getDataMatrix(c);if(c instanceof f.Polyline||c instanceof f.Edge&&E._interactor.getStyle("edgeElevationEditable"))k=c.getElevation&&c.getElevation()||0,d.E=[];else{var P=!1;j.each(function(S){S.e!==n&&(P=!0)}),P&&(d.E=[])}if(j.each(function(H){d.E&&d.E.push(H.e!=n?H.e:k),H=K.apply(H);var r=zo.toScreenPosition($,H);W.push(r.x,r.y)}),J){var r=W.length,g=zo.toScreenPosition($,c._lastSourcePoint||(r?{x:W[0],y:W[1]}:{x:0,y:0})),S=zo.toScreenPosition($,c._lastTargetPoint||(r?{x:W[r-2],y:W[r-1]}:{x:0,y:0}));if(W.splice(0,0,g.x,g.y),W.push(S.x,S.y),d.E){var q=c.getSourceAgent();q instanceof f.Edge?d.E.splice(0,0,c.s("edge.source.offset.elevation")):d.E.splice(0,0,((c.s("edge.source.anchor.elevation")||.5)-.5)*q.getTall()*q.getScaleTall()+q.getElevation()+c.s("edge.source.offset.elevation"));var Z=c.getTargetAgent();Z instanceof f.Edge?d.E.push(c.s("edge.target.offset.elevation")):d.E.push(((c.s("edge.target.anchor.elevation")||.5)-.5)*Z.getTall()*Z.getScaleTall()+Z.getElevation()+c.s("edge.target.offset.elevation"))}}if(!d.S||!d.S.size()){d.S=new f.List,d.S.add(1);for(var b=0;b<W.length/2-1;b++)d.S.add(2)}if((!C||V)&&E.convertToCubicBezier(Y),E.activing&&(V||!E.editing||"realPoint"===E.editing.type)){var D=d.curve.findPairs(E.activing.point);E.activing.pairs=D}},Bs.prototype._convertToNewPoint=function(v,n,I,w){var H,L,d;for(H=0,L=n.length;L>H;H++){if(d=n[H],d._p1.isNearEnough(v)&&(!w||w.indexOf(d._p1)<0))return d._p1;if(d._p4.isNearEnough(v)&&(!w||w.indexOf(d._p4)<0))return d._p4}if(I)for(H=0,L=Math.min(I.length,L);L>H;H++){if(d=I[H],d._p1===v&&(!w||w.indexOf(n[H]._p1)<0))return n[H]._p1;if(d._p4===v&&(!w||w.indexOf(n[H]._p4)<0))return n[H]._p4}},Bs.prototype.convertToCubicBezier=function(o){var N,d,x=this,S=new zo.Math.Curve,z=x.screenInfo;if(S.createFromHtShape(z.P,z.S,z.E),z.curve=S,x.activing){var A=S._curves;N=x.activing.point,d=x._convertToNewPoint(N,A,o);var m=[];if(d&&(x.activing.point=d,m.push(d)),x.activing.selections){var r=-1,L=x.activing.selections;L.forEach(function(C){r++,d=x._convertToNewPoint(C,A,o,m),d&&(L[r]=d,m.push(d))})}}},Bs.prototype.check=function(d,B,$){if(!B||Hb(B)||Wr(B)){var H=this;if(H._interactor.setCursor("default"),H.editing=null,H.highlight=null,H.tipInfo=null,H.edgeEditResult=null,H.screenInfo){if(vr()||B&&Wr(B))return H._interactor._42(),!0;if(H._checkEditCtrlPoint($))return H._interactor._42(),!0;if(H._checkEditRealPoint($))return H._interactor._42(),!0;if(H._checkEditElevation($))return H._interactor._42(),!0;var O=H.screenInfo.curve,h=O.checkPoint($,H._interactor.getStyle("curveIntersectSize"));if(h){var Q=H.highlight={};Q.type="insertKnot",Q.bezier=h.bezier,Q.point=h.intersection}return H._interactor._42(),!0}}},Bs.prototype.getAdjacentBeziers=function(B){var y=this.screenInfo;if(y){var H,m,E,Y=y.curve._curves,_=[],v=n;for(H=0,m=Y.length;m>H;H++)if(E=Y[H],v===n){if(E._p4.isNearEnough(B)){_.push(E),v=H;continue}if(E._p1.isNearEnough(B))return _.push(E),_}else{if(E._p1.isNearEnough(B))return _.push(E),_;if(E._p4.isNearEnough(B)){_[0]=E,v=H;continue}}return _}},Bs.prototype.roundCorner=function(m){if(this.activing&&this.screenInfo){var _,Y,d,h,q,y=this.screenInfo.curve,I=y._curves,s=this.activing,P=s.point,U=this.getAdjacentBeziers(P);if(U&&2===U.length){Y=U[1],q=Y._index,Y=Y.insertKnot(Y.getTByPercentage(m/Y.length))[1],I[q]=Y,h=Y.p1,_=U[0];var A=_._index;_=_.insertKnot(_.getTByPercentage(1-m/_.length))[0],I[A]=_,d=_.p4}else{var v=s.pairs[0],S=I.length;if(v.c1){if(v.c2)return;_=U[0];var A=_._index;if(_=_.insertKnot(_.getTByPercentage(1-m/_.length))[0],d=_.p4,Y=I[(A+1)%S],h=Y.p1,h=h.clone().sub(P).setLength(m).add(P),q=A+1,1-Math.abs(d.clone().sub(P).normalize().dot(h.clone().sub(P).normalize()))<1e-8)return;I[A]=_}else{if(Y=U[0],q=Y._index,Y=Y.insertKnot(Y.getTByPercentage(m/Y.length))[1],h=Y.p1,_=I[(q-1+S)%S],d=_.p4,d=d.clone().sub(P).setLength(m).add(P),1-Math.abs(d.clone().sub(P).normalize().dot(h.clone().sub(P).normalize()))<1e-8)return;I[q]=Y}}var T=P,Q=new zo.Math.CubicBezier(d,T.clone().sub(d).multiplyScalar(2/3).add(d),T.clone().sub(h).multiplyScalar(2/3).add(h),h);I.splice(q,0,Q),this._writeToHt(),this.activing=null,this._interactor._42()}},Bs.prototype._checkEditRealPoint=function(M){var O,f,U,L,y,W,n=this,_=n.screenInfo.curve._curves,s=n._interactor.getStyle("curvePointIntersectSize"),D=1/0;for(s*=s,U=0,L=_.length;L>U;U++)O=_[U],y=O._p1,W=M.distanceToSquared(y),D>W&&(D=W,f=y),y=O._p4,W=M.distanceToSquared(y),D>W&&(D=W,f=y);if(D>s)return!1;var Q=n.highlight={};return Q.type="changeRealPoint",Q.point=f,n.editing={type:"realPoint",point:f,shiftGuide:{point:f.clone(),dir:"x",limit:0}},n._interactor.setCursor("crosshair"),!0},Bs.prototype._checkEditElevation=function(R){var i=this;if(!i._interactor.getStyle("curveElevationVisible"))return!1;var O=i.target;if(O instanceof f.Edge&&!i._interactor.getStyle("edgeElevationEditable"))return!1;var h=i.activing;if(!h)return!1;var n=h.getCurrentEditingPoint();if(!n)return!1;var u=i._interactor,l=u.getStyle("curveElevationGuideShift"),A=u.getStyle("curveElevationIntersectSize"),e=R.distanceToSquared({x:n.x+l[0],y:n.y+l[1]});if(!(e>A*A)){var w=i.highlight={};w.type="elevation";var V=new zo.Math.Vector2(R.x,R.y,n.e);return i.editing={type:"elevation",startPoint:V},i._interactor.setCursor("crosshair"),!0}},Bs.prototype._checkEditCtrlPoint=function(S){var U=this;if(U.activing&&!U.activing.selections){var k=U.getCurrentSelectintStatus();if(k!==zo.Curve.PointType.Straight){var f=U.activing.pairs;if(f){var H=U._interactor.getStyle("curvePointIntersectSize");H*=H;var N,h,x,p,K,n,t,L,M,c=1/0;for(t=0,M=f.length;M>t;t++)for(p=f[t],L=0;2>L;L++)K=0===L?"c1":"c2",p[K]&&(n=S.distanceToSquared(p[K]),c>n&&(c=n,N=p,h=t,x=K));if(c>H)return!1;U.activing.hlpair=N,U.activing.hltype=x;var I=U.highlight={};return I.type="changeCtrlPoint",I.point=N[x],U.editing={type:"ctrlPoint",pair:N,pairId:h,ctrlType:x,direction:N[x].clone().sub(U.activing.point).normalize()},U._interactor.setCursor("crosshair"),!0}}}},Bs.prototype.startEdit=function(F,N){F.startDragging(N);var e=this;e.highlight&&"insertKnot"===e.highlight.type&&(e.insertKnot(),e.gatherSingleTarget(e._interactor.gv,e.target),e.activing=null,e._checkEditRealPoint(e._interactor._getLogicalPoint(N)));var c=e._activing;if(c){var J=e.editing?e.editing.type:null;"ctrlPoint"===J?c.editingCtrl={pairId:e.editing.pairId,type:c.hltype}:"realPoint"===J&&(c.editingCtrl=!1)}var W=e.highlight,j=f.Default.isCtrlDown(N);if(!W||vr()||Wr(N)){var Q=e._interactor.gv;if(!Q.setFocus(N)||Q._scrolling)return;return j?e._multiSelect={startPoint:Q.lp(N)}:Q.isPannable()&&(Hb(N)||Wr(N))&&(e._pan={tx:Q.tx(),ty:Q.ty()},F.fi({kind:"beginPan",event:N})),void 0}if("changeRealPoint"===W.type){var o,v=e.activing?e.activing.point:null,L=e.activing?e.activing.selections:null;if(j&&e.activing)v===W.point?(L?(e.activing={point:L[0]},L.length>1&&(L.splice(0,1),e.activing.selections=L)):e.activing=null,e.editing=null):L&&(o=L.indexOf(W.point))>=0?(L.length>1?L.splice(o,1):delete e.activing.selections,e.editing=null):L?(L.push(v),e.activing={point:W.point,selections:L}):e.activing={point:W.point,selections:[v]};else if(L)v===W.point||((o=L.indexOf(W.point))>=0?(L.splice(o,1,v),e.activing={point:W.point,selections:L}):e.activing={point:W.point});else{var z;v===W.point&&(z=e.activing.status),e.activing={point:W.point},z&&(e.activing.status=z)}F.fi({kind:"beginEditPoint",event:N})}},Bs.prototype.insertKnot=function(){var y=this,m=y.highlight,k=y.screenInfo.curve;k.insertKnot(m.bezier,m.point.t),y._writeToHt()},Bs.prototype._writeToHt=function(){var W,u,E=this,n=E.screenInfo.curve,i=n.toHtShape(),R=i.points,s=[],h=i.segments,z=E._interactor.gv;z.dm().beginTransaction();var v,o,k=E.target,d=k instanceof f.Edge,K=zo.getDataMatrix(k).invert();o=k instanceof f.Polyline||d&&E._interactor.getStyle("edgeElevationEditable"),o&&(v=k.getElevation&&k.getElevation()||0);for(var B=0,M=R.length;M>B;B++)W=R[B],u=zo.toWorldPosition(z,W),u=K.apply(u),isFinite(W.e)&&W.e!==v&&(u.e=W.e),s.push(u);if(k._writing=!0,d){k.s("edge.type","points"),k.setStyle("edge.segments",h),k.setStyle("edge.points",s.slice(1,s.length-1)),k.setStyle("edge.source.offset.x",0),k.setStyle("edge.source.offset.y",0),k.setStyle("edge.target.offset.x",0),k.setStyle("edge.target.offset.y",0);var V=E._nextChangeEdgeHost;delete E._nextChangeEdgeHost,V&&("source"===V.type?k.setSource(V.host):k.setTarget(V.host)),E._writeEdgeHostAnchor("source",s[0]),E._writeEdgeHostAnchor("target",s[s.length-1])}else s.length?(k.setSegments(h),k.setPoints(s,!0)):k.removeFromDataModel();z.dm().endTransaction(),delete k._writing},Bs.prototype._writeEdgeHostAnchor=function(A,w){var G=this,t=G.target,S=G._calcHostAnchor(t,A,w);S.index!==n?(t.setStyle("edge."+A+".index",S.index),t.setStyle("edge."+A+".percent",n),t.setStyle("edge."+A+".anchor.x",n),t.setStyle("edge."+A+".anchor.y",n),t.setStyle("edge."+A+".anchor.elevation",n),t.setStyle("edge."+A+".offset.elevation",w.e)):S.percent!==n?(t.setStyle("edge."+A+".percent",S.percent),t.setStyle("edge."+A+".index",n),t.setStyle("edge."+A+".anchor.x",n),t.setStyle("edge."+A+".anchor.y",n),t.setStyle("edge."+A+".anchor.elevation",n),t.setStyle("edge."+A+".offset.elevation",w.e)):(t.s("edge."+A+".anchor.x",S.x),t.s("edge."+A+".anchor.y",S.y),t.s("edge."+A+".anchor.elevation",S.e),S.offsetX||S.offsetY||S.offsetElevation?(t.s("edge."+A+".offset.x",S.offsetX),t.s("edge."+A+".offset.y",S.offsetY),t.s("edge."+A+".offset.elevation",S.offsetElevation)):(t.s("edge."+A+".offset.x",0),t.s("edge."+A+".offset.y",0),t.s("edge."+A+".offset.elevation",0)))},Bs.prototype._calcHostAnchor=function(z,U,X,L){L||(L="source"===U?z.getSource():z.getTarget());var O=this._interactor.gv,E=O.calculateAttachPoint(L,X);if(E)return E.info;if(ld(L)){var u=O.calculateEdgePosition(L,X);return u}var Y=L.getRotation(),D=L.getAnchor();Ah(L,O)&&(Y=0);var N=L.getElevation(),B=L.getTall()*L.getScaleTall();N=((X.e||0)-z.s("edge."+U+".offset.elevation")-N)/B+.5;var c=L.getScale();if(Y||c.x<0||c.y<0){var x=L.getMatrix(),C=x.tfi(X),e=L.getSize();return{x:C.x/e.width+D.x,y:C.y/e.height+D.y,e:N}}var q=xm(O,L),l={x:(X.x-q.x)/q.width,y:(X.y-q.y)/q.height,e:N};return l},Bs.prototype._handlePanning=function(f){var Y=this,o=Y._pan;if(o){o.started=!0;var m=Y._interactor,t=m.gv,r=m._lastClientPoint,K=_d(f),h=Lo(t,K,r);t.setTranslate(o.tx+h.x,o.ty+h.y),Y.gatherSingleTarget(m.gv,Y.target),m._42(),m.fi({kind:"betweenPan",event:f})}},Bs.prototype.handleEdit=function(k,F){var h=this,s=h.editing;if(h._pan)return h._handlePanning(F),void 0;if(h._multiSelect)return h._multiSelect.endPoint=k.lp(F),h._interactor.redraw(),void 0;if(s){s.inEdit=!0;var p,N,L,l=h._interactor._getLogicalPoint(F),M=f.Default.isCtrlDown(F),u=f.Default.isShiftDown(F),i=s.type,G=h.activing;if(h._guideInfo=null,"ctrlPoint"===i&&u){var Z=h.editing.direction.clone();p=G.point;var U=Z.dot(l.clone().sub(p));l=Z.setLength(U).add(p)}else if("ctrlPoint"===i||"realPoint"===i){var Z;if("realPoint"===i&&u){var r=h.editing.shiftGuide;N=r.point;var j=Math.abs(l.x-N.x),D=Math.abs(l.y-N.y);j>D&&j>r.limit&&"y"===r.dir&&(r.dir="x"),D>j&&D>r.limit&&"x"===r.dir&&(r.dir="y"),Z=r.dir,"x"===Z?(l.y=N.y,r.limit=Math.max(r.limit,j)):"y"===Z&&(l.x=N.x,r.limit=Math.max(r.limit,D))}if(!M){var w,$=h._isEditEdgeSourceTarget();$&&(w=l.clone());var C=h._guidingToEdit(l,Z),T="realPoint"===i?h._interactor.gridGuide.findClosest(l,Z,!0):null,K=1/0,J=1/0;T&&(T.x&&(K=T.x),T.y&&(J=T.y));var q=!1;if(C&&(C.xList&&(Math.abs(C.x)<=Math.abs(K)?(q=!0,K=C.x):delete C.xList),C.yList&&(Math.abs(C.y)<=Math.abs(J)?(q=!0,J=C.y):delete C.yList),q&&(h._guideInfo=C)),isFinite(K)&&(l.x+=K),isFinite(J)&&(l.y+=J),q&&(C.v=l),$){var I=q?l.clone():null;l.copy(w);var Y=h._editEdgeSourceTarget($,l,M,I);Y&&(h.edgeEditResult=Y,L=Y.tipText,Y.isFixed&&(h._guideInfo=null))}}}var v=h.screenInfo.curve;if("realPoint"===s.type){p=s.point,p.e!==n&&(l.e=p.e),v.moveRealPoint(p,l),s.point=l,h.highlight.point=l;var y=G.status,m=G.selections;if(h.activing={point:l,status:y},m){var x=l.clone().sub(p),Q=0;m.forEach(function(b){var p=b.clone().add(x);v.moveRealPoint(b,p),m[Q++]=p}),h.activing.selections=m}}else if("ctrlPoint"===s.type){var P=G.pairs,A=P[s.pairId];v.moveCtrlPoint(A,l,s.ctrlType);var a=G.status,g=zo.Curve.PointType;if((a===g.Mirrored||a===g.Asymmetric)&&A.c1&&A.c2){var p=new zo.Math.Vector2(G.point),b="c1"===s.ctrlType?"c2":"c1";if(a===zo.Curve.PointType.Mirrored)v.moveCtrlPoint(A,p.clone().multiplyScalar(2).sub(l),b);else if(a===g.Asymmetric){var U=A[b].clone().sub(p).length(),S=p.clone().sub(A[s.ctrlType]).setLength(U).add(p);isNaN(S.x)||v.moveCtrlPoint(A,S,b)}}G._firePointChange()}else if("elevation"===s.type){N=s.startPoint;var V=N.e+(N.y-l.y)/k._zoom;h._setCurrentPointImpl("e",V),G._firePointChange(),L="E: "+zo.toFixed(V)}var R=f.Default.getLogicalPoint(F,h._interactor._canvas);if(R.x+=zo.Icons.TipShiftX,R.y+=zo.Icons.TipShiftY,!L){var B=zo.toWorldPosition(k,l);L=""+zo.toFixed(B.x)+", "+zo.toFixed(B.y)}h.tipInfo={helperPos:R,text:L,size:L.length},h._writeToHt(),h._interactor.fi({kind:"betweenEditPoint",event:F})}},Bs.prototype._setCurrentPointImpl=function(F,b){var B=this,g=B._activing;if(!g)return!1;var t=B.target;if(!t)return!1;var T=g.getCurrentEditingPoint();if(!T)return!1;var K=g.editingCtrl;if(!K)var E=T.clone();if("e"===F)T.e=b;else{var V;if("x"===F||"y"===F){var L=g._lastFirePoint;
V="x"===F?{x:b,y:L?L.y:0}:{x:L?L.x:0,y:b}}else"object"==typeof F?(V=F,F.e!==n&&(T.e=F.e)):(V={x:arguments[0],y:arguments[1]},arguments[2]!==n&&(T.e=arguments[2]));var s=zo.getDataMatrix(t);V=zo.toScreenPosition(B._interactor.gv,s.apply(V)),T.x=V.x,T.y=V.y}if(!K){var P=E.multiplyScalar(-1).add(T);fe(T.e)&&fe(E.e)&&(P.e=T.e-E.e);var d=B.screenInfo.curve;d.moveCtrlDueToRealPointMovement(T,P);var N=g.selections;if(N){var q=0;N.forEach(function(u){var F=u.clone().add(P);isFinite(P.e)&&(F.e=(isFinite(u.e)?u.e:t.getElevation()||0)+P.e),d.moveRealPoint(u,F),N[q++]=F}),g.selections=N}}return!0},Bs.prototype.setCurrentPoint=function(t,e){return this._setCurrentPointImpl(t,e)?(this._writeToHt(),!0):!1},Bs.prototype._isEditEdgeSourceTarget=function(){var g=this,S=g.target;if(!(S instanceof f.Edge))return!1;var a=g.editing.point,K=g.screenInfo.curve._curves;return a===K[0]._p1?"source":a===K[K.length-1]._p4?"target":!1},Bs.prototype._editEdgeSourceTarget=function(P,G,s,k){var L,y=this,T=y.target;if(L="source"===P?T.getSource():T.getTarget()){var Q,C=y._interactor.gv,X=zo.toWorldPosition(C,G),z=y._calcHostAnchor(T,P,X,L);if(Q=z.index!==n||z.percent!==n?z.distance*C.getZoom()>y._interactor.getStyle("edgeHostEdgeMaxDistance"):y._interactor.getStyle("edgeHostDetectPerFrame")?!0:z.x<0||z.x>1||z.y<0||z.y>1?!0:!1){var W=C.getDataAt(X,function(n){return C.isSelectable(n)?C.isSourceTargetEditable(T,n,P)?T.canSetSourceTarget(n,P)?!0:!1:!1:!1});if(W){var H=y._calcHostAnchor(T,P,X,W);L=W,y._nextChangeEdgeHost={type:P,host:W},z=H}}var Z,E,$,R=!1;if(s||z.x===n)(z.percent!==n||z.index!==n)&&(R=!0,E=z.point);else{var w=y._interactor.getStyle("anchorRound"),i=y._interactor.getStyle("anchorSensitivity");Z=C.calculateAttachPoint(L,X),Z?(z=Z.info,R=!0):(k&&(z=y._calcHostAnchor(T,P,zo.toWorldPosition(C,k),L)),z.x=zo.roundTo(z.x,w,i),z.y=zo.roundTo(z.y,w,i)),E=Hq(C,L,0,z.offsetX||0,z.offsetY||0,z.x,z.y)}E&&($=zo.toScreenPosition(C,E),G.x=$.x,G.y=$.y),y._edgeHostGuideInfo={corners:zo.getTargetCornersOnScreen(C,L),attach:Z?Z.index:-1,host:L};var j;return z.percent!==n?j="percent: "+z.percent.toFixed(2):z.index!==n?j="index: "+z.index:(j=""+z.x.toFixed(2)+", "+z.y.toFixed(2),(z.offsetX||z.offsetY)&&(j+=" offset: "+z.offsetX.toFixed(2)+", "+z.offsetY.toFixed(2))),{host:L,anchor:z,tipText:j,isFixed:R}}},Bs.prototype._guidingToEdit=function(q,w){var s,g,N=this;if(s=N.screenInfo.curve){g=s._curves;var r,V,P,S,i,E,G,D,l=1/0,M=1/0,K=[];for(N.editing&&"realPoint"===N.editing.type&&(D=N.editing.point),i=0,E=2*g.length;E>i;i++)G=g[Math.floor(i/2)][i%2?"_p4":"_p1"],K.indexOf(G)>=0||(K.push(G),D&&D===G||(P=G.x-q.x,S=G.y-q.y,Math.abs(P)<Math.abs(l)?(l=P,r=[G]):P===l&&r.push(G),Math.abs(S)<Math.abs(M)?(M=S,V=[G]):S===M&&V.push(G)));var B=N._interactor.getStyle("smartGuideThreshold");if((Math.abs(l)>B||"y"===w)&&(r=null),(Math.abs(M)>B||"x"===w)&&(V=null),r||V){var A=!1,T={};if(r&&(A=!0,T.xList=r,T.x=l),V&&(A=!0,T.yList=V,T.y=M),A)return T}}},Bs.prototype._46O=function(Q){var O=this;O.editing&&(O.editing=null,O._interactor.fi({kind:"endEditPoint",event:Q})),O._guideInfo=null,O._edgeHostGuideInfo=null,O._pan&&(O._pan=null,O._interactor.fi({kind:"endPan",event:Q})),O._multiSelect&&(O._handleMultiSelect(O._multiSelect,Q),O._multiSelect=null),O.tipInfo=null,O.edgeEditResult=null},Bs.prototype._handleMultiSelect=function(J,e){if(J.startPoint&&J.endPoint){var y,M,A,R,S,C,h=this,V=h._interactor,Z=V.gv,j=zo.toScreenPosition(Z,J.startPoint),Q=zo.toScreenPosition(Z,J.endPoint),r=f.Default.unionPoint(j,Q),B=h.screenInfo.curve._curves,P=[],x=function(E){E.x>=r.x&&E.y>=r.y&&E.x<=r.x+r.width&&E.y<=r.y+r.height&&P.indexOf(E)<0&&P.push(E)};for(y=0,M=B.length;M>y;y++)S=B[y],x(S._p1),x(S._p4);if(P.length){var c=h.activing||{},X=c.selections||[];c.point&&X.push(c.point);var N=f.Default.isShiftDown(e),v=e.altKey;if(v&&!N)for(C=P,P=[],y=0,M=C.length;M>y;y++)A=C[y],R=X.indexOf(A),R>=0&&P.push(A);for(y=0,M=X.length;M>y;y++)A=X[y],R=P.indexOf(A),R>=0?(!N||N&&v)&&(P[R]=n):P.push(A);for(C=P,P=[],y=0,M=C.length;M>y;y++)C[y]&&P.push(C[y]);M=P.length,0===M?h.activing=null:1===M?h.activing={point:P[0]}:(A=P[M-1],h.activing={point:A,selections:P.splice(0,M-1)}),V.redraw()}}},Bs.prototype._canDeletePoint=function(c,K){var g=this.target;if(!(g instanceof f.Edge))return!0;var w=c._curves[0],q=c._curves[c._curves.length-1];return w._p1===K||q._p4===K?!1:!0},Bs.prototype.handleDelete=function(){var b=this;if(b.activing&&b.screenInfo){var U=f.Default.isShiftDown(),a=b.screenInfo.curve;b._canDeletePoint(a,b.activing.point)&&a.deleteRealPoint(b.activing.point,U),b.activing.selections&&b.activing.selections.forEach(function(T){b._canDeletePoint(a,T)&&a.deleteRealPoint(T,U)}),b.activing=null,delete b.editing,delete b.tipInfo,delete b.edgeEditResult,delete b._pan,delete b._multiSelect,b._writeToHt(),b._interactor.fp("deleteShapePoint",!1,!0)}},Bs.prototype.handleDoubleClick=function(B){var E=this,W=E._interactor._getLogicalPoint(B);if(E.screenInfo&&E._checkEditRealPoint(W)){var X=E.getCurrentSelectintStatus(),L=zo.Curve.PointType;return X=X===L.Mirrored?L.Straight:L.Mirrored,E._setCurrentSelectionStatus(X),E._interactor._42(),!0}},Bs.prototype._drawHighlight=function(i){var P=this,o=P.highlight;if(o){var D=o.bezier,h=P._interactor;D&&zo.Icons.DrawIcon(h,i,zo.Icons.ShapeHighlightCurve,[D._p1.x,D._p1.y,D._p2.x,D._p2.y,D._p3.x,D._p3.y,D._p4.x,D._p4.y]);var b=o.point;b&&"insertKnot"===o.type&&zo.Icons.DrawIcon(h,i,zo.Icons.ShapeHighlighPoint,b)}},Bs.prototype._drawGuide=function(C){var w=this,P=w._guideInfo;if(P){var g,N,t,x,J=P.v;for(g=0;2>g;g++)if(x=0===g?P.xList:P.yList)for(N=0,t=x.length;t>N;N++)zo.Icons.DrawIcon(w._interactor,C,zo.Icons.ShapeGuideLine,[J.x,J.y,x[N].x,x[N].y])}},Bs.prototype._drawCurrentPoint=function(y){var q=this;if(q.activing){var C=q.activing,e=q.getCurrentSelectintStatus(),G=q._interactor;if(e!==zo.Curve.PointType.Straight){var x=C.pairs;C.hlpair,C.hltype;var o=C.selections,k=C.editingCtrl;if(x&&!o){var u,f,z;for(f=0,z=x.length;z>f;f++)u=x[f],k&&f===k.pairId&&u[k.type]?zo.Icons.DrawIcon(G,y,zo.Icons.ShapeActivingCtrl,{point:u.point,c1:u.c1,c2:u.c2,hl:k.type}):zo.Icons.DrawIcon(G,y,zo.Icons.ShapeActivingCtrl,u)}}zo.Icons.DrawIcon(G,y,zo.Icons.ShapeHighlighRealPoint,q.activing.point),o&&o.forEach(function(e){zo.Icons.DrawIcon(G,y,zo.Icons.ShapeHighlighRealPoint,e)})}},Bs.prototype.clear=function(){var P=this;P.editing=null,P._guideInfo=null,P.activing=null,P.highlight=null},Bs.prototype._42=function(y){var u=this;u.info={},u.editing||(u.screenInfo=null);var d=u._interactor;if(!d.editDetail)return u.clear(),void 0;var v=d.gv;if(!u.target||!v.isSelected(u.target)||!v.isVisible(u.target))return d.editDetail=!1,u.clear(),void 0;if(u.gatherSingleTarget(v,u.target),zo.Icons.DrawIcon(d,y,zo.Icons.ShapeBgCurve,u.screenInfo),u._interactor.getStyle("curveElevationVisible")&&(u.target instanceof f.Polyline||u.target instanceof f.Edge&&u._interactor.getStyle("edgeElevationEditable"))&&u.activing){var m=u.activing.getCurrentEditingPoint();m&&"string"!=typeof m.e&&zo.Icons.DrawIcon(d,y,zo.Icons.EdgeElevationGuide,m)}if(u._drawHighlight(y),u._drawCurrentPoint(y),u._getRealPoint().forEach(function(Z){zo.Icons.DrawIcon(d,y,zo.Icons.ShapePoint,Z)}),u._drawGuide(y),u.tipInfo&&u._interactor.getStyle("curveTipVisible")&&zo.Icons.DrawIcon(d,y,zo.Icons.TipHelper,u.tipInfo),u._edgeHostGuideInfo&&d._drawHostGuide(u._edgeHostGuideInfo),u.edgeEditResult&&u._drawEdgeHostHighlight(y,u.edgeEditResult.host,u.edgeEditResult.anchor),u._multiSelect&&u._multiSelect.endPoint){var o=f.Default.unionPoint(zo.toScreenPosition(v,u._multiSelect.startPoint),zo.toScreenPosition(v,u._multiSelect.endPoint));o.color=v.getRectSelectBorderColor(),y.save(),y.setTransform(1,0,0,1,0,0);var E=Q.devicePixelRatio,r=o.borderWidth=Math.round(E);r/=2,o.x=Math.round(o.x*E)+r,o.y=Math.round(o.y*E)+r,o.width=Math.round(o.width*E),o.height=Math.round(o.height*E),zo.Icons.DrawIcon(d,y,zo.Icons.SimpleRect,o),y.restore()}},Bs.prototype._drawEdgeHostHighlight=function(u,w,g){this.drawEdgeHostHighlight(u,w,g),this._interactor.redraw()},Bs.prototype.drawEdgeHostHighlight=function(g,o,O){if(ld(o)){var D,P,N,u,h=this,c=h._interactor,i=c.gv,t=i.getDataUI(o),k=$g(t),Y=[];for(N=0,u=k.points.length;u>N;N++)P=zo.toScreenPosition(i,k.points.get(N)),Y.push(P.x,P.y);k.segments&&(D=k.segments.toArray());var s=c.getStyle("edgeHostHighlighPeriod"),U=c.getStyle("edgeHostEdgeHighlighColor");zo.Icons.DrawIcon(c,g,zo.Icons.ShapeBgCurve,{P:Y,S:D,color:U,dynamicVisible:O.index===n,dynamicPeriod:s}),U=c.getStyle("edgeHostPointHighlighColor");var T=Jp(t);for(N=0,u=T.length;u>N;N++){var x=T[N],H=zo.toScreenPosition(i,x);zo.Icons.DrawIcon(c,g,zo.Icons.ShapePoint,{point:{x:H.x,y:H.y},color:U,size:12,dynamicVisible:N===O.index,dynamicPeriod:s})}}},Bs.prototype._getRealPoint=function(){var S,O=this.screenInfo,R=O.P,d=O.S,Y=-1,m=[],E=-1,l=d.length;return d.each(function(b){E++;var $=1;if(3===b)$=2;else if(4===b)$=3;else if(5===b)return;Y+=$,S=E+1>=l?!0:1===d.get(E+1)?!0:!1,m.push({point:{x:R[2*Y],y:R[2*Y+1]},segmentIndex:E,pointIndex:Y,isEnd:S})}),m},Bs.prototype.getEditingPointsInfo=function(s){var x=this,Q=x.activing;if(!Q)return!1;var L=Q.point;if(!L)return!1;var a=this._getRealPoint(),g=[{screen:L}];Q.selections&&Q.selections.forEach(function(T){g.push({screen:T})});var $,i,N=a.length;return g.forEach(function(r){for($=0;N>$;$++)if(i=a[$],r.screen.isNearEnough(i.point)){r.segmentIndex=i.segmentIndex,r.pointIndex=i.pointIndex,r.point=x.target.getPoints().get(i.pointIndex);break}}),s&&g.sort(function(S,D){return S.segmentIndex-D.segmentIndex}),g};var Wm=zo.MoveHelper=function(L){var S=this;S.catalog="Move",S._interactor=L};Wm.prototype={},Wm.prototype.constructor=Wm,Wm.prototype.calcShift=function(v,V,q){var r,G,F=this,H=F._interactor.gv,K=H.lp(V);if("beginMove"===v&&F._gatherGridInfo(q._lastLogicalPoint||K),r=F._target){var S=r.downPosition;if(S){var j=F._interactor.getStyle("moveSensitivity")/H._zoom;if(S.distanceTo(K)<j)return{x:0,y:0};delete r.downPosition}var $;G=f.Default.isShiftDown(V),G&&(K=F._dealShiftDown(K),$=r.shiftGuide.dir);var t,C=r.rawPos={x:r.pos.x+K.x-r.lp.x,y:r.pos.y+K.y-r.lp.y};if(f.Default.isCtrlDown(V)){if(t=F._calcShiftByAddon(),F._target.node instanceof zo.Group){var a=F._target.node;a._position.x+=t.x,a._position.y+=t.y}return t}var b=F._interactor.rectGuide;if(r.node instanceof f.Data&&r.node.s("2d.attachable")){var y=F._calcAttachNodeShift(r.node,C);if(b.clear(),y)return y}for(var e,N=r.x+C.x,W=r.y+C.y,I={x:N,y:W},A={x:N+r.w/2,y:W+r.h/2},s={x:N+r.w,y:W+r.h},U=F._interactor.gridGuide,p=[b.findClosest(I,$),b.findClosest(A,$),b.findClosest(s,$),U.findClosest(I,$),U.findClosest(A,$),U.findClosest(s,$)],w=1/0,J=1/0,u=0,P=p.length;P>u;u++)e=p[u],e&&(N=e.x,W=e.y,isFinite(N)&&Math.abs(N)<Math.abs(w)&&(w=N),isFinite(W)&&Math.abs(W)<Math.abs(J)&&(J=W));if(isFinite(w)||(w=0),isFinite(J)||(J=0),t=F._calcShiftByAddon(w,J),F._target.node instanceof zo.Group){var a=F._target.node;a._position.x+=t.x,a._position.y+=t.y}var d=r.node;if(!Ah(d,H)){var h=C.x+w,g=C.y+J;F._interactor.rectGuide.gatherLines({node:d,x:r.x+h,y:r.y+g,w:r.w,h:r.h},$)}return t}},Wm.prototype._calcShiftByAddon=function(d,r){var u=this._target,E=u.rawPos,N=u.node.getPosition();return d=d||0,r=r||0,{x:E.x-N.x+d,y:E.y-N.y+r}},Wm.prototype._dealShiftDown=function(L){var u=this,H=u._target.shiftGuide,n=u._target.lp,O=Math.abs(L.x-n.x),F=Math.abs(L.y-n.y);O>F&&O>H.limit&&"y"===H.dir&&(H.dir="x"),F>O&&F>H.limit&&"x"===H.dir&&(H.dir="y");var E=H.dir;return"x"===E?(L.y=n.y,H.limit=Math.max(H.limit,O)):"y"===E&&(L.x=n.x,H.limit=Math.max(H.limit,F)),L},Wm.prototype._isAttachableLineShape=function(I){if(!I.getSegments)return!1;var L=I.getSegments();if(!L)return!0;L instanceof f.List&&(L=L.getArray());for(var e=1,r=L.length;r>e;e++)if(2!==L[e])return!1;return!0},Wm.prototype._calcAttachNodeShift=function(){var Q=new gd,y=new gd,t=new gd,N=new gd;return function(Z,_){var C=this._interactor.gv,o=Z.getHost(),g=C.getDataAt(_,function(r){return r.s("2d.hostable")?!0:!1});if(g&&o!==g&&Z.setHost(g),!g)return this._edgeHostGuideInfo=null,Z.setHost(null);var Y=this._edgeHostGuideInfo={corners:zo.getTargetCornersOnScreen(C,g),host:g,attach:-1};if(this._isAttachableLineShape(g)){for(var K,S,O,$,m,e,d=g.getPoints(),f=d.size(),L=g.getPointsMatrix2d(),V=1/0,u=0;f>u&&(u!==f-1||g.isClosePath());u++)0!==u?y.copy(t):L.apply(d.get(u),y),L.apply(u===f-1?d.get(0):d.get(u+1),t),Q.copy(_).sub(y),N.copy(t).sub(y),K=N.length(),N.divideScalar(K),S=Q.dot(N),0>S?S=0:S>K&&(S=K),N.multiplyScalar(S).add(y),O=Q.copy(_).sub(N).lengthSq(),V>O&&(V=O,e=u,$=S,m=K);return Math.sqrt(V)*C.getZoom()>this._interactor.getStyle("attachThreshold")?(Z.s({"attach.index":-1}),Z.setHost(null),void 0):(Z.s("attach.offset.opposite")&&($=m-$),Z.s({"attach.index":e,"attach.offset":Z.s("attach.offset.relative")?$/m:$}),{x:0,y:0})}var w=C.calculateAttachPoint(g,_);if(w){var X=w.point;return Y.attach=w.index,this._calcShiftByAddon(X.x-_.x,X.y-_.y)}}}(),Wm.prototype._gatherGridInfo=function(L){var E,z=this,f=z._interactor,y=f._getValidSelection();if(y.length){if(1===y.length){if(E=y[0],!E.getRect)return z._target=null,void 0}else if(E=zo.Group.findOrCreateGroup(y,f._uuid),!E)return z._target=null,void 0}else{var y=f.gv.sm().getSelection();if(y.length&&(E=y.get(0),!E.getRect))return z._target=null,void 0}if(E){var P=E.getPosition(),G=E.getRect();z._target={node:E,x:G.x-P.x,y:G.y-P.y,w:G.width,h:G.height,lp:{x:L.x,y:L.y},pos:{x:P.x,y:P.y},shiftGuide:{dir:"x",limit:0},downPosition:new zo.Math.Vector2(L)},f.rectGuide.gatherRects()}},Wm.prototype.clear=function(){var I=this;I._edgeHostGuideInfo=null,I._interactor.rectGuide.clear(),I._interactor._42()},Wm.prototype._42=function(){var A=this._edgeHostGuideInfo;A&&this._interactor._drawHostGuide(A)};var Vg=f.WebGLConstants=y.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047}),Fn=function(){function f(U,X){var p=n;return function(){return p||(p=U.getExtension(X)),p}}function V(v,D){D==n&&(D={}),D.version=A&&(v instanceof WebGL2RenderingContext||y.prototype.toString.call(v)===Z)?2:1,D.extensions=function(){for(var V={},I=v.getSupportedExtensions(),D=I.length;D--;)V[I[D]]=f(v,I[D]);return V}();for(var p=y.keys(q),d=0,o=p.length;o>d;++d){var h=p[d];D[h]=v.getParameter(q[h])}if(D.version>1){p=y.keys($);for(var d=0,o=p.length;o>d;++d){var h=p[d];D[h]=v.getParameter($[h])}}return D}var A="undefined"!=typeof WebGL2RenderingContext,Z="[object WebGL2RenderingContext]",q={aliasedLineWidthRange:33902,aliasedPointSizeRange:33901,maxCombinedTextureImageUnits:35661,maxCubeMapTextureSize:34076,maxFragmentUniformVectors:36349,maxRenderBufferSize:34024,maxTextureImageUnits:34930,maxTextureSize:3379,maxVaryingVectors:36348,maxVertexAttribs:34921,maxVertexTextureImageUnits:35660,maxVertexUniformVectors:36347,maxViewportDIMs:3386},$={max3DTextureSize:32883,maxArrayTextureLayers:35071,maxColorAttachments:36063,maxCombinedFragmentUniformComponents:35379,maxCombinedUniformBlocks:35374,maxCombinedVertexUniformComponents:35377,maxDrawBuffers:34852,maxElementIndex:36203,maxElementsIndices:33001,maxElementsVertices:33e3,maxFragmentInpuComponents:37157,maxFragmentUniformBlocks:35373,maxFragmentUniformComponents:35657,maxProgramTexelOffset:35077,maxSamples:36183,maxTextureLODBias:34045,maxTransformFeedbackInterleavedComponents:35978,maxTransformFeedbackSeparateAttribs:35979,maxTransformFeedbackSeparateComponents:35968,maxUniformBlockSize:35376,maxUniformBufferBindings:35375,maxVaryingComponents:35659,maxVertexOutputComponents:37154,maxVertexUniformBlocks:35371,maxVertexUniformComponents:35658,minProgramTexelOffset:35076};return{"for":function(n){var g=n._info;return g||(n._info=g=V(n,g)),g}}}(),gc=function(){function z(i,x,h){return{def:i,getter:h?function(X){var F=Fn.for(X);return F.version>1?X.getParameter(x):i}:function(L){return L.getParameter(x)},setter:h?function(B,P){var t=Fn.for(B);t.version>1&&B.pixelStorei(x,P)}:function(r,B){r.pixelStorei(x,B)}}}function H(b){return"string"==typeof b?cs(b):b.r!==n?(P[0]=b.r,P[1]=b.g,P[2]=b.b,P[3]=b.a,P):b.red!==n?(P[0]=b.red,P[1]=b.green,P[2]=b.blue,P[3]=b.alpha,P):b}function Q(g){return _(g)?Array.prototype.slice.call(g,0):g}function l(x,_,n){this.gl=_,this._record=n||{},this._branches={},this._leafSync={},this._struct=x;for(var o=x.children,B=o.length;B--;){var L=o[B],w=L.name;L.isLeaf?(this._leafSync[w]=!1,this._record[w]=Q(L.desc.def)):this._record[w]={}}}function D(U){function C(i,W){l.call(this,U,i,W);for(var v=d.length;v--;){var A=d[v];this._branches[A._name]=new A._type(i,this._record[A._name])}}function s(i,r){function Q(N,i){for(var x=S,p=!1;x--;)N[x]!==i[x]&&(N[x]=i[x],p=!0);return p}var O=i.name,X=_(i.desc.def),S=X&&i.desc.def.length;if(i.isLeaf){var H=i.desc.setter,W=i.desc.parse;y.defineProperty(r,O,{configurable:!1,enumerable:!0,get:function(){return this._record[O]},set:X?function(P){W&&(P=W(P)),(Q(this._record[O],P)||!this._leafSync[O])&&(H(this.gl,this._record[O]),this._leafSync[O]=!0)}:function(W){this._record[O]===W&&this._leafSync[O]||(H(this.gl,W),this._record[O]=W,this._leafSync[O]=!0)}})}else d.push({_name:O,_type:D(i)}),y.defineProperty(r,O,{configurable:!1,enumerable:!0,get:function(){return this._branches[O]},set:function(x){this._branches[O].apply(x)}})}var d=[];return Z(C,l),U.forEach(s,C.prototype),C}var P="undefined"!=typeof Float32Array&&new Float32Array(4),q={viewport:{def:[0,0,0/0,0/0],getter:function(M){return M.getParameter(2978)},setter:function(e,u){var R=u[2]!==u[2]?e.drawingBufferWidth-u[0]:u[2],T=u[3]!==u[3]?e.drawingBufferHeight-u[1]:u[3];e.viewport(u[0],u[1],R,T)}},dither:{def:!1,getter:function(V){return V.isEnabled(3024)},setter:function(a,f){f?a.enable(3024):a.disable(3024)}},rasterizerDiscard:{def:!1,getter:function(G){var o=Fn.for(G);return o.version>1&&G.isEnabled(35977)},setter:function(N,G){var s=Fn.for(N);1!==s.version&&(G?N.enable(35977):N.disable(35977))}},lineWidth:{def:1,getter:function(N){return N.lineWidth?N.getParameter(2849):1},setter:function(s,b){s.lineWidth&&s.lineWidth(b)}},color:{clear:{def:[0,0,0,0],getter:function(L){return L.getParameter(3106)},setter:function(r,G){r.clearColor(G[0],G[1],G[2],G[3])},parse:H},mask:{def:[!0,!0,!0,!0],getter:function(y){return y.getParameter(3107)},setter:function(m,I){m.colorMask(I[0],I[1],I[2],I[3])}}},blend:{enabled:{def:!1,getter:function(a){return a.isEnabled(3042)},setter:function(H,R){R?H.enable(3042):H.disable(3042)}},color:{def:[0,0,0,0],getter:function(A){return A.getParameter(32773)},setter:function(B,i){B.blendColor(i[0],i[1],i[2],i[3])},parse:H},equation:{def:[32774,32774],getter:function(y){return[y.getParameter(32777),y.getParameter(34877)]},setter:function(e,k){e.blendEquationSeparate(k[0],k[1])},parse:function(V){var v=V.length;return v>1?V:1===v?(P[1]=P[0]=V[0],P):(P[1]=P[0]=V,P)
}},func:{def:[1,Vg.ZERO,1,Vg.ZERO],getter:function(W){return[W.getParameter(32969),W.getParameter(32968),W.getParameter(32971),W.getParameter(32970)]},setter:function(b,e){b.blendFuncSeparate(e[0],e[1],e[2],e[3])},parse:function(O){var c=O.length;return c>3?O:(P[2]=P[0]=O[0],P[3]=P[1]=O[1],P)}}},cullFace:{enabled:{def:!1,getter:function(A){return A.isEnabled(2884)},setter:function(f,M){M?f.enable(2884):f.disable(2884)}},mode:{def:1029,getter:function(g){return g.getParameter(2885)},setter:function(U,O){U.cullFace(O)}},frontFace:{def:2305,getter:function(w){return w.getParameter(2886)},setter:function(g,J){g.frontFace(J)}}},scissor:{enabled:{def:!1,getter:function(x){return x.isEnabled(3089)},setter:function(M,X){X?M.enable(3089):M.disable(3089)}},box:{def:[0,0,0/0,0/0],getter:function(H){return H.getParameter(3088)},setter:function(d,L){var A=L[2]!==L[2]?d.drawingBufferWidth-L[0]:L[2],U=L[3]!==L[3]?d.drawingBufferHeight-L[1]:L[3];d.scissor(L[0],L[1],A,U)}}},depth:{enabled:{def:!1,getter:function(C){return C.isEnabled(2929)},setter:function(K,d){d?K.enable(2929):K.disable(2929)}},clear:{def:1,getter:function(Y){return Y.getParameter(2931)},setter:function(H,F){H.clearDepth(F)}},mask:{def:!0,getter:function(y){return y.getParameter(2930)},setter:function(Q,g){Q.depthMask(g)}},range:{def:[-1,1],getter:function(O){return O.getParameter(2928)},setter:function(N,H){N.depthRange(H[0],H[1])}},func:{def:513,getter:function(k){return k.getParameter(2932)},setter:function(O,b){O.depthFunc(b)}}},stencil:{enabled:{def:!1,getter:function(X){return X.isEnabled(2960)},setter:function(a,t){t?a.enable(2960):a.disable(2960)}},clear:{def:0,getter:function(U){return U.getParameter(2961)},setter:function(l,$){l.clearStencil($)}},frontMask:{def:255,getter:function(p){return p.getParameter(2968)},setter:function(H,d){H.stencilMaskSeparate(1028,d)}},frontOp:{def:[7680,7680,7680],getter:function(i){return[i.getParameter(2964),i.getParameter(2965),i.getParameter(2966)]},setter:function(w,s){w.stencilOpSeparate(1028,s[0],s[1],s[2])}},frontFunc:{def:[519,0,255],getter:function(R){return[R.getParameter(2962),R.getParameter(2967),R.getParameter(2963)]},setter:function(J,K){J.stencilFuncSeparate(1028,K[0],K[1],K[2])}},backMask:{def:255,getter:function(U){return U.getParameter(36005)},setter:function(q,y){q.stencilMaskSeparate(1029,y)}},backOp:{def:[7680,7680,7680],getter:function(v){return[v.getParameter(34817),v.getParameter(34818),v.getParameter(34819)]},setter:function(X,z){X.stencilOpSeparate(1029,z[0],z[1],z[2])}},backFunc:{def:[519,0,255],getter:function(M){return[M.getParameter(34816),M.getParameter(36003),M.getParameter(36004)]},setter:function(M,m){M.stencilFuncSeparate(1029,m[0],m[1],m[2])}}},hint:{generateMipmap:{def:4352,getter:function(A){return A.getParameter(33170)},setter:function($,g){$.hint(33170,g)}},fragmentShaderDerivative:{def:4352,getter:function(O){var k=Fn.for(O);return 1!==k.version||k.extensions.OES_standard_derivatives?O.getParameter(35723):4352},setter:function(x,e){var c=Fn.for(x);return c.version>1||c.extensions.OES_standard_derivatives?(x.hint(35723,e),void 0):void 0}}},pixelStore:{packAlignment:z(4,3333,!1),unpackAlignment:z(4,3317,!1),unpackFlipY:z(!1,37440,!1),unpackPremultiplyAlpha:z(!1,37441,!1),unpackColorspaceConversion:z(37444,37443,!1),packRowLength:z(0,3330,!0),packSkipPixels:z(0,3332,!0),packSkipRows:z(0,3331,!0),unpackRowLength:z(0,3314,!0),unpackImageHeight:z(0,32878,!0),unpackSkipPixels:z(0,3316,!0),unpackSkipRows:z(0,3315,!0),unpackSkipImages:z(0,32877,!0)},polygonOffset:{enabled:{def:!1,getter:function(c){return c.isEnabled(32823)},setter:function(m,s){s?m.enable(32823):m.disable(32823)}},value:{def:[0,0],getter:function(b){return[b.getParameter(32824),b.getParameter(10752)]},setter:function(k,U){k.polygonOffset(U[0],U[1])}}},sampleCoverage:{enabled:{def:!1,getter:function(X){return X.isEnabled(32928)},setter:function(U,g){g?U.enable(32928):U.disable(32928)}},alpha:{def:!1,getter:function(l){return l.isEnabled(32926)},setter:function(t,B){B?t.enable(32926):t.disable(32926)}},value:{def:[1,!1],getter:function(j){return[j.getParameter(32938),j.getParameter(32939)]},setter:function(P,n){P.sampleCoverage(n[0],n[1])}}}},N=ts.create(q,function(O){return"def"in O});l.prototype.reset=function(){for(var P=this._struct.children,o=P.length;o--;){var j=P[o],U=j.name;j.isLeaf?this[U]=j.desc.def:this._branches[U].reset()}},l.prototype.save=function(a){a==n&&(a={});for(var B=this._struct.children,P=B.length;P--;){var x=B[P],N=x.name;if(x.isLeaf)a[N]=Q(this._record[N]);else{var f=a[N];f==n&&(a[N]=f={}),this._branches[N].save(f)}}return a},l.prototype.sync=function(l,r){for(var T=this._struct.children,I=T.length;I--;){var k=T[I],L=k.name;k.isLeaf?(r||!this._leafSync[L])&&(l?(this._record[L]=k.desc.getter(this.gl),this._leafSync[L]=!0):(k.desc.setter(this.gl,this._record[L]),this._leafSync[L]=!0)):this._branches[L].sync(l,r)}},l.prototype.syncLoss=function(){for(var O=this._struct.children,h=O.length;h--;){var z=O[h];z.isLeaf?this._leafSync[z.name]=!1:this._branches[z.name].syncLoss()}},l.prototype.apply=function(a){for(var F=this._struct.children,S=F.length;S--;){var V=F[S],q=V.name;q in a&&(V.isLeaf?this[q]=a[q]:this._branches[q].apply(a[q]))}},l.prototype.append=function(p){var k=this._struct.childMap;for(var u in p){var X=k[u];X&&(X.isLeaf?this[u]=p[u]:this._branches[u].append(p[u]))}};var Y=D(N);return function(H){var t=H._state;return t||(H._state=t=new Y(H)),t}}(),kj=function(){function q(W,g,X,M){if(W){var Q=W.length;if(Q!=n)for(var $=0;M>$;++$)g[X+$]=W[$];else W.toArray&&W.toArray(g,X)}else for(var $=0;M>$;++$)g[X+$]=0}function f(S,e,f){var o=S[0];if(0>=o||o>0)return S;var x=e*f,K=m[x];if(K==n&&(m[x]=K=new Float32Array(x)),0!==e){q(o,K,0,f);for(var M=1,I=0;M!==e;++M)I+=f,q(S[M],K,I,f)}return K}function i(D,H){if(!D||!H)return!1;var E=D.length,O=H.length;if(E!==O)return!1;for(;--E>=0;)if(D[E]!==H[E])return!1;return!0}function X(j,v){var Y=this.cache;Y[0]!==v&&(j.uniform1f(this.addr,v),Y[0]=v)}function Y(h,e){var J=this.cache;i(J,e)||(h.uniform1fv(this.addr,e),J=e)}function G(R,v){var I,U;v.x!=n?(I=v.x,U=v.y):(I=v[0],U=v[1]);var K=this.cache;(K[0]!==I||K[1]!==U)&&(R.uniform2f(this.addr,I,U),K[0]=I,K[1]=U)}function N(_,y){var L=this.cache;y=f(y,this.size,2),i(L,y)||(_.uniform2fv(this.addr,y),L=y)}function j(J,C){"string"==typeof C&&(C=cs(C));var M,U,K;C.x!=n?(M=C.x,U=C.y,K=C.z):C.r!=n?(M=C.r,U=C.g,K=C.b):C.red!=n?(M=C.red,U=C.green,K=C.blue):(M=C[0],U=C[1],K=C[2]);var B=this.cache;(B[0]!==M||B[1]!==U||B[2]!==K)&&(J.uniform3f(this.addr,M,U,K),B[0]=M,B[1]=U,B[2]=K)}function A(q,L){var D=this.cache;L=f(L,this.size,3),i(D,L)||(q.uniform3fv(this.addr,L),D=L)}function R(l,c){"string"==typeof c&&(c=cs(c));var I,G,o,r;c.x!=n?(I=c.x,G=c.y,o=c.z,r=c.w):c.r!=n?(I=c.r,G=c.g,o=c.b,r=c.a):c.red!=n?(I=c.red,G=c.green,o=c.blue,r=c.alpha):(I=c[0],G=c[1],o=c[2],r=c[3]==O?1:c[3]);var L=this.cache;(L[0]!==I||L[1]!==G||L[2]!==o||L[3]!==r)&&(l.uniform4f(this.addr,I,G,o,r),L[0]=I,L[1]=G,L[2]=o,L[3]=r)}function T(q,m){var Z=this.cache;m=f(m,this.size,4),i(Z,m)||(q.uniform4fv(this.addr,m),Z=m)}function s(v,l){var U=this.cache;U[0]!==l&&(v.uniform1i(this.addr,l),U[0]=l)}function U(S,A){var x=this.cache;i(x,A)||(S.uniform1iv(this.addr,A),x=A)}function S(X,H){var y=this.cache;i(y,H)||(X.uniform2iv(this.addr,H),y=H)}function I(z,M){var V=this.cache;i(V,M)||(z.uniform3iv(this.addr,M),V=M)}function W(M,Y){var $=this.cache;i($,Y)||(M.uniform4iv(this.addr,Y),$=Y)}function b(W,Z){var z=this.cache;Z=D[Z?1:0],z[0]!==Z&&(W.uniform1i(this.addr,Z),z[0]=Z)}function o(B,v){var r=m[4];r.set(v,0),B.uniformMatrix2fv(this.addr,!1,r)}function d(n,M){n.uniformMatrix2fv(this.addr,!1,f(M,this.size,4))}function l(Y,O){var A=m[9];A.set(O,0),Y.uniformMatrix3fv(this.addr,!1,A)}function x(B,k){B.uniformMatrix3fv(this.addr,!1,f(k,this.size,9))}function e(f,a){var k=m[16];k.set(a,0),f.uniformMatrix4fv(this.addr,!1,k)}function r(b,O){b.uniformMatrix4fv(this.addr,!1,f(O,this.size,16))}function w(J,w){J.uniform1i(this.addr,this.slots[0]),J.activeTexture(33984+this.slots[0]),J.bindTexture(3553,w||J._emptyTexture)}function F(E,D){E.uniform1iv(this.addr,this.slots);for(var d=this.slots.length;d--;)E.activeTexture(33984+this.slots[d]),E.bindTexture(3553,D[d]||E._emptyTexture)}function B(s,R){s.uniform1i(this.addr,this.slots[0]),s.activeTexture(33984+this.slots[0]),s.bindTexture(34067,R||s._emptyCubeTexture)}function C(p,y){p.uniform1iv(this.addr,this.slots);for(var x=this.slots.length;x--;)p.activeTexture(33984+this.slots[x]),p.bindTexture(34067,y[x]||p._emptyCubeTexture)}function _(v,O,j){H[v]=[O,j]}function J(C,W,X){switch(C.type){case 35678:case 35680:if("uSampler"===X)return[0];if("uBlendSampler"===X)return[1];for(var G=C.size,F=new Int32Array(G),d=0;G>d;++d)F[d]=W.usedTextureSlot++;return F}return n}function c(R,Q,o,E,S){this.name=R,this.addr=Q,this.cache=[],this.size=E?o.size:0,this.activeInfo=o,this.setter=H[o.type][E?1:0],this.slots=J(o,S,R),cn(this)}function k(R,t,$,w){var q=R.name,b=q.length;for(g.lastIndex=0;;){var Z=g.exec(q),M=g.lastIndex,A=Z[1],B="]"===Z[2],O=Z[3];if(B&&(A=0|A),O===n||"["===O&&M+2===b){$[A]=new c(A,t,R,O!==n,w);break}var p=$[A];p==n&&($[A]=p={}),$=p}}function L(w,Y,o){this.gl=Y,this._program=o,this._leaves={},this._branches={},this._struct=w}function V(R){function l(z,N){L.call(this,R,z,N);for(var J=o.length;J--;){var d=o[J];this._branches[d._name]=new d._type(z,N)}this.uuid=Tc.generateUUID()}function J(h,s){var n=h.name;if(h.isLeaf){var H=z("d.setter(this.gl, v);",["v"],["d"],[h.desc]);y.defineProperty(s,n,{configurable:!1,enumerable:!0,get:function(){return H},set:H})}else o.push({_name:n,_type:V(h)}),y.defineProperty(s,n,{configurable:!1,enumerable:!0,get:function(){return this._branches[n]},set:function(c){this._branches[n].apply(c)}})}var o=[];return Z(l,L),R.forEach(J,l.prototype),l}function v(Y,J){for(var D=Y.getProgramParameter(J,35718),L={},T={usedTextureSlot:2};D--;){var W=Y.getActiveUniform(J,D),X=W.name,i=Y.getUniformLocation(J,X);k(W,i,L,T)}var R=ts.create(L,function(v){return"addr"in v}),w=V(R);return y.defineProperty(w.prototype,"textureCount",{configurable:!1,enumerable:!1,writable:!1,value:T.usedTextureSlot}),new w(Y,J)}var m=[];if("function"==typeof Float32Array)for(var h=1;17>h;++h)m[h]=new Float32Array(h);var D=[0,1],H=[];_(5126,X,Y),_(35664,G,N),_(35665,j,A),_(35666,R,T),_(5124,s,U),_(35667,S,S),_(35668,I,I),_(35669,W,W),_(35670,b,U),_(35671,S,S),_(35672,I,I),_(35673,W,W),_(35674,o,d),_(35675,l,x),_(35676,e,r),_(35678,w,F),_(35680,B,C);var g=/([\w\d_]+)(\])?(\[|\.)?/g;return L.prototype.apply=function(O,m){for(var l=this._struct.children,w=l.length;w--;){var q,M=l[w],G=M.name,$=M.desc.activeInfo;if(m){if(q=m(O,G,$?$.type:null),q===n)continue}else{if(!(G in O))continue;q=O[G]}M.isLeaf?this[G]=q:this._branches[G].apply(q)}},L.prototype.append=function(o){var s=this._struct.childMap;for(var Z in o){var H=s[Z];H&&(H.isLeaf?this[Z]=o[Z]:this._branches[Z].append(o[Z]))}},function(l,M){var i=M._uniforms;return i||(M._uniforms=i=v(l,M)),i}}(),Yq=function(){function C(z,Z,N){Z.vertexAttrib1f(z.addr,N)}function w(w,X,L){if(L.x!=n)X.vertexAttrib2f(w.addr,L.x,L.y);else{var M=v[2];M.set(L,0),X.vertexAttrib2fv(w.addr,M)}}function h(B,w,K){if(K.x!=n)w.vertexAttrib3f(B.addr,K.x,K.y,K.z);else if(K.r!=n)w.vertexAttrib3f(B.addr,K.r,K.g,K.b);else if(K.red!=n)w.vertexAttrib3f(B.addr,K.red,K.green,K.blue);else{var W=v[3];W.set(K,0),w.vertexAttrib3fv(B.addr,W)}}function T(r,d,E){if("string"==typeof E&&(E=cs(E)),E.x!=n)d.vertexAttrib4f(r.addr,E.x,E.y,E.z,E.w);else if(E.r!=n)d.vertexAttrib4f(r.addr,E.r,E.g,E.b,E.a);else if(E.red!=n)d.vertexAttrib4f(r.addr,E.red,E.green,E.blue,E.alpha);else{var w=v[4];w.set(E,0),d.vertexAttrib4fv(r.addr,w)}}function d(n,A,q){q=q.el||q;for(var L=0,y=0;2>L;++L)A.vertexAttrib2f(n.addr,q[y++],q[y++])}function P(S,i,f){f=f.el||f;for(var N=0,c=0;3>N;++N)i.vertexAttrib3f(S.addr,f[c++],f[c++],f[c++])}function l(T,O,K){K=K.el||K;for(var i=0,L=0;4>i;++i)O.vertexAttrib4f(T.addr,K[L++],K[L++],K[L++],K[L++])}function J(B,F,H,X){for(var n,D=H?1:0,e=F.addr,V=B._divisorState,U=0;X>U;U++)n=V[e+U]||0,n!==D&&(V[e+U]=D,B.vertexAttribDivisor(e+U,D))}function i(o,s,H,l,k,u,q){s.bindBuffer(34962,H);var f=o.addr;s.enableVertexAttribArray(f),J(s,o,H.instanced,1),s.vertexAttribPointer(f,1,l||5126,!!k,u||0,q||0),s.bindBuffer(34962,null)}function D(g,R,L,f,u,I,E){R.bindBuffer(34962,L);var h=g.addr;R.enableVertexAttribArray(h),J(R,g,L.instanced,1),R.vertexAttribPointer(h,2,f||5126,!!u,I||0,E||0),R.bindBuffer(34962,null)}function p(E,I,i,c,R,b,n){I.bindBuffer(34962,i);var C=E.addr;I.enableVertexAttribArray(C),J(I,E,i.instanced,1),I.vertexAttribPointer(C,3,c||5126,!!R,b||0,n||0),I.bindBuffer(34962,null)}function B(o,a,K,q,V,X,l){a.bindBuffer(34962,K);var G=o.addr;a.enableVertexAttribArray(G),J(a,o,K.instanced,1),a.vertexAttribPointer(G,4,q||5126,!!V,X||0,l||0),a.bindBuffer(34962,null)}function E(v,L,c,C,N,I,y){var I=I||16,y=y||0,R=v.addr;L.bindBuffer(34962,c),L.enableVertexAttribArray(R),L.vertexAttribPointer(R,2,C||5126,!!N,I,y),L.enableVertexAttribArray(R+1),L.vertexAttribPointer(R+1,2,C||5126,!!N,I,y+8),J(L,v,c.instanced,2),L.bindBuffer(34962,null)}function F(u,a,p,D,r,R,G){var R=R||36,G=G||0,i=u.addr;a.bindBuffer(34962,p);for(var U=0;3>U;U++)a.enableVertexAttribArray(i+U),a.vertexAttribPointer(i+U,3,D||5126,!!r,R,G+12*U);J(a,u,p.instanced,3),a.bindBuffer(34962,null)}function H($,O,B,q,L,D,j){var D=D||64,j=j||0,I=$.addr;O.bindBuffer(34962,B);for(var Z=0;4>Z;Z++)O.enableVertexAttribArray(I+Z),O.vertexAttribPointer(I+Z,4,q||5126,!!L,D,j+16*Z);J(O,$,B.instanced,4),O.bindBuffer(34962,null)}function f(Y,y,k,c){I[Y]=function(r,b,K,z,U,g){this.addr==n||this.addr<0||(b==n||b===!1?c(r,this.addr):lj(b)===s?k(this,r,b,b.glType,z,U,g):(c(r,this.addr),y(this,r,b)))}}function b(L,f){L.disableVertexAttribArray(f)}function X(N,Z){N.disableVertexAttribArray(Z),N.disableVertexAttribArray(Z+1)}function L(c,g){c.disableVertexAttribArray(g),c.disableVertexAttribArray(g+1),c.disableVertexAttribArray(g+2)}function e(y,Y){y.disableVertexAttribArray(Y),y.disableVertexAttribArray(Y+1),y.disableVertexAttribArray(Y+2),y.disableVertexAttribArray(Y+3)}function A(K,W,m){this.name=K,this.addr=W,this.activeInfo=m,this.setter=I[m.type],cn(this)}function t(G,I,R){this.gl=I,this.program=R,this._branches={},this._struct=G}function m(B){function p(C,f){t.call(this,B,C,f);for(var d=I.length;d--;){var T=I[d];this._branches[T._name]=new T._type(C,f)}}function N(D,S){var J=D.name;if(D.isLeaf){var Y=z("d.setter(this.gl, v);",["v"],["d"],[D.desc]);y.defineProperty(S,J,{configurable:!1,enumerable:!0,get:function(){return Y},set:Y})}else I.push({_name:J,_type:m(D)}),y.defineProperty(S,J,{configurable:!1,enumerable:!0,get:function(){return this._branches[J]},set:function(E){this._branches[J].apply(E)}})}var I=[];return Z(p,t),B.forEach(N,p.prototype),p}function Y(t,l){for(var P=t.getProgramParameter(l,35721),d={};P--;){var n=t.getActiveAttrib(l,P),Q=n.name,M=t.getAttribLocation(l,Q);M>=0&&(d[Q]=new A(Q,M,n))}var a=ts.create(d,function(C){return"addr"in C}),X=m(a);return new X(t,l)}for(var v=[],k=1;17>k;++k)v[k]=new yr(k);var I=[],s="undefined"!=typeof WebGLBuffer&&WebGLBuffer.prototype;return f(5126,C,i,b),f(35664,w,D,b),f(35665,h,p,b),f(35666,T,B,b),f(35674,d,E,X),f(35675,P,F,L),f(35676,l,H,e),t.prototype.disable=function(){for(var N=this._struct.children,O=N.length;O--;){var x=N[O],i=x.name;x.isLeaf?this[i]=n:this._branches[i].disable()}},t.prototype.apply=function(S,x){for(var T=this._struct.children,r=T.length;r--;){var h,j=T[r],J=j.name;if(x){if(h=x(S,J,j),h===n)continue}else{if(!(J in S))continue;h=S[J]}j.isLeaf?this[J]=h:this._branches[J].apply(h)}},t.prototype.append=function(q){var W=this._struct.childMap;for(var C in q){var t=W[C];t&&(t.isLeaf?this[C]=q[C]:this._branches[C].append(q[C]))}},function(a,I){var g=I._attribs;return g||(I._attribs=g=Y(a,I)),g}}(),Ar=function(E){var o=this;y.defineProperties(this,{gl:{configurable:!1,enumerable:!1,value:E,writable:!1},glState:{configurable:!1,enumerable:!1,value:gc(E),writable:!1}}),o._currProgram=n,o._currUniforms=n,o._currAttribs=n,o._sync=!0};y.defineProperties(Ar.prototype,{program:{configurable:!1,enumerable:!1,get:function(){return this._currProgram},set:function(O){var M=this;M._sync&&O===M._currProgram||(M.gl.useProgram(O),M._currProgram=O,M._currUniforms=kj(M.gl,O),M._currAttribs=Yq(M.gl,O),M._sync=!0)}},uniforms:{configurable:!1,enumerable:!1,get:function(){var M=this;return M._currProgram&&!M._sync&&(M.gl.useProgram(M._currProgram),M._sync=!0),M._currUniforms},set:function(p){var c=this;c._currUniforms&&(c._currProgram&&!c._sync&&(c.gl.useProgram(c._currProgram),this._sync=!0),c._currUniforms.apply(p))}},attribs:{configurable:!1,enumerable:!1,get:function(){var h=this;return h._currProgram&&!h._sync&&(h.gl.useProgram(h._currProgram),h._sync=!0),h._currAttribs},set:function($){var J=this;J._currUniforms&&(J._currProgram&&!J._sync&&(J.gl.useProgram(J._currProgram),this._sync=!0),J._currAttribs.apply($))}}}),Ar.prototype.useProgram=function(f){var D=this;D._sync&&f===D._currProgram||(D.gl.useProgram(f),D._currProgram=f,D._currUniforms=kj(D.gl,f),D._currAttribs=Yq(D.gl,f),D._sync=!0)},Ar.prototype.directState=function(){return this.glState},Ar.prototype.directUniforms=function(){return this._currUniforms},Ar.prototype.directAttribs=function(){return this._currAttribs},Ar.prototype.syncLoss=function(){this._sync=!1,this.glState.syncLoss()},Ar.for=function(f){var K=f._renderState;return K||(f._renderState=K=new Ar(f)),K};var Mb="directional",Jk="point",rb="spot",xj="light.color",Yb=4294967295,Bi=0,Fo={},ke={},Kh=[],Qp=0,os=function(b,M){Vp(M)&&Ql.test(M)?Zl(b,M):Yo(M)&&M.modelType?Wf(b,M):M===n?delete Km[b]:Km[b]=M},Mf=function(I){return I},Bj=function(z){z=Q.convertShape3dModelName(z);var d;if(Yo(z)){if(z.modelType){if(z.uuid){if(d=Km[z.uuid])return d}else z.uuid=f.Math.generateUUID();return d===n&&(en&&en[z.uuid]||Wf(z.uuid,z)),n}return z}return d=Km[z],z&&d===n&&Ql.test(z)&&(en&&en[z]||Zl(z,z)),d},Co="undefined"!=typeof WebGLTexture&&WebGLTexture.prototype,Ii=function(J){return J&&lj(J)===Co},Qc=function(q,R){q.frameStack?q.frameStack.push(R):q.frameStack=[R],q.bindFramebuffer(36160,R)},bk=function(u){var P=u.frameStack;if(P){if(P.pop(),P.length)return u.bindFramebuffer(36160,P[P.length-1]),void 0;u.frameStack=null}u.bindFramebuffer(36160,null)};og(Q,{graph3dViewAttributes:O,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:ei/60,graph3dViewSortable:!1,graph3dViewBlockSelectable:!0,graph3dViewEditHelperDisabled:!1,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:rh,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewRotateMaxPhi:ei,graph3dViewRotateMinPhi:0,graph3dViewShadowDisabled:!0,graph3dViewShadowQuality:"high",graph3dViewShadowIntensity:.3,graph3dViewShadowBias:-.005,graph3dViewShadowRadius:.1,graph3dViewShadowType:"hard",graph3dViewShadowDegreeX:30,graph3dViewShadowDegreeZ:-10,graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewSyncEyeWithOrthoWidth:!1,graph3dViewFovy:ei/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewDataNumWarningLine:1e4,graph3dViewHeadlightDirection:"camera",graph3dViewHeadlightRange:0,graph3dViewHeadlightGroup:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewHeadlightAmbientIntensity:.7,graph3dViewHeadlightRatioForPhysicalMaterial:.5,graph3dViewFogDisabled:!0,graph3dViewFogMode:"linear",graph3dViewFogDensity:5e-4,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewPickerResolution:.5,graph3dViewDashDisabled:!0,graph3dViewUvClipEnabled:!1,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,graph3dViewBatchInstancedDisabled:!0,graph3dViewFlowBlendMode:"addRGB",graph3dViewEnvmapType:"legacy",graph3dMaxVectorCacheTime:50,graph3dEnvmapCapabilityRequire:8,setShape3dModel:os,getShape3dModel:Bj,convertShape3dModelName:Mf,getShape3dModelMap:function(){return Km},getCachedShape3dModelMap:function(){return lr},createMatrix:function(q,M){Se(q)||(q=[q]);for(var E=q.length-1;E>=0;E--){var v=q[E];M=Qn(v.mat,v.s3,v.r3,v.rotationMode,v.t3,M)}return M},transformVec:function(s,o){return Qr(s,o)},glBindFrame:Qc,glUnbindFrame:bk,createBoxModel:function(){return{vs:Qj,ns:fn,uv:id,is:vo}},createRoundRectModel:function(l,h){return Vq.roundRect(l,h)},createStarModel:function(F,E){return Vq.star(F,E)},createRectModel:function(z,j){return Vq.rect(z,j)},createTriangleModel:function(t,R){return Vq.triangle(t,R)},createRightTriangleModel:function(T,n){return Vq.rightTriangle(T,n)},createParallelogramModel:function(u,K){return Vq.parallelogram(u,K)},createTrapezoidModel:function(A,f){return Vq.trapezoid(A,f)},createSmoothSphereModel:function(m,L,Q,F,O,f,c){return jh(new If(m,L,Q,F,O,f,c))},createSphereModel:function(l,G,P,w,K,D,A){return l?xs(l,G,P,w,K,D,A):Q.createSmoothSphereModel()},createSmoothConeModel:function(J,r,R,m,f){return Sn(J,r,R,m,f)},createConeModel:function(b,n,P,w,v,M,y,H){return b?_e(b,n,P,w,v,M,y,H):Sn(M)},createSmoothCylinderModel:function(T,F,v,a,r,A,G,H){return jh(new sj(T,F,v,a,r,A,G,H))},createCylinderModel:function(p,G,$,X,f,J,V,u){return p?ek(p,G,$,X,f,J,V,u):Mh(J,V)},createSmoothTorusModel:function(p,t,L,j,M,Y){return jh(new lc(p,t,L,j,M,Y))},createTorusModel:function(C,h,S,u,m,j,O,Z){return C?ho(C,h,S,u,m,j,O,Z):bd(j,O)},createExtrusionModel:function(K,b,k,x,H,s,f,B){return Zk(K,b,k,x,H,s,f,B)},createSmoothRingModel:function(f,p,v,W,x,r){for(var o=[],O=0;O<f.length-1;O+=2)o.push({x:f[O],y:f[O+1]});for(f=yp(o,p,v)[0],o=[],O=0;O<f.length;O++){var t=f[O];o.push(new nh(t.x,0,t.y))}return jh(new Ho(o,r,W,x))},createTextGeometry:function(Z,b){var u=jh(new Em(Z,b));if(b.cube)for(var e=ik(u),j=e.min,R=e.max,r=j.x,U=j.y,n=j.z,c=R.x-r||1,Q=R.y-U||1,x=R.z-n||1,f=["vs","top_vs","bottom_vs"],G=0,w=f.length;w>G;G++){var o=u[f[G]];if(o)for(var $=0,i=o.length;i>$;$+=3)o[$]=(o[$]-r)/c-.5,o[$+1]=(o[$+1]-U)/Q-.5,o[$+2]=(o[$+2]-n)/x-.5}return u},loadFontFace:function(d,A){Q.xhrLoad(d,function(M){if(!M)return A();var l;try{l=JSON.parse(M)}catch(C){l=JSON.parse(M.substring(65,M.length-2))}Vk.loadFace(l),A&&A(l.familyName.toLowerCase())},A?null:{sync:!0})},getShaderErrorLog:function(){return Kh.join("\n")},createRingModel:function(R,y,l,f,k,s,B,w,e,n){for(var d=[],_=0;_<R.length-1;_+=2)d.push({x:R[_],y:R[_+1]});s=s||Q.shapeSide,B=B||0,w=w||s;var u,H,E,T,v,V,a,F,U,o,_,I,J,z,C,c,Y,x,A=[],t=[],S=e?[]:O,M=e?[]:O,r=n?[]:O,j=n?[]:O,W=f?[]:O,Z=f?[]:O,P=k?[]:O,m=k?[]:O,R=yp(d,y,l),K=Jr(R),L=0,D=2*Math.PI/s;return R.forEach(function(Q){if(E=Q.length,E>1){if(T=Q[0],f)for(V=T.x,F=T.y,_=B;w>_;_++)I=_+1,J=_*D,z=I*D,C=b(J),c=G(J),Y=b(z),x=G(z),W.push(C*V,F,-c*V,Y*V,F,-x*V,0,F,0),Z.push(.5-.5*C,.5-.5*c,.5-.5*Y,.5-.5*x,.5,.5);for(o=0;E>o;o++){for(v=Q[o],V=T.x,a=v.x,F=T.y,U=v.y,u=L/K,L+=xh(T,v),H=L/K,_=B;w>_;_++)I=_+1,J=_*D,z=I*D,C=b(J),c=G(J),Y=b(z),x=G(z),A.push(C*a,U,-c*a,Y*a,U,-x*a,C*V,F,-c*V,Y*a,U,-x*a,Y*V,F,-x*V,C*V,F,-c*V),t.push(_/s,H,I/s,H,_/s,u,I/s,H,I/s,u,_/s,u),e&&_===B&&(S.push(0,F,0,0,U,0,C*a,U,-c*a,C*a,U,-c*a,C*V,F,-c*V,0,F,0),M.push(0,.5-F,0,.5-U,2*a,.5-U,2*a,.5-U,2*V,.5-F,0,.5-F)),n&&I===w&&(r.push(0,F,0,Y*a,U,-x*a,0,U,0,Y*a,U,-x*a,0,F,0,Y*V,F,-x*V),j.push(1,.5-F,1-2*a,.5-U,1,.5-U,1-2*a,.5-U,1,.5-F,1-2*V,.5-F));T=v}if(k)for(V=T.x,F=T.y,_=B;w>_;_++)I=_+1,J=_*D,z=I*D,C=b(J),c=G(J),Y=b(z),x=G(z),P.push(Y*V,F,-x*V,C*V,F,-c*V,0,F,0),m.push(.5-.5*Y,.5+.5*x,.5-.5*C,.5+.5*c,.5,.5)}}),{vs:A,uv:t,bottom_vs:P,bottom_uv:m,top_vs:W,top_uv:Z,from_vs:S,from_uv:M,to_vs:r,to_uv:j}}},!0),og(A,{"3d.move.mode":n,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"3d.clip.direction":null,"3d.clip.percentage":1,"3d.reflectable":!0,"shape.border.gradient.color":n,"edge.gradient.color":n,"edge.source.t3":n,"edge.target.t3":n,"light.type":Jk,"light.group":0,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":ei/4,"light.range":0,"light.exponent":1,"light.intensity":1,"light.rotation.enable":!1,"light.size":[100,100],"light.specular.disable":!1,"light.mask":Yb,"headlight.ambientIntensity":n,"wf.visible":!1,"wf.width":1,"wf.fog":!0,"wf.color":Gr,"wf.short":!1,"wf.mat":n,"wf.boundingBox":!1,"wf.material":null,"wf.geometry":!1,"wf.loadQuadWireframe":!1,"wf.combineTriangle":!0,batch:n,"static":n,"static.group":0,"transparent.mask":!1,brightness:n,"select.brightness":.7,"repeat.uv.length":n,"shadow.cast":!0,"shadow.receive":!0,"3d.clipbox":n,"3d.clipbox.mask":Yb,"3d.clipbox.group":0,"3d.clipbox.shape":"cube","effect.flow":!1,"effect.flow.gradient":"spread.horizontal","effect.flow.uvshape":"rect","effect.flow.size":512,"effect.flow.group":0,"effect.flow.intensity":1,"effect.flow.blend":n,"effect.flow.mask":Yb,bloom:!1,envmap:0,"envmap.probe":0,roughness:0,renderTextureSamples:4,alphaTest:.4,autorotate:!1,fixSizeOnScreen:!1,"texture.cache":!1,"hide.overlapping.group":n,"vector.dynamic":!1,"vector.dynamic.maxsize":2048,"texture.scale":1,"geometry.cache":!1,"highlight.mode":!1,"highlight.type":"hard","highlight.visible":!0,"highlight.width":.8,"highlight.color":"rgba(190, 210, 250, 1)","highlight.glow":.8,"highlight.strength":2,"color.empty":[0,0,0,0],"label.face":ll,"label.t3":n,"label.r3":n,"label.texture.scale":2,"label.rotationMode":aq,"label.light":!1,"label.blend":n,"label.reverse.flip":!1,"label.reverse.color":fb,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":ll,"label2.t3":n,"label2.r3":n,"label2.texture.scale":2,"label2.rotationMode":aq,"label2.light":!1,"label2.blend":n,"label2.reverse.flip":!1,"label2.reverse.color":fb,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":ll,"note.t3":n,"note.r3":n,"note.texture.scale":2,"note.rotationMode":aq,"note.light":!1,"note.blend":n,"note.reverse.flip":!1,"note.reverse.color":fb,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":ll,"note2.t3":n,"note2.r3":n,"note2.texture.scale":2,"note2.rotationMode":aq,"note2.light":!1,"note2.blend":n,"note2.reverse.flip":!1,"note2.reverse.color":fb,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,"part.boundingBox":!1,shape3d:n,"shape3d.color":tb,"shape3d.top.color":n,"shape3d.bottom.color":n,"shape3d.from.color":n,"shape3d.to.color":n,"shape3d.image":n,"shape3d.image.projection":n,"shape3d.top.image":n,"shape3d.bottom.image":n,"shape3d.from.image":n,"shape3d.to.image":n,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":n,"shape3d.side.to":n,"shape3d.smooth":n,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":n,"shape3d.opacity":n,"shape3d.reverse.flip":!1,"shape3d.reverse.color":fb,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":n,"shape3d.uv.scale":n,"shape3d.uv.rotation":n,"shape3d.uv.anchor":n,"shape3d.uv.union":n,"shape3d.top.uv.offset":n,"shape3d.top.uv.scale":n,"shape3d.top.uv.rotation":n,"shape3d.top.uv.anchor":n,"shape3d.bottom.uv.offset":n,"shape3d.bottom.uv.scale":n,"shape3d.bottom.uv.rotation":n,"shape3d.bottom.uv.anchor":n,"shape3d.from.uv.offset":n,"shape3d.from.uv.scale":n,"shape3d.from.uv.rotation":n,"shape3d.from.uv.anchor":n,"shape3d.to.uv.offset":n,"shape3d.to.uv.scale":n,"shape3d.to.uv.rotation":n,"shape3d.to.uv.anchor":n,"shape3d.top.cap":n,"shape3d.bottom.cap":n,"shape3d.start.angle":0,"shape3d.sweep.angle":Qd,"shape3d.point.epsilon":1e-6,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"shape3d.reflector":!1,"shape3d.reflector.color":"rgb(128,128,128)","shape3d.reflector.blur":0,"shape3d.reflector.blur.iterations":1,"shape3d.reflector.background":null,"shape3d.reflector.clip":.003,"shape3d.reflector.shadow":"scene","camera.type":"perspective","camera.aspect":1,"camera.fovy":n,"camera.ortho.width":n,"camera.near":n,"camera.far":n,"camera.background":0,"camera.renderSky":!0,"camera.renderShadowMap":!0,"camera.renderAxis":!1,"camera.renderGrid":!1,"camera.renderEdit":!1,"camera.onlySky":!1,"camera.skybox.blur":n,"skybox.blur.size":0,"skybox.blur.resolution":0,"texture.mipmap.max":n,"texture.filter":n,"texture.filter.min":n,"texture.filter.mag":n,"texture.wrap":n,"texture.flipY":!1,"points.image":"rect","points.color":"white","points.transparent":!1,"points.size":20,"points.opacity":1,"points.uv.scale":[1,1],"points.uv.offset":[0,0],"points.discard.selectable":!1,"all.light":!0,"all.visible":!0,"all.color":tb,"all.image":n,"all.blend":n,"all.opacity":n,"all.reverse.flip":!1,"all.reverse.color":fb,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":n,"all.uv.offset":n,"all.uv.scale":n,"all.uv.rotation":n,"all.uv.anchor":n,"all.uv.union":n,"all.discard.selectable":!0,"all.material":n,mat:n,"left.mat":n,"right.mat":n,"top.mat":n,"bottom.mat":n,"front.mat":n,"back.mat":n,"edge.source.anchor.elevation":n,"edge.target.anchor.elevation":n,"edge.source.offset.elevation":0,"edge.target.offset.elevation":0,"3d.bone.visible":!1},!0);var Sf,Dm=[0,0,0,0],$o=function(G){return G instanceof Gs},jk=function(Y){return[Y.x,Y.e||0,Y.y]},Ap=function(B,l,o){for(var l=cs(l||0),S=l[0],V=l[1],N=l[2];o--;)B.push(S,V,N)},Ei=function(U,R,G){for(var R=cs(R||0),c=R[0],D=R[1],h=R[2],I=R[3];G--;)U.push(c,D,h,I)},On=function(T,L,b){if(L)for(var r,h,k,I=L[0],p=L[1],N=L[2],O=L[4],M=L[5],u=L[6],P=L[8],e=L[9],B=L[10],q=L[12],V=L[13],s=L[14],Z=b.length,D=0,D=0;Z>D;D+=3)r=b[D],h=b[D+1],k=b[D+2],T.push(I*r+O*h+P*k+q,p*r+M*h+e*k+V,N*r+u*h+B*k+s);else To(T,b);return T},Aj=function(W,N,E){var I=N.s("light.intensity"),F=cs(N.s(xj)),t=F[0],C=F[1],e=F[2];1!==I&&(t*=I,C*=I,e*=I);var x=N.s("light.disabled");W.push(t,C,e,x?1:0),E.c.push(t,C,e),E.g.push(x?-1:N.s("light.group")),E.e.push(x?1:0)},uc=function(){var V=new Ri,u=new Cm;return function(Q,c){return V.copy(Q).applyEuler(c.getEuler(u)),[V.x,V.y,V.z]}}(),Jn=function(w,o){var D,n=Ar.for(o),W=n.directUniforms(),Y=w._lastLightUploadInfo={c:[],g:[],e:[]},f=w._headlightDirection;f&&3===f.length?D=f:"shadow"===f&&(D=w.shadowMap.getDirection()),D=D?Ri.normalizeArray(w._transformDirectionToViewSpace(null,D)):[0,0,0],W.uHeadlightDirection=D,W.uHeadlightRange=w._headlightRange;var J=W.uHeadlightAmbientIntensity=w._headlightAmbientIntensity,l=w._headlightIntensity,O=cs(w._headlightColor);1!==l&&(O=[O[0]*l,O[1]*l,O[2]*l]);var T;W.uHeadlightColor=Y.headlightColor=[O[0],O[1],O[2],(T=w._headlightDisabled)?1:0],Y.c.push(O[0],O[1],O[2]),Y.g.push(T?-1:w._headlightGroup),Y.e.push(T?1:0);var a=w._59O,M=w._spots,s=w._dirs,t=w._87I;if(a.length){var P=[],r=[],g=[];a.forEach(function(C){Aj(P,C,Y),To(r,w._transformPointToViewSpace(C.p3())),g.push(C.s("light.range"))}),W.uPointColor=P,W.uPointRange=g,W.uPointPosition=r}if(M.length){var p=[],j=[],m=[],G=[],x=[],u=[];M.forEach(function(Z){Aj(p,Z,Y),To(j,w._transformPointToViewSpace(Z.p3())),Z.s("light.rotation.enable")?To(x,w._transformDirectionToViewSpace(null,uc([0,0,1],Z))):To(x,w._transformDirectionToViewSpace(Z.p3(),Z.s("light.center"))),m.push(Z.s("light.range")),G.push(b(Z.s("light.angle")/2)),u.push(Z.s("light.exponent"))}),W.uSpotColor=p,W.uSpotRange=m,W.uSpotAngle=G,W.uSpotExponent=u,W.uSpotPosition=j,W.uSpotDirection=x}if(s.length){var v=[],$=[];s.forEach(function(f){Aj(v,f,Y),f.s("light.rotation.enable")?To($,w._transformDirectionToViewSpace(null,uc([0,0,1],f))):To($,w._transformDirectionToViewSpace(f.p3()))
}),W.uDirColor=v,W.uDirDirection=$}t.length&&t.forEach(function(o){Aj([],o,Y)}),W._lastLightMask=Yb,W._lastHeadlightAmbientIntensity=J},Uf=function(T,d,C,z){if(z===n&&(z=T._headlightAmbientIntensity),z!==d._lastHeadlightAmbientIntensity&&(d.uHeadlightAmbientIntensity=d._lastHeadlightAmbientIntensity=z),C!==d._lastLightMask){d._lastLightMask=C;var Y=T._lastLightUploadInfo;if(Y){var q,f,s,b=Y.g,A=Y.e,D=b.length,X=new Array(D),u=!1;for(f=0;D>f;f++)q=b[f],s=0>q||q>=32?1:C&1<<q?0:1,X[f]=s,s!==A[f]&&(u=!0);if(u){Y.e=A=X;var e=Y.c;d.uHeadlightColor=[e[0],e[1],e[2],A[0]];var G,J=T._59O,S=T._spots,$=T._dirs,j=3,k=1;if(D=J.length){for(f=0,G=[];D>f;f++)G.push(e[j++],e[j++],e[j++],A[k++]);d.uPointColor=G}if(D=S.length){for(f=0,G=[];D>f;f++)G.push(e[j++],e[j++],e[j++],A[k++]);d.uSpotColor=G}if(D=$.length){for(f=0,G=[];D>f;f++)G.push(e[j++],e[j++],e[j++],A[k++]);d.uDirColor=G}}}}},Fg=function(s,$){return Math.max(s.getRotateMinPhi()+xk,Math.min(s.getRotateMaxPhi()-xk,$))},Hf=function(){return.05+Ik()/2},wg=function(A,S,u,Z){var U,Y=A.getEye();return A.isOrtho()?(U=js(A.getCenter(),Y),U[0]+=Z[0],U[1]+=Z[1],U[2]+=Z[2]):U=Y,$n(S,u,Z,U)},$n=function(i,J,R,x){var q=Fc(i,J),F=js(x,R,!0),C=Fc(F,J);if(o(C)<xk)return O;var H=(q-Fc(R,J))/C;return[R[0]+F[0]*H,R[1]+F[1]*H,R[2]+F[2]*H]},Hl=function(i,e){return{x:2*i.x-e.x,y:2*i.y-e.y}},bi=function(l,B,g,L){var m,s;if(!l)return m=Tr(B.y-g.y,g.x-B.x),{x:B.x+L*G(m),y:B.y+L*b(m)};if(!g)return m=Tr(l.y-B.y,B.x-l.x),{x:B.x+L*G(m),y:B.y+L*b(m)};var A=js([l.x,l.y,0],[B.x,B.y,0],!0),P=js([g.x,g.y,0],[B.x,B.y,0],!0),v=-(A[0]+P[0])/2,p=-(A[1]+P[1])/2,x=N(v*v+p*p);if(xk>x)return m=Tr(l.y-B.y,B.x-l.x),{x:B.x+L*G(m),y:B.y+L*b(m)};var R=l.x-B.x,k=l.y-B.y,h=g.x-B.x,U=g.y-B.y,w=N(R*R+k*k),V=N(h*h+U*U);m=$(Fc(A,P))/2,s=A[1]*P[0]-A[0]*P[1]>0?-1:1,v/=x,p/=x;var c=L/G(m),Z=C(w,V)/b(m);x=Math.min(c,Z);var n={x:B.x+s*x*v,y:B.y+s*x*p};return g.b&&c>V/b(m)&&(n.adjust=!0),n},Ek=function(i){var O=i[1],R=i[2],T=i[3],y=i[6],U=i[7],c=i[11];i[1]=i[4],i[2]=i[8],i[3]=i[12],i[4]=O,i[6]=i[9],i[7]=i[13],i[8]=R,i[9]=y,i[11]=i[14],i[12]=T,i[13]=U,i[14]=c},Di=function(X){var r=X[0],j=X[1],$=X[2],y=X[3],T=X[4],u=X[5],i=X[6],Y=X[7],M=X[8],d=X[9],U=X[10],p=X[11],E=X[12],W=X[13],H=X[14],V=X[15],q=r*u-j*T,f=r*i-$*T,m=r*Y-y*T,F=j*i-$*u,B=j*Y-y*u,Q=$*Y-y*i,o=M*W-d*E,L=M*H-U*E,Z=M*V-p*E,v=d*H-U*W,A=d*V-p*W,x=U*V-p*H,n=q*x-f*A+m*v+F*Z-B*L+Q*o;return n?(n=1/n,X[0]=(u*x-i*A+Y*v)*n,X[1]=($*A-j*x-y*v)*n,X[2]=(W*Q-H*B+V*F)*n,X[3]=(U*B-d*Q-p*F)*n,X[4]=(i*Z-T*x-Y*L)*n,X[5]=(r*x-$*Z+y*L)*n,X[6]=(H*m-E*Q-V*f)*n,X[7]=(M*Q-U*m+p*f)*n,X[8]=(T*A-u*Z+Y*o)*n,X[9]=(j*Z-r*A-y*o)*n,X[10]=(E*B-W*m+V*q)*n,X[11]=(d*m-M*B-p*q)*n,X[12]=(u*L-T*v-i*o)*n,X[13]=(r*v-j*L+$*o)*n,X[14]=(W*f-E*F-H*q)*n,X[15]=(M*F-d*f+U*q)*n,void 0):O},cj=function(w,U){if(U){var D=U[0],L=U[1],N=U[2];w[12]=w[0]*D+w[4]*L+w[8]*N+w[12],w[13]=w[1]*D+w[5]*L+w[9]*N+w[13],w[14]=w[2]*D+w[6]*L+w[10]*N+w[14],w[15]=w[3]*D+w[7]*L+w[11]*N+w[15]}},Vr=function(_,W){if(W){var M=W[0],Q=W[1],X=W[2];_[0]=_[0]*M,_[1]=_[1]*M,_[2]=_[2]*M,_[3]=_[3]*M,_[4]=_[4]*Q,_[5]=_[5]*Q,_[6]=_[6]*Q,_[7]=_[7]*Q,_[8]=_[8]*X,_[9]=_[9]*X,_[10]=_[10]*X,_[11]=_[11]*X}},Tg=function(k,X,l){var d=X[0],m=X[1],W=X[2],b=X[3],e=X[4],p=X[5],_=X[6],M=X[7],v=X[8],K=X[9],Q=X[10],N=X[11],I=X[12],U=X[13],B=X[14],t=X[15],q=l[0],Y=l[1],L=l[2],x=l[3];return k[0]=q*d+Y*e+L*v+x*I,k[1]=q*m+Y*p+L*K+x*U,k[2]=q*W+Y*_+L*Q+x*B,k[3]=q*b+Y*M+L*N+x*t,q=l[4],Y=l[5],L=l[6],x=l[7],k[4]=q*d+Y*e+L*v+x*I,k[5]=q*m+Y*p+L*K+x*U,k[6]=q*W+Y*_+L*Q+x*B,k[7]=q*b+Y*M+L*N+x*t,q=l[8],Y=l[9],L=l[10],x=l[11],k[8]=q*d+Y*e+L*v+x*I,k[9]=q*m+Y*p+L*K+x*U,k[10]=q*W+Y*_+L*Q+x*B,k[11]=q*b+Y*M+L*N+x*t,q=l[12],Y=l[13],L=l[14],x=l[15],k[12]=q*d+Y*e+L*v+x*I,k[13]=q*m+Y*p+L*K+x*U,k[14]=q*W+Y*_+L*Q+x*B,k[15]=q*b+Y*M+L*N+x*t,k},yf=function(j,d,t,R){var w,W,M,e,H,X,l,x,v,C,$=d[0],B=d[1],Q=d[2],Z=R[0],F=R[1],b=R[2],D=t[0],m=t[1],s=t[2];return o($-D)<xk&&o(B-m)<xk&&o(Q-s)<xk?Ok(j):(l=$-D,x=B-m,v=Q-s,C=1/N(l*l+x*x+v*v),l*=C,x*=C,v*=C,w=F*v-b*x,W=b*l-Z*v,M=Z*x-F*l,C=N(w*w+W*W+M*M),C?(C=1/C,w*=C,W*=C,M*=C):(w=0,W=0,M=0),e=x*M-v*W,H=v*w-l*M,X=l*W-x*w,C=N(e*e+H*H+X*X),C?(C=1/C,e*=C,H*=C,X*=C):(e=0,H=0,X=0),j[0]=w,j[1]=e,j[2]=l,j[3]=0,j[4]=W,j[5]=H,j[6]=x,j[7]=0,j[8]=M,j[9]=X,j[10]=v,j[11]=0,j[12]=-(w*$+W*B+M*Q),j[13]=-(e*$+H*B+X*Q),j[14]=-(l*$+x*B+v*Q),j[15]=1,j)},nq=function(M,C,l,s,y){var _=1/hl(C/2),q=1/(s-y);return M[0]=_/l,M[1]=0,M[2]=0,M[3]=0,M[4]=0,M[5]=_,M[6]=0,M[7]=0,M[8]=0,M[9]=0,M[10]=(y+s)*q,M[11]=-1,M[12]=0,M[13]=0,M[14]=2*y*s*q,M[15]=0,M},Dp=function(O,u,m,v,w,Z,W){var d=1/(u-m),U=1/(v-w),$=1/(Z-W);return O[0]=-2*d,O[1]=0,O[2]=0,O[3]=0,O[4]=0,O[5]=-2*U,O[6]=0,O[7]=0,O[8]=0,O[9]=0,O[10]=2*$,O[11]=0,O[12]=(u+m)*d,O[13]=(w+v)*U,O[14]=(W+Z)*$,O[15]=1,O},Yn=function(b,J){var i=J[0],q=J[1],D=J[2],t=J[3],k=i*i+q*q+D*D+t*t,o=k?1/k:0;return b[0]=-i*o,b[1]=-q*o,b[2]=-D*o,b[3]=t*o,b},Yi=function(m,L){var C=L[0]+L[5]+L[10],Y=0;return C>0?(Y=2*Math.sqrt(C+1),m[3]=.25*Y,m[0]=(L[6]-L[9])/Y,m[1]=(L[8]-L[2])/Y,m[2]=(L[1]-L[4])/Y):L[0]>L[5]&L[0]>L[10]?(Y=2*Math.sqrt(1+L[0]-L[5]-L[10]),m[3]=(L[6]-L[9])/Y,m[0]=.25*Y,m[1]=(L[1]+L[4])/Y,m[2]=(L[8]+L[2])/Y):L[5]>L[10]?(Y=2*Math.sqrt(1+L[5]-L[0]-L[10]),m[3]=(L[8]-L[2])/Y,m[0]=(L[1]+L[4])/Y,m[1]=.25*Y,m[2]=(L[6]+L[9])/Y):(Y=2*Math.sqrt(1+L[10]-L[0]-L[5]),m[3]=(L[1]-L[4])/Y,m[0]=(L[8]+L[2])/Y,m[1]=(L[6]+L[9])/Y,m[2]=.25*Y),m},Zj=function(a,y,m){var z=y[0],b=y[1],n=y[2],h=y[3],P=z+z,p=b+b,K=n+n,c=z*P,O=z*p,U=z*K,s=b*p,L=b*K,$=n*K,v=h*P,F=h*p,g=h*K;return a[0]=1-(s+$),a[1]=O+g,a[2]=U-F,a[3]=0,a[4]=O-g,a[5]=1-(c+$),a[6]=L+v,a[7]=0,a[8]=U+F,a[9]=L-v,a[10]=1-(c+s),a[11]=0,a[12]=m[0],a[13]=m[1],a[14]=m[2],a[15]=1,a},Yp=function($,a){if($.isVREnabled()){var M=$.vr.getViewMatrix(a);if(M)return M}return $._camera?$._camera.getViewMatrix(a):yf(a?a:ib(),$._eye,$._center,$._up)},gi=function(Z,r){if(Z.isVREnabled()){var J=Z.vr.getProjectMatrix();if(J)return J}if(Z._camera)return Z._camera.getProjectMatrix();if(!r&&Z._computedProjectMatrix)return Bg(Z._computedProjectMatrix);var w=Z.getAspect(),z=Z._near,t=Z._far,h=ib();if(Z._ortho){var f=Z._orthoWidth/2,l=f/w;Dp(h,-f,f,-l,l,z,t)}else nq(h,Z._fovy,w,z,t);return h},Zc=function(H,D){if(!H)return O;var S=0,B=1,u=2,w=[],T=0,y=H.length,r=y/3;if(D){for(;y>T;T++)w[T]=0;for(T=0;T<D.length;T+=3){var Q=[],a=[],C=[];Q[S]=H[3*D[T+1]+S]-H[3*D[T]+S],Q[B]=H[3*D[T+1]+B]-H[3*D[T]+B],Q[u]=H[3*D[T+1]+u]-H[3*D[T]+u],a[S]=H[3*D[T+2]+S]-H[3*D[T+1]+S],a[B]=H[3*D[T+2]+B]-H[3*D[T+1]+B],a[u]=H[3*D[T+2]+u]-H[3*D[T+1]+u],C[S]=Q[B]*a[u]-Q[u]*a[B],C[B]=Q[u]*a[S]-Q[S]*a[u],C[u]=Q[S]*a[B]-Q[B]*a[S];for(var v=0;3>v;v++)w[3*D[T+v]+S]+=C[S],w[3*D[T+v]+B]+=C[B],w[3*D[T+v]+u]+=C[u]}}else for(T=0;r>T;T+=3){var Q=[],a=[],C=[];Q[S]=H[3*(T+1)+S]-H[3*T+S],Q[B]=H[3*(T+1)+B]-H[3*T+B],Q[u]=H[3*(T+1)+u]-H[3*T+u],a[S]=H[3*(T+2)+S]-H[3*(T+1)+S],a[B]=H[3*(T+2)+B]-H[3*(T+1)+B],a[u]=H[3*(T+2)+u]-H[3*(T+1)+u],C[S]=Q[B]*a[u]-Q[u]*a[B],C[B]=Q[u]*a[S]-Q[S]*a[u],C[u]=Q[S]*a[B]-Q[B]*a[S];for(var v=0;3>v;v++)w[3*(T+v)+S]=C[S],w[3*(T+v)+B]=C[B],w[3*(T+v)+u]=C[u]}for(T=0;y>T;T+=3){var o=[];o[S]=w[T+S],o[B]=w[T+B],o[u]=w[T+u];var s=N(o[S]*o[S]+o[B]*o[B]+o[u]*o[u]);0===s&&(s=xk),o[S]=o[S]/s,o[B]=o[B]/s,o[u]=o[u]/s,w[T+S]=o[S],w[T+B]=o[B],w[T+u]=o[u]}return new yr(w)},Gi=function(Y,o,H,B,z){return B||(B=o.createTexture()),H&&(z?(z.image=H,Y.createTexture(z,B)):Y.createTexture({image:H},B)),B},Nk=function(X,V,F){var l=new Uint8Array(F||4);return V=V||X.createTexture(),X.activeTexture(33984),Lf(X,V),dd(X,10241,9729),X.texImage2D(3553,0,6408,1,1,0,6408,5121,l),V},Wl=function(e,O,l){var P=new Uint8Array(l||4);return O=O||e.createTexture(),e.activeTexture(33984),e.bindTexture(34067,O),e.texParameteri(34067,10240,9729),e.texParameteri(34067,10241,9729),e.texImage2D(34069,0,6408,1,1,0,6408,5121,P),e.texImage2D(34070,0,6408,1,1,0,6408,5121,P),e.texImage2D(34071,0,6408,1,1,0,6408,5121,P),e.texImage2D(34072,0,6408,1,1,0,6408,5121,P),e.texImage2D(34073,0,6408,1,1,0,6408,5121,P),e.texImage2D(34074,0,6408,1,1,0,6408,5121,P),O},Ym=function(g){return g.createBuffer()},Lf=function(j,p){j.bindTexture(3553,p||j._emptyTexture)},dd=function(s,v,p){s.texParameteri(3553,v,p)},cr=function(S,t){var m=Ar.for(S).directState();m.polygonOffset.enabled=!0,m.polygonOffset.value=t},Gc=function(i){var $=Ar.for(i).directState();$.polygonOffset.enabled=!1},dh=function(c,V){if(V){var K=Ar.for(c).directState();K.color.clear=cs(V)}},yl=function(S,F,N){if(N!==F._lastClipboxEnabled){var x=S._boxClipperGroups,s=S._boxClipperShape,u=x?x.length:0,k=new Array(u);if(N)for(var U=0;u>U;U++)k[U]=N&1<<x[U]?s[U]:0;F._lastClipboxEnabled=N,F.uClipperShape=k}},Sq=yl,Vd=function(Q){var u=Ar.for(Q),d=u.directUniforms(),U=u.directAttribs();d.uFix=!0,U.aNormal=!1},Ml=function(M){var $=Ar.for(M),r=$.directUniforms();r.uFix=!1},yh=function(N,X,T,a,V,_,g){var I=Ar.for(N),Z=I.directState(),J=I.directUniforms();N._picking||(X?(J.uBlend=!0,J.uBlendColor=X):J.uBlend=!1,J.uLight=J.uFog=T==O?!0:T,fe(a)&&1!==a&&(J.uPartOpacity=a),J.uReverseFlip=V==O?!1:V,J.uFixPickReverseColor=_||fb),Z.cullFace.enabled=g?!0:!1},Ue=function(x){if(!x._picking){var k=Ar.for(x),V=k.directUniforms();V.uPartOpacity=1}},Pl=function(){var h=new f.Math.Matrix2d,Y=[1,0,0,0,1,0,0,0,0];return function($,j,J,n,y,r,a,f,G,o){var w=Ar.for($),z=w.directUniforms(),R=w.directAttribs();return j?(z.uTexture=!0,z.uDiscardSelectable=vd(J)?J:!0,R.aUv=eg($,n,y,O,2),o?(z.uBlendTexture=!0,z.uBlendSampler=o):(z.uBlendTexture=!1,z.uBlendSampler=$._emptyBlendTexture),z.uSampler=j,z.uUvMatrix=r||a||f||G?Ir(f,r,a,G,h).toArray9():Y,void 0):(z.uSampler=$._emptyTexture,z.uBlendSampler=$._emptyBlendTexture,void 0)}}(),Je=function(H,$){var V=Ar.for(H),Z=V.directUniforms(),_=V.directAttribs();H.activeTexture(33984),Lf(H,O),H.activeTexture(33985),Lf(H,O),$&&(_.aUv=!1,Z.uTexture=!1,Z.uSampler=H._emptyTexture,Z.uBlendTexture=!1,Z.uBlendSampler=H._emptyBlendTexture)},Io=function(u,H,L,P){var Z=H.getBrightness(L),V=L.s("alphaTest"),X=Ar.for(u),Y=X.directUniforms(),W=H._picking,B=!0;Z!=O&&1!==Z&&(Y.uBrightness=Z),Y.uAlphaTest=V,Y.shadowReceive=!W&&L.s("shadow.receive"),Y.shadowCull=!W&&!!L.s("shadow.cull"),Sq(H,Y,L.s("3d.clipbox")?Bi:L.s("3d.clipbox.mask"));var c=L.s("3d.clip.direction");if(c){var g=L.s("3d.clip.percentage");0===g&&(B=!1);var j=H.getData3dUI(L)._formatClipUniforms(c,g,L);Y.uClipPercent=j[1],Y.uClipDirection=j[0]}else Y.uClipDirection=0;if(u._blooming&&!L.s("bloom")&&(Y.blackout=!0),!W){if(H._flowObjects.length&&H.flowMap.resetDataFlowEnabld(L,Y),!P){var $=L.s("envmap");Y.uUseEnvMap=$?!0:!1,Y.roughness=L.s("roughness"),H._setEnvmapByProbeId(Y,L.s("envmap.probe"),$||.01),Uf(H,Y,L.s("light.mask"),L.s("headlight.ambientIntensity")),L._flipSide&&(X.directState().cullFace.frontFace=2304)}Y.uFog=L.s("shape3d.light")!=O}return B},qc=function(O,x,L,V){var X=Ar.for(O),e=X.directUniforms(),r=L.alphaTest;e.uAlphaTest=r===n?A.alphaTest:r;var d=x._picking;return e.shadowReceive=!d&&L.shadowReceive!==!1,Sq(x,e,L.clipboxMask===n?Yb:L.clipboxMask),e.blackout=O._blooming&&!L.bloom?!0:!1,d||(x._flowObjects.length&&x.flowMap.resetFlowUniform(L.effectFlowMask===n?Yb:L.effectFlowMask,e),V||(L.envmap!==n?(e.uUseEnvMap=!0,e.roughness=L.roughness||0,x._setEnvmapByProbeId(e,L.envmapProbe||0,L.envmap)):(e.uUseEnvMap=!1,e.envMapIntensity=0),Uf(x,e,L.lightMask===n?Yb:L.lightMask,L.headlightAmbientIntensity)),e.uFog=!0),!0},bm=function(U,i,D,h,v){var $=Ar.for(U),H=$.directUniforms(),I=$.directAttribs();!i||gr||Rb||U.lineWidth(i),D&&!U._picking&&(H.uFixPickReverseColor=D),h&&(I.aPosition=eg(U,h,v,O))},Gf=function(C,I,V,x){C&&(x&&(V*=x),C.calls++,C.vertices+=V,I==O||4===I?C.faces+=V/3:1===I?C.lines+=V/2:I===Vg.POINTS?C.points+=V:5===I||6===I?C.faces+=V-2:3===I?C.lines+=V-1:2===I&&(C.lines+=V))},ir=function(N,S,y,X,c){Sf&&(X=N[Sf]),c?N.drawArraysInstanced(X==O?4:X,S,y,c):N.drawArrays(X==O?4:X,S,y),Gf(N._renderInfo,X,y,c)},nr=function(u,M,N,n,d,h){Sf&&(n=u[Sf]),h?u.drawElementsInstanced(n==O?4:n,N,d==O?5123:d,M==O?0:2*M,h):u.drawElements(n==O?4:n,N,d==O?5123:d,M==O?0:2*M),Gf(u._renderInfo,n,N,h)},gs=function(y,Y,V){var X=34962;return y.bindBuffer(X,Y),V&&y.bufferData(X,V,35044),Y},Kg=function(q,n,L,c,Z){var n=eg(q,n,L,c,Z);return n.instanced=!0,n},eg=function(b,f,_,e,l){return _?Oq(b,34962,f,_):gs(b,f,_,e,l)},Mi=function(h,T,W){var u=34963;h.bindBuffer(u,T),W&&h.bufferData(u,W,35044)},_j=function(S,H,J){Oq(S,34963,H,J)},Oq=function(l,P,q,g){var r=g._bufId;r||(r=g._bufId=f.Math.generateIncreasingID());var q,m=l._bufPool;if((q=m[r])&&q._buf)l.bindBuffer(P,q._buf);else{var _=Ym(l);q=m[r]={_buf:_},l.bindBuffer(P,_),l.bufferData(P,g,35044);var R=5126;g instanceof Uint16Array?R=5123:g instanceof Int16Array?R=5122:g instanceof Uint32Array?R=5125:g instanceof Int32Array?R=5124:g instanceof Int8Array?R=5120:(g instanceof Uint8Array||g instanceof Uint8ClampedArray)&&(R=5121),_.glType=R}return q._fid=l._renderInfo.frame,q._buf},pp=function(F,q){q!=O&&q>=0&&F.enableVertexAttribArray(q)},Xg=function(C,z){z!=O&&z>=0&&C.disableVertexAttribArray(z)},Si=function(G,z){var c=G.getGL(),Y=Ar.for(c),h=Y.directUniforms();G._7O=G._8O.pop(),G._modelMatrix=G._modelMatrixStack.pop(),z&&(h.uModelViewMatrix=G._7O,G._6O=z,h.uNormalMatrix=z)},Ij=function(X,B){return B||(B=ib()),_c(B,X),Di(B),Ek(B),B},ns=function(h,d){var J=h.getGL(),W=h._7O,w=Ar.for(J),k=w.directUniforms();d?(h._8O.push(Bg(W)),h._modelMatrixStack.push(Bg(h._modelMatrix)),k.uModelMatrix=Tg(h._modelMatrix,h._modelMatrix,d),h._7O=Tg(W,W,d)):k.uModelMatrix=h._modelMatrix=Bg(kh),k.uModelViewMatrix=W,k.uNormalMatrix=Ij(W,h._6O)},ef={body:0,label:1,label2:2,note:3,note2:4,symbol:5},tl=10,wo=function(l,L,v,I,A,U){var z;if(v){var r=I._pickId;r||(r=I._pickId=L._pickIdUsed,L._pickIdUsed+=tl);var J,Y=ef[A];if(null!=Y)J=r+Y;else{var m=I._pickExtraPartMap;m||(m=I._pickExtraPartMap={}),(J=m[A])||(J=m[A]=L._pickIdUsed++)}L[J]||(L[J]={data:I.data,part:A}),z=$s(J)}else z=Dm;if(!U){var E=Ar.for(l),Z=E.directUniforms();Z.uFixPickReverseColor=z}return z},gn=wo,Yg=function(L,x,o){"target"!==o&&(o="source");var k="target"===o?x.getTargetAgent():x.getSourceAgent(),s="edge."+o+".";if(Cl(k)){var f=x.s(s+"anchor.x"),v=x.s(s+"anchor.elevation"),A=x.s(s+"anchor.y"),I=Xi(k,L.getMat(k)),J=k.getAnchor3d(),b=Qr([(f===n?.5:f)-J.x,(v===n?.5:v)-J.y,(A===n?.5:A)-J.z],I);return b[1]+=x.s(s+"offset.elevation"),b}var a=x.s(s+"index"),G=L.getData3dUI(k);if(!G.info||!G.info.list)return!1;if(a>=0){var h,i,F,w,K,T=G.info._lastPointsSegments,Y=T.points,d=T.segments,S=-1,H=-1;for(F=0,w=d?d.length:Y.length;w>F;F++){if(i=d?d.get(F):1,3===i)K=2;else if(4===i)K=3;else{if(5===i)continue;K=1}if(S+=K,H++,H===a){h=Y.get(S);break}}return h||(h=Y.get(Y.length-1)),[h.x,(h.e||0)+x.s(s+"offset.elevation"),h.y]}var m=x.s(s+"percent")||.5;if(m=Math.max(0,Math.min(m,1)),!G||!G.getCache)return!1;var p=G.getCache(),w=p[p.length-1].length,T=L.getLineOffset(k,m*w),b=T.point;return[b.x,b.y+x.s(s+"offset.elevation"),b.z]},xn=function(){var n={center:function(Y,a,k,I,V){var S=-a[1]/2,p={x:-a[0]/2,y:S,width:a[0],height:a[1]},m=_m(Y,p,k);return[m.x+I,-m.y-V,Q.getPosition3dGap()]},front:function(P,_,I,V,R){var w=-_[1]/2,x={x:-_[0]/2,y:w,width:_[0],height:_[1]},t=_m(P,x,I);return[t.x+V,-t.y-R,_[2]/2+Q.getPosition3dGap()]},back:function(i,N,O,D,z){var d=-N[0]/2,u=-N[1]/2,S={x:d,y:u,width:N[0],height:N[1]},L=_m(i,S,O);return[-L.x-D,-L.y-z,-N[2]/2-Q.getPosition3dGap()]},left:function(G,y,c,U,E){var g=-y[1]/2,S={x:-y[2]/2,y:g,width:y[2],height:y[1]},t=_m(G,S,c);return[-y[0]/2-Q.getPosition3dGap(),-t.y-E,t.x+U]},right:function(p,r,S,w,O){var b=-r[2]/2,k=-r[1]/2,U={x:b,y:k,width:r[2],height:r[1]},N=_m(p,U,S);return[r[0]/2+Q.getPosition3dGap(),-N.y-O,-N.x-w]},top:function(x,t,T,q,u){var s={x:-t[0]/2,y:-t[2]/2,width:t[0],height:t[2]},z=_m(x,s,T);return[z.x+q,t[1]/2+Q.getPosition3dGap(),z.y+u]},bottom:function(n,d,y,r,c){var k=-d[2]/2,m={x:-d[0]/2,y:k,width:d[0],height:d[2]},o=_m(n,m,y);return[o.x+r,-d[1]/2-Q.getPosition3dGap(),-o.y-c]}};return function(q,M,D,F,L,i){return n[F](q,M,D,L||0,i||0)}}(),zq=function(S,A,u,W,D,s,H,Z,B,_){if(D&&(A[0]+=D[0],A[1]+=D[1],A[2]+=D[2]),cj(S,u),Z){var i=ib();if(cl(i,B,_),Qr(A,i),cj(S,A),S.auto=Z,S.pos=Qr([0,0,0],S),s){var k=S.mat2=ib();cl(k,s,H)}}else cl(S,B,_),cj(S,A),W===wq?mk(S,-th):W===hb?mk(S,th):W===pj?ii(S,-th):W===ri?ii(S,th):W===Yh&&mk(S,ei),cl(S,s,H);return S},Cn=function(P,e){var E=e.auto,A=e.mat2,M=P.gv;if(E){var D,Z=ib(),h=[0,0,0,0];D="string"==typeof E?[E.indexOf("x")<0?M._eye[0]:M._center[0],E.indexOf("y")<0?M._eye[1]:M._center[1],E.indexOf("z")<0?M._eye[2]:M._center[2]]:M._eye,Yi(h,yf(ib(),D,M._center,M._up)),Zj(Z,Yn(h,h),e.pos),A&&Tg(Z,Z,A),ns(M,Z)}else ns(M,e)},Mp=function(I,$,h,f,e){var L=I.s,l=I.gv,K=l.getGL(),u=l._buffer,B=l._1O,T=Ar.for(K),n=T.directAttribs();Gi(l,K,so,B),Cn(I,h),yh(K,L($+".blend"),L($+".light"),L($+".opacity"),L($+".reverse.flip"),L($+".reverse.color"),L($+".reverse.cull")),Pl(K,B,e,u.uv,Td),n.aPosition=eg(K,u.vs,f,O),n.aNormal=eg(K,u.ns,el,O),_j(K,u.is,Lr),nr(K,0,Lr.length),Je(K,B),Ue(K),Si(l)},hp=function(Y,V,g){var t=Y.gv,X=Y.data,v=Y[V]={blend:t.getBodyColor(X)||t.getFaceBlend(X,V),light:t.getFaceLight(X,V),color:t.getFaceColor(X,V),opacity:t.getFaceOpacity(X,V),transparent:t.getFaceTransparent(X,V),reverseFlip:t.getFaceReverseFlip(X,V),reverseColor:t.getFaceReverseColor(X,V),reverseCull:t.getFaceReverseCull(X,V),texture:t.getFaceImage(X,V),blendTexture:t.getFaceBlendImage(X,V),discardSelectable:t.getFaceDiscardSelectable(X,V),material:t.getFaceMaterial(X,V)};if("csg"!==V){v.uv=t.getFaceUv(X,V)||g&&g[V+"Uv"],v.uvScale=t.getFaceUvScale(X,V)||g&&g[V+"UvScale"],v.uvOffset=t.getFaceUvOffset(X,V)||g&&g[V+"UvOffset"],v.uvRotation=t.getFaceUvRotation(X,V)||g&&g[V+"uvRotation"],v.uvAnchor=t.getFaceUvAnchor(X,V)||g&&g[V+"uvAnchor"];var I=t.getFaceMat(X,V);if(I){var A=Xi(X,I);X.appendAnchorMatrix3d(A),v.mat=A}}return v},Lm=function(J,i,k,U,n){var w=J[U];if(w){var p=J.data,H=J.gv;if(!H._picking&&w.material){var G={mesh:{vs:w.vs,ns:w.ns,uv:w.tuv},mat:w.material};H._prefabRenderer.render(i,G,p)}else{if(!n(w.transparent))return;var C=H._buffer,X=H.getTexture(w.texture,p,U),z=H.getTexture(w.blendTexture,p),T=Ar.for(i),s=T.directUniforms(),l=T.directAttribs();Pl(i,X,w.discardSelectable,C.uv,w.tuv,w.uvOffset,w.uvScale,w.uvRotation,w.uvAnchor,z),yh(i,w.blend,w.light,w.opacity,w.reverseFlip,w.reverseColor,w.reverseCull),w.cs&&!H._batchColorDisabled?(s.uBatchColor=!0,l.aBatchColor=eg(i,C.batchColor,w.cs,k.aBatchColor,4)):s.uDiffuse=w.color||A["color.empty"],l.aPosition=eg(i,C.vs,w.vs,O),l.aNormal=eg(i,C.ns,w.ns,O),ir(i,0,w.vs.length/3),w.cs&&!H._batchColorDisabled&&(s.uBatchColor=!1,Xg(i,k.aBatchColor)),Ue(i),Je(i,X)}}},Gl=function(T,M,b){Se(T)?T.forEach(function(U){Gl(U,M,b)}):Vp(T)?Gl(Xb(M,T),M,b):Yo(T)?T.model3d?Q.traverse(T,function(i){i.mesh&&b.push(i.mesh)},null,"comps"):T.shape3d?Gl(T.shape3d,M,b):b.push(T):b.push(T)},Xl=function(){for(var j=50,Q=arguments.length,W=[],p=0;Q>p;p++)W[p]=arguments[p];Kh[Qp]="Time : "+(new Date).toLocaleString()+", Info :"+W.join(", "),Qp=(Qp+1)%j,console.error("Failed to create shader.")},Ir=function(){var C=new Tc.Matrix2d;return function(G,R,P,H,z){return z||(z=C),z.identity(),H&&z.translate(-H[0],-H[1]),P&&z.scale(P[0],P[1]),G&&z.rotate(G),H&&z.translate(H[0],H[1]),R&&z.translate(R[0],R[1]),z}}(),Bb=function(y,d,S,K,u,j){var l,z,C,J,V,v,k,c,o,O,T,s=[K-d,u-S],x=y?y.length:0;for(C=0;x>C;C++){for(J=2,l=y[C],V=l[0],v=l[1];J+1<l.length;){if(k=l[J],c=l[J+1],z=Vj(d,S,K,u,V,v,k,c,!0)){o=[k-V,c-v],O=xh(o),o[0]/=O,o[1]/=O,O=Fc(s,o),O=O>0?j:-j,T=[o[0]*O,o[1]*O];break}V=k,v=c,J+=2}if(T)break}if(T)for(K=d+T[0],u=S+T[1],C=0;x>C;C++)for(J=2,l=y[C],V=l[0],v=l[1];J+1<l.length;){if(k=l[J],c=l[J+1],z=Vj(d,S,K,u,V,v,k,c,!0))return[0,0];V=k,v=c,J+=2}return T?T:[K-d,u-S]},_p=function(v){return"nearest"===v?9728:"linear"===v?9729:v},ch=f.graph3d={WebGLConstants:Vg},cf=function($,k,B){vn(p+".graph3d."+$,k,B)},mq="~!<yfusfw!+!yjsubNudfkpsQv!>!opjujtpQ`mh!?zepc/tw/qbNxpmg=!fevmdoj$!?zepc/tw/qbNxpebit=!fevmdoj$!gjeof$!~!<fdobutjEfojMb!>!fdobutjEfojMw!|!*itbEv)!gj!ITBE!gfegj$!gjeof$!~!<ttfouihjsCidubCb!>!ttfouihjsCidubCw!|!*ttfouihjsCidubCv)!gj!TTFOUIHJSCIDUBC!gfegj$!gjeof$!~!<eofmCidubCb!>!eofmCidubCw!|!*eofmCidubCv)!gj!EOFMCIDUBC!gfegj$!gjeof$!~!<spmpDidubCb!>!spmpDidubCw!|!*spmpDidubCv)!gj!SPMPDIDUBC!gfegj$!gjeof$!~!<**1/2!-wVb)4dfw!+!yjsubNwVv)3dfw!>!wVw!|!*fsvuyfUv)!gj!ftmf$!<*y/wVb!-**1/2!-wVb)4dfw!+!yjsubNwVv)3dfw)4dfw!>!wVw!QJMD`WV!gfegj$!<*efnspgtobsu!+!yjsubNmfepNv)4dfw!>!opjujtpQemspXw!<*yfusfw)4dfw!>!opjujtpQwNw!gjeof$!<**1/2!-mbnspOudfkcp)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!ftmf$!<**1/2!-mbnspOudfkcp)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!ftmf!~!<**1/2!-mbnspOw!+!n)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!<**^3]n!-^3]n)upe!-*^2]n!-^2]n)upe!-*^1]n!-^1]n)upe)4dfw!0!mbnspOudfkcp!>!mbnspOw!<*!efdobutoJyjsubNb!)4ubn!>!n!4ubn!|!*fdobutoJftVv)!gj!FDOBUTOJIDUBC!gfegj$!<efnspgtobsu!+!yjsubNxfjWmfepNv!>!yfusfw!5dfw!gjeof$!~!<efnspgtobsu!+!efdobutoJyjsubNb!>!efnspgtobsu!|!*fdobutoJftVv)!gj!FDOBUTOJIDUBC!gfegj$!<*mbnspOb)4dfw!>!mbnspOudfkcp!4dfw!<*opjujtpQb)4dfw!>!opjujtpQmbdpMw!<*1/2!-opjujtpQb)5dfw!>!efnspgtobsu!5dfw!|!*ejpw)ojbn!ejpw!?ebfi/tw/qbNxpmg=!fevmdoj$!?ebfi/tw/qbNxpebit=!fevmdoj$!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw!<fdobutjEfojMb!ubpmg!fuvcjsuub!<itbEv!mppc!nspgjov!ITBE!gfegj$!gjeof$!<^TUIHJM`UPQT`NVO]opjudfsjEupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]opjujtpQupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]spmpDupqTv!5dfw!nspgjov!1!?!TUIHJM`UPQT`NVO!gj$!gjeof$!<^TUIHJM`UOJPQ`NVO]opjujtpQuojpQv!4dfw!nspgjov!<^TUIHJM`UOJPQ`NVO]spmpDuojpQv!5dfw!nspgjov!1!?!TUIHJM`UOJPQ`NVO!gj$!gjeof$!<^TUIHJM`SJE`NVO]opjudfsjEsjEv!4dfw!nspgjov!<^TUIHJM`SJE`NVO]spmpDsjEv!5dfw!nspgjov!1!?!TUIHJM`SJE`NVO!gj$!<opjujtpQmbdpMw!4dfw!hojzsbw!<opjujtpQemspXw!4dfw!hojzsbw!<opjujtpQwNw!4dfw!hojzsbw!<mbnspOw!4dfw!hojzsbw!<yjGv!mppc!nspgjov!gjeof$!?ebfi/tw/hojdobutoj=!fevmdoj$!HOJDOBUTOJ`FTV!fojgfe$!<fdobutoJftVv!mppc!nspgjov!FDOBUTOJIDUBC!gfegj$!gjeof$!<wVw!3dfw!hojzsbw!ftmf$!<wVw!4dfw!hojzsbw!QJMD`WV!gfegj$!gjeof$!<eofmCidubCw!4dfw!hojzsbw!<eofmCidubCb!4dfw!fuvcjsuub!<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw!<ttfouihjsCidubCb!ubpmg!fuvcjsuub!<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!gjeof$!<spmpDidubCw!5dfw!hojzsbw!<spmpDidubCb!5dfw!fuvcjsuub!<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<wVb!3dfw!fuvcjsuub!<opjujtpQb!4dfw!fuvcjsuub!<mbnspOb!4dfw!fuvcjsuub!<yjsubNmbnspOv!5ubn!nspgjov!<yjsubNxfjWmfepNv!5ubn!nspgjov!<yjsubNmfepNv!5ubn!nspgjov!<yjsubNxfjWv!5ubn!nspgjov!<yjsubNudfkpsQv!5ubn!nspgjov!<yjsubNwVv!4ubn!nspgjov!<fsvuyfUeofmCv!mppc!nspgjov!<fsvuyfUv!mppc!nspgjov!YJGFSQ$!00^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",wk="~!<eJ!>!spmpDhbsG`mh!~!<spmpDsfmqnbTwv!>+!eJ!<*zy/wVw!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw!|!*fsvuyfUeofmCv)!gj!gjeof$!~!<ttfouihjsCidubCw!>+!chs/eJ!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~!<ttfouihjsCv!>+!chs/eJ!|*1/2!>a!ttfouihjsCv)gj!?zepc/tg/hpg=!fevmdoj$!~!~!<zujdbqPusbQv!>+!b/eJ!|*1/2!>a!zujdbqPusbQv)gj!~!gjeof$!~!<zujtofuoJqbNwof!+!{zy/spmpDwof!>,!chs/eJ!gjeof$!<*spmpDwof)sbfojMpUmfyfUqbNwof!>!spmpDwof!<**{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv)fcvDfsvuyfu!>!spmpDwof!5dfw!ftmf$!<**ttfoihvps!-*{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv)WVfcvDfsvuyfu)CHStpUsbfojM!>!spmpDwof!5dfw!WV`FCVD`FQZU`QBNWOF!gfegj$!gjeof$!<*mbnspOemspx!-yfusfWpUbsfnbd)udfmgfs!>!dfWudfmgfs!4dfw!ftmf$!<***mbnspOemspx!-yfusfWpUbsfnbd)udfmgfs!-ubvRqbnwoFv)spudfWfubups)f{jmbnspo!>!dfWudfmgfs!4dfw!FUBUPS`QBNWOF!gfegj$!<*yjsubNxfjWv!-O)opjudfsjEnspgtobsUftsfwoj!>!mbnspOemspx!4dfw!<*opjujtpQbsfnbDv!.!opjujtpQemspXw)f{jmbnspo!>!yfusfWpUbsfnbd!4dfw!|*qbNwoFftVv)!gj!QBNWOF`FTV!gfegj$!gjeof$!~!~!~!~!<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ!<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt!|*^j]fmhoBupqTv!?!udfggFupqt)gj!<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg!<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw!|*1/1!?!fhobSm)!gj!~!<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm!|*1/1!?!^j]fhobSupqTv)!gj!<1/2!>!fhobSm!ubpmg!<^j]opjujtpQupqTv!.!opjujtpQwNw!>!spudfWm!4dfw!|*1/1!>>!x/^j]spmpDupqTv)gj!|!*,,j!<TUIHJM`UPQT`NVO!=!j!<1>j!uoj)spg!1!?!TUIHJM`UPQT`NVO!gj$!gjeof$!~!~!~!<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ!|*1/1!?!fhobSm)!gj!~!<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm!|*1/1!?!^j]fhobSuojpQv)!gj!<1/2!>!fhobSm!ubpmg!<^j]opjujtpQuojpQv!.!opjujtpQwNw!>!spudfWm!4dfw!|*1/1!>>!x/^j]spmpDuojpQv)gj!|!*,,j!<TUIHJM`UOJPQ`NVO!=!j!<1>j!uoj)spg!1!?!TUIHJM`UOJPQ`NVO!gj$!gjeof$!~!~!<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ!|*1/1!>>!x/^j]spmpDsjEv)gj!|!*,,j!<TUIHJM`SJE`NVO!=!j!<1>j!uoj)spg!1!?!TUIHJM`SJE`NVO!gj$!~!<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ!gjeof$!~!<fvmbWxpebit!+!zujtofuoJxpebit!.!1/2!>+!nsfUusfcnbm!~!<osvufs!<esbdtje!|!*1/1!>>!fvmbWxpebit!%%!mmvDxpebit)!gj!<*esppDxpebit!-tvjebSxpebit!-tbjCxpebit!-f{jTxpebit!-qbNxpebit)xpebiTufh!.!1/2!>!fvmbWxpebit!ubpmg!|!*fwjfdfSxpebit)!gj!QBNXPEBIT`FTV!gfegj$!~!<*1/2!-fhobSuihjmebfIv0*opjujtpQwNw)iuhofm)ojn!.!1/2!>+!nsfUusfcnbm!|*1/1!?!fhobSuihjmebfIv)gj!<*1/1!-zujtofuoJuofjcnBuihjmebfIv!,!*zujtofuoJuofjcnBuihjmebfIv!.!1/2)!+!nsfUusfcnbm)ybn!>!nsfUusfcnbm!<*opjudfsjEuihjmebfIv.!-O)upe!>!nsfUusfcnbm!ftmf!<*M.!-O)upe!>!nsfUusfcnbm!*1/1!>>!{/opjudfsjEuihjmebfIv!%%!1/1!>>!z/opjudfsjEuihjmebfIv!%%!1/1!>>!y/opjudfsjEuihjmebfIv)!gj!<nsfUusfcnbm!ubpmg!|*1/1!>>!x/spmpDuihjmebfIv)gj!?zepc/tg/qbNxpmg=!fevmdoj$!|!*uihjMv)!gj!~!gjeof$!~!<spmpDeofmCv!>+!eJ!|*eofmCv)gj!ftmf$!~!<spmpDeofmCv!>+!eJ!|*eofmCv)gj!ftmf!~!<eofmCidubCw!>+!chs/eJ!|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~!~!<esbdtje!|*1/1!>>!x/eJ)gj!gjeof$!<ftvggjEv!>!eJ!ftmf$!~!<ftvggjEv!>!eJ!|ftmf~!<spmpDidubCw!>!eJ!|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|!ftmf!~!<spmpDwv!>!eJ!|*fsvuyfUv)gj!|!ftmf!~!<spmpDftsfwfSldjQyjGv!>!eJ!|*qjmGftsfwfSva!%%!ldbCtj)gj!~!<O.!>!O!|*ldbCtj)gj!<fvsu!;!ftmbg!@!hojdbGuopsG`mh!>!ldbCtj!mppc!<F.!>!M!4dfw!<*opjujtpQwNw.)f{jmbnspo!>!F!4dfw!<*mbnspOw)f{jmbnspo!>!O!4dfw!|!ftmf!~!gjeof$!~!~!<ftvggjEv!>!eJ!|ftmf!~!<esbdtje!|*1/1!>>!x/ftvggjEv)gj!|!*fdobutjEitbEv!?!*fdobutjEqbHitbEv!-fdobutjEfojMw)epn!%%!itbEv)!gj!ITBE!gfegj$!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~!<spmpDftsfwfSldjQyjGv!>!eJ!|!ftmf!~!<spmpDidubCw!>!eJ!|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|!*yjGv)!gj!<eJ!5dfw!~!<osvufs!<*1/2!-1/1!-1/1!-1/1)5dfw!>!spmpDhbsG`mh!|!*uvpldbmc)!gj!?zepc/tg/ypcqjmd=!fevmdoj$!?zepc/tg/opjudfsjEqjmd=!fevmdoj$!~!~!~!<esbdtje!|!*utfUbiqmBv!>=!b/spmpDwv)!gj!|!ftmf!~!~!<esbdtje!|!*1/1!>>!b/spmpDwv)!gj!|!*uofsbqtobsUv)!gj!gjeof$!<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv!ftmf$!<*zy/wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv!QJMD`WV!gfegj$!|!*fsvuyfUv)!gj!<spmpDwv!5dfw!|!*ejpw)ojbn!ejpw!<uvpldbmc!mppc!nspgjov!?ebfi/tg/qbNxpmg=!fevmdoj$!gjeof$!?TGopjudfmgfSwoFfcvd=!fevmdoj$!~!<*{zy/*yjsubn!+!*1/1!-sje)5dfw))f{jmbnspo!osvufs!|!*yjsubn!5ubn!oj!-sje!4dfw!oj)opjudfsjEnspgtobsUftsfwoj!4dfw!gjeof$!~!<*x/fvmbw!-**SPUDBG`BNNBH)4dfw!-{zy/fvmbw)xpq)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!ftmf$!~<*!b/fvmbw!-*!*!*!*!9142411/1!)4dfw!-chs/fvmbw!)mbvrFobiUttfm!)4dfw!-3:/32!+!chs/fvmbw!-*!661/1!)4dfw!.!661/2!+!*!*!77725/1!)4dfw!-chs/fvmbw!)xpq!)yjn!)5dfw!osvufs!|!*!fvmbw!5dfw!oj!)CHStpUsbfojM!5dfw!~!<*b/fvmbw!-****65151/1)4dfw!-chs/fvmbw)mbvrFobiUttfm)4dfw!-9194::4881/1!+!chs/fvmbw!-**5/3)4dfw!-*5218342361/1)4dfw!,!79:387985:/1!+!chs/fvmbw)xpq)yjn)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!WV`FCVD`FQZU`QBNWOF!gfegj$!gjeof$!~!<{zy/*!*x/ubvr!-{/ubvr.!-z/ubvr.!-y/ubvr.)5dfw!-wr!)ubvRumvn!osvufs!<*!*1/1!-dfw)5dfw!-ubvr!)ubvRumvn!>!wr!5dfw!|!*!dfw!4dfw!-ubvr!5dfw!)spudfWfubups!4dfw!~!<*!{/3r!+!{/2r!.!z/3r!+!z/2r!.!y/3r!+!y/2r!.!x/3r!+!x/2r!-z/3r!+!y/2r!.!y/3r!+!z/2r!,!x/3r!+!{/2r!,!{/3r!+!x/2r!-y/3r!+!{/2r!.!{/3r!+!y/2r!,!x/3r!+!z/2r!,!z/3r!+!x/2r!-{/3r!+!z/2r!.!z/3r!+!{/2r!,!x/3r!+!y/2r!,!y/3r!+!x/2r)5dfw!osvufs!|!*3r!5dfw!-2r!5dfw)ubvRumvn!5dfw!<ubvRqbnwoFv!5dfw!nspgjov!FUBUPS`QBNWOF!gfegj$!<1/3!>!SPUDBG`BNNBH!ubpmg!utopd!QBNWOF`FTV!gfegj$!?ebfi/tg/qbNxpebit=!fevmdoj$!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw!<fdobutjEqbHitbEv!ubpmg!nspgjov!<fdobutjEitbEv!ubpmg!nspgjov!<itbEv!mppc!nspgjov!ITBE!gfegj$!?ebfi/tg/hpg=!fevmdoj$!?ebfi/tg/ypcqjmd=!fevmdoj$!?hojldbq=!fevmdoj$!gjeof$!<^TUIHJM`UPQT`NVO]opjudfsjEupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]opjujtpQupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]fhobSupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]fmhoBupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]uofopqyFupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]spmpDupqTv!5dfw!nspgjov!1!?!TUIHJM`UPQT`NVO!gj$!gjeof$!<^TUIHJM`UOJPQ`NVO]opjujtpQuojpQv!4dfw!nspgjov!<^TUIHJM`UOJPQ`NVO]fhobSuojpQv!ubpmg!nspgjov!<^TUIHJM`UOJPQ`NVO]spmpDuojpQv!5dfw!nspgjov!1!?!TUIHJM`UOJPQ`NVO!gj$!gjeof$!<^TUIHJM`SJE`NVO]opjudfsjEsjEv!4dfw!nspgjov!<^TUIHJM`SJE`NVO]spmpDsjEv!5dfw!nspgjov!1!?!TUIHJM`SJE`NVO!gj$!gjeof$!<eofmCidubCw!4dfw!hojzsbw!<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw!<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!gjeof$!<spmpDidubCw!5dfw!hojzsbw!<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<opjudfsjEuihjmebfIv!4dfw!nspgjov!<spmpDuihjmebfIv!5dfw!nspgjov!<zujtofuoJuofjcnBuihjmebfIv!ubpmg!nspgjov!<fhobSuihjmebfIv!ubpmg!nspgjov!<opjujtpQemspXw!4dfw!hojzsbw!<opjujtpQbsfnbDv!4dfw!nspgjov!<yjsubNxfjWv!5ubn!nspgjov!gjeof$!gjeof$!<qbNwoFv!fcvDsfmqnbt!nspgjov!ftmf$!<ttfoihvps!ubpmg!nspgjov!<qbNwoFv!E3sfmqnbt!nspgjov!WV`FCVD`FQZU`QBNWOF!gfegj$!<zujtofuoJqbNwof!ubpmg!nspgjov!<qbNwoFftVv!mppc!nspgjov!QBNWOF`FTV!gfegj$!<opjujtpQmbdpMw!4dfw!hojzsbw!<opjujtpQwNw!4dfw!hojzsbw!<mbnspOw!4dfw!hojzsbw!<ftvggjEv!5dfw!nspgjov!<zujdbqPusbQv!ubpmg!nspgjov!<ttfouihjsCv!ubpmg!nspgjov!<uihjMv!mppc!nspgjov!<spmpDeofmCv!5dfw!nspgjov!<eofmCv!mppc!nspgjov!?ebfi/tg/opjudfsjEqjmd=!fevmdoj$!OPJUDFSJE`QJMD!fojgfe$!<sfmqnbTeofmCv!E3sfmqnbt!nspgjov!<sfmqnbTv!E3sfmqnbt!nspgjov!gjeof$!<wVw!3dfw!hojzsbw!ftmf$!<wVw!4dfw!hojzsbw!QJMD`WV!gfegj$!<fsvuyfUeofmCv!mppc!nspgjov!<fsvuyfUv!mppc!nspgjov!<uofsbqtobsUv!mppc!nspgjov!<utfUbiqmBv!ubpmg!nspgjov!<spmpDftsfwfSldjQyjGv!5dfw!nspgjov!<qjmGftsfwfSv!mppc!nspgjov!<yjGv!mppc!nspgjov!<fmcbudfmfTesbdtjEv!mppc!nspgjov!YJGFSQ$!00";og(Q,{setBatchInfo:function(x,J){Cc[x]=J},getBatchInfo:function(W){return Cc[W]},getBatchInfoMap:function(){return Cc},setBatchInfoMap:function(J){Cc=J}},!0);var Zm=[1,1,1],lh=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Xo=[1,0,0,0,0,1,0,1,1,1,1,0],cd=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],sp=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],gj=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],wb=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],te=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],Uk=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],go=function($,E){var Z=$._40Q;Z.each(function(N){N.ivBatch(E)})},$h=function(G,V,i,x){var p=i._id,H=V[p];if(H){var d=H.batch,h=G[d],W=h.ds,O=H.index;if(h.invalidate=!0,delete V[p],W.splice(O,1),$d(W)){var Y=x.getBatchInfo(d)||ui;return Y.keepData!==!1&&h.ms&&h.ms.length?(h.ms=[],h.ics&&(h.ics=[]),h.ps&&(h.ps=[]),void 0):(delete G[d],void 0)}for(var l=O,E=H.begin,R=H.size;O<W.length;O++)H=V[W[O]._id],H.index--,H.begin-=R;if(h.ms&&h.ms.length)return h.ms.splice(16*l,16),h.ics&&h.ics.splice(4*l,4),h.ps&&h.ps.splice(4*l,4),void 0;var J=3*E,g=3*R,u=4*E,N=4*R,P=h.vs,K=h.ps,_=h.uv,k=h.cs,Q=h.bs,S=h.rs,o=h.ns,s=h.ls;P.splice(J,g),K.splice(u,N),_&&_.splice(2*E,2*R),k&&k.splice(u,N),Q&&Q.splice(J,g),S&&S.splice(E,R),o&&o.splice(J,g),s&&s.splice(E,R)}},io=function(n,V,A,C,Q){if(!C)return O;var y=V[C];if(!y){var g=Q.getBatchInfo(C)||ui,_=g.image||g.material?[]:O;y=V[C]={vs:[],ns:[],uv:_,cs:_?O:g.color?O:[],bs:g.blend?[]:O,ps:[],rs:g.brightness?[]:O,ds:[],ms:g.instanced?[]:O,ics:_?O:g.color||!g.instanced?O:[]}}return y.invalidate=!0,n[A._id]={index:y.ds.length,begin:y.vs.length/3,batch:C},y.ds.push(A),y
},op=function(N,R){return R!=O&&1!==R?[N[0]*R,N[1]*R,N[2]*R,N[3]]:N},ym=function(G){var Q=G.shapeModel;Q||(Q=Xb(G)),Q&&(Q._ctlineModel=[],Q._lineModel=n)},Hg=function(){var k;return function(O,h,B){var C=O.getData3dUI(h),j=C.shapeModel;if(j||(j=Xb(C)),j||!C.shapeName){var G,A=h.s("wf.combineTriangle");if(B.geometry){if(!j&&(h instanceof f.Node&&!(h instanceof f.Shape)?(k||(k={vs:Qj,is:vo,uv:id}),j=k):j=[C.left,C.front,C.right,C.back,C.top,C.bottom],!j))return n;if(A){var U=h.s("wf.normEpsilon");isNaN(U)&&(U=2),A=0|Math.min(3,Math.max(1,isNaN(A)?1:A)),G=Nr[A-1](j,C,180/(Math.PI*U))}else G=Jf(j,C);if(!G||0===G.length)return}else if(G=B.short?Wo:ue,h.s("wf.boundingBox")){var q=C.getBoundingBox(!0);if(q){var _=(new pd).scale(q.max.clone().sub(q.min)).setPosition(q.max.clone().add(q.min).divideScalar(2)).toArray();G=On([],_,G)}}var X,r,V,S=O.getBrightness(h),N=h.s("bloom"),H=h.s("3d.reflectable"),T=cs(B.color||"white"),J=T[3]<1,D=Math.ceil(B.width)||1,P=h.s("3d.clipbox")?Bi:h.s("3d.clipbox.mask"),o=h.s("wf.fog"),Z=h.getRenderLayer(),s=O._40Q.get(Z),p=h.s("wf.material"),b=s.wireframeIndexMap,M=s.wireframeModelMap,t=h.s("batch"),i=h.s("3d.clip.direction");if(p||i){if(i){if(r=h.s("3d.clip.percentage"),0===r)return;V=C._formatClipUniforms(i,r,h)}X="_"+h._id}else X=t?(J?"T":"O")+t:(J?"T":"O")+(N?"_1":"_0")+(H?"1_":"0_")+P+"_"+D+(o?"1_":"0_");var d=M[X];d||(d=M[X]={vs:[],cs:[],ps:[],ds:[],T:J,B:N,clipboxMask:P,reflectable:!!H,W:D,batch:t,fog:o}),p&&(d.material=p),d.invalidate=!0;var I=d.vs,E=d.cs,m=d.ds,L=b[h._id]={index:m.length,begin:I.length/3,batch:X};m.push(h);var w,c=C.mat;B.geometry&&h instanceof f.Shape&&(Q.extractShapeTranslation||Q.extractPolylineTranslation||Q.extractVerticesTranslation)&&(w=C._vsTranslation)&&c&&(c=(new Tc.Matrix4).fromArray(c).multiply(w).toArray()),h instanceof f.Edge||!(!c||!B.geometry&&h instanceof f.Shape)||(c=Xi(h,B.mat),h.appendAnchorMatrix3d(c));var z;if((z=C.shapeModel)&&z.model3d&&(z.position||z.scale)){var F=new pd;z.position&&F.translate(Sr(z.position)),z.scale&&F.scale(Sr(z.scale)),c=Tg(ib(),c,F.getElements())}V?(d.mat=Bg(c),d.clipDirection=V[0],d.clipPercent=V[1],On(I,null,G)):On(I,c,G);var u=L.size=I.length/3-L.begin;Ei(E,op(T,S),u)}}}(),qr=function(E,W,w,z,L,J,U,s,H){var M=E.getBrightness(W);M==O&&(M=1);var m=op(cs(z),M),e=m[3]<1;J=Math.ceil(J)||1;var l=W.s("3d.clipbox")?Bi:W.s("3d.clipbox.mask"),r=(e?"T":"O")+J+"_"+l;if(U){var P=U[0],G=(U[1]||P)+P;r+="-"+P+"-"+G,H&&(r+="-"+nm(H)+"-"+M,H=op(cs(H),M))}var y=W.getRenderLayer(),Z=E._40Q.get(y),n=Z.polylineIndexMap,T=Z.polylineModelMap,v=T[r];v||(v=T[r]={vs:[],cs:[],ps:[],ds:[],ls:U?[]:O,T:e,clipboxMask:l,W:J},U&&(v.D=P,v.G=G,v.A=H)),v.invalidate=!0;var o,B=v.vs,x=v.cs,p=v.ds,i=v.ls,V=n[W._id]={index:p.length,begin:B.length/3,batch:r};p.push(W);var c;!(c=E.getData3dUI(W).mat)&&W instanceof f.Polyline&&(c=Xi(W),W.appendAnchorMatrix3d(c)),On(B,c,w);var d,S=V.size=B.length/3-V.begin,j=w.length,N=0,Y=[];if(U||L)for(o=0;j>o;o+=6)d=xh([w[o],w[o+1],w[o+2]],[w[o+3],w[o+4],w[o+5]]),Y.push(d),N+=d;if(N&&L){var C,g=op(cs(L),M),K=[g[0]-m[0],g[1]-m[1],g[2]-m[2],g[3]-m[3]],u=0;for(o=0;j>o;o+=6)C=u/N,Ei(x,[m[0]+K[0]*C,m[1]+K[1]*C,m[2]+K[2]*C,m[3]+K[3]*C],1),u+=Y[o/6],C=u/N,Ei(x,[m[0]+K[0]*C,m[1]+K[1]*C,m[2]+K[2]*C,m[3]+K[3]*C],1)}else Ei(x,m,S);if(U)for(u=s||0,o=0;j>o;o+=6)i.push(u),u+=Y[o/6],i.push(u)},Fd=function(P,E,m){if(E){var l=m[E.batch],x=l.ps,v=l.ms&&l.ms.length,r=v?4*E.index:4*E.begin,I=v?1:E.size;if(x[r]!==P[0]||x[r+1]!==P[1]||x[r+2]!==P[2]||x[r+3]!==P[3]){for(var w=0;I>w;w++)x[r++]=P[0],x[r++]=P[1],x[r++]=P[2],x[r++]=P[3];x._invalidateThisFrame=!0}}},Zg=function(){var X=new f.Math.Vector3,h=new f.Math.Vector3;return function(I,u){var q=u+["32"],y=I[u],T=I[q];if(y){if(Q.extractBatchTranslation||Q.extractVerticesTranslation)if("vs"!==u||I.ms&&I.ms.length){if("ms"===u&&I.ms&&I.ms.length){h.set(0,0,0);for(var U=y.length,g=12;U>g;g+=16)h.add(X.fromArray(y,g));h.divideScalar(U/16);for(var Y=h.x,Z=h.y,O=h.z,W=new Array(U),g=0;U>g;g+=16){for(var D=0;12>D;D++)W[g+D]=y[g+D];W[g+12]=y[g+12]-Y,W[g+13]=y[g+13]-Z,W[g+14]=y[g+14]-O,W[g+15]=y[g+15]}y=W,I.translate=[Y,Z,O]}}else{h.set(0,0,0);for(var U=y.length,g=0;U>g;g+=3)h.add(X.fromArray(y,g));h.divideScalar(U/3);for(var Y=h.x,Z=h.y,O=h.z,W=new Array(U),g=0;U>g;g+=3)W[g]=y[g]-Y,W[g+1]=y[g+1]-Z,W[g+2]=y[g+2]-O;y=W,I.translate=[Y,Z,O]}T&&T.length===y.length?(T.set(y),T._bufId=null):I[q]=new yr(y)}else delete I[q]}}(),qf=function(S,N,Q,T,w,u,W,b){var k=N instanceof f.Shape,K=u[0],q=u.length;if(q>1){K=Bg(K);for(var j=1;q>j;j++)Tg(K,K,u[j])}if(k){var L=N.p3();cj(K,L)}if(To(W.ms,K),W.ics&&Ei(W.ics,N.s("shape3d.color")||tb,1),!W.vs.length){var g=Bg(lh);k&&cj(g,Qm(L)),vc(S,N,Q,T,w,[g],W,b)}},vc=function(q,V,P,c,$,J,h,u){if(Se(P))P.forEach(function(b){vc(q,V,b,c,$,J,h,u)});else if(Vp(P))vc(q,V,Xb(c,P),c,$,J,h,u);else if(Yo(P)){var k,v=rq(P.mat,V,q),g=rq(P.s3,V,q),U=rq(P.t3,V,q),z=rq(P.r3,V,q);if((g||z||U||v)&&(k=Qn(v,g,z,rq(P.rotationMode,V,q),U),J.push(k)),P.shape3d)vc(q,V,P.shape3d,c,$,J,h,P);else{var e=c.s;u=u||ui;var W=J[0],a=J.length,m=e("shape3d.color",P.color,u.color);if($||($=e("shape3d.blend",P.blend,u.blend)),a>1){W=Bg(W);for(var G=1;a>G;G++)Tg(W,W,J[G])}var b=W?Ij(W):O;P.vs&&e(ki,P.visible,u.visible)&&Ph(W,h,P.vs,P.uv,P.is,P.ns,b,$,m),P.top_vs&&e(bo,P.topVisible,u.topVisible)&&Ph(W,h,P.top_vs,P.top_uv,P.top_is,P.top_ns,b,$,e("shape3d.top.color",P.topColor,u.topColor)||m),P.bottom_vs&&e(ig,P.bottomVisible,u.bottomVisible)&&Ph(W,h,P.bottom_vs,P.bottom_uv,P.bottom_is,P.bottom_ns,b,$,e("shape3d.bottom.color",P.bottomColor,u.bottomColor)||m),P.from_vs&&e(ad,P.fromVisible,u.fromVisible)&&Ph(W,h,P.from_vs,P.from_uv,P.from_is,P.from_ns,b,$,e("shape3d.from.color",P.fromColor,u.fromColor)||m),P.to_vs&&e(ie,P.toVisible,u.toVisible)&&Ph(W,h,P.to_vs,P.to_uv,P.to_is,P.to_ns,b,$,e("shape3d.to.color",P.toColor,u.toColor)||m)}k&&J.pop()}},Ph=function(f,h,O,D,T,U,I,A,H){var m,i=h.cs,N=h.uv,w=h.bs,p=h.ns,Q=h.vs;U&&0!==U.length||(U=Zc(O,T));var C=pd.determinantOfArray(f)<0;if(T||C){var m=T?T.length:O.length/3;$q(T?T:m,C,function(o){var A=3*o;On(Q,f,[O[A],O[A+1],O[A+2]]),On(p,I,[U[A],U[A+1],U[A+2]]),N&&To(N,[D[2*o],D[2*o+1]])})}else m=O.length/3,On(Q,f,O),On(p,I,U),N&&To(N,D);i&&Ei(i,H,m),w&&(A?Ap(w,A,m):To(w,Zm,m))},dg=function(F,k,p){var t=F.data.p3();if(k=Bg(k),cj(k,t),To(p.ms,k),p.ics&&Ei(p.ics,F.data.s("shape3d.color")||tb,1),!p.vs.length){var g=Bg(lh);cj(g,Qm(t)),Zh(F,g,p)}},Zh=function(g,G,z){ub(g,wq,G,z),ub(g,hb,G,z),ub(g,ll,G,z),ub(g,Yh,G,z),ub(g,pj,G,z),ub(g,ri,G,z),ub(g,"csg",G,z)},Lb=function(I,W,s,b,i,$){To(s.ms,i),s.ics&&Ei(s.ics,W.s("all.color")||tb,1),s.vs.length||bg(I,W,s,b,Bg(lh),$)},bg=function(a,u,h,W,o,f){ge(a,u,h,W,o,f,wq,cd),ge(a,u,h,W,o,f,hb,sp),ge(a,u,h,W,o,f,pj,gj),ge(a,u,h,W,o,f,ri,wb),ge(a,u,h,W,o,f,ll,te),ge(a,u,h,W,o,f,Yh,Uk)},Eg=function(d,X,c,g,G){g?G.instanced?d.gv.batchInstancedModel(d.data,g,d,d.getBodyColor(),[X],c):vc(d.gv,d.data,g,d,d.getBodyColor(),[X],c):G.instanced?d.gv.batchInstancedShapeFace(d,X,c):Zh(d,X,c)},ub=function(s,y,R,S){var k=s[y];if(k){var q=k.tuv;if(q){var L=k.uvScale,h=k.uvOffset,X=k.uvRotation,m=k.uvAnchor;if(L||h||X){var D,l,b,K=Ir(X,h,L,m),Z=K.a,C=K.b,o=K.c,H=K.d,A=K.tx,f=K.ty,W=q.length;for(b=0;W>b;b+=2)D=q[b],l=q[b+1],q[b]=Z*D+o*l+A,q[b+1]=C*D+H*l+f}}Ph(R,S,k.vs,q,O,O,R?Ij(R):O,k.blend,k.color)}},ge=function(H,d,E,R,L,k,M,F){var Z,i=E.cs,T=E.uv,x=E.bs,G=E.vs,l=E.ns,V=Zc(F);if(H.getFaceVisible(d,M)){var O=H.getFaceMat(d,M);O&&(L=Xi(d,O),k=Ij(L));var P=pd.determinantOfArray(L)<0;if(P){var v=F.length/3;$q(v,!0,function(h){var $=3*h;On(G,L,[F[$],F[$+1],F[$+2]]),On(l,k,[V[$],V[$+1],V[$+2]])})}else On(G,L,F),On(l,k,V);if(i&&Ei(i,H.getFaceColor(d,M),6),T){var A=H.getFaceUv(d,M)||R[M+"Uv"],j=H.getFaceUvScale(d,M)||R[M+"UvScale"],S=H.getFaceUvOffset(d,M)||R[M+"UvOffset"],w=H.getFaceUvRotation(d,M)||R[M+"UvRotation"],m=H.getFaceUvAnchor(d,M)||R[M+"UvAnchor"];A=A?[A[6],A[7],A[0],A[1],A[2],A[3],A[2],A[3],A[4],A[5],A[6],A[7]]:Xo;var n=A[0],s=A[1],U=A[2],N=A[3],o=A[4],K=A[5],I=A[6],a=A[7],r=A[8],Q=A[9],e=A[10],f=A[11];if(j||S||w||m){var g=Ir(w,S,j,m),z=g.a,J=g.b,y=g.c,q=g.d,B=g.tx,C=g.ty;n=z*n+y*s+B,s=J*n+q*s+C,U=z*U+y*N+B,N=J*U+q*N+C,o=z*o+y*K+B,K=J*o+q*K+C,I=z*I+y*a+B,a=J*I+q*a+C,r=z*r+y*Q+B,Q=J*r+q*Q+C,e=z*e+y*f+B,f=J*e+q*f+C}T.push(n,s,U,N,o,K,I,a,r,Q,e,f)}x&&(Z=H.getBodyColor(d)||H.getFaceBlend(d,M),Z?Ap(x,Z,6):To(x,Zm,6))}},Pr=function(B,K,o,k){var o=B._picking?B.pickColorMap:null,D=B.getGL(),L=B._buffer;if(!ck(K)){ns(B,lh),Vd(D);var c,l,C,_;for(var d in K){var S,g,a,J,y=K[d];if(y.batch){var x=B.getBatchInfo(y.batch)||ui;S=x.wfBloom===n?x.bloom:x.wfBloom,g=x.wfReflectable===n?x.reflectable:x.wfReflectable,a=x.wfClipboxMask===n?x.clipboxMask:x.wfClipboxMask,J=x.width}else S=y.B,g=y.reflectable,a=y.clipboxMask,J=y.W;var N=!o&&y.material;if(N||!(k&&!y.T||!k&&y.T||B.isReflecting(D)&&g===!1)){var v=o&&!B.drawFilter;if(y.invalidate?(y.invalidate=!1,Zg(y,"vs"),Zg(y,"cs"),Zg(y,"ls"),v&&Zg(y,"ps")):v&&y.ps&&y.ps._invalidateThisFrame&&(y.ps._invalidateThisFrame=!1,Zg(y,"ps")),c=y.translate,l=y.clipDirection,N){var t=y.material,X=t.renderMode;"lines"!==X?t.renderMode="lines":X=null,B._prefabRenderer.render(D,{position:c,mesh:{vs:y.vs32,aLineDistance:y.ls32,aBatchColor:y.cs32,_complete_:!0},mat:t},y),X&&(t.renderMode=X)}else{c||l?(C=l?Bg(y.mat):[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c&&cj(C,c),_=Bg(B._6O),ns(B,C)):C=null;var q=y.vs32,r=o?y.ps32:y.cs32;bm(D,J,O,L.vs,q);var p=Ar.for(D),Y=p.directUniforms(),R=p.directAttribs(),F=y.D,m=!B._dashDisabled&&F;Y.uAlphaTest=A.alphaTest,D._blooming&&!S&&(Y.blackout=!0),l&&(Y.uClipPercent=y.clipPercent,Y.uClipDirection=l),Sq(B,Y,a===n?Yb:a),m&&(Y.uDash=!0,Y.uDashDistance=F,Y.uDashGapDistance=y.G,Y.uDiffuse=y.A||A["color.empty"],R.aLineDistance=eg(D,L.lineDistance,y.ls32,O,1));var V=!B._batchColorDisabled;V&&r.length?(Y.uBatchColor=!0,R.aBatchColor=eg(D,L.batchColor,r,O,4)):(Y.uBatchColor=!1,R.aBatchColor=!1);var u=y.fog!==!1;u||(Y.uFog=!1),Pl(D),ir(D,0,q.length/3,1),Je(D),u||(Y.uFog=!0),V&&(Y.uBatchColor=!1,R.aBatchColor=!1),m&&(Y.uDash=!1,R.aLineDistance=!1),D._blooming&&!S&&(Y.blackout=!1),C&&(l&&(Y.uClipDirection=0),Si(B,_),Y.uModelMatrix=kh)}}}Ml(D),Si(B)}},oi=function(T,$){T.invalidate=!1,Zg(T,"vs"),Zg(T,"ns"),Zg(T,"cs"),Zg(T,"rs"),$&&Zg(T,"ps"),Zg(T,"bs"),Zg(T,"uv"),Zg(T,"ms"),Zg(T,"ics")},od=function(p,N,y,c,q,v){var k,P,f,J,l,G,B,d,i,T,V,o,S,c=p._picking?p.pickColorMap:null,$=p.getGL(),I=Ar.for($),t=I.directUniforms(),_=I.directAttribs(),r=p._buffer;if(!ck(N)){var w,h,e=p._flowObjects.length?p.flowMap:null,K=p.drawFilter;ns(p,lh);for(P in N)if(f=p.getBatchInfo(P)||ui,f.visible!==!1){var x=!c&&f.material;if(x||!(q&&!f.transparent||!q&&f.transparent||p.isReflecting($)&&f.reflectable===!1)){var R=f.renderLayerMask;if(R==O&&(R=Qb),v==O&&(v=Qb),wm(v,R)&&(J=N[P],c||!f.transparentMask)){if(h=!1,K){if(f.highlight===!1)continue;if(w=J.ds){for(var W=0,F=w.length;F>W;W++)if(!K(w[W])){h=!0;break}if(!h)continue}}var L=q&&f.autoSort===!0&&(p._33Q||J.invalidate)&&!h,U=c&&!h;J.invalidate?oi(J,U):U&&J.ps&&J.ps._invalidateThisFrame&&(J.ps._invalidateThisFrame=!1,Zg(J,"ps"));var Y=J.ms32,M=Y&&Y.length;if(G=J.vs32,B=c?J.ps32:M?J.ics32:J.cs32,T=J.uv32,d=J.bs32,i=J.rs32,o=G.length/3,L){var X=ys(G,p.getEye(),p);X?(J.is=X.is,J.elementTypeUint=X.useUint32):(J.is=null,J.elementTypeUint=null)}if(o){if(k=f.polygonOffset,k&&cr($,k),x&&!h){var Q={vs:G,uv:T,ns:J.ns32,is:J.is,_complete_:!0},H={position:J.translate,mesh:Q,mat:f.material};M&&(H.instances={aMatrixInstanced:J.ms32}),p._prefabRenderer.render($,H,f)}else{S=J.translate,S&&ns(p,[1,0,0,0,0,1,0,0,0,0,1,0,S[0],S[1],S[2],1]),l=f.light,V=p.getTexture(f.image),yh($,O,f.light,f.opacity,f.reverseFlip,f.reverseColor,f.reverseCull),B?p._batchColorDisabled?(t.uBatchColor=!1,_.aBatchColor=!1):(t.uBatchColor=!0,_.aBatchColor=h?[0,1,1,1]:M?Kg($,r.instancedBatchColor,B,O,4):eg($,r.batchColor,B,O,4)):(t.uBatchColor=!1,t.uDiffuse=f.color||A["color.empty"]);var C=f.alphaTest;t.uAlphaTest=C===n?A.alphaTest:C,t.shadowReceive=!c&&f.shadowReceive!==!1,Sq(p,t,f.clipboxMask===n?Yb:f.clipboxMask),Uf(p,t,f.lightMask===n?Yb:f.lightMask,f.headlightAmbientIntensity),e&&e.resetFlowUniform(f.effectFlowMask===n?Yb:f.effectFlowMask,t),$._blooming&&!f.bloom&&(t.blackout=!0),f.envmap!==n?(t.uUseEnvMap=!0,t.roughness=f.roughness||0,p._setEnvmapByProbeId(t,f.envmapProbe||0,f.envmap)):(t.uUseEnvMap=!1,t.envMapIntensity=0);var b=d&&!p._batchBlendDisabled;b&&(t.uBatchBlend=!0,_.aBatchBlend=eg($,r.batchBlend,d,O));var s=i&&!p._batchBrightnessDisabled;if(s&&(t.uBatchBrightness=!0,_.aBatchBrightness=eg($,r.batchBrightness,i,O,1)),T?Pl($,V,f.discardSelectable,r.uv,T,f.uvOffset,f.uvScale,f.uvRotation,f.uvAnchor):Pl($),_.aPosition=eg($,r.vs,G,O),_.aNormal=eg($,r.ns,J.ns32,O),M&&(t.uUseInstance=!0),h){if(M){var m,u;(m=p._highlightInstancedFloatArray)||(m=p._highlightInstancedFloatArray=new yr(16))}for(var W=0,F=w.length;F>W;W++)if(!K(w[W])){var E=y[w[W]._id];if(M){for(var g=0;16>g;g++)m[g]=Y[16*E.index+g];u=Kg($,r.ms,m,O),$.bufferSubData(34962,0,m),_.aMatrixInstanced=u,ir($,0,o,null,1)}else{var a=E.begin,Z=E.size;ir($,a,Z)}}}else M&&(_.aMatrixInstanced=Kg($,r.ms,Y,O)),J.is?(Mi($,r.is,J.is),nr($,0,o,null,J.elementTypeUint?5125:null,null,M?J.ms32.length/16:0)):ir($,0,o,null,M?J.ms32.length/16:0);T?Je($,V):Je($),B&&!p._batchColorDisabled&&(t.uBatchColor=!1,_.aBatchColor=!1),b&&(t.uBatchBlend=!1,_.aBatchBlend=!1),s&&(t.uBatchBrightness=!1,_.aBatchBrightness=!1),$._blooming&&!f.bloom&&(t.blackout=!1),M&&(t.uUseInstance=!1,_.aMatrixInstanced=n),Ue($),S&&(Si(p),t.uModelMatrix=kh)}k&&Gc($)}}}}Si(p)}},ys=function(I,_,Q){var h=I.length/3,x=h>65535,v=Q._glCapabilities.elementTypeUint&&x;if(!v&&x)return null;for(var J=new Array(h),G=h/3,Z=new Array(G),q=0;G>q;q++)Z[q]=q;Z.sort(function(x,Z){var y=9*x,q=[(I[y]+I[y+3]+2*I[y+6])/4,(I[y+1]+I[y+4]+2*I[y+7])/4,(I[y+2]+I[y+5]+2*I[y+8])/4];y=9*Z;var F=[(I[y]+I[y+3]+2*I[y+6])/4,(I[y+1]+I[y+4]+2*I[y+7])/4,(I[y+2]+I[y+5]+2*I[y+8])/4],Q=xh(_,q)-xh(_,F);return Q>0?-1:0>Q?1:0});for(var q=0;G>q;q++){var M=3*q,V=3*Z[q];J[M]=V,J[M+1]=V+1,J[M+2]=V+2}return{useUint32:v,is:v?new Uint32Array(J):new ul(J)}},vk={obj:function(F,G){var x={mat:F.mat,s3:F.s3,r3:F.r3,rotationMode:F.rotationMode,t3:F.t3,cube:F.cube==O?!0:F.cube,center:F.center==O?!0:F.center,ignoreMtls:F.ignoreMtls,ignoreTransparent:F.ignoreTransparent,ignoreColor:F.ignoreColor,ignoreImage:F.ignoreImage,ignoreNormal:F.ignoreNormal,prefix:F.prefix,flipY:F.flipY,flipFace:F.flipFace,reverseFlipMtls:F.reverseFlipMtls,finishFunc:function(V,X){if(V){var X=[];for(var f in V){var W=V[f];X.rawS3=W.rawS3,W.center&&(X.center=W.center),X.push(W),F.eachModel&&F.eachModel(f,W)}X.json=F,G(X)}else G()}};Q.loadObj(F.obj,F.mtl,x)},bin:function(B,e){var _={finishFunc:function(Y){Y?e(Y):e()}};Q.loadBin(B.url,_)},fbx:function(p,V){var B={matDef:p.matDef,flipY:p.flipY,cube:p.cube,center:p.center,animation:p.animation!==!1,finishFunc:function(B){B?(B.json=p,V(B)):V()}};Q.loadFbx(p.url,B)},gltf:function(q,X){var V={matDef:q.matDef,flipY:q.flipY,cube:q.cube,center:q.center,finishFunc:function(v){v?(v.json=q,X(v)):X()}};Q.loadGltf(q.url,V)}};Q.getModelTypeHandlers=function(){return vk},Q.setModelTypeHandler=function(m,K){vk[m]=K},Q.getModelTypeHandler=function(K){return vk[K]},Q.handleModelLoaded=function(){},Q.handleUnfoundModel=function(){};var en=O,vs=O,_g=function(J){en&&!J._loadingModelView_&&(vs||(vs={}),vs[J._loadingModelView_=jp()]=J)},Zl=function(i,l){en||(en={});var I=en[i];if(I){if(I.url===l)return;I.request.onload=rc,I.request.onerror=rc}if(l.indexOf(".bin")===l.length-4)return Wf(i,{modelType:"bin",url:l},l);if(l.indexOf(".fbx")===l.length-4)return Wf(i,{modelType:"fbx",url:l},l);if(l.indexOf(".gltf")===l.length-5||l.indexOf(".glb")===l.length-4)return Wf(i,{modelType:"gltf",url:l},l);if(l=Q.beforeLoadURL(l),l.data){var p=Q.parse(l.data);Wf(i,p,l)}else{var v=new Wh;en[i]={request:v,url:l},v.onload=function(){if(200===this.status||0===this.status){delete en[i];var _=Q.parse(v.getResponseText());Wf(i,_,l)}else ab(i,Q.handleUnfoundModel(i,l)||O)},v.onerror=function(){ab(i,Q.handleUnfoundModel(i,l)||O)};var M={};M.url=encodeURI(l),M.sync=!1,v.send(M)}},Wf=function(p,b,e){var f=b.modelType;if(!f)return ab(p,b),Q.handleModelLoaded(p,b),void 0;var o=Q.getModelTypeHandler(f);if(o){if(en||(en={}),en[p])return;en[p]=!0;var F=function(u){u?(ab(p,u),Q.handleModelLoaded(p,u)):ab(p,Q.handleUnfoundModel(p,e,b)||O)};o(b,F)}else ab(p,Q.handleUnfoundModel(p,e,b)||O)},ab=function(S,i){if(delete en[S],Vp(i)&&Ql.test(i))return Zl(S,i),void 0;if(Km[S]=i,ck(en)&&(en=O,vs)){for(var P in vs){var N=vs[P];N.invalidateAll&&N.invalidateAll(n,"modelLoaded",S),N.redraw&&N.redraw(),N.iv(),delete N._loadingModelView_}vs=O}if(i&&vs)for(var P in vs){var N=vs[P];N.invalidateAll&&N.invalidateAll(n,"modelLoading",S),N.redraw&&N.redraw(),N.iv()}},Td=new yr([0,0,0,1,1,1,1,0]),el=new yr([0,0,1,0,0,1,0,0,1,0,0,1]),Lr=new ul([0,1,2,2,3,0]),Qj=new yr([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),vo=new ul([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),id=new yr([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),fn=Zc(Qj,vo),tj=(new yr([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new ul([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[wq,ll,hb,Yh,pj,ri]),ue=[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5],Wo=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],xs=function(h,O,j,o,s,l,P){l=l||16,h=h||16,O=O||0,j=j||h;var x,A,p,$,C,K,k,r,q,i=.5,B=[],w=[],H=Qd/h,e=ei/l;for(x=0;l>x;x++)for(K=x+1,$=x*e,q=K*e,A=O;j>A;A++)k=A+1,p=A*H,r=k*H,B.push(i*G($)*b(p),i*b($),-i*G($)*G(p),i*G(q)*b(r),i*b(q),-i*G(q)*G(r),i*G($)*b(r),i*b($),-i*G($)*G(r),i*G($)*b(p),i*b($),-i*G($)*G(p),i*G(q)*b(p),i*b(q),-i*G(q)*G(p),i*G(q)*b(r),i*b(q),-i*G(q)*G(r)),w.push(A/h,x/l,k/h,K/l,k/h,x/l,A/h,x/l,A/h,K/l,k/h,K/l);if(P){var y=[];for(x=0,C=B.length;C>x;x+=3)y.push(2*B[x],2*B[x+1],2*B[x+2])}if(o){var v=[],I=[];for(p=O*H,x=0;l>x;x++)K=x+1,$=x*e,q=K*e,v.push(0,0,0,i*G(q)*b(p),i*b(q),-i*G(q)*G(p),i*G($)*b(p),i*b($),-i*G($)*G(p)),I.push(0,.5,O/h,K/l,O/h,x/l)}if(s){var J=[],V=[];for(p=j*H,x=0;l>x;x++)K=x+1,$=x*e,q=K*e,J.push(0,0,0,i*G($)*b(p),i*b($),-i*G($)*G(p),i*G(q)*b(p),i*b(q),-i*G(q)*G(p)),V.push(1,.5,j/h,x/l,j/h,K/l)}var X={vs:B,uv:w,from_vs:v,from_uv:I,to_vs:J,to_uv:V};return P&&(X.ns=y),X},bd=function(C,S,c){C=C||.17,S=S||12,c=c||18,0>C?C=0:C>.25&&(C=.25);var o,A,e,T,d,U,E,K=.5,x=[],i=[],J=[],p=Qd/c,s=Qd/S,P=K-C;for(A=0;S>=A;A++)for(T=-ei+A*s,U=b(T),d=G(T),o=0;c>=o;o++)e=o*p,E=P+C*U,x.push(b(e)*E,d*C,-G(e)*E),i.push(o/c,1-A/S);for(A=0;S>A;A++){var w=A*(c+1),W=(A+1)*(c+1);for(o=0;c>o;o++)J.push(w+o,W+o+1,W+o,w+o,w+o+1,W+o+1)}return{vs:x,uv:i,is:J}},ho=function(d,Q,J,K,P,I,B,A){B=B||12,d=d||18,Q=Q||0,J=J||d,I=I||.17,0>I?I=0:I>.25&&(I=.25);var S,x,V,E,D,N,u,i,o,R,z=.5,L=[],q=[],c=Qd/d,h=Qd/B,w=z-I,M=A?[]:n;for(V=0;B>V;V++)for(E=V+1,u=-ei+V*h,i=-ei+E*h,S=Q;J>S;S++)x=S+1,D=S*c,N=x*c,o=w+I*b(u),R=w+I*b(i),L.push(b(D)*o,G(u)*I,-G(D)*o,b(N)*o,G(u)*I,-G(N)*o,b(N)*R,G(i)*I,-G(N)*R,b(D)*o,G(u)*I,-G(D)*o,b(N)*R,G(i)*I,-G(N)*R,b(D)*R,G(i)*I,-G(D)*R),q.push(S/d,1-V/B,x/d,1-V/B,x/d,1-E/B,S/d,1-V/B,x/d,1-E/B,S/d,1-E/B),A&&M.push(b(D)*b(u),G(u),-G(D)*b(u),b(N)*b(u),G(u),-G(N)*b(u),b(N)*b(i),G(i),-G(N)*b(i),b(D)*b(u),G(u),-G(D)*b(u),b(N)*b(i),G(i),-G(N)*b(i),b(D)*b(i),G(i),-G(D)*b(i));if(K){var m=[],Y=[];for(V=0;B>V;V++)E=V+1,u=-ei+V*h,i=-ei+E*h,D=Q*c,o=w+I*b(u),R=w+I*b(i),m.push(b(D)*o,G(u)*I,-G(D)*o,b(D)*R,G(i)*I,-G(D)*R,b(D)*w,0,-G(D)*w),Y.push(.5+.5*b(u),.5-.5*G(u),.5+.5*b(i),.5-.5*G(i),.5,.5)}if(P){var g=[],l=[];for(V=0;B>V;V++)E=V+1,u=-ei+V*h,i=-ei+E*h,D=J*c,o=w+I*b(u),R=w+I*b(i),g.push(b(D)*o,G(u)*I,-G(D)*o,b(D)*w,0,-G(D)*w,b(D)*R,G(i)*I,-G(D)*R),l.push(.5-.5*b(u),.5-.5*G(u),.5,.5,.5-.5*b(i),.5-.5*G(i))}var Z={vs:L,uv:q,from_vs:m,from_uv:Y,to_vs:g,to_uv:l};return A&&(Z.ns=M),Z},Mh=function(J,$){for(var m,r,B,D,H,Z=.5,k=16,f=[],P=[],E=[],o=[],O=Qd/k,U=0;k>=U;U++)m=U*O,r=b(m),D=r*Z,B=G(m),H=B*Z,f.push(D,-Z,H,D,Z,H),E.push(r,0,B,r,0,B),P.push(1-U/k,1,1-U/k,0);for(U=0;k>U;U++)o.push(2*U,2*U+1,2*U+3,2*U,2*U+3,2*U+2);if($){var p=[],q=[],X=[];for(p.push(0,-Z,0),q.push(.5,.5),U=0;k>=U;U++)m=U*O,r=b(m),B=G(m),p.push(r*Z,-Z,-B*Z),q.push(.5+.5*r,.5+.5*B);for(U=0;k>U;U++)X.push(0,U+2,U+1)}if(J){var V=[],R=[],t=[];for(V.push(0,Z,0),R.push(.5,.5),U=0;k>=U;U++)m=U*O,r=b(m),B=G(m),V.push(r*Z,Z,-B*Z),R.push(.5+.5*r,.5-.5*B);for(U=0;k>U;U++)t.push(0,U+1,U+2)}return{vs:f,uv:P,is:o,ns:E,bottom_vs:p,bottom_uv:q,bottom_is:X,top_vs:V,top_uv:R,top_is:t}},ek=function($,q,z,p,r,i,Z,W){$=$||12,q=q||0,z=z||$;for(var D,t,S,K,R,I,n,N,U,e=.5,v=[],g=[],j=Qd/$,m=q;z>m;m++)D=m+1,t=m*j,S=D*j,K=b(t)*e,R=G(t)*e,I=b(S)*e,n=G(S)*e,v.push(K,-e,-R,I,-e,-n,K,e,-R,I,-e,-n,I,e,-n,K,e,-R),g.push(m/$,1,D/$,1,m/$,0,D/$,1,D/$,0,m/$,0);if(W){var H=[];for(m=0,U=v.length;U>m;m+=3)H.push(2*v[m],0,2*v[m+2])}if(Z){var l=[],_=[];for(m=q;z>m;m++)t=j*m,S=j*(m+1),K=b(t),R=G(t),I=b(S),n=G(S),l.push(K*e,-e,-R*e,0,-e,0,I*e,-e,-n*e),_.push(.5+.5*K,.5+.5*R,.5,.5,.5+.5*I,.5+.5*n)}if(i){var x=[],y=[];for(m=q;z>m;m++)t=j*m,S=j*(m+1),K=b(t),R=G(t),I=b(S),n=G(S),x.push(K*e,e,-R*e,I*e,e,-n*e,0,e,0),y.push(.5+.5*K,.5-.5*R,.5+.5*I,.5-.5*n,.5,.5)}if(p){var O=[],F=[];t=j*q,K=b(t)*e,R=G(t)*e,N=q/$,O.push(0,e,0,0,-e,0,K,-e,-R,K,-e,-R,K,e,-R,0,e,0),F.push(0,0,0,1,N,1,N,1,N,0,0,0)}if(r){var h=[],C=[];t=j*z,K=b(t)*e,R=G(t)*e,N=z/$,h.push(0,-e,0,0,e,0,K,e,-R,K,e,-R,K,-e,-R,0,-e,0),C.push(1,1,1,0,N,0,N,0,N,1,1,1)}var f={vs:v,uv:g,bottom_vs:l,bottom_uv:_,top_vs:x,top_uv:y,from_vs:O,from_uv:F,to_vs:h,to_uv:C};return W&&(f.ns=H),f},Sn=function(n,U,d,a,X){U=U||18,d=d||0,a=a==O?Qd:a,X=X==O?.5:X;for(var W,_,E,H,x,f,u=[0,.5,.75,.875,.9375],c=[],T=[],M=[],A=a/U,L=0;L<u.length;L++){var I=0===L%2?0:.5;for(W=0;U>=W;W++)_=(W+I)*A+d,E=1-u[L],c.push(b(_)*X*E,-X+2*u[L]*X,-G(_)*X*E),T.push((W+I)/U,E)}for(L=0;L<u.length-1;L++){var e=L*(U+1),R=(L+1)*(U+1);for(W=0;U>W;W++)M.push(e+W,R+W+1,R+W,e+W,e+W+1,R+W+1)}for(f=c.length/3-(U+1),W=0;U>W;W++)c.push(0,X,0),T.push((W+.5)/U,0);for(W=0;U>W;W++)M.push(f+W,f+W+1,f+(U+1)+W);if(n){var k=[],w=[],i=[];for(k.push(0,-X,0),w.push(.5,.5),W=0;U>=W;W++)_=W*A+d,H=b(_),x=G(_),k.push(H*X,-X,-x*X),w.push(.5+.5*H,.5+.5*x);for(W=0;U>W;W++)i.push(0,W+2,W+1)}return{vs:c,uv:T,is:M,bottom_vs:k,bottom_uv:w,bottom_is:i}},_e=function(c,N,q,B,d,e,O,f){c=c||16,N=N||0,q=q||c,O=O||1;var Y,K,E,n,$,_,v,t=.5,y=[],m=[],o=Qd/c,F=N,H=1/O,K=new Ri,E=new Ri,Z=new Ri,x=new Ri,W=new Ri,J=new Ri,i=new Ri;for(f&&(Y=[],$=new Ri,_=new Ri,v=new Ri);q>F;F++){var l=F+1,g=o*F,A=o*l;for(K.set(b(g)*t,-t,-G(g)*t),E.set(b(A)*t,-t,-G(A)*t),Z.set(0,t,0),f&&($.set(b(g),.5,-G(g)).normalize(),_.set(b(A),.5,-G(A)).normalize(),v.copy($).add(_).normalize()),x.lerpVectors(Z,K,H),W.lerpVectors(Z,E,H),y.push(x.x,x.y,x.z,W.x,W.y,W.z,Z.x,Z.y,Z.z),m.push(F/c,H,l/c,H,(F+l)/2/c,0),f&&Y.push($.x,$.y,$.z,_.x,_.y,_.z,v.x,v.y,v.z),n=1;O>n;n++)x.lerpVectors(Z,K,H*(n+1)),W.lerpVectors(Z,E,H*(n+1)),J.lerpVectors(Z,K,H*n),i.lerpVectors(Z,E,H*n),y.push(x.x,x.y,x.z,W.x,W.y,W.z,J.x,J.y,J.z,J.x,J.y,J.z,W.x,W.y,W.z,i.x,i.y,i.z),m.push(F/c,H*(n+1),l/c,H*(n+1),F/c,H*n,F/c,H*n,l/c,H*(n+1),l/c,H*n),f&&Y.push($.x,$.y,$.z,_.x,_.y,_.z,$.x,$.y,$.z,$.x,$.y,$.z,_.x,_.y,_.z,_.x,_.y,_.z)}if(e){var M=[],Q=[];for(F=N;q>F;F++){g=o*F,A=o*(F+1);var p=b(g),C=G(g),j=b(A),k=G(A);M.push(p*t,-t,-C*t,0,-t,0,j*t,-t,-k*t),Q.push(.5+.5*p,.5+.5*C,.5,.5,.5+.5*j,.5+.5*k)}}if(B){var P=[],X=[];g=o*N,P.push(0,t,0,0,-t,0,b(g)*t,-t,-G(g)*t),X.push(0,0,0,1,N/c,1)}if(d){var U=[],w=[];g=o*q,U.push(0,-t,0,0,t,0,b(g)*t,-t,-G(g)*t),w.push(1,1,1,0,q/c,1)}var a={vs:y,uv:m,bottom_vs:M,bottom_uv:Q,from_vs:P,from_uv:X,to_vs:U,to_uv:w};return f&&(a.ns=Y),a},Zk=function(v,h,d,J,o,p,D,z){for(var m=[],P=0;P<v.length-1;P+=2)m.push({x:v[P],y:v[P+1]});return tc(m,h,d,J,o,p,D,z,!1)},Vq={roundRect:function(b,m){return Zk([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],b,m,3)},star:function(D,H){return Zk([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],D,H)},rect:function(t,y){return Zk([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],t,y)},billboard:function(){return{vs:[-.5,.5,0,-.5,-.5,0,.5,.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]}},plane:function(){return{vs:[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,-.5,-.5,0,.5,.5,0,.5],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]}},triangle:function(L,S){return Zk([0,-.5,.5,.5,-.5,.5],[1,2,2,5],L,S)},rightTriangle:function(U,l){return Zk([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],U,l)},parallelogram:function(E,H){return Zk([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],E,H)},trapezoid:function(G,C){return Zk([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],G,C)}},Mn={sphere:1,cylinder:1,cone:1,torus:1},Ul={torus:1,sphere:1,cone:1},Ic=og(rj(Vq),{cylinder:1}),Ab=og(rj(Vq),{cylinder:1,cone:1}),pq=function(S,O,w){var E,H=rq(S.anchor3d,w,O),v=rq(S.mat,w,O),e=rq(S.s3,w,O),c=rq(S.t3,w,O),i=rq(S.r3,w,O),d=e||i||c||v;if(H||d){E=Bg(O._6O);var B=d?Qn(v,e,i,rq(S.rotationMode,w,O),c):ib();H&&cj(B,[.5-H[0],.5-H[1],.5-H[2]]),ns(O,B)}return E},Ji=function(x,d,j,P,w,Y,C){if(Se(j))j.forEach(function(q){Ji(x,d,q,P,w,Y,C)});else if(Vp(j))Ji(x,d,Xb(P,j),P,w,Y,C);else if(Yo(j))if(j.shape3d){var l=pq(j,x,d);Ji(x,d,j.shape3d,P,w,Y,j),l&&Si(x,l)}else fp(x,d,j,P.s,w,Y,C)},fp=function(r,s,F,W,R,c,C){C=C||ui;var l=c&&!c(W("shape3d.transparent",F.transparent,C.transparent)),u=r._picking,P=F.vs&&W(ki,F.visible,C.visible),y=!u&&P?W("shape3d.material",F.material,C.material):null,k=F.top_vs&&W(bo,F.topVisible,C.topVisible),n=!u&&k?W("shape3d.top.material",F.topMaterial,C.topMaterial):null,Q=F.bottom_vs&&W(ig,F.bottomVisible,C.bottomVisible),$=!u&&Q?W("shape3d.bottom.material",F.bottomMaterial,C.bottomMaterial):null,Y=F.from_vs&&W(ad,F.fromVisible,C.fromVisible),V=!u&&Y?W("shape3d.from.material",F.fromMaterial,C.fromMaterial):null,U=F.to_vs&&W(ie,F.toVisible,C.toVisible),L=!u&&U?W("shape3d.to.material",F.toMaterial,C.toMaterial):null;if(!l||y||L||n||$||V){var E=pq(F,r,s);if(Fj(F)){var p=r.getData3dUI(s);p.dispatchBoundingBoxChanged()}var A=r._26I,o=W("polygonOffset",F.polygonOffset,C.polygonOffset);if(o&&cr(A,o),y&&gb(A,r,s,y,[F.vs,F.uv,F.ns,F.is]),n&&gb(A,r,s,n,[F.top_vs,F.top_uv,F.top_ns,F.top_is]),$&&gb(A,r,s,$,[F.bottom_vs,F.bottom_uv,F.bottom_ns,F.bottom_is]),V&&gb(A,r,s,V,[F.from_vs,F.from_uv,F.from_ns,F.from_is]),L&&gb(A,r,s,L,[F.to_vs,F.to_uv,F.to_ns,F.to_is]),!l){var d=r._buffer,M=W("shape3d.color",F.color,C.color);R||(R=W("shape3d.blend",F.blend,C.blend));var h,G=F.opacity==O?C.opacity:F.opacity,j=W("shape3d.opacity");h=j!=O&&G!=O?G*j:G!=O?G:j,yh(A,R,W("shape3d.light",F.light,C.light),h,W("shape3d.reverse.flip",F.reverseFlip,C.reverseFlip),W("shape3d.reverse.color",F.reverseColor,C.reverseColor),W("shape3d.reverse.cull",F.reverseCull,C.reverseCull)),P&&!y&&md(A,d,M,r.getTexture(W("shape3d.image",F.image,C.image),s),W("shape3d.discard.selectable",F.discardSelectable,C.discardSelectable),F.vs,F.uv,F.ns,F.is,W("shape3d.uv.offset",F.uvOffset,C.uvOffset),W("shape3d.uv.scale",F.uvScale,C.uvScale),W("shape3d.uv.rotation",F.uvRotation,C.uvRotation),W("shape3d.uv.anchor",F.uvAnchor,C.uvAnchor)),k&&!n&&md(A,d,W("shape3d.top.color",F.topColor,C.topColor)||M,r.getTexture(W("shape3d.top.image",F.topImage,C.topImage),s,"top"),W("shape3d.top.discard.selectable",F.topDiscardSelectable,C.topDiscardSelectable),F.top_vs,F.top_uv,F.top_ns,F.top_is,W("shape3d.top.uv.offset",F.topUvOffset,C.topUvOffset),W("shape3d.top.uv.scale",F.topUvScale,C.topUvScale),W("shape3d.top.uv.rotation",F.topUvRotation,C.topUvRotation),W("shape3d.top.uv.anchor",F.topUvAnchor,C.topUvAnchor)),Q&&!$&&md(A,d,W("shape3d.bottom.color",F.bottomColor,C.bottomColor)||M,r.getTexture(W("shape3d.bottom.image",F.bottomImage,C.bottomImage),s,"bottom"),W("shape3d.bottom.discard.selectable",F.bottomDiscardSelectable,C.bottomDiscardSelectable),F.bottom_vs,F.bottom_uv,F.bottom_ns,F.bottom_is,W("shape3d.bottom.uv.offset",F.bottomUvOffset,C.bottomUvOffset),W("shape3d.bottom.uv.scale",F.bottomUvScale,C.bottomUvScale),W("shape3d.bottom.uv.rotation",F.bottomUvRotation,C.bottomUvRotation),W("shape3d.bottom.uv.anchor",F.bottomUvAnchor,C.bottomUvAnchor)),Y&&!V&&md(A,d,W("shape3d.from.color",F.fromColor,C.fromColor)||M,r.getTexture(W("shape3d.from.image",F.fromImage,C.fromImage),s,"from"),W("shape3d.from.discard.selectable",F.fromDiscardSelectable,C.fromDiscardSelectable),F.from_vs,F.from_uv,F.from_ns,F.from_is,W("shape3d.from.uv.offset",F.fromUvOffset,C.fromUvOffset),W("shape3d.from.uv.scale",F.fromUvScale,C.fromUvScale),W("shape3d.from.uv.rotation",F.fromUvRotation,C.fromUvRotation),W("shape3d.from.uv.anchor",F.fromUvAnchor,C.fromUvAnchor)),U&&!L&&md(A,d,W("shape3d.to.color",F.toColor,C.toColor)||M,r.getTexture(W("shape3d.to.image",F.toImage,C.toImage),s,"to"),W("shape3d.to.discard.selectable",F.toDiscardSelectable,C.toDiscardSelectable),F.to_vs,F.to_uv,F.to_ns,F.to_is,W("shape3d.to.uv.offset",F.toUvOffset,C.toUvOffset),W("shape3d.to.uv.scale",F.toUvScale,C.toUvScale),W("shape3d.to.uv.rotation",F.toUvRotation,C.toUvRotation),W("shape3d.to.uv.anchor",F.toUvAnchor,C.toUvAnchor)),Ue(A)}o&&Gc(A),E&&Si(r,E)}},gb=function(D,Y,c,z,v){Y._prefabRenderer.render(D,{mesh:{vs:v[0],uv:v[1],ns:v[2],is:v[3],_complete_:!0},mat:z},c)},md=function(k,h,c,U,Q,s,i,u,F,x,_,L,q){var Z=Ar.for(k),C=Z.directUniforms(),a=Z.directAttribs();C.uDiffuse=c||A["color.empty"],i?Pl(k,U,Q,h.uv,i,x,_,L,q):Pl(k),a.aPosition=eg(k,h.vs,s,O),a.aNormal=eg(k,h.ns,u,O),F?(_j(k,h.is,F),nr(k,0,F.length,null,F instanceof Uint32Array?5125:null)):ir(k,0,s.length/3),i?Je(k,U):Je(k)},Xb=function(J,N){var g=J.s;if(N||(N=g(Yd)),!N)return O;var s=Bj(N);if(s)return s;if("text"===N){var u={amount:g("shape3d.text.amount"),size:g("shape3d.text.size"),font:g("shape3d.text.font"),style:g("shape3d.text.style"),weight:g("shape3d.text.weight"),fill:g("shape3d.text.fill"),curveSegments:g("shape3d.text.curveSegments"),spacing:g("shape3d.text.spacing"),cube:g("shape3d.text.cube")},q=J.gv.getShape3dText(J.data),m=q;for(var k in u)m+="_"+(u[k]===n?"U":u[k]);return J._cachedTextKey===m?J._cachedTextGeometry:(J._cachedTextKey=m,J._cachedTextGeometry=Q.createTextGeometry(q,u))}var k=N;if(Mn[N]){var L=g("shape3d.side"),c=g("shape3d.side.from"),F=g("shape3d.side.to"),E=g(ad),x=g(ie);3>L?(L=0,c=0,F=0,E=!1,x=!1):((c==O||0>c)&&(c=0),(F==O||F>L)&&(F=L),0===c&&F===L&&(E=!1,x=!1));var I=g("shape3d.smooth");k+="-"+L+"-"+c+"-"+F+"-"+E+"-"+x+(I?1:0)}if(Ic[N]){var D=g(bo);k+="-"+D}if(Ab[N]){var S=g(ig);k+="-"+S}if("torus"===N){var Y=g("shape3d.torus.radius");0>Y?Y=0:Y>.25&&(Y=.25),k+="-"+Y}if(Ul[N]){var U=g(un);k+="-"+U}return s=lr[k],s||("box"===N?s=Q.createBoxModel():Vq[N]?s=Vq[N](D,S):"sphere"===N?s=Q.createSphereModel(L,c,F,E,x,U,I):N===nk?s=Q.createCylinderModel(L,c,F,E,x,D,S,I):"cone"===N?s=Q.createConeModel(L,c,F,E,x,S,U,I):"torus"===N&&(s=Q.createTorusModel(L,c,F,E,x,Y,U,I)),lr[k]=s),s},Fj=function(){var w=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],o=["is","top_is","bottom_is","from_is","to_is"];
return I=Ao(mq.substr(mq.indexOf("^#")+2)),il(Q[wh(dn+w[15]+"n"+w[16])]())&&Of()?function(C){return C&&!C._complete_?(C._complete_=!0,C.vs&&$d(C.ns)&&(C.ns=Zc(C.vs,C.is),C.boundingBox=n),C.top_vs&&$d(C.top_ns)&&(C.top_ns=Zc(C.top_vs,C.top_is),C.top_boundingBox=n),C.bottom_vs&&$d(C.bottom_ns)&&(C.bottom_ns=Zc(C.bottom_vs,C.bottom_is),C.bottom_boundingBox=n),C.from_vs&&$d(C.from_ns)&&(C.from_ns=Zc(C.from_vs,C.from_is),C.from_boundingBox=n),C.to_vs&&$d(C.to_ns)&&(C.to_ns=Zc(C.to_vs,C.to_is),C.to_boundingBox=n),w.forEach(function(B){var H=C[B];Se(H)&&(C[B]=new yr(H))}),o.forEach(function(L){var h=C[L];Se(h)&&(C[L]=h.length>65535?new bq(h):new ul(h))}),!0):!1}:void 0}(),gq=function(t,d){var q=t[d];Se(q)&&(t[d]=new yr(q))};og(hs,{_25Q:function(i){var l=new Ri;i._16O=function(r,j,$,I,m,v,K,L,Y){var h=this.info;if(h){var U,G,x,M,z,a,s=ib();qp[j]?(U=h.p3,G=h.c1,x=h.c2):Mj[j]?(G=h.s1||h.c1,x=h.s2||h.c2):(G=h.t1||h.c1,x=h.t2||h.c2);var t=this.data;if(t instanceof he&&this.shapeModel){var c=t.getPointsMatrix3d();U&&(U=l.copy(U).applyMatrix4(c).toArray()),G&&(G=l.copy(G).applyMatrix4(c).toArray()),x&&(x=l.copy(x).applyMatrix4(c).toArray())}var Z=0;if(G&&x){var w=js(x,G);Z=xh(G,x),M=[0,-Tr(w[2],w[0]),uj(w[1]/Z)],z="zyx",U||(U=[(G[0]+x[0])/2,(G[1]+x[1])/2,(G[2]+x[2])/2])}return a=xn(j,[Z,0,0],$,I,L,Y),zq(s,a,U,I,m,v,K,r,M,z)}return kh},i._80o=function(H,p,g){var e=this,N=e.shapeModel;if(N){var h=e.gv;ns(h),Ji(h,e.data,N,e,e.getBodyColor(),g)}},i.createLineModel=function(M,E,x,K,T){var Y=this,G=Y.s,e=eo(M,E,G(un)),V=G(K+".color");if(V){for(var m=[],s=0;s<e.length;s++){var H=e[s],k=H.length;if(k>1){var Z=H[0];m.push(Z.x,Z.y,Z.z);for(var n=1;k-1>n;n++)Z=H[n],m.push(Z.x,Z.y,Z.z),m.push(Z.x,Z.y,Z.z);Z=H[k-1],m.push(Z.x,Z.y,Z.z)}}var w,u,F,L=G(T),q=0;L&&(u=G(T+".color"),w=G(T+".pattern"),q=G(T+".offset"),F=V),qr(Y.gv,Y.data,m,u||V,F?O:G(K+".gradient.color"),x,w||G(K+".pattern"),q,F)}return e},i.createTubeModel=function(B,W,e,J){for(var g=this,L=g.s,w=L("shape3d.side")||xd,i=L("shape3d.start.angle"),b=L("shape3d.sweep.angle"),_=L(bo)?L("shape3d.top.cap"):O,j=L(ig)?L("shape3d.bottom.cap"):O,V="flat"===_,Y="flat"===j,n=V&&(J?J.uv:L("shape3d.top.image")),Q=Y&&(J?J.uv:L("shape3d.bottom.image")),d=J?J.uv:!0,c=L("shape3d.smooth"),s={vs:[],uv:d?[]:O,ns:c?[]:O,top_vs:V?[]:O,top_uv:n?[]:O,bottom_vs:Y?[]:O,bottom_uv:Q?[]:O},k=eo(B,W,L(un),e),M=0,t=k.length,C=0,A=L("shape3d.uv.union");t>M;M++)A!==!0&&(C=0),C=Sm(s,k[M],L(Tj),e,w,i,b,_,j,C);if(J){var r=g._matWithExtraction||g.mat;vc(g.gv,g.data,s,g,g.getBodyColor(),r?[r]:[],J)}else g.shapeModel=s;g.lineShapeModel=s;var X=g._vsTranslation;if(X)for(var M=0,H=k.length;H>M;M++)for(var a=0,l=k[M].length;l>a;a++)k[M][a]=k[M][a].clone().applyMatrix4(X);return k},i.getCache=function(){var W=this.info;if(W){var C=W.list;if(C){var x=W.cache;return x||(x=W.cache=Zf(C)),x}}return O}}});var Xp=function(Z,N){for(var H,g=0,x=Z.length,X=0,n=x-1;n>=X;)if(g=B(X+(n-X)/2),H=Z[g].length-N,0>H)X=g+1;else{if(!(H>0)){n=g;break}n=g-1}g=n;var u=Z[g],y=u.point;return g===x-1||u.length===N||(y=(new nh).subVectors(Z[g+1].point,y).normalize().multiplyScalar(N-u.length).add(y)),{point:y,tangent:u.tangent}},Zf=function(e){for(var v,s,L=[],r=0,V=0;V<e.length;V++){for(var B=e[V],$=0;$<B.length;$++){v=B[$],s&&(r+=s.distanceTo(v));var I=new nh,E=B[$+1];E?I.subVectors(E,v):s?I.subVectors(v,s):I.x=1,I.normalize(),L.push({point:v,length:r,tangent:I}),s=v}s=null}return L},eo=function(z,F,U,D){U=U||ae;for(var s=[],t=0,K=z.size();K>t;t++){var q=z.get(t);s.push(new nh(q.x,q.e||0,q.y))}F&&(Sb(F)&&(F=F._as),F.length||(F=null));for(var C,X,N,J,M,a=[],j=[],l=0,Y=0,R=F?F.length:K;R>Y;Y++){if(M=F?F[Y]:0===Y?1:2,1===M)a.push(N=[]),N.push(s[l++]);else if(2===M||5===M)if(J=2===M?s[l++]:N[0],D){var W=F?F[Y+1]:R>Y+1?2:O;if(2===W||5===W){var y=N[N.length-1],A=2===W?s[l]:N[0],T=(new nh).subVectors(y,J),I=(new nh).subVectors(A,J),Z=T.length(),c=I.length();if(Z&&c)if(D>Z/2&&D>c/2)N.push(J);else for(T.multiplyScalar(g(D,Z/2)/Z).add(J),I.multiplyScalar(g(D,c/2)/c).add(J),C=new Wj(T,J,I).getPoints(U),X=0;U>=X;X++)N.push(C[X])}else N.push(J)}else N.push(J);else if(3===M)for(C=new Wj(N[N.length-1],s[l++],s[l++]).getPoints(U),X=1;U>=X;X++)N.push(C[X]);else if(4===M)for(C=new Mg(N[N.length-1],s[l++],s[l++],s[l++]).getPoints(U),X=1;U>=X;X++)N.push(C[X]);j.push(a.length,N.length)}return a.indexMark=j,a},Ag=function(V){for(var B,z,g=new nh,M=[],q=[],a=[],W=0,_=V.length;_>W;W++)B=V[W],z=V[W+1],z?g.subVectors(z,B):g.subVectors(B,V[W-1]),M.push(g.normalize().clone());var r,j=new nh,p=new nh,l=new pd,e=1e-4,C=M[0],h=q[0]=new nh,Z=a[0]=new nh;for(Math.abs(Math.abs(C.y)-1)<e?j.set(1,0,0):j.set(0,1,0),p.crossVectors(C,j).normalize(),h.crossVectors(C,p),Z.crossVectors(C,h),W=1;_>W;W++)q[W]=q[W-1].clone(),a[W]=a[W-1].clone(),p.crossVectors(M[W-1],M[W]),p.length()>e&&(p.normalize(),r=$(Kn(M[W-1].dot(M[W]),-1,1)),q[W].applyMatrix4(l.makeRotationAxis(p,r))),a[W].crossVectors(M[W],q[W]);return{B:a,T:M,N:q}},Sm=function(){var h=function(y){for(var m=1;m<arguments.length;m++){var u=arguments[m];y.push(u.x,u.y,u.z)}},t=function(h){for(var s=1;s<arguments.length;s++){var w=arguments[s].uv;h.push(w[0],w[1])}},i=function(q){for(var B=1;B<arguments.length;B++){var e=arguments[B].ns;q.push(e[0],e[1],e[2])}},Q=function(U,A,O,S,Y){var P=-S*b(Y),V=S*G(Y);return new nh(U.x+P*O.x+V*A.x,U.y+P*O.y+V*A.y,U.z+P*O.z+V*A.z)},K=function(L,M,l,p,W,j,d,s,U){d=d||Qd;for(var n,S=[],V=d/W,n=U?new Ri:O,e=0;W>=e;e++){var u=Q(L,M,l,p,e*V+j);S.push(u),s!=O&&(u.uv=[s,1-e/W]),U&&(u.ns=n.subVectors(u,L).normalize().toArray())}return S},u=function(H,i,e,d,V,J,A,K,L){L=L||Qd;var D=i?H.top_vs:H.bottom_vs;if(D)for(var s=i?H.top_uv:H.bottom_uv,x=L/A,y=0;A>y;y++){var r,P;i?(r=y*x+K,P=(y+1)*x+K):(P=y*x+K,r=(y+1)*x+K),h(D,Q(e,d,V,J,r),Q(e,d,V,J,P),e),s&&s.push(.5-.5*b(r),.5-.5*G(r),.5-.5*b(P),.5-.5*G(P),.5,.5)}};return function(E,V,j,R,Q,B,k,C,S,M){var e=V.length;if(e>1){var w,l,X,x,_,y,J,I=Ag(V),p=I.T,T=I.N,r=I.B;"flat"===C&&u(E,!0,V[0],r[0],T[0],R,Q,B,k),"flat"===S&&u(E,!1,V[e-1],r[e-1],T[e-1],R,Q,B,k);var H,g,Y=[],m=s(Q/2),F="round"===C,o="round"===S,z=V[0],v=p[0],W=r[0],q=T[0],c=V[e-1],L=p[e-1],d=r[e-1],$=T[e-1];if(F){for(X=1;m>=X;X++)T.splice(0,0,q),r.splice(0,0,W),p.splice(0,0,v),g=-X/m*R,V.splice(0,0,v.clone().multiplyScalar(g).add(z)),Y[m-X]=N(R*R-g*g);e+=m}if(o){for(X=1;m>=X;X++)T.push($),r.push(d),p.push(L),g=X/m*R,V.push(L.clone().multiplyScalar(g).add(c)),Y[V.length-1]=N(R*R-g*g);e+=m}if(E.uv){var D=0,Z=M,f=[];for(j&&(D=j),_=V[0],f[0]=0,X=1;e>X;X++)x=V[X],f[X]=_.distanceTo(x),_=x,j||(D+=f[X]);for(H=[],X=0;e>X;X++)Z+=f[X],H[X]=D?Z/D:0;M=Z,E.internalUvScale=D?M/D:1}var P=E.ns?!0:!1;for(X=0;e>X;X++){if(x=V[X],y=r[X],J=T[X],w=K(x,y,J,Y[X]===n?R:Y[X],Q,B,k,H?H[X]:O,P),l)for(var b=0;Q>b;b++){var A=l[b],G=l[b+1]||l[0],a=w[b],U=w[b+1]||w[0];h(E.vs,G,A,a,a,U,G),E.uv&&t(E.uv,G,A,a,a,U,G),P&&i(E.ns,G,A,a,a,U,G)}l=w}}return M}}();og(Q,{getLineLength:function(k){return k[k.length-1].length},getLineOffset:function(R,z){return Xp(R,z)},getLineCacheInfo:function(E,_,o,p){return Zf(eo(E,_,o,p))}});var Qo=1,Pb=function(b,U){function x(s,e){var H=[];if(s)for(var X in s){var V=s[X];V!==!1&&H.push("#define "+X+(V===!0?"":" "+V))}if(e)for(var X in e)if(!s||s[X]===n){var V=e[X];V!==!1&&H.push("#define "+X+(V===!0?"":" "+V))}return H.join("\n")}function E(j){return j.replace(S,D)}function D(u,I){var y=ke[I];if(y===n)throw new Error("Resolve #include <"+I+"> failed.");return y=Ao(y,!0),E(y)}var R,S=/^[ \t]*#include +<([\w\d./]+)>/gm,A=function(){function O(r){if(r.match(x))return ob(r);var S=c[r];if(S)return S;var j=new RegExp("#define\\s+"+r+"\\s+(\\d+)"),q=m.match(j);return c[r]=q?ob(q[1]):0}function s(B){if(B.indexOf("UNROLL_LOOP_START")<0)return B;c={},m=B;var L=B.replace(t,w).replace(d,Y);return m=null,c=null,L}function w(p,Q,e){e=O(e);for(var N="",c=0;e>c;c++)N+=Q+c+";";return N}function Y(o,H,B,w){for(var C="",i=O(H);i<O(B);i++)C+=w.replace(/\[\s*i\s*\]/g,"["+i+"]").replace(/\[\s*I\s*\]/g,i);return C}var c,m,t=/(uniform\s+sampler2D\s+\w+)\[([\S\d]+)\];/g,d=/#UNROLL_LOOP_START\s+for\s*\(\s*int\s+i\s*=\s*([\S\d]+)\s*;\s*i\s*<\s*([\S\d]+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#UNROLL_LOOP_END/g,x=/^\d+$/;return function(T){return s(T)}}(),f=/^[ \t]*\/\/ *[Hh]ints *:([\w\d ,\.]+)$/gm,L=function(c,a){return c.replace(f,function(L,t){return t.split(",").forEach(function(B){B=B.trim(),a.indexOf(B)<0&&a.push(B)}),""})},W=function(G){R=G},Z=function(E){var I=E.type;return E.defines&&(I+=x(E.defines,b._programDefines)),E.cacheKey=I},G=/(\/\/\s*)?#PREFIX/,z=function(u,P,j){var Q=[];u=L(u,Q);var z="";return Q.indexOf("glsl3")>=0&&(z=b.isWebGL2()?"vs"===j?"#version 300 es\nprecision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture\n":"#version 300 es\n#define varying in\nlayout(location = 0) out highp vec4 pc_fragColor;\n#define gl_FragColor pc_fragColor\n#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad\n":"#extension GL_OES_standard_derivatives : enable\n"),u=z+b._glCapabilities.precisionstring+u,u=u.replace(G,P),u=E(u),u=A(u)},v=function(w,j,r){var o=w.createShader(j);return w.shaderSource(o,r),w.compileShader(o),w.getShaderParameter(o,35713)?o:(Xl("COMPILE","LITE",j,w.getError(),w.getShaderInfoLog(o)),null)},i=b.getGLExtensions().get("KHR_parallel_shader_compile"),t=i?i.COMPLETION_STATUS_KHR:null,q=null,g=function(C,V,H,f){var P=x(f.defines,b._programDefines);f.defines&&(V.match(G)||(V=P+"\n"+V),H.match(G)||(H=P+"\n"+H));var J=z(V,P,"vs"),e=z(H,P,"fs"),W=v(C,35633,J),Y=v(C,35632,e),X=C.createProgram();if(C.attachShader(X,W),C.attachShader(X,Y),C.linkProgram(X),("pbr"===f.type||"phong"===f.type)&&i&&b.isShaderCompileParallel()){var D={program:X,vertShader:W,fragShader:Y};q?q.push(D):q=[D],X._isReady=!1,b.iv()}else{if(!C.getProgramParameter(X,35714)){var c=C.getProgramInfoLog(X);if(c.indexOf("maximum temp register")>=0&&!b._glTempRegisterLimited)return b._glTempRegisterLimited=!0,C.deleteProgram(X),g(C,V,H,f);Xl("LINK",C.getProgramParameter(X,35715),C.getError(),c),C.deleteProgram(X),X=null}C.deleteShader(W),C.deleteShader(Y),X._isReady=!0}return X._id=Qo++,X};H&&H.navigator&&H.navigator.userAgent.toLowerCase().indexOf("chrome")>-1;var $=function(f){var d=U._programs,h=f.cacheKey;h||(h=Z(f));var J=d[h];if(J)return J._fid!==R&&(J._dirty=!0,J._fid=R),J._isReady?J:null;var j,y,n=f.type;if("legacy"===n)j=Ao(mq.substring(0,mq.indexOf("^#"))),y=Ao(wk);else{var k=Fo[n];k.isRaw?(j=k.vs,y=k.fs):(j=Ao(k[0],!0),y=Ao(k[1],!0))}if(J=g(U,j,y,f),!J)return J;var i=J._isReady;return J.name=n,J.cacheKey=h,J._dirty=!0,J._fid=R,d[h]=J,i?J:null},u=function(x){var W,S,u=x._programs;for(W in u)S=u[W],S&&S._fid===R&&Yq(x,S).disable()},o=function(){if(q){for(var n,j,W=q.length-1;W>=0;W--)if(j=q[W],n=j.program,U.getProgramParameter(n,t)){if(q[W]=q[q.length-1],q.pop(),U.getProgramParameter(n,35714))n._isReady=!0;else{var L=U.getProgramInfoLog(n);Xl("LINK",U.getProgramParameter(n,35715),U.getError(),L),U.deleteProgram(n),n._forceDelete=!0}U.deleteShader(j.vertShader),U.deleteShader(j.fragShader)}q.length?b.iv():q=null}},r=function(b){var G,V,c=U._programs,g=0,B=0;for(G in c)B++,V=c[G],V&&(V._forceDelete||R-V._fid>b?(U.deleteProgram(V._prg),delete c[G]):g++);U._validProgramCount=g},X=function(){r(-1)};return U._programs={},{acquireProgram:$,scheduleProgramGC:r,checkParallelLinkStatus:o,dispose:X,setCurrentFrameRenderId:W,disableAttributes:u}},An=function(r){function M(B){if("string"!=typeof B)return 0|B;switch(B){case"low":return 512;case"medium":return 1024;case"ultra":return 4096;default:return 2048}}function G(){H.enable=!Q.graph3dViewShadowDisabled,v=Q.graph3dViewShadowType,p=Q.graph3dViewShadowIntensity,j=Q.graph3dViewShadowBias,Z=Q.graph3dViewShadowQuality,g=Q.graph3dViewShadowRadius,e=Q.graph3dViewShadowDegreeX,z=Q.graph3dViewShadowDegreeZ,I=null}var H=this;H.enable=!1;var v,p,j,Z,g,e,z,I;G();var C,b,w,k,N=1,R=M(Z),J=!1,B=new f.Math.Matrix4,o=new f.Math.Matrix4,s=H.pvMatrix=new f.Math.Matrix4,X=0;H.contextLost=function(){H.mapForReflector=null,H.map=null},H.render=function(){if(!r._picking&&H.enable){var t=r.getGL();if(t){if(J&&H.setupShadowCamera(),r._glCapabilities&&(R=Math.min(R,r._glCapabilities.maxTextureSize)),k=r.isReflecting(t)){if(X===t._renderInfo.frame)return;X=t._renderInfo.frame}var I=k?"mapForReflector":"map";(C=H[I])?C.setSize(R,R):C=H[I]=new Ss(r,r.getGL(),0,0,{samples:1,minFilter:9728,magFilter:9728,width:R,height:R});var Z=r._frameState,g=Z.renderState.glState;g.blend.enabled=!1,g.depth.enabled=!0,g.depth.mask=!0;var j=g.color.clear.slice(0);dh(t,[1,1,1,1]);var K=r.acquireProgram({type:"shadowMap",defines:{MAX_BOX_CLIPPER:r._boxClippers.length,UV_CLIP:!1}});Z.renderState.useProgram(K),S(),dh(t,j)}}},H.getShadow=function(){var Q={degreeX:e,degreeZ:z,intensity:p,quality:Z,type:v,radius:g,bias:j,bounding:I};return 1!==N&&(Q.boundExtend=N),Q},H.setShadow=function(W,J){W=!!W,H.enable=W,"object"==typeof J&&(J.intensity!==n&&(p=J.intensity),J.bias!==n&&(j=J.bias),J.radius!==n&&(g=J.radius),J.degreeX!==n&&(e=J.degreeX),J.degreeZ!==n&&(z=J.degreeZ),J.quality!==n&&(Z=J.quality),J.bounding!==n&&(I=J.bounding),J.type!==n&&v!==J.type&&(v=J.type),R=M(Z),J.boundExtend!==n&&(N=J.boundExtend)),W&&H.setupShadowCamera(),r.iv()};var _=null;H.tryInvalidateLater=function(K,W){"modelLoaded"===W&&(_&&ln(_,!0),_=Ad(function(){_=null,H.refresh()},H,n,200))},H.refresh=function(){this.enable&&(this.setupShadowCamera(),r.iv())},H.tryUpdateBounding=function(S){if(!I){var T=this.boundingSphere;if(T){var s=(new pd).fromArray(Xi(S,r.getMat(S))),o=S.getAnchor3d(),k=new Ri;T.containsPoint(k.set(0-o.x,0-o.y,0-o.z).applyMatrix4(s))&&T.containsPoint(k.set(0-o.x,0-o.y,1-o.z).applyMatrix4(s))&&T.containsPoint(k.set(0-o.x,1-o.y,0-o.z).applyMatrix4(s))&&T.containsPoint(k.set(0-o.x,1-o.y,1-o.z).applyMatrix4(s))&&T.containsPoint(k.set(1-o.x,0-o.y,0-o.z).applyMatrix4(s))&&T.containsPoint(k.set(1-o.x,0-o.y,1-o.z).applyMatrix4(s))&&T.containsPoint(k.set(1-o.x,1-o.y,0-o.z).applyMatrix4(s))&&T.containsPoint(k.set(1-o.x,1-o.y,1-o.z).applyMatrix4(s))||H.setupShadowCamera()}}},H.createShadow=function(U){U||(U=r._frameState.renderState.directUniforms()),U.shadowMatrix=s.toArray();var P;if(r._getFrameRenderOptions("renderShadow")!==!1){var d=r._getFrameRenderOptions("useReflectorSelfShadowMap")&&H.mapForReflector;P=d?H.mapForReflector.texture:H.map?H.map.texture:null}if(P)U.shadowMap=P,U.shadowSize=[C.width,C.height];else{var Q=r.getGL();(P=Q._emptyShadowTexture)||(P=Q._emptyShadowTexture=Nk(Q,null,[255,255,255,255])),U.shadowMap=P,U.shadowSize=[1,1]}U.shadowIntensity=p,U.shadowBias=j,U.shadowRadius=g},H.genShaderDefine=function(x){return x.USE_SHADOWMAP=!0,"hard"===v?x.SHADOWMAP_TYPE_PCF=!0:"soft"===v&&(r.isGLTempRegisterLimited()?x.SHADOWMAP_TYPE_PCF=!0:x.SHADOWMAP_TYPE_PCF_SOFT=!0),x};var W;H.setupShadowCamera=function(){if(b||(b=H.boundingSphere=new f.Math.Sphere),I)b.set((new Ri).fromArray(I),I[3]);else{J=!1;var m,E,A=r.getBoundingBox(r.dm().toDatas(function(U){return U.s("shadow.cast")&&r.isVisible(U)}));A?(m=new Ri(A.min),E=new Ri(A.max)):(m=new Ri(-256,-256,-256),E=new Ri(256,256,256),J=!0),b.set(m.clone().add(E).multiplyScalar(.5),.5*m.distanceTo(E)*N)}var p=b.radius,F=2*p;W=Dp(ib(),-p,p,-p,p,F/1e3,F),s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(B.fromArray(W));var M=Math.tan(-e*Math.PI/180),u=Math.tan(-z*Math.PI/180),y=p/Math.sqrt(M*M+u*u+1),U=new Ri(y*M,y,y*u);H.direction=Ri.normalizeArray(U.clone().multiplyScalar(-1)),B.lookAt(U,new Ri(0,0,0),new Ri(0,1,0)).setPosition(U.add(b.center)),B.getInverse(B),s.multiply(B)},H.getDirection=function(){return H.enable?H.direction:void 0};var S=function(){var c=r.getGL(),K=R,d=R;C.setSize(c,K,d),C.bind(c),c.clear(16640);var s=r._frameState,v=s.renderState,S=v.directUniforms(),y=v.directAttribs(),i=v.directState();S.uUseInstance=!1,S.uUseSkinning=!1,y.aMatrixInstanced=n,S.boneTexture=n,S.projectionMatrix=W,(w=r._boxClippers.length>0)&&(Sq(r,S,Bi),S.uClipperMatrix=r._boxClipperMatrixes,S.uClipperClipInner=r._boxClipperClipInner);var P=r._viewport;r.setViewport(c,0,0,K,d);var m,T,X,j,B=r.getRenderLayerKeys();for(m=0,T=B.length;T>m;m++)if(X=B[m],!r.getRenderLayerInfo(X).ignore&&(j=r._40Q.get(X))){j.resetModel3dInstancedDraw();var g=j.batchIndexMap;H.renderItems(c,S,y,i,j.opaque,g,!1),H.renderItems(c,S,y,i,j.transparent,g,!0),H.renderBatch(c,S,y,i,j.batchModelMap,g)}C.unbind(c),r.setViewport(c,P[0],P[1],P[2],P[3])};H._renderDirect=function(H,Q,S,q,l,y,b){if(S&&S.length){var Y=l&&l.length?l.length/16:0;Q.position=eg(H,r._buffer.vs,S,O),q?(_j(H,r._buffer.is,q),nr(H,y||0,b===n?q.length:b,null,q instanceof Uint32Array?5125:null,null,Y)):ir(H,y||0,b===n?S.length/3:b,null,Y)}},H.renderShapeModel=function(K,J,i,F){var t,Q,d;if(Se(i))for(Q=0,d=i.length;d>Q;Q++)t=i[Q],t&&H.renderShapeModel(K,J,t,F);else Vp(i)?H.renderShapeModel(K,J,Xb(F,i),F):Yo(i)&&(i.shape3d?H.renderShapeModel(K,J,i.shape3d,F):H.renderShapeModelImpl(K,J,i))},H.renderShapeModelImpl=function(e,i,d){Fj(d),H._renderDirect(e,i,d.vs,d.is),H._renderDirect(e,i,d.top_vs,d.top_is),H._renderDirect(e,i,d.bottom_vs,d.bottom_is),H._renderDirect(e,i,d.from_vs,d.from_is),H._renderDirect(e,i,d.to_vs,d.to_is)},H.renderBatch=function(p,u,q,S,h){if(!ck(h)&&!r.drawFilter){var e=o.identity().premultiply(B);u.modelViewMatrix=e.toArray(),u.uClipDirection=0;var J,T,C,l,V=new f.Math.Matrix4;for(J in h)if(C=r.getBatchInfo(J)||ui,C.visible!==!1&&C.shadowCast!==!1&&(!k||C.reflectable!==!1)){T=h[J],T.invalidate&&oi(T,r._picking),w&&(u.modelMatrix=lh,Sq(r,u,C.clipboxMask===n?Yb:C.clipboxMask)),l=T.translate,l&&(V.set(1,0,0,l[0],0,1,0,l[1],0,0,1,l[2],0,0,0,1),u.modelMatrix=V.getElements(),u.modelViewMatrix=V.premultiply(B).toArray());var $=T.ms32,x=$&&$.length;x&&(u.uUseInstance=!0,q.aMatrixInstanced=Kg(p,r._buffer.ms,$,O)),H._renderDirect(p,q,T.vs32,T.is,$),x&&(u.uUseInstance=!1,q.aMatrixInstanced=n),l&&(u.modelMatrix=lh,u.modelViewMatrix=e.toArray())}}},H.renderItems=function(C,b,q,X,c,l,E){var K,p,x,V,R,M,m,S,z=c.length;for(K=0;z>K;K++)if(p=c[K],V=p.ui,x=p.data,!($o(x)||!x.s("shadow.cast")||x instanceof qj||x.s("effect.flow")||!r.isVisible(x)||l[x._id]||k&&x.s("3d.reflectable")===!1)){var I=V.s("3d.clip.direction");if(I){var F=V.s("3d.clip.percentage");if(0===F)continue;var t=V._formatClipUniforms(I,F,x);b.uClipPercent=t[1],b.uClipDirection=t[0]}else b.uClipDirection=0;if(w&&Sq(r,b,x.s("3d.clipbox")?Bi:x.s("3d.clipbox.mask")),R=V.shapeModel||Xb(V),R&&R.model3d){if(E)continue;r._prefabRenderer.renderShadow(C,R,x,V.mat,function(y,M,E,T,z){var F=T&&T.aMatrixInstanced;F&&(y=new pd,b.uUseInstance=!0,q.aMatrixInstanced=Kg(C,r._buffer.ms,F,O)),w&&(b.modelMatrix=y.getElements()),b.modelViewMatrix=y.clone().premultiply(B).getElements(),X.cullFace.enabled=E&&E.cullFace?!0:!1,S=E&&E.flipSide?!0:!1,x._flipSide&&(S=!S),S&&(X.cullFace.frontFace=2304);var A,g=!!(z.skeleton&&x&&(A=r._updatedSkeletonDatas[z._skeletonId+"|"+x._lastAnimTimestamp])&&z.boneTexture);if(g){var Z=z.boneTextureSize;C.activeTexture(33984),Lf(C,z.boneTexture),C.texImage2D(3553,0,34836,Z,Z,0,6408,5126,A),Lf(C,O),b.uUseSkinning=!0,b.bindMatrix=z.skeleton.bindMatrix,b.bindMatrixInverse=z.skeleton.bindMatrixInverse,b.boneTexture=z.boneTexture,b.boneTextureSize=Z,q.skinIndex=eg(C,null,M.skinIndex),q.skinWeight=eg(C,null,M.skinWeight)}var e,f;z.drawRange&&(e=z.drawRange[0],f=z.drawRange[1]),H._renderDirect(C,q,M.vs,M.is,F,e,f),S&&(X.cullFace.frontFace=2305),F&&(b.uUseInstance=!1,q.aMatrixInstanced=n),g&&(b.uUseSkinning=!1,q.skinIndex=n,q.skinWeight=n)})}else{R||(R=x instanceof f.Node&&!(x instanceof f.Shape)?{vs:Qj,is:vo}:[V.left,V.front,V.right,V.back,V.top,V.bottom]),m=V.mat?o.fromArray(V.mat):o.identity();var e=V._vsTranslation;e&&(Q.extractShapeTranslation||Q.extractPolylineTranslation||Q.extractVerticesTranslation)&&m.multiply(e),w&&(b.modelMatrix=m.toArray()),b.modelViewMatrix=m.premultiply(B).toArray(),S=!1,M=x.s("shape3d.material"),M?("string"==typeof M&&(M=Q.getMaterial(M)),X.cullFace.enabled=M&&M.cullFace?!0:!1,S=M&&M.flipSide?!0:!1,x._flipSide&&(S=!S),S&&(X.cullFace.frontFace=2304)):(X.cullFace.enabled=!!x.s("shape3d.reverse.cull"),x._flipSide&&(S=!0,X.cullFace.frontFace=2304)),H.renderShapeModel(C,q,R,V),S&&(X.cullFace.frontFace=2305)}}},H.resetProperties=G};An.PARAMS=["quality","intensity","bias","radius","type","degree.x","degree.z","bounding"],hs.ms_shadow=function(y){An.PARAMS.forEach(function(J){var C=J.replace(/(^|\.)[a-z]/g,function($){return $[$.length-1].toUpperCase()}),U=C.charAt(0).toLowerCase()+C.substr(1);y["getShadow"+C]=function(){return this._getShadowParam(U)},y["setShadow"+C]=function(Y){this._setShadowParam(U,Y)}}),y.getCurrentShadowBounding=function(e){(e||!this.shadowMap.boundingSphere)&&this.shadowMap.setupShadowCamera();var $=this.shadowMap.boundingSphere;return[$.center.x,$.center.y,$.center.z,$.radius]},y.refreshShadow=function(){this.shadowMap.refresh()},y.enableShadow=function(g){this.shadowMap.setShadow(!0,g)},y.disableShadow=function(){this.shadowMap.setShadow(!1)},y._getShadowParam=function(X){return this.shadowMap.getShadow()[X]},y._setShadowParam=function(z,q){var h=this._getShadowParam(z),T={};T[z]=q;var e=this.shadowMap;e.setShadow(e.enable,T),this.firePropertyChange("shadow"+z.charAt(0).toUpperCase()+z.substr(1),h,q)}};var Zq=function(h){function n(E,w,o){var K=h.getData3dUI(o),O=K.s("shape3d");if("billboard"===O||"plane"===O){var A;(A=$[w])||(A=$[w]=new Ss(h));var M=o.s("effect.flow.size"),U=o.s("effect.flow.uvshape"),W=o.getFinalScale3d(),G=W[0],X="billboard"===O?W[1]:W[2];G>X?(X=X/G*M,G=M):(G=G/X*M,X=M),G=Math.max(128,Math.round(G)||0),X=Math.max(128,Math.round(X)||0),A.setSize(E,G,X),A.bind(E);var e=h.getViewport(E);h.setViewport(E,0,0,G,X),E.clear(16640);var q,K=h.getData3dUI(o),i=Xb(K,O);if(!i)return!1;!i.ns&&i.length&&(i=i[0]),Fj(i),q=i.vs;var l,c=o.s("effect.flow.gradient");if(c){if(l="Flow3d.Cached."+c,!f.Default.getImageMap()[l]){var y=100;f.Default.setImage(l,f.Default.toCanvas({width:y,height:y,comps:[{type:"rect",background:"rgb(0,0,0)",gradient:c,rect:[0,0,y,y]}]},y,y))}}else l=o.s("shape3d.image");var u=B.indexOf(U);-1===u&&0===U.indexOf("polygon")&&(u=Op(1*U.substring(7),3,1024)-1),h._prefabRenderer.render(E,{model3d:!0,mesh:{position:q},mat:{type:"flow",useXZ:"plane"===O,image:h.getTexture(l,o),blend:o.s("effect.flow.blend")||s,uvMatrix:Ir(K.s("shape3d.uv.rotation"),K.s("shape3d.uv.offset"),K.s("shape3d.uv.scale"),K.s("shape3d.uv.anchor"),v).toArray9(),intensity:o.s("effect.flow.intensity"),shape:u}}),A.unbind(E),h.setViewport(E,e[0],e[1],e[2],e[3]);var j=o.getMatrix4();j.getInverse(j);var m=j.getElements();"plane"===O?m[1]=m[5]=m[9]=m[13]=0:m[2]=m[6]=m[10]=m[14]=0,C[w]={matrix:j,group:o.s("effect.flow.group")}}}var v,P=this,$=this.renderTargetPool=[],C=[],B=["rect","circle","polygon"],j=!1;P.render=function(){if(!h._picking){var G=h._flowObjects;if(G.length){var O=h.getGL();if(O){j=!0;var e=h._frameState.renderState,i=e.glState;i.blend.enabled=!1,i.depth.enabled=!1,i.cullFace.enabled=!1;var x=i.color.clear.slice(0);dh(O,[0,0,0,1]);var P,N;for(P=0,N=G.length;N>P;P++)n(O,P,G[P]);dh(O,x),$.length!==N&&$.splice(N,$.length-N),j=!1}}}},P.contextLost=function(){var A=h.getGL();A&&($=this.renderTargetPool=[])},P.createFlow=function(R){var w;if(!j&&(w=$.length)){R||(R=h._frameState.renderState.directUniforms());for(var u=[],W=[],P=[],Q=0;w>Q;Q++)u[Q]=C[Q].matrix.toArray(),W[Q]=$[Q].texture,P[Q]=!1;R.flowMatrix=u;for(var Q=0;w>Q;Q++)R["flowTexture"+Q]=W[Q];R.flowEnabled=P}},P.disableFlow=function(m){var p;if(p=$.length){m||(m=h._frameState.renderState.directUniforms());for(var T=[],O=0;p>O;O++)T[O]=!1;m.flowEnabled=T}},P.resetDataFlowEnabld=function(p,C){return P.resetFlowUniform(p.s("effect.flow.mask"),C)},P.resetFlowUniform=function(v,p){var d=$.length,n=new Array(d);if(v)for(var O=0;d>O;O++)v&1<<C[O].group&&(n[O]=!0);p.flowEnabled=n};var s="white"},lk=function(x){this.gv=x,this.onMouseOver=this.onMouseOver.bind(this),this.resetProperties()};lk.Mode={Disable:0,Selection:1,MouseOver:2,Style:3},hs.ms_highlight=function(O){O.setHighlightMode=function(Y){var d;d="selection"===Y||"selected"===Y?lk.Mode.Selection:"mouseover"===Y||"hover"===Y?lk.Mode.MouseOver:"style"===Y?lk.Mode.Style:lk.Mode.Disable;var H=this.getHighlightMode();this._highlightHelper.mode=d,this.firePropertyChange("highlightMode",H,Y)},O.getHighlightMode=function(){var z=this._highlightHelper.mode;return z===lk.Mode.Selection?"selected":z===lk.Mode.MouseOver?"hover":z===lk.Mode.Style?"style":"disabled"},["type","color","width","glow","strength"].forEach(function(Y){var L=Y.replace(/(^|\.)[a-z]/g,function(W){return W[W.length-1].toUpperCase()});O["getHighlight"+L]=function(){return this._highlightHelper[Y]},O["setHighlight"+L]=function(h){var f=this._highlightHelper,x=f[Y];h!==x&&(f[Y]=h,this.firePropertyChange("highlight"+L,x,h))}})},vn(lk,y,{onMouseOver:function(C){Q.preventDefault(C);var O=this.gv;if(!O._48Q){var f=O.getDataAt(C);f!==this.mouseOverData&&(this.mouseOverData=f,O.iv())}},setFetchTargetFunc:function(n){this.fetchTargetFunc=n},_42:function(M,n){var P,q,x=this,v=x._mode,V=x.gv;if(!M._renderInfo.reflectDepth&&v!==lk.Mode.Disable){if(v===lk.Mode.Selection?P=V.sm().getSelection().toArray(function(M){return M.s("highlight.visible")}):v===lk.Mode.MouseOver&&x.mouseOverData&&x.mouseOverData.s("highlight.visible")&&(P=[x.mouseOverData]),x.fetchTargetFunc&&(P=x.fetchTargetFunc(P)),v===lk.Mode.Style)P=P||[],q=function(j){if(P.indexOf(j)>=0)return!1;var C=V.getDataHighlightMode(j);return C===!1?!0:C===!0?!1:"selected"===C?V.isSelected(j)?!1:!0:"hover"===C?j===x.mouseOverData?!1:!0:!0};else{if(!P||!P.length)return;q=function(v){return P.indexOf(v)<0?!0:void 0}}var w,C,y=V.isVRPresenting();if(V._camera){var i=V._camera.getSize(V);w=i[0],C=i[1]}else if(w=V.getWidth(),C=V.getHeight(),y){var R=V.getWidth;w/=2,V.getWidth=function(){return w};var k=V.getViewport()}var K,J=V.getDevicePixelRatio(),m=Math.floor(w*J),U=Math.floor(C*J);(K=x._renderTarget)?K.setSize(M,m,U):x._renderTarget=K=new ch.RenderTarget(V,M,m,U);var z="soft"===x.type;if(K.bind(M),z){var L=M.getParameter(3106);dh(M,[1,1,1,1]),M.clear(16384),dh(M,L)}else M.clear(16384);V.setViewport(M,0,0,m,U),V.drawFilter=q,wo=function(e,r,q,C,k,B){if(B)return gn(e,r,q,C,k,B);var I=[0,1,1,1];return Ar.for(e).directUniforms().uFixPickReverseColor=I,I},V.getRenderLists().each(function(i){i.beginFillHighlightMaskColor(q)});var A=M._blooming;A&&(M._blooming=!1),V.renderPickScene(),A&&(M._blooming=!0),wo=gn,V.drawFilter=null,V.getRenderLists().each(function(t){t.endFillHighlightMaskColor()}),K.unbind(M);var n=V._prg;gr&&Xg(M,n.aPosition),Xg(M,n.aNormal),y&&(V.getWidth=R,V.setViewport(M,k[0],k[1],k[2],k[3]));var E=V.getHighlightColor();if(x._lastHighlightColor!==E){var W=nm(x._lastHighlightColor=E);x._highlightColorData=[W[0]/255,W[1]/255,W[2]/255,W[3]/255]}return z?x.renderSoftOutline(M,m,U):x.renderHardOutline(M,m,U),Ar.for(M).useProgram(n=V._prg=V.acquireProgram({type:"legacy",defines:{}})),gr&&pp(M,n.aPosition),!0}},renderHardOutline:function(I,C,J){var r=this,W=r.gv,E=W._postProcessing,A=Ar.for(I),o=A.directState();o.blend.enabled=!0,o.depth.enabled=!1,E.blitScreen({type:"highlightHard",image:r._renderTarget.texture,textureSize:[C,J],edgeWidth:W.getHighlightWidth(),edgeColor:r._highlightColorData},{clear:!1}),o.blend.enabled=!1,o.depth.enabled=!0},renderSoftOutline:function(g,K,T){var r,q,G,U,b,h=this,p=h.gv,e=p._postProcessing,E=Math.floor(K/2),I=Math.floor(T/2),y=Math.floor(K/4),l=Math.floor(T/4),V=h._downSampleRenderTarget;V?(r=h._edgeDetectionRenderTarget,q=h._blurV2,G=h._blurH2,U=h._blurV4,b=h._blurH4,(V.width!==E||V.height!==I)&&(V.setSize(E,I),r.setSize(E,I),q.setSize(E,I),G.setSize(E,I),U.setSize(y,l),b.setSize(y,l))):(V=h._downSampleRenderTarget=new ch.RenderTarget(p,g,E,I),r=h._edgeDetectionRenderTarget=new ch.RenderTarget(p,g,E,I),q=h._blurV2=new ch.RenderTarget(p,g,E,I),G=h._blurH2=new ch.RenderTarget(p,g,E,I),U=h._blurV4=new ch.RenderTarget(p,g,y,l),b=h._blurH4=new ch.RenderTarget(p,g,y,l));var O=g.getParameter(3106),D=p.getViewport(),$=h.width,w=h.strength,N=h.glow,d=Ar.for(g).glState,Y=d.depth,X=d.blend,x=Y.enabled;dh(g,[1,1,1,1]),Y.enabled=!1,X.apply({func:[770,1]}),e.blitScreen(V,{type:"blitScreen",image:h._renderTarget.texture}),e.blitScreen(r,{type:"highlightEdgeDetection",image:V.texture,texSize:[E,I],color:h._highlightColorData}),e.blitScreen(G,{type:"highlightBlur",image:r.texture,direction:[1,0],texSize:[E,I],radius:$}),e.blitScreen(q,{type:"highlightBlur",image:G.texture,direction:[0,1],texSize:[E,I],radius:$}),e.blitScreen(b,{type:"highlightBlur",image:q.texture,direction:[1,0],texSize:[y,l],radius:$}),e.blitScreen(U,{type:"highlightBlur",image:b.texture,direction:[0,1],texSize:[y,l],radius:$}),X.apply({enabled:!0}),p.setViewport(g,D[0],D[1],D[2],D[3]),e.blitScreen({type:"highlightFinalBlend",image:h._renderTarget.texture,edgeTexture1:q.texture,edgeTexture2:U.texture,edgeStrength:w*$,edgeGlow:N},{clear:!1}),X.apply({func:[770,771,1,771]}),Y.enabled=x,dh(g,O)},resetProperties:function(){this.mode=lk.Mode.Style,this.type=A["highlight.type"],this.color=A["highlight.color"],this.width=A["highlight.width"],this.glow=A["highlight.glow"],this.strength=A["highlight.strength"]},contextLost:function(){this._renderTarget=null}}),y.defineProperties(lk.prototype,{mode:{get:function(){return this._mode},set:function(Y){var x=this._mode;if(Y!==x){this._mode=Y;var b=x===lk.Mode.MouseOver||x===lk.Mode.Style,k=Y===lk.Mode.MouseOver||Y===lk.Mode.Style;k&&b||(b&&V(this.gv.getView(),"mousemove",this.onMouseOver),k&&e(this.gv.getView(),"mousemove",this.onMouseOver))}}}});var Ds=Q.meshTypeMap={box:function(){return Q.createBoxModel()},sphere:function(M){return Q.createSphereModel(M.side,M.sideFrom,M.sideTo,M.from,M.to,M.resolution,M.smooth)},cylinder:function(){return Q.createCylinderModel(side,sideFrom,sideTo,from,to,top,bottom,smooth)},cone:function(){return Q.createConeModel(side,sideFrom,sideTo,from,to,bottom,resolution,smooth)},torus:function(){return Q.createTorusModel(side,sideFrom,sideTo,from,to,radius,resolution,smooth)}};!function(){for(var x in Vq)Ds[x]=Vq[x]}(),Ds.bone=function(){var u=5,g=new Array(u);return function(b){for(var _=b.ratio||.1,B=b.resolution||8,m=null,Z=0;u>Z;Z++){if(g[Z])return g[Z].ratio==_&&g[Z].resolution==B&&(g[Z].active=Date.now()),g[Z].mesh;m=Z}if(!m)for(var U=1/0,Z=0;u>Z;Z++)g[Z].active<U&&(U=g[Z].active,m=Z);var l=[],t=[];_*=.5,l.push(0,0,0,0,0,.5);for(var Z=0;B>Z;Z++){var S=2*Z/B*Math.PI;l.push(Math.cos(S)*_,Math.sin(S)*_,_),Z>0&&(t.push(0,Z+2,Z+1),t.push(Z+1,Z+2,1))}return t.push(0,2,B+1),t.push(B+1,2,1),g[Z]={active:Date.now(),resolution:B,ratio:_,mesh:{vs:l,is:t}},g[Z].mesh}}();var Es={};og(Es,{pbr:{diffuse:[1,1,1],emissive:[0,0,0],roughness:1,metalness:0,opacity:1,map:null,alphaMap:null,alphaChannel:"A",alphaTest:n,roughnessMap:null,roughnessChannel:"R",metalnessMap:null,metalnessChannel:"G",emissiveMap:null,aoMap:null,aoMapIntensity:1,aoChannel:"B",aoUvChannel:1,normalMap:null,normalScale:[1,1],lightMap:null,lightMapIntensity:1,envMap:null,envMapIntensity:1,displacementMap:null,displacementScale:1,displacementBias:0,rimColor:[0,0,0],rimPower:0,fresnelIntensity:1},phong:{diffuse:[1,1,1],emissive:[0,0,0],specular:[17/255,17/255,17/255],shininess:30,opacity:1,map:null,alphaMap:null,alphaChannel:"A",alphaTest:n,specularMap:null,emissiveMap:null,aoMap:null,aoMapIntensity:1,aoChannel:"B",aoUvChannel:1,normalMap:null,normalScale:[1,1],lightMap:null,lightMapIntensity:1,envMap:null,envMapCombine:"add",envMapIntensity:1,refractionRatio:.98,displacementMap:null,displacementScale:1,displacementBias:0,fresnelIntensity:1}},!0),f.Default.getMaterialDefaultStyle=function(){return Es};var Fs=ch.PrefabRenderer=function(F){this.gv=F};Fs.prototype={},Fs.prototype.constructor=Fs,_q("model"),_q("mesh"),_q("material"),_q("shader"),function(){function J(){return h.length?h.pop():new pd
}function q(_){h.push(_)}function y(V,Z,S){var J,h=!1;if(V.prefix&&m){var F=m.a(d+Z);F!==n&&(h=!0,J=F)}return J===n&&(J=V[Z]),J&&J.func&&(h=!0,J=U(J,m,view)),S&&(J=S(J),h||(V[Z]=J)),J}function U(c,L,g){if(!c||!c.func)return c;var P,a=c.func,H=c.value;return P=Le(a)?a(L,g):L?Ef.test(a)?L.a(d+a.slice(5)):Lh.test(a)?L.s(d+a.slice(6)):oh.test(a)?L[a.slice(6)]:L[a]?L[a](g):H:H,H!==n&&P==O?H:P}function D(p,D){if(p){var V=p.s("matDef");return V&&V[D]}}function G(K,R){var m=J(),z=y(K,"composedMatrix");if(z)return m.copy(z),m;var a,Q,f,q,U,s=!1;if(R&&(q=K.name)&&(U=R._animationId)){var i,e=xt.getAnimationMap()[U];if(e&&(i=e.clip)){var G,O,X=xt.getAnimationTracks()[e.animation][0];if(G=X[q]){var w=i.datas;s=!0,(O=G[0])!==n&&(a=w[O]),(O=G[1])!==n&&(f=w[O]),(O=G[2])!==n&&(Q=w[O])}}}var Z=y(K,"transformData");if(s&&Z){m.identity();var M=Z.rotationOffset,v=Z.rotationPivot,k=Z.scalingOffset,t=Z.scalingPivot;return I.fromArray(a||Z.translation),M&&I.add(u.fromArray(M)),v&&I.add(u.fromArray(v)),m.makeRotationFromQuaternion(j.fromArray(f||Z.rotation)).setPosition(I),I.set(0,0,0),v&&I.sub(u.fromArray(v)),k&&I.add(u.fromArray(k)),t&&I.add(u.fromArray(t)),(0!==I.x||0!==I.y||0!==I.z)&&m.translate(I),Q=Q||Z.scale,(1!==Q.x||1!==Q.y||1!==Q.z)&&m.scale(F.fromArray(Q)),t&&m.translate(u.multiplyScalar(-1)),m}return a=a||y(K,"position"),Q=Q||y(K,"scale"),f=f||y(K,"quaternion"),f?f=j.fromArray(f):(f=y(K,"euler"),f&&(f=j.setFromEuler(l.fromArray(f)))),m.compose(a?I.fromArray(a):S,f||B,Q?F.fromArray(Q):c),m}function v(A,z,R){return g=A,z instanceof f.Data?(m=z,H=null):(m=null,H=z),[g,m,H,R]}function i(q){g=q[0],m=q[1],H=q[2],d=q[3]}function C(q){if(q){"string"==typeof q&&(q={type:q});var s,i=q.type;if(i&&"raw"!==i){var E=Q.meshTypeMap[i];if(s=E?E(q):Q.getMesh(i),!s)return!1}else s=q;return s.func&&(s=s.func(s)),s}}function E(G,_,A){var B=C(_);if(!B)return 0;if(Fj(B)||!B._4HQ){B._4HQ=!0;for(var Z in B)"is"!==Z&&Se(B[Z])&&(B[Z]=new yr(B[Z]))}if(A&&!A._complete_){A._complete_=!0;for(var Z in A)Se(A[Z])&&(A[Z]=new yr(A[Z]))}var c=Ar.for(g),K=c.directAttribs();K.disable();var y,V=B.index||B.is,P=!V,X=0;return K.apply(B,function(v,h,o){var b,t=$[h]||h;if(A&&(b=A[t])!==n){if(!b.length)return null;var l=M[o.desc.activeInfo.type];return X||(X=b.length/l),Kg(g,null,b,null,l)}return b=v[t],b!=n&&b.length?(P&&(P=!1,y=b.length/M[o.desc.activeInfo.type]),eg(g,null,b)):null}),V?(_j(g,G._buffer.is,V),{length:V.length,instances:X,uint32:V instanceof Uint32Array,is:!0}):{length:y||B.vs.length/3,instances:X,is:!1}}function z(l,N){return[l[0]*N,l[1]*N,l[2]*N]}function R(q,h,X){var t=h[q];return t!==n?t:X?X[q]:null}function X(W,R){W.uUseSkinning=!0,W.bindMatrix=R.skeleton.bindMatrix,W.bindMatrixInverse=R.skeleton.bindMatrixInverse,W.boneTexture=R.boneTexture,W.boneTextureSize=R.boneTextureSize}function k(I){var W=I.s("light.intensity");W=(W==O?1:W)*Math.PI;var T=cs(I.s(xj)),l=T[0],e=T[1],$=T[2];return[l*W,e*W,$*W]}function x(S,u){var c,G=S._headlightDirection;c=G&&3===G.length?G:"shadow"===G?S.shadowMap.getDirection():js(S.getCenter(),S.getEye());var t=S._lastLightUploadInfo,P=t.headlightColor;Z.color=z(P,Math.PI*S._headlightRatioForPhysicalMaterial),u.hemisphereLight.direction=Ri.normalizeArray(S._transformDirectionToViewSpace(c)),u.hemisphereLight.groundColor=Z.groundColor,u._lastLightMask=n,u._lastHeadlightAmbientIntensity=n;var L,l,D,s;if(D=S._59O){for(L=0,l=D.length,s=[];l>L;L++)s.push({position:S._transformPointToViewSpace(D[L].p3()),color:k(D[L]),distance:D[L].s("light.range"),decay:1,enable:!1});u.pointLights=s}if(D=S._spots){for(L=0,l=D.length,s=[];l>L;L++){var M=D[L].s("light.angle");s.push({position:S._transformPointToViewSpace(D[L].p3()),color:k(D[L]),direction:D[L].s("light.rotation.enable")?S._transformDirectionToViewSpace(uc([0,0,1],D[L])):S._transformDirectionToViewSpace(D[L].s("light.center"),D[L].p3()),decay:1,enable:!1,distance:D[L].s("light.range"),coneCos:b(M/2),penumbraCos:b(M/2*(1-D[L].s("light.exponent")))})}u.spotLights=s}if(D=S._dirs){for(L=0,l=D.length,s=[];l>L;L++)s.push({direction:D[L].s("light.rotation.enable")?S._transformDirectionToViewSpace(uc([0,0,1],D[L])):S._transformDirectionToViewSpace(null,D[L].p3()),color:k(D[L]),enable:!1});u.directionalLights=s}if(D=S._87I){var m,J,O=new Ri;for(L=0,l=D.length,s=[];l>L;L++)Gh.fromArray(Xi(D[L])),Gh.premultiply(bf.fromArray(S._viewMatrix)),bf.identity().extractRotation(Gh),m=O.set(.5*-D[L].s("light.size")[0],0,0).applyMatrix4(bf).toArray(),J=O.set(0,.5*D[L].s("light.size")[1],0).applyMatrix4(bf).toArray(),s.push({position:S._transformPointToViewSpace(D[L].p3()),color:k(D[L]),halfWidth:m,halfHeight:J,enable:!1,disableSpecular:D[L].s("light.specular.disable")});if(u.rectAreaLights=s,Q.LTC_FLOAT_1){var h=S.getGL();h._LTC_1||(h._LTC_1=S.createTexture(Q.LTC_FLOAT_1)),h._LTC_2||(h._LTC_2=S.createTexture(Q.LTC_FLOAT_2)),u.ltc_1=h._LTC_1,u.ltc_2=h._LTC_2}}}function e(m,N,g,B){if(B!==m._lastHeadlightAmbientIntensity&&(m.hemisphereLight.skyColor=z(Z.color,1-B),m.ambientLightColor=z(Z.color,B),m._lastHeadlightAmbientIntensity=B),g!==m._lastLightMask){m._lastLightMask=g;var a=N._lastLightUploadInfo;if(a){var e,$,d,J=a.g,n=J.length,y=new Array(n);for($=0;n>$;$++)e=J[$],d=0>e||e>=32?!1:!!(g&1<<e),y[$]=d;m.hemisphereLight.enabled=y[0];var t=N._59O,o=N._spots,I=N._dirs,i=N._87I,Q=1;if(n=t.length)for($=0;n>$;$++)m.pointLights[$].enabled=y[Q++];if(n=o.length)for($=0;n>$;$++)m.spotLights[$].enabled=y[Q++];if(n=I.length)for($=0;n>$;$++)m.directionalLights[$].enabled=y[Q++];if(n=i.length)for($=0;n>$;$++)m.rectAreaLights[$].enabled=y[Q++]}}}function Y(p){var h=p.blend,f=p.image;return{uDiffuse:p.color||A["color.empty"],uTexture:!!f,uSampler:f,uDiscardSelectable:p.discardSelectable===!1,uBlend:!!h,uBlendColor:h,uLight:p.light!==!1,uPartOpacity:p.opacity,uReverseFlip:p.reverseFlip,uFixPickReverseColor:p.reverseColor||fb}}var m,H,g,t,d="",K={},h=[],P=new pd,S=new Ri(0,0,0),B=new zn,c=new Ri(1,1,1),I=new Ri,u=new Ri,F=new Ri,j=new zn,l=new Cm,$={aPosition:"vs",aUv:"uv",aUv2:"uv2",aNormal:"ns"},V={color:"gray"},T={type:"fixColor",color:"black"},M={};M[5126]=1,M[35664]=2,M[35665]=3,M[35666]=4,M[35674]=4,M[35675]=9,M[35676]=16;var L={linear:"UseLinearToneMapping",reinhard:"UseReinhardToneMapping",cineon:"UseCineonToneMapping",aces:"UseACESFilmicToneMapping"},p=function(H,v){var E=L[v];return E?H[E]=!0:void 0},r={triangles:4,triangleStrip:5,triangleFan:6,lines:1,lineLoop:2,lineStrip:3,points:Vg.POINTS},Z={groundColor:[0,0,0]},W=new Tc.Matrix2d,N=function(M){var i=M.cachePick;if(i.length!==M.length||i.version!==M.csVersion){i.buffer=new yr(4*M.length);for(var h=0,K=i.buffer,U=M.cs,c=4*M.length;c>h;h+=4)K[h]=U[h],K[h+1]=U[h+1],K[h+2]=U[h+2],K[h+3]=U[h+3];i.length=M.length,i.version=M.csVersion}return i.buffer},o=new pd,s=new pd,a=function(Q,e,l,a,D){var T=D?a.cacheShadow:a.cache;if(T.length===a.length&&T.version===(D?a.shadowVersion:a.msVersion)&&T.id===e._id&&l.equals(T.matrix))return T.buffer;var h=a.ms,I=D?a.shadow:null;o.fromArray(Q.getData3dUI(e).mat),s.copy(l).premultiply(o.getInverse(o));var $,w,b,x,J,P,Y,k,z,U,r,R,f,p,K,E,u,S=s.getElements(),V=S[0],X=S[4],O=S[8],n=S[12],j=S[1],L=S[5],C=S[9],m=S[13],t=S[2],F=S[6],H=S[10],Z=S[14],i=S[3],c=S[7],_=S[11],B=S[15],q=16*a.length;T.buffer&&T.buffer.length===q?(u=T.buffer,delete u._bufId):u=new yr(q);for(var g=0,v=q;v>g;g+=16)I&&!I[g>>4]?u[g+0]=u[g+1]=u[g+2]=u[g+3]=u[g+4]=u[g+5]=u[g+6]=u[g+7]=u[g+8]=u[g+9]=u[g+10]=u[g+11]=u[g+12]=u[g+13]=u[g+14]=u[g+15]=0:($=h[g+0],w=h[g+4],b=h[g+8],x=h[g+12],J=h[g+1],P=h[g+5],Y=h[g+9],k=h[g+13],z=h[g+2],U=h[g+6],r=h[g+10],R=h[g+14],f=h[g+3],p=h[g+7],K=h[g+11],E=h[g+15],u[g+0]=$*V+w*j+b*t+x*i,u[g+4]=$*X+w*L+b*F+x*c,u[g+8]=$*O+w*C+b*H+x*_,u[g+12]=$*n+w*m+b*Z+x*B,u[g+1]=J*V+P*j+Y*t+k*i,u[g+5]=J*X+P*L+Y*F+k*c,u[g+9]=J*O+P*C+Y*H+k*_,u[g+13]=J*n+P*m+Y*Z+k*B,u[g+2]=z*V+U*j+r*t+R*i,u[g+6]=z*X+U*L+r*F+R*c,u[g+10]=z*O+U*C+r*H+R*_,u[g+14]=z*n+U*m+r*Z+R*B,u[g+3]=f*V+p*j+K*t+E*i,u[g+7]=f*X+p*L+K*F+E*c,u[g+11]=f*O+p*C+K*H+E*_,u[g+15]=f*n+p*m+K*Z+E*B);T.length=a.length,T.version=D?a.shadowVersion:a.msVersion,T.id=e._id,T.buffer=u;var W;return(W=T.matrix)||(W=T.matrix=new pd),W.fromArray(l.getElements()),u},_=function($,j,U,k){var B=this;if(y(j,"visible")!==!1){var b=B.gv,S=v($,U,d),f=j.prefix;f&&(d=d+j.prefix+".");var F;if(F=j.matDef)for(var h in F)K[h]=F[h];var _=J().copy(P);k&&P.fromArray(k);var L=G(j,m,P);P.multiply(L),q(L);var z=!1,M=!1,w=!1;do{var l=y(j,"model");if(l){l=Q.getModel(l),l&&B.render(g,l,U);break}var A=y(j,"mesh");if(!A)break;var s,I,u=b._picking;if(m&&m.s("static")){var c=b.getRenderLists().get(m.getRenderLayer()).getModel3dInstancedBatchMap();if(c&&(c=c[b.getStaticInstancingKey(m)])&&c.length>1){if(c.rendered&&c.rendered!==m._id)break;s=a(b,m,P,c,!1),u&&(I=N(c)),c.rendered=m._id}}var C,o,Z=null,ig=y(j,"mat");if(ig){if("string"==typeof ig){var ve=D(m,ig)||K[ig];if(ve){if(Vp(ve)&&(ve=Q.getMaterial(ve),!ve))break}else if(ve=Q.getMaterial(ig),!ve)break;ig=ve}}else ig=V;var xj=y(ig,"transparent")===!0;if(!!b._45Q!==xj)break;t=Es[ig.type];var bq,Ec=!!(j.skeleton&&m&&(bq=b._updatedSkeletonDatas[j._skeletonId+"|"+m._lastAnimTimestamp]));if(Ec){var Ze;j.boneTexture?(Ze=j.boneTextureSize,g.activeTexture(33984),Lf(g,j.boneTexture),g.texImage2D(3553,0,34836,Ze,Ze,0,6408,5126,bq),Lf(g,O)):(Ze=j.boneTextureSize=Math.round(Math.sqrt(bq.length/4)),j.boneTexture=b.createTexture({data:bq,width:Ze,height:Ze,type:5126,filter:9728,clampToEdge:!0}))}if(!u||ig.renderPickMap){var ie=Ar.for(g);if(ig.type){var vj,Oc,Bn=ig.type;if(!(Oc=Fo[Bn])||Oc.isRaw){if(!Oc){if(Oc=Q.getShader(Bn),!Oc)break;var ac=Oc.split(/\/\/ *FS/i);if(2!==ac.length){Fo[Bn]=Fo.fixColor;break}Fo[Bn]={vs:ac[0],fs:ac[1],sourceCodeId:Tc.generateIncreasingID(),isRaw:!0}}vj=b.acquireProgram({type:Bn,cacheKey:Bn+"|"+Fo[Bn].sourceCodeId})}else{var Pe=m?m.s("3d.clip.direction"):0,Sj=!(!j.instances&&!s);switch(m&&g._blooming&&!m.s("bloom")&&(Bn="fixColor",T.cullFace=ig.cullFace,T.flipSide=ig.flipSide,ig=T),Bn){case"fixColor":vj=b.acquireProgram({type:"fixColor",defines:{CLIP_DIRECTION:!!Pe,USE_INSTANCING:Sj}});break;case"pbr":case"phong":var Z,Kk,jf=1;if(m||H){var oq=m?m.s("envmap.probe"):H.envmapProbe||0;if(-1!==oq){Kk=!0;var jf=m?m.s("envmap"):H.envmap||0;jf&&(jf*=b._envmapRenderer._envmapIntensity[oq],Z=oq)}}if(!Kk&&(Z=ig.envmap||ig.envMap)){var ic=b.getTexture(Z);ic&&ic!==g._emptyTexture||(Z=null)}var Ti=!!ig.displacementMap&&b._glCapabilities.vertexTextures,Po=R("aoUvChannel",ig,t)||1,bc={DOUBLE_SIDED:!ig.cullFace,CLIP_DIRECTION:!!Pe,USE_UV:!!ig.map||!!ig.alphaMap||!!ig.emissiveMap||!!ig.normalMap||Ti||1==Po&&!!ig.aoMap,USE_MAP:!!ig.map,USE_ALPHAMAP:!!ig.alphaMap,USE_AOMAP:!!ig.aoMap,USE_LIGHTMAP:!!ig.lightMap,USE_EMISSIVEMAP:!!ig.emissiveMap,USE_NORMALMAP:!!ig.normalMap,USE_ALPHATEST:R("alphaTest",ig,t)!=O,TANGENTSPACE_NORMALMAP:!!ig.normalMap,USE_DISPLACEMENTMAP:Ti,USE_ENVMAP:Z!=O,ENVMAP_TYPE_CUBE_UV:!0,UV_CLIP:!(!b._uvClipEnabled||7!=Pe&&8!=Pe),USE_INSTANCING:Sj,USE_SKINNING:Ec,BONE_TEXTURE:!0};bc["ALPHAMAP_CHANNEL_"+R("alphaChannel",ig,t)]=!0,m&&m.s("effect.flow.mask")!==Bi||(bc.MAX_FLOW_OBJECT=0),bc["AOMAP_"+R("aoChannel",ig,t)+"_"+Po]=!0;var Wq=!1;if("pbr"===Bn)ig.roughnessMap&&(bc.USE_ROUGHNESSMAP=!0,bc["ROUGHNESSMAP_CHANNEL_"+R("roughnessChannel",ig,t)]=!0,Wq=!0),ig.metalnessMap&&(bc.USE_METALNESSMAP=!0,bc["METALNESSMAP_CHANNEL_"+R("metalnessChannel",ig,t)]=!0,Wq=!0),bc.NUM_RECT_AREA_LIGHTS=b._87I.length;else if("phong"===Bn){var Zf=ig.envMapCombine;Zf="mix"===Zf?"ENVMAP_BLENDING_MIX":"add"===Zf?"ENVMAP_BLENDING_ADD":"ENVMAP_BLENDING_MULTIPLY",bc[Zf]=!0,ig.specularMap&&(bc.USE_SPECULARMAP=!0,Wq=!0),bc.NUM_RECT_AREA_LIGHTS=0}Wq&&(bc.USE_UV=!0),xj||(bc.OPAQUE=!0),p(bc,b.getToneMapping()),vj=b.acquireProgram({type:Bn,defines:bc});break;default:vj=b.acquireProgram(ig)}}if(!vj)break;w=!0,ie.useProgram(vj),C=ie.directUniforms(),o=ie.directState(),o.cullFace.enabled=!!ig.cullFace;var hp=!!ig.flipSide;m&&m._flipSide&&(hp=!hp),o.cullFace.frontFace=hp?2304:2305,C.uProjectMatrix=b._projectMatrix,C.uViewMatrix=b._viewMatrix,C.uTime=b.__uptime,vj._dirty&&(vj._dirty=n,("pbr"===vj.name||"phong"===vj.name)&&x(b,C),C.uClipperMatrix=b._boxClipperMatrixes,C.uClipperClipInner=b._boxClipperClipInner,b._fogDisabled||(C.uFogColor=b._fogColor,C.uFogDensity=b._fogDensity,C.uFogNear=b._fogNear,C.uFogFar=b._fogFar),C.toneMappingExposure=b.getToneMappingExposure()),C.uCameraPosition=b.getEye(),b.shadowMap.enable&&b.shadowMap.createShadow(C),b.flowMap.createFlow(C),b._87I&&Q.LTC_FLOAT_1&&(C.ltc_1=g._LTC_1,C.ltc_2=g._LTC_2)}else ig=Y(ig);ig.uUvMatrix=Ir(ig.uvRotation,ig.uvOffset,ig.uvScale,ig.uvAnchor,W).toArray9(),ig.uUv2Matrix=Ir(ig.uv2Rotation,ig.uv2Offset,ig.uv2Scale,ig.uv2Anchor,W).toArray9()}var ji;ji=s?{aMatrixInstanced:s,aBatchColor:I}:y(j,"instances");var Qr=E(b,A,ji);if(!Qr)break;if(Qr.instances&&(C||(C=Ar.for(g).directUniforms()),I&&(C.uBatchColor=!0),C.uUseInstance=!0,M=!0),s?ns(b):(z=!0,ns(b,P.toArray())),!u||ig.renderPickMap){var tk=d;d+="mat.",C||(C=ie.directUniforms());var ts=vj&&("pbr"===vj.name||"phong"===vj.name);if(m?Io(g,b,m,ts):H&&qc(g,b,H,ts),ts){if(m?e(C,b,m.s("shape3d.light")?m.s("light.mask"):0,m.s("headlight.ambientIntensity")||b._headlightAmbientIntensity):H?e(C,b,H.light==O?H.lightMask===n?Yb:H.lightMask:0,H.headlightAmbientIntensity||b._headlightAmbientIntensity):e(C,b,0,0),Z!=O){if(Kk){var Zc=b._envmapRenderer._envmaps[Z];C.envmap=Zc?Zc.texture:g._emptyTexture}else C.envmap=b._envmapRenderer.assureEnvmapFromEquirectangular(Z);C.envMapIntensity=jf*R("envMapIntensity",ig,t)}Ec&&X(C,j)}C.apply(ig,function(U,S,c){if("envmap"!==S&&"envMapIntensity"!==S){var N=y(U,S);if(N===n&&t&&(N=t[S]),!(!N||35678!==c&&35680!==c||N instanceof WebGLTexture))if(Se(N)){var Y=N,g=Y.length;N=new Array(g);for(var T=0;T<Y.length;T++)N[T]=b.getTexture(Y[T],m)}else N=b.getTexture(N,m);return N}}),d=tk}else Ec&&(C=C||Ar.for(g).directUniforms(),X(C,j));var Bd,sl,wi=r[ig.renderMode];j.drawRange?(Bd=j.drawRange[0],sl=j.drawRange[1]):(Bd=0,sl=Qr.length),m&&b.onPreRenderData(m,g),Qr.is?nr(g,Bd,sl,wi,Qr.uint32?5125:null,Qr.instances):ir(g,Bd,sl,wi,Qr.instances),m&&b.onPostRenderData(m,g),Ec&&(C.uUseSkinning=!1)}while(!1);z&&Si(b),M&&(C.uUseInstance=!1,C.uBatchColor=!1),w&&b._prg&&(ie.useProgram(b._prg),ie.directAttribs().disable(),o.cullFace.frontFace=2305,b.shadowMap.enable&&b.shadowMap.createShadow(),b._envmapRenderer.resetUniformCache(),b.flowMap.createFlow());var Fn=j.comps;if(Fn&&Fn.length)for(var uq=0,zn=Fn.length;zn>uq;uq++)B.render(g,Fn[uq],m);if(q(P),P=_,F=j.matDef)for(var h in F)K[h]=n;i(S)}},w=function(A,Y,$,N,S){var H=this;if(y(Y,"visible")!==!1){var l=v(A,$,d),_=Y.prefix;_&&(d=d+Y.prefix+".");var x=J().copy(P);N&&P.fromArray(N);var u;if(u=Y.matDef)for(var c in u)K[c]=u[c];var z=G(Y,m,P);P.multiply(z),q(z);do{var F=y(Y,"model");if(F){F=Q.getModel(F),F&&H.renderShadow(g,F,$,null,S);break}var W=C(y(Y,"mesh"));if(!W)break;var E;if(m&&m.s("static")){var O=H.gv,b=O.getRenderLists().get(m.getRenderLayer()).getModel3dInstancedBatchMap();if(b&&(b=b[O.getStaticInstancingKey(m)])&&b.length>1){if(b.rendered&&b.rendered!==m._id)break;E=a(O,m,P,b,!0),b.rendered=m._id}}Fj(W);var p=y(Y,"mat");if(p){if("string"==typeof p){var L=D(m,p)||K[p];if(L){if(Vp(L)&&(L=Q.getMaterial(L),!L))break}else if(L=Q.getMaterial(p),!L)break;p=L}}else p=V;var B=E?{aMatrixInstanced:E}:y(Y,"instances");S(P,W,p,B,Y)}while(!1);var I=Y.comps;if(I&&I.length)for(var k=0,r=I.length;r>k;k++)H.renderShadow(g,I[k],m,null,S);if(q(P),P=x,u=Y.matDef)for(var c in u)K[c]=n;i(l)}};Fs.prototype.render=_,Fs.prototype.renderShadow=w}();var Gs=f.Light=function(){Ig(Gs,this),this.s(xj,A[xj]),this.s(Yd,"sphere"),this.s("shape3d.reverse.cull",!0),this.s3(20,20,20)};Yf("Light",ih,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(x,J,Y){Gs.superClass.onStyleChanged.apply(this,arguments),x===xj&&this.s("shape3d.color",Y)}});var Hs=ch.FrameState=function(B,l){this.renderState=Ar.for(l),this.picking=!1,this.envmapReflectivity=.5,this.cameraPosition=n,this.projectMatrix=n,this.viewMatrix=n,this.view=B,this.defaultProgram=n,this.pickColorMap=n,this._pvStack=[],this._renderStateStack=[]};Hs.prototype.savePV=function(){var Y=this.view;this._pvStack.push([Bg(this.projectMatrix),Bg(this.viewMatrix),Y._18Q,Bg(Y._7O)])},Hs.prototype.restorePV=function(){var m=this._pvStack.pop();if(m){var x=this.view;this.projectMatrix=x._projectMatrix=m[0],this.viewMatrix=x._viewMatrix=m[1],x._18Q=m[2],x._7O=m[3]}},Hs.prototype.setPV=function(D,R){var n=this.view,b=!1;if(D&&(this.projectMatrix=n._projectMatrix=D,b=!0),R&&(this.viewMatrix=n._viewMatrix=R,n._7O=Bg(R),b=!0),b){var H=n.getWidth(),L=n.getHeight(),h=Bg(this.projectMatrix);n._18Q=Tg(h,h,R),n._18Q._wh=H/L}},Hs.prototype.syncEnv=function(K){var e=this,o=e.view;e.envmapReflectivity=o._envmapReflectivity||.5,e.cameraPosition=o.getEye(),e.projectMatrix=o._projectMatrix,e.viewMatrix=o._viewMatrix,e.pickColorMap=K,e.picking=o.getGL()._picking},Hs.prototype.setGLState=function(){var Z=[0,0,0,0],b=[!0,!0,!0,!0],x=[-1,1],t=[32774,32774],W=[770,771,1,771];return function(s,n){var O=this;O.renderState.gl;var S=O.renderState.glState;S.dither=!1,n?S.color.mask=b:S.color.reset(),S.pixelStore.reset(),S.blend.color=Z,S.blend.equation=t,S.blend.func=W,S.cullFace.enabled=!1,S.scissor.enabled=!1,S.depth.enabled=!0,S.depth.clear=1,S.depth.func=515,S.depth.range=x,S.stencil.enabled=!1,S.polygonOffset.enabled=!1,s?(S.depth.mask=!1,S.blend.enabled=!0):(S.depth.mask=!0,S.blend.enabled=!1)}}(),Hs.prototype.setUniforms=function(g){var i=this,o=i.view,s=i.renderState,e=s.gl,M=s.uniforms;M.uBrightness=1,M.uOpacity=1,M.uPartOpacity=1,M.uUseSkinning=!1,M.uUseInstance=!1,M.uTexture=!1,M.uBlendTexture=!1,M.uAlphaTest=A.alphaTest,M.uTransparent=!!g,M.uFix=!1,M.uBatchColor=!1,M.uBatchBlend=!1,M.uBatchBrightness=!1,M.envMapIntensity=i.envmapReflectivity||.5,M.uCameraPosition=i.cameraPosition,M.uProjectMatrix=i.projectMatrix,M.uViewMatrix=i.viewMatrix,M.uEnvMap=null,Sq(o,M,Bi),M.uClipperMatrix=o._boxClipperMatrixes,M.uClipperClipInner=o._boxClipperClipInner,M.uEnvmapQuat=o._envmapExtraQuaternion,o._envmapRenderer.resetUniformCache(),i.picking||(Jn(o,e,n),o._fogDisabled||(M.uFogColor=o._fogColor,M.uFogDensity=o._fogDensity,M.uFogNear=o._fogNear,M.uFogFar=o._fogFar))},Hs.prototype.drawLayer=function(A){return this.view.renderLayers(A,!0)},Hs.prototype.drawData=function(P,c,j){var _=this.view;if(_.isVisible(P)){var X=this.renderState,g=X.uniforms,u=_.getData3dUI(P);if(u){var r=X.gl,Y=r._picking,V=_._picking,K=u._pickId;j&&(u._pickId=j),r._picking=_._picking=!!j,g.uTransparent=!!c,u._42(X.gl,X.program,c?W:v),r._picking=Y,_._picking=V,u._pickId=K}}};var Is=ch.Graph3dView=function(v,T){var i=this;i.resetHeadlightProperties(),i.resetFogProperties(),i._webGLVersion=1,i._attributes=T||Q.graph3dViewAttributes,i._25I={},i._view=Kj(1,i);var R;i._attributes&&(R=i._attributes.canvas)||(R=qb(i._view)),i._canvas=R,i.__startTime=Date.now(),i.__uptime=0,e(R,"webglcontextlost",function(u){u.preventDefault(),i._26I&&(i._doBufferGC(i._26I,!0),Wk(i._canvas,0,0),["_highlightHelper","shadowMap","flowMap","_envmapRenderer","_postProcessing"].forEach(function(y){i[y].contextLost()}),i.dm().each(function(D){var p=i.getData3dUI(D);p.contextLost()})),i._26I=O,i._1o.onContextLost(),i._35O=!0}),e(R,"webglcontextrestored",function(){i._35O=!1,i.iv()}),i._40Q=new Rs(i),i._43Q={},i._44Q=-1,i._boneViewMatrices=[],i._batchIndexMap={},i._batchModelMap={},i._wireframeIndexMap={},i._wireframeModelMap={},i._wireframeIndexMapSwap={},i._wireframeModelMapSwap={},i._polylineIndexMap={},i._polylineIndexMap={},i._polylineIndexMapSwap={},i._polylineIndexMapSwap={},i._8O=[],i._modelMatrixStack=[],i._7O=ib(),i._6O=ib(),i._modelMatrix=ib(),i._1o=new _s(i),i._30O=new ct(i),i._31O=new at(i),i._32O=new bt(i),i._raycaster=new nt(i),i._highlightHelper=new lk(i),i._postProcessing=new At(i),i._41Q=[],i._42Q=0,i._frameRenderOptionStack=[],ch.VR?(i.vr=new ch.VR(i),i.isVREnabled=function(){return this.vr.enable},i.isVRPresenting=function(){return this.vr.isPresenting()}):(i.vr={enable:!1,isPresenting:S},i.isVREnabled=S,i.isVRPresenting=S),i.shadowMap=new An(i),i.flowMap=new Zq(i),i._33Q=!0,i._eye=rj(Q.graph3dViewEye),i._center=rj(Q.graph3dViewCenter),i._up=rj(Q.graph3dViewUp),i._lightChanged=!1,i._59O=[],i._spots=[],i._dirs=[],i._87I=[],i._boxClippers=[],i._flowObjects=[],i._frameId=0,i._renderId=0,i._picking=!1,i._batchInfoMap={},i._updatedSkeletonDatas={},i._renderLayerInfoMap={},i._renderLayerSettingsVersion=0,i._gatherRenderLayersByPriority(!0),i.overlappingBox=new ws(i),i._envmapRenderer=new ch.EnvmapRenderer(this),i._prefabRenderer=new ch.PrefabRenderer(this),i.dm(v?v:new gk),i._coreInteractor=new Pc(this),i.setInteractors([new Us(i)]),i._initView(),i._genBatchInstancedArrayFunc()},Js={box:1,sphere:2},Ks={addRGB:"FLOW_BLEND_MODE_ADD_RGB",addRGBA:"FLOW_BLEND_MODE_ADD_RGBA",overrideRGBA:"FLOW_BLEND_MODE_OVERRIDE_RGBA",overrideRGB:"FLOW_BLEND_MODE_OVERRIDE_RGB",overrideA:"FLOW_BLEND_MODE_OVERRIDE_A",multiplyRGB:"FLOW_BLEND_MODE_MULTIPLY_RGB",multiplyRGBA:"FLOW_BLEND_MODE_MULTIPLY_RGBA"},Ls=0;cf("Graph3dView",y,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_shadow:1,ms_highlight:1,ms_quickVisible:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","editHelperDisabled","blockSelectable","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable","zoomToCenter",Bo,zk,"firstPersonMode",Zd,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightDirection","headlightColor","headlightIntensity","headlightAmbientIntensity","headlightRatioForPhysicalMaterial","headlightDisabled","headlightGroup","ortho","orthoWidth","syncEyeWithOrthoWidth","fovy","near","far",fr,je,"up","aspect","fogDisabled","fogMode","fogDensity","fogColor","fogNear","fogFar","pickerResolution","dashDisabled","uvClipEnabled","batchColorDisabled","batchInstancedDisabled","batchBlendDisabled","batchBrightnessDisabled","flowBlendMode","hoverDelay","batchInfoMap","renderLayerInfoMap","rotateMinPhi","rotateMaxPhi","sortable","sortFunc","toneMapping","toneMappingExposure"],_editable:!1,_sortable:Q.graph3dViewSortable,_editHelperDisabled:Q.graph3dViewEditHelperDisabled,_blockSelectable:Q.graph3dViewBlockSelectable,_devicePixelRatio:n,_boundaries:n,_parallelShaderCompile:!1,_moveStep:Q.graph3dViewMoveStep,_rotateStep:Q.graph3dViewRotateStep,_toneMapping:n,_toneMappingExposure:1,_rotateMinPhi:Q.graph3dViewMinPhi===n?Q.graph3dViewRotateMinPhi:Q.graph3dViewMinPhi,_rotateMaxPhi:Q.graph3dViewMaxPhi===n?Q.graph3dViewRotateMaxPhi:Q.graph3dViewMaxPhi,_pannable:Q.graph3dViewPannable,_rotatable:Q.graph3dViewRotatable,_walkable:Q.graph3dViewWalkable,_resettable:Q.graph3dViewResettable,_zoomable:Q.graph3dViewZoomable,_zoomToCenter:!0,_firstPersonMode:Q.graph3dViewFirstPersonMode,_mouseRoamable:Q.graph3dViewMouseRoamable,_gridVisible:Q.graph3dViewGridVisible,_gridSize:Q.graph3dViewGridSize,_gridGap:Q.graph3dViewGridGap,_gridColor:Q.graph3dViewGridColor,_originAxisVisible:Q.graph3dViewOriginAxisVisible,_centerAxisVisible:Q.graph3dViewCenterAxisVisible,_axisXColor:Q.graph3dViewAxisXColor,_axisYColor:Q.graph3dViewAxisYColor,_axisZColor:Q.graph3dViewAxisZColor,_ortho:Q.graph3dViewOrtho,_orthoWidth:Q.graph3dViewOrthoWidth,_syncEyeWithOrthoWidth:Q.graph3dViewSyncEyeWithOrthoWidth,_fovy:Q.graph3dViewFovy,_near:Q.graph3dViewNear,_far:Q.graph3dViewFar,_rectSelectable:Q.graph3dViewRectSelectable,_rectSelectBackground:Q.graph3dViewRectSelectBackground,_editSizeColor:Q.graph3dViewEditSizeColor,_autoMakeVisible:jg,_pickerResolution:Q.graph3dViewPickerResolution,_dashDisabled:Q.graph3dViewDashDisabled,_uvClipEnabled:Q.graph3dViewUvClipEnabled,_batchColorDisabled:Q.graph3dViewBatchColorDisabled,_batchInstancedDisabled:Q.graph3dViewBatchInstancedDisabled,_batchBlendDisabled:Q.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:Q.graph3dViewBatchBrightnessDisabled,_flowBlendMode:Q.graph3dViewFlowBlendMode,addCamera:function(T){var m=this,w=y.freeze({id:m._42Q++,priority:T.priority||0,ignoreInPick:!!T.ignoreInPick,render:T.render});T.switch3DStatus&&(m._43Q[w.id]=!0),m._41Q.push(w),m._41Q.sort(function(S,k){return S.priority!==k.priority?S.priority-k.priority:S.id-k.id})},setEye:function(b,$,k){1===arguments.length&&($=b[1],k=b[2],b=b[0]);var z=this._eye;z[0]=b,z[1]=$,z[2]=k,this.fp(fr,O,z)},setCenter:function(D,L,m){1===arguments.length&&(L=D[1],m=D[2],D=D[0]);var A=this._center;A[0]=D,A[1]=L,A[2]=m,this.fp(je,O,A)},setUp:function(z,U,j){1===arguments.length&&(U=z[1],j=z[2],z=z[0]);var G=this._up;G[0]=z,G[1]=U,G[2]=j,this.fp("up",O,G)},getDevicePixelRatio:function(){return this._picking?this._1o._resolution:this._devicePixelRatio||mr},isTransparentMask:function(g){return g.s("transparent.mask")},getCoreInteractor:function(){return this._coreInteractor},getHighlightHelper:function(){return this._highlightHelper},getRaycaster:function(){return this._raycaster},getAspect:function(){var u=this,p=u._aspect;return p?p:(p=u.getWidth()/u.getHeight(),p||1.2)},getCanvas:function(){return this._canvas},setDataModel:function(J){var D=this,d=D._dataModel,n=D._selectionModel;d!==J&&(d&&(d.ump(D.handleDataModelPropertyChange,D),d.umm(D.handleDataModelChange,D),d.umd(D.handleDataPropertyChange,D),n||d.sm().ums(D.handleSelectionChange,D)),D._dataModel=J,J.mp(D.handleDataModelPropertyChange,D),J.mm(D.handleDataModelChange,D),J.md(D.handleDataPropertyChange,D),n?n._21I(J):J.sm().ms(D.handleSelectionChange,D),D._postProcessing.handleDataModleChange(d,J),D._tryInvalidateEnvmap(),D.invalidateAll(!0),D.invalidateLight(),D.invalidateboxClipper(),D.invalidateFlowObjects(),D._49Q(),D.fp(Rf,d,J),D._canvas.style.background=J.getBackground()||"")},handleDataModelPropertyChange:function(S){var s=S.property;if("background"===s){var W=this._canvas.style.background,A=S.newValue||"";this._canvas.style.background=A,this.fp("canvasBackground",W,A)}else"envmapType"===s?this._tryInvalidateEnvmap():("envmap"===s||"invalidateView"===s)&&this.iv()},handleDataPropertyChange:function(v){var Z=v.data;this.invalidateData(Z);var y=v.property;$o(Z)&&"s:light.type"===y?this.invalidateLight():"s:3d.clipbox"===y?this.invalidateboxClipper(Z,!0):"s:effect.flow"===y?this.invalidateFlowObjects(Z,!0):"s:shadow.cast"===y?this.shadowMap.tryUpdateBounding(Z):"s:3d.visible"===y&&this.invalidateQuickVisible(Z)},invalidateboxClipper:function(B,R){var k=this._boxClippers,o=k.length;if(B){var l=!!B.s("3d.clipbox");if(R=!!R,l===R)k.indexOf(B)<0&&k.push(B);else{var n=k.indexOf(B);n>=0&&k.splice(n,1)}}else k=this._boxClippers=[],this.dm().each(function(G){G.s("3d.clipbox")&&k.push(G)});var I=k.length;o!==I&&(this._updateBoxClipperMatrix(),Sq=I?yl:rc),this.iv()},_updateBoxClipperMatrix:function(){for(var g,V,B=this._boxClippers,x=this._boxClipperMatrixes=[],m=this._boxClipperClipInner=[],K=this._boxClipperGroups=[],e=this._boxClipperShape=[],L=new pd,d=0,y=B.length;y>d;d++)g=B[d],g.appendAnchorMatrix3d(V=Xi(g,this.getMat(g))),x.push(L.getInverse(L.fromArray(V)).toArray()),m.push("inner"===g.s("3d.clipbox")),K.push(g.s("3d.clipbox.group")),e.push(Js[g.s("3d.clipbox.shape")]||1)},_49Q:function(){this._4AQ||this._48Q||this.dm().size()<Q.graph3dViewDataNumWarningLine||(this._48Q=!0,console.log("Too many datas so than disable some feature to speed up.\nYou can set global Default.graph3dViewDataNumWarningLine to largeEnoughNum to avoid this, or call graph3dView.quitDataNumWarning() to quit.\n"),this.enableQuickVisibleMode(),this.getHighlightHelper().mouseOverData=null)},quitDataNumWarning:function(){this.disableQuickVisibleMode(),this._48Q=!1,this._4AQ=!0},invalidateFlowObjects:function(r,q){var e=this._flowObjects;if(r){var $=!!r.s("effect.flow");if(q=!!q,$===q)e.indexOf(r)<0&&e.push(r);else{var l=e.indexOf(r);l>=0&&e.splice(l,1)}}else e=this._flowObjects=[],this.dm().each(function(V){V.s("effect.flow")&&e.push(V)});this.iv()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(s){var R=this,W=s.property;if(R.iv(),R._18Q=O,"eye"===W)R._33Q=!0;else if("devicePixelRatio"===W)R._42(R.getDevicePixelRatio());else if("batchInstancedDisabled"===W){R._genBatchInstancedArrayFunc();var b,D=Q.getBatchInfoMap();for(b in D)D[b]&&D[b].instanced&&R.invalidateBatch(b);D=R._batchInfoMap;for(b in D)D[b]&&D[b].instanced&&R.invalidateBatch(b)}},_5O:function(J){var t=J._22Q();return t?new t(this,J):O},getData3dUI:function(p){var u=this._25I[p._id];return u===n&&(u=this._5O(p),this._25I[p._id]=u),u},invalidateAll:function(L,g){var d=this;if(L){for(var a in d._25I){var i=d._25I[a];i&&i.dispose()}d._25I={},d.iv(),go(d)}else go(d),d.dm().each(function(E){d.invalidateData(E)});d.shadowMap.tryInvalidateLater(L,g)},invalidateSelection:function(){var K=this;K.sm().each(function(U){K.invalidateData(U)})},invalidateData:function(G){var J=this,K=J.getData3dUI(G);K&&(K.iv(),J.iv()),go(J,G)},getShape3dText:function(t){return t.getStyle("shape3d.text")||this.getLabel(t)},invalidateBatch:function(x){var S=this,g=S._40Q;g.each(function(u){S._invalidateBatch(x,u.batchModelMap,u.batchIndexMap),S._invalidateBatch("T"+x,u.wireframeModelMap,u.wireframeIndexMap),S._invalidateBatch("O"+x,u.wireframeModelMap,u.wireframeIndexMap),u.markBatchInvalid()}),S.iv()},_invalidateBatch:function(m,y,Q){var A=this,l=y[m];if(l){l.ds.forEach(function(K){var p=A.getData3dUI(K);p&&p.iv(),delete Q[K._id]});var c=A.getBatchInfo(m)||ui;return c.keepData!==!1&&l.ms&&l.ms.length?(l.ds=[],l.ms=[],l.ics&&(l.ics=[]),l.ps&&(l.ps=[]),void 0):(delete y[m],void 0)}},handleDataModelChange:function(q){var e=this,G=q.kind,W=q.data;if("add"===G)e.invalidateData(W),ld(W)&&W.getEdgeGroup()&&W.getEdgeGroup().eachSiblingEdge(e.invalidateData,e),$o(W)&&e.invalidateLight(),W.s("3d.clipbox")&&e.invalidateboxClipper(W,!0),W.s("effect.flow")&&e.invalidateFlowObjects(W,!0),e._49Q();else if(G===Id){var B=W._id,J=e._25I[B];J&&(J.dispose(),delete e._25I[B],e.iv()),W===e._currentSubGraph&&e.setCurrentSubGraph(O),go(e,W),$o(W)&&e.invalidateLight(),W.s("3d.clipbox")&&e.invalidateboxClipper(W,!1),W.s("effect.flow")&&e.invalidateFlowObjects(W,!1),W.isAnimationPlaying()&&W.stopAnimation()}else G===cp&&(e.invalidateAll(!0),e.setCurrentSubGraph(O),go(e),e.invalidateLight(),e.invalidateboxClipper(),e.invalidateFlowObjects())},toCanvas:function(p,a,k){var i=this,r=i.getGL();if(i.validate(),p){var m=r.getParameter(3106);dh(r,p)}i._42(1,{renderAxis:!1,renderEdit:!1,renderGrid:!1});var o=i.getWidth()||1,f=i.getHeight()||1,L=new Uint8Array(4*o*f),Y=qb(),u=Y.getContext("2d");r.readPixels(0,0,o,f,6408,5121,L),Wk(Y,o,f,1);for(var q=u.getImageData(0,0,o,f),J=q.data,R=0;R<J.length;R+=4){var C=R/4,s=B(C/o),T=C-s*o;C=4*((f-1-s)*o+T),J[C]=L[R],J[C+1]=L[R+1],J[C+2]=L[R+2],J[C+3]=L[R+3]}if(u.putImageData(q,0,0),p&&dh(r,m),i._42(i.getDevicePixelRatio()),a&&k){var t=qb(),g=t.getContext("2d");return Wk(t,a,k,1),Q.drawImage(g,Y,0,0,a,k),t}return Y},toDataURL:function(J,L){var O=this,E=O.getGL();if(O.validate(),J){var p=E.getParameter(3106);dh(E,J)}O._42(1,{renderAxis:!1,renderEdit:!1,renderGrid:!1});var W=O._canvas.toDataURL(L||"image/png",1);return J&&dh(E,p),O._42(O.getDevicePixelRatio()),W},isWebGL2:function(){return 2===this._webGLVersion},getGL:function(){var f=this._26I;if(f)return f;if(!this._35O){var D=this,W=D._canvas,k=D._attributes;if(!k||k.requestWebGL2!==!1)try{f=W.getContext("webgl2",k)||W.getContext("experimental-webgl2",k),f&&(D._webGLVersion=2,D._26I=f)}catch(O){}if(!f)try{f=W.getContext("webgl",k)||W.getContext("experimental-webgl",k)}catch(O){throw new Error("WebGL not supported")}if(!f)throw new Error("WebGL not supported");D._26I=f;var F=D._frameState=new Hs(this,f);D._glExtensions=new m(f),D._glCapabilities=new X(f,D._glExtensions),D._glPrograms=new Pb(D,f),D._2O={},f._emptyCubeTexture=Wl(f),f._compiledShader={},f._emptyTexture=Nk(f),f._emptyBlendTexture=Nk(f),f._bufPool={},f._id=++Ls,f._divisorState=[],F.setGLState(),D._buffer={vs:Ym(f),ns:Ym(f),is:Ym(f),uv:Ym(f),batchColor:Ym(f),batchBlend:Ym(f),batchBrightness:Ym(f),lineDistance:Ym(f)},D._1O=Gi(D,f);
var _=D._cube={vs:Ym(f),ns:Ym(f),is:Ym(f),uv:Ym(f)};return gs(f,_.vs,Qj),gs(f,_.ns,fn),gs(f,_.uv,id),Mi(f,_.is,vo),D._genBatchInstancedArrayFunc(),f._renderInfo={calls:0,vertices:0,faces:0,lines:0,points:0,textureCache:{time:0,count:0,pixels:0},frame:0,cacheTimeCost:0,reflectDepth:0},f._dynamicTexturePool={},f}},getGLCapabilities:function(){var V=this.getGL();return V?this._glCapabilities:void 0},getGLExtensions:function(){var s=this.getGL();return s?this._glExtensions:void 0},getShadowMap:function(){return this.shadowMap},invalidateShape3dAttribute:function(f,Y){delete f._complete_;var q=f[Y];q&&q._bufId&&delete q._bufId},getEnvmap:function(){return this._glCapabilities&&this._glCapabilities.maxVertexTextures<Q.graph3dEnvmapCapabilityRequire?null:this.dm().getEnvmap()},getEnvmapType:function(){var M,X=this.dm();return X&&(M=X.getEnvmapType()),M||"legacy"},setEnvmapExtraQuaternion:function(X){this._envmapExtraQuaternion=X instanceof Tc.Quaternion?X.clone().inverse().toArray():null},invalidateEnvmap:function(Q){return this._envmapRenderer.invalidateEnvmap(Q)},invalidateEnvmapUsedByMaterial:function(U){return this._envmapRenderer.invalidateEnvmapUsedByMaterial(U)},isEnvmapUsedByMaterialReady:function(h){return this._envmapRenderer.isEnvmapUsedByMaterialReady(h)},_setEnvmapByProbeId:function(V,C,G){return this._envmapRenderer.setEnvmapByProbeId(V,C,G)},_tryInvalidateEnvmap:function(){var t=this.getEnvmapType();t!==this._lastProgramEnvmapType&&(this._envmapRenderer.changeEnvmapType(this._lastProgramEnvmapType=t),this.iv())},acquireProgram:function(o){return this._glPrograms.acquireProgram(o)},renderModel:function(V,D,h,z,G){var n;G&&G.restoreViewport===!1||h&&h.restoreViewport===!1||D&&D.restoreViewport===!1||(n=this.getViewport(),n&&(n=rj(n)));var y=this._postProcessing.blitScreen(V,D,h,z,G);return n&&this.setViewport(this.getGL(),n[0],n[1],n[2],n[3]),y},renderPrefab:function(){return this.renderModel.apply(this,arguments)},isGLTempRegisterLimited:function(){return this._glTempRegisterLimited},getBrightness:function(S){var M=S.s("brightness"),Z=this.isSelected(S)?S.s("select.brightness"):O;return M==O?Z:Z==O?M:M*Z},getDataHighlightMode:function(E){return E.s("highlight.mode")},getWireframe:function(L){var k=L.s("wf.visible"),q=L.s("wf.width");return k===!0||q>0&&"selected"===k&&this.isSelected(L)?{color:L.s("wf.color"),width:q,"short":L.s("wf.short"),mat:L.s("wf.mat")}:void 0},getPartPosition:function(H,f,Z,j){j=j||ui;var e=this.getData3dUI(H),x=e._16O(j.autoRotate,f,O,Z||ll,j.t3,j.r3,j.rotationMode);return[x[12],x[13],x[14]]},_transformPointToViewSpace:function(c){var G=[c[0],c[1],c[2]];return Qr(G,this._viewMatrix),G},_transformDirectionToViewSpace:function(J,X){var o=J?[J[0],J[1],J[2]]:[0,0,0];Qr(o,this._viewMatrix);var F=X?[X[0],X[1],X[2]]:[0,0,0];Qr(F,this._viewMatrix);var g=F[0]-o[0],d=F[1]-o[1],O=F[2]-o[2],x=Math.sqrt(g*g+d*d+O*O);return x?[g/x,d/x,O/x]:[g,d,O]},getWireframeGeometry:function(s){return s.s("wf.geometry")?{color:s.s("wf.color"),width:s.s("wf.width"),mat:s.s("wf.mat"),geometry:!0}:void 0},getBodyColor:function(q){return q.s("body.color")},getMat:function(K){return K.getMat?K.getMat():K.s("mat")},getFaceMat:function(C,t){return C.getFaceMat?C.getFaceMat(t):C.s(t+".mat")},getFaceBlend:function(b,y){return b.s(y+".blend")||b.s("all.blend")},getFaceColor:function(q,N){return q.s(N+".color")||q.s("all.color")},getFaceImage:function(T,u){return T.s(u+".image")||T.s("all.image")},getFaceBlendImage:function(s,R){return s.s(R+".blend.image")||s.s("all.blend.image")},getFaceDiscardSelectable:function(E,P){var A=E.s(P+".discard.selectable");return A==O?E.s("all.discard.selectable"):A},getFaceUv:function(j,P){return j.s(P+".uv")||j.s("all.uv")},getFaceUvOffset:function(n,Z){return n.s(Z+".uv.offset")||n.s("all.uv.offset")},getFaceUvScale:function(n,b){return n.s(b+".uv.scale")||n.s("all.uv.scale")},getFaceUvRotation:function(z,H){return z.s(H+".uv.rotation")||z.s("all.uv.rotation")},getFaceUvAnchor:function(g,o){return g.s(o+".uv.anchor")||g.s("all.uv.anchor")},getFaceLight:function(f,Y){var b=f.s(Y+".light");return b==O?f.s("all.light"):b},getFaceVisible:function(G,j){var N=G.s(j+".visible");return N==O?G.s("all.visible"):N},getFaceOpacity:function(W,r){var G=W.s(r+".opacity");return G==O?W.s("all.opacity"):G},getFaceTransparent:function(R,q){var l=R.s(q+".transparent");return l==O?R.s("all.transparent"):l},getFaceReverseColor:function(i,G){return i.s(G+".reverse.color")||i.s("all.reverse.color")},getFaceReverseFlip:function(z,h){var y=z.s(h+".reverse.flip");return y==O?z.s("all.reverse.flip"):y},getFaceReverseCull:function(Z,o){var a=Z.s(o+".reverse.cull");return a==O?Z.s("all.reverse.cull"):a},getFaceMaterial:function(V,o){var j=V.s(o+".material");return j==O?V.s("all.material"):j},isPicking:function(){return this._picking},renderPickScene:function(){var L=this.getGL();this.syncRenderState(),this._picking=L._picking=!0,this.renderScene(),this._picking=L._picking=!1},invalidateCachedGeometry:function(x){var a=this.getData3dUI(x);a.invalidateCachedGeometry(),this.invalidateData(x)},isInteractive:function(A){return A.s("interactive")},redraw:function(){this.iv()},validateImpl:function(){var H=this;if(H._lightChanged){H._lightChanged=!1;var k=[],w=[],f=[],K=[];H.dm().each(function(b){if($o(b)){var c=b.s("light.type");c===Jk?k.push(b):c===rb?w.push(b):c===Mb?f.push(b):"rect"===c&&K.push(b)}}),H._59O=k,H._spots=w,H._dirs=f,H._87I=K}var o=H.getAspect();o!==H.__cachedAspect__&&(H._updateSkybox({property:"asceptChanged"}),H.__cachedAspect__=o),H._42(),H._1o.iv()},getRenderInfo:function(){var u=this.getGL();return u?u._renderInfo:void 0},getDebugTip:function(){var Y=this,G=Y.getRenderInfo();if(G){var P=Y.getGL(),m=P._validBufCount||0,L="Draw Calls: "+G.calls+"<br/>"+"Vertices: "+G.vertices+"<br/>"+"Faces: "+G.faces+"<br/>"+"Lines: "+G.lines+"<br/>"+(G.points?"Points: "+G.points+"<br/>":"")+"Buffers: "+m+"<br/>"+"Programs: "+(P._validProgramCount||0)+"<br/>"+"Cache Models: "+y.keys(lr).length+"<br/>"+"Shape3d Models: "+y.keys(Km).length;if(Y.isVRPresenting()&&(L+="<br/>VR fps: "+Y.vr.getFps()),G.textureCache){var x=G.textureCache.count;if(L+="<br/>2D Dynamic Textures: "+G.textureCache.count,x>0){var T,v=G.textureCache.pixels;T=v>1e6?Math.round(v/1e6)+"M":v>1e3?Math.round(v/1e3)+"K":Math.round(v),L+="<br/>2D Dynamic pixels: "+T}}return L}},getFrameState:function(){return this._frameState},isBoundingBoxInView:function(){var q=new f.Math.Box3,Q=new f.Math.Matrix4;return function(x){var E=x;if(E instanceof f.Data&&(E=this.getData3dUI(E)),!E.mat)return!0;var Z=E.getBoundingBox(!0);q.copy(Z).applyMatrix4(Q.fromArray(E.mat));var v=this.getFrustum();return v.intersectsBox(q)}}(),updateScene:function(){var J=this;J.onPreUpdate(),J._81O=O,J.overlappingBox.clear(),J.initSkeletonDatas();var _=J._40Q;_.init();var g=J.getGL(),I=J.dm();if(I.isHierarchicalRendering())I.eachByHierarchical(function(e){var h=J.getData3dUI(e);h&&h.update(J,g,_)});else{var f,U,E,j=I.getDatas().getArray(),Y=j.length;for(f=0;Y>f;f++)U=j[f],E=J.getData3dUI(U),E&&E.update(J,g,_)}this._updateBoxClipperMatrix(),_.onUpdated(),J.onPostUpdate()},_pushFrameRenderOptions:function(A){this._frameRenderOptionStack.push(this._currentFrameRenderOptions),this._currentFrameRenderOptions=A},_popFrameRenderOptions:function(){this._currentFrameRenderOptions=this._frameRenderOptionStack.pop()},_getFrameRenderOptions:function(s){var J=this._currentFrameRenderOptions;return J&&J[s]},getRenderLists:function(){return this._40Q},renderScene:function(K){function e(f,O){$.setGLState(f,O),$.setUniforms(f),$.renderState.attribs.disable(),B=y.directUniforms(),W=y.directAttribs(),W.disable()}function N(u){for(var F=!1;X>I;I++){var _=f[I];if(!g||!_.ignoreInPick){if(_.priority>=u)break;(!T._43Q[T._44Q=_.id]||Nc[jj.length])&&(_.render(R,T,$),e(),F=!0)}}return F}var T=this,R=T.getGL(),g=T._picking;g||T.onPreRender(),T._glPrograms.setCurrentFrameRenderId(R._renderInfo.renderId=T._renderId++),T.genProgramDefines();var $=T._frameState,L={};g&&(L.BATCHINSTANCE=!T._batchInstancedDisabled||T._picking&&T._model3dInstancedBatchCount>0),T._prg=$.defaultProgram=T.acquireProgram({type:g?"pick":"legacy",defines:L}),T._pushFrameRenderOptions(K),T._getFrameRenderOptions("renderShadowMap")!==!1&&T.shadowMap.render(),T.flowMap.render(),T._envmapRenderer.onBeforeRender(R),T._44Q=-1;var B,W,y=$.renderState,E=y.glState,p=T._prg;T._projectMatrix=gi(T),Yp(T,T._7O),T._viewMatrix=Bg(T._7O),T.isReflecting(R)||Tg(T._projScreenMatrix=ib(),T._projectMatrix,T._viewMatrix),$.syncEnv(g?this.pickColorMap:n),y.useProgram(p),e(!1,!0),R.clear(256);var f=this._41Q,I=0,X=f.length;if(N(Q.cameraPriority.skybox),g){var S=E.color.clear.slice(0);dh(R,[0,0,0,0])}else dh(R,[0,0,0,0]),E.blend.enabled=!1,E.depth.enabled=!1,E.depth.mask=!1,T._camera&&T._camera.s("camera.renderSky")===!1||T.drawSky(R,p),T._getFrameRenderOptions("renderReflector")!==!1&&T.drawReflectors(R)&&(T._projectMatrix=gi(T),Yp(T,T._7O),T._viewMatrix=Bg(T._7O),$.syncEnv(),e(),T._glPrograms.setCurrentFrameRenderId(R._renderInfo.renderId=T._renderId++)),E.blend.enabled=!1,E.depth.enabled=!0,E.depth.mask=!0,B.uTransparent=!1,T._getFrameRenderOptions("renderGrid")!==!1&&T._31O._42(R);if(!R.textureBatch||Nc[(ONE_FRAME_TIME-6)/2]){g||(T.shadowMap.enable&&T.shadowMap.createShadow(B),T.flowMap.createFlow(B));for(var J=T._sortedRenderLayers,o=0,l=J.length;l>o;o++){var h=J[o],a=T.getRenderLayerInfo(h);if((T._camera||!a.ignore||a.renderForBloom&&R._blooming)&&(!T._camera||T._camera.isLayerVisible(h))){var P=a.priority;N(P)&&(g||(T.shadowMap.enable&&T.shadowMap.createShadow(B),T.flowMap.createFlow(B))),this.renderLayer(h)}}N(Q.cameraPriority.infinity),g||(T._renderBonesForDebug(R,E),T.flowMap.disableFlow(B)),Uf(T,B,0,Q.graph3dViewHeadlightAmbientIntensity),B.uHeadlightColor=[1,1,1,0],B.uUseEnvMap=!1,B.uHeadlightDirection=[0,0,0],B.uHeadlightRange=0,E.depth.enabled=!1,B.uTransparent=!1,B.shadowReceive=!1,Sq(T,B,Bi),g?T.drawFilter||T._30O._42(R):(T._highlightHelper._42(R),this._renderAxisAndEditHelper(T._getFrameRenderOptions("renderAxis")!==!1,T._getFrameRenderOptions("renderEdit")!==!1),E.blend.enabled=!1,E.depth.mask=!0),E.depth.enabled=!0,g&&dh(R,S),gs(R,O),Mi(R,O),T._44Q=-1,T._popFrameRenderOptions(null),T._glPrograms.disableAttributes(R),g||T.onPostRender()}},_renderAxisAndEditHelper:function(N,E){if(N||E){var w=this,b=w.getGL(),U=w._frameState,T=U.renderState,k=T.glState,S=T.directUniforms();U.renderState.attribs.disable(),k.depth.enabled=!1,S.uTransparent=!1,S.shadowReceive=!1,k.blend.enabled=!1,k.depth.mask=!0;var z=!w._fogDisabled;z&&(S.uFog=!1),N&&w._32O._42(b),E&&w._30O._42(b),z&&(S.uFog=!0),gs(b,O),Mi(b,O)}},renderLayers:function(Q,L){L&&(Q=si(Q));for(var h=0,u=Q.length;u>h;h++)this.renderLayer(Q[h])},renderSky:function(){var B=this,N=B._frameState,P=N.renderState,S=P.glState,R=B.getGL(),v=B._prg;B._projectMatrix=gi(B),Yp(B,B._7O),B._viewMatrix=Bg(B._7O),Tg(B._projScreenMatrix=ib(),B._projectMatrix,B._viewMatrix),N.syncEnv(),P.useProgram(v),N.setGLState(!1,!0),N.setUniforms(!1),N.renderState.attribs.disable(),R.clear(256),dh(R,[0,0,0,0]),S.blend.enabled=!1,S.depth.enabled=!1,S.depth.mask=!1,B.drawSky(R,v),S.depth.mask=!0,S.depth.enabled=!0,gs(R,O),Mi(R,O)},addRenderLayerListener:function(N,f,h){var z=this;z._renderLayerNotifier||(z._renderLayerNotifier=new mf),z._renderLayerNotifier.add(N,f,h)},removeRenderLayerListener:function(m,M){this._renderLayerNotifier&&this._renderLayerNotifier.remove(m,M)},fireRenderLayerEvent:function(v,V){var U=this._renderLayerNotifier;U&&U.fire({layer:v,phase:V})},renderLayer:function(i){var R=this,H=R._picking,E=R._40Q.get(i);if(E){R.fireRenderLayerEvent(i,"prepare");var $=R.getGL(),N=R.getRenderLayerInfo(i),r=R._frameState,F=r.renderState,z=F.glState,m=F.directUniforms();!H&&R.isSortable()&&E.sort(R._sortFunc,R._projScreenMatrix),E.resetModel3dInstancedDraw();var s,d,g,y=E.opaque,P=E.transparent,u=E.batchModelMap,c=E.batchIndexMap,Q=E.polylineModelMap,T=E.wireframeModelMap,$=R.getGL(),L=R._prg;H||(z.blend.enabled=!1,z.depth.enabled=!0,z.depth.mask=!0),m.uTransparent=!1,N.clearDepth!==!1&&$.clear(256);var x=this.drawFilter;if(x){for(g=y,s=0,d=g.length;d>s;s++)x(g[s].data)!==!0&&g[s].ui._42($,L,v);if(H)for(g=P,s=0,d=g.length;d>s;s++)g[s].ui._46Q($);od(R,u,c)}else{for(g=y,s=0,d=g.length;d>s;s++)g[s].ui._42($,L,v);if(H)for(g=P,s=0,d=g.length;d>s;s++)g[s].ui._46Q($);od(R,u,c),Pr(R,Q),Pr(R,T)}if(H||(z.blend.enabled=!0,z.depth.mask=!1),R._45Q=m.uTransparent=!0,x){for(g=P,s=0,d=g.length;d>s;s++)x(g[s].data)!==!0&&g[s].ui._42($,L,W);od(R,u,c,null,!0)}else{for(g=P,s=0,d=g.length;d>s;s++)g[s].ui._42($,L,W);od(R,u,c,null,!0),Pr(R,Q,null,!0),Pr(R,T,null,!0)}R._45Q=null,R.fireRenderLayerEvent(i,"post")}},onPreFrame:rc,onPostFrame:rc,onPreUpdate:rc,onPostUpdate:rc,onPreRender:rc,onPostRender:rc,onPreRenderData:rc,onPostRenderData:rc,_42:function(M,f){var K=this;if(!K._35O&&(!xf||Nc(xf))){var I=K.getWidth(),H=K.getHeight();if(I&&H){var U=K.getGL();if(U){var t,v=K._canvas;if(M?t=!0:M=K.getDevicePixelRatio(),!K._picking&&(t||I!==v.clientWidth||H!==v.clientHeight)){Wk(v,I,H,M);var h=M;I&&Math.abs(U.drawingBufferWidth-I*M)>1&&(h=Math.min(h,U.drawingBufferWidth/I)),H&&Math.abs(U.drawingBufferHeight-H*M)>1&&(h=Math.min(h,U.drawingBufferHeight/H)),h!==M&&(K.setDevicePixelRatio(M=h),Wk(v,I,H,M)),K._18Q=null}U.clear(16384);var d=U._renderInfo;d.calls=0,d.vertices=0,d.faces=0,d.lines=0,d.points=0,d.textureCache={time:0,count:0,pixels:0},d.frame=++K._frameId,d.cacheTimeCost=0,d.reflectDepth=0,K.__uptime=(Date.now()-K.__startTime)/1e3,I*=M,H*=M,K._gatherRenderLayersByPriority(),K.onPreFrame(),K.syncRenderState(),K._glPrograms.checkParallelLinkStatus();do{if(K.isVREnabled()&&K.vr.render(U,I,H,f))break;K.updateScene();var b=K._4JQ;if(!b&&K._postProcessing.render(U,I,H,f))break;K.setViewport(U,0,0,I,H),b?K.renderPickScene(f):K.renderScene(f)}while(!1);K._33Q=!1,K.countFrame(),K.onPostFrame(),K._doBufferGC(U),K._glPrograms.scheduleProgramGC(K._shaderGCInterval||500)}}}},_4IQ:function(b){this._4JQ=b,this.iv()},syncRenderState:function(){var R,G;(R=this._frameState)&&(G=R.renderState)&&G.syncLoss()},drawReflectors:function($){$._renderInfo.reflectDepth++;var D,V,d,K=this,o=K._dataModel.getReflectors(),v=!1;for(D in o)V=o[D],K.isVisible(V)&&(d=K.getData3dUI(V),d&&d.drawReflector&&d.drawReflector($)&&(v=!0));return $._renderInfo.reflectDepth--,v},isReflecting:function(S){return S._renderInfo.reflectDepth},isRenderSceneForBloom:function(){var D=this.getGL();return D?!!D._blooming:!1},getPostProcessing:function(){return this._postProcessing},enablePostProcessing:function(N,x){return this._postProcessing.enableModule(N,x)},getPostProcessingModule:function(K){return this._postProcessing.getModule(K)},getPostProcessingValue:function(T,x){var p=this._postProcessing.getModule(T);return p?p[x]:n},setPostProcessingValue:function(n,k,Q){var m=this.getPostProcessingValue(n,k),I=this._postProcessing.getModule(n);I&&m!==Q&&("enable"===k?this.enablePostProcessing(n,Q):I[k]=Q,this.firePropertyChange("postProcessing."+n+"."+k,m,Q))},setDofImageFromGraphView:function(K,N,p){return this._postProcessing.getModule("Dof").setImageFromGraphView(K,N,p)},setViewport:function(v,k,y,e,Z){this._viewport=[k,y,e,Z],Ar.for(v).directState().viewport=this._viewport},getRenderState:function(){return Ar.for(this._26I)},genProgramDefines:function(){var e=this,O=e.getEnvmap(),R=O&&O.length,U={NUM_DIR_LIGHTS:e._dirs.length,NUM_SPOT_LIGHTS:e._spots.length,NUM_POINT_LIGHTS:e._59O.length,MAX_BOX_CLIPPER:e._boxClippers.length,MAX_FLOW_OBJECT:e._flowObjects.length,FOG:!e._fogDisabled,FOG_EXP2:"exp2"===e.getFogMode(),DASH:!e._dashDisabled,UV_CLIP:!!e._uvClipEnabled,ENVMAP_ROTATE:null!=e._envmapExtraQuaternion,USE_ENVMAP:!!R,ENVMAP_TYPE_CUBE_UV:"legacy"!==e.getEnvmapType(),BATCHCOLOR:!e._batchColorDisabled,BATCHINSTANCE:!e._batchInstancedDisabled,BATCHBLEND:!e._batchBlendDisabled,BATCHBRIGHTNESS:!e._batchBrightnessDisabled},z=Ks[e.getFlowBlendMode()]||Ks[Q.graph3dViewFlowBlendMode];return U[z]=!0,e.shadowMap.enable&&e.shadowMap.genShaderDefine(U),e._programDefines=U},getViewport:function(){return this._viewport},setBufferGCInterval:function(y){this._bufferGCInterval=y},setShaderGCInterval:function(i){this._shaderGCInterval=i},_doBufferGC:function(P,N){var l,A,w=P._bufPool,c=0,r=0,Y=P._renderInfo.frame,O=this._bufferGCInterval||10;for(l in w)c++,A=w[l],A&&(N||Y-A._fid>O?(P.deleteBuffer(A._buf),A._buf=null,w[l]=null):r++);if(c/2>r&&c>128){var M={};for(l in w)w[l]&&(M[l]=w[l]);P._bufPool=M}P._validBufCount=r},_swapLineMap:function(){var l=this;Fr=l._polylineModelMap,l._polylineModelMap=l._polylineModelMapSwap,l._polylineModelMapSwap=Fr,Fr=l._wireframeModelMap,l._wireframeModelMap=l._wireframeModelMapSwap,l._wireframeModelMapSwap=Fr,Fr=l._polylineIndexMap,l._polylineIndexMap=l._polylineIndexMapSwap,l._polylineIndexMapSwap=Fr,Fr=l._wireframeIndexMap,l._wireframeIndexMap=l._wireframeIndexMapSwap,l._wireframeIndexMapSwap=Fr},_updateSkybox:function(k){if(this._skybox&&k){var t=k.property,Y=!1,r=this._skybox;if("eye"===t||"forceUpdate"===t){var b=this._eye;r.p3(b[0],b[1],b[2]),Y=!0}if("near"===t||"far"===t||"forceUpdate"===t||"asceptChanged"===t){var w=r.__cachedS3__;w||(w=r.__cachedS3__=r.getFinalScale3d());var m=Math.sqrt(3),Q=1/0,V=-1/0;w.forEach(function(u){u/=2,Q=g(u,Q),V=C(u,V)}),V*=m;var n=this._near,T=this._far,_=Math.tan(this.getFovy()/2)*n,u=this.getAspect()*_,e=1.1*Math.sqrt(u*u+_*_+n*n),X=1;if(e>Q)X=e/Q;else if(V>=T){var x=T*T/(n+T);X=x/V}if(1!==X){r.__updatingSkybox__=!0;var q=w.map(function(u){return X*u});r.s3(q),r.setScale3d(1,1,1),Y=!0,delete r.__updatingSkybox__}}Y&&this.invalidateData(r)}},getSkyBox:function(){return this.getSkybox()},setSkyBox:function(I){return this.setSkybox(I)},getSkybox:function(){return this._skybox},setSkybox:function(d){var S=this._skybox;if(S===d)return d&&this._updateSkybox({property:"forceUpdate"}),void 0;if(S&&(this._skyboxStyleMap&&S.setStyleMap(this._skyboxStyleMap),this._skyboxStyleMap=null,this._skyboxAnchor3d&&S.setAnchor3d(this._skyboxAnchor3d),this._skyboxAnchor3d=null,this._skyboxP3&&S.p3(this._skyboxP3),this._skyboxP3=null,this.handleDataModelChange({kind:Id,data:S})),this._skybox=d,this.ump(this._updateSkybox,this),d){d.removeFromDataModel(),this._skyboxStyleMap=f.Default.clone(d.getStyleMap()),this._skyboxAnchor3d=d.getAnchor3d(),d.setAnchor3d(.5,.5,.5),this._skyboxP3=d.p3().slice(0),d.s({"shape3d.reverse.flip":!0,"shape3d.reverse.cull":!1,"all.reverse.flip":!0,"all.reverse.cull":!1,"front.reverse.flip":!0,"front.reverse.cull":!1,"back.reverse.flip":!0,"back.reverse.cull":!1,"left.reverse.flip":!0,"left.reverse.cull":!1,"right.reverse.flip":!0,"right.reverse.cull":!1,"top.reverse.flip":!0,"top.reverse.cull":!1,"bottom.reverse.flip":!0,"bottom.reverse.cull":!1});var o=d.onPropertyChanged;d.onPropertyChanged=function(m){o.call(d,m),!d.__updatingSkybox__&&["width","height","tall","scale","scaleTall"].indexOf(m.property)>=0&&(d.__cachedS3__=n)},this.mp(this._updateSkybox,this),this._updateSkybox({property:"forceUpdate"})}this.fp("skybox",S,d)},drawSky:function(C,b){var t=this,m=t._skybox;if(m){var _=0,E=0;if((!t._camera||t._camera.s("camera.skybox.blur")!==!1)&&(_=m.s("skybox.blur.size"),E=m.s("skybox.blur.resolution"),0!==_||0!==E)){var z=E||t.getDevicePixelRatio();t._blurRTT||(t._blurRTT=new ch.RenderTarget(t,null,null,{}));var v=t.getWidth()*z,g=t.getHeight()*z;t._blurRTT.setSize(C,v,g);var S=rj(t._viewport);t.setViewport(C,0,0,v,g),t._blurRTT.bind(C)}var o=Ar.for(C).directUniforms(),j=t._headlightIntensity,R=cs(t._headlightColor),b=t._prg;1!==j&&(R=[R[0]*j,R[1]*j,R[2]*j]),o.uHeadlightColor=[R[0],R[1],R[2],1];var r=t.getData3dUI(m);if(r){var l=t.isOrtho(),M=l||this._computedProjectMatrix;if(M){var p=t._projectMatrix;l&&(t._ortho=!1),o.uProjectMatrix=t._projectMatrix=gi(t,!0)}var G=m.p3(),V=this.getEye();(G[0]!==V[0]||G[1]!==V[1]||G[2]!==V[2])&&(m._position.x=V[0],m._54O=V[1],m._position.y=V[2]),r.validate(),r._42(C,b,c),M&&(l&&(t._ortho=!0),o.uProjectMatrix=t._projectMatrix=p)}if(C.clear(256),o.uHeadlightColor=[R[0],R[1],R[2],t._headlightDisabled?1:0],0!==_||0!==E){if(t._blurRTT.unbind(C),0!==_){var A=t.getPostProcessingModule("Blur");A&&A.drawImpl(C,t._blurRTT,_,!1,_>4?4:_>2?3:_>1?2:1)}t.setViewport(C,S[0],S[1],S[2],S[3]),t.renderModel(null,{type:"blitScreen",image:t._blurRTT.texture,defines:{DITHERING:!!H.wudm}},{clear:!1})}}},getLogicalPoint:function(R){return Re(R,this._canvas)},isRectOverlapping:function(Z){var j=this.getData3dUI(Z);return j._rectOverlapping},getHitFaceInfo:function(B){B.target&&(B=this.lp(B));var o=this.getDataInfoAt(B);if(o){var Q=this.intersectObject(B,o.data);if(Q)return{data:o.data,face:Q.part}}return O},unproject:function(O,t){var i=this,b=i.getWidth(),I=i.getHeight(),D=O.target?i.lp(O):O,H=D.x-b/2,w=D.y-I/2,m=2*(H/b),o=2*(-1*w/I);t=t||0;var M=ib(),z=gi(i),_=Yp(i);Tg(M,z,_),Di(M);var K=Tq([m,o,t,1],M);return[K[0]/K[3],K[1]/K[3],K[2]/K[3]]},getDataAt:function(X){var s=this.getDataInfoAt(X);return s?s.data:O},getDataInfoAt:function(l,H,q){return l.target&&(l=this.lp(l)),this._1o.get(zj(l.x,l.y,H),!0,q)},getDatasInRect:function(F,U){return this._1o.get(F,!1,U)},setEditable:function(u){var y=this,x=y._editable;y._editable=u,this.fp(Yl,x,u)},isEditable:function(h){var I=this;return h?I._editable?Cl(h)?h.s("3d.editable")?I._editableFunc?I._editableFunc(h):!0:!1:!1:!1:I._editable},isSelectable:function(M){return M.s("3d.selectable")&&this.sm().isSelectable(M)},isMovable:function(e){var Z=this;return ld(e)&&e.getStyle(Oi)!==mh?!1:e.s("3d.movable")?Z._movableFunc?Z._movableFunc(e):!0:!1},isSizeEditable:function(M){return Cl(M)?this._sizeEditableFunc?this._sizeEditableFunc(M):!0:!1},isRotationEditable:function(d){return Cl(d)&&d.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(d):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(v){this.setZoom(sr,v)},zoomOut:function(R){this.setZoom(1/sr,R)},setZoom:function(){var b=new Ri,Y=new Ri,L=new Ri,B=new Ri;return function(C,O){if(1!==C){var T=this;T._14o&&T._14o.stop(!0);var p,w=1/C;b.copy(T.getCenter()),Y.copy(T.getEye());var v=T._ortho;if(v){if(p=T._orthoWidth,p<T._moveStep&&C>1)return}else if(b.distanceTo(Y)<T._moveStep&&1>w)return;var Q=!1;return T._zoomToCenter===!1&&T._lastZoomLP&&(L.copy(Y).sub(b).normalize(),T._81O=null,B.copy(T.getHitPosition(T._lastZoomLP,b.toArray(),L.toArray())),Q=!0,T._lastZoomHit=B),(O=Ub(O))?(O.action=function(E){T.fi({kind:T._zooming?"betweenZoom":"beginZoom"}),T._zooming=1;var m=(w-1)*E+1;v&&T.setOrthoWidth(p*m),Q?(T.setEye(L.lerpVectors(B,Y,m).toArray()),T.setCenter(L.lerpVectors(B,b,m).toArray())):v||T.setEye(L.lerpVectors(b,Y,m).toArray())},O._37o=function(){delete T._14o,delete T._zooming,T.fi({kind:"endZoom"}),T.onZoomEnded()},T._14o=nd(O)):(v&&T.setOrthoWidth(p*w),Q?(T.setEye(L.lerpVectors(B,Y,w).toArray()),T.setCenter(L.lerpVectors(B,b,w).toArray())):v||T.setEye(L.lerpVectors(b,Y,w).toArray()),void 0)}}}(),setOrthoZoom:function(B,N){return this.setZoom(B,N)},getPositionInfo:function(q){var b=this,Y=b._eye,C=b._center,o=b.getAspect(),Q=q?Fc(js(C,Y,!0),js(q,Y)):xh(Y,C);if(b._ortho){var M=b._orthoWidth;return{length:Q,height:M/o,width:M}}var A=2*hl(b._fovy/2)*Q;return{length:Q,height:A,width:A*o}},getCenterInfo:function(){var o=this;return o._81O||(o._81O=o.getPositionInfo()),rj(o._81O)},rotate:function(r,h,V,D){var m=this;if(r||h){D==O&&(D=m._firstPersonMode),m._88O&&m._88O.stop(!0);var v=m._center,Z=m._eye,C=m.getCenterInfo().length,Y=D?v:Z,e=D?Z:v,f=js(Y,e),a=Tr(f[0],f[2]),w=Tr(N(f[0]*f[0]+f[2]*f[2]),f[1]),U=D?je:fr;return D&&(h=-h),(V=Ub(V))?(V.action=function(F){m.fi({kind:m._rotating?"betweenRotate":"beginRotate"}),m._rotating=1;var y=a+r*F,u=w+h*F;u=D?ei-Fg(m,ei-u):Fg(m,u),f[0]=C*G(u)*G(y),f[1]=C*b(u),f[2]=C*G(u)*b(y),Y[0]=e[0]+f[0],Y[1]=e[1]+f[1],Y[2]=e[2]+f[2],m.fp(U,O,Y)},V._37o=function(){delete m._88O,delete m._rotating,m.fi({kind:"endRotate"}),m.onRotateEnded()},m._88O=nd(V)):(a+=r,w+=h,w=D?ei-Fg(m,ei-w):Fg(m,w),f[0]=C*G(w)*G(a),f[1]=C*b(w),f[2]=C*G(w)*b(a),Y[0]=e[0]+f[0],Y[1]=e[1]+f[1],Y[2]=e[2]+f[2],m.fp(U,O,Y),void 0)}},pan:function(Q,K,q,n){if(Q||K){var V=this;n==O&&(n=V._firstPersonMode),V._89O&&V._89O.stop(!0);var J=Yp(V),v=[J[0]*Q,J[4]*Q,J[8]*Q],$=[J[1]*K,J[5]*K,J[9]*K],u=v[0]+$[0],Y=v[1]+$[1],t=v[2]+$[2],w=V._center,m=V._eye;if(n){var U=Bb(V.getBoundaries(),m[0],m[2],m[0]+u,m[2]+t,N(u*u+t*t));u=U[0],t=U[1]}if(q=Ub(q)){var g=rj(m),s=rj(w);return q.action=function(a){V.fi({kind:V._panning?"betweenPan":"beginPan"}),V._panning=1,w[0]=s[0]+u*a,w[1]=s[1]+Y*a,w[2]=s[2]+t*a,m[0]=g[0]+u*a,m[1]=g[1]+Y*a,m[2]=g[2]+t*a,V.fp(fr,O,m),V.fp(je,O,w)},q._37o=function(){delete V._89O,delete V._panning,V.fi({kind:"endPan"}),V.onPanEnded()},V._89O=nd(q)}w[0]+=u,w[1]+=Y,w[2]+=t,m[0]+=u,m[1]+=Y,m[2]+=t,V.fp(fr,O,m),V.fp(je,O,w)}},walk:function(T,h,v){if(T){var D=this;v==O&&(v=D._firstPersonMode),D._90O&&D._90O.stop(!0);var y=D._center,w=D._eye,c=js(y,w,!0);if(v){var P=Bb(D.getBoundaries(),w[0],w[2],w[0]+c[0]*T,w[2]+c[2]*T,o(T));if(T=xh(P),!T)return;c=[P[0]/T,0,P[1]/T]}if(h=Ub(h)){var B=rj(w),n=rj(y);return h.action=function(k){D.fi({kind:D._walking?"betweenWalk":"beginWalk"}),D._walking=1;var i=T*k;w[0]=B[0]+c[0]*i,w[1]=B[1]+c[1]*i,w[2]=B[2]+c[2]*i,y[0]=n[0]+c[0]*i,y[1]=n[1]+c[1]*i,y[2]=n[2]+c[2]*i,D.fp(fr,O,w),D.fp(je,O,y)},h._37o=function(){delete D._90O,delete D._walking,D.fi({kind:"endWalk"}),D.onWalkEnded()},D._90O=nd(h)}w[0]+=c[0]*T,w[1]+=c[1]*T,w[2]+=c[2]*T,y[0]+=c[0]*T,y[1]+=c[1]*T,y[2]+=c[2]*T,D.fp(fr,O,w),D.fp(je,O,y)}},handleScroll:function(X,h){tn(X);var C=this,g=C._moveStep,T=C.getDataInfoAt(X);if(T){var n=T.data;if(n&&C.isInteractive(n)){var _=C.intersectObject(X,n);if(_){var v=_.part,Z=Nn(n.s(v+".image")||n.s("shape3d."+v+".image")||n.s("all.image")||n.s("shape3d.image"));if(Z&&rq(Z.scrollable,n,C))return}}}return C.isFirstPersonMode()?(C.isPannable()&&C.pan(0,h>0?g:-g),void 0):(C.isZoomable()&&(C._lastZoomLP=C.lp(X),C.setZoom(0>h?1/fm:fm),C._lastZoomLP=C._lastZoomHit=null),void 0)},handlePinch:function(d,U){if(this.isZoomable()){if(Math.abs(d-U)<Q.pinchZoomThreshold)return;this.setZoom(U>d?1/Qh:Qh)}},reset:function(d){this.setUp(Q.graph3dViewUp),this.moveCamera(Q.graph3dViewEye,Q.graph3dViewCenter,d)},moveSelection:function(A,X,C){var D=this;D.dm().beginTransaction(),Cd(this.sm().toSelection(this.isMovable,this),A,X,C),D.dm().endTransaction()},getMoveMode:function(i,V){var c=V.s("3d.move.mode");if(c)return c;var l="88",$="89",M="90";return Sl(i)||Bd[l]&&Bd[$]&&Bd[M]?"xyz":Bd[l]&&Bd[$]?"xy":Bd[l]&&Bd[M]?"xz":Bd[$]&&Bd[M]?"yz":Bd[l]?"x":Bd[$]?"y":Bd[M]?"z":"xz"},handleTick:function(){var P=this,Q=!1,Z=P._moveStep,s=Z,U=!1,C=!0,W=P._rotateStep*(C?-1:1);if(P.isWalkable()||(s=0),P.isPannable()||(Z=0),P.isRotatable()||(W=0),P._32Q){var A=(vm()-P._32Q)/50;s*=A,Z*=A,W*=A}P._31Q&&(ln(P._31Q),delete P._31Q,delete P._32Q),pm()&&(Q=!0,P.pan(-Z,0,U,C)),Eo()&&(Q=!0,P.pan(Z,0,U,C)),br()&&(Q=!0,Sl()?P.pan(0,Z,U,C):P.walk(s,U,C)),xp()&&(Q=!0,Sl()?P.pan(0,-Z,U,C):P.walk(-s,U,C)),nn()&&(Q=!0,P.rotate(-W,0,U,C)),Fk()&&(Q=!0,P.rotate(W,0,U,C)),Fq()&&(Q=!0,P.rotate(0,-W/2,U,C)),No()&&(Q=!0,P.rotate(0,W/2,U,C)),Q&&(P._32Q=vm(),P._31Q=Ad(P.handleTick,P))},handleKeyDown:function(D){var C=this;!Pp(D)&&qm[D.keyCode]?C.handleTick():bj(D)?C.selectAll():lm(D)?C.handleDelete(D):vr(D)&&this.isResettable()&&C.reset()},checkDoubleClickOnNote:function(B,l,M){var R=this;if(M===Ep){if(l.s("note.toggleable"))return l.s(Ng,!l.s(Ng)),R.fi({kind:"toggleNote",event:B,data:l,part:M}),!0}else if(M===Gk&&l.s("note2.toggleable"))return l.s(Dh,!l.s(Dh)),R.fi({kind:"toggleNote2",event:B,data:l,part:M}),!0;return!1},checkDoubleClickOnRotation:function(k,K,t){return t===gt?(K.setRotationX(0),!0):t===ht?(K.setRotationY(0),!0):t===it?(K.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},getViewRatio:function(c){var h=this;if(h.isOrtho())return h.getWidth()/h.getOrthoWidth();var m=h.getCenter(),W=h.getHeight(),Y=h.getEye(),C=[m[0]-Y[0],m[1]-Y[1],m[2]-Y[2]],j=[c[0]-Y[0],c[1]-Y[1],c[2]-Y[2]],l=Math.sqrt(C[0]*C[0]+C[1]*C[1]+C[2]*C[2]),Z=1/Math.tan(h.getFovy()/2);return W*l*Z/(j[0]*C[0]+j[1]*C[1]+j[2]*C[2])},inViewSpace:function(Y){var U,I=this,M=I._transformPointToViewSpace(Y),R=I.getAspect(),m=I.getNear(),v=I.getFar();return-M[2]<m||-M[2]>v?!1:I.isOrtho()?(U=I.getOrthoWidth()/2,Math.abs(M[0])<=U&&Math.abs(M[1]*R)<=U):(U=Math.sqrt(M[0]*M[0]+M[1]*M[1]+M[2]*M[2])*Math.tan(I.getFovy()/2),Math.abs(M[1]<=U)&&Math.abs(M[0])<=U*R)},getPVMatrix:function(){var d,N=this;return(d=N._18Q)||(d=gi(N),N._18Q=Tg(d,d,Yp(N)),N._18Q._wh=N.getWidth()/2/N.getHeight()),d},getFrustum:function(){var B=new pd,o=new fh,V=new Array(16);return function(){for(var r=this.getPVMatrix(),S=!1,x=0;16>x;x++)r[x]!==V[x]&&(S=!0,V[x]=r[x]);return S&&o.setFromMatrix(B.fromArray(r)),o}}(),toViewPosition:function(S){var W=this,w=W.getWidth()/2,H=W.getHeight()/2,d=W.getPVMatrix();return S=Tq([S[0],S[1],S[2],1],d),{x:w+w*S[0]/S[3],y:H-H*S[1]/S[3],z:S[2]/S[3]}},getHitPosition:function(K,P,L){var G=this,s=G.getWidth(),M=G.getHeight(),h=K.target?G.lp(K):K,w=h.x-s/2,O=h.y-M/2,R=G.getCenterInfo(),x=Yp(G);P=P?P:[0,0,0],L=L?L:[0,1,0],w=w/s*R.width,O=-1*O/M*R.height;var F=[x[0]*w,x[4]*w,x[8]*w],A=[x[1]*O,x[5]*O,x[9]*O],I=[F[0]+A[0],F[1]+A[1],F[2]+A[2]],b=G.getCenter(),j=wg(G,P,L,[I[0]+b[0],I[1]+b[1],I[2]+b[2]]);return j?j:[0,0,0]},intersectObject:function(L,V){return this._raycaster.intersectObject(L,V)},intersectObjects:function(g,m,I){return this._raycaster.intersectObjects(g,m,I)},getLineLength:function(F){this.validate();var j=this.getData3dUI(F);if(j&&j.getCache){var k=j.getCache();if(k)return k[k.length-1].length}return 0},getLineOffset:function(r,K){var Y=this.getData3dUI(r);if(Y&&Y.getCache){var M=Y.getCache();if(M){var d=Xp(M,K);if(r.s("shape3d")!==nk)return d;var $,g;if(r.getScale3d&&($=r.getScale3d(),1===$[0]&&1===$[1]&&1===$[2]&&($=null)),r.r3&&(g=r.r3(),0===g[0]&&0===g[1]&&0===g[2]&&(g=null)),!g&&!$)return d;var F=new Ri(r.p3()),Q=new Ri(d.point).sub(F),R=new Ri(d.tangent).add(Q);if($&&($=new Ri($),Q.multiply($),R.multiply($)),g){var y=(new zn).setFromEuler(new Cm(g,r.getRotationMode(),!0));Q.applyQuaternion(y),R.applyQuaternion(y)}return{point:Q.clone().add(F),tangent:R.sub(Q).normalize()}}}return O},_genBatchInstancedArrayFunc:function(){var Z=this._glCapabilities&&this._glCapabilities.instancedArray&&!this._batchInstancedDisabled,L=Z?qf:vc;this.batchInstancedModel=function(k,B,D,n,H,x,T){L(this,k,B,D,n,H,x,T)};var x=Z?dg:Zh;this.batchInstancedShapeFace=function(s,D,X){x(s,D,X)};var N=Z?Lb:bg;this.batchInstancedFace=function(z,_,E,K,j){N(this,z,_,E,K,j)}},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0},moveCamera:function(h,Z,F){var b=this,X=b.getEye();X=[X[0],X[1],X[2]];var z=b.getCenter();if(z=[z[0],z[1],z[2]],h||(h=X),Z||(Z=z),b._flyAnim&&b._flyAnim.stop(!0),F=Ub(F),!F)return b.setEye(h[0],h[1],h[2]),b.setCenter(Z[0],Z[1],Z[2]),delete b._flyAnim,!0;var E=[h[0]-X[0],h[1]-X[1],h[2]-X[2]],r=[Z[0]-z[0],Z[1]-z[1],Z[2]-z[2]];return F.action=function(f){b.setCenter(z[0]+r[0]*f,z[1]+r[1]*f,z[2]+r[2]*f),b.setEye(X[0]+E[0]*f,X[1]+E[1]*f,X[2]+E[2]*f)},F._37o=function(){delete b._flyAnim},b._flyAnim=nd(F)},flyTo:function(){function s(o,l,Z){if(Z instanceof f.Node){Y.fromArray(Xi(Z,l.getMat(Z)));var v=Z.getAnchor3d();o.push((new Ri).set(0-v.x,0-v.y,0-v.z).applyMatrix4(Y)),o.push((new Ri).set(0-v.x,0-v.y,1-v.z).applyMatrix4(Y)),o.push((new Ri).set(0-v.x,1-v.y,0-v.z).applyMatrix4(Y)),o.push((new Ri).set(0-v.x,1-v.y,1-v.z).applyMatrix4(Y)),o.push((new Ri).set(1-v.x,0-v.y,0-v.z).applyMatrix4(Y)),o.push((new Ri).set(1-v.x,0-v.y,1-v.z).applyMatrix4(Y)),o.push((new Ri).set(1-v.x,1-v.y,0-v.z).applyMatrix4(Y)),o.push((new Ri).set(1-v.x,1-v.y,1-v.z).applyMatrix4(Y))}}var G=new Ri,N=new Ri,x=new Ri,R=new Ri,E=new Ri,Y=new pd,v=new f.Math.Quaternion,H=new Cm,T=new wj;return function(a,l,U){var z=this;"boolean"==typeof l&&(l={animation:l}),l=l||{};var o=l.center,b=l.distance,P=l.direction,X=l.worldDirection,W=U||l.ratio||.8,m=l.xRatio||W,J=l.yRatio||W;
(U!==n||l.duration||l.frames)&&(l={animation:l});var e,B,h=[],A=b===n;if(o&&x.fromArray(o),!o||A)if(a||(a=z.dm().getDatas()),1===a.length&&(a=Sb(a)?a.get(0):a[0]),a instanceof f.Node)o||x.fromArray(a.p3()),A&&(s(h,z,a),e=h.length);else{if(!a.length)return;if((A||!o)&&(h=[],a.forEach(function(S){s(h,z,S)}),e=h.length,!e))return;o||(T.setFromPoints(h),x.copy(T.min).add(T.max).multiplyScalar(.5))}if(z._flyAnim&&z._flyAnim.stop(!0),G.fromArray(z.getEye()),N.fromArray(z.getCenter()),z.setCenter(x.x,x.y,x.z),R.subVectors(G,N),P||X){!X&&a instanceof f.Node?v.setFromEuler(H.set(a.r3(),a.getRotationMode(),!0)):v.set(0,0,0,1);var V=R.length();R.fromArray(X||P).applyQuaternion(v).setLength(V)}var c=new Ri(z.getUp()),F=Tc.fequal(c.x,0,1e-5)&&Tc.fequal(c.z,0,1e-5);if(F&&0===R.x&&0===R.z){var K=.001,O=R.y;R.y=O*(1-K),R.z=Math.sign(O)*K}var i=0;if(A){var M,I,$,y=m,D=J;if(E.copy(R),z.isOrtho()){var t=-1/0;for(z._eye[0]=R.x+x.x,z._eye[1]=R.y+x.y,z._eye[2]=R.z+x.z,M=gi(z),Tg(M,M,Yp(z)),B=0;e>B;B++)$=h[B],I=Tq([$.x,$.y,$.z,1],M),t=Math.max(t,Math.max(Math.abs(I[0])/y,Math.abs(I[1])/D));i=z.getOrthoWidth()*t}else{for(var d,u,C=z.getNear(),r=10;r--;){for(z._eye[0]=R.x+x.x,z._eye[1]=R.y+x.y,z._eye[2]=R.z+x.z,M=gi(z),Tg(M,M,Yp(z)),d=!0,u=-1/0,B=0;e>B;B++){if($=h[B],I=Tq([$.x,$.y,$.z,1],M),I[3]<C&&r){R.multiplyScalar(2),d=!1;break}u=Math.max(u,Math.max(Math.abs(I[0])/y,Math.abs(I[1])/D)-I[3])}if(d)break}R.setLength(u+R.length())}R.manhattanLength()<1e-6&&R.copy(E)}else R.setLength(b);var g=R.add(x),k=Ub(l.animation);if(k){z.setEye(G.x,G.y,G.z),z.setCenter(N.x,N.y,N.z);var S=g.clone().sub(x),Y=S.length();Y&&S.multiplyScalar(1/Y);var w=G.clone().sub(N),L=w.length();L&&w.multiplyScalar(1/L);var p=(new pd).lookAtDirection(w,c),q=(new pd).lookAtDirection(S,c),Z=(new zn).setFromRotationMatrix(p),_=(new zn).setFromRotationMatrix(q),j=(new Ri).subVectors(x,N);if(i)var ko=z.getOrthoWidth();var up=new Ri,gq=new Ri,Ke=new Ri,Yh=k.action,sg=k._37o,zh=N.clone();return k.action=function(u,o){gq.copy(zh).addScaledVector(j,u);var r=Z.clone().slerp(_,u);up.set(0,0,1).applyQuaternion(r).setLength(L+(Y-L)*u).add(gq),Ke.set(0,1,0).applyQuaternion(r),z.setCenter(gq.x,gq.y,gq.z),z.setEye(up.x,up.y,up.z),z.setUp(Ke.x,Ke.y,Ke.z),i&&z.setOrthoWidth((i-ko)*u+ko),Yh&&Yh(u,o)},k._37o=function(){delete z._flyAnim;var Y=z.getUp(),P=F?Q.graph3dViewUp:c.toArray();(Y[0]!==P[0]||Y[1]!==P[1]||Y[2]!==P[2])&&z.setUp(P),sg&&sg()},{lastEye:G,lastCenter:N,eye:g,center:x,orthoWidth:i,animation:z._flyAnim=nd(k)}}return z.setEye(g.x,g.y,g.z),z.setCenter(x.x,x.y,x.z),i&&z.setOrthoWidth(i),delete z._flyAnim,{lastEye:G,lastCenter:N,eye:g,center:x,orthoWidth:i}}}(),getBoundingBox:function(){function b(n,v,_){w.fromArray(Xi(_,v.getMat(_)));var f=_.getAnchor3d();n.push((new Ri).set(0-f.x,0-f.y,0-f.z).applyMatrix4(w)),n.push((new Ri).set(0-f.x,0-f.y,1-f.z).applyMatrix4(w)),n.push((new Ri).set(0-f.x,1-f.y,0-f.z).applyMatrix4(w)),n.push((new Ri).set(0-f.x,1-f.y,1-f.z).applyMatrix4(w)),n.push((new Ri).set(1-f.x,0-f.y,0-f.z).applyMatrix4(w)),n.push((new Ri).set(1-f.x,0-f.y,1-f.z).applyMatrix4(w)),n.push((new Ri).set(1-f.x,1-f.y,0-f.z).applyMatrix4(w)),n.push((new Ri).set(1-f.x,1-f.y,1-f.z).applyMatrix4(w))}var w=new pd;return function(t){if(t=t||this.sm().getSelection(),t instanceof f.Node&&(t=[t]),0===t.length)return O;var R=[];t.forEach(function(O){Cl(O)&&b(R,this,O)},this);var v=[1/0,1/0,1/0],p=[-1/0,-1/0,-1/0];return R.forEach(function(K){v[0]=Math.min(K.x,v[0]),v[1]=Math.min(K.y,v[1]),v[2]=Math.min(K.z,v[2]),p[0]=Math.max(K.x,p[0]),p[1]=Math.max(K.y,p[1]),p[2]=Math.max(K.z,p[2])}),{min:v,max:p}}}(),isShaderCompileParallel:function(){return!!this._parallelShaderCompile},enableShaderCompileParallel:function(){var T=this.getGLExtensions();if(!T)return!1;var g=T.get("KHR_parallel_shader_compile");return g?(this._parallelShaderCompile=!0,void 0):!1},disableShaderCompileParallel:function(){this._parallelShaderCompile=!1},setBatchInfo:function(I,Z){var T=this._batchInfoMap[I];this._batchInfoMap[I]=Z,this.fp("batchInfo",T,Z)},getBatchInfo:function(J){return this._batchInfoMap[J]||Cc[J]},getStaticInstancingKey:function(U,f){var B;if(!f&&(B=U._lastInstancingKey))return B;var g=U.s("shape3d");if(Yo(g)){var S;(S=g.uuid)||(S=g.uuid=Tc.generateUUID()),B=S}else B=g;return B+="_"+U.s("static.group"),U._lastInstancingKey=B},setOrthoWidth:function(H){var k=this._orthoWidth;if(this._orthoWidth=H,this._syncEyeWithOrthoWidth){var p=H/this.getAspect(),N=p/2/hl(this.getFovy()/2),F=(new Ri).fromArray(this.getEye()),D=(new Ri).fromArray(this.getCenter());F.sub(D).setLength(N).add(D),this.setEye(F.toArray())}this.fp("orthoWidth",k,H)},getCamera:function(Z){var m=this;Z||(Z=m._mainCamera,Z||(Z=m._mainCamera=new f.Camera)),Z.s({"camera.type":m.isOrtho()?"ortho":"perspective","camera.aspect":m.getAspect(),"camera.fovy":m.getFovy(),"camera.ortho.width":m.getOrthoWidth(),"camera.near":m.getNear(),"camera.far":m.getFar()});var U=m.getEye();return Z.p3(U.slice()),Z.lookAt(m.getCenter(),m.getUp()),Z},syncFromCamera:function(z){var y=this,B=new Ri(y.getEye()),h=new Ri(y.getCenter()),p=new Ri,J=h.sub(B).length();y.setEye(z.p3());var x=z.getEuler();return p.set(0,0,-1).applyEuler(x),B.copy(p).setLength(J).add(h.copy(z.p3())),y.setCenter(B.toArray()),B.set(0,1,0).applyEuler(x),h.set(0,1,0),Math.abs(p.cross(B).dot(h))<1e-5?y.setUp(h.toArray()):y.setUp(B.toArray()),y.setOrtho("ortho"===z.s("camera.type")),y.setAspect(z.s("camera.aspect")),y.setFovy(z.s("camera.fovy")),y.setOrthoWidth(z.s("camera.ortho.width")),y.setNear(z.s("camera.near")),y.setFar(z.s("camera.far")),!0},resetHeadlightProperties:function(){this._headlightColor=Q.graph3dViewHeadlightColor,this._headlightIntensity=Q.graph3dViewHeadlightIntensity,this._headlightRange=Q.graph3dViewHeadlightRange,this._headlightDirection=Q.graph3dViewHeadlightDirection,this._headlightGroup=Q.graph3dViewHeadlightGroup,this._headlightAmbientIntensity=Q.graph3dViewHeadlightAmbientIntensity,this._headlightDisabled=Q.graph3dViewHeadlightDisabled,this._headlightRatioForPhysicalMaterial=Q.graph3dViewHeadlightRatioForPhysicalMaterial},resetFogProperties:function(){this._fogDisabled=Q.graph3dViewFogDisabled,this._fogMode=Q.graph3dViewFogMode,this._fogDensity=Q.graph3dViewFogDensity,this._fogColor=Q.graph3dViewFogColor,this._fogNear=Q.graph3dViewFogNear,this._fogFar=Q.graph3dViewFogFar},_gatherRenderLayersByPriority:function(G){if(G||!(this._renderLayerSettingsVersion>=Qi)){var Q=this;Q._renderLayerSettingsVersion=Qi;var F=Q._sortedRenderLayers=y.keys(Q._renderLayerInfoMap);for(var w in ar)F.indexOf(w)>=0||F.push(w);F.sort(function(P,I){return Q.getRenderLayerInfo(P).priority-Q.getRenderLayerInfo(I).priority})}},setRenderLayerInfo:function(o,H){Sg(0,o,this._renderLayerInfoMap);var g=this.getRenderLayerInfo(o),x=rj(g);for(var M in H)"mask"!==M&&(g[M]=H[M]);this._gatherRenderLayersByPriority(!0),this.fp("renderLayerInfo",x,g)},getRenderLayerInfo:function(C){return this._renderLayerInfoMap[C]||ar[C]},setRenderLayerInfoMap:function(o){var u=this._renderLayerInfoMap;this._renderLayerInfoMap={};for(var K in o)this.setRenderLayerInfo(K,o[K]);this.fp("renderLayerInfoMap",u,this._renderLayerInfoMap)},getRenderLayerInfoMap:function(){return this._renderLayerInfoMap},getRenderLayerKeys:function(){return this._sortedRenderLayers}});var Ms;Q.registerTextureLoader=function(D){Ms?Ms.push(D):Ms=[D]},Q.unregisterTextureLoader=function(K){if(Ms){var M=Ms.indexOf(K);return M>=0?(Ms.splice(M,1),0===Ms.length&&(Ms=null),!0):!1}};var Ns=function(A,v){if(5131===v){var a=A.isWebGL2();if(!a){var W=A._glExtensions.get("OES_texture_half_float");v=null!==W?W.HALF_FLOAT_OES:null}}return v||5121},Os=function(C,Z,e){if(!C.isWebGL2())return Z;var b=Z;return 6403===Z&&(5126===e&&(b=33326),5131===e&&(b=33325),5121===e&&(b=33321)),6407===Z&&(5126===e&&(b=34837),5131===e&&(b=34843),5121===e&&(b=32849)),6408===Z&&(5126===e&&(b=34836),5131===e&&(b=34842),5121===e&&(b=32856)),(33325===b||33326===b||34842===b||34836===b)&&C._glExtensions.get("EXT_color_buffer_float"),b};y.assign(ch.Graph3dView.prototype,{getTextureMap:function(){return this._2O},setTexture:function(i,V,E){E=E||"";var l;(l=this._2O[i])||(l=this._2O[i]={}),l[E]=V},deleteTexture:function(Q){var u=this;if(u._2O){var j=u._2O[Q];if(j){delete u._2O[Q];var a=u.getGL();for(var U in j)a.deleteTexture(j[U])}}},invalidateCachedTexture:function(Y){var e=this.getData3dUI(Y);e.invalidateCachedTexture(this.getGL()),this.invalidateData(Y)},invalidateShape3dCachedImage:function(C){this.invalidateCachedTexture(C)},getTextureFromLoader:function(z){if(Ms)for(var J,L=0,X=Ms.length;X>L;L++)if(J=Ms[L],J.checkType(z))return J.getTexture(this,z)},getGLTextureFromLoader:function(k){var q=this.getTextureFromLoader(k);if(!q)return q;var e=this.createTexture(q);return this.setTexture(k,e),e},textureToCanvas:function(){var B={type:"blitScreen",defines:{USE_LINEAR:!0}},T={type:"blitScreen"};return function(R,E,o,s){var u;if(u=Ii(R)?R:this.getTextureFromLoader(R)){var o=o||u.width,s=s||u.height;if(o&&s){E===n&&(E="linear"===u.colorSpace);var M=E?B:T;M.image=R;var U=new Ss(this,o,s);return this.renderModel(U,M),U.releaseTexture(),M.image=null,U.toCanvas()}}}}(),createTexture:function(Q,x){var p,j,B,R,k,b=this.getGL(),u=Vg,G=Ns(this,Q.type),i=Q.format||u.RGBA,_=Os(this,i,G);if(Q.image?(B=Q.image,p=B.naturalWidth||B.width,j=B.naturalHeight||B.height,k=!B||"VIDEO"!==B.tagName&&(!p||!j)):(R=!0,B=Q.data,p=Q.width,j=Q.height,k=!B||!p||!j),k)return b._emptyTexture;var I=Q.minFilter||Q.filter||u.LINEAR,A=Q.magFilter||Q.filter||u.LINEAR;return x=x||b.createTexture(),b.activeTexture(33984),Lf(b,x),b.pixelStorei(37440,Q.flipY===!0),b.pixelStorei(37441,!1),R?b.texImage2D(u.TEXTURE_2D,0,_,p,j,0,i,G,B):b.texImage2D(u.TEXTURE_2D,0,_,i,G,B),dd(b,10240,A),Tc.isPOT(p)&&Tc.isPOT(j)&&!Q.clampToEdge&&!B.clampToEdge?(dd(b,10242,u.REPEAT),dd(b,10243,u.REPEAT),dd(b,u.TEXTURE_MIN_FILTER,9728===I?9984:9987),Q.mipmapMaxLevel!==n&&dd(b,33085,Q.mipmapMaxLevel),b.generateMipmap(u.TEXTURE_2D)):(dd(b,10242,u.CLAMP_TO_EDGE),dd(b,10243,u.CLAMP_TO_EDGE),dd(b,u.TEXTURE_MIN_FILTER,I)),Lf(b,O),x},getTexture:function(v,o,x,T){if(!v)return O;var H,W,C=this,A=C.getGL(),E=C._2O[v];if(E&&(o&&(W=o.s("texture.mipmap.max")),H=E[W||""]||E.default),!H&&(H=C.getGLTextureFromLoader(v),null===H))return A._emptyTexture;if(!H){var g=Nn(v);if(!g)return A._emptyTexture;if(T||(T={}),o){T.mipmapMaxLevel=W=o.s("texture.mipmap.max");var R=o.s("texture.wrap");T.clampToEdge="clampToEdge"===R?!0:"repeat"===R?!1:n,T.flipY=o.s("texture.flipY")}if(g.uuid||(g.uuid=f.Math.generateUUID()),g.tagName){if(g.dynamic){var w;return(w=A._dynamicTexturePool[g.uuid])||(w=A._dynamicTexturePool[g.uuid]=A.createTexture()),Gi(C,A,g,w,T)}H=Gi(C,A,g,n,T),C.setTexture(v,H,W)}else{var h,t=o&&(o.s("texture.cache")||o.s("shape3d.image.cache")||g.textureCache),D=C.isVRPresenting();if(D&&(o._textureUpdateFrame===A._renderInfo.frame?t=!0:o._textureUpdateFrame=A._renderInfo.frame),t&&(h=C.getData3dUI(o),H=h.getCachedTexture(x),H&&h.interactiveInfo&&H.interactiveInfo&&(h.interactiveInfo[H.interactiveInfo.key]=H.interactiveInfo.info)),!H){var I=A._renderInfo.textureCache;if(t){if(I.time>Q.graph3dMaxVectorCacheTime)return C.redraw(),A._emptyTexture;if(!Ki(g,o))return A._emptyTexture}var q;o&&(1!==o.s("texture.scale")?q=o.s("texture.scale"):1!==o.s("shape3d.texture.scale")&&(q=o.s("shape3d.texture.scale"))),q||(q=1);var X=o&&(o.s("fixSizeOnScreen")||o.s("shape3d.fixSizeOnScreen")),b=X?9728:9729;X?"number"==typeof X&&(q*=0>X?1:X):o&&(o.s("vector.dynamic")||o.s("shape3d.vector.dynamic"))&&(h||(h=C.getData3dUI(o)),X=h.getVectorDynamicSize());var Y,e,s,N=o&&o.s("shape3d");"billboard"===N?s=o.getTall()/o.getWidth():"plane"===N&&(s=o.getHeight()/o.getWidth());var p=Yj(g,o);if(X){var P;P=t?C._devicePixelRatio||mr:C.getDevicePixelRatio(),Y=X[0]>0?X[0]*P:q*p*P,e=X[1]>0?X[1]*P:q*(s?kp(g,o,C,Math.min(4096,p*s)):kp(g,o))*P}else Y=q*p,e=q*(s?kp(g,o,C,Math.min(4096,p*s)):kp(g,o));if(Y>=1&&e>=1){var l=0;(t||D)&&(l=Date.now());var J=C._glCapabilities.maxTextureSize;Y=Math.min(Y,J),e=Math.min(e,J);var z=rp(Y,e);if(!h&&o&&(h=C.getData3dUI(o)),h&&h.interactiveInfo){var L=v;"object"==typeof L&&(L=L.uuid||(L.uuid=f.Math.generateUUID()));var i=h.interactiveInfo[L]={};z.interactiveInfo=i.bodyInfo={compInfos:[],matrix:new Ci,rect:{x:0,y:0,width:Y,height:e}}}Nq(z,g,0,0,Y,e,o,C),z.interactiveInfo&&(z.interactiveInfo=null),z.restore(),I.count++,I.pixels+=Y*e,o?(T.minFilter=_p(o.s("texture.filter.min")||o.s("texture.filter"))||b,T.magFilter=_p(o.s("texture.filter.mag")||o.s("texture.filter"))||b):T.minFilter=T.magFilter=b,t||D?(H=Gi(C,A,so,null,T),h.setCachedTexture(H,x),I.time+=Date.now()-l,i&&(H.interactiveInfo={key:L,info:i}),so=null):H=Gi(C,A,so,C._1O,T)}}}}return H}}),function(){function L(c,h,x){var y=c[h];y&&y.releaseTexture(),x?c[h]=x:delete c[h]}var x=ch.EnvmapRenderer=function(Q){this.gv=Q,this._envmaps={},this._envmapHash={},this._probeCaptureTime={},this._envmapPoolCachedByImage=[],this._pingPongRenderTarget=null,this._equirectMaterial=null,this._blurMaterial=null,this._lastCaptureFrame=0,this._cubemapMaterial=null,this._envmapIntensity={}};x.prototype={},x.prototype.constructor=x,x.prototype.changeEnvmapType=function(j){"legacy"===j?(this.setEnvmapByProbeId=this.setEnvmapLegacy,this.onBeforeRender=this.onBeforeRenderLegacy):(this.setEnvmapByProbeId=this.setEnvmap,this.onBeforeRender=this.onBeforeRenderNew)},x.prototype.invalidateEnvmap=function(r){var m=this.gv;if("legacy"!==m.getEnvmapType()){var F=m.getGL();F&&(r?(delete this._envmapHash[r],delete this._probeCaptureTime[r]):(this._envmapHash={},this._probeCaptureTime={}),m.iv())}},x.prototype.contextLost=function(){var s=this;s._envmaps={},s._envmapPoolCachedByImage=[],s._envmapHash={},s._pingPongRenderTarget=null,s._equirectMaterial=s._cubemapMaterial=s._blurMaterial=null,s._hdrDynamicComposeRTT=null,s._envmapLegacy=null,s._lastLegacyImage=null},x.prototype.onBeforeRenderLegacy=function(m){this.gv._picking||(this.assureTextureLegacy(m),this.assureEnvmapPoolForImage())},x.prototype.assureTextureLegacy=function(f){var I=this,b=I.gv,O=b.getEnvmap();if(O!==I._lastLegacyImage){if(I._envmapLegacy&&(f.deleteTexture(I._envmapLegacy),I._envmapLegacy=null),!O)return I._lastLegacyImage=O,void 0;var v=Q.getImage(O);if(v&&v.tagName){v=Q.resizeImagePOT(v,!0);var Y=I._envmapLegacy=f.createTexture();f.activeTexture(33984),f.bindTexture(34067,Y),f.texParameteri(34067,10240,9729),f.texParameteri(34067,10241,9729),f.texImage2D(34069,0,6408,6408,5121,v),f.texImage2D(34070,0,6408,6408,5121,v),f.texImage2D(34071,0,6408,6408,5121,v),f.texImage2D(34072,0,6408,6408,5121,v),f.texImage2D(34073,0,6408,6408,5121,v),f.texImage2D(34074,0,6408,6408,5121,v),f.bindTexture(34067,f._emptyCubeTexture),I._lastLegacyImage=O}}},x.prototype.setEnvmapLegacy=function(m,S,l){m.uEnvMap=this._envmapLegacy,m.envMapIntensity=l},x.prototype.onBeforeRenderNew=function(s){this.gv._picking||(this.assureTextureNew(s),this.resetUniformCache(),this.assureEnvmapPoolForImage())},x.prototype.isHDR=function(x){return"string"==typeof x&&(x.indexOf(".hdr")===x.length-4||x.indexOf(".HDR")===x.length-4)},x.prototype.isDynamicImage=function(B){return B&&B.comps&&B.comps[0]&&"__ht_envmap_bg__"===B.comps[0].type},x.prototype.isImageReady=function(w){var E;if(this.isHDR(w))E=Q.getHdrTexture(w);else if(E=Q.getImage(w),this.isDynamicImage(E)&&!this.isImageReady(E.comps[0].image))return!1;return E},x.prototype.assureTextureNew=function(I){var k,F,T=this,$=T.gv,E=$.getEnvmap(),N=T._envmapHash,f=T._envmaps,R=T._envmapIntensity,P=I._renderInfo.frame;if(this._lastCaptureFrame>=P||$._picking)for(k in E)F=E[k].intensity,R[k]=F==O?1:F;else{for(var k in E){var Z=E[k];F=Z.intensity,R[k]=F==O?1:F;var A,o=Z.type;switch(o){case"sphere":A=Z.image,A!==N[k]&&(A?T.isImageReady(A)&&(N[k]=A,L(f,k,T.fromEquirectangular(A))):(N[k]=A,L(f,k,null)));break;case"cube":var u=Z.images;if(u&&6===u.length&&(A=u.join(","),A!==N[k])){for(var w=!0,S=!1,C=0;6>C;C++){if(!u[C]){S=!0;break}if(!Q.getImage(u[C])){w=!1;break}}S?(N[k]=A,L(f,k,null)):w&&(N[k]=A,L(f,k,T.fromCubemap(u)))}break;case"skybox":var s=$.getSkybox();if(s){var K=s.s("shape3d");if(A="sphere"===K?s._id+"_"+s.s("shape3d.image"):s._id+"_"+s.s("front.image"),A!==N[k]){var w;if("sphere"===K)w=T.isImageReady(s.s("shape3d.image"));else{w=!0;for(var Y=["front","back","left","right","top","bottom"],C=0;6>C;C++)if(!Q.getImage(s.s(Y[C]+".image"))){w=!1;break}}w&&(N[k]=A,L(f,k,T.fromSkybox()))}}break;case"probe":var m=Z.pos,e=Z.size;if(A=m[0]+"_"+m[1]+"_"+m[2]+"_"+e,A!==N[k]){var b=this._probeCaptureTime[A],d=Date.now();b||(this._probeCaptureTime[A]=b=d),d-b>Q.envmapProbeMinWaitTime&&!bl&&!en||d-b>Q.envmapProbeMaxWaitTime?(delete this._probeCaptureTime[A],N[k]=A,L(f,k,T.fromSceneProbe(m,e,Z.filter))):$.iv()}}}var i=y.keys(f);i.forEach(function(h){E[h]===n&&(delete N[h],L(f,h,null))})}},x.prototype.resetUniformCache=function(){this._frameUniformCache={}},x.prototype.setEnvmap=function(h,w,v){var U=h.uuid,p=this._frameUniformCache,S=this._envmaps[w];S&&(S=S.texture),p[U]!==S&&(p[U]=S,h.uEnvMap=S),v&&(v*=this._envmapIntensity[w]||0),h.envMapIntensity=v},x.prototype.assureEnvmapPoolForImage=function(){for(var m=this._envmapPoolCachedByImage,A=0,S=m.length;S>A;A++)m[A][0]&&!m[A][1]&&this.isImageReady(m[A][0])&&(m[A][1]=this.fromEquirectangular(m[A][0]))},x.prototype.assureEnvmapFromEquirectangular=function(K){for(var n=this._envmapPoolCachedByImage,h=0,V=n.length;V>h;h++)if(n[h][0]===K){var O=n[h][1];return O?O.texture:null}return n.push([K,null]),this.gv.iv(),null},x.prototype.invalidateEnvmapUsedByMaterial=function(y){if(y)for(var K=this._envmapPoolCachedByImage,m=0,Z=K.length;Z>m;m++)K[m][0]===y&&(K[m][1]=null);else this._envmapPoolCachedByImage=[];this.gv.iv()},x.prototype.isEnvmapUsedByMaterialReady=function(F){for(var v=this._envmapPoolCachedByImage,P=F==O,Z=0,L=v.length;L>Z;Z++)if(P){if(!v[Z][1])return!1}else if(v[Z][0]===F)return!!v[Z][1];return P},x.prototype.fromEquirectangular=function(b){var t,x,v;if(this.isHDR(b))t=f.Default.getHdrTexture(b),x="linear";else if(this.isDynamicImage(b)&&this.isHDR(b.comps[0].image)){var o=b.comps[0],J=o.image;o.image=null;var u=this.gv.getTexture(b);o.image=J;var _=this.gv.getTexture(J);v=this._hdrDynamicComposeRTT,v||(v=this._hdrDynamicComposeRTT=this._allocateTargets());var X=b.width,I=this.gv;I.renderModel(v,X,b.height,{type:"envmapDynamicCompose",offset:o.offset?(o.offset%1+1)%1:0,texture1:_,texture2:u}),v=v.texture,t=b,x="linear"}else t=f.Default.getImage(b),x="sRGB";return t?(this.rectSize=[1/t.width,1/t.height],b=v||this.gv.getTexture(b),this.fromTexture(b,null,x)):null},x.prototype.fromCubemap=function(q){var R=this.gv.getGL(),u=R.createTexture();R.activeTexture(33984),R.bindTexture(34067,u),R.texParameteri(34067,10240,9729),R.texParameteri(34067,10241,9729);for(var y=[],t=C/3,M=0;6>M;M++)y[M]=Q.resizeImage(f.Default.getImage(q[M]),t);return R.texImage2D(34069,0,6408,6408,5121,y[0]),R.texImage2D(34070,0,6408,6408,5121,y[1]),R.texImage2D(34071,0,6408,6408,5121,y[2]),R.texImage2D(34072,0,6408,6408,5121,y[3]),R.texImage2D(34073,0,6408,6408,5121,y[4]),R.texImage2D(34074,0,6408,6408,5121,y[5]),R.bindTexture(34067,R._emptyCubeTexture),this.fromTexture(u,!0,"sRGB")},x.prototype.fromTexture=function(s,U,w){var a=this._allocateTargets();this._pingPongRenderTarget||(this._pingPongRenderTarget=this._allocateTargets());var L=this.gv,i=L.getGL(),$=Ar.for(i).directState(),g=$.depth.enabled;$.scissor.enabled=!0,$.depth.enabled=!1;var R=L.getViewport(i);return this._textureToCubeUV(s,a,U,w),this._applyPMREM(a),L.setViewport(i,R[0],R[1],R[2],R[3]),$.depth.enabled=g,$.scissor.enabled=!1,a},x.prototype.fromSkybox=function(){return this._fromCamera(function(P){P.s({"camera.onlySky":!0,"camera.skybox.blur":!1})})},x.prototype.fromScene=function(X){return this._fromCamera(function(k){k.s({"camera.onlySky":!1}),X&&X(k)})},x.prototype.fromNode=function(F){var M=this.gv.getData3dUI(F),n=M._42;M._42=rc;var d=this.gv.getSkybox(),g=F.p3();if(d){var e=d.p3();d.p3(g)}var j=this.fromScene(function(J){J.p3(g)});return M._42=n,d&&d.p3(e),j},x.prototype.fromSceneProbe=function(S,U,D){var A=this.gv,k=A.getSkybox();if(k){var g=k.p3();k.p3(S)}if(D){var E=A.isVisible;A.isVisible=function(R){var j=D(R);return j!==n?j:E.call(A,R)}}var B=this.fromScene(function(h){h.p3(S),h.s("camera.near",U)});return D&&(A.isVisible=E),k&&k.p3(g),B},x.prototype._fromCamera=function(H){var c=this.gv,o=c.getCamera();H&&H(o);var I=new Ss(c,C,C,{cube:!0}),u=c.getGL(),N=c.getViewport(u),h=this.setEnvmapByProbeId,Z=this.onBeforeRender;this.setEnvmapByProbeId=function(P){P.envMap=u._emptyTexture},this.onBeforeRender=rc,o.attachRenderTarget(I),o.render(c),o.detachRenderTarget(),this.setEnvmapByProbeId=h,this.onBeforeRender=Z,c.setViewport(u,N[0],N[1],N[2],N[3]);var m=this.fromTexture(I.texture,!0,"sRGB");return I.releaseTexture(),m},x.prototype._allocateTargets=function(){return new Ss(this.gv,3*I,3*I,{textureType:5131})},x.prototype._textureToCubeUV=function(y,w,Y,M){var F,d,t=this,e=t.gv,l="sRGB"===M?"USE_SRGB":"USE_LINEAR";Y?(null==t._cubemapMaterial&&(t._cubemapMaterial={}),null==(F=t._cubemapMaterial[l])&&(d={},d[l]=!0,t._cubemapMaterial[l]=F={type:"envmapCubemap",defines:d})):(null==t._equirectMaterial&&(t._equirectMaterial={}),null==(F=t._equirectMaterial[l])&&(d={},d[l]=!0,t._equirectMaterial[l]=F={type:"envmapEquirect",defines:d})),F.envMap=y,Y||(F.texelSize=t.rectSize);var W=s[0];e.renderModel(w,{model3d:!0,mesh:W,mat:F,encoding:"linear"===M?1:0},{restoreViewport:!1,preRender:function(){t._setViewport(w,0,0,3*I,2*I)}})},x.prototype._applyPMREM=function(y){for(var p,D,X,p=1;_>p;p++)D=Math.sqrt(e[p]*e[p]-e[p-1]*e[p-1]),X=N[(p-1)%N.length],this._blur(y,p-1,p,D,X)},x.prototype._setViewport=function(Y,k,T,I,R){var H=this.gv;H.setViewport(H.getGL(),k,T,I,R),H.getRenderState().directState().scissor.box=[k,T,I,R]},x.prototype._blur=function(z,e,W,A,E){var y=this._pingPongRenderTarget;this._halfBlur(z,y,e,W,A,"latitudinal",E),this._halfBlur(y,z,W,W,A,"longitudinal",E)},x.prototype._halfBlur=function(c,X,v,T,U,j,e){var S=this,t=S.gv,o=S._blurMaterial;if("latitudinal"===j||"longitudinal"===j){o||(S._blurMaterial=o={type:"envmapBlur",defines:{n:E}});var Y,P,g,F=3,J=z[v]-1,N=isFinite(U)?Math.PI/(2*J):2*Math.PI/(2*E-1),l=U/N,x=isFinite(U)?1+Math.floor(F*l):E,$=[],a=0;for(Y=0;E>Y;++Y)P=Y/l,g=Math.exp(-P*P/2),$.push(g),0==Y?a+=g:x>Y&&(a+=2*g);for(Y=0;Y<$.length;Y++)$[Y]=$[Y]/a;o.envMap=c.texture,o.samples=x,o.weights=$,o.latitudinal="latitudinal"===j,e&&(o.poleAxis=e),o.dTheta=N,o.mipInt=D-v;var Q=z[T],P=3*Math.max(0,I-2*Q),H=(0===T?0:2*I)+2*Q*(T>D-b?T-D+b:0),L=s[T];t.renderModel(X,{model3d:!0,mesh:L,mat:o},{restoreViewport:!1,preRender:function(){S._setViewport(X,P,H,3*Q,2*Q)}})}};var b=4,D=8,I=Math.pow(2,D),F=[.125,.215,.35,.446,.526,.582],_=D-b+1+F.length,E=20,w=(1+Math.sqrt(5))/2,V=1/w,N=[new Ri(1,1,1),new Ri(-1,1,1),new Ri(1,1,-1),new Ri(-1,1,-1),new Ri(0,w,V),new Ri(0,w,-V),new Ri(V,0,w),new Ri(-V,0,w),new Ri(w,V,0),new Ri(-w,V,0)],l=function(){for(var E=[],y=[],V=[],W=D,z=0;_>z;z++){var v=Math.pow(2,W);y.push(v);var t=1/v;z>D-b?t=F[z-D+b-1]:0==z&&(t=0),V.push(t);for(var w=1/(v-1),o=-w/2,X=1+w/2,K=6,e=[],N=[],Q=[],T=0;K>T;T++){var f=2*(T%3)/3-1,j=T>2?0:-1;e.push(f,j,0,f+2/3,j,0,f+2/3,j+1,0,f,j,0,f+2/3,j+1,0,f,j+1,0),N.push(o,o,X,o,X,X,o,o,X,X,o,X),Q.push(T,T,T,T,T,T)}E.push({position:new yr(e),uv:new yr(N),faceIndex:new yr(Q)}),W>b&&W--}return{_lodPlanes:E,_sizeLods:y,_sigmas:V}}(),s=l._lodPlanes,z=l._sizeLods,e=l._sigmas,C=Q.EnvmapTextureSize}(),Q.setCompType("__ht_envmap_bg__",function(H,A,h,b,_){var P=h.image;if(P&&(P=Q.getImage(P))){var x=A.x,O=A.y,M=A.width,N=A.height,w=h.offset||0;w=0|(w%1+1)%1*M,0!==w&&(H.save(),H.beginPath(),H.rect(x,O,M,N),H.clip(),H.translate(w,0),Q.drawImage(H,P,x-M,O,M,N,b,_)),Q.drawImage(H,P,x,O,M,N,b,_),0!==w&&H.restore()}});var Ps=["left","front","right","back","top","bottom"],Qs=ch._RenderList=function(d){function u(){b.length=0,P.length=0,y={};for(var Z in h)h[Z].length=0}function D(){for(var S in h)h[S].rendered=null}function w(w){return w?("string"==typeof w&&(w=Q.getMaterial(w)),w&&w.transparent?!0:!1):!1}function U(J){var E,K,M,S,X,T=J.gv,I=J.data,c=J.shapeModel;if(c)if(I.s("static")&&(X=!0),c.model3d)K=!0,E=!0;else{var L;(L=I.s("shape3d.top.material"))&&(w(L)?K=!0:E=!0),(L=I.s("shape3d.bottom.material"))&&(w(L)?K=!0:E=!0),(L=I.s("shape3d.from.material"))&&(w(L)?K=!0:E=!0),(L=I.s("shape3d.to.material"))&&(w(L)?K=!0:E=!0),(L=I.s("shape3d.material"))&&(w(L)?K=!0:E=!0);var Z,v,W,s=I.s("shape3d.transparent")||I.s("points.transparent");for(Se(c)||(Z=rq(c.transparent,I,T),c=[c]),M=0,S=c.length;S>M;M++)W=c[M],v=rq(W.transparent,I,T),v===n&&(v=Z),v===n&&(v=s),v?K=!0:E=!0}for(M=0,S=Ps.length;S>M;M++){var i=J[Ps[M]];if(i){var L=T.getFaceMaterial(I,Ps[M]);L?w(L)?K=!0:E=!0:i.transparent?K=!0:E=!0}}T.isLabelVisible(I)&&(J.labelInfo&&(I.s(Ip+".transparent")?K=!0:E=!0),J.label2Info&&(I.s(_n+".transparent")?K=!0:E=!0)),T.isNoteVisible(I)&&(J.noteInfo&&(I.s(Ep+".transparent")?K=!0:E=!0),J.note2Info&&(I.s(Gk+".transparent")?K=!0:E=!0)),J._38o&&(K=E=!0),K||(E=!0),J._renderParams={opaque:E,transparent:K,staticModel3d:X}}function L(T,c){c&&U(T);var j=T.data,B=j._id;if(!y[B]){y[B]=!0;var X=T._renderParams;if(X&&X.visible!==!1){if(j.isAnimationPlaying()&&(T.shapeModel&&d.updateSkeleton(j,T.shapeModel),j.isAnimationPaused()||d.iv()),T={ui:T,data:j,z:0,id:B},d._glCapabilities&&d._glCapabilities.instancedArray&&X.staticModel3d&&T.ui.mat&&j.s("3d.visible")&&j.s(ki)){var J=d.shadowMap.enable,Q=d.getStaticInstancingKey(j,!0),D=h[Q];D||(D=h[Q]={ms:[],ds:[],cs:[],highlightColors:[],length:0,msVersion:0,shadowVersion:0,csVersion:0,highlightVersion:0,shadow:[],cache:{version:-1,length:-1,id:-1,buffer:null},cacheShadow:{version:-1,length:-1,id:-1,buffer:null},cachePick:{version:-1,length:-1,buffer:null},cacheHighlight:{version:-1,length:-1,buffer:null}});for(var A=D.length,t=0!==A,g=!1,R=16*A,N=0,f=D.ms,n=T.ui.mat;16>N;N++)f[R+N]!=n[N]&&(g=!0,f[R+N]=n[N]);if(g&&(D.msVersion=D.msVersion+1),D.ds[A]=B,J){var F=j.s("shadow.cast");(g||D.shadow[A]!==F)&&(D.shadow[A]=F,D.shadowVersion=D.shadowVersion+1)}var k=wo(null,d.pickColorMap,d.isSelectable(j),T.ui,nf,!0);g=!1;for(var s=4*A,N=0,L=D.cs;4>N;N++)L[s+N]!==k[N]&&(g=!0,L[s+N]=k[N]);if(g&&(D.csVersion=D.csVersion+1),D.length++,d._model3dInstancedBatchCount++,t)return}X.opaque&&b.push(T),X.transparent&&P.push(T)}}}function B(){var j=d.dm();for(var e in h){var p=h[e],k=p.ds;if(k&&p.length){for(var Y=p.highlightColors,E=!1,W=0,a=p.length;a>W;W++)for(var A=j.getDataById(k[W]),t=d.getData3dUI(A),D=wo(null,d.pickColorMap,d.isSelectable(A),t,nf,!0),g=4*W,i=0;4>i;i++)Y[g+i]!==D[i]&&(E=!0,Y[g+i]=D[i]);E&&(p.highlightVersion=p.highlightVersion+1),p._csBackup=[p.cs,p.csVersion,p.cachePick],p.cs=p.highlightColors,p.csVersion=p.highlightVersion,p.cachePick=p.cacheHighlight}}}function C(){for(var z in h){var H=h[z],X=H._csBackup;X&&(H.cachePick=X[2],H.csVersion=X[1],H.cs=X[0],H._csBackup=n)}}function c(L,o){if(P.length>1){for(var D,Q,w=[0,0,0,0],R=0,n=P.length;n>R;R++)D=P[R].data,(Q=D._position)?(w[0]=Q.x,w[1]=D._54O,w[2]=Q.y,w[3]=1,Tq(w,o),P[R].z=w[2]/w[3]):P[R].z=0;P.sort(L||t)}}function T(b){b?($h(O,i,b,d),$h(A,s,b,d),$h(W,p,b,d)):(O=this.batchModelMap={},i=this.batchIndexMap={},A=this.polylineModelMap={},s=this.polylineIndexMap={},W=this.wireframeModelMap={},p=this.wireframeIndexMap={}),this.markBatchInvalid()}function Z(q){q?$h(O,i,q,d):(O=this.batchModelMap={},i=this.batchIndexMap={}),this.markBatchInvalid()}function H(Z){Z?$h(A,s,Z,d):(A=this.polylineModelMap={},s=this.polylineIndexMap={}),this.markBatchInvalid()}function Y(f){f?$h(W,p,f,d):(W=this.wireframeModelMap={},p=this.wireframeIndexMap={}),this.markBatchInvalid()}function R(){return this._batchInvalid}function I(){this._batchInvalid=!0}function J(){this._batchInvalid=null}function N(){return h}var b=[],P=[],O={},i={},A={},s={},W={},p={},y={},h={};return{opaque:b,transparent:P,init:u,push:L,getModel3dInstancedBatchMap:N,resetModel3dInstancedDraw:D,batchModelMap:O,batchIndexMap:i,polylineModelMap:A,polylineIndexMap:s,wireframeModelMap:W,wireframeIndexMap:p,beginFillHighlightMaskColor:B,endFillHighlightMaskColor:C,ivBatch:T,ivModelBatch:Z,ivPolylineBatch:H,ivWireframeBatch:Y,markBatchInvalid:I,isBatchInvalid:R,onUpdated:J,sort:c}},Rs=ch._RenderLists=function(U){function o(){for(var n in w)w[n].init();U._model3dInstancedBatchCount=0}function X(){for(var s in w)w[s].onUpdated()}function Z(R,r){R=R||"main";var A=w[R];return!A&&r&&(A=w[R]=new Qs(U)),A}function V(G,i){var c=G.data.getRenderLayer(),J=Z(c,!0);J.push(G,i)}function d(p){for(var $ in w)p(w[$])}var w={};return{init:o,onUpdated:X,get:Z,push:V,each:d,lists:w}},Ss=ch.RenderTarget=function(x,h,C,n){var k,j=this;null!=h&&h.canvas?(k=h,h=C,C=n,n=arguments[4]):k=x.getGL(),n=n||{},n.cube===!!n.cube,n.samples=n.cube?0:Math.min(x._glCapabilities.maxSamples,n.samples&&n.samples>1&&2===x._webGLVersion?n.samples:0),j.options=n,j.uuid=f.Math.generateUUID(),j.gv=x,j.init(x,k,n),j.format=n.format||6408,j.textureType=Ns(x,n.textureType),j.generateMipmaps=!!n.generateMipmaps,j.depthInternalFormat=n.depthFormat||33189,n.samples&&!x._glCapabilities._maxSamplesChecked?j.setSize(k,h||1,C||1):j.setSize(k,h,C)};y.assign(ch.RenderTarget.prototype,{bind:function(z,l){var m=this.options;if(m.autoSize){var b=this.gv,B=b.getDevicePixelRatio(),o=b.getWidth()*B,R=b.getHeight()*B;this.setSize(z,o,R)}m.cube?Qc(z,this.frame[l]):Qc(z,this.options.samples?this._MSAAFbo:this.frame)},unbind:function(X){bk(X),this.options.samples&&(X.bindFramebuffer(36008,this._MSAAFbo),X.bindFramebuffer(36009,this.frame),X.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,16384,9728),X.bindFramebuffer(36008,null),X.bindFramebuffer(36009,null))},isCube:function(){return this.options.cube},init:function(J,z,$){var N=this,D=$.samples,x=$.cube,W=N.texture=z.createTexture(),X=x?34067:3553;z.activeTexture(33984),z.bindTexture(X,W),z.texParameteri(X,10242,$.wrapS||33071),z.texParameteri(X,10243,$.wrapT||33071);var E=D?9728:9729;if(z.texParameteri(X,10241,$.minFilter||E),z.texParameteri(X,10240,$.magFilter||E),z.bindTexture(X,null),x){N.depth=[],N.frame=[];for(var K=0;6>K;K++)N.depth[K]=z.createRenderbuffer(),N.frame[K]=z.createFramebuffer()}else N.depth=z.createRenderbuffer(),N.frame=z.createFramebuffer();N.assureTexture()},assureTexture:function(){var e=this;e.gv.setTexture(e.uuid,e.texture,"default"),f.Default.setImage(e.uuid,null)},releaseTexture:function(){this.gv.deleteTexture(this.uuid)},setSize:function(a,B,$){var Q=this;if(B=Math.round(B),$=Math.round($),B&&$&&(Q.width!==B||Q.height!==$)){Q.width=B,Q.height=$;var p=36161,h=36160,H=Q.options.samples,l=Q.options.cube,W=l?34067:3553;if(H){var d=Q.gv._glCapabilities;if(!d._maxSamplesChecked){for(a.bindRenderbuffer(p,Q.depth),a.getError();H>1&&(a.renderbufferStorageMultisample(p,H,Q.depthInternalFormat,B,$),a.getError());)H=Math.floor(H>>1);1>=H&&(H=0,a.texParameteri(W,10241,Q.options.minFilter||9729),a.texParameteri(W,10240,Q.options.magFilter||9729),a.renderbufferStorage(p,Q.depthInternalFormat,B,$)),d._maxSamplesChecked=!0,d.maxSamples=Q.options.samples=H,a.bindRenderbuffer(p,O)}}if(H&&(Q._MSAAFbo||(Q._MSAAFbo=a.createFramebuffer(),Q._MSAARbO=a.createRenderbuffer()),a.bindRenderbuffer(p,Q._MSAARbO),a.renderbufferStorageMultisample(36161,H,32856,B,$),Qc(a,Q._MSAAFbo),a.framebufferRenderbuffer(h,36064,p,Q._MSAARbO),a.framebufferRenderbuffer(h,36096,p,Q.depth),bk(a),a.bindRenderbuffer(p,null)),a.activeTexture(33984),a.bindTexture(W,Q.texture),l)for(var j=34069,P=0;6>P;P++)Q.setupFrameBufferTextureAndDepth(a,Q.frame[P],Q.depth[P],j+P);else Q.setupFrameBufferTextureAndDepth(a,Q.frame,Q.depth,3553);if(Q.generateMipmaps&&(2===gv._webGLVersion||Tc.isPOT(B)&&Tc.isPOT($))){a.generateMipmap(W);var K=Q.options.minFilter||(H?9728:9729);a.texParameteri(W,10241,9728===K?9984:9987)}a.bindTexture(W,null)}},setupFrameBufferTextureAndDepth:function(T,j,u,f){var g,q=this,Q=q.format,P=q.textureType;(g=q.options.data)&&(q.options.data=null),T.texImage2D(f,0,Os(q.gv,Q,P),this.width,this.height,0,Q,P,g||null),Qc(T,j),T.framebufferTexture2D(36160,36064,f,q.texture,0),this.setupRenderBufferStorage(T,u),bk(T)
},setupRenderBufferStorage:function(Q,B){var r=this,A=36161;Q.bindRenderbuffer(A,B);var q=r.options.samples;q?Q.renderbufferStorageMultisample(A,q,r.depthInternalFormat,r.width,r.height):(Q.renderbufferStorage(A,r.depthInternalFormat,r.width,r.height),Q.framebufferRenderbuffer(36160,36096,A,B)),Q.bindRenderbuffer(36161,null)},readPixels:function(v,m,n,U,j){var T=this,Q=T.gv.getGL();Qc(Q,T.frame);var t;5121===T.textureType?(j||(j=new Uint8Array(4*n*U)),t=5121):(j||(j=new Float32Array(4*n*U)),t=5126);try{Q.readPixels(v,m,n,U,6408,t,j)}finally{bk(Q)}return j},readPixelsAsync:function(){var T=function(y,k,x,I,O){var D=function(){var m=y.clientWaitSync(k,x,0);return 37149==m?(O(!1),void 0):37147==m?(yd(D,I),void 0):(O(!0),void 0)};D()};return function(J,a,d,r,z,s){var W=this;if(!W.gv.isWebGL2())throw new Error("readPixelsAsync only work on WebGL2");var D=W.gv.getGL();Qc(D,W.frame);var c;5121===W.textureType?(z||(z=new Uint8Array(4*d*r)),c=5121):(z||(z=new Float32Array(4*d*r)),c=5126);try{var _=Ym(D);D.bindBuffer(35051,_),D.bufferData(35051,z.byteLength,35041),D.readPixels(J,a,d,r,6408,c,0),D.bindBuffer(35051,null);var v=D.fenceSync(37143,0);D.flush()}finally{bk(D)}T(D,v,0,10,function(c){return D.deleteSync(v),c&&(D.bindBuffer(35051,_),D.getBufferSubData(35051,0,z),D.bindBuffer(35051,null)),D.deleteBuffer(_),c?s(z):s(null)})}}(),toCanvas:function(){var Z;return function(m,c){var l=this,G=l.width,j=l.height,J=l.readPixels(0,0,G,j);c=c||k.createElement("canvas"),c.width!==G&&(c.width=G),c.height!==j&&(c.height=j);var R;m?(Z||(Z=k.createElement("canvas")),Z.width!==G&&(Z.width=G),Z.height!==j&&(Z.height=j),R=Z.getContext("2d")):R=c.getContext("2d");var F=R.createImageData(G,j);if(J instanceof Float32Array){for(var M=J.byteLength/J.BYTES_PER_ELEMENT,B=new Uint8Array(M);--M>=0;){var W=J[M];0>W?W=0:W>1&&(W=1),B[M]=255*W}J=B}return F.data.set(J),R.putImageData(F,0,0),m&&(R=c.getContext("2d"),ks(R,{width:G,height:j,comps:[{scaleY:-1,type:"image",name:Z,rect:[0,0,G,j]}]},n,0,0,G,j)),c}}()});var Ts=ch.Interactor=function(G){this.gv=this.g3d=G};cf("Interactor",y,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()},fi:function(x){this.gv.fi(x)},startDragging:function(U){ug(this,U)}});var Us=ch.DefaultInteractor=function(c){Ig(Us,this,[c])};cf("DefaultInteractor",Ts,{getState:function(){return this._62O},setState:function(Q){this._62O=Q},getDataInfoAt:function(Y,p){var G=this.gv,j=G.getDataInfoAt(Y);if(!G.isBlockSelectable()||!j||!j.data)return j;if(!p&&G.isSelected(j.data))return j;for(var c=j.data;(c=c.getParent())&&c instanceof f.Block&&G.isSelectable(c);){var T=G.isSelected(c);if(T&&p)break;if(j={data:c,part:j.part},T&&!p)break}return j},handle_contextmenu:function(X){tn(X)},handle_mousewheel:function(x){this.gv.handleScroll(x,x.wheelDelta/40)},handle_DOMMouseScroll:function(G){2===G.axis&&this.gv.handleScroll(G,-G.detail)},handle_keydown:function(Q){this.gv.handleKeyDown(Q)},handle_mousedown:function(V){this.handle_touchstart(V)},handle_touchstart:function(v){tn(v);var R=this,X=R.gv,q=Hb(v),z=R.getDataInfoAt(v),i=z?z.data:O,H=z?z.part:O,P=X.sm(),U=Oo(v),r=Nl(v);X.setFocus(v)&&(R._62O=O,R._57I=O,R.pendingClickThrough=O,R.__lastClientPoint__=_d(v),i?Pp(v)?P.co(i)?P.rs(i):P.as(i):P.co(i)?i instanceof $c&&i.isClickThroughEnabled()&&Hb(v)&&(R.pendingClickThrough=_d(v)):P.ss(i):q&&(Pp(v)?X.isRectSelectable()&&(R._62O=wf):R._57I=_d(v)),R._31Q&&(ln(R._31Q),delete R._31Q,delete R._32Q),R._62O||(X.isFirstPersonMode()&&(Sl(v)||Wr(v)||r>2?R._62O="pan":X.isMouseRoamable()||Nd(v)?(R._62O="roaming",R.foward=U&&Hb(v),R._32Q=vm(),R._31Q=Ad(R.tick,R)):q||(R._62O="roaming")),R._62O||(q&&U&&mt[H]?(R._62O=H,R.p3=i.p3()):q&&U&&Cl(i)&&X.isSelected(i)?X.isMovable(i)?(R._62O="move",R.p3=i.p3(),R.movedata=i):X._39Q(i)&&(R._62O="none"):Nd(v)&&(r>2?R._62O="pan":2===r&&(R.dist=lg(v),R._62O="pinch")))),R.point=X.lp(v),ug(R,v),Tn(v)?X.handleDoubleClick(v,i,H):X.handleClick(v,i,H))},tick:function(){var F=this,a=F.gv,o=a._moveStep;F.point&&a.isWalkable()&&(F._32Q&&(o*=(vm()-F._32Q)/50),a.walk(F.foward?o:-o),F._32Q=vm(),F._31Q=Ad(F.tick,F))},handle_mouseup:function(X){this.handle_touchend(X)},handle_touchend:function(m){var x=this._57I;if(x&&(xh(x,_d(m))<=1&&this.gv.sm().cs(),this._57I=O),x=this.pendingClickThrough){if(xh(x,_d(m))<=1){var F=this.getDataInfoAt(m);F&&F.data instanceof $c&&F.data.isClickThroughEnabled()&&(F=this.getDataInfoAt(m,!0),F&&(m.clickThrough=!0,this.gv.sm().ss(F.data)))}this.pendingClickThrough=null}},handleWindowMouseMove:function(E){this.handleWindowTouchMove(E)},handleWindowTouchMove:function(N){var E,w,X=this,R=X.gv,C=X._62O,d=X.point,L=R.dm(),J=R.lp(N),h=J.x-d.x,A=J.y-d.y,b=R.getWidth(),e=R.getHeight();if(b&&e){var t=_d(N),O=Lo(R,t,X.__lastClientPoint__),F=xh({x:0,y:0},O),r=-Qd*h/b,f=-Qd*A/e;if("roaming"===C)X.rotate(N,r/2,f/2);else if(C===gt||C===ht||C===it)R._86O||L.beginTransaction(),R.fi({kind:R._86O?"betweenEditRotation":"beginEditRotation",event:N}),R._86O=1,R.sm().each(function(A){if(Cl(A)&&R.isRotationEditable(A)){var F=o(r)>o(f)?r:f;C===gt?A.setRotationX(A.getRotationX()+F):C===ht?A.setRotationY(A.getRotationY()+F):C===it&&A.setRotationZ(A.getRotationZ()+F)}});else if("move"===C||mt[C]){if(C===jt||C===kt||C===lt)R._87O||L.beginTransaction(),R.fi({kind:R._87O?"betweenEditScale":"beginEditScale",event:N}),R._87O=1;else{if(!R._moving){if(F<Q.touchMoveThreshold)return;L.beginTransaction()}R.fi({kind:R._moving?"betweenMove":"beginMove",event:N}),R._moving=1}var B,Z=X.p3,i=R.getPositionInfo(Z),W=Yp(R);B=C===dt?"x":C===et?"y":C===ft?"z":C===jt?"sx":C===kt?"sy":C===lt?"sz":R.getMoveMode(N,X.movedata),h=h/b*i.width,A=-1*A/e*i.height;var q,m,$=[W[0]*h,W[4]*h,W[8]*h],c=[W[1]*A,W[5]*A,W[9]*A],v=$[0]+c[0],g=$[1]+c[1],K=$[2]+c[2],P=[Z[0]+v,Z[1]+g,Z[2]+K],u=js(R.getEye(),P,!0);if("xyz"===B?(q=P,R.moveSelection(v,g,K)):"xz"===B?(q=wg(R,Z,[0,1,0],P),q&&R.moveSelection(q[0]-Z[0],0,q[2]-Z[2])):"xy"===B?(q=wg(R,Z,[0,0,1],P),q&&R.moveSelection(q[0]-Z[0],q[1]-Z[1],0)):"yz"===B?(q=wg(R,Z,[1,0,0],P),q&&R.moveSelection(0,q[1]-Z[1],q[2]-Z[2])):"x"===B||"sx"===B?(u[0]=0,q=wg(R,Z,u,P),q&&(m=q[0]-Z[0],"x"===B?R.moveSelection(m,0,0):R.sm().each(function(h){Cl(h)&&R.isSizeEditable(h)&&(E=h.getScaleX()+m/100,w=E/h.getScaleX(),h.setScaleX(E),Sl(N)&&(h.setScaleY(h.getScaleY()*w),h.setScaleTall(h.getScaleTall()*w)))}))):"y"===B||"sy"===B?(u[1]=0,q=wg(R,Z,u,P),q&&(m=q[1]-Z[1],"y"===B?R.moveSelection(0,m,0):R.sm().each(function(B){Cl(B)&&R.isSizeEditable(B)&&(E=B.getScaleTall()+m/100,w=E/B.getScaleTall(),B.setScaleTall(E),Sl(N)&&(B.setScaleY(B.getScaleY()*w),B.setScaleX(B.getScaleX()*w)))}))):("z"===B||"sz"===B)&&(u[2]=0,q=wg(R,Z,u,P),q&&(m=q[2]-Z[2],"z"===B?R.moveSelection(0,0,m):R.sm().each(function(T){Cl(T)&&R.isSizeEditable(T)&&(E=T.getScaleY()+m/100,w=E/T.getScaleY(),T.setScaleY(E),Sl(N)&&(T.setScaleX(T.getScaleX()*w),T.setScaleTall(T.getScaleTall()*w)))}))),!q)return;X.p3=q}else if(C===wf){var y=X.div;y||(y=X.div=Lj(),Vi(X.getView(),y),y.op=d,y.style.background=R.getRectSelectBackground()),R.fi({kind:R._rectSelecting?"betweenRectSelect":"beginRectSelect",event:N}),R._rectSelecting=1,y.rect=pe(y.op,J),oc(y,y.rect)}else if("pinch"===C&&2===Nl(N)){R.fi({kind:R._pinching?"betweenPinch":"beginPinch",event:N}),R._pinching=1;var m=lg(N);R._lastZoomLP||(R._lastZoomLP=hq(N)),R.handlePinch(m,X.dist),X.dist=m}else"pan"===C||Sl(N)||Wr(N)?X.pan(N,h,A):"none"===C||R.isFirstPersonMode()||X.rotate(N,r,f);X.point=J}},pan:function(K,k,j){var Q=this.gv;if(Q.isPannable()){var I=Q.getWidth(),C=Q.getHeight();if(!I||!C)return;var F=Q.getCenterInfo(),o=k/I*F.width,v=-1*j/C*F.height;Q.fi({kind:Q._panning?"betweenPan":"beginPan",event:K}),Q._panning=1,Q.pan(-o,-v)}},rotate:function(E,T,v){var j=this.gv;j.isRotatable()&&(j.fi({kind:j._rotating?"betweenRotate":"beginRotate",event:E}),j._rotating=1,j.rotate(T,v))},handleWindowMouseUp:function(d){this.handleWindowTouchEnd(d)},handleWindowTouchEnd:function(V){var h=this,e=h.gv,j=e.dm(),d=h.div;if(d){var i=e.getDatasInRect(d.rect);if(!i.isEmpty()){var B=e.sm(),y=B.toSelection(),Z=Sl(V),f=V.altKey;i.each(function(x){B.co(x)?(!Z||Z&&f)&&y.remove(x):(!f||Z&&f)&&y.add(x)}),B.ss(y)}jf(d)}e._moving&&(delete e._moving,e.fi({kind:"endMove",event:V}),e.onMoveEnded(),j.endTransaction()),e._panning&&(delete e._panning,e.fi({kind:"endPan",event:V}),e.onPanEnded()),e._rotating&&(delete e._rotating,e.fi({kind:"endRotate",event:V}),e.onRotateEnded()),e._86O&&(delete e._86O,e.fi({kind:"endEditRotation",event:V}),j.endTransaction()),e._87O&&(delete e._87O,e.fi({kind:"endEditScale",event:V}),j.endTransaction()),e._pinching&&(delete e._pinching,e.fi({kind:"endPinch",event:V}),e.onPinchEnded()),e._rectSelecting&&(delete e._rectSelecting,e.fi({kind:"endRectSelect",event:V}),e.onRectSelectEnded()),e._walking&&(delete e._walking,e.fi({kind:"endWalk",event:V}),e.onWalkEnded()),e._lastZoomLP=e._lastZoomHit=null,h.dist=h.point=h._62O=h.p3=h.movedata=h.div=h._57I=h.pendingClickThrough=h._32Q=h._31Q=h.foward=O,h.__lastClientPoint__=O}});var Vs=ch.MapInteractor=function(Q){Ig(Vs,this,[Q]),this._keepHorizon=!0,this._threshold=2,this._touchScaleThreshold=.05,this._touchRotateThreshold=.03,this._touchScaleCheckAccuracy=.01,this._panButton="right",this._minPhi=0,this._maxPhi=5*Math.PI/12};cf("MapInteractor",Ts,{setUp:function(){Vs.superClass.setUp.call(this);var Z=this.gv;this.__oldMinPhi__=Z.getRotateMinPhi(),this.__oldMaxPhi__=Z.getRotateMaxPhi(),Z.setRotateMinPhi(this._minPhi),Z.setRotateMaxPhi(this._maxPhi)},tearDown:function(){Vs.superClass.tearDown.call(this);var H=this.gv;H.setRotateMinPhi(this.__oldMinPhi__),H.setRotateMaxPhi(this.__oldMaxPhi__),delete this.__oldMinPhi__,delete this.__oldMaxPhi__},handle_contextmenu:function(L){tn(L)},handle_mousewheel:function(h){this.gv.handleScroll(h,h.wheelDelta/40)},handle_DOMMouseScroll:function(d){2===d.axis&&this.gv.handleScroll(d,-d.detail)},handle_keydown:function(Q){this.gv.handleKeyDown(Q)},handle_mousedown:function(t){this.handle_touchstart(t)},handle_touchstart:function(l){tn(l);var p=this,h=p.gv;if(h.setFocus(l)){var x=h.getDataInfoAt(l),Y=x?x.data:O,z=x?x.part:O;p.__lastClientPoint__=_d(l);var S=p.editing={point:h.lp(l),data:Y,part:z};Nd(l)?S.touch=!0:(S.touch=!1,S.clickLeft=Hb(l),S.pan=Wr(l)?!0:"left"===this.panButton===S.clickLeft),Y&&h._39Q(Y)&&(S.preventDefault=!0),ug(p,l),Tn(l)?h.handleDoubleClick(l,Y,z):h.handleClick(l,Y,z)}},handle_mouseup:function(Z){this.handle_touchend(Z)},handle_touchend:function(){},handleWindowMouseMove:function($){this.handleWindowTouchMove($)},handleWindowTouchMove:function(z){var s=this,k=s.gv,D=s.editing;if(D){var K=k.lp(z),w=D.point,t=K.x-w.x,X=K.y-w.y;if(!D.moved){if(Math.abs(t)<s.threshold&&Math.abs(X)<s.threshold&&!(z.touches&&z.touches.length>1))return;D.moved=!0}if(!D.preventDefault){D.point=K;var q=D.part;if(mt[q]){var P=D.data,n=k.dm(),$=k.getWidth(),L=k.getHeight(),V=-Qd*t/$,h=-Qd*X/L;if(q===gt||q===ht||q===it){k._86O||n.beginTransaction(),k.fi({kind:k._86O?"betweenEditRotation":"beginEditRotation",event:z}),k._86O=1;var b=o(V)>o(h)?V:h;k.sm().each(function(O){Cl(O)&&k.isRotationEditable(O)&&(q===gt?O.setRotationX(O.getRotationX()+b):q===ht?O.setRotationY(O.getRotationY()+b):q===it&&O.setRotationZ(O.getRotationZ()+b))})}else{var W=P.p3(),A=k.getPositionInfo(W);t=t/$*A.width,X=-1*X/L*A.height;var F,C=Yp(k),I=[C[0]*t,C[4]*t,C[8]*t],T=[C[1]*X,C[5]*X,C[9]*X],E=I[0]+T[0],c=I[1]+T[1],f=I[2]+T[2],Z=[W[0]+E,W[1]+c,W[2]+f],J=js(k.getEye(),Z,!0);if(q===jt||q===kt||q===lt){if(k._87O||n.beginTransaction(),k.fi({kind:k._87O?"betweenEditScale":"beginEditScale",event:z}),k._87O=1,F=wg(k,W,J,Z)){var v,j=0,l=["X","Y","Tall"];q===jt?v="X":q===kt?(v="Tall",j=1):q===lt&&(v="Y",j=2),l.splice(l.indexOf(v),1);var R=Sl(z),r=(F[j]-W[j])/100;k.sm().each(function(o){if(Cl(o)&&k.isSizeEditable(o)){var d=o["getScale"+v](),U=d+r;if(o["setScale"+v](U),R){var b=U/d;l.forEach(function(z){o["setScale"+z](o["getScale"+z]()*b)})}}})}}else if(q===dt||q===et||q===ft){if(!k._moving){var M=_d(z),y=Lo(k,M,s.__lastClientPoint__),p=xh({x:0,y:0},y);if(p<Q.touchMoveThreshold)return;n.beginTransaction()}k.fi({kind:k._moving?"betweenMove":"beginMove",event:z}),k._moving=1;var j=0;if(q===dt?j=0:q===et?j=1:q===ft&&(j=2),J[j]=0,F=wg(k,W,J,Z)){var r=F[j]-W[j],u=[0,0,0];u[j]=r,k.moveSelection.apply(k,u)}}}}else if(D.touch){var g=z.touches.length;if(2!==g)s.pan(z,t,X);else{if(1>=g)return;var e=z.touches,H={x:e[0].clientX,y:e[0].clientY},N={x:e[1].clientX,y:e[1].clientY},G={x:N.x-H.x,y:N.y-H.y},i=D.lastCenter,a=Math.atan2(G.y,G.x),d=D.theta,_=0;d==O?d=D.theta=a:(_=a-d,D.thetaStarted||Math.abs(_)>s.touchRotateThreshold?(D.thetaStarted=!0,D.theta=a):_=0);var B=ei*(H.y+N.y)/2/k.getHeight(),S=D.phi,U=0;S==O?S=D.phi=B:(U=B-S,D.phiStarted||Math.abs(U)>s.touchRotateThreshold?(D.phiStarted=!0,D.phi=B):U=0);var Y,x=Math.sqrt(G.x*G.x+G.y*G.y),m=D.vlen;if(m){var Zf=H.x-i.x,Fg=H.y-i.y,Zo=N.x-i.x,ks=N.y-i.y,yb=Math.sqrt(Zf*Zf+Fg*Fg),Ln=Math.sqrt(Zo*Zo+ks*ks),Ip=m/2,If=s._sign2(yb-Ip),sf=s._sign2(Ln-Ip);0>If*sf||0===If&&0===sf?(Y=1,D.vlen=x):(Y||(Y=x/m),D.scaleStarted||Math.abs(Y-1)>s.touchScaleThreshold?(D.vlen=x,D.scaleStarted=!0):Y=1)}else m=D.vlen=x,Y=1;1!==Y&&k.setZoom(Y),(U||_)&&s.rotate(z,_,-U),D.lastCenter={x:(N.x+H.x)/2,y:(N.y+H.y)/2}}}else if(D.pan)s.pan(z,t,X);else{var $=k.getWidth(),L=k.getHeight();if(!$||!L)return;var V=-Qd*t/$,h=-Qd*X/L;s.rotate(z,V,h)}}}},_sign2:function(z){return Math.abs(z)<this._touchScaleCheckAccuracy?0:z>0?1:-1},handleWindowMouseUp:function(m){this.handleWindowTouchEnd(m)},getDataInfoAt:function(r,z){var t=this.gv,I=t.getDataInfoAt(r);if(!t.isBlockSelectable()||!I||!I.data)return I;if(!z&&t.isSelected(I.data))return I;for(var i=I.data,N=I.part;(i=i.getParent())&&i instanceof f.Block&&t.isSelectable(i);){var O=t.isSelected(i);if(O&&z)break;if(I={data:i,part:N},O&&!z)break}return I},handleWindowTouchEnd:function(z){var s=this,M=s.editing;if(s.editing=null,M){var J=s.gv;if(M.moved||!M.clickLeft&&!M.touch)J._panning=null,J._rotating=null,J.fi({kind:M.pan?"endPan":"endRotate",event:z});else{var f=s.getDataInfoAt(z),t=f&&f.data;t instanceof $c&&t.isClickThroughEnabled()&&(f=s.getDataInfoAt(z,!0),f&&(t=f.data)),t?J.sm().setSelection([t]):J.sm().clearSelection()}var O=J.dm();J._moving&&(delete J._moving,J.fi({kind:"endMove",event:z}),J.onMoveEnded(),O.endTransaction()),J._86O&&(delete J._86O,J.fi({kind:"endEditRotation",event:z}),O.endTransaction()),J._87O&&(delete J._87O,J.fi({kind:"endEditScale",event:z}),O.endTransaction())}},pan:function(h,X,x){var A=this,_=A.gv;if(_.isPannable()){var I=_.getWidth(),y=_.getHeight();if(I&&y){var v=_.getCenterInfo(),P=-X/I*v.width,R=1*x/y*v.height;_.fi({kind:_._panning?"betweenPan":"beginPan",event:h}),_._panning=1;var W=A.keepHorizon,w=A.editing.touch;if((w&&h.touches&&h.touches.length>1||!w&&Sl(h))&&(W=!W),!W)return _.pan(P,R);if(P||R){var H=Yp(_),D=[H[0]*P,H[4]*P,H[8]*P],b=[H[1],0,H[9]],o=Math.sqrt(b[0]*b[0]+b[2]*b[2]);o&&(b=[b[0]/o*R,0,b[2]/o*R]);var i=D[0]+b[0],f=D[1]+b[1],t=D[2]+b[2],F=_._center,Z=_._eye;F[0]+=i,F[1]+=f,F[2]+=t,Z[0]+=i,Z[1]+=f,Z[2]+=t,_.fp(fr,O,Z),_.fp(je,O,F)}}}},rotate:function(I,k,d){var y=this,g=y.gv;if(g.isRotatable()){var w=g._center,l=g._eye,C=js(l,w),O=Tr(N(C[0]*C[0]+C[2]*C[2]),C[1]),U=Fg(g,O+d);d=U-O,g.fi({kind:g._rotating?"betweenRotate":"beginRotate",event:I}),g._rotating=1,g.rotate(k,d)}}}),y.defineProperties(Vs.prototype,{panButton:{get:function(){return this._panButton},set:function(v){this._panButton=v}},minPhi:{get:function(){return this._minPhi},set:function(_){this.gv.setRotateMinPhi(this._minPhi=_)}},maxPhi:{get:function(){return this._maxPhi},set:function(n){this.gv.setRotateMaxPhi(this._maxPhi=n)}},keepHorizon:{get:function(){return this._keepHorizon},set:function(t){this._keepHorizon=t}},threshold:{get:function(){return this._threshold},set:function(n){this._threshold=n}},touchScaleThreshold:{get:function(){return this._touchScaleThreshold},set:function(x){this._touchScaleThreshold=x}},touchRotateThreshold:{get:function(){return this._touchRotateThreshold},set:function(o){this._touchRotateThreshold=o}}});var Ws,Xs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEyUlEQVRYR62XW0xcVRSG/58cmIG2HmstE9N4SX2xtVqBCISoFS/RmDSpKQSvTWNixUStQSqVyBQYJUGttrQVtYkPatuQPmhivMUHqbUBZ2itl1qjTzZpImNUZhDLsUeWWXgOOd2cgcGyk3mYs/de69trr70uxP8YIlJKMi0i9wIgyf0iEiM5PFdxzGeDiBQAuB7AjQBuALCN5NcGQDmANgBfeL8UyYnZ5M8KICJ3AXgAwAlfOMl/VHAQwPtveYAKuQLA2yQ/ngliRgAR2QogA2AvSdcUZAIE50VEYR4BsIDkC7kgQgFE5GIAuwDsJnkk1+aZAPw9IqLX1gjgcZK/m7KmAXjK4wBaSf4ZplxEIgCuA3Cz3gSAfgDHSf6dY/0FAJ4D0G5ChAEcAPBwmHIRqXNd90nLsiocx/k+k8n8oK/Atu2rIpHIStd1v7QsawfJd0Ouywawh6T609Q4B8C788NhZnddt29sbGxBd3f39q6urtNhJ43H48uam5u3lJSUjFiWdV8IxE0Aqki+6M9NAXjefjnJXsOZogBGBgYGttbU1Hw427PS+cHBwbVVVVUJAItJOoa8xwD8RPIT/T4J4L3zfQAeNL1dRMZra2ur+/v7/8pHub+mvr7+wr6+vs8KCgoWGABFAN4EsEHjhA9QBeA2ks8HF6vZk8nkQL4nNwGTyeTa8vLycsuy7jcg1Mk/IpnyAZoBaOQ6FHg+ddlsdqNt201zObm5NpvN7ly0aNHrJN8LyL4FwGqSr/gAOrnej3C60HXdw/F4PJ7L4fKFSiQSl7W0tLQVFRWtCQDoNRwguZ6aWABcorE9sEDf+QjJ1fkqmmmdiHwHoCToXyKiceR0rkhY5TjOq9FoVLPdeY/x8fG+SCSySe/cFKYWCFOyPJ1Or4zFYh3nrR3A8PBwe2lp6TcAfg4DmBYwAFyRTqdXxWKx9nkE+DYUIEyBiFQ6jvNaNBq9Zz4AZruCGIBlJI8ZXpolee18AORwwgoAp/xnqMmjPuilZ8+ePZRIJNo7OztD436+YB0dHZe2trY+W1hYWGsccD/JOh/gKQBHSWpanRwicnc2m91k2/bmfJWFrRsdHd29cOHCXSTfD8i+FcA1JHcEQ/HtJDVnTw3XdfcPDQ0dra6unto8F5hUKrWurKxslWVZG4L7RGQbgA9IDgWT0VsANprJaGJi4kxDQ8OagwcPjsxFeWNj49Le3l6N91qMTA2vmNnr6fovGXkmvxPAlST3hGz4LZVKbausrMzLEnryioqKNpJLzCpJRJ4AcJLkp6rHLEieBjBA8rB5Wtd1942NjS3p6el5qa2t7VSYNdThmpqaWoqLi38xze4dUku4CpLb/f1hJZnWBY+SzJpKRGSdV5LVOI5zIpPJnNQ1tm2viEQiV7uue8SyrJeDDhew8GIAO0me4w9hABdp8ahNBkktyacNr+Qu84pSndfX81VY6e6dXJV3AoiT/CMoMFcyUogeAG+Q/DyX8+VZlqvZHwKw2VQ+zQdCTL4FwBkPZFrJPUtjoildG5PC4J2bOvJpze7QWhHAj4HWbBImpDXTQsPvH5cDeMf39lxWnBXAU6TNqcZu7fn0lyB53GhOdf6ZQHN6bF6a0xxOuJTkrwbA5LdcJ831/V8SOUYQxYGhRwAAAABJRU5ErkJggg==",Ys=32,Zs=ch.GlobeInteractor=function(W,N){Ig(Zs,this,[W]);var c,K=N.radius||6378137,n=this,X=null;Ws||(Ws=Lj(),Ws.style.border="",Ws.style.backgroundImage="url("+Xs+")");var b=new zn,U=new Ri,y=new Ri,Q=new Ri,H=new Ne,L="number"==typeof K?{x:K,y:K,z:K}:K,Y={center:new Ri(0,0,0),radius:L},S=function(E){W._81O=null;var Z=W.getHitPosition(E,W.getCenter(),U.copy(W.getEye()).sub(y.copy(W.getCenter())).toArray());return H.origin.copy(W.getEye()),H.direction.copy(Z).sub(H.origin).normalize(),H.intersectEllipsoid(Y)},$=function(F,q){W._81O=null,H.origin.copy(W.getEye());for(var p,b,O=W.getCenter(),o=U.copy(W.getEye()).sub(y.copy(W.getCenter())).toArray(),w=1,T=16,d=0,S=1,L={x:0,y:0};T--;){if(L.x=q.x+(F.x-q.x)*w,L.y=q.y+(F.y-q.y)*w,p=W.getHitPosition(L,O,o),H.direction.copy(p).sub(H.origin).normalize(),b=H.intersectEllipsoid(Y),b&&1===w)return{hit:b};b?d=w:S=w,w=(d+S)/2}return{hit:b,out:1>w}},u=function(O,C){if(X){var h=Date.now();X.deltaTime=X.lastTime?h-X.lastTime:1e3,X.lastTime=h,X.lastAxis=O,X.lastAngle=C}C&&(b.setFromAxisAngle(O,C),W.setEye(U.copy(W.getEye()).applyQuaternion(b).toArray()),W.setCenter(U.copy(W.getCenter()).applyQuaternion(b).toArray()),W.setUp(U.copy(W.getUp()).applyQuaternion(b).toArray()))};n._showCrossIcon=function(u){Vi(n.getView(),Ws),oc(Ws,{x:u.clientX-Ys/2,y:u.clientY-Ys/2,width:Ys,height:Ys})},n._hideCrossIcon=function(){jf(Ws)},n._scrollImpl=function(y,o){X={point:W.lp(y),screen:_d(y),hit:S(y),type:"right"},X.hitNormalize=X.hit?X.hit.clone().normalize():new Ri;var s={clientX:X.screen.x,clientY:X.screen.y+10*o};n._handleMoveImpl(s),n._endMoveImpl(s)},n._startMoveImpl=function(p){c&&(c.stop(!0),c=null),X={point:W.lp(p),screen:_d(p),hit:S(p)},X.hitNormalize=X.hit?X.hit.clone().normalize():new Ri,Nd(p)?1===p.touches.length?X.hit&&(X.type="left"):2===p.touches.length&&(X.type="touch2"):(Hb(p)?X.hit&&(X.type="left"):Xd(p)?X.type="right":Wr(p)&&X.hit&&(X.type="middle"),!X.hit||"right"!==X.type&&"middle"!==X.type||n._showCrossIcon(p)),X.type&&ug(n,p)},n._handleMoveImpl=function(R){if(X)switch(X.type){case"left":return n._handleLeft(R);case"right":return n._handleRight(R);case"middle":return n._handleMiddle(R);case"touch2":return n._handleTouch2(R)}},n._endMoveImpl=function(){if(X){if(this._hideCrossIcon(),"left"===X.type||"middle"===X.type){var p=1e3*(X.lastAngle/(X.deltaTime||30)),F=X.lastAxis,x=X.lastTime,v=function(){var P=Date.now(),B=(P-x)/1e3;return x=P,p*=Math.pow(Math.abs(n.decelerationRate),3*B),Math.abs(p)<.01?(p=0,c&&c.stop(),void 0):(u(F,p*B),void 0)};c=nd({action:function(){v(arguments)},duration:5e3})}X=null}},n._handleLeft=function(g){if(!X.finished){var y=_d(g),r=$(y,X.lastScreen||X.screen);if(X.lastScreen=y,!r.hit)return X.finished=!0,n._endMoveImpl(g),void 0;var l=r.hit;l.normalize();var M=X.hitNormalize,x=Math.acos(l.dot(M)),E=l.cross(M).normalize();u(E,x),r.out&&(X.finished=!0,n._endMoveImpl(g))}},n._handleRight=function(Z){var d=X.lastScreen||X.screen,h=d.y;d=X.lastScreen=_d(Z);var T=d.y,P=T-h;if(P){var x=Math.min(.5,P*n.scaleSpeed);U.copy(W.getEye());var r=X.hit;r||(r=U.clone().divide(L).normalize().multiply(L)),y.copy(U).lerp(r,x),W.setEye(y.toArray()),U.copy(W.getUp()),y.normalize();var j=U.clone().cross(y).normalize();if(Q.copy(W.getCenter()),Q.sub(j.multiplyScalar(Q.dot(j))),W.setCenter(Q.toArray()),X.hit){var z=S(X.screen),s=X.hitNormalize;if(z){z.normalize();var o=Math.acos(z.dot(s)),I=z.cross(s).normalize();o&&u(I,o)}}}};var x=function(c){return Math.abs(c)<.01?0:c>0?1:-1};n._handleTouch2=function(k){var S=k.touches.length;if(2===S){var G=k.touches,f={x:G[0].clientX,y:G[0].clientY},P={x:G[1].clientX,y:G[1].clientY},n={x:P.x-f.x,y:P.y-f.y},T=X.lastCenter,M=Math.atan2(n.y,n.x),F=X.theta,Y=0;F==O?F=X.theta=M:(Y=M-F,X.thetaStarted||Math.abs(Y)>.03?(X.thetaStarted=!0,X.theta=M):Y=0);var h,g=Math.sqrt(n.x*n.x+n.y*n.y),a=X.vlen;if(a){var j=f.x-T.x,R=f.y-T.y,_=P.x-T.x,o=P.y-T.y,t=Math.sqrt(j*j+R*R),L=Math.sqrt(_*_+o*o),D=a/2,U=x(t-D),l=x(L-D);0>U*l||0===U&&0===l?(h=1,X.vlen=g):(h||(h=g/a),X.scaleStarted||Math.abs(h-1)>.05?(X.vlen=g,X.scaleStarted=!0):h=1)}else a=X.vlen=g,h=1;var n=y.copy(W.getEye()).clone();1!==h&&W.setEye(n.setLength((n.length()-K)/h+K).toArray()),Y&&u(n.normalize(),Y),X.lastCenter={x:(P.x+f.x)/2,y:(P.y+f.y)/2}}},n._handleMiddle=function(B){var S=_d(B),o=X.screen;X.screen=S;var s=(S.y-o.y)/180*Math.PI*n.rollSpeed;y.copy(W.getCenter()).sub(U.copy(W.getEye())).normalize(),U.copy(W.getUp()).cross(y).normalize(),y.copy(W.getEye()).sub(X.hit).applyAxisAngle(U,s).add(X.hit);var D=y.clone();y.copy(W.getCenter()).sub(X.hit).applyAxisAngle(U,s).add(X.hit);var x=y.clone(),g=y.copy(W.getUp()).applyAxisAngle(U,s).clone(),O=!1;s>0&&(Q.copy(g),y.copy(x).sub(D).normalize(),U.copy(D).multiplyScalar(-1).normalize(),U.dot(Q)-y.dot(Q)>0&&(O=!0)),O||Q.copy(X.hit).sub(D).dot(X.hitNormalize)>=0&&(O=!0),O||(W.setEye(D.toArray()),W.setCenter(x.toArray()),W.setUp(g.toArray()));var k=-(S.x-o.x)/180*Math.PI*n.rotateSpeed;u(X.hitNormalize,k)}};cf("GlobeInteractor",Ts,{handle_contextmenu:function(Y){tn(Y)},handle_mousewheel:function(C){this._scrollImpl(C,C.wheelDelta/40)},handle_DOMMouseScroll:function(X){2===X.axis&&this._scrollImpl(X,-X.detail)},handle_keydown:function(K){this.gv.handleKeyDown(K)},handle_mousedown:function(b){this.handle_touchstart(b)},handle_touchstart:function(D){tn(D);var X=this.gv;if(X.setFocus(D)){var Y=X.getDataInfoAt(D),G=Y?Y.data:O;G&&X.isInteractive(G)||this._startMoveImpl(D);var g=Y?Y.part:O;Tn(D)?X.handleDoubleClick(D,G,g):X.handleClick(D,G,g)}},handle_mouseup:function(n){this.handle_touchend(n)},handle_touchend:function(){},handleWindowMouseMove:function(n){this.handleWindowTouchMove(n)},handleWindowTouchMove:function(N){this._handleMoveImpl(N)},handleWindowMouseUp:function(U){this.handleWindowTouchEnd(U)},handleWindowTouchEnd:function(l){this._endMoveImpl(l)}}),y.defineProperties(Zs.prototype,{rotateSpeed:{get:function(){return this._rotateSpeed||.3},set:function(p){this._rotateSpeed=p}},rollSpeed:{get:function(){return this._rollSpeed||.1},set:function(j){this._rollSpeed=j}},scaleSpeed:{get:function(){return this._scaleSpeed||.002},set:function(e){this._scaleSpeed=e}},decelerationRate:{get:function(){return this._decelerationRate||.04},set:function(I){this._decelerationRate=I}}});var $s=function(B){var O=2147483648|B;return[(255&O>>16)/255,(255&O>>8)/255,(255&O)/255,(255&O>>24)/255]},_s=function(m){this.gv=m,this.gv.pickColorMap={_pickIdUsed:2e3}};vn(_s,y,{_iv:!0,iv:function(){this._iv=!0},get:function(r,Y,d){this.validate();var Q=this,k=Q.gv.getGL();if(!k)return O;var t,z,n=Q._resolution,s=Math.round(r.x*n),p=Math.ceil(r.width*n),X=Math.ceil(r.height*n),$=Q.height-Math.round(r.y*n)-X,U=B(p/2),G=new Uint8Array(4*p*X),u=0,w=G.length,e=Y?O:new td,J=Y?O:{};if(Qc(k,Q.frame),k.readPixels(s,$,p,X,6408,5121,G),bk(k),Y){for(;U>=u;u++)for(var v=U-u,l=U+u,R=v;l>=R;R++)for(var i=v;l>=i;i++)if((R===v||R===l||i===v||i===l)&&(t=Q.info(G,4*(R*p+i)))){if(d&&d(t)===!1)continue;return t}}else for(;w>u;u+=4)if(t=Q.info(G,u)){if(d&&d(t)===!1)continue;z=t.data,J[z._id]||(e.add(z),J[z._id]=z)}return e},info:function(n,R){return this.gv.pickColorMap[(n[R]<<16)+(n[R+1]<<8)+n[R+2]+((127&n[R+3])<<24)]},getResolution:function(){return this._resolution},onContextLost:function(){this.texture=null,this.width=this.height=-1},validate:function(){var R=this,s=R.gv,k=s.getGL();if(k){var y=R._resolution=s._pickerResolution*s.getDevicePixelRatio(),F=Math.round(y*s.getWidth()),M=Math.round(y*s.getHeight()),J=6408,L=3553,a=36161,C=36160;if(R.texture||(R.texture=Gi(s,k),R.render=k.createRenderbuffer(),R.frame=k.createFramebuffer()),(R.width!==F||R.height!==M)&&(k.activeTexture(33984),Lf(k,R.texture),k.texImage2D(L,0,J,F,M,0,J,5121,O),dd(k,10241,9729),k.bindRenderbuffer(a,R.render),k.renderbufferStorage(a,33189,F,M),Qc(k,R.frame),k.framebufferTexture2D(C,36064,L,R.texture,0),k.framebufferRenderbuffer(C,36096,a,R.render),Lf(k,O),k.bindRenderbuffer(a,O),bk(k),R.width=F,R.height=M),R._iv){R._iv=!1;var G=!1;s._40Q.each(function(w){!G&&w.isBatchInvalid()&&(G=!0)}),G&&s.updateScene(),Qc(k,R.frame),k.clear(16384),s.overlappingBox.clear(),s.setViewport(k,0,0,F,M),s.renderPickScene(),bk(k)}}}});var at=function(d){this.gv=d};vn(at,y,{gap:0,size:0,_42:function(Y){var V=this,x=V.gv,s=x._gridGap,v=x._gridSize;if(x._gridVisible){if(V.gap!==s||V.size!==v){for(var K=[],m=x._gridSize/2,r=s*m,T=0;2*m+1>T;T++){var Z=6*T,W=6*(2*m+1)+Z;K[Z]=-r,K[Z+1]=0,K[Z+2]=-r+T*s,K[Z+3]=r,K[Z+4]=0,K[Z+5]=-r+T*s,K[W]=-r+T*s,K[W+1]=0,K[W+2]=-r,K[W+3]=-r+T*s,K[W+4]=0,K[W+5]=r}V.vs=new yr(K),V.gap=s,V.size=v}ns(x),Vd(Y),Pl(Y);var g=!x._fogDisabled;if(g){var D=Ar.for(Y).directUniforms();D.uFog=!1}bm(Y,1,x._gridColor,x._buffer.vs,V.vs),ir(Y,0,V.vs.length/3,1),g&&(D.uFog=!0),Je(Y),Ml(Y)}else V.vs=V.gap=V.size=O}});var bt=function(i){this.gv=i};vn(bt,y,{_42:function(h){var v=this.gv,S=v._buffer.vs,r=v._axisXColor,M=v._axisYColor,e=v._axisZColor,m=v._originAxisVisible,a=v._centerAxisVisible;if(m||a){var z=gr?4:6,J=1;if(ns(v),Vd(h),Pl(h),m){var q=v.getCenterInfo(),P=g(q.width,q.height)/5,Q=.8*P,x=.05*P;bm(h,1.5,r,S,new yr([0,0,0,P,0,0,Q,x,0,Q,0,x,Q,-x,0,Q,0,-x,Q,x,0,0,0,0,0,P,0,x,Q,0,0,Q,x,-x,Q,0,0,Q,-x,x,Q,0,0,0,0,0,0,P,x,0,Q,0,x,Q,-x,0,Q,0,-x,Q,x,0,Q])),ir(h,0,2,J),ir(h,1,6,z),bm(h,O,M),ir(h,7,2,J),ir(h,8,6,z),bm(h,O,e),ir(h,14,2,J),ir(h,15,6,z)}if(a){var B=v._center,C=B[0],X=B[1],U=B[2],q=v.getPositionInfo(B);P=g(q.width,q.height)/20,bm(h,1.5,r,S,new yr([C,X,U,C+P,X,U,C,X,U,C,X+P,U,C,X,U,C,X,U+P])),ir(h,0,2,J),bm(h,O,M),ir(h,2,2,J),bm(h,O,e),ir(h,4,2,J)}Je(h),Ml(h)}}});var ct=function(x){this.gv=x},dt="edit_tx",et="edit_ty",ft="edit_tz",gt="edit_rx",ht="edit_ry",it="edit_rz",jt="edit_sx",kt="edit_sy",lt="edit_sz",mt={};mt[dt]=101,mt[et]=102,mt[ft]=103,mt[gt]=104,mt[ht]=105,mt[it]=106,mt[jt]=107,mt[kt]=108,mt[lt]=109,vn(ct,y,{_42:function(s){var a=this,m=a.gv,B=m.sm().ld();if(B&&m.isEditable(B)&&!m.isEditHelperDisabled()&&Cl(B)&&(!m.isFirstPersonMode()||!m.isMouseRoamable()&&!eb)){ns(m);var x,M=m.isMovable(B),f=m.isRotationEditable(B),D=m.isSizeEditable(B),q=m._axisXColor,p=m._axisYColor,Q=m._axisZColor,C=m._editSizeColor,t=B.p3();if(m.isOrtho()){var A=m.getCenterInfo();x=g(A.width,A.height)/8}else x=xh(m.getEye(),t)/10;var Z,G,S=x/(m.isPicking()?5:10),y=.7*x,$=.4*y,V=t[0],z=t[1],E=t[2];Z=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],M&&a._17O(s,B,dt,q,Z,[V,z-S,E,V+y,z-S,E,V+y,z,E,V+y,z,E,V,z,E,V,z-S,E,V,z-S,E+S,V+y,z-S,E+S,V+y,z-S,E,V+y,z-S,E,V,z-S,E,V,z-S,E+S]),G=V+y,D&&a._17O(s,B,jt,C,Z,[G,z-S,E,G+$,z-S,E,G+$,z,E,G+$,z,E,G,z,E,G,z-S,E,G,z-S,E+S,G+$,z-S,E+S,G+$,z-S,E,G+$,z-S,E,G,z-S,E,G,z-S,E+S]),G+=$,f&&a._17O(s,B,gt,q,Z,[G,z-S,E,G+$,z-S,E,G+$,z,E,G+$,z,E,G,z,E,G,z-S,E,G,z-S,E+S,G+$,z-S,E+S,G+$,z-S,E,G+$,z-S,E,G,z-S,E,G,z-S,E+S]),Z=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],M&&a._17O(s,B,et,p,Z,[V,z,E,V,z+y,E,V-S,z+y,E,V-S,z+y,E,V-S,z,E,V,z,E,V,z,E,V,z,E-S,V,z+y,E-S,V,z+y,E-S,V,z+y,E,V,z,E]),G=z+y,D&&a._17O(s,B,kt,C,Z,[V,G,E,V,G+$,E,V-S,G+$,E,V-S,G+$,E,V-S,G,E,V,G,E,V,G,E,V,G,E-S,V,G+$,E-S,V,G+$,E-S,V,G+$,E,V,G,E]),G+=$,f&&a._17O(s,B,ht,p,Z,[V,G,E,V,G+$,E,V-S,G+$,E,V-S,G+$,E,V-S,G,E,V,G,E,V,G,E,V,G,E-S,V,G+$,E-S,V,G+$,E-S,V,G+$,E,V,G,E]),Z=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],M&&a._17O(s,B,ft,Q,Z,[V,z,E,V,z,E+y,V,z-S,E+y,V,z-S,E+y,V,z-S,E,V,z,E,V,z-S,E,V-S,z-S,E,V-S,z-S,E+y,V-S,z-S,E+y,V,z-S,E+y,V,z-S,E]),G=E+y,D&&a._17O(s,B,lt,C,Z,[V,z,G,V,z,G+$,V,z-S,G+$,V,z-S,G+$,V,z-S,G,V,z,G,V,z-S,G,V-S,z-S,G,V-S,z-S,G+$,V-S,z-S,G+$,V,z-S,G+$,V,z-S,G]),G+=$,f&&a._17O(s,B,it,Q,Z,[V,z,G,V,z,G+$,V,z-S,G+$,V,z-S,G+$,V,z-S,G,V,z,G,V,z-S,G,V-S,z-S,G,V-S,z-S,G+$,V-S,z-S,G+$,V,z-S,G+$,V,z-S,G])}},_17O:function(Z,e,J,h,P,l){var q=this.gv,p=q._buffer,w=Ar.for(Z),N=w.directUniforms(),b=w.directAttribs();if(q._picking){var m=q.pickColorMap,S=mt[J];m[S]={data:e,part:J},N.uFixPickReverseColor=$s(S)}yh(Z,O,!0,O,!0,O,!1),N.uDiffuse=h,b.aPosition=gs(Z,p.vs,new yr(l),O),b.aNormal=gs(Z,p.ns,new yr(P),O),Pl(Z),ir(Z,0,12),Je(Z),Ue(Z)}});var nt=f.Raycaster=function(X){this.gv=X,this.maxTriangleTest=1/0,this.backfaceCulling=!0};Yf("Raycaster",y,{intersect:function(M){var V=this,A=V.gv,t=A.getDataAt(M);return t?V.intersectObject(M,t):null},intersectObjects:function(U,N,n){var K,P,b,e,T=this,C=1/0,w=U.origin||(new Ri).fromArray(T.gv.getEye()),j=T.maxTriangleTest,I=[];N.forEach(function(d){n&&n(d)===!1||d.s("intersect")!==!1&&I.push(d)});var S=w.distanceToSquared2([0,0,0]);return I.sort(function(l,F){return(l.p3?w.distanceToSquared2(l.p3()):S)-(F.p3?w.distanceToSquared2(F.p3()):S)}),T.countTriangles=0,I.forEach(function(c){T.countTriangles>j||(K=T.intersectObject(U,c),K&&(P=w.distanceToSquared(K.world),C>P&&(b=c,e=K,C=P)))}),T.countTriangles=0,{data:b,intersect:e}},intersectObjectAndRecordTriangle:function(F,g){this._4GQ=!0;var O=this.intersectObject(F,g);return this._4GQ=!1,O},intersectLastTriangle:function(b,c){var n=this.getRay(b);n.applyMatrix4(c.inverseMatrix);var M=n.intersectPlane(c.plane);if(!M)return null;var Q=Kc.uvIntersection(M,c.p1,c.p2,c.p3,c.uv1.clone(),c.uv2.clone(),c.uv3.clone());return{world:M.clone().applyMatrix4(c.matrixWorld),local:M.clone(),uv:Q}},getRay:function(L){if(L instanceof Ne)return L;var A=this,M=A.gv,K=M.unproject(L),c=new Ri,e=M.getEye(),t=new Ri;if(M.isOrtho()){var S=new Ri(e);t.copy(M.getCenter()).sub(S).normalize();var R=c.copy(K).sub(S).dot(t);c.copy(t).setLength(-R).add(S.copy(K))}else c.copy(e),t.copy(K).sub(c).normalize();return new f.Math.Ray(c,t)},intersectObject:function(n,R){return this._intersectObjectImpl(this.getRay(n),R)},_intersectObjectImpl:function(){function H(){var I=new Ri;return I.subVectors(l,n),Z.subVectors(N,n),I.cross(Z).normalize(),I}var d=new pd,o=new pd,u=new Ne,B=new Ri,x=new Ri,t=new Ri,r=new Ri,a=new Ri,N=new Ri,n=new Ri,l=new Ri,T=new gd,I=new gd,R=new gd,Z=new Ri,C={vs:Qj,is:vo,uv:id},L=tj.slice(0);return L.push("csg"),function(w,j){var p=this.gv.getData3dUI(j),q=j.mat||p.mat;q?d.fromArray(q):d.identity(),o.getInverse(d),u.copy(w).applyMatrix4(o);var D,Y,Q,g="body",S=p.shapeModel;if(!S&&(j instanceof f.Polyline||j instanceof f.Edge)&&p.lineShapeModel&&(S=p.lineShapeModel),S||(S=Xb(p)),S||(f.CSGNode&&j instanceof f.CSGNode||f.CSGShape&&j instanceof f.CSGShape?(Q=!0,S=[p.left,p.front,p.right,p.back,p.top,p.bottom,p.csg]):j instanceof f.Node&&!(j instanceof f.Shape)?(D=!0,S=C):(Y=!0,S=[p.left,p.front,p.right,p.back,p.top,p.bottom])),!S)return console.log("Can not find shape model."),null;
Se(S)||(S=[S]);var U,m,V,M,e,_,$,s,E,v,h,c,W,O,y,Z,b=1/0,i=["","top_","bottom_"],A=!1,K=this.backfaceCulling,P=[];for(Gl(S,p,P),U=0,m=P.length;m>U;U++)if(W=P[U])for(V=0,M=i.length;M>V;V++)if(O=i[V],$=W[O+"vs"],s=W[O+"is"],E=W[O+"uv"]||W[O+"tuv"],$){if(y=W[O+"boundingBox"]){var h=u.intersectBox(y);if(!h)continue;if(u.origin.distanceTo(h)>b)continue;Z=!1}else W[O+"boundingBox"]=y=new f.Math.Box3,Z=!0;for(e=0,_=s?s.length:$.length/3;_>e;e+=3)this.countTriangles++,s?(x.fromArray($,3*s[e]),t.fromArray($,3*s[e+1]),r.fromArray($,3*s[e+2])):(x.fromArray($,3*e),t.fromArray($,3*(e+1)),r.fromArray($,3*(e+2))),Z&&(y.expandByPoint(x),y.expandByPoint(t),y.expandByPoint(r)),v=u.intersectTriangle(x,t,r,K,B),v&&(c=u.origin.distanceTo(v),b>c&&(b=c,a.copy(v),N.copy(x),n.copy(t),l.copy(r),""!==O?g=O.slice(0,-1):D?g=tj[Math.floor(e/6)]:Y?g=tj[U]:Q&&(g=L[U]),E&&(A=!0,s?(T.fromArray(E,2*s[e]),I.fromArray(E,2*s[e+1]),R.fromArray(E,2*s[e+2])):(T.fromArray(E,2*e),I.fromArray(E,2*(e+1)),R.fromArray(E,2*(e+2))))))}if(!isFinite(b))return null;var F,G,X=a.clone().applyMatrix4(d),J=this._4GQ;A&&(J&&(G={inverseMatrix:o.clone(),matrixWorld:d.clone(),p1:N.clone(),p2:n.clone(),p3:l.clone(),uv1:T.clone(),uv2:I.clone(),uv3:R.clone(),plane:(new f.Math.Plane).setFromCoplanarPoints(N,n,l)}),F=Kc.uvIntersection(a,N,n,l,T,I,R));var k=H(N,n,l),z=H(N.applyMatrix4(d),n.applyMatrix4(d),l.applyMatrix4(d)),xh=u.direction.dot(k);xh>0&&(k.multiplyScalar(-1),z.multiplyScalar(-1));var bd={world:X,local:a.clone(),worldNormal:z,normal:k,uv:F,part:g};return G&&(bd.triangleInfo=G),bd}}()});var ot=function(N,F){this.gv=N,this.s=function(t,n,X){return n==O&&(n=X),n==O?F.getStyle(t):rq(n,F,N)},this.data=F};vn(ot,y,{I3d:!0,ms_icons:1,_iv:!0,_cacheBoundingBox:n,iv:function(){this._iv=!0},update:function(B,L,s){var q=this,U=q.data;if(B||(B=q.gv,L=B.getGL(),s=B._40Q),!q.needValidate(L)||!B.isVisible(U))return s.push(this,!1),void 0;var V,p,E,Q,k,y=U._id,o=U._47Q?null:q.s("batch"),z=U.getRenderLayer(),w=s.get(z,!0),v=w.batchIndexMap,n=w.batchModelMap,C=B.getBrightness(U),X=C!=O&&1!==C;V=io(v,n,U,o,B);var Y=o?B.getBatchInfo(o)||ui:O,Z=q.validate(V,Y);if(V&&(!Y.ms||!Y.ms.length)&&(p=v[y],E=p.size=V.vs.length/3-p.begin,k=V.rs))for(C=X?C:1,Q=0;E>Q;Q++)k.push(C);var D=B.getWireframeGeometry(U);if(D)Hg(B,U,D);else if(Cl(U)){var d=B.getWireframe(U);d&&Hg(B,U,d)}q.labelInfo=q.label2Info=q.noteInfo=q.note2Info=q._38o=O,q._24O(Ip,"getLabel"),q._24O(_n,"getLabel2"),q._26O(Ep,"getNote"),q._26O(Gk,"getNote2"),q._15O(),q.interactiveInfo=B.isInteractive(U)?{}:O,w.push(this,!0),Z!==!1&&(q._iv=!1)},clearWireframeGeometryCache:function(){var f=this;ym(f),f.data.iv()},_46Q:function(P,I){var m=this,N=m.data,U=m.gv;if(U.isVisible(N)){var D=N._id,o=U._40Q.get(N._renderLayer,!0),w=o.batchIndexMap[D],e=o.polylineIndexMap[D],Q=o.wireframeIndexMap[D];(w||e||Q)&&(I==O&&(I=wo(P,U.pickColorMap,U.isSelectable(N),m,nf,!0)),I&&(Fd(I,w,o.batchModelMap,U),Fd(I,e,o.polylineModelMap,U),Fd(I,Q,o.wireframeModelMap,U)))}},_42:function(L,o,T){var l=this,t=l.data,D=l.gv;if(D.isVisible(t)){var m,z=D._picking;if(z)m=D.pickColorMap;else{if(D.isTransparentMask(t)||D.isReflecting(L)&&t.s("3d.reflectable")===!1)return;m=n}if(ot.getTitle===n){ot.getTitle=0;for(var k in Q)if(k.length===_n.length+1&&k[_n.length]===Rh[4].toUpperCase()&&k[_n.length-1]===Rh[_n.length+1].toUpperCase()){ot.getTitle=ah;break}}if(!ot.getTitle||Nc[_n.length+2]){if(ot.getHead===n){ot.getHead=0;for(var k in zp){var C="box-sizing";6===k.length&&k[0]===Rh[4]&&k[3]===C[0]&&k[4]===C[1]&&k[5]===C[2]&&(ot.getHead=Hp)}}if(!ot.getHead||Nc[_n.length]){if(ot.getTitle2===n){ot.getTitle2=0;for(var k in zp){var K="uv";6===k.length&&k[0]===Qk[1].toUpperCase()&&k[1]===K[0]&&(ot.getTitle2=dr)}}if(!ot.getTitle2||Nc[Eq.length]){var i,F,G=t._id,Z=D._40Q.get(t._renderLayer,!0),E=Z.batchIndexMap,e=Z.batchModelMap,_=D.isSelectable(t),P=!1,p=!0,d=E[G];if(z&&(F=wo(L,m,_,l,nf,d),F&&!D._45Q&&(Fd(F,d,e,D),Fd(F,Z.polylineIndexMap[G],Z.polylineModelMap,D),Fd(F,Z.wireframeIndexMap[G],Z.wireframeModelMap,D))),d||(P||(P=!0,p=Io(L,D,t)),p&&l._80o(L,o,T)),D.isLabelVisible(t)&&((i=l.labelInfo)&&(z&&wo(L,m,_,l,Ip),P||(P=!0,Io(L,D,t)),l._28O(i,Ip,T)),(i=l.label2Info)&&(z&&wo(L,m,_,l,_n),P||(P=!0,Io(L,D,t)),l._28O(i,_n,T))),D.isNoteVisible(t)&&((i=l.noteInfo)&&(z&&wo(L,m,_,l,Ep),P||(P=!0,Io(L,D,t)),l._29O(i,Ep,T)),(i=l.note2Info)&&(z&&wo(L,m,_,l,Gk),P||(P=!0,Io(L,D,t)),l._29O(i,Gk,T))),(i=l._38o)&&(P||(P=!0,Io(L,D,t)),l._99O(L,i,m,_,T)),P){var R=Ar.for(L).directUniforms();R.uBrightness=1,R.uClipDirection=0,t._flipSide&&(Ar.for(L).directState().cullFace.frontFace=2305),L._blooming&&(R.blackout=!1)}}}}}},_formatClipUniforms:function(p,d,R){switch(p){case"uv.right":p=7;break;case"uv.left":p=8;break;case"left":p=2;break;case"top":p=3;break;case"bottom":p=4;break;case"front":p=5;break;case"back":p=6;break;case"right":default:p=1}if(0===p%2&&(d=1-d),7===p||8===p){var v=this.shapeModel;v&&v.internalUvScale&&(d*=v.internalUvScale)}else if(R instanceof f.Shape){var m=R.s3(),F=R.p3(),V=R.getAnchor3d();d=3>p?(d-V.x)*m[0]+F[0]:5>p?(d-V.y)*m[1]+F[1]:(d-V.z)*m[2]+F[2]}else{d-=.5;var y=R._clipPercentageTranform;y&&(d=(d+y[0])*y[1])}return[p,d]},prepare:function(){var m=this,f=m.data;if(!(f instanceof $c)){var L,l,K,e,u,b=m.gv,$=b.getGL(),h=f._id,P=m.s("batch"),R=b._batchIndexMap,I=b._batchModelMap,i=b.getBrightness(f),d=i!=O&&1!==i;if(m.needValidate($)){L=io(R,I,f,P,b);var j=P?b.getBatchInfo(P)||ui:O;if(m.validate(L,j),L&&(!j.ms||!j.ms.length)&&(l=R[h],K=l.size=L.vs.length/3-l.begin,u=L.rs))for(i=d?i:1,e=0;K>e;e++)u.push(i);if(Cl(f)){var J=b.getWireframeGeometry(f);if(J)Hg(b,f,J);else{var Q=b.getWireframe(f);Q&&Hg(b,f,Q)}}m.labelInfo=m.label2Info=m.noteInfo=m.note2Info=m._38o=O,m._24O(Ip,"getLabel"),m._24O(_n,"getLabel2"),m._26O(Ep,"getNote"),m._26O(Gk,"getNote2"),m._15O(),m.interactiveInfo=b.isInteractive(f)?{}:O,m._iv=!1}}},dispatchBoundingBoxChanged:function(){this._cacheBoundingBox=n},getBoundingBox:function(){var C,A,w,T,N,d;return function(S){if(this._cacheBoundingBox)return this._cacheBoundingBox;C||(C={vs:Qj,is:vo,uv:id},A=new Ri,w=new Ri,T=new Ri,N=new Ri,d=new Ri);var X=this,h=X.data,U=X.shapeModel;if(!U&&(h instanceof f.Polyline||h instanceof f.Edge)&&X.lineShapeModel&&(U=X.lineShapeModel),U||(U=Xb(X)),U||(f.CSGNode&&h instanceof f.CSGNode||f.CSGShape&&h instanceof f.CSGShape?(isCSG=!0,U=[X.left,X.front,X.right,X.back,X.top,X.bottom,X.csg]):h instanceof f.Node&&!(h instanceof f.Shape)?U=C:(X.left||X.front||X.right||X.back||X.top||X.bottom)&&(U=[X.left,X.front,X.right,X.back,X.top,X.bottom])),!U)return n;Se(U)||(U=[U]);var i,G,o,p,t,r,D,P,I,H,b,x,j=["","top_","bottom_"],k=new f.Math.Box3,F=!1;if(X._needRecoverPosition){N.set.apply(N,h.p3());var m=h.s3();d.set(1/(m[0]||1),1/(m[1]||1),1/(m[2]||1))}else N.set(0,0,0),d.set(1,1,1);var c=[];for(Gl(U,X,c),i=0,G=c.length;G>i;i++)if(I=c[i])for(o=0,p=j.length;p>o;o++)if(H=j[o],D=I[H+"vs"],P=I[H+"is"],D){if(x=H+"boundingBox",b=I[x],!b)for(I[x]=b=new f.Math.Box3,t=0,r=P?P.length:D.length/3;r>t;t+=3)P?(A.fromArray(D,3*P[t]).sub(N).multiply(d),w.fromArray(D,3*P[t+1]).sub(N).multiply(d),T.fromArray(D,3*P[t+2]).sub(N).multiply(d)):(A.fromArray(D,3*t).sub(N).multiply(d),w.fromArray(D,3*(t+1)).sub(N).multiply(d),T.fromArray(D,3*(t+2)).sub(N).multiply(d)),!A.isNaN()&&b.expandByPoint(A),!w.isNaN()&&b.expandByPoint(w),!T.isNaN()&&b.expandByPoint(T);k.expandByBox(b),F=!0}return F?(this._cacheBoundingBox=k,y.freeze(k),y.freeze(k.min),y.freeze(k.max),S||go(X.gv,h),k):n}}(),needValidate:function(){return this._iv},validate:function(){},_16O:function(){return kh},_80o:function(){},dispose:function(){var M=this,B=M._pickId;if(B){var i=M.gv.pickColorMap;i[B]&&delete i[B]}},getBodyColor:function(X){var t=this.data,d=this.gv.getBodyColor(t);return d?d:X?t.getStyle(X):O},contextLost:function(){this._cachedTextures&&this.gv.invalidateCachedTexture(this.data)},getCachedTexture:function(o){var y=this._cachedTextures;return y?y[o||"main"]:null},setCachedTexture:function(L,Y){var d=this._cachedTextures;return d||(d=this._cachedTextures={}),d[Y||"main"]=L,L},invalidateCachedTexture:function(W){var v=this._cachedTextures;if(v){for(var Z in v)W.deleteTexture(v[Z]);this._cachedTextures={}}},invalidateCachedGeometry:function(){},_24O:function(Q,c){var C=this,D=C.data,N=C.gv,b=C.s,P=N[c](D);if(P!=O){var r=b(Q+".scale"),p=b(Q+".max"),B=C[Q+"Info"]={label:P,textureScale:b(Q+".texture.scale"),color:N[c+"Color"](D),font:b(Q+".font"),align:b(Q+".align"),background:N[c+"Background"](D)},I=B.rect=Ib(B,P);p>0&&p<I.width&&(B.labelWidth=I.width,I.width=p),I.x=I.y=0,I.width*=r,I.height*=r,B.mat=C._16O(b(Q+".autorotate"),b(Q+".position"),I,b(Q+".face"),b(Q+".t3"),b(Q+".r3"),b(Q+".rotationMode"));var K=I.width/2,e=I.height/2;B.vs=new yr([-K,e,0,-K,-e,0,K,-e,0,K,e,0]),I.width/=r,I.height/=r}},_26O:function(U,J){var r=this,F=r.data,s=r.gv,D=r.s,j=s[J](F);if(j!=O){var y=D(U+".scale"),a=this[U+"Info"]={note:j,textureScale:D(U+".texture.scale"),expanded:D(U+".expanded"),font:D(U+".font"),color:D(U+".color"),align:D(U+".align"),borderWidth:D(U+".border.width"),borderColor:D(U+".border.color"),background:s[J+"Background"](F)};if(a.expanded){var M=D(U+".max"),X=Ib(a,j);X.width+=6,X.height+=2,M>0&&M<X.width&&(a.labelWidth=X.width,X.width=M);var $={x:-X.width/2,y:-8-X.height,width:X.width,height:X.height+8}}else $={x:-6,y:-18,width:12,height:18};a.mat=r._16O(D(U+".autorotate"),D(U+".position"),O,D(U+".face"),D(U+".t3"),D(U+".r3"),D(U+".rotationMode")),a.rect=$,1!==y&&($=rj($),$.x*=y,$.height*=y,$.y=-$.height,$.width*=y);var C=$.x,i=$.y,d=$.width,Y=$.height;a.vs=new yr([C,-i,0,C,-i-Y,0,C+d,-i-Y,0,C+d,-i,0])}},eachShapeModel:function(I,e){function X(P){Fj(P),P.vs&&I(P.vs,P.is,P.ns,P.uv),P.top_vs&&I(P.top_vs,P.top_is,P.top_ns,P.top_uv),P.bottom_vs&&I(P.bottom_vs,P.bottom_is,P.bottom_ns,P.bottom_uv),P.from_vs&&I(P.from_vs,P.from_is,P.from_ns,P.from_uv),P.to_vs&&I(P.to_vs,P.to_is,P.to_ns,P.to_uv)}function b(Y){var J,y,B;if(Se(Y))for(y=0,B=Y.length;B>y;y++)J=Y[y],J&&b(J);else Vp(Y)?b(Xb(T,Y),T):Yo(Y)&&(Y.shape3d?b(Y.shape3d):X(Y))}var T=this,u=T.data,e=e||T.shapeModel||Xb(T);e||(e=u instanceof f.Node&&!(u instanceof f.Shape)?{vs:Qj,is:vo}:[T.left,T.front,T.right,T.back,T.top,T.bottom]),b(e)},_28O:function(j,e,f){if(f(this.s(e+".transparent"))){var T=j.rect,J=j.textureScale,u=T.width*J,i=T.height*J;if(u>=1&&i>=1){var X=rp(u,i);1!==J&&(X.translate(T.x,T.y),X.scale(J,J),X.translate(-T.x,-T.y)),vg(X,j),X.restore(),Mp(this,e,j.mat,j.vs,!0)}}},_29O:function(z,H,N){if(N(this.s(H+".transparent"))){var L=z.rect,b=z.textureScale,I=L.x,j=L.y,x=L.width*b,Y=L.height*b;if(x>=1&&Y>=1){L.x=L.y=0;var i=rp(x,Y);1!==b&&i.scale(b,b),Ai(i,z),i.restore(),L.x=I,L.y=j,Mp(this,H,z.mat,z.vs,!1)}}},_99O:function(P,M,Y,n,e,s){if(Y){var q=this,h=q.gv,z=q.data,t=h._buffer,E=h._1O,R=Y.icons,I=Ar.for(P),f=I.directAttribs();for(var C in R){var m=R[C],N=Y.rects[C];if(N&&s(rq(m.transparent,z,h))){h._picking&&wo(P,n,e,q,C);var g=rq(m.shape3d,z,h),y=g?[g]:rq(m.names,z,h),G=y?y.length:0,J=rq(m.textureScale,z,h)||1,K=rq(m.light,z,h);K==O&&(K=g?!0:!1),yh(P,rq(m.blend,z,h),K,rq(m.opacity,z,h),rq(m.reverseFlip,z,h),rq(m.reverseColor,z,h),rq(m.reverseCull,z,h));for(var X=0;G>X;X++){var k=y[X],B=N[X];if(Cn(q,B.mat),g)Ji(h,z,Xb(q,g),q);else{var o=Nn(k);if(o){var F=B.width*J,Z=B.height*J;if(F>=1&&Z>=1){var A=rp(F,Z);ks(A,o,rq(m.stretch,z,h),0,0,F,Z,z,h),A.restore(),Gi(h,P,so,E),Pl(P,E,rq(m.discardSelectable,z,h),t.uv,Td),f.aPosition=gs(P,t.vs,B.vs,O),f.aNormal=eg(P,t.ns,el,O),_j(P,t.is,Lr),nr(P,0,Lr.length),Je(P,E)}}}Si(h)}Ue(P)}}}}});var pt=function(d,s){Ig(pt,this,[d,s])};vn(pt,ot,{_16O:function(D,A,x,c,t,n,b,M,_){var I,s=this.data,m=s.getFinalScale3d();if(s.hasOwnProperty("_anchor")||s.hasOwnProperty("_anchorElevation")){var p=s.getAnchor3d();I=[-(p.x-.5)*m[0],-(p.y-.5)*m[1],-(p.z-.5)*m[2]]}if(s.s("part.boundingBox")){var J=this.getBoundingBox(!0);if(J){var o=J.max.clone().sub(J.min),Z=J.max.clone().add(J.min).divideScalar(2);I||(I=[0,0,0]),I[0]+=Z.x*m[0],I[1]+=Z.y*m[1],I[2]+=Z.z*m[2],m[0]*=o.x,m[1]*=o.y,m[2]*=o.z}}var i=xn(A,m,x,c,M,_);return I&&(i[0]+=I[0],i[1]+=I[1],i[2]+=I[2]),zq(ib(),i,s.p3(),c,t,n,b,D,s.getFinalRotation3d(),s.getRotationMode())},clear:function(){var u=this;u.faceMat=u.mat=u.shapeModel=u.left=u.right=u.front=u.back=u.top=u.bottom=u.csg=O},needValidate:function(t){if(this._iv)return this._validateFrameId=t._renderInfo.frame,!0;if(this.data._47Q){var A=t._renderInfo.frame;if(this._validateFrameId!==A)return this._validateFrameId=A,!0}return!1},invalidateUnstableWireframe:function(){var e=this.data;if(e._47Q){var I=e.getRenderLayer(),F=this.gv._40Q.get(I);F&&F.ivWireframeBatch(e)}},validate:function(x,u){var X=this,e=X.gv,q=X.data,Q=X.shapeName=X.s(Yd),h=Xb(X,Q);X._updateAutoRotation(),X._updateFixSize2d(),X._updateOverlapping(),X.dispatchBoundingBoxChanged(),X.invalidateUnstableWireframe();var E=Xi(q,e.getMat(q),h?X.s("shape3d.scaleable"):!0);if(q.appendAnchorMatrix3d(E),X.clear(),X.mat=q.mat=E,q._flipSide=pd.determinantOfArray(E)<0,h||!Q){X.shapeModel=h;var v=null;if(h&&h.model3d){var l=q.s("3d.clip.direction");if(l){var y=q.s("3d.clip.percentage");if(y){var U=h.position,J=h.scale;if(U||J){var p="left"===l||"right"===l?0:"front"===l||"back"===l?2:1;v=[U?-U[p]:0,J?1/J[p]:1]}}}}if(q._clipPercentageTranform=v,x)if(h)u.instanced?e.batchInstancedModel(q,h,X,X.getBodyColor(),[E],x):vc(e,q,h,X,X.getBodyColor(),[E],x);else{var T=Ij(E);u.instanced?e.batchInstancedFace(q,x,u,E,T):bg(e,q,x,u,E,T)}else h||(X._cubeUvs=null,X.vf(wq,0),X.vf(hb,16),X.vf(ll,8),X.vf(Yh,24),X.vf(pj,32),X.vf(ri,40))}},_updateAutoRotation:function(){var C=new Cm,H=new pd,j=new Ri,U=new Ri;return function(){var O=this,m=O.data,k=O.s("autorotate")||O.s("shape3d.autorotate");if(!k)return m._dynamicRotation&&delete m._dynamicRotation,void 0;var o=O.gv;j.copy(O.s("shape3d.autorotate.up")||o._up);var N;N="string"==typeof k?[k.indexOf("x")<0?o._eye[0]:o._center[0],k.indexOf("y")<0?o._eye[1]:o._center[1],k.indexOf("z")<0?o._eye[2]:o._center[2]]:o._eye;var _=o._center;U.set(N[0]-_[0],N[1]-_[1],N[2]-_[2]),H.lookAtDirection(U,j),C.set(0,0,0,m.getRotationMode(),!0).setFromRotationMatrix(H);var W=m._dynamicRotation;W&&Math.abs(W[0]-C.x)<1e-5&&Math.abs(W[1]-C.y)<1e-5&&Math.abs(W[2]-C.z)<1e-5||(m._dynamicRotation=[C.x,C.y,C.z])}}(),_updateFixSize2d:function(){var k=this,U=k.data,d=k.s("fixSizeOnScreen")||k.s("shape3d.fixSizeOnScreen");if(!d)return U._dynamicScale3d&&delete U._dynamicScale3d,void 0;var Q=k.gv,x=Xi(U,Q.getMat(U)),e=Qr([0,0,0],x),i=Q.toViewPosition(e);if(!isNaN(i.x)&&!isNaN(i.y)){var E=Qr([1,0,0],x),R=Q.toViewPosition(E),c=Qr([0,1,0],x),h=Q.toViewPosition(c),y=R.x-i.x,n=h.y-i.y;if(y&&n){var N,a,M=U._dynamicScale3d||[1,1,1],F=Nn(U.s("shape3d.image"));if(d[0]>0&&(N=d[0]),d[1]>0&&(a=d[1]),!N||!a){var t=d>0?d:1;N||(N=(Yj(F,U)||U.getWidth())*t),a||(a=(kp(F,U)||U.getTall())*t)}var T=Math.abs(y/N),P=Math.abs(n/a);Math.abs(T-1)<.001&&Math.abs(P-1)<.001||(U._dynamicScale3d=[M[0]/T,M[1]/P,M[2]])}}},_updateOverlapping:function(){var D=this,e=D.s("hide.overlapping.group");if(!e)return D._rectOverlapping&&(D._rectOverlapping=n),void 0;var U,c,T,y=D.gv,u=D.data,N=Xi(u,y.getMat(u)),X=1/0,$=1/0,A=-1/0,P=-1/0,v=u.getAnchor3d(),k=v.x,t=v.y,L=v.z;for(U=0;8>U;U++){if(c=Qr([(U>>2)-k,(1&U>>1)-t,(1&U)-L],N),T=y.toViewPosition(c),isNaN(T.x)||isNaN(T.y))return;X=Math.min(X,T.x),A=Math.max(A,T.x),$=Math.min($,T.y),P=Math.max(P,T.y)}var a={x:X,y:$,w:A-X,h:P-$};D._rectOverlapping=y.overlappingBox.isOverlapping(e,a)},getVectorDynamicSize:function(){var d,w=this,t=w.s("shape3d"),J=w.data;if("billboard"===t||"plane"===t||(d=J._currentCubeElementId)!=O){var i,l,K=w.gv,S=Xi(J,K.getMat(J)),f=J.getAnchor3d(),o=.5-f.x,P=.5-f.y,m=.5-f.z,I=Math.min(w.s("vector.dynamic.maxsize"),K._glCapabilities.maxTextureSize)/K.getDevicePixelRatio(),B=function(c,h){c[0]+=o,c[1]+=P,c[2]+=m,h[0]+=o,h[1]+=P,h[2]+=m;var C=K.toViewPosition(Qr(c,S)),Q=K.toViewPosition(Qr(h,S)),j=C.x-Q.x,F=C.y-Q.y;return Math.min(I,Math.sqrt(j*j+F*F))};if("billboard"===t)i=B([-.5,0,0],[.5,0,0]),l=B([0,-.5,0],[0,.5,0]);else if("plane"===t)i=B([-.5,0,0],[.5,0,0]),l=B([0,0,-.5],[0,0,.5]);else if(J._currentCubeElementId!=O){var e=3*vo[d+1],U=3*vo[d],s=3*vo[d+2];i=B([Qj[e],Qj[e+1],Qj[e+2]],[Qj[s],Qj[s+1],Qj[s+2]]),l=B([Qj[e],Qj[e+1],Qj[e+2]],[Qj[U],Qj[U+1],Qj[U+2]])}return[i,l]}},vf:function(d,q){var p=this;if(p.gv.getFaceVisible(p.data,d)){var v=hp(p,d);v.mat&&(p.faceMat=!0);var j=v.uv;if(j){var g=p._cubeUvs;g||(g=p._cubeUvs=new yr([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]));for(var C=0;8>C;C++)g[q+C]=j[C]}return v}},_billboardInView:function(){var r=[-.5,-.5,0,-.5,.5,0,.5,-.5,0,.5,.5,0],y=[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,.5],t=new wj,G=new Ri,j=new pd;return function(T){var N=this;if(!N.mat)return!0;var Z=N.gv.getFrustum(),U="billboard"===T?r:y;t.makeEmpty(),j.fromArray(N.mat);for(var a=0,A=U.length;A>a;a+=3)t.expandByPoint(G.fromArray(U,a).applyMatrix4(j));return Z.intersectsBox(t)}}(),_80o:function(w,K,e){var d=this;if(d._rectOverlapping)return!0;var C=d.shapeModel;if(C||!d.shapeName){var S=d.s("shape3d");if(("billboard"===S||"plane"===S)&&!d._billboardInView(S))return!0;var I=d.gv,f=d.data,m=I._cube,l=Ar.for(w),j=l.directAttribs();if(wc&&!fi){var Y=d.mat;if(Y)for(var i=0;i<Y.length;i++)d.mat[i]=Y[Y.length-i-1]}if(C&&C.model3d)return d.s(ki)&&d.gv._prefabRenderer.render(w,C,d.data,d.mat),void 0;if(ns(I,d.mat),!w._picking&&d.s("shape3d.reflector")||d.s("effect.flow"));else if(C)Ji(I,f,C,d,d.getBodyColor(),e);else{j.aPosition=gs(w,m.vs,O,O),j.aNormal=gs(w,m.ns,O,O),Mi(w,m.is);for(var i=0;6>i;i++)d._18O(w,tj[i],6*i,e,!1)}if(Si(I),d.faceMat)for(var i=0;6>i;i++)d._18O(w,tj[i],6*i,e,!0)}},_18O:function(G,Y,h,l,o){var P=this,C=P[Y];if(C){var c=P.data,y=P.gv,a=y._picking?null:C.material;if((a||l(C.transparent))&&!(o&&!C.mat||!o&&C.mat)){c._currentCubeElementId=h;var E=c.s("polygonOffset");if(E&&cr(G,E),a){var I={mesh:{vs:Qj,is:vo,ns:fn,uv:C.uv?P._cubeUvs:id,_complete_:!0},drawRange:[h,6],mat:a};y._prefabRenderer.render(G,I,c,o?C.mat:null);var s=y._cube,R=Ar.for(G).directAttribs();R.aPosition=gs(G,s.vs,O,O),R.aNormal=gs(G,s.ns,O,O),Mi(G,s.is)}else{o&&ns(y,C.mat);var q=Ar.for(G),x=q.directUniforms(),e=y.getTexture(C.texture,c,Y),N=C.uv,W=C.uvScale,D=C.uvOffset,d=C.uvRotation,i=C.uvAnchor,p=C.discardSelectable;e?N?Pl(G,e,p,y._buffer.uv,P._cubeUvs,D,W,d,i):Pl(G,e,p,y._cube.uv,O,D,W,d,i):Pl(G),yh(G,C.blend,C.light,C.opacity,C.reverseFlip,C.reverseColor,C.reverseCull),x.uDiffuse=C.color||A["color.empty"],nr(G,h,6),Ue(G),Je(G,e),o&&Si(y)}E&&Gc(G),c._currentCubeElementId=null}}},contextLost:function(){pt.superClass.contextLost.apply(this,arguments),this.data.s("shape3d.reflector")&&(this._reflectorRenderTarget=null,this._reflectNormal=null)},drawReflector:function(){var k=new Ri,F=new Ri,w=new Cm,d=new pd,$=new Ri,P=new Ri,K=new Ri,J=new Ri,j=new pd,c=new pd,L=new Ch,B=new Tl,M=new Tl,r=function(m,i,u){m[u]=i[0],m[u+1]=i[1],m[u+2]=i[2]},h=function(n,t,D){D=D||0,n[0]=t[D],n[1]=t[D+1],n[2]=t[D+2]},e=function(y,L){r(y,L.getEye(),0),r(y,L.getCenter(),3),r(y,L.getUp(),6)},v=function(m,p){h(p._eye,m,0),h(p._center,m,3),h(p._up,m,6),p._18Q=O;var B=p._skybox;B&&(B.p3([m[0],m[1],m[2]]),p.getData3dUI(B).iv())};return function(A){var N=this;N._reflectorInfo=null;var m=N.data;if(m._reflecting)return!1;var Q=N.gv;if(Q._picking)return!1;var l=m instanceof um,G=N._reflectorRenderTarget,Z=Q._canvas.width,C=Q._canvas.height;if(G?G.setSize(A,Z,C):G=N._reflectorRenderTarget=new ch.RenderTarget(Q,A,Z,C),l){var D=m.getPointsMatrix3d().getElements(),i=m.p3();i[1]+=(1-m.getAnchorElevation())*m.getTall(),k.copy(Qr(i,D))}else k.copy(m.p3());if(F.copy(Q.getEye()),d.makeRotationFromEuler(w.set(m.r3(),m.getRotationMode(),!0)),!N._reflectNormal){var r;if(l&&m.getThickness()<0){if(!N.shapeModel||!N.shapeModel.top_vs)return!1;r={vs:N.shapeModel.top_vs,ns:N.shapeModel.top_ns}}else{if(r=Xb(N,N.s("shape3d")),!r)return!1;!r.ns&&r.length&&(r=r[0])}if(!r.ns||!r.vs)return!1;N._reflectNormal=[r.ns[0],r.ns[1],r.ns[2]],N._reflectorModel={model3d:!0,mesh:{pos:r.vs},mat:{type:"reflector",cacheKey:"reflector"}}}if($.copy(N._reflectNormal),$.applyMatrix4(d),P.subVectors(k,F),P.dot($)>0)return!1;P.reflect($).negate(),P.add(k),K.copy(Q.getCenter()).negate().add(k),K.reflect($).negate(),K.add(k),J.copy(Q.getUp()),J.reflect($);var W=[0,0,0,0,0,0,0,0,0];e(W,Q),h(Q._eye,P.toArray()),h(Q._center,K.toArray()),h(Q._up,J.toArray()),Q._18Q=O;var S=Q._skybox;S&&(S.p3(Q._eye),Q.getData3dUI(S).iv()),Qc(A,G.frame),Q.setViewport(A,0,0,G.width,G.height);var s=m.s("shape3d.reflector.background");if(s){var E=A.getParameter(3106);dh(A,s)}else dh(A,[0,0,0,1]);Ar.for(A).glState.depth.mask=!0,A.clear(16640);var g=m.s("shape3d.reflector.clip"),U=g===n?.003:g,f=gi(Q),y=Yp(Q);L.setFromNormalAndCoplanarPoint($,k.add($.clone().multiplyScalar(U))),L.applyMatrix4(c.fromArray(y)),B.set(L.normal.x,L.normal.y,L.normal.z,L.constant),c.fromArray(f).getInverse(c),M.set(Math.sign(B.x),Math.sign(B.y),1,1).applyMatrix4(c),B.multiplyScalar(2/B.dot(M)),f[2]=B.x-f[3],f[6]=B.y-f[7],f[10]=B.z-f[11],f[14]=B.w-f[15];var u=Q._computedProjectMatrix;Q._computedProjectMatrix=f,m._reflecting=!0;var _=m.s("shape3d.reflector.shadow"),q={renderAxis:!1,renderEdit:!1,renderGrid:!1};"disabled"===_?(q.renderShadowMap=!1,q.renderShadow=!1):"scene"===_?q.renderShadowMap=!1:q.useReflectorSelfShadowMap=!0,Q.renderScene(q),Q._computedProjectMatrix=u,j.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),j.multiply(c.fromArray(Q._projectMatrix)),j.multiply(c.fromArray(Q._viewMatrix)),s&&dh(A,E),bk(A),v(W,Q);var z=m.s("shape3d.reflector.blur");if(z){var T=Q.getPostProcessingModule("Blur");T&&T.drawImpl(A,G,z,z>=3,m.s("shape3d.reflector.blur.iterations"))}var X=Q.getPostProcessingModule("Glitch");X&&X.enable&&X.onlyReflector&&(G=X._42(A,G));var t=N._reflectorModel,p=t.mat;p.tDiffuse=G.texture,p.color=cs(m.s("shape3d.reflector.color")||"rgb(128,128,128)"),p.textureMatrix=j.toArray(),p.modelMatrix=l?D:Xi(m),p.viewMatrix=Yp(Q),p.projectionMatrix=gi(Q);var V=this.s("shape3d.transparent");if(V){var o=Ar.for(A).glState,I=o.depth.mask;o.depth.mask=!1}return Q.renderModel(t,{clear:!1,restoreViewport:!1}),V&&(o.depth.mask=I),m._reflecting=!1,Q.getRenderState().useProgram(Q._prg),!0}}()});var qt=function(q,C){Ig(qt,this,[q,C])};vn(qt,pt,{_80o:function(){}});var rt=function(q,x){Ig(rt,this,[q,x])};vn(rt,ot,{_25Q:1,validate:function(h){var m=this,b=m.s;if(b(Yd)!==nk||b("batch")!=O||!m.info||m.data._needChangeGeometry){var j=m.gv,P=m.data,k=b("edge.width"),G=P._40I,y=P._41I;if(P._needChangeGeometry=m.shapeModel=m.info=m.lineShapeModel=O,G&&y){var A,R,$,o,Y,u,x,d,w,D,s=P.isLooped(),Z=b(Oi),N=Q.getEdgeType(Z);if(N){var n=N(P,vl(m,j,P,s,Z),j,m._19Q);if(!n.points||n.points.isEmpty())return;u=m.info={},x=n.segments,Y=n.points,d=Y.size();for(var t=G.getElevation(),K=y.getElevation(),a=0;d>a;a++){var T=Y.get(a);T.e==O&&(T.e=t+(K-t)*a/(d-1))}w=jk(Y.get(0)),D=jk(Y.get(d-1));var W=d%2,X=(d-W)/2;u.c1=jk(Y.get(X-1)),u.c2=jk(Y.get(X)),0!==W&&(u.p3=u.c2),u.s1=w,u.s2=jk(Y.get(1)),u.t1=jk(Y.get(d-2)),u.t2=D}else{Y=new td,u=m.info={};var B=b("edge.offset"),L=b("edge.center"),e=b("edge.source.t3"),F=b("edge.target.t3"),z=Yg(j,P,"source"),f=Yg(j,P,"target");if(!z||!f)return j.invalidateData(P),delete m.info,!1;if(e&&(z[0]+=e[0],z[1]+=e[1],z[2]+=e[2]),F&&(f[0]+=F[0],f[1]+=F[1],f[2]+=F[2]),Z===mh){x=b("edge.segments");var S=u.points=b(Zo)||ps;if(d=S.size()){if(w=jk(S.get(0)),D=jk(S.get(d-1)),!L&&B){var C=B;$=js(w,z,!0),B=g(C,xh(z,w)),z=[z[0]+$[0]*B,z[1]+$[1]*B,z[2]+$[2]*B],$=js(f,D,!0),B=g(C,xh(D,f)),f=[f[0]-$[0]*B,f[1]-$[1]*B,f[2]-$[2]*B]}if(1===d)u.p3=w;else{var W=d%2,X=(d-W)/2;A=jk(S.get(X-1)),R=jk(S.get(X)),0!==W&&(u.p3=R),u.s1=z,u.s2=w,u.t1=D,u.t2=f}}else!L&&B&&($=js(f,z,!0),o=xh(z,f),B=of(B,o),z=[z[0]+$[0]*B,z[1]+$[1]*B,z[2]+$[2]*B],f=[f[0]-$[0]*B,f[1]-$[1]*B,f[2]-$[2]*B]),A=z,R=f;Y.add({x:z[0],y:z[2],e:z[1]}),Y.addAll(S),Y.add({x:f[0],y:f[2],e:f[1]})}else{var q=vl(m,j,P,s,Z);if(m._19Q||(q=-q),s){var i=z[0],r=z[1],_=z[2],p=G.getTall()/2+q;A=[i-q,r+p,_],R=[i+q,r+p,_],Y.add({x:i-q,y:_,e:r}),Y.add({x:i-q,y:_,e:r+p}),Y.add({x:i+q,y:_,e:r+p}),Y.add({x:i+q,y:_,e:r})}else{$=js(f,z,!0),o=xh(z,f);var M={x:z[0],y:z[2]},J={x:f[0],y:f[2]},c=bi(O,M,J,q),v=c.x-M.x,l=c.y-M.y;B=of(B,o),$[0]*=B,$[1]*=B,$[2]*=B,A=[z[0]+$[0]+v,z[1]+$[1],z[2]+$[2]+l],R=[f[0]-$[0]+v,f[1]-$[1],f[2]-$[2]+l],L?(Y.add({x:z[0],y:z[2],e:z[1]}),Y.add({x:A[0],y:A[2],e:A[1]}),Y.add({x:R[0],y:R[2],e:R[1]}),Y.add({x:f[0],y:f[2],e:f[1]})):(Y.add({x:A[0],y:A[2],e:A[1]}),Y.add({x:R[0],y:R[2],e:R[1]}))}}u.c1=A,u.c2=R}u._lastPointsSegments={points:Y,segments:x},u.list=b(Yd)===nk?m.createTubeModel(Y,x,k/2,h):m.createLineModel(Y,x,k,"edge","edge.dash")}}},invalidateCachedGeometry:function(){this.info=O}});var st=function(f,C){Ig(st,this,[f,C]),this._needRecoverPosition=!0};vn(st,pt,{_80o:function(_,v,E){var G=this,y=G._matWithExtraction||G.mat;if(y&&(!G.s("shape3d.reflector")||_._picking)){var q=G.gv,l=G.shapeModel;if(ns(q,y),l)Ji(q,G.data,l,G,G.getBodyColor(),E);else for(var N=0;6>N;N++)Lm(G,_,v,tj[N],E);Si(q)}},validate:function(B,x){var w,h,V=this,v=V.s,R=V.data,I=R._thickness/2,P=R.isClosePath(),U=R.getPoints(),J=R.getSegments(),Z=v(un),r=B&&B.uv;if(V.invalidateUnstableWireframe(),V.clear(),V.dispatchBoundingBoxChanged(),Q.extractShapeTranslation||Q.extractVerticesTranslation){var a=new Tc.Vector3(R.p3());U=rj(U),U.forEach(function(Q){Q.x-=a.x,Q.y-=a.z}),V._vsTranslation=(new Tc.Matrix4).setPosition(a);var c=R.getShapeElevation;R.getShapeElevation=function(){return-(this.getTall()||0)*(this._anchorElevation-.5)}}else V._vsTranslation=null;if(0>I){V.s("shape3d.reflector")&&(V._reflectNormal=null);try{var S=v("shape3d.image.projection");if(S&&S[4]){var L=R.p3(),F=L[0],E=L[2];S=[F+S[0],S[1]+E,F+S[2],S[3]+E]}h=V.shapeModel=tc(U,J,v(bo),v(ig),Z,v(Tj),R.getTall(),R.getShapeElevation(),P,S)}catch(l){h=V.shapeModel={}}v(ki)||(delete h.vs,delete h.ns,delete h.uv),v("shape3d.top.image")||v("shape3d.top.material")||delete h.top_uv,v("shape3d.bottom.image")||v("shape3d.bottom.material")||delete h.bottom_uv}else if(v(Yd)===nk)w=yp(U,J,Z,P),h=V.shapeModel={vs:[],uv:[]},h.sum=v(Tj)||Jr(w)||1,h.len=0,v(bo)&&!P&&(h.top_vs=[],h.top_uv=[]),v(ig)&&!P&&(h.bottom_vs=[],h.bottom_uv=[]),V._12O(w,I);else{var $,f,X,W,d,j,i,K,s,A;if(w=yp(U,J,Z,P),d=V.vf(ll,r,!1,x),I&&(j=V.vf(Yh,r,!1,x),i=P?O:V.vf(wq,r,!1,x),K=P?O:V.vf(hb,r,!1,x),s=V.vf(pj,r,!1,x),A=V.vf(ri,r,!1,x)),I){for(var M=0,D=w.length;D>M;M++)w[M]=V._tryRemoveBezierPoints(w[M],I);V._12O(w,I)}else d&&w.forEach(function(o){if(W=o.length,W>0)for($=o[0],X=1;W>X;X++)f=o[X],V.addV(d.vs,$,f),$=f});V._20Q(w),B||(d&&(d.ns=Zc(d.vs),gq(d,"vs"),gq(d,In)),I&&(j&&(j.ns=Zc(j.vs),gq(j,"vs"),gq(j,In)),i&&(i.ns=Zc(i.vs),gq(i,"vs"),gq(i,In)),K&&(K.ns=Zc(K.vs),gq(K,"vs"),gq(K,In)),s&&(s.ns=Zc(s.vs),gq(s,"vs"),gq(s,In)),A&&(A.ns=Zc(A.vs),gq(A,"vs"),gq(A,In))))}var C=V.mat=R.getPointsMatrix3d().getElements();R._flipSide=pd.determinantOfArray(C)<0,V._vsTranslation?C=V._matWithExtraction=(new Tc.Matrix4).fromArray(C).multiply(V._vsTranslation).toArray():V._matWithExtraction=null,B&&(Eg(V,C,B,h,x),V.clear()),c!=O&&(R.getShapeElevation=c)},_20Q:function(Z){var i,a,o,L,m,f,D,K,y,u,T,z,C,J=this,V=J.front,t=J.back,W=J.top,p=J.bottom,c=V?V.tuv:O,P=t?t.tuv:O,w=W?W.tuv:O,X=p?p.tuv:O,Q=0,E={front:0,back:0,top:0,bottom:0};(c||P||w||X)&&(C=J.s(Tj),i=C||Jr(Z)||1,T=J.s("all.uv.union"),Z.forEach(function(g){if(a=g.length,a>0){for(u in E)z=J.s(u+".uv.union"),(z===!1||z==O&&T===!1)&&(E[u]=0,C||(i=Jr([g])));for(f=g[0],o=1;a>o;o++){D=g[o],K=xh(f,D);for(u in E)Q=E[u],L=Q/i,E[u]=Q+=K,m=Q/i,"back"===u&&(y=L,L=1-m,m=1-y),J._14O(J[u],L,m);f=D}}}))},_14O:function(k,e,i){if(k){var b=k.uv,x=k.tuv;if(x){if(b)var a=b[0]+(b[6]-b[0])*e,d=b[1]+(b[7]-b[1])*e,L=b[2]+(b[4]-b[2])*e,A=b[3]+(b[5]-b[3])*e,j=b[2]+(b[4]-b[2])*i,F=b[3]+(b[5]-b[3])*i,s=b[0]+(b[6]-b[0])*i,Q=b[1]+(b[7]-b[1])*i;else a=e,d=0,L=e,A=1,j=i,F=1,s=i,Q=0;x.push(L,A,j,F,s,Q,s,Q,a,d,L,A)}}},_13O:function(S){var V=S.uv,w=S.tuv;w&&(V?w.push(V[2],V[3],V[4],V[5],V[6],V[7],V[6],V[7],V[0],V[1],V[2],V[3]):w.push(0,1,1,1,1,0,1,0,0,0,0,1))},_tryRemoveBezierPoints:function(M,T){var j=M.length;if(4>j)return M;var e,H,L,d,X,K,_=!1,B=function(Z){return M[Z]},p=function(k){return M[j-1-k]};for(X=0;1>=X;X++)for(K=X?p:B,H=K(0),L=K(1),e=2;j-1>e;e++)if(d=K(e),!d.remove)if(d.b){var O=bi(H,L,d,T);O.adjust?(d.remove=!0,_=!0):(H=L,L=d)}else H=L,L=d;if(!_)return M;var C=[];for(e=0;j>e;e++)M[e].remove||C.push(M[e]);return C},_12O:function(h,e){var g,H,L,F,b,i=this.s("shape3d.point.epsilon"),c=this;h.forEach(function(n){if(b=n.length,b>0)for(g={p:n[0],n:!0},F=1;b>F;F++)H=n[F],L=b-1>F?n[F+1]:O,L&&Math.abs(H.x-L.x)<i&&Math.abs(H.y-L.y)<i||c.addPoint(g,H,L,e,n)})},addPoint:function(N,P,A,I,Z){var l,S,W,f,s,E,e,u,C,D=this,X=N.p,p=N.f,x=N.b,k=D.s("shape3d.side")||xd,h=D.s("shape3d.start.angle"),y=D.s("shape3d.sweep.angle"),F=D.shapeModel,j=D.data.isClosePath();if(N.n&&(N.n=!1,p=j&&Z.length>2?bi(Z[Z.length-2],X,P,I):bi(O,X,P,I),x=Hl(X,p),F?F.top_vs&&D._10O(x,p,k,h,y,F.top_vs,F.top_uv):(l=D.left)&&(D.addV(l.vs,x,p),D._13O(l))),S=A?bi(X,P,A,I):j&&Z.length>2?bi(X,P,Z[1],I):bi(X,P,O,I),W=Hl(P,S),F){var $,m,R=F.vs,c=F.uv,q=F.sum;for(c&&($=F.len/q,F.len+=xh(X,P),m=F.len/q),E=D._9O(x,p,k,h,y),e=D._9O(W,S,k,h,y),u=0;k>u;u++)C=u+1,To(R,E[C]),To(R,e[u]),To(R,E[u]),To(R,e[u]),To(R,E[C]),To(R,e[C]),c&&(f=u/k,s=C/k,c.push($,s,m,f,$,f,m,f,$,s,m,s));!A&&F.bottom_vs&&D._10O(W,S,k,h,y,F.bottom_vs,F.bottom_uv,!0)}else!A&&(l=D.right)&&(D.addV(l.vs,S,W),D._13O(l)),(l=D.front)&&D.addV(l.vs,p,S),(l=D.back)&&D.addV(l.vs,W,x),(l=D.top)&&D.addH(l.vs,p,S,W,x,!0),(l=D.bottom)&&D.addH(l.vs,x,W,S,p);N.p=P,N.f=S,N.b=W},_10O:function(s,l,A,Y,N,f,P,o){var v,R,U=this,W=U.data,H=U._9O(s,l,A,Y,N),z=(s.x+l.x)/2,w=(s.y+l.y)/2,J=W.getShapeElevation(),j=0;for(j=0;A>j;j++)o?(To(f,H[j]),To(f,H[j+1])):(To(f,H[j+1]),To(f,H[j])),To(f,[z,J,w]),P&&(o?(v=Qd*(j+1)/A+Y,R=Qd*j/A+Y):(v=Qd*j/A+Y,R=Qd*(j+1)/A+Y),P.push(.5-.5*b(R),.5-.5*G(R),.5-.5*b(v),.5-.5*G(v),.5,.5))},_9O:function(k,e,M,W,S){var U,l,N=this,C=N.data,i=[],H=(k.x+e.x)/2,t=(k.y+e.y)/2,n=C.getTall()/2,o=C.getShapeElevation(),P=0;for(S==O&&(S=Qd);M>=P;P++)U=S*P/M+W,l=b(U),i.push([H+(k.x-H)*l,o+n*G(U),t+(k.y-t)*l]);return i},addV:function(p,V,w){var l=V.x,X=V.y,C=w.x,k=w.y,f=this.data,F=f.getShapeElevation(),r=f.getTall()/2;p.push(l,F-r,X,C,F-r,k,C,F+r,k,C,F+r,k,l,F+r,X,l,F-r,X)},addH:function(R,o,M,l,i,w){var m=this.data,b=m.getTall()/2,N=m.getShapeElevation()+(w?b:-b);R.push(o.x,N,o.y,M.x,N,M.y,l.x,N,l.y,l.x,N,l.y,i.x,N,i.y,o.x,N,o.y)},vf:function(d,N,Z,l){var $,q=this,e=q.gv.getFaceVisible(q.data,d);return(Z||e)&&($=hp(q,d,l),$.vs=[],$.tuv=e?[]:O,$.visible=e),$}});var tt=function(_,X){Ig(tt,this,[_,X])},ut={},vt=function(p){return/\.(png|jpg|gif|jpeg|bmp|svg)$/i.test(p)};vn(tt,pt,{validate:function(){var K=this,U=K.gv,i=K.data,I=K.s,x=cs(I("points.color")),c=I("points.size"),S=I("points.uv.offset"),N=I("points.image");!N||vt(N)||cg.test(N)||(ut[N]||(ut[N]=K._createCachedImage(N)),N=ut[N]);var O,b,h=i._modelDirty,r=I("points.model");if(r){if(K._lastShapeModel!==r||!K.shapeModel){var X=Xb(K,r);if(!X)return;var H=[],d={};K.eachShapeModel(function(A){for(var r=0,T=A.length;T>r;r+=3){var F=A[r],l=A[r+1],u=A[r+2],Z=""+F+"_"+l+"_"+u;d[Z]||(d[Z]=!0,H.push(F,l,u))}},X),K._setShapeModelPoints(new yr(H)),K._lastShapeModel=r,h=!0}O=K.shapeModel.vs.length,b=O/3}else{var s=i.getPoints();if(b=O=s.length,h||i._pointsDirty||!K.shapeModel){for(var m=[],Q=0;b>Q;Q++){var A=s[Q];A&&m.push(A.x,A.e,A.y)}K._setShapeModelPoints(new yr(m)),i._pointsDirty=!1,K._lastShapeModel=null,h=!0}}var D=I("points.transparent");if(K.info={mat:Xi(i),size:c,diffuse:x,opacity:I("points.opacity"),texture:N,transparent:D,alphaTest:D?0:I("alphaTest"),uvScale:I("points.uv.scale"),uvOffset:S,discardSelectable:I("points.discard.selectable")},h||i._colorsDirty){var $=!1,_=i.getColors();if(_&&_.length>0)for(var F=[],Q=0;b>Q;Q++)for(var C=_[Q],e=C?($=!0,cs(C)):x,V=4*Q,q=0;4>q;q++)F[V+q]=e[q];K.shapeModel.cs=$?new yr(F):null,i._colorsDirty=!1}if(h||i._sizesDirty){var M=!1,W=i.getSizes();if(W&&W.length>0)for(var v,Y=[],Q=0;b>Q;Q++)v=W[Q],v>=0?(Y.push(v),M=!0):Y.push(c);
K.shapeModel.ss=M?new yr(Y):null,i._sizesDirty=!1}if(h||i._offsetsDirty){var L=!1,f=i.getUvoffsets();if(f&&f.length>0)for(var y,J,k,t=[],Q=0;b>Q;Q++)y=2*Q,J=f[y],k=f[y+1],J!=n&&k!=n?(t.push(J,k),L=!0):t.push(0,0);K.shapeModel.os=L?new yr(t):null,i._offsetsDirty=!1}if(h||K._lastPointNumber!==b){this.dispose();var R=U.pickColorMap,E=K._startPickId=R._pickIdUsed;R._pickIdUsed=E+b;for(var m=[],Q=0;b>Q;Q++){var p=E+Q,z=$s(p);m.push(z[0],z[1],z[2],z[3]),R[p]||(R[p]={data:i,part:Q})}K.shapeModel.ps=new yr(m),K._lastPointNumber=b}i._modelDirty=!1,this.dispatchBoundingBoxChanged()},_setShapeModelPoints:function(z){var y=this,j=y.shapeModel,u=y.shapeModel={vs:z};if(!j)return u;var B=z.length,a=Math.round(B/3);return j.cs&&j.cs.length==4*a&&(u.cs=j.cs),j.ss&&j.ss.length==a&&(u.ss=j.ss),j.os&&j.os.length==2*a&&(u.os=j.os),j.ps&&j.ps.length==4*a&&(u.ps=j.ps),u},_createCachedImage:function(E){var _=128,q=qb(),k=q.getContext("2d");Wk(q,_,_,1),Nq(k,{width:_,height:_,comps:[{type:E,background:"white",borderWidth:0,rect:[0,0,_,_]}]},0,0,_,_);var a=f.Math.generateUUID();return qq[a]=q,a},_80o:function(z,Z){var j=this,g=j.gv,B=g._picking;if(!B||g.isSelectable(j.data)){var I=j.shapeModel,A=j.info;if(I&&I.vs&&I.vs.length){var i={type:"points",renderMode:"points",renderPickMap:!0,transparent:A.transparent,modelMatrix:A.mat,modelViewMatrix:Tg([],g._viewMatrix,A.mat),projectionMatrix:g._projectMatrix,viewMatrix:g._viewMatrix,scale:g.getHeight()/2,size:A.size,diffuse:A.diffuse,opacity:A.opacity,map:g.getTexture(A.texture,j.data),alphaTest:A.alphaTest,resolution:g.getDevicePixelRatio(),discardSelectable:A.discardSelectable,uvScale:A.uvScale,blackout:z._blooming&&!j.data.s("bloom"),picking:B,useColor:!B&&I.cs!=O,useSizeArray:I.ss!=O,uUvOffset:A.uvOffset,useUvArray:!B&&I.os!=O};g._prefabRenderer.render(z,{model3d:!0,mesh:{position:I.vs,pickColor:B?I.ps:null,color:B?null:I.cs,aUvOffset:!B&&I.os?I.os:null,sizeArray:I.ss},mat:i});var n=Ar.for(z);n.useProgram(Z),n.directAttribs().disable(),g.shadowMap.enable&&g.shadowMap.createShadow(),g.flowMap.createFlow()}}},dispose:function(){tt.superClass.dispose.call(this);var g=this._startPickId,k=this._lastPointNumber;if(g&&k){for(var I=this.gv.pickColorMap,w=0;k>w;w++){var z=g+w;I[z]&&delete I[z]}delete this._startPickId,delete this._lastPointNumber}}});var wt=function(s,I){Ig(wt,this,[s,I]),this._needRecoverPosition=!0};vn(wt,ot,{_25Q:1,validate:function(c){var n=this,L=n.data,D=n.s,i=L.getPoints(),d=i.size();n.dispatchBoundingBoxChanged();var Z=L.p3(),V=n.mat=ib();cj(V,Z),cl(V,L.getFinalRotation3d(),L.getRotationMode());var J=L.getScale3d(),$=L._dynamicScale3d;if($&&(J[0]*=$[0],J[1]*=$[1],J[2]*=$[2]),Vr(V,J),cj(V,Qm(Z)),L._flipSide=pd.determinantOfArray(V)<0,(D(Yd)!==nk||D("batch")!=O||!n.shapeModel||L._needChangeGeometry)&&(L._needChangeGeometry=n.shapeModel=n.info=n.lineShapeModel=O,d>1)){var E=n.info={},N=L.getSegments(),v=L.getThickness(),S=jk(i.get(0)),h=jk(i.get(d-1)),b=d%2,F=(d-b)/2;if(E.c1=jk(i.get(F-1)),E.c2=jk(i.get(F)),0!==b&&(E.p3=E.c2),E.s1=S,E.s2=jk(i.get(1)),E.t1=jk(i.get(d-2)),E.t2=h,D(Yd)===nk){if(Q.extractPolylineTranslation||Q.extractVerticesTranslation){var Z=new Tc.Vector3(L.p3());i=rj(i),i.forEach(function(V){V.x-=Z.x,V.e-=Z.y,V.y-=Z.z}),n._vsTranslation=(new Tc.Matrix4).setPosition(Z),n._matWithExtraction=(new Tc.Matrix4).fromArray(V).multiply(n._vsTranslation).toArray()}else n._vsTranslation=null,n._matWithExtraction=null;E.list=n.createTubeModel(i,N,v/2,c)}else E.list=n.createLineModel(i,N,v,"shape.border","shape.dash")}},invalidateCachedGeometry:function(){this.shapeModel=this.info=this.lineShapeModel=O},_80o:function(D,r,$){var d=this,X=d.shapeModel;if(X){var a=d.mat;(Q.extractPolylineTranslation||Q.extractVerticesTranslation)&&d._matWithExtraction&&(a=d._matWithExtraction);var h=d.gv;ns(h,a);var u,y=d.s("3d.clip.direction");if(h._uvClipEnabled&&("uv.left"===y||"uv.right"===y)&&(u=d.s("3d.clip.percentage"))<1){var s=!0,o=!0;Fj(X);var Z=X.top_vs,m=X.bottom_vs,S=X.vs,j=Ar.for(D),_=j.directUniforms(),C=j.directAttribs();"uv.left"==y?(1>u&&(s=!1),0>=u&&(o=!1)):(1>u&&(o=!1),0>=u&&(s=!1)),X.top_vs=X.bottom_vs=n,C.aUv=eg(D,h._buffer.uv,X.uv,O,2),Ji(h,d.data,X,d,d.getBodyColor(),$),C.aUv=!1,_.uClipDirection=0,X.vs=n,s&&(X.top_vs=Z),o&&(X.bottom_vs=m),Ji(h,d.data,X,d,d.getBodyColor(),$),X.vs=S,X.top_vs=Z,X.bottom_vs=m}else Ji(h,d.data,X,d,d.getBodyColor(),$);Si(h)}}});var xt=function(){var j,i=1,D=!1,f={},o={},p={},W=function(){Ad(W);var J=Date.now(),C=J-j;j=J;try{R(C/1e3)}catch(l){}},R=function(W){var C,t,q,k,I,i={};for(C in f){if(t=f[C],I=t.speed,t.paused)S=t.time;else{var S=t.time+W*I;t.time=S}var Z=t.duration,V=t.loop;"once"===V?S=0>I&&S<t.end||I>0&&S>t.end?t.end:Tc.modToPositive(S,Z):"pingpong"===V?(S=Tc.modToPositive(S,2*Z),S>Z&&(S=2*Z-S)):S=Tc.modToPositive(S,Z),q=t.animation;var L=t.displayTime=Tc.roundFloat(S,3);(k=i[q])?k.push(C,L):i[q]=[C,L]}for(q in i)N(q,i[q])},N=function(z,S){var K=o[z][1];if(K){var r,Q,_,W,l,H,U,V,c={},O=S.length/2,F={},I=p[z];if(I){var D=I.clips;for(r=0,l=D.length;l>r;r++)c[D[r].time]=r;for(r=0;O>r;r++)H=S[2*r+1],U=c[H],U!==n&&(F[U]=!0)}else I=p[z]={clips:[]};l=K.length;var Z=-1;for(V=0;O>V;V++)if(Q=S[2*V],H=S[2*V+1],U=c[H],U===n){do Z++;while(F[Z]);(_=I.clips[Z])?_.time=H:_=I.clips[Z]={time:H,datas:[]},W=_.datas;for(var r=0;l>r;r++){var X=K[r],y=X.evaluate(H),G=W[r];G||(G=W[r]=[]);for(var E=0,x=y.length;x>E;E++)G[E]=y[E]}c[H]=Z,f[Q].clip=_}else f[Q].clip=I.clips[U]}},w=function(T){for(var i,_,h=T.tracks,B=h.length,K=new Array(B),H={},V=0;B>V;V++){var P=h[V],G=P.type,x=P.name,U=x.split(".");switch((_=H[U[0]])||(_=H[U[0]]=[]),U[1]){case"scale":_[2]=V;break;case"quaternion":_[1]=V;break;case"position":default:_[0]=V}switch(G){case"vector":i=new J(P.times,P.values);break;case"quaternion":i=new u(P.times,P.values);break;case"cubic":i=new d(P.times,P.values);break;default:i=new a(P.times,P.values)}K[V]=i}return[H,K]},c=Tc.newIdGenerator(),e=function(L,p){if(p=Tc.roundFloat(p,3),L.speed=p,"once"===L.loop){var D=L.duration,w=L.start;L.end=(0>p?Math.floor((w-1e-8)/D):Math.ceil((w+1e-8)/D))*D}},B=function(B,m,R,V,k){var p;(p=B.tag)||(p=B.tag=c.next()),o[p]||(o[p]=w(B));var A=i++,v=B.duration;return f[A]={time:R||0,start:R||0,loop:V||"repeat",duration:v,animation:p,animationName:B.name,clip:k},e(f[A],m),D||(D=!0,j=Date.now(),W()),A},Y=function(o){var D=f[o];return D?(delete f[o],D):!1},Q=function(W,E,h){var o=f[W];return o?"speed"===E?(e(o,h),!0):"forwardTime"===E?(o.time+=h,!0):!1:!1};return{add:B,stop:Y,changeAnimationInfo:Q,getAnimation:function(T){return f[T]},getAnimationMap:function(){return f},getAnimationTracks:function(){return o},getFrameAnimationData:function(){return p}}}();og(ih,{playAnimation:function(V,J,H,n){var O=this.getAnimation(V);if(!O)return!1;var b;this._animationPlaying&&(b=xt.stop(this._animationId));var F=this._animationId=xt.add(O,J,H,n,b?b.clip:null);return this._animationPlaying=!0,this._animationPaused=!1,this.invalidateView(),F},changeCurrentAnimationSpeed:function(C){return xt.changeAnimationInfo(this._animationId,"speed",C)},forwardAnimation:function(E){return this.invalidateView(),xt.changeAnimationInfo(this._animationId,"forwardTime",E)},backwardAnimation:function(R){return this.forwardAnimation(-R)},stopAnimation:function(){var o=this._animationId;return o&&xt.stop(o),this._animationPlaying=!1,this._animationPaused=!1,this._animationId=n,this.invalidateView(),o},pauseAnimation:function(){if(this._animationPaused)return!1;var J=this._animationId;if(!J)return!1;var T=xt.getAnimation(J);return T?(T.paused=!0,this._animationPaused=!0,!0):!1},resumeAnimation:function(){if(this._animationPaused){var V=this._animationId;if(!V)return!1;var x=xt.getAnimation(V);return x?(x.paused=!1,this._animationPaused=!1,this.invalidateView(),!0):!1}return!1},isAnimationPlaying:function(){return this._animationPlaying},isAnimationPaused:function(){return this._animationPaused},getAnimationNames:function(){return Q.getShapeModelAnimationNameList(this.s("shape3d"))},getAnimation:function(V){return Q.getShapeModelAnimation(this.s("shape3d"),V)},getAnimations:function(){return Q.getShapeModelAnimations(this.s("shape3d"))},getCurrentAnimationState:function(i){var v=this._animationId;if(!v)return null;var b=xt.getAnimation(v);if(!b)return null;switch(i){case"time":return b.displayTime||0;case"name":return b.animationName;case"loop":return b.loop;case"speed":return b.speed;case"duration":return b.duration;default:return{time:b.displayTime||0,name:b.animationName,loop:b.loop,speed:b.speed,duration:b.duration}}}}),og(ic,{isAnimationPlaying:S}),og(Q,{getShapeModelAnimations:function(t){var C,r;return t&&(C=Bj(t))&&C.model3d&&(r=C.animations)?r:null},getShapeModelAnimation:function(w,k){var d=Q.getShapeModelAnimations(w);if(d)for(var E=0,h=d.length;h>E;E++)if(d[E].name===k)return d[E];return null},getShapeModelAnimationNameList:function(z){var G=Q.getShapeModelAnimations(z);if(!G)return null;for(var s=G.length,d=new Array(s),l=0;s>l;l++)d[l]=G[l].name;return d}});var yt=function(){var w={},B=function(s){var L;return(L=w[s])?L.length?L.pop():new Float32Array(s):(w[s]=[],new Float32Array(s))},O=function(W){var S,J=W.length;(S=w[J])?S.push(W):w[J]=[W]};return{request:B,release:O}}(),zt=Tc.newIdGenerator();y.assign(ch.Graph3dView.prototype,{initSkeletonDatas:function(){var B=this,b=B._updatedSkeletonDatas;for(var j in b)yt.release(b[j]);B._updatedSkeletonDatas={},B._isSkeletonUpdated={},B._boneViewMatrices.length=0,B._boneViewMatrices._bufId=null},_renderBonesForDebug:function(_,c){var S=this;S._boneViewMatrices.length>0&&(c.depth.enabled=!1,c.depth.mask=!1,S._prefabRenderer.render(_,{mesh:{type:"bone"},instances:{aMatrixInstanced:new Float32Array(S._boneViewMatrices)},mat:{type:"fixColor",color:"red",cullFace:!0}}))},updateSkeleton:function(i,j){var F=this;if(j||(j=Bj(i.s("shape3d")),j&&j.model3d)){var H=i._animationId,s=xt.getAnimationMap()[H];if(s){var b=s.clip;if(b){var g=i._lastAnimTimestamp=s.time,D=s.animation+"|"+g;if(!this._isSkeletonUpdated[D]){this._isSkeletonUpdated[D]=!0;var d=i.s("3d.bone.visible");if(d){var L,R=Tc.requestVector3(),T=Tc.requestVector3(),V=Tc.requestMatrix4().fromArray(i.mat),N=Tc.requestMatrix4();N.composeFromArray(j.position,j.quaternion,j.scale),V.multiply(N)}var e=b.datas,O=xt.getAnimationTracks()[s.animation][0],X=[],y={};Q.traverse(j,function(r,J){if(r.skeleton)return X.push(r),void 0;if(r.isBone){var S,s,K=r.name;(s=O[K])&&((S=s[0])!==n&&(r.position=e[S]),(S=s[1])!==n&&(r.quaternion=e[S]),(S=s[2])!==n&&(r.scale=e[S]));var j,B;if((j=r.matrixWorld)||(j=r.matrixWorld=new pd),j.composeFromArray(r.position,r.quaternion,r.scale),J&&(B=J.matrixWorld)&&(j.premultiply(B),d)){var E=F._boneViewMatrices;B.getPosition(R),R.applyMatrix4(V),j.getPosition(T),T.applyMatrix4(V),L=2*R.distanceTo(T),N.lookAt(T,R).setPosition(T.set(0,0,0)).scale(T.set(L,L,L)).setPosition(R),E.push.apply(E,N.getElements())}y[K]=j}},null,"comps"),d&&(Tc.releaseVector3(R),Tc.releaseVector3(T),Tc.releaseMatrix4(N),Tc.releaseMatrix4(V));var p,t,w,S,G,h,W,r,x,B=F._updatedSkeletonDatas;for(W=0,r=X.length;r>W;W++){if(t=X[W],p=t.skeleton.bones,S=p.length,(h=t._skeletonId)||(h=t._skeletonId=zt.next()),!(w=B[h+"|"+g])){var M=Math.sqrt(4*S),P=Tc.nearestPOT(M);M>P&&(P<<=1),P=Math.max(P,4),w=B[h+"|"+g]=yt.request(4*P*P)}for(G=t.skeleton.boneMatrixInverses,x=0;S>x;x++)pd.multiplyMatrixArray(w,y[p[x]],G,16*x,0,16*x)}}}}}}}),Fo.pbr=["?0t0w!/Imjbodujtt;z!ihqm=t!mf4e-v!mmdjohji$u!!S0C0Q!!$fQoSjFgGfJeY$!","~0!0<!eIJj!o>u!ts;p!mhpmDthmb4s-G!`mmjhh!iu?z!ep0c0/!t$gQ/ShFpGgJ=Y!f!ev$medfogjj$of!!Q?CzSep!c/$tegf/gqjboNfx!pTmUgB=O!EfBeSvEmd!oj$$jo!d<m*veeJf)!m=fdypfnUnupvoq?uv!Pp$Ujsobdfmovjemf!!>=!qebJd!lj?ozhe?pc!/vtogj/ghposjnq!qwbfNdf4o!peuj=g!gfvetvfm<d!ovjo$jg!ps?nz!ewpfcd/4t!gf/nujvtqtujvwpf=<!!fveovjmgdposjn$!g!mpgbjue!osfp$vh!i<oufbtptd<s!bvfomjdg/pmsbnj!sgfmupbbnu!!+n!fsubbmmvodfftqtT<u!bvpodjsgbpfsmnd!!g,m!p*bdud!Gp!q+b!dujbupzd<s!bf$mjdg/emfbgj!sVfTuFb`nV!W.!!1w/b2s)z!j+o!hu!iwhfjdM3h!owjVpwh<u!vp$!f>o!eujighj!Mh$ojjgp!heufvgpj!o<f*ed)dVWTOFu`pMeJ!H-I1U:NGBuQb*p!d}s}b!femfdg/jmobfjes)fVuTbFn`!B-P1NGBuQb*pd!swbbfsmzdj/omhb!jwsffdu3b!nw)Vlwd3j<m!id$Tf`oGe!j>g!d!dG$!j4gdeffwg!!<V*T*Fs`jNEBxQfj!wv/ozjsgupfsnnp!fthb!n-qmmbfnss3pEO!unbbpqd<s!bf$mfdo/ezjsguf!np$fjhg)eufpge!)VfTuFb`sBvMuQbItB!N>B!Qdd!WvOoujpgep!sunb!ptmbgn!qmUfBsP3DES!BbFmMqDi`bFNTbVq!<g!fe$gfjo$ej!gg!je$ojfg$ef!g<!sVbTmFv`dBfMqQTIoBfUfFiTtU!,!!vqonjpgDpzshns!fgomFpobfuf!ibtm!q+i!buUifhtjuM<h!oj$pfhouevjpg!>!!u$ijhgjeMfhgo!jVpThFu`vBpP!N<B*Qsp!mvpoDjogfpfsint!/tmbbnjqsmffusb3nE)!4bypbNnb!q+<!!8v6o2j/g1p!s.n!!1g/m2p!b>u!!qbnppNDbzqhJsofuofFootfjfuizt<!!ub$pfmoge!jgOF!FI$Tj`gFeTfVg!!gVfTeFg`jM$JH!I<UfNdBoQbj!evboSjfgwpjstnt!jtnbFnmqbmufpsu3!E,!!msjbhmivudNfbqqT<m!bvuopjug!p,s!nf!tgvmgpgbjuE!mmbjuhpiuu!N>b!quJiohujfMohtojjupzh<u!vp$!f4odefjwg!<!sb$mjvgdeffqgT!uVdTfFs`jFeNoJjT/TuJiWhFjNMBeQfu!dvfomjggfpss!n,!!tsbbnmqvmdffsq3TEu!dffnsjjtet/juwifhNjbMqe<f!ud$ffmogefjsg!>!!s$bjmovddmfvqeTfm!b=ucptue!g4td?fw!!<$fjtgvegfggj!EVuTdFf`sOjPeSoNjB/MuNiBhQjM!evfoujdgfpmsgnf!st!b,n!qfmtfvsg3gEj!EoupdsfnsbjmeN/buqi<h!jvMoejfgupdsfnm!gwffsd!3>!!ofptsvngbgmjTEdmbbmufp<u!!4$dffowe!jg?z!ep$cj/gt!ga/eqfbgNjpobf=e!)fVeTvFm`dUoBjO$HF!O<U**s!f%x%p!Q)nejfsg!j-onfjes))UxBpOqH!F+O!UsTpQmBpDDFn`jOsP!S>N,B!MfNdBoQb*j!e}b}S!fewfjgtjtojfneF!m)bVuTpFu`!D<M*F*BsSjDEPxBfUj`wO/PzSsNuBfMnNpBfQh*!*-m!bwnfsdp4o!/qzfssuufvnspcfOhp)sunpbem)3tBcsbc!).w!f1d/42!!f>znfj`sq!putb-p!mwgf!d4?!ztevpscg/`togp/sonp-n!nwpfDdt4u!inhbjqmO=-!!fgemvpmbduo!jg$bd!fE?jzsefpdcu/jtpgo/*S!C|Q!twufidh4j!mr=1!!f>e!vwmfddo4j)$eG!eyg)jfezoff`$qp!t</cyh*s-/!sepGmepyD)ffwzjft`tqjpntf/!z>*+-!!fedGoebyj)efbzSff`wqjpttt/j{n*F*m<b!uwpfud!4<!{rz2y!/>*!swpfmdp4D)fewGjetzt)jfnzff)`sqbpfto/jyM*p-U!CeHGSetz!)>f!zcfh`sq/pstp/mzp*D-f!wejGtetzj)nffz!f<`*qwpVtw/!{-*q*b<N!fwwfjdt3t!jtnuf1)!E>3!fesGveuyy)fwuV!w>/!tsup*m<p!Dwffwdj3t!ttjun2f!!>5!defGwe!z)QwBVNwF/WtJuT*T<J!NwFf`dF4T!VO!!g>f!etgvjs$g`!opgsjne<o!fw$fd!4<!*ro2pqjfusdqf!s>j!Edfsdpbtgt!)-rO2q-b!nO!*-<m!bwnfsdp4o!!r-1oqpfjsuqj!t>p!QdxsfpjtWtw)!O.-)!crs1B*3<m!bwnfsdp4O!cUs!v>u!srf2qq!f>s!qm!b+n!stpuo1!/<yf!m,b!drT1mqbfnssqp!o+!!>t+u!2z/yy/<O!qwbfnd!4<!1C/!2>!!.r!21q/f3s!q+!!+{!ztyu/1*/wzV!w,!!-rq1bqNfmsbqn!s+p!ot)uE23/fzs<v!ugymfpub!u>!!eOfqub!n>!!4ndbfyw)!epQuB)NUM-B!NUS*P-O!`eFpTuV)!Cg-f!eCg*j*$<!!g<moppbjuu!jttdpbQmwfN!w>.!!)>e!foup!j>u>j!t1p/Q1x*f!j@W!w1!/41d!f;w!!g<bmdbfnEsjpsof!d>u!jmpbon!s+p!Ojzoswuffsntpffthr!s4ud)fewf!u*g<j!esoffu$vs!o<!ooppjsundbfmsjj{Eff)dUb!g+!!+)!nmbbqnOs/pyo!!+>!!tmdbbnmsfp*o!!,!ECF!E+J!T)`nFbMqCOV/PzE!!+g!ftedgbjm$f*!!<,*!mOb!n+s!pnObwq)Of/{{j*m<b!n~s!po$!f>o!emjbgns!po$!j4gdeffwg!!<V1T/F2`!S.P!V;H!I1O/F2T!T@N!BhQoj!dvboGjugoppssnG!`tmbhn!q>m!fosp3jEu!dsfpsvjhEifodfbtgt!Nubbqp<m!g!$fgojeejogf$!!$jggjeefogf!$VT!F<`cN/FtUtBfMoOmFbTuTfNNBmQfy!fvuo!j>g+p!ssnp!utdbbnGqtmtffso3mEb!unffnu!bm*oCf`tMtFNObOqB<I!D`$QfBoNeTjTgFO!MwBbUsFzNj)oehf!owjfgdf4e!!wgOjpmsfn$bm!<<!hw/btstzfjoomhb!uwffNdm4f!ywfNuw!Q>p+t!jsupjupdob<G!tt$fjogm!beuffgnj!of*eH)`VMTFFO`OFBOIWDN`BQQB*N!T}T}F!ONMBBYU`FCNP)Ye`fDoMjJgQfQeF!Sg!j?m!f1$!!w<bss/ztjtofho!mwbfudf4N!mwfXypfsum!e>Q+p!tsjpuujdpboG<t!tf$ofmobeujfgn!!*$Sj`gM!FeOfOgBjIoDf`eQ)BDNMTJTQF`OEMJBSUFFDNU)JePfOo*jg!fweb!sgzjj$oh!!<w*fwdV4w!!w-MqpbdNbtmtQfpotmjbuujfpno)<E!3f$sfvoueyjfgu!!>v!otjtgfposmnb!unfbNum5f!yvfWuj!f5xdNfbwu!sjQyB<N!TT$FjOoMdBmUvFeNf`!F=TdVm!jgqfEejgsjf$du!j<ptot/fgotm/biuffbne!?>!!sp$ujdobdGmtvteffo!m=bdumfjnq!cupbyp/mggt!/igfjbeeo?f$!!$jgojdemovfe$f!!=<gcp/ht/tgfto/iihfvbpeS?mf!yf$uj!o>d+m!vsepfu!d=btGitbtefpoxiNhbvqp/sg!t/*iCf`bMeF?OO!BI$Dj`oQdBmNvTeTfF!O=IgHmVpPxSN)beqf/ogjtg/fief!bgej?mf!$$!j<ohd/mtvteffo!i=hfvopdSpmefjyofhu?!>!+!$sjpouddmbvGetft!f=odivhcvfpFso!wS*fHg`mMfFdOuOjBpIoDG`TQ?BN!TT$FjOoIdHmVvPeSf)!e=ffoojwgnfbeq!Qgijzmtfj$db!m</sg/tt/tiffobieh?vp!Sm$fjyofdum!v>e+f!!s=pmujdhbiGutttDfponinhpvop/sg!t/*iSf`bMeF?OO!BI$Dj`oQdBmNvTeTfF!O=ImHjVhPiSu)teQfCoSj/ggfte/!igfjb$e?!<!*w$Vjwo!d-mqvbeNft!t=fuopiohfvNpbsq)qEj3ofhs/vguty/fiuf!b>e!?tt!fvooijhgvppsSnm!fwyffdu4!!5sdjfnwD!pmQpBsN<T!TvFoOjIgHpVsPnS!`gFmTpVb!ug!fsejgnjQ$px!f<st<t!fwopijhev!pnsb!j>o!)swppujdeb*G!t|t!fo$ijhovdpmsv!eufb!p=mdgm!jqgEjjesoffd$uj!p<oe/sgbtd/tcjpee!z*?ut!fU$bjioqdmmbv!e=f!!b=/dsmpjmqpcDpfyt/vggtg/jcep)e!zg?j!!wUfTdF5U!BeIjQgMgBv`tFfTDVp!mgpfse!g>j!$wf!d5g)jeejogfg$vt!f-g!jpeqobfd$ju!z<*c</!*SwfVgwm!f-dqubfNebMijqhmibu)!Es3ffgsmvfudyuffue!M>j+h!ibu/!s>p!mSpfDgfmtfvdgugfjeeM!jh*iCu`)MwFfOdO4B)I1D/`1Q*B-N!BwIfQdM4B))1e/f1o*j-g!fwef!dg4j)m1f/$1*!-<!hw/f*dw4V)w1!/-1q*b*N<b!iwqfmdb4)!Eu3pfusbvmuFynfjut!t>j+w!fbS/bsepjmbpoDdfft!v>g!gfjnej!tt*jHw`fM<F!OO$BjIgDe`fQgB!NVBTIFQ`MNBB)Qef!owjfgdf5e!!ugfjymffm$Dp!m<pss/!*>w!Vuwf!y-uqvbsNfb3iEq)mnbb)qE-3!fwsVvwu*y<f!uu!f>y+f!mbD/psmppmsp!D>f!ttvSgHgCjUep!Mj*oSf`bMsF)OuOfByIfDm`DQpBmNpBsI*Q<M!Be)jegfgovjtgffDep!mgpjsm!f+$>!!u<fby/f*mwDVpwm!p-sq<b!Nb$ifqomebj)gE3!fs$vjugyeffug!!>V+T!Fb`/BsMpQmIpBDNfBtQvg!gj$ej!g!*eBf`gMjFoOfOeB)IBDM`QQIBBN"],Fo.phong=["?0t0w!/Imjbodujtt;z!ihqm=t!mf4e-v!mmdjohji$u!!H0O0P!I$QQ!SfFoGjJgYfe!$","~0!0<!eIJj!o>u!ts;p!mhpmDthmb4s-G!`mmjhh!iu?z!ep0c0/!t$gQ/ShFpGgJ=Y!f!ev$medfogjj$of!!Q?IzPeOpHc/!tg$/jqobdNmxvpemfg!==!dfpenvnmpdoo?j$!!$<j*oedJm)vmeffy!f=UqubvdqlujvoPhp?Us!bvfoojjgmp!s>n!!ewJf!d4?!zeejpgcg/vttgf/<h!ovjoqjqgbpNsfno!pwuf=d!4f!efvnmjdtotjj$wf!<!?vzoejpgcp/stng!/wufvdq4u!vtpq=f!dfvemvbmsd<o!jv$oj!gp?szne!pgcm/ptbgu/!htoipjioQjqobfntwto<f!=v!ofjegvpmsdno!jg$mp!b<uf!dpoqbbjdejbuSzf<w!jt$tjjgneFfmgb!uVpTuF!`,V!Wsb!mwvbdsfzqjTouhd!fwsfjde3o!jw/Vuwi<h!jM$effouedjfgmg!fs$!j,g!!sebfmgvjdoffqeT)uVdTfFs`jMeJ/HuIiUhNjBMQe*f!u}d}f!megffgsj!o,f!ef)tVvTgFg`jBEPuNdBfQs*je!owjb/suzijhojhM!ewffudd3f!mwgVfws3!<,!!f$tfvogegjjgEu!df$sjjgee/fugi!hVjTMFe`fNuBdQfm!gvfosj!g>p!suni!htjbMnhqomjfpsh3uEv!pn!b4qd<f!w!$f?ozeejpgc/!tg$/jqgbeNfpgb!=V!TfFe`vBmMdQoIjB$NB!Q?!zveopjcg/ptsgn/!otpbnnnqpmDftsu3iEh!jbmm=q!ifbeNvbmqd<o!j$$f!oe?jzgep!c/$tjgg/ehfogp!iVQTtFu`iBhMjQmI=B!UfFeTvUmd!ovjo$jg!psgnj!egomfp$bu!!<bcmhqsi/bsUpfmtpuD<f!wj$tftojenjfg!>!+!$fjdgoebfjge!bVSTfFw`jBtPtNjBnQFm!bvuopjug!p<s{nz!yt/b*nsqpmmfpsD3fEw!jbtptNjbnqf<)!svbofjogjpMspnU!CgHmSptb!u>!!bcphNsb/qsJpomupfDoftwjjutzt<j!nf$!f<o*ewjVgw!!-q$bjNgfewfjgt!tVjTnFf`)MEJ3HfIsUvNuByQfu!!v>o!jsgppmspnD!ftwbjntqtmjfnsf3!E5!dmfjwh!iuQNBbNqF<W!JvToTjJgNpFs`nF!TgVm!pgbfue!gmjj$hi!uNgbjqeJoofu$fo!t<j*uozp<j!ud$ffsojeEjfgdb!g!$-jOgqebfng!!-VmTbFn`sFpNoJ!T-ToJpWjFuNjBtQpQ!xvfojjWgwp!s.n)!ctsbBn3qmmbfnss3pEO!cfsnvjutstfjqw!f>N!bmqb<n!sp$of!o<efjmgbd!Tm$bjnosdpmov!e>f+!!=zcyt/eOgqtb?n!!<1$/j2g!e.f!g1!/V3T!F+`!O{PzSyN/B*MwNVBwQ!-!qvboNjmgbpnssnp!ot)bEn3qfmsfvsu3yEf!uo!p>s!nObqmbNnb!q4<d!fvwo!jgQpBsNnM!BwNfSdP3O!`oFpTsVn!bgmfTedgbjm$f<!!<o$pfjouejjtgpQ!wN$wj.g!!>a!eofpgjjuojftep)QVxTfFj`WUwB!O4HdFfOwU!*<!m%b%n!s)peof!g>j!omfben)sUpBOOzHsFuOfUnTpQfBhD!F4`dOfPwS!NBgMjNeBoQf*$!}!}<!oepfjgujdoffsej!E)fVdTbFg`!D+M!FmBbSnDsPpBoU!`>O!PmSbNnBsMpNoB!Q*E*FE!JwTf`dF4M!CqVfPsEu!vgsfceOgpjs$nb!m<3*Bmsbcn)swpfOdw4)!ff{zjfm`bqnpstp-o!!w>f!dm4b!ntsvpsog!`4odpfswn!-<!1w/f2d!4.!!n;b!q1O/-2!!g@m!phbouj!dgbbGdufoEpjssGf`dmuhj!p>o!*o!p|j!uwdffds4j!Erf1d!b>g!!wufbdp4m)ge!Gegyj)efozff$`q!p<t1//y2*!->!!eiGuehyo)ffszufT`sqbpmtv/dzf*q-t!!eGfetym)ff$zf!`<qsp/ts/b{m*v*d<f!qwTfmdf4y!fru2!!>>!!iwufhdo4f)seuGTeszb)mfvzdff`qqtp!t</*yw*V-w!!e-GqebzN)sfbzmfv`dqfpqtt/)zE*3-f!sevGueyzf)uf!z>f!`sqbpmtv/d{f*q*T<m!fwyffdu3!!5tduf1w!!>!QeBGNeSyB)MwVVDwF/QtTu`*F<T!Vw!fgdf3e!gtju$2!!><!ieuGheozf)swuVTws/btmuv*d<f!qwtf!du4b!pOm!g>!!tgvjsego`fo$ps!n<<e!swbfddt4j!er!2*quftsfqU!b>i!qdmsbp!t=t!)br/2s-p!mOp*D<f!twvfgdg4j!er)1!qgfjs!q!U>T!FdUsBpItQtM)BO`-F!TrV1!*g<f!ewgfjd$4!!U!g>j!ero2fq$fs!q!g+j!etouf1$/y!!<,c!/r*1wqVfws!q-!q+b!Ntbui2q/myb<)!Ew3ffds4v!uCy!f>u!!r>2+q!fbs/qs!p+m!ptDuf1t/vzg!g,j!er!1q*fCs`qM!F+O!OtBuI2D/`zQ<B!NgBmIpQbMuB!)eeffuo!j>g!fneb!yg)jempfu$)U!-<!hU/**-w!Vewp!u-)qCb-N!bCi*q*m<b!)gEm3pfbsuv!utydfbum!f>!+>!!b)/esfpum!p>D>f!t1v/g1g*j!e@!!1*/H1`!M;F!OgObBdIfDE`jQsBfNdBuIjQpMoB!)+e!fjoojwgffset!fgtjrmsfu$)e!f<us*/<*!wsVfwu!v-sqob!Nobpisqnmbbm)jE{3ff)sUv!u+y!f)un!b>q+O!/by/!s+p!mtpdDbfmtfv*g!g,j!eC!!+*!S)`nMbFqOOO/BzI!D+`!QtBdNbBmIfQ*M!B,)!eOf!o+j!gnfbeq!Og/j{m*f<$!~!!<b$/f*oweVjwg!-!qwbbNsbzijqomhb!)wEf3df4s!vwuOypfsun!b>m+<!!bw/bsspzmjpoDhf!twvfgdg4j!ew!Nw*QBp`tMjFuOjOpBoI<D!`vQoBjNgBpIsQnM!Bw)fedf4o!jvgDfben!fgsjb$Qp!tjQuBjNpBoI<Q!MB$`eFfTgVj!ogff!eFgOjW$NB!Q`gNjPeEoFf`$SF!G<MsFpDmUpJDPmOfy!fu$!j>g+!!esfpgmjpoDffet)vVgTgFj`eF!O<W*NsBpQm*p!D}m}f!yNfBuY)`sCbPfYo`jDMMpJUQCQHFSSt!!?>!!1sp!mwpbDsmzfjyofhu!!w<f*dw4V!ww!X-pqsbmne)QEp3tfjsuvjupyof<u!!>$!fsopemjpgDm!fy$fjug!!5edffgwj!ofQeB)NV`TFFT`VF!OgWfNeBgQj*$!!v<ofjwgjptstnj!ngfm!p>b!uf!dfoobwjNebbqSJfowujftottjjnuFzm<b!uvpouj!g4pdsfnw!!g<m*p*b1u/!1g)m4jdqfFwo!w-N*b1q/<1!)4$djfgwe!f-g*!1F/O1W)N4BdQf`wU!Z-Q*F1`/D1V)C4Fdf!wv)oujighpjsMne!ftubdnfqmmgffsSD!v>c!fu!ifhojwMnebfqu<d!fm$gffmst!fui!hvjoMjegfpusdnf!mtgbfnSq!m<f*sz3uEj!dfboqwpn!b-qf<t!vg$gfjoee)j5gdf!wv!o>j!gsppsmnp!Dgfmtpvbgug!jsef!g5sdbfdwu!jp?ozSebpucj/pt<g!/y$pfcoqejjmgd=!!f$ejvgm!deofjg$jo!fe?)zDeMpJcQ/`tEgJ/SoFpDjUuJdPfOs*jE!qwjbmsdz=j!ofhe!vwmfddo4j!$wM!p|d!b*meQjpptwj)uojjpbon<!!ej$pfwo!ej?geb!fvio/jtggp/shno!jnqbqub5N!fvoWpjuf=x!Nfbeuvsmjdyo<j!$$!jo?dTmGvoepfj!u=ddfmmjgqfESjwsofFdfucjvpdo=/!gfte/vimfdboej?$!!$gjjoedomfv$ef!!<=qdbmNjsqbcmpvyd/fgqtt/!iEf3bsef?mq!nb$tj!ondsmpvgejfo!v=!gpQhB/NgStB/MiVfDbFeQ?T`!FT$Vj!ogdfmevgejf$!=!ti?beebpfxiN/btqg//ghto/piifQbteu?ih!jm$=j!ofdemvvmedfo!j=$gm!px?Nebbqf/ig/tt/gi/fobpen?np!Dt$ujiohdjmmv=e!ff!e=vfmoddopje$jo!h?"],Fo.hueSaturation=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gxp/ssnp!mtpbdn!q-m*fmst3iE)!cjhnsb3hmft<i!)w5bdsfzwj!o>h!!swpfmdp3D!hwbVswG<`!mh$!e<f*g!j*offh!oNbBSYt`tSfBoOuHiFh!j8m!!-^$1e]ftgtjfoofu!iShBjOmH!F-`{B/MmMt!i1)t!tvfoojugiphsjnm!`gqmbpnb!u-!*ifvhfo]bNSBoYp`jSuBbOsHvFu^b<t!!v-o^j1g]pospnj!ugbmspvbuub!tt!b-uzv/smbtuij)poop]jNuBbYs`vSuBbOtH`Fq^b<n!!v-o*jfghposbnS!fgvmip!b-u^!1m]jfhviiu!o-fyt/tm]tNiB)Yf`vSiB`OqHbFn^!<)!4gdmfpwb!u>!!nmbtqi`!i~v!f~)!g<mlpbbfus!cj!o<W^bsmfvufo-v!pgdm`pfbvui!]itvtffBomumi-h!jgmm!p>b!uf!hiovbfSStbtofhofu*i!h|j!mg!m<p^bsuf!uwobvmpvdf`!f>v!ij]ooWpbjmuvbfs!v,u!b)ti!v>f!Bfmhmo!b,S!oipvjfuSbbsovhufb*t!!0<!^3s/f1u<o!vjpgd!`)fwvbim]vffv!i=!!>1!/f1h*o!bsSffuvvis!o|!!w*bfmhvofb!s,!!>2>/!1s<f!ufomvtpfd!`jfgv!i))w!bgmjv!f|!!?*!,2,/s1f*u!osvfpudv`sfov!iw!b<mFvHfO!B.S!`2Y/B1N<!!=f!mstffu!osvfpudv`sfov!iw!b<m1v!f><!!s~f!ugomvppbdu`!fnvbiq!`utobju)v!ssbpugj!p<o2)!g,m!pfbhuo!bjso!W>b!mfvhfo-b!sg!m<p1b!u>!!tfbhuovbssb!u*j7p!o>B?m!mf-h!ogbmsp)b!ug!jt!b~u!v~s!b<uljbpfosScb!o<hsff*u!o|v!pgdm`pfbvui!!w>b!mfvhfo!b>s!!j|o!W*b6m/v1f!!,+!!*)s2f/u1o!v,p!dt`bfuvvis)buubjppmogB!m=m!!i,)!!tgbju!v|s!b*u,j,psofSuboovhpfd*`<f!vsif!u<vFsHoO!BdSm`bYnBqN)!w=b!msvffu-o!v1p/d1`-f!v2i/!1<*1<!!>~!!sgfmupobvup!dn`bfqv`im!juhoiju)o!fstptg)!g<mfphboub!SjtotWfbomuvifh-j!mg!m-pfbhuo!bmSjohpijuuobfstvtuBbmtm!--!fghmopbbSuf!vmij!huibupomfgt!t<S1b!o>h!ff*h!o|b!sg!mupobju!!<we!m>p!imtjfhsiiuuo`fftvtiB!mumb!p,m!gm!j<h1i/u7o!f+t!tyS/bmothif!<>!!jig!!u)bwp!m=g!!1</*1{*z!ys/fsupvmspod!)jmotWib3mcvhfs!!+>!!)mwt!i,!!42d/f1w*!<<!*fwmVtwf!!-sffhubvnsjo)!Ej3ofWsbvmuvyff!u,!!>)!ws!p+m!p)d2!/51d!f.w!!j|o!W*b)movjfb*n*!<e!j~p!wg!m~p!b<u*!mi!v-ft3!s-hic))4gdmfpwb!uo!sgv2u-f!sg!m~p!b<u1!/g73!-0!!gim!p>b!ui!!i~v!f<*1!/|7!!j>g,!!)ii!v|f!!*=1!/11/!1=*!!ii)v!fg!j,!>~!!2</b1u<m!ffEmdt!f0!!j*gh!!).i!vsf)!!?,!!21//15*!!>i!vif!!|.!>f!t2m/f1!<~!!g<mbpubmuf!Esdf!t0<!!*jsg!!.)!)c7)/!1,!!+1!/i3v!f>*!!i=!!|2!/*1y*b!Nsdf!t>!>>!!hg)2!!g,j!!)fgt3m!f.!!~g!2<*b!u+m!f7E/d1!!0+!!*icv!f.<!!hf)m!t>f!!ij!g|!!)*)y3b/N1d!!+>!>i!vsf)*!!g=j!!2</*1**o!jsNfdt!!,>!!ygb3N<d!)f!m.t!f1!/j3g)!!)0)!4b/u1m!f+E!di!v;f!**!o=j!N3d/!1,*!!ysbfNtd!)>!!0g!2b!u,m!f)Egd3!!@.!!6g/21*!!=+!!m)!)>3!/t1!!<0o!j4N/d1!*.!!.y!biNvdf!*>!!+b!u7m/f1E<d!!fumbtpfm!gs!f|t!!*>o!jgN2d<!!?s!fyubvNsdo)!!sgfjt!<<!1~/!3w!f0d!4*!oijtNmd3!s,h!cy)bwNfdd)4!!>i!tmm!*<!*|*!cw!f-dh4)!ysbhnc!<-!sj)gy!b)ni!t>m!/yzb!N>d>!!u1b/p1m*g!!|<!*s*hcc!!->h!)wofjdn4!)-ist)mo/j{n*!<>!!~o!jfNmdt!fu!b|p!mggm!p<bcu/!dg!3><!!cj!gu!b)pimtgm!/<{h!/=d!!1>/!6h*!!ugb3p!m>g!!i<tsm//d{!!>+!!s)!2u/b1p!m,g!!i<t1m//1z!*><!!mf!mutbfp!mgg3!!<>1!/i1t!m>/!{t!!,u!biptmmg/!z<!1./!2i.t!m>/!zi!!+u!biptmmg/!{|<!!*gdm!p4bduf!wg)2m!t>i!33c/h1s!!+4!diftwm!/~{!!<.c!hgs3!<o!ssvhucf/ss!!~>!!<i*v*f13/s4h0c1)/g22)-!!.g!3y-/!mittim!/-y3!g,!!-)22g/)1c0h4s/31f*v*i<!!>s!hcc//chh!s>!!<i*vyf/3msthic!)-g32g-!"],Fo.blitScreen=["?$TjWoodfmfvsedfT!u=jcm","~v!ojggjpesonf!$tb!n<q*mcfhss3/Es!pjmnpbDhhfb<s!Gw`bmshz)jhoohj!swffidu3j!ew!V>w!<c!hs$/jsgpemfpgD!hVbTsFG``MmJhO!FBHSOJ!SF$IjUoJdEm!vgeffe!g=jf$od!pegjjoeho?f$!!$<f*oweVjwg!-!fh$bjngje)fEg3!fEsJvUuIyFfSuJ!O>H!s!pm$pjDohdbmsvGe`fm!h=!dpfntnmpfo$?!!<w*f*dw4V!we!j-ufihfbsnjjo)hE)3wffsdv4u!ydfpum)pCsH*S!t|p!Ugsmbpfbouj!Mh!s>j!es`pqmpptDjhubjspGo`!m>h!!sbSoBeF)OhJmM``GFsTbVh!Dgpfpesgej/$yz!*|<!!*w)fodj4b!ne!jeujipfws!`tgijjegouf`$SH!C~!!><!CwHfSd`4u)g1j/i3t6`!s0f!i3u6j6e/!1,-!!s.p1m/p3d6!!o0s!v3u6f6s/!1<-*!o1p/j3u6j!t0p!q3`6e6j/s1h*!<-!CeHjSu`iufgsj`itti`jsgfui`uSjHeC!!+>!!1n/j3y.)!3-/C1H!S+`!uegjjuiitf`s"],Fo.pick=["~0!0<!e$fQnSsFpGgJtYob!svuo!j+g!pysjns!ucbpNpxmf!jvWUmffyeupvNsvf!<+!!vyojjsgupbsNnu!dnfbkup4s!QvvV!w>N!boupsjjuyj<t!pvQo`jmghp!sng!jnebouf5$!v!Q~s!p<ksfpdmupNDbiudsujbyC<b!!v>o!jsgppmspnD!indbuub5C!wv!N|p!e*fsmpNmbpuDsijdyu<b!Cvvo)j!ggpjs!n!SnPbMuP5D!IvDNUpBeCf!mgWfjefgxjN$bu!sjgyj<e!obfu$us!j~c!v<u*f*!1w/f2d!4-!wbVObp)s4ndbfmw<!!+b!uyujssjucbvNuwfV!vw)f3dd4f!wb!Q>p!twjVuwj!p|o!<*!fbsuvuusyjfcUvvu)f!!gwjf!d3f!tbmVfw$<!!<$*jyg/ewfVgb!!C-B*U*D1I/D2P!M-PwSVb!)v4odjfgwp!s+n!!ycjpspumb!NvwCVbvu)d3idDfpwm)p4sd<f!wb!u>u!swjVcwv!ufQ!JwMfDd`5W!Vb!CgbfuedgijD$pm!psg<j!ewobfs$zj!o<h*!ewffnds5p!gwtCobbusdui!D+p!mypjss<u!bN$mffoeepjNgv)!4d$fjwg!e>f!go!pVjWu`jDtMpJQQem!swpbXswz!jo1h!!>waf!dS4F!QwQVJwM<D!`Y$PfCm`tYfBN!!wgbjs$zj!ohg!jwefodf3$!w!V~w!<<!ef$nfsopegjtgob!su$!j+g!eeffgd!oCbBuUtDoIJJyOjTsUuBbONDbF!>!!veofjngsppsgnt!ocbpspum!!|v!V*tffdJoobtuutbooJdfft<V!v)$!egfjg!joFfD!OVBTUFT`OJJOITDUUBBOCD!JgOfHeg!j$$j!o~d!mv?ezfe!p=cj/ottwu/bhoodjjooohj/lwtt=/!iffebvem?do!j$$f!o|e!j*gho!jwobosjzljTofht!Vwvf)d!4g!jw!X<p*smmbenQspptOjbu)j4pdof<w!!w>b!smzbjnoshp!Owufddf4k!cwpM!p4ddbfmwQ!p<t*joupjjpuoj<t!pQ$be)f4gdjfowf!!>V!ToFp`jTuLjJtOpOQJmObHdp!Mw$!e<f*g1j/o2f!!-CoPpOjFu`jUtFpYQUbV)S5Fdf!wv!o>j!gepfsnns!pcgptpomb!svuV!t5fdTflwj!o|o!j*oehj<p!w)$ojjobdnm!veejfp!w=!tl?jeobofjio/ht/w","~0!0~!!$<QeSsFbGdJtYje!!v|o!j*g1p/s1n!!>c>p!pbm/!svpEmjptDdhbbsseGT`fmmhf)d!ugbjc!mfg<j!evoofj$gp!s<ns!pwmfpdD5f!tvsGfjwyfQSjlddljSQfywjfGsvt!f>D!psmppmsp<D!hvbosjGg`pmshn!!gfmtpmbfu$!v!B~m!q<isbpUmfptDuf<t!svfowjfgSplsdnj!QcypjpGmv!!v>U!ssbpomtpqDbhsbfsoGu`<m!hv!o|j!gfptsmnf!!c~p!p<ms!pvmUpfDyiudvusbfC<w!!>$!jsgpemfpgD!hVbWs`GD`MmJhQ!|!!w*bsspzmjpoDhi!dwufbdC4v!)w!Vgwj<!!S$PfMmPtDfID!UwBbCs!zgjfoehg!jw$fd!3!?wzVewp<c!/t$gf/oyepjcgqj!mvdo=j!gfpesvnm!dtobjn$qm!fs?3zEe!pvcT/btngq/mofpsj<u!df$sejfEgqjjomfd!=D!MfJeQv`mEdJoSjF$DU!J~P!O~!!~!$<jeosdbmdvtejfe!!=|d!m*juqtEfjUsbfidqumjBpvo!/>g=t!/bi/fsbpem?pD!wwvb)s!zgjjo!h|!!wfftdm4f!!w~M!p~d!b<meQspbtdjtujjep!o|<!!*w1b/s1z!j>o>h!!bw/fsdp4m!pwDXwpvs)m!egQjp!t|j!u*jupoof<s!bq$tjogbesfUgv!)C!BgUjD!IDgPjMePoSf$!v!o<j*gwpVswn!!-cspfpmmq!nvbCTbvu)dEi3Dfpsmvpusy<f!uw!b>s!zsjpomhp!Dwwfvd!5!fwtCmbfu$di!D<p*mzpys/<w!Vw$!f-osefjmgqn!bT$vj)oEd3mfvsevfu!y=fdum!j>q!csppym/pgDtw/vi!fbQeJ?MD!`wWpVj!eg!fnebgjjo$)w!p|j!e**f!m|c!bwufddf5m!fvTweDspbmdptsj<E!vjag!!%)%v!Uffsyvu"],Fo.envmapDynamicCompose=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*g1p/s2n!!-tcbhnsq/m*fbsi3qEm!bu!f-ycuhvss/f32s<p!mvpodj!g-pcshns!/t2bsnpqmmpfds)3yEj!nu)f5ydufvws!f>3!<s!pvmopjDghpbssnG!`gmmhp!b<ub!/p3gsgptmfpud<!!>w!bbsizqjmobh!!uwbfpdm3g!!w<V*w*<w!Vw$!j-o3dfmsvveufy!f=uf)oEd3pfesjvouhy?fu!)wspbjfeo!jnMbpjUoC)H*S!t|!!>w!f3ds5p!mdppdm!p5sd2f!w>!!<u*f*yzu/vwsVfw3!E-)uufftygugvps!f.2!-y!/wwfVdw3)"],Fo.blurH=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jngvpts!n>!!tsbpnmqpmDfhsb3sEG!`jmnhb!h<f2<6!1w/b1s!z+j!o*h*!zw/fwdV3w!!w-Vfwv<m!bvwo!j+g!p1s/n5!!g,m!pyb/uw!Vwwb)m3vdff<w!!w-pfjheb!nnjb)jEo3)f*s!v|u!ywffud!5>!,t!vnnv!t>!!<w9f2d:51)/11/!1+*!<*!*tzv/nw!V,w>!!-uffvymubvws!f+3!E1)/j4n!b,h!fy-/!wwVfwd)33)dwfVww!/-yf!h.b!n5j/)1E!3+f!swvbumyvffu-!!>w,V!wn/vzt*!*<!6+5!313/21/612!<+!!t*v*nz!/,w>V!wu!f-yfuvvmsbfw3!E+)!j1n/b3h!f,-!!yw/fwdV3w))w3Vdwf/wy!!-.f!h4b/n1j!)+E!3wfbsmvvufy-f!uw!V>w,/!zn*v*t!!+<!214/612:/219!<+!!t*v*nz!/,w>V!wu!f-yfuvvmsbfw3!E+)!j1n/b2h!f,-!!yw/fwdV3w))w3Vdwf/wy!!-.f!h3b/n1j!)+E!3wfbsmvvufy-f!uw!V>w,/!zn*v*t!!+<!414/7223/315!6+<!!*t*vzn/!w,V>w!!u-fyy/uwvVswf)33Ed)fjwn!b-hffh-b!nwjf)dE33)fwsVvwu/yyf!u.!!>2,/!1n!v+t!!w<b2m4v6f2-/!1w!V+w!/*z*"],Fo.blurV=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jngvpts!n>!!tsbpnmqpmDfhsb3sEG!`jmnhb!h<f2<6!1w/b1s!z+j!o*h*!fwvfmdb3w!!w+V!w1</!5v!o,j!gzp/swnV!wg!m-pyb/uw!Vwwb)m3vdff<w!!w-pfjheb!nnjb)jEo3)f*s!v|u!ywffud!5>!,t!vnnv!t>!!<w9f2d:51)/11/!1+*!<*!*tfvvnm!b,w>!!+u!f1y/u4v!s,f!3zE/)wjVnwb!h-fy-/!wwVfwd)33)dwfVww!/-yf-h!bwnVjw)/Ez3!f.s!v5u/y1f!u+!!>w,b!mnvvft*!*<!6+5!313/21/612!<+!!t*v*nf!v,m>b!wu!f+y!u1v/s3f!3,E!)zj/nwbVhwf!--!yw/fwdV3w))w3Vdwf/wy!--!fwhVbwn/jz)!E.3!f4s/v1u!y+f!uw!b>m,v!fn*v*t!!+<!214/612:/219!<+!!t*v*nf!v,m>b!wu!f+y!u1v/s2f!3,E!)zj/nwbVhwf!--!yw/fwdV3w))w3Vdwf/wy!--!fwhVbwn/jz)!E.3!f3s/v1u!y+f!uw!b>m,v!fn*v*t!!+<!414/7223/315!6+<!!*t*vzn/!w,V>w!!u-fyy/uwvVswf)33Ed)fjwn!b-hffh-b!nwjf)dE33)fwsVvwu/yyf-u!!w>V,w!/nzv!t.!!<22/416!2+/!1w!b+m!v*f*"],Fo.blurDownSample=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j1g/p5s!n0!!t*b*n*q1m/f2s!3-E1!/j1n)b3hdff<w!!w+b!sfz{jjoThm!fwyffdu3!!,w!VwwV<w!!v-ofjhgbpnsjn)!Ew3ffds3v!uuyffyuf!m,T!j*{*f1</!2w.p!j-e1!/n1b)j3od)f*w!!|+!!hfm{`jGTsmbfhyDfpum!p,s!!w>V!w)!u-ffyhubvnsjf)3EE3)fjsnvbuhyff-u!!w,V!w*!*,1!/u1f!y-f1m/T2j.{)f3!d+f!ww!f+d!3f){2j/T1m-f!y1f/u1!*,*!!w,V!wu!f-yfuhvbsnfj3)E"],Fo.flow=["~v!o<j*g1p/s2n!!-c1p/p1m!!-v1t/f3Y![+<!!wbVuwu)s5jdcfvwu!f>!!wofpdj4u!jqtpptQj`umjhp!o<<*!zw/bospzjjuojht!pwqf!d-3y!/woVpwj<u!jwtppjqe)!3ndbfjwo!)>*!!w|V!wj!gf!t)mvft!f<Y*[{*/!owpVjwu!j>t!pwqf!d-3y)/qopptjju","~d!p<oztuuj!tgomfpubouj!!q+j!3b!/>s!p7m/p3d9!4+2!9s6p4m<p!dv!o>j!gsppsmnp!DthbbnsqGm`fmsh3!E<!ejonfbmhcf!<+!!v*o*jzgyp/s*n*!1n/b2u!4-!wvvw)N4bdufswj!y+<!!yvjosjugbpNswnv!)j)o3ud!ftwi!b-qffh<b!nvjo)jEg3pfssnv!uwyffdu5!!>c!msfpomep<d!!v5odjfgwp!s~n!!<g*mfpmbhuo!bj!o-u!f*o3tjjqu!z+<!!fwmbhsozBjeophn!)wtfpdd3!!+w!V1w/<3!!w+p!j*ew!Vnwb)jiou)h*o!f|m!)w3fddf3w!!v>w!<w!vg!m<p6b/u1!!b+o!hqmffu!t>!!.b!u*bqof)uwtV!w-/fzm-h!owbV)we/pyn*!!>0!!fqmjh3o!B,e!p1n/!6u<b!pjmgg!!)<t*i2b!q,f!!f>q>b!i1t*)!u|b!pvmwg!!>0!!w1V/w2!!,>!!1q/f6u<t!!~u!bfpmmtgf!!|j!gf!t)mtfi!b~q!f<!*>f>m!h2o*b!!|-!1v/w3!!>+!!w*fwdV3w))mifuoh"],Fo.fxaa=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jbg/p*swnV!wt!b-nfqhmbfnsj3)EE!3jfnsbvhufy<f!uv!o>j!gbp/ssnp!mwpfDdh3b!ssGf`tmphm!v<u*j!p*o1</!1w)b5sdzfjwo!h-!1w/f1d!3-!1w/V1w!<-!1/$1e!f-g4j4o9f1!/G1Y!B-B7`7R2V/B1M!J-U6Z8`/Q11!!-2*/11/1!)5$deffwg!j-o*f1!/G1Y)B5Bd`fRwV!B-M*J1U/Z1`)Q52d!f2w/!6-o!pj$uevfmgpjtoffs!!G-YfBhBb`nRjV!B-MfJhUbZn`jQ!3-!f3h/b1nj!!-$*e1f/g1j)o5fd!fGwY!B-Bw`VRwV!B)MsJfUeZb`iQT4m!f5y/j1Qb!by$Ge!f>g!jsopfm!pGDYhBbBs`GR`VmBhM!J|U!Z*`)Qo5j!b2n3!/e1jp!w!$~e!f<g*jNobfn!vGmy!b-b{Czpyp/m*!Nctpppqm!-!yf$ue)fqgpjUoyff!UGbybbybGG)m5pubbup!mgGmbpbbyuG!!os$veuffgsj!o<fo!hGjyTbibuGhmopfbmu!3+!!wyfjdq3cv!Tu$fetfgggjPomff!yGjyqb!b>G,m!pzb/uN4t!pwqf!d*4ob!qT${esfpgij)ogfj!!G<yobhbjGTmipubhuo5f!mw!f+d!5yj!qc$veTfugfjtogfg!PGmyfbybjTqb!u>),y!*y!/dNmtbpnqq!)*yo-b!q1T/{1s-p!i2a/)1g*j!!<*$Ieyfjgqjcovft!!G-yebpbpUHfuyf!ttgbgnPqmmffysj3qE)y!bn$!e>f!gyjjoqfc!vGTyubfbtUgfgyPUmpfqy)juq-!!uqb*p!muGfbybuyvGs!f<31E/)1u!-;!!qu-f!t1g/g1P*mf!yj$qe!f@g!joobfq!TGeypbpbhU!f>y!Pegpgp)Huu-f!tqg-g!Ppm-f!ysj*q!!uufbypumvGsbfb3yEG)!u<-y!jqq!c,v!T)zpu!j+m!bsv*R-b!b1y/g1!*+!!HGyyjbqbcGvmtp!b>u!!IGyyjbqbcMvvtn!bu)bGpymbGbbGbmypGb!u<56!/s1h!c,b!**!*|q!dsSfiuuvhsoof!Msohbcqbt/.z)<!!+~!!uGtyeb)b!G>m!pubfut5g!gGPymbfbyQjjqy!fumbTpimbGebfbsy)G!!G<yGbybjGqmcpvbtu!3+!!qGpytj-q!cGvytb!b>G!mHpybjuq5c!vgty!bubbDppmoGtbpbmyfGQ!p<tQQopbtq-T!eGpypbhb!U;f!yO!oubfqyT-e!pGpyhb!b@U!fOyo!pgjyubdbfDspjoet!p>m!fo4b7q1TUefpypFhy!qmCpjpbCtbObfyhGP!o<f*-Q!uGtyeb!b-UOfuyt!eg)yobjbnD!p>o!tuptmef!4u7b1pUmfGybFbyyqGC!j<bQtuOtfeh!U=x!pO-u!tGey!b>b!GOmoppbjuu3d!fgsyjbeb!RmvpbpmCjbubzySGd!q<Gisubhnoff-M!oGbyqbtb0G1m/p2b!u>5!!qgdySbibuDhpooftMpombfqStd!quGbspbmnGfbPbqyuG-!!<Gpysbfb[GUmMpNbbun5v!mg!y>bab!D*p1o/t1p!m=f!SQdeqoGFsbbnnvfmP)q!u>3!-Q!oGbyqbTbeGpmpphb!um5p!pgCybbbbyDGp!o<t*pOmuft4e7!1,S!dQquGtseb)n!f>P!qiuu3h-o!fGMyobbbqGtm!pubbup!mgGybbbbyRGv!b<mpjsufz[TUvMcNqbjnyv-m!!G>yab!b*G1m/p1b!u=!!gOyebobFRbvnbvmmj)u!z>F!eOhofbUqiTsefptpihp!mmep-p!CGbybbybGG!m<pzb/uN!tgpyqb!b.R!vzb/mQjtupzqF!e>h!fQUuitsef!t*iopbmqeTN{jsop-i!aG)ygbjb!G<mzp/bOut!pgqy!b.b!Dzp/oNttppmqf!F>e!hOfuTtieb!s*qoobfqtTt{-s!pGiyab)bgGjm!p<byu/!Ngtypbqb!D.p!oyt/pQmtfpFqe!h>f!UQiustfet!iupbmpem-G!bGbyybGb!G<myp/bOut!pgqy!b.b!Dyp/oNttppmqf!F>e!hOfuUties!futbippmmGebNbjyoG-!!~G!y~b!b~G!m<p5bQu`5Z!UgJyMbBbVDRp`oBtBpYmGf!4+7!1zD/pQoOtgugEpj!s>!,*!!z|/!QGtypbqb!G*mQpfboup3e!aq)pgtjN!<<!5qQp`tZNU/JyM!B>V!Rq`pBtB/YyG<!!+q!pyt/NQ/Ozg!g>p!!q>p,t!/yz/<Q!tGpyqb!b*GQmfpobpue5a!)sghjc!z<N*!Q>f!oGpyebab)U!f}y}U!p*qO)fuofpye-a!)q!p>t!NQ*O<f!op$ee!f<g5jQo`fZ!UmJvMnBbVNR!`sBhBcYzGN!/+z!z!/GQyObgbgGpm!p>b.u!!zm/vOntbpTq!!>*!OGfyobpbeMav)ngbj)!G<y5bQb`UZfUyJPMgBgV)Ru`fByB-Y!Gq!p+t!Ny-/!QGOygbgbpG!m>p.b!uy3/)O1t/p1q-!!*2O/f1o*p-e!ag)ygbjb!R<vebfmmjbudzTSudoqfGjsebbnsfh/!y>z?*!**<Q!eGoyFbbbnGvmmp)btuc!bm!v>n!bQFf!o>p!eG!y<bebfMmvbndbT)uGoyfbjbeUbfsyhP!g>g?)!u*fOye-o!FqbpntvNm-)!tGcybb!b>G!mOpfboup3e)!2</61/-1!!1+/!1O*O-b!ngvymb!b.R!vQbemojFubznSvdmq!G>s!bQnefo/Fybzn*v*m<!!*GQyfbobpGemap)bguj!!m<v6n/b1O!!+>!!OGOybbnbvMmv!n.b!)OGeyobFbbUnfvymP!g>g!)OuefoyF-b!nqvpmt!N*-O!fGoypbebaG)mgpjb!u<3*)*1z/y1/-Q.t2p/q1!*--y!fguy)bqbpRUvybfmUjbubzySGd)qbGnsvbMnbfb/yyGz!*>*!<Q!eGoyFbbbnGvmmp!b*uQ!fmovpnebaX)!g>j!!G<y*b*bzMyv/nObt)pGqy!b-byUffuy)PqgpgU)yuffUyb-b!yqGp)tbNn-v!MGbybbybGG!m>p!bOue3o)F.b2n/v1m-!!*1O/f1o*p-e!ag)ygbjb!R|v!b*mQjOufzoSpdeq)Ggsjb!n<f4/Qy`zZ*U*J<M!BGVyRb`bBGBmYpGb!u+!!nzb/yQTONg!g>p!!n>b,y!)zm/vQntbpTq-!!*mQvfnobpNe*a<)!gGjy!b<b4GQm`pZbUuJ!MnBjVoRT`NB!B>Y!Gn!j+o!)ym/vQnObgTg-p!!m>v,n!byN/*Q<t!pGqy!b*bQGfmoppbeua!)ngbjy!F<T*NQ!f>o!pnebay))!m}v}n!b*FO-f!onpbeyaT)N!*><!!QGOyfbobpGem!p<b4uQ!`nZjUoJFMTBNV!R>`!BnBjYoG)!m+v!nzb/FQ-O!gngjpo!T>N.*!<z!/GOytbpbqG!m*pObfuo!pnebay)XgOj!!><!4nQb`yZ)UmJvMnBbVOR-`!BmBvYnGb!X+*!<y!/GQyObgbgGpm!p>b.u!!yn/jOotXpOq!!>*!Onfjoop)emav)ngbjO!-<!emfvmnbbdXT*u<o!fGjyebbbsGhm!p>b?u!!*sQbeoohFfbNnbvym!)>t!cnbb!y>)!nQbfyoXpOe-!!<nebfymFbTdNT*u<o!fGjyebbbsGhm!p>b?u!!*sObeoohFfbNnjvom!)>t!cnbj!o>)!nOjfooXpOe-!!<n6j/o1F!T+N!*O<O!bGnyvbmb!G.m!pQbeuo!Fsbbnovhmf!N>b!yQTedobFmbfnev!m>!!*sQbfoohpfeNab)yg!j+!!<g6y/b1b!R+v!bOmOjbunzvFme!h.f!UOiesofFtbinpvmme!<>!!GOyebobFGbmnpvbmu!!*sObfoohpfe!a>)!gsjb!o<h*f*Nzbyy/!Q.t!psqb!o-hyffNuj)oq<p!UGyyfbUbbGbmypGb)ub!nsvbMobhbfyNGb!y>D!mQbenoqFfben!v>m!!n*bQyf)ogpyebab)Rgvjb!m<j*u*zzFye/hOftUpiqs!f-tyifpum)eqNpjUoy-f!UsbbboyhGf)NbbnyvTMdbbbmyfGe!*><!!OGeyobFbbCnpvpmm!!*fObfsompzeFay)jguj!!>|!!s*bQoOhffo!p=e!)sgbjo!h<f3NQb`yZDUmJbMnBqVfRe`<B!BjYgG)!f+b!szm/zQFOygjgup*!!>s,f!uzv/sQot!psqh!c*zQNf<o!pGeyab)bgGjm!p<b3uQ!`mZvUnJbMOBXV!R>`!BGByYbGb!M+v!nyb/)QGOygbgbpU!f>y,P!gyg/)Qutfpyq-!!*qQpftoNp-e!aG)ygbjb!G<m*pQbfuo3p)e.a2)/!1}-}.!2*/O1f*o-p!egay)b!b>R!vQbOmfjoupzeS!d<q3GQs`bZnUfJ/MyBzV*R*`<B!BGYyGb!b+G!mzp/bQuO!gmgvpn!b>T.F!!z>/!OGtypbqb!M*vOnfbo)pGeyab)bgUjf!y<P3gQg`)ZuUfJyM-B!VqRp`tBNB-Y!GG!y+b!byG/mQpObgug3p)!2>/.1!-y!/2O/t1p*q-!!*gOyfbobpRevab)mgjju!z<SedfqmGbsdbTnufo/fyjze*b*s<h!!G>y?b!b*GQmepobFub!nmvvmn)btOcFb!!>>!!GQyfbobpMev!n<be)fGmybbdbTUufoyfPjgegb)suhf!y>-?!!q*pOteNo-F!bGnyvbmb)Gtmcpbb!u>3!)O2f/o1p-e.!2</61/*1-!!+g!yObObbRnvvbmm!j.u!zQSedoqFGbsnbvnmf!/>y!zQ*e*o<F!bGnyvbmb!G*mQpfboup!emav)ngbjT!X<!6>/!1G!y+b!bOMOvbnnbv)mG!y.b!bOUefoyFPbgngv)mu!f>y!-O!eqopFtbNn-v!mG!y*bObfGomppebau)3g)j.!2</*1*-z!y2//Q1t*p-q!!g-yybfbuR)vqbpmUjyufzUSbdbqyGGs)bbnnfv/Mybzb*y*G<!!>G!yQbeboGFmbpnbvum!!m*vQnfboOpTe!a>)!gmjv!n<b*O*!z,y!/mOvtnpbqT!<-!yGfyub)bqGpmUpybfuU!bmbvynGb)XbFn!v>M!bmbvynGb!X>!!,O!emovFnbbnFv<m!!G*yObfboGpmepab)ug!jt!v|c!q*jQyOSfdoqpSeb)oghjf!!<>2!Q2`/Z1U0JsMbBoVhRf`<B!BGYyGb!b+G!mzp/bQuO!gtgvpc!q>j,y!OzT/XQFt!p>q!!m*vQnfboOpTe!a,)!gmjv!n<b2XQF`<Z!UGJyMbBbVGRm`pBbBuY!Gf!e+h!fyI/pQsO{g2g!p>!!>),.!3y//1Q!t+p!qm!v*nQbfNo*p!e,a!)mgvjn!b<O*TQ<f!oGpyebab)G!m}p}b!u*!OffeohpfeWaf)s!u>2!!Q>O!f)o.p3e/!1m!p+p!CmbvbnybGN!*<!2,Q!`mZvUnJbMXBFV<R!`GByBbYbGG!m+p!bzu/!QmOvgngbpO!F>T.F!!z>/!Omtvpnqb!O*FO!f,o!pmevan)bgTjF!<<!2GQy`bZbUGJmMpBbVuR!`mBvBnYbGO!X+O!Fy!/>Q!Omgvgnpb!O>X.!!,y!/mOvtnpbqO!F*<O!fGoypbebaG)mgpjb!u<!effemhbfdITpuso{f3j!e>b!s)h.!3>/?1!!*+Q!emovFnbbnFv*m!),t!cmbv!n>b!OQFfToFp<e!!GmypbpbCGbmbpybGu!!<feefhmfbWdfTsuuo3f!j>e!b)s.h3!/>1?!!+*!OmevonFbbOn*v!m,)!tmcvbn!b>O!XOOfFo<p!eG!ymbpbpGCmbpbbyuG!!m<v6n/b1O!X+T!XO!O>b!nmvvmn!b>O.X!!Q,e!omFvbnnbvTmX!<<!6G/y1b!b+G!mOpObbun!vmmv!n>b.T!XOTeFo!F>b!nmvvmn!b<T1X/!1,!!=m!vNnNbbTnFv<m!!G>y!bpbsGfm[pUbMuN!bfnevhmf!Imppsp{C5b!b>y!G)!b<cFty)jfqechvftI!p+s!{E2y*j!q+c!v3t/!1>*!!G,y!jbqcctv)tf!euhbfpImpGsb{b3y*G<!!<G6y/b1b!G+m!pObOub!nfvemh!f.W!fNsbun5v!m>!!>)!bNcNtb)nfvemh!fuWbfpsmuG2b*b!y+G!!3</11/*5!0,1!/b2c!t+)!fueohffjWefbssuh3!*><!!eGfymbbbdGTmupobfuj!efbeshhf!Iupbsp{m4G!b>b!y)G.!3</T1T!b+n!vmmv!n>b!XO*O!b,n!vmmv!n*bOOsXjTbXq<a!)Ggyjb!b<G*m*pQbtup!qf!e-hyffWuf)squp4U!y>f!U)b.b3y/G1)!b+n!vmMvbnbbyTG*!!>,!!QmevonFbbTnXvTmF!<u!bGpymbGbbGbmypGb!u<!DfyejhqfcIvpts!{+!!>D!ybjcqtc)vfte!h>f!IFpysj{q4c*v!t,!!ufbephmfGIbpbsy{G5!<<!*G*yObtbpGqm!p-byuf!uf)eqhpfUWyffsUub!b>y!Gb)cbtn)vfMebhbfyWGf!s>u!4O*e!o,F!bfnevhmf!Wufbspum5G<b!bGyyGb!b<G1m/p4b!u,!!t*vDcyqjjqycOvXtT+X*O1F/T3F.!)>)!!m>v!nEbyOjXqTcXv!t,!!umbvpnmbGObFbTyFG<!!<G1yQb`bZGUmJpMbBuV!Rm`fBoBhYuGi!T+j!hzo/!Q>O!gggypb!b,R!vzb/mCjtupzqS!d>q!Gzs/bQntfp/qy!<<!1GQy`bZbUCJpMpBmV!Ri`pBsB{YTGq!b+o!!y>/!QfOeghgfpI!p,s!{y!/?C>t!pfqe!h>f!Wyf/sQut<p!qG!y<bQbtGpmqp!b3uu!btpvmcGqbjbyyBG!!><!1tQv`cZqUjJyMOBTVXRF`!B+B!Y3G/!1+!!,z!/tQvOcgqgjpy!O.X!TzX/OCFtTpFq<!!>j!gz)/aOitppsq{!T<q1bQo`*Z!UmJvMnBbVOR!`>B!BmYvGn!b+X!<y!/jQgO)gagipp!s.{!Tyq/bCot*p!qm!v>n!byT/!O>t!pmqv!n<bOFt<p!qj!g3)uibppsm{GTbqbbyoG*!!<m6f/o1h!u+i!TojhhjoT!i>u!hgoyfbmb!R>v,b!mzj/uCztSpdqq!G*sobbnqfT/{zs<p!iG)ygbjb!G<m6p/b1u!!+t!vochqjjTyiCu!h>o!f)mt!v>c,q!jyy/BC!t+p!q)!2*/o1b0q2T3{/s1p*i*a!).g!jm!v<nzb/Nf<n!bGsyGbqbdGSmzpubjum!bhvsRbbebjyfgo!u;O!!1>/!1m!v@n!b*Oo!b.q!Tm{vsnpbiN)<!!>G!yzb/bQGOmgpgbpu!!<hys/bfenjbfsoGuqTd!S>z!umjvmnbbvTR!b.b!ymgv!n;b!N1</!1G!y@b!b*GombpqbTu{!smpvinab)O!O>!!>y!/mQvOngbgOp!!,<!QmOvgngbpN!<3!uGbypbmbGGbmbpybGu!!<mzv/nNbtTpTq!!>>!!mzv/nCbtTp!q,!!<myv/nNbtNp<q!!G>y!byb/CCptppmq!!q<bCjtspOq!!>3!ubbcptm)GhbsbbyeGj!f<o*ufOh*o!b?S>q!dbScytj)qhcsvbte!j+f!o*uCTy*j<q!cGvytb)btGcmbp)buub!ThbsbbyeGj!f>o!uD!y>j!qncbvyt)!bucbtp)mhGsbbbeyjGf!o<uoOh*j-T!ibuchto)fhms.b!e>j!foohujTT*i*u<h!ojfgm)!q*bOjs"],Fo.points=["~v!o<j*g{p/sonp!jnubjut5p!Qnwpne!f.m!N0b!ufsmjbyd<t!)v!o>j+g!pfs{nj!Tnubouj5p!Qn`pmehf!m*WfjwfjxuNdbfuqstjsyf<Q!tvjo)j!ggpjs!n<!*n1b/u25!!.q!s>p>k!f^d!u4j!p]o^N!b3u!s]jyyj<s!uvboNjogppjsund!fnkbpus5q!)w!j>f!xfNwbjuusdjfyq<t!svfoQjtgjp!smnp!pgcm!p~b!u<!otpdjbumvfm<p!tvfosj!g+p!sfn{!jwtf!d>3!!fv{VjwTPugogjtpfQu`<m!hv!o|j!gfptsmnf!!c~p!p<mo!pvjtufvVmwpBtsfssb!z+<!!zbbusussBjfc{vjutf!!>w!ffd{4j!TqupotjjpuQj`pmoh<!!|v!o*jzgbpsssnB!fc{pjpTmf!tvvt)f!Dgpjm!p<so<p!jbuujutspjQcwvnu!f+!!wyfjds5u!bdNpomppjsu<d!fwkbpsszqj!o>h!!owpfjdu5j!twpDQp`mmphs!<<!obpujuusjjtcpvQuwfn!!w+f!dy3j!sbuVbwNPxgfgjtWfmuf<e!pwnb!s>z!joophj!uwjftdp3Q!wwnP!g<g*t1f/u2<!!-veofjngsppsgnt!ocbpspum)!5qdjfdwl!j>o!ho<p!jbuujutspjQcwvnu!f5!dwffwd!5<!*qojpdjluDjptmppqs)<4!dvfowj!g>p!senf!ngsmppgbtuo!btsju{!f4<d!fvwo!j~g!p<s*nu!fgtmgpgbPuw!Vsbf)t3pdmfvwu!j>p,o!<u!fvtogjggPpws!n|!!c*pzpbms!svBtwfVTfjt{vf)B!sgsjb!z<<*!ubfutugsgjPcwvVuvf)!3gdmfpwb!u>!!tujf{tfgBgsPswb!z~<!!<cspppmmp!dj!t>Q!fssptmqpfDdwu!j|w!f*NsbpumspjDyf)tnvb)u!5g!jn!*f!t|m!fs!f~u!v<ssop!mnp]D!l3d!j^q]!!>4!!s^p!m>p>D!w.!!|2!/*1h<o!j~l!dwjpqj)e!!gnjb!j|o!)*","~$!e~f!g<jsopfm!pVDTfFt`vNgBgQje!!v>o!jsgppmspnD!hwbfsdG5`!mehj!g|g!vfttfm<f!!v~o!j<gsppsmnp!Dgwm!p>b!us!ppmqpbDdhjbuszG<`!mvho!j<gepssbnd!tgjmep!b*u1!/b1m!q>i>b!Ubf/tsup<m!pvDofjtgvpgsgnj!ec)p!pgmj!!v|t!f*Dhpomjplsd<j!qw)b!sgzjj!o<he!swbfddt5j!ew!D*pumtpfsU<b!ivqomjbg!p=s!nb!/cspppmmp!Dqfjtdvlgjgojhe<)!!vgojj!gpgsjne!ocfp$pm!!~e!j<t*dwbvs!e-Tqfbmnf)dEu3bfcsmvfu<y!fvuo!j>g+p!ssnp!mcppDpfmt!vcgmgbjdel!p<vuuf<t!gvgoPjwg!p>s,n!!wwvf!d<3f!mvbwdTTdwbvm!f+<!!ewsbpspzDjuoohj!pwQf`dm3h!!w>P!gwgvt!f3ud<f!w!$|j!g*!femfcgbjuodffem)fVTTeFs`bNdBtQj*ea!!v}o}j!ghposjnl!dtjbqnaq)m!fgsj3!E!*nQbBqN<`!FT$Vf)oeefjogjg!fwep!jgej!$nb!j~o!)<**!z|u!jjdgb!q)pc!m+b!dbl/pfvtuv*g!g|j!eh!m-`{Gzsyb/hfDtpvmgpgsj!e>)!5wdffdw5!)>1!/s1p-m!p1D/f1t-v!g1g/j1e-!!|2!/f1t*m<f!!s~f!u<v*szou<j!d~b!qwpf!d+5!!be/jsgpgmvptDfwD!p-m{pzsy</!sjpgm!p)Dawq)j5ddlfjwo!h>!!%s%p!mvptDffDtpvmgpgsj*e!!|"],Fo.bokeh=["?$TjWoodfmfvsedfT!u=jcm","~w!b<s1z/j2o!h>!!wbf/ds3p!mwpVDwh<b!svGo`jmghp!s<n1!/c2p5p!m0!!vmtpfdE!f>q!usip<m!pvDohjbgspGs`nm!ht!b<n*q5msfvsm3cEg!pueD!p+m!p*su<d!fvsosjpgdpusdnf!qttbbn!q+m!f*s53/E1!!u-E1f/q1u)i3<d!fvwo)j!g,p!szny!/cwpVpwm!!-vstpfmHp3Deu<)!Ev3ofjsgvpusynf!ug!m>p,b!um!pudi!s<f*t5ispvmmec<g!pveo!j+g!p*sund!fgsmsppbduu!dnfbqytcbm!v+s!<*!:v3o/j1g.p!s-n:!3g/m1p.b)u3!dbfqwf)s!u,v!szfy</!wvVowj!g-psspnm!pgDmup)bEu3!fosfvbusyDfmuj!q><,!!vmopjdg!p<s*n5!sgvmmpcbgup!eg!b+s!D*mujdqf<s!svpodjugdpfsqnt!bg!m+p!b*u1!/g1p!d-v5t/<1!.v)o3jdgfpws)n!!,g!mzpyb/uw!Vbwt!q-fsdpum<p!Ddup)oEt3uf!sgvmupybfuu!!V>o,q!bmdpldE!p<x*o5tsdvbmmcfg!p>e!!3+6!6*/u!d0f!s3s6p7d/u<d!fdqptobt!u+!!w*f:d34/!1Q!b-d:l3G/b1d.u)p3sdtf!w>)!!w,f!dz4y)/3w6V7w/!!-+s!p3m6p7D/u!)+E!33f6s7v/u-y!f3u6!7>/,!!+m!p3d6!7</*-5!s3v6m7c/g*p<e!!d+p!o*tuud!fwsfsdp5d!uVdofqqbtdbl!G+b!d*u5p/s1t.!!>-!1V/o1q)b3ddlfEwp)x!o,t!dzbym/fw!V0w!!w-fsdp5m)pQDbud)lEG3bfdsuvpusytf-u!!2>/,*!<m!pgdm!p<b*u5!svvomqcbgdpleS!H+C!B*UupdEffsqsupid)uddpfoqttub!!j+o!!*w:f3d/51!.w!*-!:|3!/s1f)u3vdsfow!)e!p,u!)zwy-/!wVVowq!b-dslpGmbpdDuup)sEt3*f<s!v~u!ygfmup!b>u,!!hmfpudE!f<q*u5is)vdmpcogtpue!!j+o!!*wufddf3s!stpddsufdffoqQtpbt!j+u!j*p1o/*1!!|-!5s/f1u)v3sdof!wv)o!q,b!dzlyS/HwCVBwU!p-EsfpqmupiD)uu)fEy3ufvssvfu3yEf)uu!E>f,q!umip-d!!t<d*s5fsfvomQcpgtpjeu!j+p!o**u*d<f!s~s!pgdmupdbfuq!tqbf!s+t!q*f:d3u/j1w!f-E:f3q/u1i)U3pdWfjwf)x![,)!dzpyo/twuV!wj!o-!sgpmmppbDuu!)jEo3wfDsmvjuqy[f-u!!d>p,o!tmup!dj!o<!*g8mspvbmuc!gopfeb!s+-!!*dupdoftsus!pjdou!dgfmqptbbu!!+g!b*s5*/!1|!!-s1f/u1v)s3od!f)wo)f!b,s!!z+y!/gwbVsw*!!-0s!p)m)pgDbus)!E.3!fosfvbusy*f!u+!!>j,o!wmDpmdj!q<[*!8.s!vgmbcsg*p<e!!~+!!g*mupdbfus!shpfduuWdjffqxt[b)!d+p!o*t:u3!/j1o.!!g-m:p3b/u1!.e)f3qdufiw*)!!|,!!szfyu/vwsVow!!q-fssptmqpfDduu)jEw3ffEsfvquuyifUup!W>j,f!xm[p)de!f<q*u8is-v!mocfgbpseD!m+j!q*-u!dgfbsssDpmdjuqd*f<q!t~b!!w+p!j*e1!/n1b!j-o5)/*1!.|)!3wdffdw3)!!e,p!gzcym/vwsV<w!!w-fsdp3m!pbDtuq)fEd3ufdspvsusyffduu!!>>,!!wmfpdd3!)<2*/81s-v!mbctgqpfed!u+*!<*!ujdgf!s)svptdfuEdffqqutib*!!+|!!*g:m3p/b1u!!-w:j3f/x1[.!)>3!dhffwu)W!j,f!xz[y)/hwfVuwE!f-qsupim)pwDVuw)*E*3<f!sgvmupybfuu!!g>b,d!umppsd!!><!*)8gspvdmvctg!p,e!!w+j!f*xu[d*f<s!seppdgucdmfvqst!b>!!+w!f*d53/!1).d!m-b1n/q1))g3bddfuwp)s!!,+!!zbyq/fwsVuwv!s-fs-p!m.pnDbuy)cEm3vfss-v!unybfyuc!m>v,s!*m*p<d!!~<!*f8mstvfm!c|g!pwef!d+5!!*uufdyffsms!p>d!uudffyqutvbs!f+3!E*):u3E/f1q.u!i--:!3w/f1d)33)dwfVww)/!y,-!!z2y//1w!V.w!!w-Vswp/mzp*D*u<)!Eg3mfpsbvuu!ybfmuq!i>b,<!!mjpgd!!)<v*t8fsHv3mec*g!p|e!!b+m!q*iubd!f>s!stpndpupdufiqttubf!q+)!u*i1s/f1t!i-p1m5e/-1!)u3idsffwt)i!p,m!ez!y,/!w1V/w1!2--s!pumfpyDfum)/Eb3*f<s!v~u!yffmut!f>!,|!!mbpmdq!i<b*!8>s!vumfcygfpme/!b+<!!*~u!defpsgscpmdvusd!f>q!twbf!d+3!!*):d3m/b1n!q-):b3m/q1i)b3!d+f!wb)q!f,s!uzvys/fw-V!w.!n-bsypcmmpvDsu-)!En3bfyscvmuvysf*u*!<>!,~!!mwpfdd!3<!*e:psgvcmmcvgsp:e!!>+!!e*pugdcfmsvssp!d+u!d1f/q:t<b!!w+f!d*38!4e/p1g.c!m-v6s28/!1>)!3edpfgwc)m!v,s!!z+y!/1w/V8w<!!-wsfpdm3p!Deup)gEc3mfvssv5u!y>f!ue!p>g,c!mmvpsd!!+<!*1:/s5v<m!cwgfpde5!!+d!p*mu!d>f!swsfpdd5u)d1f/q1t*b<!!+d!p*m6!2,/>1!.u!f-y8u4v/s1f.3)E3)dufDwp)m!p,s!-z!yw/VwwV/wy!z-*s<p!mdppDmu!),E>3!fusfvyuuyvfsuf!3>E,)!umDppdm!p<s*-:!swvVmwc/gypze!!,+!!)*wufddf3s)s1p/d1u-d!f1q/t5b*!!++!!*b6t2q/f1d!u-d8p4s/s1f)d3ud*f!w+)!!e,p!gzcym/vwsV*w<!!-dsppmm!p,D>u!)uEf3yfusvvsufy3fEu)!u>D,p!mmppsd-!!<w*V:ws/vymzc!g,p!e)!w+f!d*3u)d1f/s2s6p-d!u1d/f4q8t*b!!++!!b*t8q4f/d1u!d-p6s2s/f1d.u)*3!d+f!we)p!g,c!mzvys/*w<V!wd!p-ms!p,m>p!Duuf)yEu3vfssfv3uEy)fuuD!p>m,p!sm-p!dw!V<w*/:yszv!m,c!g)pwef!d+3!)*1u/d3f:s-s!p1d/u3d:f*q!t+b!!b+t!q*f8d4u/d1p.s!s-f6d2u/*1!.+)!3edpfgwc)m!v,s!*z<y!/dwpVmw!!,->s!pumfpyDuuv)sEf33fEs)vuuDypfmup!s>-,!!wmVpwd/!y<z*!:,s!v)mwcfgdp3e)!.+1!/*4u8d-f!s1s/p2d6u*d!f+q!tbbt!q+f!d*u6d2p/s1s.f!d-u8*4!/+1!)e3pdgfcwm)v!s,*!<z!yd/pwmV!w,!>-!supfmypuDvus)fE33Ef)suvDupymfpus!->!,w!Vmwp/dy!z<!*,:!s)vwmfcdg3p)e1!/+5!1*-u!d1f/s1s*p!d+u!dbftqqtfbd!u+d!p*s6s2f/d1u!*-!8+4!/e1p.g)c3mdvfsw*)<!!,d!pzmy!/,w>V!wu!f-ysupvmspfD3uE))Eu3Dfpsmvpusy-f!uw!V>w,/!ymzp!d,!!<)*w:fsdv3m)c1g/p4e8!-+!!.*1u/d2f6s*s!p+d!ubdtfqqftdbu!d+p!s*s8f4d/u1*!!-+6!2e/p1g)c3mdvfsw*)<!!,d!pzmy!/,w>V!wu!f-ysupvmspfD3uE))Eu3Dfpsmvpusy-f!uw!V>w,/!ymzp!d,!!<)*wsfvdm3c)g1p/e3!:+-!!*.u1d/f3s:s*p!d+u!dbftqqtfbd!u+d!p*s8s4f/d1u.*!!-+6!2e/p1g)c3mdvfsw*)<!!,d!pzmy!/,w>V!wu!f-ysupvmspfD3uE))Eu3Dfpsmvpusy-f!uw!V>w,/!ymzp!d,!!<)*wsfvdm3c)g.p1e/!2+6!-*!u.d1f/s4s8p*d!u+d!fbqttqbf!d+u!d*p:s3s/f1d.u!*-!:+3!/e1p.g)c3mdvfsw*)<!!,d!pzmy!/,w>V!wu!f-ysupvmspfD3uE))Eu3Dfpsmvpusy-f!uw!V>w,/!ymzp!d,!!<)*wsfvdm3c)g1p/e1!-+!!.*1u/d5f*s!s+p!dbutdqffqdtubd!p+s!s*f6d2u/*1!.+!!-e8p4g/c1m.v)s3*d<f!wd)p!m,!!,z>y!/uwfVywu!v-ssfp3mEp)DuuD)pEm3pfss-v!uwyVfwu/!y>z,!!,m!p)dw!f<d*3s)v.m1c/g2p6e-!!+1!/*4u8d*f!s+s!pbdtuqdffdqutdbp!s+s!f*d1u/*1!!+-!5e/p1g.c)m3vdsf*w<)!!d,p!mz!y,/>w!Vuwf!y-usvpsmfp3DEu))uED3pfmspvsu-y!fwuV!w>/,y!zm!p,d!!)<w*fsdv3m)c.g1p/e3!:+-!!*1u/d3f:s*s!p+d!ubdtfqqftdbu!d+p!s*s6f2d/u1*!!-+8!4e/p1g)c3mdvfsw*)<!!,d!pzmy!/,w>V!wu!f-ysupvmspfD3uE)"],Fo.glitch=["?$TjWoodfmfvsedfT!u=jcm","~v!o~j!g<p*swnV!wj!o-uf!hcbznqj<)!!vEo3jfgspvsuny!ftub>nsqpmmfpsD3hEb!sjGn`bmhhf!<|!!vfotjmgfp!s~n!!<txbpnoqtm!f,ss3pEm!puDEhjbtsqG<`!mvho!j>g!psspnm!pgDmhpbbsuG!`bmnhp!v<o*u3</!1v+o*j*g/p1s6n+!egfmfptb!u+!!btozh-meff<f!tv!o+j!gtpys)n3!dgfmwp)beuo!btsf)f5ed<f!wv+oujogvppsnnb!+g/m1p1b3u!!>t!fxfpeo`ty!<5!dvfowj!g<p*sbn/!bghmdp!b-uc!/tcfdf!e-`hz/<b!hvdo!j-gsp/ssnd!)g5mdpfbwu!!>e!jstpumppsDuhjbpsoG``ym<h!!v<o*jugfptsgng!pg!m.p!bqu!!-efjhtbunpjs)uEj3pfos`vzu<y!fvuo!j>g!pcsdn!!5gdmfpwb!u<!*dqp!m-`fth<b!nwjb)sEz3jfoshv!uwyffdu3!!>w!Vbwh<d!!d5pdoftwu!!<g*mupfbtug!gVpo!q,b!dql!E-pfxhobtndjb)mEf3!f>s!v3u6y6f/u!!0>!!3s6d7!/5<d!fdwp!o<t*u*!fwmfhdo4b!)Qobjdtl!G-b*dfumphsotb!)>t!pwdf)d34d)f3w6!7+/!!u+o!v3p6n7b/!!>+!!u3f6t7g/g-p!!336d7f/w!!+<!*3/6670/e-f!f3t6)7+/z*`<e!fdfpto+tmub!nwsfpdo5>!,Vzo/qqb!d<l*G/b6d0uepfsftt!)>+!yV`oeqfbfdtl+Empbxnostpdob>m,fy!/0q!!w~f!d~5!)<Q*byd`loGpbjduusppsutt-j!e2!/,*!<y!/gqm)p!b.u!!/v2o!q>b!dyl/SqH!C|B!UfptEmffq!u~i!)<dyp`ootpuj!ujsop!uwtfjde5>!yw/*q!!||!*s/f1u?vzs`oe!fefptu))gwj-!!|V!o*qebfdfltG+btd`umppsdt.*z<`!o~p!jgumsppbuut!jseb?oye/)qw!f%d%3!!td`pm*p|d!,szf`uovpsjou!sgpsubtdjue)=tyj/oq))egpju!)~d!p~/!y<zz!`-owpfjdu3s)p2u3t/j:e9!:>9!-z8/9q/!3|4!4f*t*m*f!!+~!!5<4*8z6`9o/p6j5u6s4p*u<t!j~e!!w,p!jze/!qn)b!j.o!)/*2!!|>!!jzg/!q)!c|z*q/=12?*y!`|e!fwfftd)3g!jq!!|>!!*weVfwf<t!+gtm`pmbpud!.yyt`!o>p!jgumspppust)jhem?`zG/sqb!h%D%p!pts`em/pyd!,0y!`1o/p6j*u<s!pgumtpjbeu=!zz/tq!)>g!jg!m<p*p*se)fhfmt`+GesfbfhtD+pqp!s-eq/tzj!E0u!)1!/E63*f<s!vgumypfbuu)!ioupqsfnEbpmU!B>C!HvSolqdb"],Fo.bloomBlur=["?$TjWoodfmfvsedfT!u=jcm","~w!bsgzjjeoohf!$wf!d<3*!bw/Vywj<Q!fvsovjugypfsun!!-tnbvnTqumifhsj3fEx!!d0p!mnpvsTUfftyvugvgsjfe<)!5vdofjwg!p>s!ns!pwmfpdD3h!busfGy`Tmjh{!f<f!tvmofj$gp!s<n*!1w/f2d!3-!nevjTsufidhujjfpxo!<0!!gnmvpTbfut!vhgbgvjtet)j5bdofQwe!g>)!jsop!mgpmDphbbus!Gy`-m!hj!o!BgImQpMbBu`!FtEjJhSnSbF*W!P|!!gsffeugvjs$o!!1~/!4<:x9!:+5!!1+/!3f!y>q,)!.n1v/T6u!i+h!jyf!x+!!<yx!!0+!!)*t3jfhmnqbn!b+t!!t,j!h2nfbm*q*n!b0t!)t!j>h,n!bn<v!T~f!twvpgjgej!en!b<jcoh)s*/!*|u!fwtfgdg3P!wjvo!w.T!jw{Vfw!!>-!f2s/v1u!y0f!UusfpymTpjd{)fE<3!fgsmvpubyuf!ug!T>j!h3nfbm!q>n!bgtm!p4bduf)wT!J<HcNhBs*/<*!ugfmtpgbguP!wxvf!j,h!iwuVTwv!n-!f>s!vhubyvftUtsjpbmopQde)gE)31f/s1v-u!ygfTuj!h>n!b2*f<m!qwnfbdt5!!4udffywu!v<syf!Q+j!yf!{>j!Tuwfoyju!v+s!fo3pEj)uddpfmspjseU!f>y!uuvfstfg-g!PwwVvw!*3<d!fwwf!d<4*!benjhgjgTvgt!f-Tyv)ng!e>Q!oubfjytutvvsbfhQ!j>y!/xs!hucb!p+m!gx!f<j*hji)uuTbvpnm<g!!g>p!sy!!)ujbopum!gj!!|>!!*2,<,!jj!!<=T!VLJFESBOSF`M"],Fo.bloomHighPass=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gbpisqnm!bt!b-nmqfmyffsu3!E-!supEmjpgDguvvtqfu<v!pv)oyjjgnp!s>n!!sgpmmppbDuh!bmsvGn`jmohp!t<j*uwz!U-iisufetjiXpimuep<p!nvto!j,g!pesmnp!igtmfpsbiuU!ztunjptppuoijXnjvemu!i-<e!mwpbistzfjsoihU!zwufjdt3p!owjVnwv<m!)wqpfjuet!inubpjpon)t*!!>|!!bwifqdm5b!!uufbypfmmg!!><!*u1f/y1u!v-s1f/31E!)-u1E/j1g!g-v1t/f1-)!5wdVfww*!<>!!wsfpdm4p!Dmuvvnqbu!v>p!!w5fddf4w)!1</*3b:n:v-m!!1-/{6z9y8/-m!f1y/f2u2)5u*p<e!!g>m!pwb!u"],Fo.bloomComposite=["?$TjWoodfmfvsedfT!u=jcm","~w!b<s*z*jwoVhw!!w-f6df3s!vwuVywf<U!svvomjcg)pEs3nf!stvbunyqfmuf!s+3!E*!1c/m2v!s-UsfpymupvDsufo2j<U!nvpopjmgcp)s5nd!ftwb!n+q!m*f3s/31E)!scpmuvdsbUGfnypupvmsCfq3s<f!mv!o,j!g*pwsVnw!!t-b5nfqsmvfusy3fEU!scvmmvcs)UEf3yfusvvsufy4f<u!!v+o!j*g1p/s2n!!-tsbpnmqpmDfuso3jEU!ncpmpvmscU)f5ydufvws!f+5!<*!5v/o1j)gsppsund!btGbnnpqpmmfCsq3sEf!mc!m,v!s*UwfVywu!v-s4ff6s<v!uvyofjUgspvsmnc!)tEb3nfqsmvfusy3fEu!!e+j!s*u1U/f2y!u-vsspfm<p!DvuoojjgUpnspnp!mgcm)p5bduf!wc!m+p!p*n7T/u1s)fsophuudib<G!nvpopjmgCpqssnf!mg!m,p!b*uw!Vcwm!p-p3nfSsbveujyvftU<s!vvmocj)gEp3sfns!vwufydf4u!!c+m!p*p1n/U2j!o-usDppmmppDsu<o!jgUmnppbpum!cm)f5sdqfCwm!p+p!n*G9b/d1u)pssp)uddpboGtnup!pjmoC!qgsmfpmb!u,!!g*bwdVuwp!s-*2!f|s!vgumypfbUus!vnmjcs)sEp3sfGsbvduuypfsu!!>+!!2*/13/!2.!!-gsbpdmuppDsu<o!jsUfnupvpsmoc!)n5jdyf)wg!b+d!u*p1s/-2!)nsjpsusdpbsGGnbpdpumpCsq-s!fcmm)p!p+n!Sibuehjovfts*u<T!n~p!pwmpcj!e>!!nsbpjmop)D*h!b|s!Gh`m"],Fo.highlightHard=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jsgppmspnD!fthbenfq!m>f!ss3pEm!pjDnhbbhsfG<`!mvho!j~g!p<sens!bwdftdj3e!!u|f!y*u6v/s1f!T=j!{ffh<e!fv)o!jggjp!s<n*!fghmepfb!u-!1f/e2h!f-X:j/e1u)iq<f!uvtoijugpppsnnt!!w>f!df5h!effe!h<f*Dwp!m+p!sw<!!,w!bis!z+j!oih)!uwsfrdt3!!>w!Vfwh<e!fg!mupbbpum!gh!f<uuDiphmj)Swqfpdu3,!udiphpjsse+*1!/|3!,sufiuhvjsSon!puufuypucv,sufg3fEM)qjpnub.hufg-f!md+p1p/s3e.*u/gbf<M!n~p!uwuppjce.!!n>b!jio!)u*b!p|m!gw!f<du3i!hdjdS!n>p!uwuVpwc<,!ngpmupubpuc!+d1f/o3u,fusg!f>M!nhpfuuuDppcm,)udidh*j<S!qgpmup.bqup!ue+y1!/>3!.fueghffMXqjpeuu.i!!>0!!wu!fuybupvmsgf!T<j*{*fz/ey!<-!ygem)p3bduf!we,zd!d>)!mfpeDhuffXhj!e>u!iu!i0h!juSfnypuuvuspfcT!ju{bfp/mzg<!!<w*f*dz3e!!d-p1p/s1e)<3!dgfmwp,bdud!)umppqDMuffghu!!>>!!nhpfuuuDppcm!)udbdp,mwgf!d<3*)*.zeey!--!y.ee.z)*3*d<f!wg,mdpdb)um!puDpuqf!h>!!>h!fuugDfpMmn)pdudu,pwcf!du3b)p1m/g1!-<!*.*e1z/*1*!<-!ygem)p3bduf!wu,pdqdS)jmhpiDuu!f>h!!h>f!uuDiphmj)sd!du,bwpfmdg3!)<e*y*-1!/.1e!z-*y*e<.!)g3mdpfbwu,!dmdf)gmup!D>u!fh"],Fo.highlightEdgeDetection=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gep)s5nd!ftwb!n+q!msfpsm3pEd!!j>n!bshpfm<p!DwhbbsszGj`omhh!!w<f*d*33!gwgVjwe<!!-v2ogjggjpes)n3!dwffwd)3i!uuhfoyfTmj!{>f!<e!!vuobjpgmpgs!n<!6w/f1d+5*!sd/p5mdp!s.<!!sw/p4jde)!!n>b!j3og)g*j!e|!!uwbfpdm3g!!j<o6w/T1j+{*fs!/>3!d2!/.1!!s0/!2udf)y!T>j!{2fg<g!jwef!du5b!pvmwgP!g<g*txfzu/!u>f!twgfgdP5w)v2!/.1!-w!V1w/!1--f!h1b/n1j-)!E23/f1s*v!u+y!fwuf!d>5!)5jdo!w5Tdjf{wf!-<!*jxozw/Tujf{tfg*g<P!wwvf!d,5!!wdV2w!!>-!fuhfbynujv)sEf33fEs)vjunybfhuf!->!!w4Vdw!!5,d!fvww!P<g*gztyf/uu/fytzg*g<P!wwvf!d.5!!wdV3w!!>-!fuhfbynujv)sEf3"],Fo.highlightBlur=["?$TjWoodfmfvsedfT!u=jcm","~$!e<fngvjToufi!hNjBfYx`!S0B!EnJvVTTf!t5vg!gwjbes!z>j!oshp!mwpfDdh3b!swGV`wm<h!!v~o!j<gbpusmnf!et!b>n,q!muffst3gEg!Pjwnvb!h<f*<x!!v+o!j1g/p3s)n!!>w,f!dn3v!TuufiyhTjjf{xf!<<!*vxo!j+g!p*s3nf!mwqfndb3t!!e,j!s2ffdmuqjnpbot<)!)v!o>j,g!pnsvnT!fgtmvpgbguj!es!b<e*juvftt<g!ggPmwpvb!u.!!hwbVvwt!t-jfbhobQnejg))Ej3of!sgvmupybfuu!!y>-!!3jfom!qgnmbptb!u5!dtfjwh!n<b**u!f|t!gsgfPuwvvs!o,!!1w/V4w:!9-:f5h!b+n!jf)yEq3)f.s1v/u6y!f+u!!y>!!+2!fym!q0n!b)tt!j5hdnfbw!!+<!*ttjvhjnebb*s*!!-0y!/tujfhtngbg<P!w~v!)wgpejQeo!bnjbtjtov)b*h!!|>!!wxf!du3b!pjmogw!T|j!{*f,!,>j!!2</T1V!J0E!BuSf`yYTBjN{!f><=!!gjm!p<b2u!!>x!fjj!huioujT)v!ns!p>g!!h<bbvutmtfjeb!o>Q!eugf)t1g/g1P-w!vs!b3edjfvwt!*<<*!TwVfJdE5B!Se`jYgBgNv)tufbTpvmng!!>0!!utfvyjuevbssf!3+E!)fj{njbThwfo-j!!w+V!wo*p!j+u!dxffsjjhei!u>T!vbnu<m!fwef!d3"],Fo.highlightFinalBlend=["?$TjWoodfmfvsedfT!u=jcm","~w!b<sszpjmophD!mwbfodj3g!!w>V!ws<p!mvpoDjhgbpssGn`!mthb!n<qfmvfmsb3WEf!hjenfb!h+f!<w!wv!o+j!gipushno!ftsbunTqfmhfesf3!E>!!fsephmfpUDfmybuovjsgf!25<d!fvwo!j<gsp/s*nw!Vtwb!n-qfmhfbsn3jE)!Ef3efhsfvUufyyfuuv!s>f!3w<w!!vuobjpgmpgs!n<!xgpmmpHbfuh!effe!h+f!T3ufsvfmobhWufih<e!fv!o,j!g2pfsvnm!bgWmfphbeuf!!f>e!hffvHmmbpWxf<h!ewfp!j5ed!fnwb!j<o*)w*V!w|!!-w3ffds5v!ufyefhUffWhbemfv)fE23!f>s!vuufyyfuuv!s>f!33Ef)vfmebhWffUhfeyfu!v5sdff2w-!!<w*Vw"],Fo.fixColor=["~b!u<u*s1j/c2v!u-fe!fwnfsdp4g!tboQbpstuj)u5jdpfow<!!+!$yjjosdumbvNexff!j=WjmofteupbNovd!j+o!hy/jwstu/biNfubdef?kp!svQovj!g>p!sonp!jnubjut5p!Qv`Nmphe!fmgWjjefoxfN$bu!s<j*yo<p!jvuojjtgppQsbn)!4ndbfuw5!!>v!NoppejfumjNtbpuQsmjbyd<p!Mvwo!jg*pOsPnJ!UnDbFuS5J!Ev`QQsJpMkDf)deufNobjugsfjey!<g!j$$j!g!gNjBeYo`fC$PY!`<D*M*J1Q/Q2F!S-!e?f!n1sp!gwtbosbzsjuo)h5!dwffwd!4+!!wyXjpssumbeNQmpftejpuNjvp)o4<d!fw$!f>o!eojpgju!jt$pjQge!mesfpgXjwo!fe1)!D?M!JSQF`QEQJJSMFDD`UYJPPCO`*YB!Nw!bgsjz$jo!h!gwjfedo4f!$wM!p<d*b*m1Q/p2t!j-uejfpnos<p!gt$ofboseuj)g5d!fwwp!j+e!!enfbdjoob)uwtpojJey*j!s|u!bwNfbd)44!dufswb!o>t!gepfsnnsfpeg!t>o!bwsfud!4)HbOQJpDtOjBuUjTpOoJ*`<F!TV$!jggfe","~v!o<jsgppmspnd!!w>f!ds5p!mdppDmhpbss<G!`m$hj!g!?NzBeYp`cC/PtYg`/DyMpJcQqQjFmSd!=?!!f1ev!mwdbosjz$jo!h!?wzfedp4c!/wtXgp/sompejQupdtfjsujjEpqoj<m!d=$!ffoeevjmgdo!j$$j!g|!!e*fegjjpowf)eo)jDbMnJ!Qe`jEpJwS!FD?UeJbPfOi*/t!gw/byspzcjqojhm!dw=f!df4e!vwmMdpodjb$mQ!pt?jeubjfpio/<t!g/$ofpojeujdgfs!jE$qjjomddm=v!ef"],Fo.shadowMap=["~0!0<!o$pQjSuFjGtJpYQw!nv!o+j!gypjssnu!bnNboup5j!undpfekfpmsWqj!f>x!Nobpujsujjyt<p!Qv`omjhg!psgnj!enobfu$5!!q<s*pekffndsupjgptooNbbsuus!j+y!<y!jbsuuubsNjmcfveupfn!)w4fddf4w!!q>p!tojpujjupjot<p!QveomjsgppXswn!!c1p!p?m!!SvFVQtQfJJMoDt`uYbPoCd`fY<B!Nb!ugujs$jc!v<ueff!nnsbpug5t!obbNsbuu!s+j!yyJjostuubbNoxdffjeW<m!fe$pjng!!>N!BoYp`jCuPjYt`pDQMwJnQ!Q5FdSf!w?!!~1!<!evfonjsgppgstno!bnsbuu!5+!!nepfedfombNubtuosJjyyj<s!uwbbNsbz!j>o!he!fwnfsdp4g!twoXbpssum!e|Q!p*tfjduojbpuot<o!Jf$tfVove)j!ggj!!~$!e<f*g1j/o2f!!-V{TzFy`/T*LeJfOoOoJjOlHt!!+!$fetfsgfjwoofJ!yCjPsOuFb`NUeFoYjUcV)S)F5d!fvwo!j>g!pesfnn!scppgptmo!bvsVut!f<Txl/juoiohjjofhX<o!jl$tj!o+d!myvfeufs!f=Wtoljjloto!j+o!hX/uwbtN/fiofpbce!?>,!!webfsozojjolht!!w<f{d/4u!iwhMjpfdXbomjQlptt!j+u!jypfou<s!fwWpojjel!tn!b+j!o[)u*b!N|f!owpfcd!5>!,u!sebfootogjplstn!f<ez!/>u!iwhfjdf5X)oqjplttj!u+j!pyof-u!s2f/W1o*j<l!tw!M+p!dZbumbQNpftojpucj!p>o,!!>e!fwofodj4l)tq!p<tyj/uujiphoj*f<X!ojjgl!t)!v+V!tyffTulsjfoWoojjolht*!!+|!!YnubbuN5f!ocppco!f>N,b!ueYf!o>o!jhlftu!C<p*o1f/N1b)u5sdjfyw)!t>l!jeofJoooejflyt/!y5*d<f!wn!b<ue5f!ncsppogftNobbusZu!!>+!!hyfjusCupboNfeNobjucs!j>y!)ytflujsofJWooejflyt/!z5*d<f!wn!b<uy5j!scupboNfeNobjuc[!!+>!!yhjfsuuCbpNoofjNlbtu!s+j!yf)ttslfjwooJJoyejfsyu/b{N*e<o!jncb!u>5!!ycjpsoufbNNboujXl!t>!!<hXfuubCNpfoofpNcb!u+s!jxy/)utilhjjofJXooejflyt/!x>*,<!!ynjbsuu5b!NtoljjlotN!b<u[sujbyN!f>o!pncb!u+5!){1//u1i*h<j!ftXlojjolNtb!u>s,j!yy!j,s>u!btNlojjolXtf!j<hZiuub/Nyf!o+p!cc!p+o!fzN/buuiYh<j!ftXlojjolNtb!u>s,j!y","~0!0<!*${Q/SeFsGpJpYDh!bs$Ge`fmghj)oBfC!HDSMpJUQi`uEqJfSEFlDdUbJqP!O>!!swpbmspzDjhobhs!Gw`fmdh4!!w?Mzpedpbcm/Qtpgt/jyupjcpqoj<m!d=$!jfoedvmmvdeofj!$=q!bd?lzjeophc?/t!g/$ojpojdumdvfesfj!E=qdjmmjdq=E!jfsefvdmudjopjo$/g!t|/!i*f)boej?bn!!e$jjpowd!mvgejfe!o=fd$mj!q<coppyj/ugjtt/piQfebmes?pX!w!$4jdgf!wN!BhYo`jCzPsYb`wD!MJ1Q!Q?F!S"],Fo.reflector=["~b!u<u*s1j/c2v!u-ft!pwqf)d54d!fqwp!t+<!!yvjosjugbpNsmnf!enpbnu!5+!!uyfjysuuvbsNfxNfbjuws!j+y!<y!jvsoujbgNpospnj!undbfuk5p!snqp!e>f!moNpbjuusjjtyp<Q!`vmohj!g<p*s1n/!2n!b-ut5p!qw)j5fdxfNwb!u+s!jyyj<s!uvboNjmgfpespnn!!n+b!uy5j!squsbpNkffsdvuujypfouN!b>u!swjVyw<!!|w!b*s)zojjobhn!!wefjdp5w!!w<Vw","~v!o<j*gbp/sfnt!bwcf!d-4*!sdppmmppds!<-!cvhosj/gfptsbnc!)tzbbnmqsmffwsP3eEo!fumEcj)g5gdvftwf!<>!!wsbpsmzpjDohhb!swGf`dm5h!!w<Vews<b!dgtmjpeb!u*!/c2m!f?o!ezP/wwfVsum!b}z})!g/m2p!b?u!!yc/bwtVfu-!!}g}m!p1b/u!!=c!mzf/oweV*u!!|}!}s!f1u/v!s=o!)yc/bwtVfu!)=!!g1j/!6<!x@/!w)V3w/!10!!+z!yc/bwtVfw!!+>!!cwmVfuo!e3*d!f;w!!)<2*/w1V!w.!!-3f/t1v!g+g!j)E2u/)1k!p.s!QcEb3tffs*v!u+y!f)u2!/>1!!f.t!bccm!f5odef*w*!*|<!!*~)!owjfbdn4!!ecjmpfwo!e~P!w<f*s*mcb/ze)owffmdc4!!-ccb/tfft-b!cw)fzdb4m!scfmwfPoeeo*f!m|c!!s-f*uhv/seoo!fwmfcd!4-)hc/mfftobecP)wzfbsmmsbfzw)Pcebotffm/cs!--!*csm/feo"],Fo.envmapCubemap=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbssDGv`cmfh!!fogwjNeboqf<$!!$<jcohdsm/v*e*f*!{=zf/oodppjeujdofhs?jE!uwvpqjuev!Pnwb!j-oy)/*o!p|j!uhdmf`sGjsEbuhvDqpumvpPsw!!>)!4wdffdw5!)-1q/b1N-w!o1f/)1f-c!v1D/f1s-v!u2y/f1u*)<s!bf$ojjgMepfUgm!fVyTfFU`qMbJNOwFoBfS!>!!hcmh`sG/ssbphmDppDmhpbss/Gs`hmch!!>!fntbmqfU$fy!f<mcUhpsM/j*o*f*b{sz)/uofpyjuuvdsffsDjvEcufv)qfuovwPNwb!q--y!/wofpdj4u)d!fwsPjvEuuqv"],Fo.envmapEquirect=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbss3GE`!mfho!w<N*bzq/<g!!v-onjcg!p-snnu!)wyfjdn3!!>u!fcyhfsm/Tsjp{mfp<D!hb$sjGo`dmmhv!e<f*!y=/fgo!d-psecj!o-hm?c)!yj$ne!f>g!jnocf!!4SdFfDwJ!Q<S*PyD/BgM!`-QsJu!!1-/m4u2)9y4j1n:!9>9!7n2u9!448d:f1w8!!gj$eeoffg$jo!f<!cShFsD/J*Q*SwPvD!B-Mq`bQNJw3o!f1)/!2E63:f2s6v5u:y5f4u1):s2b9f:o6j4M6pU!mwffydf3U!qfbrNvwjosff!d>u!Vmwc)!j4od!fwwf!d<4y!/efj{sj*T!m|f!ygfmup!b>u.!!vy!/>w!vb!u<bcoh)se/j*s*/w{v-!!-.qebjNsw/oyf*)!!+E!3SfFsDvJuQySfPuD)BsMb`fQoJj3M!p,U!m1f/y6f<U!qgbmNpwbouf!!w>!!>s!c1!/46d!f.w!!b<tzj/of){djmTbmnfqy)feuj!s>/,z!-z!/.w!v2!/<1c-h!s2//*1**w*v!!+-!qSbFNDwJoQfS)P!DEB3Mf`sQvJu<y!fsuf)usvbsfoo!jwMfpdU3m)fvy-f!Uwq*b<N!w~o!fw!p>j!es!un!b4jdof)w*!!<|y!/hfm{`jGTsmbfhyDfpum!p>s,!!>y!/wwfvd!5<)c1h/s1/-*!*1w/v1!--!q1b/N1w-o!f2)/!1E*3<f!swvfudy4f!up)vsubqfvoujEMjpsUfmdfuyjfpUoq!b>N!woopfs!n>b!mmju{!f4)dwfPwv!uqfvtumEfj$sf!d<ucjhpso/**<*!wwvf!d-3q!bvNww!o>f!)f!rEv3jfssfvduuyVfwu))psvbufqovjuMEpjUsmffdyufjUpqob*n<!!>w!fmdc3!!4gd!f>w!!g<syb/dfu{)jvTwm!f0y!fuuf!y>f.m!Tyj/{wfv!!.<!c1h/s6/**<*!wvvw!!-.q>b!Ngw!o+f!)u!fEy3ffmsTvju{yff<u!)s$bjfgoejfMgp!UVmTfFy`fMUJqObFnB!S>!!swcf!d44d!fuwm!!<>z!/nfb{qjUTfmyffymfUup!M>j,o!fzb/sw)vu!f<ycuhvss/f*3*Ew!v)!f-oqwbNNbwqo-f!)v!wE*3*f/ssvhucy<f!uv)ws/byf!o,j>M!puUfmyffymfTUjq{bfn/!y><!!swuf!d4"],Fo.envmapBlur=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbss3GE`!mfho!w~N!b<q*<t!jvyobj!g-pbsunf!ijuo)uf!mtqbnnbqTmuffth<!!+v!o^j!gjp!s]nt!ugimhpjbfux!!x>f,j!hcihust/]s!pom!p^D<h!bvsoGj`gmphs!n<!*ctpjpymb!!m-bbuujfuivue!j+o!b1m/<2!.v)ofjmgqpnsbnT!ugfmhp!b+u!!^e!Uji!f]utbu<i!hvjofjxg!p>s,n!!cghmsp/bsup!mnpjDqhJbosuG<`!mvho!j<g*pjs)nu!bwpfmdg4!!+q!pbmuffBiyUjet!<>!!b$ujfoidum!vuebfp!m=gf!o~d!p<eljbofhs?c!!|!$*etffgmjqonfb!tF!O>W?N!BjQ)`!UgZjQ!F|`!D*V,C,Fj`!V<Wo!!=!$jj!o<d2m!v>e!fj!!=udovjc)f!FsopwgS!f<g*mtfjdyubj!p-o1G/T1?)f!mwqfndb4T!uhffhu!T+b!n^q!m1f!)]gtmupibhuj!fuxi!f>u,b!-c!hwsf/ds4p!mbpyDjhtb*s!G|`!mghm!p<b*u1!/d2p!t-U1i/f1u!b-!1>/!1d!p-t1)/u1i)f5udbf*w<!!>w!fsdp4m!ptDbhnbqsmGf`Emjhs!f<d*utjjpyob!)>f!{wjPmvbunqsvpuoE!j>s!ftdjuyjbp!o~!!+<!*dyp/toUpijfuudbf!s,j!Edusvpqtutv)Pbwy!j.t!--!1w/P1v!u-q{v/uoEpjjsufddfusjjpEou*v!q+u!vtPjwo))4udiffwu!b>*!!t,j!ybby!j|t!!*+*!*e*p1u/)1b)y4jdtf-w!!w-Ptvjuyqbv)umEbjvsrffd)umjmpbo)*!!g+j!!)<2*/o1p!j.u!ddfpstjUEiufvuqbu*v<P!ws!f-utvjsyoB!fcmjpmqj)otftbpssDdv!c;f!VtWj)yfBofwmNpbqq!-@!!tmbbnoqjmefvEujjsufbdmu!j>p!ot-j!ynbj!q4Jdofuw*!<|!!~*!)wopjjben!"],ke.common="~$!e<f*gwj!o-fv!)Q3Jd!f4w/!2o5s2v6u:f3s7!6<466/91:!8,:!4JQ!`M$BeDfPgSjQoJfD!FQSJ!3+!!7*/*319/422!9-614/128!2.8!:-6z9/7sj!e)$qenfbgmjdo)fo!jQtJb`!I>B!MwG!!u2b/p6m8g1!8<:67/413!7,8!:35J9Q:`7M7BD!PS$QeJfDgFjSo!f+!!S*FyD/JsQjSeP!D-B{M/`sQjJe!)1o/b4u2b9!4>1!:v9!9u7b2p9m4g8!:|1!8*s!je$!e4fdgfjwo!fo!jS)FwDVJuQdSfPsDjBvMr`fQ!J33d!f1w/!2~6!:<216/52:!5.4!1>:>2!9^:!644!6]^!!3$!e]fng!joosfv!uFfQsT!J|M!P*On!!25fu.b7n)!yj$sjugboNeffwgj!utdbfuqvtssbfuQftj!!m$pepfcg!j~o!f<!*tcbhusv/ssbpumfp)db!*-!tdumibhnjqf)xb)-u!p1e/!1o-s!v2u/f1s*!<!*3$3f8o1e/j1g!-!3g6m2p8b/u1!!q-p7x332)3d/p1o)t4ud!fjwo!!>g!mtpubiuh!jyf*x!!|4!dsffwu!v|s!o*!syp+myp<d!!~4!dgfmwp!bouj!!quptxo4p)dd)pfodtoub!ojjon!vgMmfpwbjuu!bym*f!S|p!Ussfbufvosjom!!yu+byp+myg<!!~~!!<gqmnpub!uo!sqvpuxf5s)!d<p*o{t/u^!!j3o!!]gnm!p-b{u/!^y!*2!!|]!ng!m-p{b/u^!!y13!!]>n!)y4+dyf<w!!s>f!u^v!s3o!!]yq3n+uy!3<<*!z~/!^g!m3p!b]un!!n-bzy/4^)!d2p!o]tnu!!-jzo/!^w!f1d!4]!nw)*4!d|f!ws!f>u!v^s!o2!!n]bqyn)un!b<y*)yw//^y!-3!!w]/nz!*--y!/w^/!{2*!<]!n~!!-gym/p^b!u1!!b]wnf)s4bdhffw)!d>p!o^t!u1!!j]oq!nwuf!d<4q!ndup!m4pusb*n!!||!!s*fnu!v4suob!ne!pouj)!duptmoppsd-)!4wufbdN4f)t1p/q4t4o4b4s*u*!<4!u~b!ni!j~h!i<q*!{gzmyp/b*uy!jssbuoben)!d+p!o*t1u/!1j!o-!swjfed)35!dvfww*)!)|f!{djpmobtnus!pioj!hoisqv!ugfmsp!b|u!!*by!j>s!u2b3n/!:59u:b9n-!!ocj!!>-!s8j9e/!344d4f-w!!do!j>)!o5p4j8u6d9f/s6j5E6n4s<p!gitjohbisqU!fgtmspfbwuo!je!u4!d>f!we!p~u!)<v*w{/zyyz/-*!*w1f/d13!)-bs-jce*)*5-d!ftwo!!+>!!ynjpseu)benu)-)!fQ{Jj*m<b!nssfpuov!soos!vgusfbsd!u|)!t*jyoj)stuob*n!!+5!udb*n<!!o~j!!t-ussjved!u4!dJfowd!joejf)ooupMjjuhdifus!j|E!nwsfpdg4t!odbpsmup!s4<d!fwwf!d<4~!!ejgsjfedoufj$po!<<!mcbpnpsmp!Owujbtpjdcsmbff<m!d~!<4!dtfuws!vdUuB!PSDfSgBmFfMdDu`fFeTMVj!hgifue!g|j!$wf!d<4s!jeEjxsffjdwu!E4jdgfgwv!t<fm<b!nwsfpdo4!!4edjfswf!d<uoTpqjfudjvtmpbqs!<4!dwffwd!4|!!juoyefjusofpdDudEjjsgugfvntpff<H!!wufddv4s!ujto!e<j~s!f<dsubTmqvfd",ke.packing="~w!f<d*4s!bqgb!d.l!O[pqsjnmbDmwUopjS!H+C!)*dspboftou!!.j!os!bwgf)d)4!!0o!p*ssnbbgm!*+!!|s!bsffou)v!soos!voupfssn!b|m!j*{sfb)go!pusbnpbmmg*!!o+j!!1u/t6o!p,d!!1-/s6b<f!o~!!uwbfpdm4g!!voojq!budtloSpHdC!U-p[OqpjsmnDbwmo)jd!puobtpum!gj!oo!jw!fudt4o!psdh)c[*x!f|j!WspfUuivusqof!E3f/w1j!u+d!fsqhtcs/fyqz!{u!b.p!m2g/!1~<!!<~*![dxpfojtwu!!+g!m*psbbuf!oQ!b.d!lsVbqgt)d)b!m0f!!*>s!b3g6!7+/!!*0[!x3f6j6w/!<,!!dspboftou)!)g!mopsbvuu!fVso!q|b!d*lsEbpgx!outbdpbmmgf!!o>j!!3u6t6o/p!d0!!-3s6b7f/o<!!udbppomtgu!!owjf!du4t!oQpbdd!l-G[bxdfujpws!tu!b>p!mwgf!do4j)!3u6t7o/p!d+)!i3u6q7f/E!f+w!j3u6d7f/q-t!s3f6Q7p/U![+x!f3j6w7!/u-b!p3m6g7!/~*!<<!sdbpfoot!u.!!w*fsdb5g!!V.o!qsbbdfloG)b!d+u!p[sqtj!m>D!sVbofqobjdml!Eopsxvoutfdsb!m|f!!*0s!bwgf!du5b)pQmbgd!loGjb!duutposptd-!!-2s/b*f<o!!dupboptmug!!gomjp!buut!oTpidj!g-u[SqjjhmiDus9b!f>o!j2m/!!u0b!p3m6g7!/o<j!!wuftdo5p!dq)b[dxlfEjfWqpuUiiUupqSfHECdBj)idqpbosthup!ijuos!pg!mupbbpum!gw!*~!!|<!*wsfbdg5!!.s!!s>b!fwof)d!50)!g*ssbbdfuo)!w,!!+[!xQfbjdwl)G!bodsuvpusfts*!-|!!w**s<b!gs!/uzb{pxm!g.!>o!js!/uytzo{p!d+!!-Tsibjfgou!Sujbhpimug9!<o!js!fuutvospod!!s-![+x!fQjbwd!luVbqptmdgb!mofj<!!u~t!ogpmdp)biuu!qvfoEqdbjdilqSbHsChBpUipuEsfPqpuUi[)xdfpjowt!uu!bjpom!gw!f~d!5<!*w**1!/|6!6s3f!u0v!sxo/!we)p!u,)!w{-/!wV!o-q*b1d/l6G6b3d!u0p!szt/*w<)!!~,!!wyf/dw5)!3qdbfdwl!3oIsbvmugfUsp!S|H!C*Bw)!w5fddf3w!)wg*m!b|I!3wpfUdB5C!HsS!l>d!bwqfodv5!)3wd/fyw-!!~g!s<b*dxu/)sw!/-y1!/+6!6336!60/!1x*/-s!!w./!z{-/!sg!s-bzd/us)!w-/1z/!6+6!33!606!/z1/*s*!<.!!syf/usv)s5od!fw",ke.bsdfs="~v!o<j*gEp!s+n!!Hg)m!p+b!uG!!gossfvtuoffsm!J<o*uIfOoutpjeu!z-<t!twffodj4o!jCiStE)Gh`oMpbinQcofosjum)Cd`pEo!t>u!!Ej!ou!bwpfmdg4!!<e*j)gugjvdtjfmDqpnmJp`sh*o!p|i!QsofoujvmsCo`!HS!F>D!JHQ!SuPbDpBmMg`!Q<J*!I+W!uepjeg!g-v1t/f2D!p-msppsm<p!D~s!bwmfvdd4f!qGt`)TlddijmmjiddlT)`dGp!o>t!uG!!j4od!fwwf!d<4*!*gs1j-E!gdmpboit!u-!sjjoE!xgfmjpwb)uu!pge:)1f-u!bdspvoutbut!!j>o!!IgWmuppbeu!!uebppumWgI!*<!*|*!sgjmEpgbmub!ig!s-fmtbonfsmp!o>)!ufpyeq)3f)u)b.s!v6u/b6t6!5>8!4I!O+u!peep!uuWbIp!m.g!!7</*:s9j4E2x7f*j!w+!!,e!psujWEIu*i<h!jsmf)ufv{sjom!bgnssfptoo!f>m!JsojuEfgomtbjiu!z4!d+f!w)!g|1!!*+t!t)f2o/j1o!j.i!tg!sufbtpomfgm!*o!j,!!u)tgo:p1d!!+-!sgpsmfptDosfbmm*v*d<f!q~t!!g4mdpfbwu!!oWj`!HuHtYo`pTdn!j-umibDnpsspsof!m4bduffwe!)odjp!outtuo!pjdo!!-gsmjpEbxuf!jbwm!q4idbf-w!!dopjo!tuut!ojpod!!g-mspjbEuu!iehpjumO!M4-d!fdwp!ootju!!ujtoo!pgdm)phboup!ieQpouoOjWm*C!`|G!EgSmCp!b4ud!fbw3!!~>!!<q*ptxt3f)objmoqjiibt*!<-!IgOmuppbeu)!xhpwq!!>+!!e*p1u/O2M!!,+!!6t/r1s!u+)!bt3t!f,o!j)o2j/i1t!).!!+b!3J*Q!`+M!BqDpPxS3Q)JeDpFuSO!Wo*s*v<u!fgsm!p|b!u*!IhOmu!p>e!!eupbupOmWg!!+o!jt!rustuo)pbd3!!-,t!t)f2o/j1o!j.i!tb!3u*b!p+m!gq!poxj3!)uetpoupOdM)*h*o<p!isQfouovjsmoC!`1E/!6u!b0p!mngb!y~)!h<w6!3,/!1h!mo-s!vFuQfTsJ!M|P!O**)<u!j~d!jgmmqpnbJu`!hEo`pHiHQYo)odjpmoCt`uH!!juob!pgmmgp!b~u!!<b*muqmivbt-f!sd)p4odtfuw!!joos!vgumfpsb!u<!*esppuuOdIb*G!n|s!pgGmsppbuud!fbw3)!s>p!uqdpbxG3n)sbpmGqfisbf*i<q!Tgemfpqbquj!meDf`oDpUnM!!>>!!qupmxv3t)fesp!uuObIp*m!g+!!<)*b^3!!1.!!]2t/e1s*p!p,d!!2-/^1!<4!!s]ftuevsspop!dS)FsDpJuQdSbPGDnBsMp`GQsJp!u+d!fbW3f!h0e!Fq`pDxU3M)!e>f,o!psnp*u<d!b~G!nwsfpdG4s!pCuSdEfGw`!H<H*Y^)!d4p!o]ttue!sjpop!dw!f-d^4!!3m!j]htieusEpjpsd-)!sdppuodtbuG!njsop!Gwsfpdu4d!fwWjffhxeEFj`sD-U!Md!p>o,t!us!pjuod!bwGfnds4p!Gosppsundbfmw-!!<d*p^o!t3u!!]jtoe!swpfpdd4!!-g^1!-2!!d]ptoetsup!pjdo)!sgpmupdbbuG!ngs:p1G-s!pdupdoftWuf!hjeoF!`gDmUpMb!u>!,s!psvphuidobfGtnts*p!G|s!pgumdpfbwu!!<b*m^q!i2b!!]>t!eqsppxp3d)!s-p^v!h1i!o]fttets*p<p!dw)fsdp4u!dibbGmngsEpjGss!p>u!dofpWsfnhbemFj`{DfU)Mm!j>h,i!usEpjusd!b,G!nwsjpfGxsEpjusd*f<w!!g<m*p1b/u1!)e4pdufOwM!!>>!!stpbuudvbsGbnusfp)Gesppuu)dofpws!n4bdmf-w!!m<j*h^i!u4E!j]st*e*s<p!pgdm)pfb{uj!mebpnusOpWo!!>>!!t^b!u4v!s]btuefs)peppdu!)<o*p^s!n3b!m]-t!ewsjpfpxdE)jfs{*j*m<b!ngsmppob!u>!!e^p!u3O!I]!t>e!stpbpudv!s<b*u^f!)2e!p]ut)eosppspndb)mf-{!jimbbmngsEpjos!*>*!<^!!g2m!p]btue!sepppudW!I<!*>^!!t1b!u]vtsebsupfp)de)pfu{)jwmjbfnxsEpjos!->!!i^b!m1g!E]jtse*s*p<p!dw!f<d*4Q!!G.!!>^!!G4`!T]dtiemsjpdplD)ugd1f-s!)g!:+1!-u!benp!u>W!I^*!<4!!g]mtpebsup!pWd!!><!*WQ`!H.H!Y^`!T3n!j]utieDsppspsDfumdbfusf)e!)+b!muqbinb!->!!e^p!u3O!M]-t!eesppupOdW!*<<*!Qg!m.p!b^u!!2E!!]>t!eEs`pHpHDYu)dbfmsq)i!b+-!!uebpnu!O>I!*^<!!2s!f]utvessop!pGd!!+<!*)QW!!.+!!^E!*1<!!]~t!ewsfpdp3D!uMdUfDs`)V!w+)!dupbont!u>!!j^o!!1w!f]dt4e!sOp-p!dd!p<o^t!u5!!j]ot!ewsfpdp4d!!W4-d!fdwp!o<t*u*!Oj!o-!3gUm!p-b2uU!)s4puvbhni)o4futbtN*f!t|p!qdtpoobtsuu!!g+m!pwbouJ!nM!V>U!`uTbJn[!F4!u>b!n7!5</*12<U!!d-pOo)ttut!pgsmdp!b.u!!>M!V3UU`!T<D*B*MOF!!->W!))uMpVeU!`+T!JO[!F.!!.W!)2f/{1j*m!b0n!sMpVoU!`>T!J2[UF!<<!3dUp!o-t2uU!!g4mdpfbwu!!<M*V1U/`1C)J4BdTf!w>!!o1s/v6u!f0s!!M*V1U/`1T!J=[!F*<^!!g1m!p]btue!sepppuDOuWd!f>s!!t.b!uQv!s-bmubfn)seppOuu)iOh-j!mW)*u*p<e!)wgfjd!3<!*v3ww!!>-!2wwf)dt3t)psspdv!h>i!omfbtnts-p!Oturishuj)m2!/41d!f.w!!e<p^u!O1W!*]*t<e!svpwp!D>u!dvfws!!+.!!M^V!U4`!T]DtBeMsFp!p,D!uMdVfUs`!C>J!B3Tw<!!4sdffuwv!s<o^!!v1w!<]!t~e!sgpmppDbuud!fMsU!D.`!D^m!j2q!q]fteeTsqpipfDsufdGfpss!n>G!b2dwu!p4sd)fdwp!o|t!u*!^j!o5!!w]ftde4s!pgp*D!u|d!fgsm!p4bduf!wm!!o>j!!muftoohpudi!)-gw*o<J!ns!f4uuvbsno!!onjb!yu)t)omp!d+!!-mQ!!,4!dgf/w{!*o!j0!!u)tmo!p,d!!2-/W1!*4-d!f1w/!1o*j<!!u~t!owpfdd!4-!OM!U4Dd`fFwe!hofjW!fudtuoppsdG)pfsunbGvbmdbuwpFs`)DdUpMo!t4ud!fjwo!!~w!f<db4u!fwi2u-o!jdtp`obtuuf!ijuo!!+w!f*d34w!!w-32*w!)|t!tgpmspdb!uo!syv!u>f!se!p<uw)!w.2!-*!*w83.*f<2!!g-myp!b+u!!yz!!.>!!1b/c2t))yyb*n<)!ugsmrptbfut!sbf!w>o!j1!/+9!665/41:!9;6!!w,!!@)!1*/15/:17!6?2!6y6)!!,>!!1b/u1f2i5u6o3j1t7`!b+u!fzi*u!!+u!bzp<m!gg!m<pcb!u0!!cb!!>>!!4w/!5u2b8p6m:g5!1<!z,!!+)!5*/z2!7,2!7583",ke["physical.vs"]="~b!u<uysfjucsvfuwf!!+w!fydj4s!ubbQNputdjfukjppsoQ<v!!b>u!uospjjcuvjutfp!Qw`fmdh4!!b?Ozpespncb/mt<w!/q$bjNgxepfmgg!=V!TfFe`vVmWdo!jb$uu!sj?czveupfc!/wtfwd/3q!bbNVxwp<e!bwibts=z!jfoehv!mwdfodj3$!w!Vwg<j!evoofj$gp!s<n*!onpbjuu4j!tvpVQwbN)b4udsfjwy!<>!!o$pfjouejjtgpQ!mb$djpgM!we!fg*jOoPfJeU)DVFTSFJ`EM`JQHJIMUDN)BeQf*o!j}g}f!ee!fggjj$of!e<)*VyTfFu`sBfPwN)B4Qd*fw!!b>u!uospjjcuvjutfp!QwwfNdw3!!<byVfwu3s<f!ww!b+s!zyjjoshu!bwNfxdf3j!WwmVfwe3p<N!vv!o>j!gypfsuns!fnwb!u4g!jveVowf3$Nb!u<s*jyyf<u!sf$wf!o+e!jygjs!ub$NjmofdempvNevf)!4=djfowt!u>b!oodpjjouhj/twptQ/eimfsbpeX?w!!v1o!j?g!pSsFnQ!QnJbMuD5`!YvPNCp`eYfBmNW!j}f}x!N*bQuBsNjWyO!F<`!FvToVj)gepfsonj!gnfbeu!5g!jv$Np!e<f*m1N/b2u!s-jeyf<n!svpogjtgopbssnu!)n5bduf5w!!v>Q!sypfkufsdfuwN!b5udsfjwy!<!gvjoejogfp$sn!!<nmbbun5s!pvOOwp!s.n!b>m!NmbbunssjpyO<w!!wbEsFzEjJoTh`!QwJfMdG4!!gwfOepgsjn$bm!<!gwjbesozfj$oh!!<w*f*d*41!/w2N!w-QmpbtnjsupjOpuod<f!kc$pj)g5!deffwg!j+o!fyej)sVuTbFN`mFbOnWsNpBOQv*)!4}d}f!wN)BfY{`jCmPbYn`sDpMoJ!Q>Q!FmSb!n?s!p1Ow!!wbfstzmjfo$h!!w<f*d*41!/w2X!p-smmbenQspptOjwu!j+p!on<)!5d$ffwo!e+j!gyj!su$bjNgm!benfsgpjOovf)e4)dDfMwJ!Q>`!EmJbSnFsDpUOJwP!O<***!^w3b]snz!j-o^h3!]wnf)du4p!ew!M-p*d^b2m]Qnp!t-j^u2j]pno)<u!pe$!f-o*e^j1g]n!!-$^j1o]dnm)vuepfe!)=4edjftwq!m0b!dmfbnnfsopuONubdqf/kwctp/!i>f!bmeb?ns!pO$wj!o<d*mevfedfo!b=uttlojJoyojjsouhb/Nwbt)/4iufbbne!?>!!n!$4juobdnm!v<e*f*!1=/t2i!b-eepfxnNsbpqg/twotb/siuf)b5ed?fw!!+$!jeofddmovbeuft!o=JgymjpsxuNbbNqb/)w4td/fiwf!b>e!?ef!nwsppjget!onbbsjuo!)wHpOjJeD*O!B|U!TO$Jj`gFeTfVg!!gVfTeFg`jV$W!!w?Vzwe!p>c!/)tvwV/wqNbbNuusojfyn!f+d!bwmfqdt4j)eb=V!wf-e!v2m/d1o*j*$/y!z<?!ze$pfco/etjwg/h!oj$ojogj!letf=g!jfoefvem)dVoTjF$`M!J<H*ImUbNnBsQp*O!b})}4!deffwg!j>o!fmeb)nVsTpFO`uBdPfNkBcQp*!4!dwfVww!3<!*>o!p)jvuVjwt3pNQbbu)s4jdyf!w+!!>w!fedf4n)sbpVgwt3o-b!s2u*!*4/dyfzw<!!g$jfeo",ke["lightsCommon.fs.head"]="~v!o<jfgdposbnj!ewbfsds4j!!bonscvjuffosu!M<j*huiiuhDjpfmXpfst<v!gvgojjEgjpnsfni!!w-fsdp4m!pmDjzhlitu/QusiphcjfM]j:n^f<i!!w-fsdp4m!ptDieHofvupJsshs/bueijhbjoMdjfnBfui))jyoj!nw!f>d!4f!doopbsjnebbms-s!jj!o4!dwffwd!4<!6t/i1D!p,f!gMgOjudpjef!o+u!t6]/:1^!*>!!|u!ighmjpfbXuf!tyv!g>g!joEpjsnnfbim!/uyb-p!mzg!!><!*ooppsjnubdmf/szj-e!/{u!i>h!joMpjsnnfbim!/-{m<b!nwsfpdo4)!uspfet!v>m!uM!O>u!ptei!Dupbfpgmggj!d|j!f*omubtn]s1p^o!!+4!d1f/w9!9o7j3!3u8t<o!psdf!t-vumiuh!j,M>j!ntfiiD!pufighgjjMdfjsffoiuqtt]j2n^f!I+!!o3j/!1u!t+o!p1d/)6f2d2o7b7j5e!b+s!szJ<u!ishfjtMvfmsuf!i,q>t!jtnifDIpuffghg!j4ddjffwo!u<tu]i3h^j!M+f!s3f/i1q!t+j!n1f/i6!2u2i7h7j5M!f+s!f{i<q!tsjfntfvIm!un!s,p>g!jtoivD!p<f~g!g<jedfjmfcobuotf]!4m^p!p+c!!3</s1p!m+p!D1e/o6v2p2s7h7!54!d+f!wy!<<!sspfmtpvDmzul!t,!>4!dtfiwD!p<fogpgjjuddjffsojuet!]45d^f!w+!!|3!/u1i!h+j!M1f/s5f3i:q1t5j4n!f+I!!yu!d+v!szu<t!!sfgtjvemouf!$,>!!<t^iTDUpIfHgJgMj`dBjFfSoBu`tU]D6F^S!`+N!V3O/]1t!u+i!h1j/M5b3f:s1B5u4d!f+s!!zu!i+h!j{M<b!fssfBtuvdmfuS!!,n>s!ptgijDopvf!g<g3j`ddjufmo!uEt3]s7f^m!q+n!b)t1!/n8s5p4g2j3o6v!!+<!2{`!d+u!m{!!E.3!s1f/m3q5n8b8t1!9n*s<p!gsjfotvv!m<u~!!,<>s!btmivDdpffqgTgfjmdcjbftojuet!]m8p^p!c+!!<3e/f1m!c+b!o1f/!5m3p:p1c5!4<!u+i!hyj!f+I!g{m<b!is!f4tdvfmwu!!<,i>u!etjiXDgpmfbgig!j4ddjffwo!u<to]p9j^u!j+t!p1q/!543d:f1w5!4<!s+p!m)pyd!!+4!dyf!w.!!|z!!u+i!hzj*M<b!fssfBuuvdsfoS!!sufdtvvsmuut<!!~1!!w?f!dT4U!IhHfJuMM`jBhFiSuBQ`sUpDcFfSJ`sNsVbOe!jgbjo$df!)dgpjoetouf!$jo!!~w!f~d!4<!fmtjmhbigu!Q>s!pfcmfc]j:t^j-w!/dupiohtjum!!j<o*!1w/f1d)44!dofpws!n>b!ms*p!m|p!dw/fudi4h!jxmp!s|m!efOtpmsfn!b~m!!<>*!*j1o/w1f)s4tdffUws!b>oat!gsppsmnpEdj/sufidhujjmp)o!)>o!pfsmncbjmt-j!wv/WujifhxjNmb!u<s*jzyb*d<f!ew/fudi4h!jjMsuspbqetj!b-ofddfo!b>u!ttjieH/fuuiJhsjsMbuepjqbto!d-ffBduo)bxuptsjmEeuOiphsjnmb)mo-p!jmujbhvioufQusupBcffd*o<b!ustfjuEvusfoh!!j>s+s!bsepjmbpodd/fu<i!h~j!mw!f<do4p!jhufbuvBonfcujufBouupMqjth!i+u!Jsspsmbpedj/buoidhfj)Mduppoqttu!!>j!os!pwmfpdd4/!ubinhcjjmf!o<u*MsjphuidufDWpmm)pisu*h!o|f!mw!f>d!4f!djosbsubtejjEbuoidhfj!m>!!ubbnpcmjgf!o|u!M*j1h/i1u!D?p!moppsj<u!bsvfoufvusuoB!ujpsqstb)e!jgbjo!d<f*<t!p~D!fgmmhpobbu!!-htfpuDEbjstcunbvoodffqB/uuuifhojvMbuupjqpto!)-dtppoDtfuo!pjdo/!ugimhpjbMuu!pmqjth)ioupEjjutbuvboofdufu-B!udppqoTtuuf!hj!o>!!gomppjbuub!vdovfuupugBguEpjqttu!buobdpfm-g!!d<p*ootpuj!ujdof!sgjmep/buui!hejfMdubpzqFty!q-poopfjouud*f!s|j!ej/gu!i)hdjvmu)pugpgeE!j>t!utbpoDdffm!h?o!b1!/u1b!p%m%g!!e<f*dsbpzuFdyfqWpmo)ffo{uj!m?b!n1s/p1o*!!>|!!ospfjuuvdsfos!jqep/xu)ithbjumv!s<boupfj)u.j!tmpjqh/izusEujftnupbfohd!f.!!0o!pdjvuujptgpgqE/jutiuhbjoMdufp!q,t!!2>/!1s*p-u!deffWdmb!z4Fdyfqwp!o|f!o*uu*i<h!j~m!!sufiuhvjsMou!o2f/e1j<d!o~J!!gumvppb!u-!zhsfuufTnqppfuhB!uuuyffouvobpuDjdpjos)udfpnoptfuH!!jooj!!gumtpobpud!!d-puoifhDjpMtujpoqft-!!udiphojtMuu!pjqoT!!gomjp!buut!oqpfdo)vpngcosJbuDiphtjjMoufp-q!Tdupfoht!ue!jjpow!!g<m^pTbUuI!HbJoMh`mUfPDQpTt`jNoVfO*]!t|u!ishfjuMvuspoq!tt!nupiphujiMtuupfqqT)!dnpsopfgDjpotvj!o<f~-!!<qeffomvcnbcosfb!Dmpptpjco!f<-t!pbDobhsmcfnDvpotfjqo!fu*b<p!m~g!!<$tjpgD!fOoVpNd`!EuJbSp`mMgJ!H<IzUbTd!f?e!!1ub!ptmugs!v<dfud!oEbjustfjdeu!jupbopbmmgM!j<hsipum!p|d!!w4fddf4w!!e<jospfjduudjfpsoj<e!!w4fddf4w!!d<pomppjsu<j!tcppqp!m4!dffowb!c|m!fuei<h!j~M<u!pvqoTj!gupdsvns!uEtj!sf1d!u?j!pToUbImHMJjMh`iUuP!QeTj`sNfVdOu!jgpjo$bm!Mjghjieuotf]$OV!N~`!E<J*S*`1M/J1H)I4UdTf^w<!!>wap!jsep!mhpfdu/Eujishfjdmu)j!p>o!bfmmMcjjhtijuwJ/ougiph)jdmp!o<t*uz!bjdof!eE/jusifhdjuMjupoojbpmqM!j-hfiduo!beujtsjfed/uujiphojbMmuMojjhpiqu!--!fddpoobtuut!jjEou!iHhfjpmn)foupsjjudbDvpoofuufuyBuf!dhofbpuntfjuEsuzf-h!!p>v+u!!sJpomdpjde/fuoiuhMjjmh!i<us!pmmjphdi/uu*i!h|j!Mmujohjipuq/!d>p!msppsm!p>d!/eujishfjdmu!j<p*osbpmuMdjfhWimu)/iduphmopfsm<!!>m!jfhdioub/uetjjsEfudiuhjjpmo!!u>b!pemjgs!f<d*usjppuodbfmWMmj)hfi{uj/mebjnssfpdou!j>p!oo<p!jmujdhfisuj/ew/jutijhcjmmf!!<>o!pujsuvjft<p!q~/!zs$uffonepjfgh!!.!$ojpgj!uOjVtNp`qQ/PuJiOhUj`MMuJoHjIpUqT!!>?!!s1pu!dtfuWsmv!d4ud!fQwp!j|o!u*Mujihhijum!!|u!iwhfjdM4u!oqfpetjjduojJp!ou<v!pw!f-dz4s!udfpnmppfsh<!!ugymfpuboup!Dedjjtsuubfondpff<H!!gomjp!buut!oepfdd!b-zu<i!hcjpMpumo!jfpoqb!cumifhej<M!u~o<j!pvQo!jogjp!sunt!oQppdj)opugMojJhuiiuh!jqMpujoojupMQjuhfihu!te]jOpVwN!`<Q^PTJUOIUH`JM",ke["lightsCommon.fs.body"]="gHjfeponff$us!j<d*DupiohujfMyeuf!uhdffpmngffuss!z-<m!bhjfspfnufbuns!z-/zqsputfjnupjfpho!!->f!d.o!bwjWejbfSxuQbpptdjsubjfpmod<!!-hffdponbfjuesbzs/soJpmscnjb!m-!f>d!oobpjsenbbsm)<s!bhmfvpdnffquTsuzd/fwsjjfexoEJj`sF!S>!!o*pssbnmbvmdjf{qfT)uwdWfjsfjxeQopJt`jFuSj)peof*o<j!gf$ej!ggejf$g!!VTgFj`eDoMfF$BS!D<P*BuUih!jhMfepfnufdufsmzg/fdsm!f-bmsbdjpsbfuuObpns!n-bzms!u>f!ndpmffhb!s-dfpdboubOjpesbnsbsmj<)!ft$vfgogejjEgud!fJsojdejoeJf`oFuSM!jh*ifut!vegjgsjfEduudMfjshjieuo<J!`F$Se)fegfjoojfg!fOeV!Ng`jQ$PJ!OUg`jMeJoHfI$U`!TIgBjEePoXfT$!1!<!*t$teffogijhovfp!SOuVbNp`dTsQbPfUm`dM/JmHbIjUs`fTuIbBnE!P-XmTb!n1sp!Ou$bepfdgsjboffm!dO/VzNs`uEfJnSp`fMhJ!H-IsUj`ETxIfBjEwP/XzTs!u1fn!pf$hj)gf!d)oObVjNe`bQSPMJCOJUu`fMhJ!H>I,U!Tf!d?o!b1j*e!b%S%u!bepfdgsjboffmed)!SFU`BEPjDsSfBdFuM*D`!FQTpVj!ogufMejghji$u!!q<p*jtotufMojihhivup<s!/m$bjjgs!feufbgnj!o-fmeb)nVsTpFo`/TzIsBuEfPnXpNfBhQ!*-!s%j%E!xOfVjNw`/QzPsJuOfUn`pMfJhH)IfUd`oTbIjBeEbPSXMTC!J?u!f1h!!>Q,p!jfoduoMbjjheibusT!ib*espbxm!vqdpfjqoTuuMdjfhsijueToiJb`eFpSx)<e!fo$jfgofeej!g%%!!*$QVBONSWPOMFM``FMTPVP)Qe`fToUjBgSfUe!!ggjp$s!!)jgojue!ojf!$>!!1<g!jje!o=f!$OV!N<`*QmPbJnOsUp`oM/JzHsIuUfTn<p!fjh!),f,d*o!b|j!eqbpsjsoJuMMCjJhuifuh!!>>!,q!pfjdooubMjjehbisustJ]m!cjj!!^<*!WjVg`!F)CqVpDj`oFuQMZjUh`iQuB/NfWoObFc)meffeo*j!g|f!eh!f%u%Q!p*jEoSuBMEjOhBiUuTJ)oegfpo)jqgpfjeo!u%M%j!h*iQuB-N!WhOfFp`nFfTuVs)ze-f!oejjgsffed!ugMjj$hi!u*g<j!eo$fj$g!!e<ffgdjoobfjee)bVsTsFJ`qTbINBuEiPhXjNmB!Q>*,!!%f%d!o)b]jJe^b!s=s!jO!V<Nz`uQjPtJoOfUu`oMJJqHbINUu`iThIjBmE!P+X!Tc*hs!/q*pmjfoyufMUjqhbiNuuTiihbjemp)xs!b>f!oqjpMjpoUuCMHjShti!u>T!ifbdeopbxjte]b!sjs!J^q<b!Neujishfjdmu!M4jdhfiwu!/<d*p3mwpVsw!!+->q!bbNmumi)hcjwmf)dE33)fesjvsufydfuuM!j>h!imuf/ywfjUtqjbcNmufi-h!jsmf!d5fdjfwwf!TiQbBeNpUxI*H*J!M@`!FhTfVu!QgpfjeogujT$ib!ep*xf)tqvpgjgojuETuidbfespjxeNobJq`]F!Sj)!e^f-o!jqgpfjeo!ugMjj$hi!uTgijbeeopfx$/t!i<b*e1p/x1N)b4qdTfjw{!f>-!!fqdpojbojueMbjShuibupTdisbbefpmxd/!t4idbfewp!x<C*j1b/t1-)!4qdpfjwo!u>M!jfhdioubTjiebbesp!x4/dtfiwb!ep*xsSbbmevjdvftq-T!uwdQfpsjjoeuoTJi`bFeSp)xeDfpopjsgef]e!!jg!j^$-!!qpgjjoeuoMfj$hi!u~T!i<b*eupixh/jtMiebfeupdxfDmbgnffss!b-Omfbbjss-f!uqbpnj!o-uzMsjuhfinupTfihb!e-puxi/htjiMbuedpfxsDjben)fusdbfGsbjsE*`!F;S!!2/g1j<e!of$$fo!e~j!g<f!vSmFb`WExjpsefbdiut)!e+j!szfudjutMojfhuiouJ-x!phefbpintf!u.s!z1-/!2n!b>u+f!ssjpbmmp-d!/sufighmjfMduudffesMjjeh!i~u!*<<o!s~v!u~f!s!$<VeOsSbPdMtMj`eM!P|P!Q*`1F/O1E!>!>!$ffvomebjWgxp!eb$ijtg!!%)%O!VmNm`vTDQxPpUe`bMiJtH)I!UgTj!!?<!*1e*s!p%p%D!xepfegbjiotf!e-)tSvFj`eEbjSsxfpdeub*it!!T-qtpbujMCjxhpieub!ittq!p-ufM{jjhTixup<e!bi$tj!g-!qebfNgxjpoefbei)tV)TxFp`eTbIiBTEuPfXhN!B.Q!*1!/%2%!!>O!VfNv`mTbQWPxUp`eMbJiHtI!Uu`bTpImBgE!P|X!T*!f?w!j1fd!fTSqxppueMbjihti)u!Tgijb!epQxB!NtXqPpEuBMIjTh`iFuTTVi!bgefpexg<j!$$!f<ofevjsgu!!>!$fVmOcSjPtMjMw`/MuPiPhQj`MTuUdBfSsUje!!g<posp!j)ujdofus!jje!/>u!i1h<j!Mjf!s=f!iOqVtNj`nTfQiP!U>`!MoJpHjIuUdTf<s!jje!/,u,i*h!j|M!utdqfpsujMej!h<i<u*!m>b!ntsqppou/Mzjshuifuntp]f!hj!!-^u<i!hjjgM!f)stfqipqutMjjnhfiiu)/ffdoobbcjmefbes*s!J|u!ihhfjuMTfqspfuiMqjthjinufJIougfph)!t,q!psupMmjphDiuui-h!jhMfuponffjucsnzb-!!>e!jsspfmdpudM/juhiihuj*M<u!df$sjjge!!e|f!g*jeoffmec)bVoTfF/`uTiIhBjEMPfXsNfBiQq*t!j%n%f!i))]!Jg^j!!=!*OuVdNf`sTjQEP`UF`SM)JeHfIoUj`gTfIeB!EgPjX$T*!!gtjqepoufM$jh!i<u*Tmibbnesppxo!/>z!stuqfpnupMfjhh!i-ufTcipbseQpuxith]j!mj)!f^d<o!bejjesbfsdsuJMfjchpisuQ/udiphmjpMsu!f+h>!!>b,m!mf)dcowbfjde3b)sesjjs!f<d*u1M/j1h)i4ud/fwwj!t>j!cfmdfo-b!jsefbdsfsjjw!f4Tdifbwe!p<x**1*/!1@)!4hdffuwT!i>b!efpdxo)btjqepbusTsiJbmecpjx!N4bdqf]w!!j!*^f-t!vtgqgpjuEMujdhfisujTeiobJe`pFxS/)teifboejpgxfNeb!qgTjj${f!-!gtjqepoufM$jh!iuETOiFb`eQpPxP/Mt`iMbMePpSxOCVj$bt!-~!!t~q!p<u*MujihhijuMTeifbuedpfxm/gtfisb!e-pmxbSjbsefjuvbtn-!!-wzTsqupfunTpifbhe!p-xuDiphpjsMeb]f!sjB!u^d*f!s;)!b2f/s1B<u!df$Sf`ouedjfgsj!ES`FF`SE!j|s!f*deuf)mecjbsoffd/uuMijhhjiMub-f!shBfupdnffsu)s!zg-j!!n<b^ujf]stjubimh-j!MsbffgsmBfudduffse!M>j!huiiuh*j<M!b~f!s~B!ud$fVsO!S|P!M*M,`,MjP!P<QT`UFIOHEJM!`B$FfSoBe`jUgDF!S`$NjVgO!!)=O!VjN!`<E1J!S>`!MjJ!HuIoUjT)!!?s!p1g*!!%U%S!BeUfTg`jQoPfPeM)`SMFM`PESjOsVf$du!*<u!iEhjjsMfbdfusjBpuodbfmsM!juhiihuj!MebjfssfBduudjfpSo!bm*MbjfhsiBuu<d!fS$`jugd!fesfjgEj`oFfSe))eVfToFj`gTfIeB!E%P%X!N*B1Q!*?!!%T%U!IOHVJNM``EBJFSS`BM`JUHDIFUS``TNIVBOE)P!XgTj!$?!!1g!jEejosff$du!jpEoObFm`MQjPhPiMu`TMiMbPeSpOxV!$ej!s~f!d~u!j<p*oubimhMjjMheifuuTdifbmegpfxs<!!-m$bfjosefjugbn!!-$zVsOuSfPnMpMf`hM!P-PuQi`hTjUMBuSdUfs!jgep)su!d)fjsojuE!`jF!S>!!1g<j!ejo!f=$!O!V<N1`/E2J!S;`!M*J^H!IjU!T]<e!sjp!p,D,x*p!e|b!ieTjmsbfodpujjupdofbsmjMEjwh!i-ut!v>j!eebjSsxfpdeubjipto/bxmpMejbhiiTuuti]h!jjM!m^b<o!pjjgu!d)fesjjsef!d-utjbpjoCbxmpMejbhiitu//xfpoebbcimTfuei*h!j|M!mhbfoupEjjusdffdsujjep!o-bfm{MjjThqibuNJxopgepb)ietj/sxfpdeubjipToubimhMjjMhmibuo-p!jhufdpfnsfjues!z--^!!ejj!s]fqdbuNMxjpheibui*T<m!bo$pjjgu!deffsgjjeo)fxep)eVbTiFT`uTfIhB!E@P!X*N*BxQp*e!b%i%T!f)w]jJf^d!f=s!!O-VfNm`cEjJtSj`wM/JuHiIhUj`MTuIdBfEsPjXeT)*3d!fewjcs)fmdmubj!p>o+b!msMpjmhpidu/TuiibhejpMxu!d>f!sejjes!f<d^u!jjp!o]btmxMpjehbiiuT",ke["lightsPBR.fs.head"]="~t!u<s*vodpuj!tQvimzdtdjPdubomfNjbcunfbs!j,b!m1!/|2!!w.f!d*4*!1e/j2g!g.v!ttftDfpomiphsv<p!sg!m+p!b1u/!7s2p!v.h)i3oqfytft!<-!owpfjdt4v!mtdqdfPduvomfbjscDnpbm!p,s!<W!Ogumppeb)ux!ptqq)ffduvbmsbvsuGb:t1!<o!sv$ujfgse!f|g!!*VtTtFf`oDiMhFvBpSsD!PuBbUpm!gg!mopjb!uu!tdompfdb!s-doppbjut<v!mgdmdpPbuuo!fdjmcfnbbs!dupbbpumSgp!vohji!oufttotp<d!!w-fWdO4u!pdem!fubbspdmpgb!uoGj1!<u!tgomppdb)uo!pdjmtfvbmsdddpPbsubGm:v1d<f!qT$ffuoveqjngpd!!u$bjpgmegf!g!mVbTdFj`tTzIiFQF`Osb!mwvfddf4q!TtuidfffsojDepomJp`sF<S!!gsmbpmbvud!ftqiTfufdofSspjvehoiJo`fFtSt!<f!oj$gffoee$jg!!m~b<d!jwtfzdi4Q!`dfmtfvbgsgdjpEbuudTfqsfjdevomJb`sF!S>!!fwtfvdg4g)j1E/u1d*f<s!jwefodJ4`!FtSi!fffoojTgqffed$vm!bsm!b>d!jwtfzdi4Q)`1b/f1s*B<u!dgfmSp`buud!fJsCjMET`iFfSf!obCfSsEBGu)ddfpSo`tuud!fjsoj!Ew`fFdS4!!foopjsgnfbem$-!!dpmobtduj!tjzoi!Qw`fudd4f!swjjEf`xFESj!su-d!fdspjoEt`uF!Sj!of!ogjmgpfbeu$!s!pvghjieoofft$t*!!~|!!<g*mtpebsup!peDpuudOfWs!!>-!*t1b/u2v)s4buubfn)!e-poup)joupjstnpbqm!--!swjjEfxxfEjjws!*-*m<b!ngsmppob)uf!usb3v!m>b!wsFp`vDhUiMo!f+t!ts!p+m!psDpfvthvigogfjtet/<m!bgjmspfbuub!nb!!+>!!ssppmvphDiuoifhtjtm!!=>!,1!/f3t6v!g@g!j.E4u4d:f/s3j!e+/!usi3h!j,M!e2f7u2d/f5m!g+f!ss!p~v!h<i*otfetstp!p.D!u3d6f/s:!!-;w!o.J9n/!5-9o!p+j!usj3t!p,q!!2-5s/j4E!x+f!jswp!v-hmibonfstpto!).f!u:b/v:m6b<w!Fg`mDpUbMu!!+c!!m>f!ostpfvshgi!o+f!tstp!m=p!D1u/i3h6j!m@!!>5,5!/s1b!m+v!dsf3q!T.u!d3f4s/j8e!/+u!ishpjvMheifoufdtftm!g,f!s4!/<3*7z!/;3!u2!/+:!8*!s+p!msp3D!s.b!m4v/d3f8q!t+/!msbpjvshfiuobfnt!t.!!,*!11//28)34<d!fgwm)p!b,u!!yE/H3!u>!!+f!ysqp)mbp!D+s!bempvudOfWq!t,/!mcb*j!s,f!u)bsnp)v!h>i!omfftott!f=s!g1!/43d6f!w@!!<1*/!1*!x;/!21u/!2-!1+!!-){s/p2vuh)i4odfftwt!!-.*!11!/-326!*-*1<!!)s4fdufvws!o-!*tzb/u2vus!b-u1f!)-EyH/!2+u!)S4FdDfJwQ!S)P4DuBbMn`!Q>J!*w<o!J~n!!w4fudb3n!!E<G*HwBvq!q-s3p`yd)udmp)oEt3uf!sjvou!ywffud!4>!!o3pus!n5bdmf-w!!d<p*owtvu!!-j2o`!dwufmd)4E!3wfjsfvxuEyjfsu-!!>d!p2out!u5!djfow!!g<m*ptbtuf!osiphvvhpiso/fmtbtj*s!f|u!bgnm!p-bsuj!EexpfujOwW!!->m!btnbsupvos)bwuVf`)DeUpMu!)>o!pwsvn!b3md-f!ww!j|f!x*Esjbsm*v*d<f!qdTpfomtcub!twjfed/5u!idh1j!M>b!fwsfBdu5d)f.s!a2)-!!g.j!!1</u1i3h8j6f-I!g.m!b1i/!6,8!3i-u!e1j/X1g3m3b*i<!!,d!ptoptQuu!iwhfjdm5!!>d!2^!!>4!!w]ftde5s)p2p-D!u1d/f1s5!3<6u-i!h2j/f1I5g-m!b.i!!1,/!1i5u*e<j!Xwgfmdb5i!!s.!!>t!psQpuvihhijomf!t>t!!^+!!3d!1]!t,e!sdp2p<D!ugdmfpsb!u<!ubi1h1j5f!I>g!mnbjio!).s!/iyu!e+j!Xsg/myb-i!!f.y!qt3p)Q.u!i:h/j3m9!!>+!!^e!p2u!O]Wt*e*s!p+p!Dsu/dyf!s,!!<su/izh<j!fwIfgdm3b!ig!b.c!!i>u!ewjfXdg3m)b.i!!2,/!1t5p-Q!u2i/h1j5m*!!>+!!^b!111!5]!t,e!ssp/p{Dxu<d!fssf!u<v^s!o5!!g]btce<s!p~p!Dwufddf4s!!F4odwfjws!p<osnpfmopudC/SuEiGh)jdMpboftsuB!ujdof!sw!f>d!4s!pomppsDnubimh-j!md!p4odtfuw!!j<ou!iwhfjdf4I!gwmjbfix/Eujish-j!MdbpfostBuu!djfos!!w>f!du4i!htjqffIdgvmmbbis!D4pdmfpws!-<!idupeojtXug!mjboi!/gumiphbjuM!btfqsfBduvdmfbss!G>:!1i-u!edjpXogtmub!ij!o4!dgfmwp!b<uo!psjpuvjhtipoqf/tuti*h!j|M!bwffsdB3u!dgfbsc!!>>!!tEpGQHuBiqhqjsmp!y4)dofpws!n<bomp-j!uwjjtfpxqE/jzss-u!fsnppvfhhi!o>f!totp*j<u!jstfpuqv!s4od!ftwq!f<dsvjmEbxsfDjpwm/pzss!u+f!ngpbfch/!y>!!,s!jtEqxffdjvwm!b4sdGf:w1!!<+m!bgnbscp/oz/<z!s~u!fwnppjfeh!!d>p!nmqbvnusfpNov!m4udjftwd!b|u!u*fusijhojhM)edfpuodtfum!gjfos!!wufidh4j!Moepfsundbfmm-g!fdSp!outvup!ojjo!!-wmfbdj4s!fwujbfnx!Emjbsj-s!fdupboNtmub!djjot!zwifQd!4o!jt!quftdovpmdb!s-Dzpsmupfsn-p!fdhp!outyuf!ujoop!Dgdmjpsbuuf!ntpqffHd!vomjb!suGt:o1p-d!!d-puoithuj!Mjbof!sgBmupdbfus!!supivhhjiMobfftstB-u!djfoSp!vouj!!wuftdo4p!dt)jmobhdmjftTzdibQu`ubffss-B!ujdofpSv`uu!dwffsdj4E!`nFvSm!uejjTpdwb!uu1f!s?*!!T|U!IwHfJdM3`!BgFbScB!`>U!DEFGSH`BNqVqOs!pgyj)$op!s~n!b<mf-d!owbjjfexbEsjssJ-e!fsupivhhjifoXfftotj*t<p!dw!f+d!4f!tGvtgtgFjtet!!>>,!!tfqtfvdgvgmjbEsuDdpfmspjse!o+j!/gubich/jyM!e,f!utdqffmdgvfmsb!s<Gf:d1o!b+j!egbbscs/Jze<f!ugimhpjbfuX!fFotjtt!p>d!!g+b!ch/oyj!s,f!ugubbcd/Tzj<u!mgvmnp!b>u,!!Fsnbtm!v>d!f2q/T1u!d.f!sFjteto<j!/wufidh4j!MGebfwuhd!f>m!gtfqsf!d<vhmobjssDfpumupbsd!T,f!m)h2o/j1t!!.+!!tfqdfodbvjmebbssD!p>m,p!ss*b!m+v!d1f/q1T5u8d7f2s:j<e!owjf/du4i!hGjnMte!f>u!dGftmtgFftst!!<+*!*Ghbowjhs!f0u!u)b2d/T1j!u.m!vFnn!t,!!+h!oGjbswfhu*u<b!dtTjfomhhmofjTtd)b!u.u!f1s/!2,)>!!+G!tstpFmtptD<f!tnvvgmgujjeT/dmbbujusffsu!b,n>!!>G!nftt!v+g!gFjnet!<4!d~f!ww!p<j*eh!oSjFs`fEujusbfddTuj`uQmivznt!j-dhbomj)sdfpuoutbud!Tjfom!hJoojdtj!e-ftotufMojihhivup!se/jmsbfjdsufMujbhni!u--1!:dGpsobtmuv!djfoq!tH/fmpbnjfsufsujbdnD!p-osupfmypuD!shbfmpvndffuqstz/-m!bdjpsoftuub!nj!o-!sQjiEzxtfjjdwb/mzNsbuuffnspjfbhm!!-nmbbunfsspjob/mz-s!ujfonppvfuh!)ShfogjmsffduuufbedMtjjhuimuv!Nsffugvmqfndpudf!e<MJjQh`iMuB*D!P|S!QgJmDpFbSu!!+e!pfudOoMb!j>e!btsbsujv!s>b!uffd)oebpjue)bhsfspJneffuusizh/jofpXsfnobjmt-p!de!j4sdffdwu!M<j*h1i/u1/)e4jdsffwd!u>j!phoo*j*s<f!uwufbdd4T!jjusmsvbne!j4bdofdwf!!<>*!1e/p1u)O4Md!f+w!!e>j!shfodjusMfjuhuibud/Tdfpmmhposj<t!!4$djfgwe!fgg!jVeToFf`$DM!F<B*StDtPfBoUih!vgpmSpobfuf!ietp/umObMjdsdf!u>b!nt!b-usvjsEbxuffj)we/pzus)uhffnppnffhu!s-zm/bdnmsfpbos/dzpsbuufOnppsfnhb)mG-E!SeCjosfffdiuTMMjChJi!u+/!esjpsmfpdDuojfpfoi*t*/<m!bwjfsdf4u!bdnd!J+s!sfbdeojbbjoedbfs!s>j!!e>p,u!OsMbdmdv!d+f!qeTjosfffdiutM!jhOiFuF/IdTp`mFpTsV<!!gdfmefgbjs$dp!bugTjqefodfv$mb!s<!*,t>t!fdodiJhsvspbSeujbbpoddsfb!f+m!dC/SmEbGj`sHfHuYb)ne!j-s1f:dGuuMbjphdisub/femjds/fmdbujjspfou-b!nh!f-p1nGfuubspzd/swbjffmxdE/jmsb-j!shffupbnnf!u-sszj/Edxmffjbws/dzpsbuufOnppsfnhb!m--m!bnnbsupfOsujbbpmd/sdbmffmbds/dzpsbuufGn1p-f!hn)bGuEfSsCjubomf/ndompfsbjswdopFb!u+G!:f1d-o!bnjbeubfSsujbbpmd/sdbmffmbds!d>p,b!usSbpmvvhdifoqfTtutb*p<d!sb$ffmode!jgUB!PD$SjBgFeMfDg`!FVTTVF!`gTfIeFgFjO$!!t|i!f*fuoiThqjfMdevfmubdsf!m,g>f!sj!susibhejjMbeofdufd!f+m!gCfSSE!Gu`vTpiofjf!o-)mebjjssffduubMnj!hmibuj/sefjusbfNdmubjdpjot-z!ihQf!ponjf!uustzo/pwdj!f-xzEsjusf-n!phffhp!nufyufsuzo/poDpdsjnsbumf-n!pnfbHu!fosjj!bumt/otpidf!f-ofDdpombpjse-b!Snubbupfdssjbbfmm/dt!i4fdffowS!povjh!iuotfotptd*!<-!fd$ofbojeejbgss!js!f4gdmffwd!uofje!Mujthoipud/!e-jfsdfodbujTeqbfsd!v4mdbfsw!!,o>j!!justsobpedj)bmobddfj!t+z!iCQS`EsGb`mHvHdYf)qeTjusdffdsujMejohJi`uF/Se!jesjfpdwu!j~p!o<-*!shpfmppnDffutsvzg/gwjjef/xmEbjjss-f!uhbfnp)nufsufsczn/boMp`sGnEbSmC-!!+n!bfudfosbjjbemb/stsqjf!d>v,m!bfstDvpgmgpjsE-u!dnfbsujfesojjb/mu/ithqjfMdevfmubdsfGm:g1f-s!!n|b!u*fusijhbjmM/esfpuvdhfimogfftst!*u<i!hsjfMgemffudduffmegMfjSh!iuuv/peojjs!f-dmubEjjsgfguvbtnf!!m,b>j!sjfsusbbNemjbbdojdtfz!i+Q!!CoSjE!Gu`tMobpndc!f-szus)unfbnupffshj!bumy/feujogpgDvdtjfsDupfmnppsf*H<!!o~j!!wuptjoep!dS!F-`fJdooebjjsefbdsusEjj!g4gdvftwf!`oQji!zuttjodpbdm)",ke["lightsPBR.fs.body"]="gQjiezotfj$db!mNgbjuefosfj$bm!!<nbb/u*fwsVjwb!m-<q!bnNbtutffsojibhmv/peSjogfgfvittf)DEp3mfpssv!u>y!feuj!g>g+v!ttftDfpomiphsv/psShocf!f+i!t)/2m/b1j!s.f!unbfnu!bmQoBfNtTtTGFbOdIuHpVsP*S<O!FwFfIdT4`!FeTyVz!!g>f!engbjy$)b!c<t*)1e/G2e!y-)8h1f/p1n!f-utstzfOopishnvbpmS*o*f-f!ibtc)tq)nebGmedz!)>h!ftptnffouishzvOppSsonfbfmi*t*/*m<b!jgsmfpubbun!!hfgpjnefoufs$zS!p<vchhiso/f*t*tw!V>w!!n-bqyb)Nnsbpym)peDyozf/fyi-t!)eEy3zf/szv*u-y!feuy)zs/b{f*o<j!MnpbUumffsyjfbUmq/bsNpsvphmipoDfotftf!i>t!!n>b+y!)ssppmvphDiooffftittG/bmdbujpssf-u!b1n/!16Q3B6N*S<P!MnPbDuOfFsFjIbTm`/FsTpVv!hgifoefgtjt$!,!><!shpfmppnDfoufsfziStp!v>h!isopfmtptD<o!fnfbiutf/smjbbjms/fsupbvnh!ioOfFtFtI!T>`!FnTjVo!)gnfbeugfjs$jb!m/gsjpevohfi$of!t<t*-1!/22/!1-*t<t!fnobiuhfvspjSbumb/ptdqsfbdfvmmdb/smDbpjmspfsu!b>n!)nojjyn)!w>f!dt4t)f1o/i1h5v*p-S!uebjpgdgsvbtffmDdp/mmpbsj/ssfhucb-n!!n<ftutbfmooifhtvtpGSbzdsuupfsn*p<f!hn!b>u,f!stjtbfmo/ithqvfpdSvumbbpsdGs:b1f!m>d!/2m/b1j<s!fu$bjng!e<f*g6!3V6T1F/`1D!M-FtBtSfDoPiBhUvp!Snubbupfdssjbbfmm/dd/mmfbbjssdfpubbun!)>y!bdnm!f>b!stdtpfboui<h!vnpbSuufbspjdbsmb/fdmmdf/bmsbdjpsbfuuSbpnv!h<i*oufbtptd!s>b!fdmmdf/bmsbdjpsbfuuSbpnv)hfiuobfstvtu<b!tn!b>u!fusbjpbdms/bdfmmfdb/smdbpjbsufGu1b!n>!!wgfjde4o)f1$/1!5<*z</!*nwbVuwf!s-jqbbmN/tdtmffobishdvppbSuuGb:p1d!s>b!f2m/d1)<E!3f$sjvgueyffgu!!V>T+F!`tDtMfFoBiShDvPpBSUuNbBpQds!bnfbmudf/smjbbjms/fdumbfnb!sdQpBbNuT!T+F>O!IuHfVyPuSv`sUfB3PED)SdBmFfMbDs`dFpTbVu!Ngbfqe-g!jw$Vw!*/gyj<e!of$",ke["toneMapping.fs.head"]="g$jjego!fe$fg!j~o!f<e*)sVptmfpMdj)offubbssUvpuobftN!boqsqvjuofhs*!!<}s}p!mepfdg!j+o!fueb)NVutvfqSufvjPoTiFbDsBe!U>p!osfpNmbpqdq!j<o*hs*p!m}p}d!)eufjgGjUoEfPee)oVBtUfSDSj!o>f!psopUmppodf!N<bsqpqmjpodh!*+!!}u}b!NeufvgqjooJfTeF)DVBt!f>B!DsFpTmGpjdm!n<j7d/U1p!o0f!Nfbsqvqtjpoqhy*Fh!ovjoqjqgbpNsfno!pgum!p>b+u!!suppmopfdN!b<q*q!j*o3h1F7y8q1p/t2v!s-f6<1!71$1f/o1e.j!g-8!74$8j1g/!1e.f)g4jdoffwe!)-V*t7f8M3j8o1f/b1s.U!p-o4f2N9b1q2q/j2o!h-*91!2w4f6d/41!.M)j4odffbws!U-p*o8f3N4b1q1q/j1o.h!)-w9f1d341!2d/p1m.p!s-*6!8|5!1s7f/u2v)s4od!fuwp!o)f4Nubbqnq!j>o!huFbyNqupvtqvusvfP!T+F!DdBp!m4pusb<n!!~u!to$pfdo!e<j*g!*!88$8j4g9!/e1f!g-j7o7f6e2)1V/t1f!S-f4j3o9i5b1s/e1U)p4odffNwb!q-q*j4o9h4*42!/w1f!d-45!4S9f1j:o/i1b!s-e9U6p5o6f4N/b1q)q4jdofhw)!w-f*d145!9d3p1m/p1s!*-!1|1!7d8p1m/p1s!!-+:>2!8u:p6o/f1N)b4qdqfjwo!h)F4yuqbpnt!v>s!fu<b!NsufvuqvosJoT!FtDbBu!v4subbunf!)udtpomppds!!|0!!*)swpfmdp4d)!24/d1f*w!),h!odjpqmqpbsN*f*o<p!U~d!jn$mfjoGeTjFgDB!!4$djfgw!!e~f!g<jco!f0e!)bV!tofsDvjuoffsp!o<U2p9o1f9N4b3q/q1j!o,h!**1!2w6f:d344!5P/q1u!j,n!jw{!f+e!D:j3o8f4p9o:U/p1o)f!N+b!qwq!j>o!hc)!w4fddf4w!!d<p8m4p6s1*:!1|1!1d1p/m1p!s.!!+*>7!9u8p6o5f3N1b/q1q!j,o!hwF)y!q+p!twv!s>f!<b!!d4pdmfpws!!|>!!*nwb!y4)dwffwd)4u)j1G/U1E*P-e!odBpUmSpSs!!4.d!f1w/!11*5h*o<j!qsqfbuNvfsoop!Uqdpjxn)m)jdGpTmFpDsB!f+t!V))7e/f3o!j+g!fdep!mgpjs$!,!!1g/j6e*o*f!$0!!)~d!p<m*p*s3!/+3!))47d/f3w!!+-!*d7p1m/p1s!!,,!!*28/",ke["toneMapping.fs.body"]="g$jjego!fe$fg!j<o*fceh)sV/tefJM)jhoofjbqsqUbpNoffoNpbUqdqjjnomhj*GT!FJDeB/!s>h!cc!h>s!/MejJo!fb*shUopjoqfqNbbNqfqojpoUhd)jJnem/jsGhTcF*D<B!ft$Vf)mejfgo!jegffgej!ogfjem)fV$tf!S<f*jcohisb/seeJU)phoofjNqbqqbqNjfoohp*Uo!pJfeo/jsDhecf!{>j!nSjfujqoPi!b>s!ecUhpso/feNJb!qq*jhoohj)qJqeb/Nsfhocp*U<o!pf$ofjmDjfgt!Ve)fegfjo",ke["output.fs.body"]="g$jjegoeff$g!!P<Q*BbR/VsFpm!pwDffdt5v!gJgej!e>!!-wufidh5j)MphvoujhpphjuovhpM)j5hdifuw-!!>2!/e1J*!<5!df$wf!mtf",ke["instancing.vs.head"]="g$jjegoeff$g!!V~T!F<`*J{OzTyU/B*O*D1J/O1H!-!sbjueu)s5jdcfvwu!f+!!nybjus5u!bbnN)b)ufs{jjymJbontsupboo!dofsev<u!fwsf!d|4!!*uysjbsoutbgnp!s5nuEbjns!fodju!j-psoj)ej!o4!dwf",ke["envmapPhong.fs.body"]="g$jjegoeff$g!!VTgFj`eFoOfW$NB!Q<z!uwjftdo4f!udobJnqfbsNbwUopfG!s+b!hi!u>h!oofpssunTbsmbjm{vfd)fwqXtp!s+m!e{Qzpyt/jsupjmppoD!w.o!fv!D>b,n!fusibhQjpMthjoujjpphou*v<p!!wf*dE4E!Bx`pHsOmJeEOOpFsMnCb`mQ!B>N!WjOoFw)fesftofjUgsfbeo!tggjpmsfn$Ej!s<f*dzuujjptoo)fouposJnqbbmN-w!ovfW!j+f!xiNubhuosfjsyu*T<s!bm$vjdgfeqftg!!-F{OzWyN/BsQp`mNpPDEwFo`fS!F-GuMiFhDjUMJhPoOjp!hwufvdp4)!ysjfng!m>f!duuiWhfjdM!h>o!jspfhgumvfpd!u)*dYbJnNf`sHbOUJpEGOsFbMhC-`!QxBpNsWmOeFO)pesfnobjmg*f<e!!g$jfmmft$f!!<w*fzdu4j!tsoffgumofJdqubWNfwdo!f>!!+s!figushbodfus)udTbsnbfmsvbdUfpqGts!b-h{-z!yx/psspmmepODpwsonfb!m+-!!usifhgjsMbhdoujjpphouSvbpu!j-pu*i<h!jM$hfoojepjhguv!p)$yjjgne!f>g!!uFiOhWjNMBhQo`jUpZhQuFv`pD!VCZFMQ!JwUfMdV5N!`fHoOwJDEpOmFpMsC!`>Q!BuNfWyOuFv!sgffDevgcjf$)f!owgnjbeqo-f!$wf!d<4*)1g/m1j)q5FdofwwN!b>q!!s+p!mspfDgwmoffd!u5Wdffdw/!y-f!tsmffg$mf!d<u*W1f/d1/!z-{d*f*W<u!df$mfgmfjsg!!-eqfbgnjwooffe))WFVOfWcNvBDQf`sUvZuQyFf`uD!V>C!Fs`pVmWp*Dw!owff!d5",ke["lightsPhong.fs.head"]="htoupsivQdouo!jCmmCj`ofotQvigpgojhENubduffssjjebomJ!`|F!Sw!ffdt4v!gegjjgEguvdtffsDjpemopJs`<F!Sw!ffdo4j!gtfqef$dv!mbhsoDppimQposo<j!mgCm`pubduf!stjqEf`dFvSm!busdTfisjjoEj`oFfSt!tf<o!jggmfpeb$u!!t~q!f<d*vsmpbmspTDufstfvoghgujie</!m~b<j!swfpujben!)SuFs`fEcjnsbfMd`uG`ECSmCj!o+o!Qfidpoobhj)edbpsostju!!>j,o!!fJtovdgjgejfEouudMfjshjieuo!je/jusifhdjuMMejfhuiduf-m!gdfpso!t|u!!*juoi!hHjfMpenffuudsfjmdgDfpso!uufiyhuj!Mheffpundffumsgzf-S!!dupvoptouj!!j-om!bCjmsjfouobQni!pmobhjNsbfuufbsNjhbomp!inQbouofjsmjCb!mo-j!!juotpovpud!!S-fzgsmuffdnupffehM!juhyifuu!ospfDgdmjfsduuffnepMfjHh!iouj*!!u|t!ogpmdp!b-uf!deopbujOeMb!s>s!jt!b4udvfswb!uofj)!euptuo)phdf)phnofpuisQzo/oojpmsCn`bfmt-v!gegjjsEfuddufMsjjheiouJ/`eFjSs!fedjupjwp!o~*!*<<i!uwhfodf4s!ujTsssbbmevjdbfoqdtf/!m>b!jespfuuObMn!!++!!e*jtstffdoujMojjhiiTus/bdmpvmdpfsq<t!/smfbgjmsffduubfne!M-jshpimup/DesjbsmfvddufEqjtg/gmvbtjfs!f,u>b!nj!s-smbbenjsbpood/fz!s+u!fCnSpEfGh`!M-bsnjcEfxsfuj)wn/bzusfusfjnbpmf/he!j-gogpvjtufdDfpsmjpes/*u<i!hsjfMgumdffdsujfee)MhjohpiiuQ/oeojjsmfCd`uGTEqSfCd!v+m!bfsd!o,b>j!ejbss",ke["lightsPhong.fs.body"]="<CimujhooofQsiupToshbNmbvudffsqjtb!m>!!nibuuhfosfjsbumT<s!bnmbvudffsqjtb/mm/bejjsgfguvbtnf!D<ptmtpfso!j>o!jeijtg!g>v!ttftDfpomjposj/isThscb<m!vndbfuqfts/jmbbmj/stfqufbdnv!m<bssbDmpvmdpfsq!t>!",ke["aoMap.fs.body"]="g$jjegoeff$g!!VTgFj`eBoPfN$BQ!<!*t$tjfgo!iehfvgpjso/fmeb)jBsPfNuBbQn`!S-`o2p*jt!vgmmdpdbPuu!obfnjccjnfbo!u-PWdOdumpvet)joppoj!t>v!m)dudfPysubvmsvfd3fEq)TbfpuNvbqqn-p!dw!V>w+*!/ssb!m.v!d2f/q1T*u!d+f!sbjpeNobjq/JuoiuhfjoMtejfuuzd!f,m!g2f/s1!<<!**$sfjmEjxgf!jewf/gzjsouffen)pBfPhN!B-Qm`bSn`s3p*o/!zgsmupfbnup!fbhn)cujpfeo)ufPudbdsmvvutbjtp!o>!!>W!O)uupfey!uuvbspfm3gE!)b*pSNCbQq)-e!fwoVjwg3f*e/!s%!%.!!*2Q/B1N*W!O+F!`bFpTNVb)qeJfooujfgoftej!ugzj!$,!!2</o1p<j!tv$mfdmdjPgu!oeffjgcjnobf!e>)+B!PfNtBvQg`gHj`E2u*df!sgjmepobju/!ubinhcjjMfeofuuPddfdmmgvftsj!pog!j>e!o)fu$fy!u<v1s/f23!E,)!bzpuNjbtqo-f!uwoVJwq*b/Nhp!b.!!+2!/*11*/!2+!!.b!pcN/b*q3JwoVuwf!o-tqjbuNzp!b,)!E23/f1s<v!uy$ffum)j!g>!!eofpgjjtovfmed)dBPPuNoBfQj`cHn`b3!*ub!pgmmgp!bu*!3b`nCc`jQfBoNuPPBd)demfvotjjgpfoe!!>g!j)muff$yu!v<s1f/32E!),b!pzNubjqt-o!fwuVowJ3q*b/Nhp!b.!!+2!/*11*/!2+!!.b!pcN/b*qwJVowu!f-oqtbjNupzb!),E!32f/s1v<u!yf$uf)m!j>g!!oepfjgtjvomfded)PBuPoNfBjQc`nCb`!2u*bp!mg",ke.blitScreenVS="~b!u<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<t!pwqb)s3zdjfowh!!>w!fwdV3w!!w<V*w1</!2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/",ke.encoding="~w!f<d*5s!pMmjpodf)bssbUfpoMjjMopfUbmsf)yjfoU!uwvfqdo5j!!wobsmvvuff*s!!||!!s*fsupvmspod!!w5bdmfvwf)<s!b~f!owjfMdp5U!mnfbyqfUUfqybfNmwUopfM!j5odffbws!)~w!f<d*5f!vwmbbmwv)fC*H!S|t!psUfsubvfsooj!MM!joosfvbusfUsp!M|j!o*ffbvsm)bwwb!m5vdff*w<)!m~f!ywffUdu5v!qtuSvHPCpUUpsMbjfoofjbms!)5jdof!ww!f~d!5<!*wfbvmmvbfw*)!s|b!fsofjuMvpsUoC!HwSftd!5o)snvjuyf)sq!p|x!)*wfbvmmvbfw/!s5hdcf!w+)!s1b/f:o5j8M9p7U8m3f:y9f7U!u,v!qwofjd!45)d1f/w1!6~3!2<4*3b8/1f2v5m*b-w!!w-f*d*4*)*39/154*2*4-1!1w/b1m)v4fd/fswh!c-!c+h!s1//f1v8m8b4w:):m4b9v1r9F-o!bwifUdt4t)fmmf)t4tdUfiwb!o-F3r:v/b3m2)!w+b!mcvhfs//sfhvcm-b!ww!f-d*46)611//115)145d6f*w*!*.*!-6!6w1b/m2v!f+/!b***<7!7~7!2w5f/d15)!4Mdjfowf!b-scUhpst/SfHvCm)bjwo)!xwpfqd)5y!jwnb)m5vdff*w!!|o!ssvfu",ke.cubeEnvReflectionFS="g$jjegoeff$g!!F~O!W~N!B<Q*`1U/Z2Q!F-`*DGVqCjFn`!V-W2s!pm$pedf!g-j1osfp!mdpvdc)fyVjWn`)n5bdyfNwj!qoMsfvwuffms!!9</*11/!2!$,e!fugojJoqfj!nd!v-csfjVEWf`mnqjnobNtj!q-MqfbwNfwmo!f5)/W1Vf!cv$Desfbgfjoojfm!jdcv!c>f!V2Ws`pnmbpydU!j4mdffTwj!{|f!!f3t6m7f/!1~!!<*$1e/f2g!j-o1fs!pdmvpcdf)V5Wd`fnwj!ooUsjvmuffTsj!{|f!!*217//11!>!>g!mGpqbjun!)h!fgujG!b<d*fu)owJfqdj4n!!e-jssjfEdfumjqpnob*t!!|-!qwbfNdw4o!fb)cWtVEfjcsvfDdsubjfpooj!m>j!cb!c>t!)1esjpsmfpddu!j4pdof*w<!!<g*mqpjbnu)!sgpbpdmfg!!>>!!.u!o2J/q1j<n!!jugb!p)mbgc!t<E*jqsjfnd)uujdpbos/gy!!>?!!GbqcjtnE!jusbfpdmugj!p<o*/m{f*w!f|M!qjjgN!y)bbnc`tWEVjfscfvddu!j-p1on/!y-!*?t!tbfcotiEhjvspfsd)uqjjpNop/Uzt*t!fgobidhfv!p>s!)eqjnsbfmddu!j>p!oq/jyn!!?u!b1p/m1g!!@|!!1*/t1t!f;o!i4h/v1p<s!!fumbtpfm!gg!b-dsfj!E>f!meqjnsbftd!u4jdpfow/!z-!q?b!N1w/o1f!!@E!32s/f1m!q;n!b5t/)1W<V!f~c!vfDmftsfv!u|y!fjug!!5)dbfcwt!E~j!s<fqdjunj!poos/v{u!f?s!!b~c!t<E*jtstffdouijhpvop/sz!*+!!g7b2d/f2!)>3!hepjms!f+d!u1j/p3o!/.{!!>?!!q1j/n1!!|@!!f3t/m1f!!;~!!6</61n<!!,f!m*t7fs!!g.b!d6fs!)>!!0e!j*s6fnd!u.j!p7on/)z!!+?!!*1t/t1f!o@i!h2v/p1s!!;.!!56/s1)<!!>~!!qsjfnu!v|s!o*!7gsb!d>f?<!!t~t!fwofidh3v!phsf)u!VgWj)!wfftdm4f!!e~j!s<f5dnu!j,p!o*-6!sg!m.p!b5us!)g!b0d!f**5!n|!!.w!f6dn3)!!v+w!<*!tjtgf!o)ighbvdpfs!!>.>!!51s/)1!*>!!|q!jvnw!!|>!!*w6fsd!3>)?e!jtstffdouijhpvop/s{)-!!gejj!sfftdmufj!p~o!/<z2*n!!0,!!b*c5ts)!e.j!s2fsd)u!j0p!o*/2yn*!<.!!~5!nf)m!t+f!!*jtgt!f)ogibhdvfp!s>!>.!!22/s1)*!!>|!!qvjwn!!>|!!w*f5ds3!)>.?!!etjtsffodiuhjvppos/)y!-g!j.!!fetjmsff!d~u!j<p1on/!{,*!!*02!sb!c.t!)1esj)s!f0d!u*j1pno!/.z!*2<n!)~!!+f!m*ttft!fjogi!h)vgpbsd!f.!!>1>s!)3!/>1!*q!j|n!!v|w!!*>2!sw!f>d?3!)t.t!feojishfvdpusj)p!og/jy!-<!1e/j1s!f>d!uqjjpno!/uzb*p!m0g!!b|c!t*)tetjfsofidhuvjppso!/u{b*p<m!g~)!qfjmNtpfU!tjtgf!o)ighbvdpfs!!>u>b!p4m/g1!*!1|/!5v!w7!n>!!fwofjdg3f)e.$!e!js9f4d1u1j/p1o!/7{w-!!feojjsgffdeu$jp!o/2z3*/!10!!7bsc!tf)oejjgsffed$uj!po1//y4*!<6!n~!!ffomjtgff!ej$g!!)g7b2d1f/!1>!>6!w5!/f1o*j!g|f!ev$w!!>!6w1f4d/31)!.6!se!jfsofjdgufjep$o/!y-1!/e3j!s5fnd!ufjopjog/f{e*$!0!!b7c5t1)/e1j!s5fwd!ufjopjog/fze*$<!!~!5f/m1t!f5!s|!!fvowj!g>f!ew$fd!3)1e/j2s!f.d!u2jnp!of/oyj-g!feej$sf!du7j8p3o//1z!*2!w0!!fbocjtg)feej$sf!du9j/p1o!/2{s*!<f!o~j!gsffeu$vs!o!11//36!!.+!!1)nv!wf!o,j!g2f/e1$*<!!~:!4w4f/d14!!1cwj!mfjoojfgbfseD$vc!fV1W/)2t!b1nsq!mffosj3gEf!ef$ow!N~b!q-g!jwefodf4$!e!j<s*fzd/ugj!p-on-c!!g-mnpub)uy!jnnj!qoJsovuu*f!s|!!<g*myp/bgu!!-gsbcd!f-!m>c!)hyfjunG!b>d!fn)ce!j4sdffdwu!j<p*oy*/<g!!g-mspub!u-!mguj)myujfns!J>o!un!u>!!4ndbfyw)!d<vcchfsV/W*`*nwjvo!N-jqqbMNfwwoffm)!E.3!fnsjvquJyofuu-)!s1b/f1o*j<M!pnUjmqfJyofuU!q>b!Nnwboyf)!n>j!qmJco!u4-d!fdwv!c<ffV{Wj`TnmjfoyNfjuq!M>f.w!fym/*w<v!!g<mcphbsu/!*g*bwdvf!T-jq{bfN!w>o!ff)yEq33f)snvjuqyJfouu)*s<b!fgomjpMbpuU!muffyyffUmqTbjN{wfo!f>!!>2!/s1c!!04!d)f4w/!1<!f+{!jdTvmcffyVfWu`!n>b,y!Uzj/mwfvT!j<{cfh*s</!**$wjvg!e-fqgb!NQwCoSf`)FEO3WfNsBvQu`yGfBuM)TsFbf!owjfMdp3U!mvfwy!f>U!qhbfNuwVoWf)!e>j!ssfud!u4jdpfow-!!<gfb{djfT*m!f+y!f)ug!b>d,f!Tyj/{wfv!!.<!c2h/s1/**!*,w!v1!/-6q<b!Nw$offm)tEf3f!swvfudy3f!uv)ws!b>f!ohjfMupVUWm)feyjfsUfqdbuNjwpoof-!!>g!bmduf!*4!d+f!w)!gbfdtfmTfj${f!!<.c!h2s//1**w<v!!w-fqdb3N!wgo!f>)!Eg3sfbsdvuu)yvfwu*!<o!svvwu!f,s>!!1F/T6M!B.G!`gQ<B!NW$OfFo`eSjCgQ!!gjfge!g)jg$bd!f<!f?{!j3T/m1f*y!f|u!!v>w+/!zw!v,!><!*gfb{djfTTfjd{bfg<!!+g!b1d/f3!!..>!!f4{/j1T<f!m~j!Uvywb/ny`!W,V>f!cgvbdd!f-!1+/!1g)bydbfnT!j+{!f1</!4j!g>!,)!nyj/qwJvo!u<!f={!jdTvfcmfjVUWo`jnnb`yWNVjfqcMvfdw!f+m!*1!/|3!!v+w!/uzo!J,s>f!u3m/j1g!!+>!,d!vzc/fwVvW!`~n!b<yfU{jjmTf",ke["clipDirection.fs.head"]="g$jjegoeff$g!!D<MuJoQf`dEsJfSQFqDjUmJDPvO!u!bvpomjgg!pnssnp!gjjoouv!!v<DompjjquEdjfs",ke["clipDirection.fs.body"]="g$jjegoeff$g!!D~M!JQg`jEeJoSfF$DU!J~P!O<e!sjbgd!t)jveD!m|j!q*E*jssjfed!u-j*puoo!f?d!s1f*Q!q|j!mwDfvd)44!defjws)!u>p!ew!f?d!4*)o1p/j1u-j!t1p/Q1m-b!d1p/M1w*!<-!sj$ej)guepfeg)!!VgWj`!DMfJtQmf!$wf!d~4!!<demsjbqdQtpjtej!u|j!p*o*!s>j!ew!M-p*dubomfQdpstfjQuqjjpmoD<v!)4$dffowe)jugpe!!j?g!!*)ovpDjmujjqtEpjQsqfjdmudj!p-os!j=e!)3u*p!e|)!!egjjs!/~y!!<>*!12//11!<-!1~/!1f!m-t{f/!wjVgw!))4vdDfmwj!q>E!jospfjduujjtppoQ!q=j!m4d*!!<|1!/e2j.s!/>y!!y>/!s.j2e/!1|<!!*~:!!f=m!tofp!jjugd!f)svjDEmqjjqmEDjvs)f!dgujj!pfot!m=f!!5~*!!<|*!1e/j1s!/-z1!/>1!!2-/{1/<w!V~w!)f4mdtffw!!j>g!!o)pvjDumjjtqpEQjqsjfmddu!j<p1o/!2=!!>6!*y!/|s!jeej!s|/!z*!9>!!=.!2o/p1j<u!d~f!sfjmEtqfj!mjDgv!))!vgDjm!jfqtEmjfs!fdQuJjMpDo`!W=V!!7g*f!e|g!je$js!/~{!!<>1!/22/.1!<>!!~{!/fsmjtef!!|j!g*!8)!v=D!mojpqjEujdsf",ke["clipbox.fs.head"]="g$jjego!fN$BY!`<C*P6Y/`1D!M-J6Q/Q1F!S-!6?/!11)4!dvfowj!g>p!synb!Njqojum!dv!D4mdjfqwq!fustToipbdq!f<]*N6B/Y1`.C!P-Y6`/D1M.J!Q-Q6F/S1^.<)!4vdofjwg!p>s!no!jcNpqpjmm!dv!D4mdjfqwq!fustDompjdq!J<o^oSfFsQ]QNJBMYD``CYPPYC``DYMBJNQ]QyFjSs^u<b!NvsofjqgqpjsmnD!vn!b5u",ke["clipbox.fs.body"]="g$jjego!fN$BY!`~C!P~Y!`<DoMsJvQuQfFsS!!<?e!s1bd!twjfed!4|!!w*M*p6d/b1m!<=!!g*pmsb!d)pjMowu)!iju!h>o!f1m<)!!j>!a=!!^NjB]Ys`fCoPoYJ`qDjMmJDQsQfFqSq<j!mjD,v,!*%!%|!!3w!M>p>d!b^mj!]>f!qwbfidT4s)fvqDqmjjmqDqvf!s}N}b!u*s*j*yo]jjN^q!j+m!dw!f-dm5b)dwpXMpws)moebQipUtsjfuujbpfos-h!)2m/m1b*!*%<%!!j*g*!y)bvNDqmjjmqdq!f-smTbidbpqMfw])jo^b!i>U>t!t2f!m%)%m!mvbD)m!j>qaq!f^sjD]msjfqoJo",ke["fog.fs.head"]="g$jjegoeff$g!!GPgHje!ovfo$jg!p<ssnb!GwhfpdG5v!!vuGbpphmDgp!mnpssp<g!jvoovj!g<pssbnf!OchpppGmv!!vuGbpphm<g!!n$sjpggejfogv!!GPfHt`mFfY$Q3!<!zvuojjtgopfsEnh!pgGmvp!bu",ke["fog.fs.body"]="g$jjegoeff$g!!G~P!H<*!sjpgu!d)bvGGhpphg*!!-|*!xg/mepJb!u-!cehfsq/usip!m>p!D.hwpNGwvQ)p5tdjfuwj!p-oe/J{)<y!jn$!j>g!eefJg!!GgPjHe`oFfY$Q3!<!*gimupqbfue!!g-pshbGGbhdpuGpvs!!->s!b2f/O1h!p.G!vf)yqqf)u.t!ivuGppphnEtf!o>t!jsupzu!d+b!GvhGppgh!Eufboptmjgu!z!f+t!meff$qu!i<!*+i!ueqf",ke["skinning.vs.head"]="g$jjegoeff$g!!VTgFj`eToLfJ$OO!J~O!H<f!ovpocj!gopssvnu!fnsb!u<5^!*cjj)oueoNjb]utsfjdyj<s!uvboNjfgoppscn!!>n!bfuo5p!cc!j5ouebNnb!u|s!j*yjJ!ouwbfpsmtgf!<o!jb!uuutsojpcdv)uyfj!swufbdN5f!otplCjuofJho!e5fuyb<n!!b<u^uTsFjOcPvCu`fY!BwNf]dt5f!dtjlsjuobXNffjohpicu!<5!ub$nj!gnesfpgg!jCoPvO!F`fUtFmYfU$VS!F~!!<vfoojpgcp!sons!viujfhsi!q<!*t5bwn!q-m4fws!3-E3!wc!p-o2fwU)f5yuubvns!f><!!fvoopjcg!p5sunb!nj!o<u*!*czp!o-f*U6f/y4u!v,s!fyT)j!{+f!<y!en)b3ud5f!wh!f-ufCspvoufyNfbUufsojpyc))dEp3oftsuv!ujyof!ug!m>p!b5uw!!j5*d!f|w!!g<m*p*bzu!!-k*!6>/!3j!!,+!!y5)/!1+<!!ygem)p3bduf!wy!!->f!snvpuey)fkU-f!ogpmcp)bEu3)fcspvoufyUffuy!u>v!s4fwT!j5{dff*w*!<<!*g*mzp!b-u*!6z/!2>!!,g!myp)p!s+)!ky!e0)!3gdmfpwb!u-)fcspvoufyUffUyfuovpscf)TEj3{ffs*v*u<y!fgum!p>b!u3!we!y5!d>f!w2!/<1*!*0z!!g-m*p6b/u1)!c,p!oyf)U!f+y!uyves)f3Tdjf{wf!*-<f!sgvmupybfuU!feozp!c>)!E23/f1s!v0u!ygfmup!b>u!)2cwp!o5fdUffwy!u<v*s6f/T1j!{,f!*z<)!!z+!!>z!e",ke["skinning.vs.body"]="g$jjegoeff$g!!VTgFj`eToLfJ$OO!J<O*Hx/!enfbnus5p!gctpoobfsNub!u-Y{!z>y!/h*feufCopoojflNtb!u+s!jfyt)stflwjooJJyojesfuyb/Nye*o<j!cn)b)u55d!fcwp!o>f!NebfunZs!p>g!thofbusCup!offNtbmufs$jy!)<t{lzjyo/J*oeeffoyo/jzl*t<!!+n!bfut5s!fcwpooJfyNjbsuu[b!N>e!ohjfcu)C!p>o!feNfbnusspjgyt)otblsjuo!Jo*eSfCyQ/){e*f<o!jngbfue5!!}c}p!o*fHNObPuIXQ!)>e!fhofjugCfpeo!fgNjb$us!j<yx)/tulijhojJfoXeofjyl/tx!*+<!!ynfbuus5f!WtoljjlotN!b+u!sXjuyb!N>f!onpbcu!5>),1!/e1f*o<o!jtlltj!o<N{b/uusijhyj!f,X>o!jtlltj!o+X!fyjfhuisuf/Wyo!j+l!tc!p+o!f[NubbuNYf<o!ptcl!j>o,N!beufsojoyj!l,t>!!<tzl/juoiXhfjjfhXiouj/lzt!!++!!cypfoufsNfbWuoZj<l!tt!l+j!oZNubbuNsfjoyp!c,!>>!,t!lejfooXofjjlhti!u</y{/!u+i!hcjpfoXfoNjblut[!<+!!tylfjuosNfbWuosjjlyt!!,+>!!YtulbjNofXofpjch!i>u,/!xe!f+o!ocjplotf!N<b*u1X/<1!)t5ldjfowN!b>u!sejfyo!o>j!lctj!o5edNfbwu!s<j*y1J/o2w!f-s{tzfy!/+e!ftnlsjpogNtboubssjuy)!5+d!fcwj!o+e!NybjussujbyN<e!opjcck!f>d!uyOfpussnfbWmo!j>l!tw!f5dd5f)wt!ljgojNeboufs$jy!!<+{!zwyf/d*5*)1p/c1k!f-duuoOfphsonbbUmu-d!f1k/c1p*)*5/dyfzw{!<+!!y$jjsguebfNgo!jVlTtF)`5UdBfOwH!F>O!Uuo!fphcokbfUdu",ke["shadowMap.vs.head"]="g$jjegoeff$g!!V<TeFs`pTpIDBxEpPeXbNiBtQ!5!dvfowj!ghposjnz!snbbwu!5<!ytjisbuebpNx",ke["shadowMap.vs.body"]="g$jjegoeff$g!!V<T*F1`/T2I!B-E{PzXyN/BeQfn!stpigbteopbxsDup)p5sdef!w>!!+t!iybjespuxbNNbmufsejpyN!v+!",ke["shadowMap.fs.head"]="g$jjegoeff$g!!V~T!F`gTjIeBoEfP$XN!B<Q*q!ev!o-j*gzp/sfn{!jcTpmpfmy!ftui!b-eEp4xeDcv)mWmV<p!Uvfocjvgdp!s-nq!btNbxnpqembfist3)Ef!stbiqbneppDxEN3bfqs<v!uvyofjug!possnv!uwffsd!3!fttimbfe$px!T<j*{1f/<:!!v0o!j1g/p2s)n!!+g!m*p!b*uq!et!i-b*ezp/xfJ{ojuTfmoftyjfuuz!<-!yvyozj/gupfstng!ggpm!p,b!uE!4teicb)eWpVxpCUjfbctv<d!!v-oqjbgNpxspne!bgimtp)bfus!btqinbpeDpEx3Sfbsevjuvytf<u!!v,o!j*gqpes!n-!*czp/pfm{!jtTimbfeypfxuS!f-dyfyjyw/fu<f!twgbgspz!j,o!hE!4wefcd)5W!VtpiUbfecpvxdD!p-pqsbeN<x!pgembpibtu)!fusfbyqunvpsDfE33EfDspvnuqybfsuf!),t!b*nqqem!f-s*3zE/!fe{fjqTumifty-f!uw!f-dz3y!zv/wu-f!tggmgppb!u,!!dEp4neqcb)sWfV*p!U|f!csvfdu!v-sqob!Ntxupfeqb)idtp)nfqsbbsqfn-p!DvEo3qfbsdvluSyHfCuB!U,p!E*fqqeu!i-)*uzf/yfu{vjsTfm3fEy)feuf!q-uziyty-/!uvfwt*g*g*p<!!,~!!Eg4mepcb)uW!VupfUyfucvvsdf!3-EqTbiNbxeppexbMifts)qf)stbbqnnqpmDfEs33fEs!veufyqfuui!t,-!!*wqfed!3-!*tzj/{ff{-j!Twmffdy3f!uv!w--E!4gemcp)bWuV!pdUpfncqvbds!f-*q!b|N!xdppeobtiut!)wffsdb3q!nppgDgEt3ffus!v>u!ywffud!3,)!1*/q1e-!!-2*/z1/*f<{!jwTfmdf3y!fuuf!y-fymzTzj/{uff!t>g!gwpf!d,3!)E24/e1c*)!W0V!ptUjf{cfv<d!!w-fqdb3N!xdpfeobuistp)jfesVbWq!n>p!DgEm3pfpssv)uvywf!u+!!,t!j*{qfe!!,-!*1z//6f*{!j0T!mtfjy{ffu<!!-gymzpyb/uu!fmtcg!g>p!!u,f!yEu4vescf)3WEVDppUnfqcbvsdf!)-eqfbqNuxipte-b!idtf)ofussbpqjnepVDWE!3,f!suvfuyyffmuT!j,{!f*!q+e!!p-g*gzt/ffu{/jyTym-f!ydfpun!q-bzszfz*/<u!fgtmgpgbpu!!,m!uE!4>e!cu)fWyVupvUsffc3vEdD!p-nqqbbNsxfp)eebfiqtu)ifts-b!qdnfpoDuEs3pfjsevVuWy!f,u!!u,f!y*fqmeT!j-{*fz!/+f!{pjgTgmtffyuf/uy!z--z!zdyp/nuqfbtsgfg*p<!!,g!mEp4beuc!)sWcV!p>U!fucfvydu!v-sqfb3NExDppenbqibts)ff)sebfqqnupiDtE-3!fdsfvouuysfpuj!e)V!Wo!s,v!uuffsy!f<mzT/jf{{fj!T+m!fpygfgut!f+u!/tzvyj-e!bdSpxnpqebbsift*!<+!!g*m2p!b-u2!!s.u)!3>d!fuwf!y>u!vusfft3gEgDpp!n3qdbfswf!)e*fUqGuPiTt`-G!DdQf`oFuQsZpUj`eQVBWN!X,P!EuBfIyTf)meTfjo{jfg!f+e!!p}g}g!t*fGuD/Qz`zF-Q!ZdUp`nQqBbNsXfP*E<B!IwTf)de3f!ogj!g>f!eg!sgbjd$u)!v<w*!o+p!jtujj{tfp!Q,p!U1u/i6h*j<m!)gfm{pjbmub!nbs!p>o!!n>j!yE)4mecc-!!4mduf-w!!g</tzb*j<C!xgpmepbbiut!!c>!,>!!qnej!y<)*sscb-f!Osbus-f!ngb/Dzx*p<e!bgimtp!b.u!!sdb!G>b!snfjnyb)Dbx-p!ecb-i!tg)/!y0*!<*!ssbffuOvbssof!ndb<D!x~p!egbmiptb!u.!!h*foupTjiubjetppxQ)ptUbuniqhmjfms)3iEu!htoifbme)p!x>N!bqqe-!!uwbfpdm3g!!t<i{bzeyp/xeNsbpqpTDjx{pfe-b!igtm!p>b!uo!ptjiubjetppxQCpjUbuti-h!jgmm!p4bduf!wt!i<b*e*p1x/S3b!e-j1v/t5-)!3wdffdw5!!+t!ifb{ejpTxqDbpNpxspee*b!i|t!)g!m0p!b*u1!/t2i)b3edpfxw!!>>!!2f/{1j<T!mtfiybfeup!x3Ddpfpws!e|/!y*zs{b!G0b>s!ftnibbDexppxeDbpipts!eu/bxp<m!gt!i-bsebpfxODbpspfsneb/D{x!p,e>b!itti!buebppxmCgj!b-te<s!ptpiDbxeppexbDiptp!s5ed/f{w!!>-!tnvjjoe)btSixbpeepbxiDtp!pusbep/m{g-!!-1t/b:j:C:x:p:e:b*i<t!!cuwbfpdm5g!!j-ofG{sjvTtqubvNnxWpfedb!i>t!!c3wdffdw5!!-)qtbiNbxeppexbDiptp!sEe3/syf!m?q>n!b1t/)1x-p!etbiibTeupoxjDppQpusfeh/!yu!b=p>m!g2!/~1!-<!*t6i8b/e1p!x-D6p8p4s/e1/)z3!d?f>w!!1,/!1s-b!otbimbqe!p+x!D*p6p3s/e1/!z-!6=3>2!/21/)13*d<f!wc!popsmv!ujfosG!s~v!t<u1v/n3!!>.!!bZmomh)jjto!G+s!v{t/uwv!n>W!fzd/*s<b!ocbwmfqd!3<!1g/s3v!t,u!vZnoUhfjttu!W+f!d1!/>3!!c,w!fyd/3w)!j>o!Gys/vstbuovbnm-q!!t<i*bze/pwx)Dophpjste!/>{!!Z=o>h!j2t/!1u*b<p!mcgp!p|m!!*gfsovPtuutvpnnUmfbt!u>!?>!!zb/mWmt)cgbs)v!tgujv!nfUtfmtfu!W~f!d<*Y<o!hjjgt!!)+g!s1v/t3u!v,n!UYfothuj*t!!|+!!{$/jwg!!>e!fyg/jsobfoeb)mTqI!B<E*PyX/NwB)Qo`hUjZtQ!F>`!QYDoGh*jt!!wufbdp3m!gu!f|y!f*mfTojP{uft!p>n!mwbf!d>3?)!2y//1W*t!c0b!)t!igbje!pfxtNmbfq!T~j!{<fy</!wg!m.p!b1u/!5e!y>1!!y>/!s.b!oubfmyqf!m*T1j/{1f!/?y!!{+/!wt)i!bgejp!x|S!b*efjovPtu<t!pgnmmpbb!u>!?e!z{1/!W>t!c.b!)u!fgyjf!m<Tmjf{yff/UzB!u+t!ptnimbbe!p.x!S1b/e2j!v>t!<f!ogPmuptbpun!meby!2u!b>p!m,g!!u<fZyff{mjTTjm{ffy/fyu!!++!!t6i/b2e!p>x!SmbfeyjfvUtB<u!tgpmnpmbbu!!uebzp2m!g>!!<,z!yu/fwy!f>m!Tsjb{ofb/mzq!!+3!dtfiwb!e<p*xZSfb{ejjTvmtf<y!ftui!b+e!p1x/!3>!!.)!!1u/f2y)u!v+s!ff3cEvDDppnUqfbmsbfd)tt!i>b+e!pwx!N<bfqc-v!DtpiUbfempbxdDtp!p>s+e!/Wytzc!b,!!<w*f*d{3/)Wetyc1b-!!-ezz/1W*t-c!bt)iybbenp!x-Dyp/pWstec/b{)*y!b,n!!u0f!y1u/v2s!f>3!EfDcpvnDqpbUsffm)btditb!eupbxpNmbgq!-<!*twi)btecpbx!D>p!pWstec/by!z4!d,f!ww!f|d!3*)Z1f/{1j-T!mefzy1f*u-!!utbipbmegp!x-Dwp!p4sdef/w{)*W!V,p!Uuffcyvudv!s3fd3fEwD!p~n!q<bxspfe)btiitb!eopsxvNubfqs-!!~t!ibgejpexoDfp$ps!e</*y{z/!e,s!pwpfDdx3p)eebyi2t-!!-ezzy1/*e-s!ptpiDbxeppexbDiptp!s-eq/b{N*x!p,e!buifty)ufvssbfq3nEpDDpEn3qfbssvfu)ytfiub!e>p!xxNpbeqb-i!tt!ibfetpmxfD$pp!s<e*/1y/z:!!,0!!w1f/d23))!e+y!1*-!!*1{//1e*s-p!ptDixbpeepbxiDtp!p-s*e2/z{e*!!-,2!yuef)y3udvfswf!3,E!Dzpyn/qebsspfp)DtxipbeebpixtN!b-qf-{!jtTiqbbeNpxxpDepbpiste!/-yqzb-N!xtpiebbeiptx)DqpspfsMex/p{e*b!i,T!Eu3ffysuvvusyff3uE!D,p!n*q{b/sefs)ptpiDbxeppexbNibtq!--!*t2izbee!p-x1D/p1p)s3ed/fywz!!,,!!zwyf/de3s)pepyD2x-p!e1b/i1t*!--!ft{ijbTeqpbxNDxpppesbei/t{!*-!q,b!Nuxfpyeubvistf)3qEsDfpMnxqpbesbfi)TtEi3bfespvxuNybfqu-!!,t!i*b{e/pexsDppppDsxep/eybzi!t,!!-w*f2dz3e)!e-y11y-e!)e3zd2f*w-!!,t!izbye/pexsDppppDsxep/e{b*i!t,!!-uff{yjuTvqsbfN3xEpDepbniqtb!s-fq)btNixbpeepbxiNtb)qq-s!ftMixbpeepbxiDTpEp3sfes/vyuzy!f,u!!w,f!d*3{)/1e/s1p-p!Dexzp2e*b-i!tt!i-b*e1p/x1D!p-p2syee/){3*d!f,w!!u,f!yzuyv/sefs3pEpDDpxnpqebbsift)!t-ifb{ejpTxqNbbNqx-p!etbiibte!p-xqDbpNpxspee/byizt!),q!swffMdx3p)eebyi2T-E!3efzs2v*u-y!ftui!b,e!p*x{D/pepsspep/D{x*p!e*b!i+t!!)-2z/y1/!e0s!p:p/D1x*p<e!bi$tf!m-jfg{!jeTfqgbjNoxfpee)bTiItB!E-PqXbNNBxQp`eUbZiQtF)`qQsDfGM`xTpPeGbUi*TE!3wffsdv3u!yuffuy!f,m!T*j{{/fe!s>p!pwDfxdp3e)b2i/t1!*-!*01!/t1i!b-e1pyxeN)b3qdTfjw{!f,<!!zgym/pebsup!peDyx1p!e>b!i.t!!u-ffy{fjmTTqjb{Nfx/pye!b+i!tt!i-bqebpNxxSpbeebjivtt)<q!sgfmMpxbpue!beizT1E!3>f!s.v!uuyffyuf!m,T!j*{{f//ezs!p+p!DtxipbeebpixtS!b-e*j1vzte<!!-g2mypeb)u3!defyw2!!,>!!z,y!/uefsypfpmDTxjp{efb/iyt!!+-!ft{ijbTeqpbxNSxbpeejbvitt<!!-gqmbpNbxup!eebzi2t!)>q!s,f!MuxfpyefbmiTTjE{3ff/szv!u+y!ftui!b,e!p*x{S/beesjpvptD<x!pteibbietp!x-!*>1!z)e!!u-f1y/u1v)s3fd3fEwT!i,b!ezpyx/Mefsspqp)DtxipbeebpixtN!b-qf-{!jtTiqbbeNpxxpNebbqiTtj!{-fq-b!NtxipbeebpixtD)pqpssfeM/xypze!b,i!TwEf3df3s)veuyy1f-u!!e,z!1**{-/!etsipbpeDpx",ke["flowMap.vs.head"]="g$jjego!fN$BY!`<G^MUPDXF`KPCCPK`FXDPUM!G?`!Y1BN!]vwoVjxgppmsgn!!3ndbfuw5!!hgomjpzxsNbbwu!s<j^yU]DNFBKYC`PG`MXP",ke["flowMap.vs.body"]="g$jjego!fN$BY!`~G!M<P6X/`1P!C,K!F*D{U/!m?b!d1pM!wwVfxdp4m!gg!m,p!xzV/wmMbpddpbMmw<V!xgppmsg!!)-jyo/um!bjd!p>M!w1V<x!pjm!g=)!3NdBfYw`!G>M!P^Xj`]PwCVKxFpDmUg<!!<j{,z,y*/!*|*!1g/m2p!x-V{wzMyp/debfmn!s>p!g)tgombpsxuN)b5udsfjwy!]+j!^y!j+s!uvbNNpmef",ke["flowMap.fs.head"]="g$jjego!fN$BY!`<G^MUPDXF`KPCCPK`FXDPUM!G?`!Y1BN!]vwoVjxgppmsgn!!3tdbfnwq!mhfosj3zEs!bgwm!p<x^UUfDyFuKvCsPf`]XNPBMYG``GYMBPNX]`ePfCmKcFbDoUF^x<p!mvgo!jmgpppscn!",ke["flowMap.fs.body"]="g$jjego!fN$BY!`GEMOPFX``QPPCPKMF`DMUM!P?S!O1V$!w!f~d!5!ggjmepoxfU$fy!f<mc<h!s/$mVfOySfPUMxMp`mMgP!P>Q,`!TcUhBsS/UeJ!!gpfst!m)fj$ou!!<jb>c1h<s!/jm!f=y!fNUBxYp`mGgM!P>X,`!PbCcKhFsD/Ue<J!!j,*,!*B!C|H!Sg`mEpExBU`fFyEfPmN!`>E!OuFfMyCu`vXsPfM3GE!))gemfpoxjUgffyeu!vgsjfm]fJ$^-!!<gbmcphxsV/wm]fjy^f*U<x!pjmgg!!)>g!mbpcxhFso/becJm!fe*]!jB^C!H%S%`!FbEmJmS)SmFfWtPt`UFiEbPoN)`gEmOpFxMVCw`]XjP^M-G!!w)fedf3o)j2g/f1e*!*g*j!m%f%$!b!m<mb)/hmsffybfuUfxspUmigb!o>)!gbm/pexJV!w]*j!^B-`!FwEfJdS3S)F1W/P1`*F*E*P*N!`E$OjFgM!Ce`fXgPjMoGf!e))e!fGoMjPgXf`eC!MgFjOmEf`$NP!E<Fc`hNsV/MmUfJyQfMUZx`pSmHgC!!>*!c!hJse//esJh!c!*+!>C!HgSm`pFxEUJfSySfFmW/Ps`hFcE<P!N`$EfOmFjMgC!`eXfPgMjGo!f)ee)f!oGjMgPfXe`!CgMjFmOfE$`N!P<EbFc`hNsV/MmUfJyQfMUZx`pSmHgC!B>!+*!b!cJhes/",ke["envmapPhysical.fs.head"]="g$jjegoeff$g!!V~T!F`gFjOeWoNfB$Q!!<v*o1j/g1p)s4nd!fgwm!pobsuv!uffosw!NbfqtJmofu$fo!t<jzuuzj<t!ovfoujogJpqsbnN!wgomfp!b+u!!cghmsj/qsFpomwpNDbqqb<N!wo$fj!goesfvgu!fFsO!W<N*BtQt`fUoZiQhFv`pDsV!C-Fdf!Wvuodjfgmpgsfns!!t-bqnbqnmwfosfD)vWcVff!cfvoDwfnsbvqu<y!fu$!f>m!tsfpm!pvDoqjbgNpwsonf!!t5bdnfqwm!f<s*3yEj!sfuobwNnxbfqj<W!v!$-fdofeWjugdf!mwgffds4)!ohpfjuuJdCfMsJjsEsnbsepjgbtoodbfs)Udfptostfuw!ojjo!!>w!fddf4W!uodpfsmngbfms*!!<|*!*t$tjfgo!iehfvgpjso!f+e!)tFtOfWoNiBhQv`pUsZ!Q-Fm`bDnVsCpFo`!V-Wd*fW!uwdffdm4g!fxsp)symjenO)pfs{njbmmb!n>s!pjoo!w>f!sdtffWUusdbfomtggfpss!n<E*jmsbfndsupjop!o-)sojpEsxnfbjmw-!!.v)WujdffxmNgbfuss!j>y!*d<f!Wwufddf5m!gffosw!N<bdqfDWpumdpfsm!g>f!su!f4ydufvws!fD*vWcVf`VFWC)VfDo`wFnQbZqU-`!QxBpNsWmOeFO)pesfnobjmg-f!e2!/g1j*$<!!s|f!u*vtstof!oQiJh!v+p!sf!ouwbNpbmqgD!pomjp!su/tsohpcd!!+-!mfbonwsNpboq!J4oduffwo!tojju!zu<t!op$df!m-tsfjE!xsffjuwv!s4od!fwwf!do4j)!1u/t1o*p<d!)f$dfoobejjegbS!M~C!Jwuffdh4!",ke["displacementMap.vs.head"]="g$jjegoeff$g!!V<TtFb`jECJuToQfMnBfDdFbNmFqOtUjNeB!Qub!pvmogj!gnpsspng!jtobvn!q<mffmsb3dET!ueojftnqfmdbbdmfqntfjoeu!Nubbqp<m!gv!onjsgp",ke["displacementMap.vs.body"]="g$jjegoeff$g!!V<T*Ft`bEjJCTuQoMfBnDfFdNbFmOqUtNjBeQ!,!!ufsmbbodtTguposfnnffed!b,m>q!tojpes!n+b!myj/{*fw)Vpwc!k-fqdbuNOuposfnnbfmd*b!m+q!t)juef)yEu3vfs";
var At=f.graph3d.PostProcessing=function(U){var u,k=this,G={},g=!1,K=!1,x={model3d:!0,mesh:{is:[0,2,1,1,2,3],pos:new yr([0,0,1,0,0,1,1,1])},mat:null},Y={type:"blitScreen"},s={type:"fxaa"};!function(){y.keys(At).forEach(function(o){G[o]=new At[o](U)})}(),k.getModule=function(F){return F?G[F]:k},k.getModuleList=function(){return y.keys(G)},k.resetModules=function(){for(var f in G)G[f].resetProperties()},k._serializable=!0,k.handleDataModleChange=function(u,e){u&&(k._serializable&&u.setPostProcessingData(k.serialize()),u.removeSerializeListener(k.onDataModelSerialize,k)),e&&(e.addSerializeListener(k.onDataModelSerialize,k),k.deserialize(e))},k.onDataModelSerialize=function(T){"serialize"===T.type?k._serializable&&(U.dm()._postProcessingData=k.serialize()):"deserialize"===T.type&&k.deserialize(U.dm())},k.isDeserializeDisabled=function(t){return!k._serializable||t.a("sceneBloom")!==n},k.isSerializable=function(){return k._serializable},k.setSerializable=function(L){k._serializable=L,L||U.dm().setPostProcessingData(n)},k.serialize=function(){var X,b,q,r,j={};for(b in G)if(q=G[b],r=q.serializeProperties){X={},q.enable&&(X.enable=!0);for(var p in r){var P=q[p];P!=r[p]&&(X[p]=P)}y.keys(X).length&&(j[b.toLowerCase()]=X)}return j},k.deserialize=function(B){var Z,g,u,A,e,M={},z={};for(Z in G){u=G[Z],A=u.serializeProperties;var a={},$="scene"+Z,d=B.a($);d!==n&&(a.enable=d);for(var e in A)d=B.a($+e[0].toUpperCase()+e.slice(1)),d!==n&&d!==A[e]&&(a[e]=d);ck(a)||(z[Z[0].toLowerCase()+Z.slice(1)]=a)}if(ck(z)&&(z=B.getPostProcessingData()),z)for(g in z)if(g&&(Z=g[0].toUpperCase()+g.slice(1),u=G[Z])){M[Z]=!0,A=z[g];var E=!!A.enable;k.enableModule(Z,E),Z="scene"+Z,B.a(Z,E),u.resetProperties&&u.resetProperties();for(e in A)if("enable"!==e){var d=A[e];u[e]=d,B.a(Z+e[0].toUpperCase()+e.slice(1),d)}}for(Z in G)M[Z]||(u=G[Z],u.enable=!1,u.resetProperties&&u.resetProperties())},k.getRenderTarget=function(){return u},k.blitScreen=function(J,V,E,S,p){var N=U.getGL();if(null==J)S=V,p=E;else{var j=J instanceof Ss;if(j){if(V&&(V.type||V.model3d)&&(S=V,p=E,V=null,E=null),0==V||0==E)return;V&&E&&J.setSize(N,V,E),J.bind(N),p&&p.viewport?U.setViewport(N,p.viewport[0],p.viewport[1],p.viewport[2],p.viewport[3]):U.setViewport(N,0,0,J.width,J.height)}else S=J,p=V}p&&p.clear===!1||N.clear(16640),p&&p.preRender&&p.preRender(N),S&&S.model3d?U._prefabRenderer.render(N,S):(x.mat=S||Y,U._prefabRenderer.render(N,x)),p&&p.postRender&&p.postRender(N),j&&J.unbind(N)},k.enableModule=function(C,m){var j,I,N,J=C.split(",");for(j=0,I=J.length;I>j;j++)N=J[j].trim(),G[N]&&(G[N].enable=m);g=!1;for(N in G)if(G[N].enable){g=!0;break}};var j=function(){if(K)return!1;var E=U.getGL();return E?(u=new ch.RenderTarget(U,E,null,null,{samples:A.renderTextureSamples||1,minFilter:9729,magFilter:9729,depthFormat:U.isWebGL2()?36012:null}),K=!0):!1};k.contextLost=function(){K=!1;for(var q in G)G[q].contextLost&&G[q].contextLost()},k.render=function(Z,B,V,J){if(g&&(K||j())){u.setSize(Z,B,V),u.bind(Z);var S=Z.getParameter(3106);S&&0===S[0]&&0===S[1]&&0===S[2]&&0===S[3]?S=null:dh(Z,[0,0,0,0]),Z.clear(16640),U.setViewport(Z,0,0,B,V),J=J||{};var F=J.renderAxis!==!1,I=J.renderEdit!==!1;J.renderAxis=J.renderEdit=!1,U.renderScene(J),u.unbind(Z);for(var O=0,$=U._glCapabilities.maxAttributes;$>O;O++)Z.disableVertexAttribArray(O);var o,Q=u;for(o in G)Q=G[o]._42(Z,Q)||Q;U.setViewport(Z,0,0,B,V),S&&dh(Z,S);var n=k.getModule("Fxaa");return n&&n.enable?(s.resolution=[1/B,1/V],s.image=Q.texture,k.blitScreen(s)):(Y.image=Q.texture,k.blitScreen(Y)),Z.useProgram(U._prg),U._renderAxisAndEditHelper(F,I),!0}}};f.graph3d.PostProcessing.HueSaturation=function(M){function R(){var b=M.getGL();return b?(h=new ch.RenderTarget(M,b),u=!0):!1}var h,n=this,P=!1,u=!1,p={type:"hueSaturation"},c=[],a=[],Z=[];this.serializeProperties={hue:[0,0,0,0,0,0,0],saturation:[0,0,0,0,0,0,0],lightness:[0,0,0,0,0,0,0]},this.resetProperties=function(){var C=this.serializeProperties;for(var Q in C)this[Q]=C[Q]},this.resetProperties(),y.defineProperties(n,{enable:{get:function(){return P},set:function(c){!!P!=!!c&&(P=c,M.iv())}},hue:{get:function(){return c.map(function(P){return B(180*P)})},set:function(a){if(c!==a&&7===a.length){for(var H=0;7>H;H++)c[H]=a[H]/180;M.iv()}}},saturation:{get:function(){return a.map(function(T){return B(100*T)})},set:function(d){if(a!==d&&7===d.length){for(var C=0;7>C;C++)a[C]=d[C]/100;M.iv()}}},lightness:{get:function(){return Z.map(function(_){return B(100*_)})},set:function(L){if(Z!==L&&7===L.length){for(var m=0;7>m;m++)Z[m]=L[m]/100;M.iv()}}}}),n.contextLost=function(){u=!1},n._42=function(I,n){return P&&(u||R())?(p.image=n.texture,p.hue=c,p.saturation=a,p.lightness=Z,M._postProcessing.blitScreen(h,n.width,n.height,p),h):void 0}},f.graph3d.PostProcessing.Bloom=function(X){function I(){for(var b=0;h>b;b++)H[b]={type:"bloomBlur",defines:{KERNEL_RADIUS:Z[b],SIGMA:Z[b],OVERRIDE_ALPHA:!!S}}}function O(){var B=X.getWidth(),R=X.getHeight();if(!B||!R)return!1;var n=X.getGL();if(!n)return!1;i=[B,R];var v,Z=Math.round(i[0]/2),k=Math.round(i[1]/2);for(j=new ch.RenderTarget(X,n,Z,k),J=[],l=[],v=0;h>v;v++)J.push(new ch.RenderTarget(X,n,Z,k)),l.push(new ch.RenderTarget(X,n,Z,k)),Z=Math.round(Z/2),k=Math.round(k/2);return I(),m=!0}var w,k,x,S,e,s,t=this,b=!1,m=!1;this.serializeProperties={strength:1.5,threshold:.55,radius:.4,overrideAlpha:!0,selective:!1},this.resetProperties=function(){var z=this.serializeProperties;for(var X in z)this[X]=z[X]},y.defineProperties(t,{enable:{get:function(){return b},set:function(B){!!b!=!!B&&(b=B,X.iv())}},strength:{get:function(){return w},set:function(l){w!==l&&(w=l,X.iv())}},threshold:{get:function(){return k},set:function(x){k!==x&&(k=x,X.iv())}},radius:{get:function(){return x},set:function(b){x!==b&&(x=b,X.iv())}},overrideAlpha:{get:function(){return S},set:function(Z){!!S!=!!Z&&(S=Z,m&&I(),X.iv())}},selective:{get:function(){return e},set:function(O){!!e!=!!O&&(e=!!O,X.iv())}}}),this.resetProperties();var j,i=[256,256],J=[],l=[],h=5,Z=[3,5,7,9,11],H=[];t.contextLost=function(){m=!1,s=null},t._42=function(V,B){if(b&&(m||O())){var p=X._postProcessing;if(e){s||(s=new ch.RenderTarget(X,V)),s.setSize(V,B.width,B.height),s.bind(V);var t=V.getParameter(3106);t&&0===t[0]&&0===t[1]&&0===t[2]&&1===t[3]?t=null:dh(V,[0,0,0,1]),V.clear(16640),X.setViewport(V,0,0,B.width,B.height),V._blooming=!0,X.syncRenderState(),X.renderScene({renderAxis:!1,renderGrid:!1,renderEdit:!1}),V._blooming=!1,t&&dh(V,t),s.unbind(V)}p.blitScreen(j,{type:"bloomHighPass",smoothWidth:.01,luminosityThreshold:k,tDiffuse:e?s.texture:B.texture});var u,d,c=j,D=Math.round(i[0]/2),q=Math.round(i[1]/2);for(u=0;h>u;u++)d=H[u],d.texSize=[D,q],d.colorTexture=c.texture,d.direction=[1,0],p.blitScreen(J[u],d),d.colorTexture=J[u].texture,d.direction=[0,1],p.blitScreen(l[u],d),D=Math.round(D/2),q=Math.round(q/2),c=l[u];return p.blitScreen(J[0],{type:"bloomComposite",blurTexture1:l[0].texture,blurTexture2:l[1].texture,blurTexture3:l[2].texture,blurTexture4:l[3].texture,blurTexture5:l[4].texture,bloomStrength:w,bloomRadius:x,bloomTintColor:[1,1,1]}),p.blitScreen(B,{type:"blitScreen",image:J[0].texture},{clear:!1,preRender:function(U){Ar.for(U).glState.blend.apply({enabled:!0,equation:32774,func:[770,1]})},postRender:function(Y){Ar.for(Y).glState.blend.apply({equation:32774,func:[770,771,1,771]})}}),B}}},f.graph3d.PostProcessing.Dof=function(v){function k(){var x=v.getGL();return x?(z=new ch.RenderTarget(v,x),H=!0):!1}function r(f,T,L,J){q=null;var S=f.getCanvas(),p=S.width,K=S.height;if(L=L||1024,p>L||K>L){var I=L/Math.max(p,K);p=Math.round(p*I),K=Math.round(K*I),Z||(Z=qb()),S=Q.resizeImage(S,p,K,Z)}var E=v.getGL();if(n||(n=E.createTexture()),B=Gi(v,E,S,n),W=T||.01,X=!0,v.iv(),J--){if(q)return;q=Q.callLater(function(){r(f,T,L,J)})}}var z,B,b,T,p,Z,n,q,J=this,E=!1,H=!1,W=0,X=!1,m=Tc.generateUUID();this.serializeProperties={aperture:.025,maxblur:1,image:null},this.resetProperties=function(){var U=this.serializeProperties;for(var n in U)this[n]=U[n]},y.defineProperties(J,{enable:{get:function(){return E},set:function(f){!!E!=!!f&&(E=f,f||(X=!1),v.iv())}},image:{get:function(){return b},set:function(j){b!==j&&(b=j,X=!1,B&&(v.deleteTexture(m),B=null),v.iv())}},maxblur:{get:function(){return T},set:function(z){T!==z&&(T=z,v.iv())}},aperture:{get:function(){return p},set:function(i){p!==i&&(p=i,v.iv())}}}),this.resetProperties(),J.contextLost=function(){H=!1,B&&(v.deleteTexture(m),B=null)},J.setImageFromGraphView=function(p,X,s){this.image=null,r(p,X,s,2)},J._42=function(G,h){if(E&&(H||k())){if(!B){var Z=Nn(this.image);if(!Z||!Z.comps&&!Z.tagName)return h;f.Default.setImage(m,Z),B=v.getTexture(m)}var V=h.width,l=h.height;if(V&&l)return v._postProcessing.blitScreen(z,V,l,{type:"bokeh",tColor:h.texture,tDepth:B,aspect:V/l,aperture:this.aperture,maxblur:this.maxblur,useG2d:X,threshold:W}),z}}},f.graph3d.PostProcessing.Blur=function(u){function n(){var b=u.getGL();return b?(U=new ch.RenderTarget(u,b),C=!0):!1}var U,j,q,g,x,v,p=this,l=!1,C=!1,t={type:"blurDownSample"},T={type:"blurH"},k={type:"blurV"};this.serializeProperties={value:0,downSample:!1,iterations:1,layer:"main"},this.resetProperties=function(){var e=this.serializeProperties;for(var L in e)this[L]=e[L]},y.defineProperties(p,{enable:{get:function(){return l},set:function(m){!!l!=!!m&&(l=m,m?u.addRenderLayerListener(Y,this):u.removeRenderLayerListener(Y,this),u.iv())}},downSample:{get:function(){return g},set:function(W){g!==W&&(g=W,u.iv)}},value:{get:function(){return q},set:function(m){q!==m&&(q=m,u.iv())}},iterations:{get:function(){return x},set:function(m){x!==m&&(x=m,u.iv())}},layer:{get:function(){return v},set:function(J){v!==J&&(v=J,u.iv())}}}),this.resetProperties();var Y=function(M){if(l&&M.layer===v&&"post"===M.phase){var I=u.getGL();if(!u._picking&&!u.isReflecting(I)){var g=u._postProcessing.getRenderTarget();g.unbind(I);for(var f=0,d=u._glCapabilities.maxAttributes;d>f;f++)I.disableVertexAttribArray(f);p.drawImpl(I,g),g.bind(I),I.useProgram(u._prg)}}};p._42=function(){},p.contextLost=function(){C=!1,j=null},p.drawImpl=function(M,S,F,p,b){if(C||n()){var P,Z;if(S?(P=S.width,Z=S.height):(P=u._viewport[2],Z=u._viewport[3]),P&&Z){var f=u._postProcessing;"boolean"!=typeof p&&(p=g),F==O&&(F=q),b==O&&(b=x),b=Math.max(1,Math.round(b));var e=Ar.for(M).glState.depth,R=e.enabled;if(e.enabled=!1,p){F/=2;var s=[P,Z];P/=2,Z/=2,j||(j=new ch.RenderTarget(u,M)),t.image=S.texture,t.texelSize=[1/s[0],1/s[1]],f.blitScreen(j,P,Z,t),S.setSize(M,P,Z)}else j&&j.setSize(0,0);U.setSize(M,P,Z);for(var B=[],V=0;b>V;V++)B.push(F),F=Math.max(1,Math.floor(F/2));for(var V=0;b>V;V++){var K=B[b-V-1];T.image=p&&0===V?j.texture:S.texture,T.value=K/P,f.blitScreen(U,null,null,T),p&&V===b-1&&S.setSize(M,s[0],s[1]),k.image=U.texture,k.value=K/Z,f.blitScreen(S,null,null,k)}return e.enabled=R,S}}}},f.graph3d.PostProcessing.Glitch=function(A){function K(){if(l&&d){k=Date.now(),j=0,M=1e3*C(d[0],d[1]),b=[];for(var L=1,N=l.length;N>L;L+=2)b.push((L>1?b[b.length-1]:0)+M*l[L]/Q)}}function L(){A.redraw()}function v(){var Z=A.getGL();if(!Z)return!1;u=new ch.RenderTarget(A,Z);for(var y=W*W,l=rp(W,W),J=l.getImageData(0,0,W,W),O=J.data,c=0;y>c;c++)O[3*c+0]=m(256),O[3*c+1]=m(256),O[3*c+2]=m(256),O[3*c+3]=m(256);return l.putImageData(J,0,0),B=Gi(A,Z,so),E=!0}var u,M,k,j,b,B,w,d,l,G=this,N=!1,E=!1,C=Tc.randomFloat,m=Tc.randomInt,Q=0,I={type:"glitch"},W=64;this.serializeProperties={onlyReflector:!1,period:[2,3],intensity:[3,.3,1,.1,0,.4]},this.resetProperties=function(){var U=this.serializeProperties;for(var j in U)this[j]=U[j]},y.defineProperties(G,{enable:{get:function(){return N},set:function(s){!!N!=!!s&&(N=s,s&&K(),A.iv())}},onlyReflector:{get:function(){return w},set:function(S){!!w!=!!S&&(w=S,A.iv())}},period:{get:function(){return d},set:function(s){d=s,K(),A.iv()}},intensity:{get:function(){return l},set:function(u){u||(u=[1,1]),l=u,Q=0;for(var L=1,C=u.length;C>L;L+=2)Q+=u[L];K(),A.iv()}}}),this.resetProperties(),G.contextLost=function(){E=!1},G._42=function(O,D){if(N&&(E||v())){var p=!!A.isReflecting(O);if(p===!!w){var W=D.width,f=D.height;if(W&&f){var t=A._postProcessing,Z=Ar.for(O).glState.depth,F=Z.enabled;Z.enabled=!1;var X,H=Date.now();return H-k>b[j]&&(j++,j>=b.length&&K()),X=l[2*j],I.seed=Math.random(),I.byp=X?0:1,I.tDisp=B,X&&(I.angle=C(-Math.PI,Math.PI),I.distortion_x=C(0,1),I.distortion_y=C(0,1),I.amount=Math.random()/30*X,I.seed_x=C(-1,1)*X,I.seed_y=C(-1,1)*X),I.image=D.texture,t.blitScreen(u,W,f,I),Z.enabled=F,requestAnimationFrame(L),u}}}}},f.graph3d.PostProcessing.Fxaa=function(u){var v=this,b=!1;y.defineProperties(v,{enable:{get:function(){return b},set:function(t){!!b!=!!t&&(b=t,u.iv())}}}),v._42=function(){}},og(Q,{accordionViewExpandIcon:Hp(Jm),accordionViewCollapseIcon:Hp(Jm,!0),accordionViewLabelColor:qn,accordionViewLabelFont:Nb,accordionViewTitleBackground:bb,accordionViewSelectBackground:Gr,accordionViewSelectWidth:3,accordionViewSeparatorColor:n,splitViewDividerSize:1,splitViewDividerBackground:bb,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:Vh,rect:[2,2,12,12],background:Jm}]},propertyViewLabelColor:Pn,propertyViewLabelSelectColor:qn,propertyViewLabelFont:Nb,propertyViewExpandIcon:Hp(Lp),propertyViewCollapseIcon:Hp(Lp,!0),propertyViewBackground:cb,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:Gd,propertyViewColumnLineColor:Gd,propertyViewSelectBackground:Gr,listViewLabelColor:Pn,listViewLabelSelectColor:qn,listViewLabelFont:Nb,listViewRowLineVisible:!1,listViewRowLineColor:Gd,listViewSelectBackground:Gr,treeViewLabelColor:Pn,treeViewLabelSelectColor:qn,treeViewLabelFont:Nb,treeViewExpandIcon:Hp(cc),treeViewCollapseIcon:Hp(cc,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:Gd,treeViewSelectBackground:Gr,treeViewDoubleClickToToggle:!0,tableViewLabelColor:Pn,tableViewLabelSelectColor:qn,tableViewLabelFont:Nb,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:Gd,tableViewColumnLineColor:Gd,tableViewSelectBackground:Gr,treeTableViewLabelColor:Pn,treeTableViewLabelSelectColor:qn,treeTableViewLabelFont:Nb,treeTableViewExpandIcon:Hp(cc),treeTableViewCollapseIcon:Hp(cc,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:Gd,treeTableViewColumnLineColor:Gd,treeTableViewSelectBackground:Gr,tableHeaderLabelColor:Pn,tableHeaderLabelFont:Nb,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:uk,tableHeaderBackground:cb,tableHeaderMoveBackground:tf,tableHeaderInsertColor:Gr,tableHeaderSortDescIcon:ql(Lp,!0),tableHeaderSortAscIcon:ql(Lp),tabViewTabGap:1,tabViewLabelColor:qn,tabViewLabelFont:Nb,tabViewTabBackground:bb,tabViewSelectWidth:3,tabViewSelectBackground:Gr,tabViewMoveBackground:tf,tabViewInsertColor:Gr,toolbarLabelColor:Pn,toolbarLabelSelectColor:qn,toolbarLabelFont:Nb,toolbarBackground:cb,toolbarSelectBackground:Gr,toolbarItemGap:8,toolbarSeparatorColor:Sh},!0);var Bt={translateX:1,sortColumn:1},Ct={sortable:1,sortOrder:1,sortFunc:1},Dt={focusData:1},Et={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Ft={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},Gt=function(H,e){e.add(H),H.hasChildren()&&H.eachChild(function(O){Gt(O,e)})},Ht=function(B,t,g,y,D,K,Y,A,v,C,h){var E,M=g.getValueType(C),a=g.getAlign(C);if(g.getEnumValues(C)){var n=g.toEnumLabel(t,C),e=rk||0,s=0,j=K,x=Q.getTextSize(y,n).width;return E=Nn(g.toEnumIcon(t,C)),E&&(s=K+rk/2,"center"===a?s+=(A-(e+x))/2:"right"===a&&(s=s+A-(e+x)),Pq(B,E,s,Y+v/2,C,h),j=s+rk/2),n!=O&&(E?Cb(B,n,y,D,j,Y,A-(j-K),v):Cb(B,n,y,D,K,Y,A,v,a)),void 0}return t=g.formatValue(t),t!=O?M===zc?(Kl(B,K,Y,A,v,t),void 0):M===Rq||!M&&vd(t)?(E=Nn(t?vj:Dk),Pq(B,E,K+A/2,Y+v/2,C,h),void 0):(Cb(B,t,y,D,K,Y,A,v,a),void 0):void 0},It=function(l,h){var H=h.view,n=Dj(l),y=h.column||h.property;H.getDataModel().beginTransaction(),h.editor=l,l.info=h,H.setCurrentEditor(l),H.getView().insertBefore(n,H._79O),oc(l,h.editorRect),l.setFocus?l.setFocus():Ce(l),l.commitValue=function(d,a){l._17Q&&(l=l._17Q),a||H.setValue(h.data,y,l.getValue?l.getValue():l.value),l.close&&l.close(),jf(n)},y.onEditorCreated&&y.onEditorCreated(h)},Jt=function(J,c,M,K,H){var C=$f(J,M),W=c.value,p=c.view,m=H.getValueType(c.data);return C.onblur=C.onchange=function(){p.endEditing()},"input"===J?(W=H.formatValue(W),W!=O&&(C.value=W),C.onkeydown=function(A){Fe(A)?p.endEditing():af(A)&&p.endEditing(!0)},(m===dn||m===Dq)&&e(C,Ae,Q.numberListener)):J===wf&&K.forEach(function(c){var K=k.createElement("option");K.innerHTML=H.toEnumLabel(c),K.value=c,H.isEnumEqual(W,c)&&(K.selected=!0),Vi(C,K)}),It(C,c),C},Kt=f.widget={},Lt=function(A,T,o){vn(p+".widget."+A,T,o)};og(hs,{ms_value:function(P){P.getValue=function(a){var m=this.getItemById(a),p=m.element;return Vp(p)?p:p?p.getValue?p.getValue():p.value:m.selected},P.setValue=function(O,S){var f=this.getItemById(O);if(f){var F=f.element;F&&!Vp(F)?F.setValue?F.setValue(S):F.value=S:vd(S)?(f.selected=S,this.iv()):(f.element=S,this.iv())}},P.v=function(I,U){var N=this;if(2===arguments.length)N.setValue(I,U);else{if(!Yo(I))return N.getValue(I);for(var E in I)N.setValue(E,I[E])}return N}},_46o:function(I){I._icon=O,I._accessType=O,I._valueType=O,I._editable=!1,I._batchEditable=!0,I._align=wq,I._nullable=!0,I._emptiable=!1,I.setParent=As,I.formatValue=function(B){var D=this,v=D._valueType;return D.getEnumValues()?D.toEnumLabel(B):v===Rq?!!B:B!=O&&v===dn?j(B):B},I.setEnum=function(w,b,M,H,p,j,S){var o=this;w&&!Se(w)&&w.values&&(H=w.editable,M=w.icons,b=w.labels,p=w.strict,j=w.maxHeight,S=w.dropDownWidth,w=w.values),Sb(w)&&(w=w._as),Sb(b)&&(b=b._as),Sb(M)&&(M=M._as),o._enumValues=w,o._enumLabels=b,o._enumIcons=M,o._enumEditable=H,o._enumStrict=p==O?!0:p,o._enumMaxHeight=j,o._enumDropDownWidth=S,w&&w.length&&fe(w[0])&&(o._valueType=Dq),o.fp("enum",!1,!0)},I.getEnumDropDownWidth=function(){return this._enumDropDownWidth},I.getEnumMaxHeight=function(){return this._enumMaxHeight},I.isEnumEditable=function(){return this._enumEditable},I.getEnumValues=function(){return this._enumValues},I.getEnumLabels=function(){return this._enumLabels},I.getEnumIcons=function(){return this._enumIcons},I.isEnumStrict=function(){return this._enumStrict},I.isEnumEqual=function(I,D){return this._enumStrict?I===D:I==D},I.toEnumLabel=function(T,v){var g=this,l=g.getEnumValues(v),q=g.getEnumLabels(v);if(l&&q)for(var K=0;K<l.length;K++)if(g.isEnumEqual(T,l[K]))return q[K];return T},I.toEnumIcon=function(A,o){var E=this,i=E.getEnumValues(o),F=E.getEnumIcons(o);if(i&&F)for(var N=0;N<i.length;N++)if(E.isEnumEqual(A,i[N]))return F[N];return n}},_45o:function(i){i._87o=function(l,e,R,b,Z,I){if(l){var _=this,t=_._90I,n=Lj(1);_._columnLineVisible&&(Z-=1),_._rowLineVisible&&(I-=1),0>=Z||0>=I||(_._90I||(t=_._90I={}),t[e]||(t[e]=new td),oc(n,_.tx()+R,_.ty()+b,Z,I),Vi(n,l),_._view.insertBefore(n,_._79O),l.onParentAdded&&l.onParentAdded(n),t[e].add(n))}},i._76o=function(){var U=this,D=U._90I;if(D){for(var O in D)D[O].each(function(Y){jf(Y)});delete U._90I}},i._77o=function(E){var m=this;if(m._90I){var f=m._90I[E];f&&(f.each(function(x){jf(x)}),delete m._90I[E])}}},_47o:function(b){b.getValue=function(E,u){return u.getValue?u.getValue(E,u,this):ah(E,u.getAccessType(),u.getName())},b.setValue=function(V,b,d){if(b.isEmptiable(V)||""!==d||(d=n),b.isNullable(V)||d!=O){var i=this,U=b.getName(V),L=b.getAccessType(V),K=b.getValueType(V);K===dn&&Vp(d)?d=ob(d):K===Dq&&Vp(d)?d=parseFloat(d):K===Rq&&Vp(d)&&(d="true"===d),i._batchEditable&&b._batchEditable&&i.isSelected(V)?i.sm().each(function(_){b.setValue?b.setValue(_,b,d,i):oj(_,L,U,d)}):b.setValue?b.setValue(V,b,d,i):oj(V,L,U,d)}},b.setCurrentEditor=function(g){this.endEditing(),this._currentEditor=g,this.redraw()},b.isEditing=function(p,m){var y=this,n=y._currentEditor;if(!n)return!1;if(m){var f=n.info;return f?(f.column||f.property)===m&&f.data===p:!1}return!0},b.endEditing=function(I){var n=this,H=n._currentEditor;H&&(delete n._currentEditor,H.commitValue&&H.commitValue(H.info,I),n.redraw(),n.getDataModel().endTransaction())},b.beginEditing=function(Q){this.endEditing();var D=this,Z=Q.column||Q.property;if(Z.beginEditing)Z.beginEditing(Q);else{var U=Q.data,g=Q.value,r=D.getSelectBackground(U),R=Z.getEnumValues(U),n=Z.getSlider(U),C=Z.getColorPicker(U);if(n){var v=Xf(Kt.Slider,n);return v.setValue(g),v.getView().onblur=function(){D.endEditing()},v.isInstant()&&(v.onValueChanged=function(){D.setValue(U,Z,v.getValue())}),It(v,Q),void 0}if(C||Z.getValueType(U)===zc){var V=Xf(Kt.ColorPicker,C);V.setValue(g);var X=V.onClosed;return V.onClosed=function(){D.endEditing(),X&&X.call(this)},V.isInstant()&&(V.onValueChanged=function(w,c){D.setValue(U,Z,c)}),It(V,Q),V.open(),void 0}if(R){if(Kt.ComboBox){var h=new Kt.ComboBox;h.setValue(g),h.setValues(R),h.setLabels(Z.getEnumLabels(U)),h.setIcons(Z.getEnumIcons(U)),h.setEditable(Z.isEnumEditable(U)),h.setStrict(Z.isEnumStrict(U)),h.setMaxHeight(Z.getEnumMaxHeight(U)),h.setDropDownWidth(Z.getEnumDropDownWidth(U)),h.onClosed=function(){D.endEditing()},It(h,Q),h.open()}else Jt(wf,Q,r,R,Z);return}var j=Z.getValueType(U);if(j===Rq||vd(g))return D.setValue(U,Z,!g),void 0;if(Z.getItemEditor(U)){var J=_b(Z.getItemEditor(U)),o=new J(U,Z,D,Q),e=o.getView();return e._17Q=o,o.setValue(g),Xh(e),It(e,Q),o.editBeginning&&o.editBeginning(),void 0}Jt("input",Q,r,O,Z)}}},_44o:function(l){l.init=function(X){var R=this,x=R.th=new $t(X),z=R._view=Kj(1,R);R.tv=R._tableView=X,Vi(z,x.getView()),Vi(z,X.getView()),x.mp(function(P){P.property===mg&&R.iv()}),R.iv()},l.getTableView=function(){return this.tv},l.getTableHeader=function(){return this.th},l.getDataModel=function(){return this.tv.dm()},l.getColumnModel=function(){return this.tv.getColumnModel()},l.setColumns=function(w){this.tv.setColumns(w)},l.addColumns=function(c){this.tv.addColumns(c)},l.endEditing=function(){this.tv.endEditing()},l.validateImpl=function(){var E=this,N=E.th,y=Kk(N),s={x:0,y:0,width:E.getWidth(),height:y};oc(N,s),s.y=y,s.height=C(0,E.getHeight()-y),oc(E.tv,s)}},ms_vs:function(s){s._41o=function(){return this._29I.height<this._59I},s._43o=function(){var u=this;u._41o()&&(u._58I||(yd(function(){u._94O()},Sc),u.iv()),u._58I=new Date)},s._94O=function(){var E=this;if(E._58I){var w=new Date;w.getTime()-E._58I.getTime()>=Sc?(delete E._58I,E.iv()):yd(function(){E._94O()},Sc)}},s._93I=function(){var w=this,G=w._27I;if(w._58I||!w._autoHideScrollBar){G||Vi(w._79O,G=w._27I=Lj());var o=w._29I,E=o.height,f=w._59I,z=w.getScrollBarSize(),H=o.width-z-2,j=E*(-w.ty()/f),Q=E*(E/f),n=G.style;f>E?(wd>Q&&(j=j+Q/2-wd/2,0>j&&(j=0),j+wd>E&&(j=E-wd),Q=wd),n.visibility=Dg,n.background=w.getScrollBarColor(),n.borderRadius=z/2+hi,oc(G,H,j,z,Q)):n.visibility=Bc}else G&&(G.style.visibility=Bc)}},ms_hs:function(n){n._40o=function(){return this._29I.width<this._91I},n._42o=function(){var Q=this;Q._40o()&&(Q._95O||(yd(function(){Q._94I()},Sc),Q.iv()),Q._95O=new Date)},n._94I=function(){var H=this;if(H._95O){var z=new Date;z.getTime()-H._95O.getTime()>=Sc?(delete H._95O,H.iv()):yd(function(){H._94I()},Sc)}},n._92I=function(){var F=this,E=F._28I;if(F._95O||!F._autoHideScrollBar){E||Vi(F._79O,E=F._28I=Lj());var A=F._29I,l=A.width,n=F._91I,h=F.getScrollBarSize(),x=A.height-h-2,R=l*(-F.tx()/n),D=l*(l/n),K=E.style;n>l?(wd>D&&(R=R+D/2-wd/2,0>R&&(R=0),R+wd>l&&(R=l-wd),D=wd),K.visibility=Dg,K.background=F.getScrollBarColor(),K.borderRadius=h/2+hi,oc(E,R,x,D,h)):K.visibility=Bc}else E&&(E.style.visibility=Bc)}}}),ak(vj,im(16,16,[{type:Ro,rect:[1,1,14,14],background:Gr},{type:Wq,rect:[1,1,14,14],width:1,color:jl},{type:En,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),ak(Dk,im(16,16,{type:Wq,rect:[1,1,14,14],width:1,color:jl})),ak(rf,im(16,16,[{type:be,rect:[2,2,12,12],borderWidth:1,borderColor:jl,background:"#FFF"},{type:be,rect:[4,4,8,8],background:Gr}])),ak(qs,im(16,16,{type:be,rect:[2,2,12,12],borderWidth:1,borderColor:jl})),hs._15Q=function(x){x._29I=rm,x._59I=0,x._91I=0,x._5o=function(Y){var A=this;A._30I=new td,A._rows=new td,A._rowMap={},A._31I=0,A._14I=0,A._view=Kj(1,A),A._canvas=qb(A._view),Vi(A._view,A._79O=Lj()),A.dm(Y?Y:new gk)},x.getCheckIcon=function(s){var T=this.sm(),X=T.co(s);return T.sg()?Nn(X?rf:qs):Nn(X?vj:Dk)},x.checkData=function(o){var M=this.sm(),I=M.co(o);M.sg()&&I||(this._32o=1,I?M.rs(o):M.as(o),delete this._32o)},x.getDataAt=function(A){A.target&&(A=this.lp(A));var W=B(A.y/this._rowHeight),s=this._rows;return 0>W||W>=s.size()?O:s.get(W)},x.onDataDoubleClicked=function(){},x.onDataClicked=function(){},x.adjustTranslateX=function(){return 0},x.adjustTranslateY=function(q){var P=this.getHeight()-this._59I;return P>q&&(q=P),q>0?0:j(q)},x.onPropertyChanged=function(J){var n=this,_=J.property;Et[_]?n.ivm():Dt[_]||n.redraw(),_===Od?n._42o():_===Fb&&n._43o()},x.getLabel=function(k){return k.toLabel()},x.getLabelFont=function(){return this._labelFont},x.getLabelColor=function(z){var u=this;if(u.isCheckMode()){if(u._focusData===z)return u._labelSelectColor}else if(u.isSelected(z))return u._labelSelectColor;return u._labelColor},x.getStartRowIndex=function(){return this._31I},x.getEndRowIndex=function(){return this._14I},x.getRowDatas=function(){return this._rows},x.getRowIndex=function(r){return this._rowMap[r._id]},x.getRowSize=function(){return this._rows.size()},x.getViewRect=function(){return rj(this._29I)},x.isVisible=function(z){return this._visibleFunc?this._visibleFunc(z):!0},x.getCurrentSortFunc=function(){return this._sortFunc},x.setDataModel=function(r){var L=this,A=L._dataModel,S=L._selectionModel;A!==r&&(A&&(A.umm(L.handleDataModelChange,L),A.umd(L.handleDataPropertyChange,L),A.umh(L.handleHierarchyChange,L),S||A.sm().ums(L.handleSelectionChange,L)),L._dataModel=r,r.mm(L.handleDataModelChange,L),r.md(L.handleDataPropertyChange,L),r.mh(L.handleHierarchyChange,L),S?S._21I(r):r.sm().ms(L.handleSelectionChange,L),L.fp("dataModel",A,r))},x.validateModel=function(){var G=this;G._rows.clear(),G._rowMap={},G.buildChildren(G._dataModel._roots);var Y=G._rows=G._rows.toList(G.isVisible,G),l=0,z=G.getCurrentSortFunc(),Z=Y.size();for(z&&Y.sort(z);Z>l;l++)G._rowMap[Y.get(l)._id]=l},x.buildChildren=function(o){var N=this;o.each(function(w){N._rows.add(w),N.buildChildren(w._children)})},x.handleDataModelChange=function(){this.ivm()},x.handleDataPropertyChange=function(Z){"parent"===Z.property?this.ivm():this.invalidateData(Z.data)},x.handleHierarchyChange=function(){this.ivm()},x.handleSelectionChange=function(u){u.datas.each(this.invalidateData,this),this.onSelectionChanged(u)},x.onSelectionChanged=function(n){var p=this,l=p.sm();!p.isAutoMakeVisible()||1!==l.size()||"set"!==n.kind&&"append"!==n.kind||p._32o||p.makeVisible(l.ld())},x.handleBackgroundClick=function(v){Hb(v)&&!this.isCheckMode()&&this.sm().cs()},x.makeVisible=function(z){z&&(this._23I=z,this.iv())},x.scrollToIndex=function(g){var p=this,k=p._29I,e=k.height,O=p._rowHeight,f=O*g;g>=0&&g<p._rows.size()&&e>0&&(f+O>k.y+e?p.ty(-f+e-O):f<k.y&&p.ty(-f))},x.autoScroll=function(s,o){var b=this,g=b._rowHeight,X=g,u=g/4,O=b._29I,P=b.lp(s),t={x:b.tx(),y:b.ty()};return g>0&&O&&(P.x-O.x<X?b.translate(u,0):O.x+O.width-P.x<X&&b.translate(-u,0),P.y-O.y<X?b.translate(0,u):O.y+O.height-P.y<X&&b.translate(0,-u)),t.x=b.tx()-t.x,t.y=b.ty()-t.y,o&&(o.x+=t.x,o.y+=t.y),t},x.getTopRowOrderSelection=function(){var E=this.sm().getTopSelection(),_={},i=new td;return E.each(function(f){_[f._id]=f}),this._rows.each(function(L){_[L._id]&&i.add(L)}),i},x.getRowOrderSelection=function(){var D=new td;return this._rows.each(function(Y){this.isSelected(Y)&&D.add(Y)},this),D},x.ivm=function(){this.invalidateModel()},x.invalidateModel=function(){var l=this;l._96I||(l._96I=1,l._32I=1,delete l._24I),l.iv()},x.redraw=function(){var H=this;H._32I||(H._32I=1,delete H._24I,H.iv())},x.invalidateData=function(C){var K=this;lp?K.redraw():K._32I||(K._24I||(K._24I={}),K._24I[C._id]=C,K.iv())},x.getFocusData=function(){return this._focusData},x.setFocusDataById=function(V){this.setFocusData(this.dm().getDataById(V))},x.setFocusData=function(R){var A=this,v=A._focusData;v!==R&&(A._focusData=R,A.fp("focusData",v,R),v&&A.invalidateData(v),R&&(A.invalidateData(R),A.isAutoMakeVisible()&&A.makeVisible(R)))},x.drawRowBackground=function(Q,g,k,C,l,D,v){var d=this,H=d.isCheckMode();(g===d._focusData&&H||k&&!H)&&Kl(Q,C,l,D,v,d.getSelectBackground(g))},x.drawData=function(Y,b,K){var g=this,c=g._rowHeight,p=c*K,Z=g._29I,r=Z.x,N=Z.width;Y.save(),Y.beginPath(),Y.rect(r,p,N,c),Y.clip(),g._87o(g.drawRow(Y,b,g.isSelected(b),r,p,N,c),K,r,p,N,c),Y.restore(),g._rowLineVisible&&Kl(Y,r,p+c-1,N,1,g._rowLineColor)},x._12I=function(N){var E=this,x=E._31I,J=E._29I,B=J.x,u=J.y,e=J.width,F=J.height;for(N.beginPath(),N.rect(B,u,e,F),N.clip(),N.clearRect(B,u,e,F),E._76o(),E._93db(N);x<E._14I;x++)E.drawData(N,E._rows.get(x),x);E._92db(N)},x._13I=function(D){for(var P,a=this,V=a._rowHeight,q=a._29I,W=q.x,Z=q.width,F=a._31I,J=a._30I;F<a._14I;F++)P=a._rows.get(F),a._24I[P._id]&&J.add({data:P,index:F});J.isEmpty()||(D.beginPath(),J.each(function(M){D.rect(W,M.index*V,Z,V)}),D.clip(),J.each(function(r){D.clearRect(W,r.index*V,Z,V)}),J.each(function(L){a._77o(L.index)}),a._93db(D),J.each(function(q){a.drawData(D,q.data,q.index)}),a._92db(D),J.clear())},x.preValidateModel=function(){this.endEditing&&this.endEditing()},x.validateImpl=function(){var N=this,G=N._canvas,R=N.getWidth(),w=N.getHeight(),V=N._rowHeight,K=N._32I;(R!==G.clientWidth||w!==G.clientHeight)&&(Wk(G,R,w),K=1),N._96I&&(N.preValidateModel(),N.validateModel());var W=N._29I,I={x:-N.tx(),y:-N.ty(),width:R,height:w},Z=N._rows.size(),l=sc(G),n=N._23I;K||sg(I,W)||(K=1),N._29I=I,N._59I=Z*V,N._31I=B(I.y/V),N._14I=s((I.y+I.height)/V),N._31I<0&&(N._31I=0),N._14I>Z&&(N._14I=Z),N._99I&&K&&N._99I();var v=N.tx(),g=N.ty();(N._40o()||N._41o())&&(N._59I+=N.getScrollBarSize(),N._99I&&K&&(N._91I+=N.getScrollBarSize())),wc&&!fi&&(l.save(),aj(l,R/nk.length,w/nk.length,1)),aj(l,v,g,1),K?N._12I(l):N._24I&&N._13I(l),N._93I(),N._92I(),l.restore(),N._32I=N._24I=N._96I=O,n&&(N.scrollToIndex(N.getRowIndex(n)),delete N._23I),N.tx(N.tx()),N.ty(N.ty())},x.canHandleSelectMode=function(){return!0},x.isDraggable=function(){return!0}},hs._48o=function(q){q._rootVisible=!0,q._rootData=O,q._35o=function(){this._expandMap={},this._levelMap={}},q.validateModel=function(){var t=this,Y=t._rootData;t._rows.clear(),t._levelMap={},t._rowMap={},t._currentLevel=0,Y?t._rootVisible?t.isVisible(Y)&&t.buildData(Y):t.buildChildren(Y):t.buildChildren(),delete t._currentLevel},q.buildData=function(f){var w=this,i=f._id,d=w._rows;w._rowMap[i]=d.size(),d.add(f),w._levelMap[i]=w._currentLevel,w.isExpanded(f)&&(w._currentLevel++,w.buildChildren(f),w._currentLevel--)},q.buildChildren=function(H){var h=this,T=H?H._children:h._dataModel._roots,c=h.getCurrentSortFunc();c&&h.isChildrenSortable(H)?T.toList(h.isVisible,h).sort(c).each(h.buildData,h):T.each(function(M){h.isVisible(M)&&h.buildData(M)})},q.getLevel=function(I){return this._levelMap[I._id]},q.getToggleIcon=function(l){var i=this,X=i._loader,U=i._collapseIcon;return X&&!X.isLoaded(l)?U:l.hasChildren()?i.isExpanded(l)?i._expandIcon:U:O},q.isCheckMode=function(){return this._checkMode!=O},q.isChildrenSortable=function(){return!0},q.handleDataModelChange=function(J){var o=this;J.kind===Id?delete o._expandMap[J.data._id]:J.kind===cp&&(o._expandMap={}),o.ivm()},q.toggle=function(Y){var l=this;l.isExpanded(Y)?l.collapse(Y):l.expand(Y)},q.isExpanded=function(G){return 1===this._expandMap[G._id]},q.expand=function(f){var W=this,h=W._loader;W.isExpanded(f)||(h&&!h.isLoaded(f)&&h.load(f),W._expandMap[f._id]=1,W.ivm(),W.onExpanded(f))},q.onExpanded=function(){},q.collapse=function(Z){var N=this;N.isExpanded(Z)&&(delete N._expandMap[Z._id],N.ivm(),N.onCollapsed(Z))},q.onCollapsed=function(){},q.expandAll=function(u){if(u)this.expand(u),u.eachChild(function(f){this.expandAll(f)},this);else{var e=this;e._dataModel.each(function(v){v.hasChildren()&&(e._expandMap[v._id]=1)}),e.ivm()}},q.collapseAll=function(){this._expandMap={},this.ivm()},q.makeVisible=function(l){if(l){var S=this;
if(!S._rootData||l.isDescendantOf(S._rootData)){for(var a=l._parent;a;)S.expand(a),a=a._parent;S._23I=l,S.iv()}}},q.checkData=function(m){var b,N=this,S=N._checkMode,X=N.sm(),A=X.co(m);if(!X.sg()||!A){if(N._32o=1,S===Pg)A?X.rs(m):X.as(m);else if(S===uo)b=new td(m),b.addAll(m._children);else if("descendant"===S)b=new td,Gt(m,b);else if("all"===S&&(b=new td,Gt(m,b),!A))for(var M=m._parent;M;)b.add(M),M=M._parent;b&&(A?X.rs(b):X.as(b)),delete N._32o}},q.drawTree=function(l,L,y,M,x,s,p){var g=this,T=g._indent,N=g._levelMap[L._id],e=g.getIconWidth(L),v=Nn(g.getToggleIcon(L));v?(M+=T*N,Pq(l,v,M+T/2,x+p/2,L,g),M+=T):M+=T*(N+1),g._checkMode&&(Pq(l,g.getCheckIcon(L),M+T/2,x+p/2,L,g),M+=T),g.drawIcon(l,L,M,x,e,p),g.drawLabel(l,L,M+e,x,p)}},hs._14Q=function(P){P.getIcon=function(Y){return Y.getIcon()},P.getIconWidth=function(X){return this.getIcon(X)?this._indent:0},P.drawIcon=function(w,k,J,L,B,j){if(B){var b=this,s=b.getBodyColor(k),M=Nn(b.getIcon(k),s);M&&(j-=b.isRowLineVisible()?1:0,ks(w,M,Iq,J,L,B,j,k,b,s),Ed(w,b.getBorderColor(k),J,L,B,j))}},P.drawLabel=function(l,a,J,Q,T){var V=this;Cb(l,V.getLabel(a),V.getLabelFont(a),V.getLabelColor(a),J,Q,0,T)}},hs._50o=function(x){x._98I=function(){var $=this,Y=$._39o=new gk;$._60I=new td,Y.mm($._17o,$),Y.md($._18o,$),Y.mh($._19o,$)},x.setColumns=function(W){this._39o.clear(),this.addColumns(W)},x.addColumns=function(e){var Z=this._39o;e.forEach(function(X){if(!(X instanceof Nt)){var v=_b(X.className);X=Xf(v?v:Nt,X)}Z.add(X)})},x.onColumnClicked=function(){},x.onCheckColumnClicked=function(){},x._3Q=function(Y){for(var n,j=0,L=this._60I,P=L.size();P>j;j++)if(n=L.get(j),n.column===Y)return n;return O},x.getColumnAt=function(Y){var z=this._4Q(Y);return z?z.column:O},x._4Q=function(N){for(var r=this,z=N.target?r.lp(N).x:N.x,X=r._60I,p=0;p<X.size();p++){var j=X.get(p),t=j.startX;if(z>=t&&z<t+j.column.getWidth())return j}return O},x.getToolTip=function(l){var B=this,F=B.getDataAt(l),Y=B.getColumnAt(l);return F&&Y?Y.getToolTip(F,B):O},x.adjustTranslateX=function(z){var t=this.getWidth()-this._91I;return t>z&&(z=t),z>0?0:j(z)},x._99I=function(){var G=this,b=G._29I,i=G._60I;i.clear(),G._91I=0,G._39o._roots.each(function(p){if(p.isVisible()){var o=G._91I+p.getWidth();G._91I<=b.x+b.width&&o>=b.x&&i.add({column:p,startX:G._91I}),G._91I=o}})},x.drawData=function(W,g,K){var w=this,r=w._rowHeight,l=r*K,V=w.isSelected(g),H=w._29I,p=H.x,e=H.width;w.drawRowBackground(W,g,V,p,l,e,r),w._60I.each(function(Q){var q=Q.column,$=Q.startX,h=q.getWidth();h>0&&!w.isEditing(g,q)&&(W.save(),W.beginPath(),W.rect($,l,h,r),W.clip(),w._87o(w.drawCell(W,g,V,q,$,l,h,r),K,$,l,h,r),w._columnLineVisible&&Kl(W,$+h-1,l,1,r,w._columnLineColor),W.restore())}),w._rowLineVisible&&Kl(W,p,l+r-1,e,1,w._rowLineColor)},x.drawCell=function(L,U,$,h,C,I,S,K){var b=this;if(h.drawCell)return h.drawCell(L,U,$,h,C,I,S,K,b);var l=b.getValue(U,h);Ht(L,l,h,b.getLabelFont(U,h,l),b.getLabelColor(U,h,l),C,I,S,K,U,b)},x.getColumnModel=function(){return this._39o},x._17o=function(){this.redraw()},x._18o=function(w){var h=this;w.data===h._sortColumn&&Ct[w.property]?h.ivm():(h._42o(),h.redraw())},x._19o=function(){this.redraw()},x.getCurrentSortFunc=function(){var i=this,A=i._sortColumn;if(A&&A.isSortable()){var Y=A.getSortFunc(),m=Tb===A.getSortOrder()?1:-1;return Y||(Y=uq),function(n,$){return Y.call(i,i.getValue(n,A),i.getValue($,A),n,$)*m}}return i._sortFunc},x.isCellEditable=function(Q,Z,c){return Z.isEditable()&&this.isEditable()?Z.isCellEditable?Z.isCellEditable(Q,Z,c,this):!0:!1},x._37O=function(A,j){if(Hb(j))for(var _=this,s=_.lp(j),U=_._60I,v=_._rowHeight,B=_._29I,N=B.x,d=B.y,b=B.width,r=B.height,Y=0;Y<U.size();Y++){var R=U.get(Y),D=R.startX,K=R.column,T=K.getWidth();if(K!==_._31o&&K!==_._4o&&s.x>=D&&s.x<D+T&&_.isCellEditable(A,K,j)){var Q={x:D,y:_.getRowIndex(A)*v,width:T,height:v},f={x:Q.x+_.tx(),y:Q.y+_.ty(),width:Q.width,height:Q.height},L=0,q=0;return Q.x<N?L=Q.x-N:Q.x+Q.width>N+b&&(L=Q.x+Q.width-N-b),L&&(_.tx(_.tx()-L),f.x-=L),Q.y<d?q=Q.y-d:Q.y+v>d+r&&(q=Q.y+v-d-r),q&&(_.ty(_.ty()-q),f.y-=q),_.beginEditing({data:A,column:K,value:_.getValue(A,K),event:j,rect:Q,editorRect:f,view:_}),void 0}}}},Kt.BaseItemEditor=function(d,W,H,a){this._data=d,this._column=W,this._master=H,this._editInfo=a},Lt("BaseItemEditor",y,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var Mt=f.Tab=function(){Ig(Mt,this)};Yf("Tab",Om,{ms_ac:["view","closable","disabled","visible"],_icon:O,_closable:!1,_disabled:!1,_visible:!0,setParent:As});var Nt=f.Column=function(){Ig(Nt,this)};Yf("Column",Om,{_46o:1,ms_ac:["accessType","valueType",Dg,Yl,Un,ds,"align",zc,"sortOrder",mb,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:Tb,_sortFunc:O,_sortable:!0,_clickable:!0,setWidth:function(r){16>r&&(r=16);var P=this._width;this._width=r,this.fp(ds,P,r)},getToolTip:function(v,h){return this.formatValue(h.getValue(v,this))}});var Ot=f.Property=function(){Ig(Ot,this)};Yf("Property",Om,{_46o:1,ms_ac:["accessType","valueType",Yl,Un,"categoryName",zc,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:O,getToolTip:function(F,p,K){var f=this;return p?f.formatValue(K.getValue(F,f)):K.getPropertyName(f)}}),Kt.AccordionView=function(){var Y=this;Y._20o={},Y._21o=new td,Y._10o=O,Y._9o=O,Y._11o=O,Y._view=Kj(0,Y),Y.iv()},Lt("AccordionView",y,{ms_v:1,ms_fire:1,ms_ac:[Nm,es,"titleHeight",Li,Oe,"titleBackground","selectWidth",ms,"orientation","separatorColor"],_expandIcon:Q.accordionViewExpandIcon,_collapseIcon:Q.accordionViewCollapseIcon,_titleHeight:hk,_labelColor:Q.accordionViewLabelColor,_labelFont:Q.accordionViewLabelFont,_titleBackground:Q.accordionViewTitleBackground,_selectBackground:Q.accordionViewSelectBackground,_selectWidth:Q.accordionViewSelectWidth,_orientation:"v",_separatorColor:Q.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(Q,p,n,o){var i=this,L=Lj(),x={content:p,div:L,canvas:qb(L),icon:o};if(i._20o[Q])throw Q+" already exists";var C=x.downEventFunc=function(s){tn(s)},E=x.upEventFunc=function(z){tn(z),Hb(z)&&(i._10o===Q?i.collapse():i.expand(Q))};[xl,Hr].forEach(function(P){e(L,P,C)}),[ro,km].forEach(function(G){e(L,G,E)}),L.style.cursor=gg,Vi(i._view,L),i._20o[Q]=x,i._21o.add(Q),n&&i.expand(Q),i.iv()},remove:function(W){var Z=this,n=Z._20o[W];if(n){var b=n.div;jf(b),[xl,Hr].forEach(function(e){V(b,e,n.downEventFunc)}),[ro,km].forEach(function(e){V(b,e,n.upEventFunc)}),delete Z._20o[W],Z._21o.remove(W),Z.iv()}},clear:function(){var j=this;j._21o.toArray().forEach(j.remove,j),j._20o={},j._21o.clear(),j.iv()},isExpanded:function(b){return this._10o===b},expand:function(Q){var Z=this;Z._20o[Q]&&Z._10o!==Q&&(Z._10o=Q,Z.onExpanded(Q),Z.iv())},onExpanded:function(){},collapse:function(){var X=this;X._10o&&(X.onCollapsed(X._10o),delete X._10o,X.iv())},onCollapsed:function(){},initCanvas:function(q,h,$){Wk(q,h,$);var O=sc(q);return aj(O,0,0,1),O.clearRect(0,0,h,$),O},drawTitle:function(Z,n,W,v,s){var H=this,M=Nn(s.icon),e=H.isExpanded(n),l=H._titleHeight,d=H._titleBackground,Y=H._selectWidth,c=H._separatorColor,g=Nn(e?H._expandIcon:H._collapseIcon),E=Y+4;Kl(Z,0,0,W,v,d),e&&Y&&Kl(Z,0,0,Y,v,H._selectBackground),(e||H._21o.get(H._21o.size()-1)!==n)&&Kl(Z,0,v-1,W,1,c?c:Kf(d)),M&&(Pq(Z,M,E+Yj(M)/2,l/2),E+=Yj(M)+2),Cb(Z,n,H.getLabelFont(n),H.getLabelColor(n),E,0,0,l),g&&Pq(Z,g,W-Yj(g)/2-4,l/2)},validateImpl:function(){var p=this,L=p._view,d=0,y=0,U=p.getWidth(),g=p.getHeight(),n=p._titleHeight,w=p._21o.size()*n,r=p._11o,Y=p._9o;delete p._11o,delete p._9o,p._21o.each(function(I){var P,x,B=p._20o[I],e=B.content,b=p._10o===I;Lg(p)?(oc(B.div,d,0,n,g),P=p.initCanvas(B.canvas,n,g),on(P,0,g),Hd(P,-th),p.drawTitle(P,I,g,n,B),P.restore(),b?(x=C(0,U-w),e&&(p._11o=e,p._9o=Dj(e),oc(e,d+n,0,x,g)),d+=n+x):d+=n):(oc(B.div,0,y,U,n),P=p.initCanvas(B.canvas,U,n),p.drawTitle(P,I,U,n,B),P.restore(),b?(x=C(0,g-w),e&&(p._11o=e,p._9o=Dj(e),oc(e,0,y+n,U,x)),y+=n+x):y+=n)});var R=p._9o;r&&r!==p._11o&&r.endEditing&&r.endEditing(),R&&R!==Y&&Vi(L,R),Y&&Y!==R&&jf(Y)}}),Kt.SplitView=function(d,M,X,I){var r=this,p=r._dividerDiv=Lj(),Q=r._60O=qb(),C=r._61O=qb(),N=Q.style,H=C.style;r._view=Kj(1,r),Vi(r._view,p),N.msTouchAction=_o,N.pointerEvents=_o,N.cursor=gg,H.msTouchAction=_o,H.pointerEvents=_o,H.cursor=gg,d&&r.setLeftView(d),M&&r.setRightView(M),X&&r.setOrientation(X),I!=O&&r.setPosition(I),r.setStatus(mj),new Pt(r)},Lt("SplitView",y,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:Q.splitViewDividerSize,_dividerBackground:Q.splitViewDividerBackground,_dragOpacity:Q.splitViewDragOpacity,_toggleIcon:Q.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(w,v){var I=this,q=I._position;isNaN(w)||(v||(I._82O=0>w?-1:w>1?1:0),I._position=w,I.fp(tq,q,w))},getLeftView:function(){return this._leftView},setLeftView:function(K){var G=this,R=G._leftView,Q=G._view;if(G._leftView!==K){if(R&&R!==G._rightView){var U=Dj(R);U.parentNode===Q&&jf(U)}if(G._leftView=K,K){var A=Dj(K);A.parentNode!==Q&&Q.insertBefore(A,G._dividerDiv)}G.fp("leftView",R,K)}},getRightView:function(){return this._rightView},setRightView:function(Y){var w=this,r=w._rightView,R=w._view;if(w._rightView!==Y){if(r&&r!==w._leftView){var d=Dj(r);d.parentNode===R&&jf(d)}if(w._rightView=Y,Y){var $=Dj(Y);$.parentNode!==R&&R.insertBefore($,w._dividerDiv)}w.fp("rightView",r,Y)}},validateImpl:function(){var N=this,Q=N._draggable,R=N._position,V=N.getWidth(),h=N.getHeight(),M=N._dividerSize,r=N._dividerBackground,p=eb?18:8,I=N._dividerDiv,k=N._82O,F=N._60O,T=N._61O,E=N._toggleIcon,O=N._status,l=I.style,c=null,U=eb?20:4,a=E.comps[0];M>=p||0===M?N._coverDiv&&(jf(N._coverDiv),delete N._coverDiv):N._coverDiv||(N._coverDiv=Lj(),gr&&(N._coverDiv.style.background=Uc),Vi(I,N._coverDiv)),N._togglable?F.parentNode||(Vi(I,F),Vi(I,T)):(jf(F),jf(T));var z=N._coverDiv,o=N._leftView,v=N._rightView;if(Lg(N)){if(M>V&&(M=V),O===mj)if(1===k)var $=g(R,V),J=C(0,V-M-$);else-1===k?(J=g(-R,V),$=C(0,V-M-J)):($=j((V-M)*R),J=C(0,V-M-$));else"cl"===O?($=0,J=C(0,V-M)):"cr"===O&&(J=0,$=C(0,V-M));o&&oc(o,0,0,$,h),v&&oc(v,$+M,0,J,h),oc(I,$,0,M,h),N._22o=$,z&&(oc(z,M/2-p/2,0,p,h),z.style.cursor=Q?Uh:""),I.style.cursor=Q?Uh:"";var K=I.clientHeight/2,n=I.clientWidth;Wk(F,n,n),oc(F,0,K-n-U,n,n),c=sc(F),aj(c,0,0,1),a.rotation=-th,Nq(c,E,0,0,n,n),c.restore(),Wk(T,n,n),oc(T,0,K+U,n,n),c=sc(T),aj(c,0,0,1),a.rotation=th,Nq(c,E,0,0,n,n),c.restore()}else{if(M>h&&(M=h),O===mj)if(1===k)var f=g(R,h),t=C(0,h-M-f);else-1===k?(t=g(-R,h),f=C(0,h-M-t)):(f=j((h-M)*R),t=C(0,h-M-f));else"cl"===O?(f=0,t=C(0,h-M)):"cr"===O&&(t=0,f=C(0,h-M));o&&oc(o,0,0,V,f),v&&oc(v,0,f+M,V,t),oc(I,0,f,V,M),N._22o=f,z&&(oc(z,0,M/2-p/2,V,p),z.style.cursor=Q?Dn:""),l.cursor=Q?Dn:"";var D=I.clientWidth/2,n=I.clientHeight;Wk(F,n,n),oc(F,D-n-U,0,n,n),c=sc(F),aj(c,0,0,1),a.rotation=0,Nq(c,E,0,0,n,n),c.restore(),Wk(T,n,n),oc(T,D+U,0,n,n),c=sc(T),aj(c,0,0,1),a.rotation=ei,Nq(c,E,0,0,n,n),c.restore()}l.background=r}});var Pt=function(G){this.sv=G,this.addListeners()};vn(Pt,y,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(E){var L=this,f=L.sv,s=f._dividerDiv,k=f._60O,y=f._61O,d=f._status,V=E.target;if(V===k)d===mj?f.setStatus("cl"):"cr"===d&&f.setStatus(mj);else if(V===y)d===mj?f.setStatus("cr"):"cl"===d&&f.setStatus(mj);else if(Oo(E)&&(V===s||V===f._coverDiv)&&(tn(E),f.isDraggable())){f.getLeftView(),f.getRightView();var a=L.maskDiv=Lj();if(a.style.left=0,a.style.top=0,a.style.width=f.getWidth()+"px",a.style.height=f.getHeight()+"px",f.getView().appendChild(a),!f.isContinuousLayout()){var e=L.resizeDiv=Lj();e.style.left=s.style.left,e.style.top=s.style.top,e.style.width=s.style.width,e.style.height=s.style.height,e.style.opacity=f.getDragOpacity(),e.style.background=f.getDividerBackground(),Vi(L.getView(),e)}L._lastAbsPosition=f._22o,L._86o=Lg(f)?_d(E).x:_d(E).y,ug(L,E)}},handleWindowTouchMove:function(R){Oo(R)&&this.update(R,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(b){var Y=this;Y.update(b,!0),Y.sv.setStatus(mj),Y.maskDiv&&jf(Y.maskDiv),Y.resizeDiv&&jf(Y.resizeDiv),Y.maskDiv=Y.resizeDiv=O},handle_mousedown:function(x){Hb(x)&&this.handle_touchstart(x)},handleWindowMouseMove:function(m){this.handleWindowTouchMove(m)},handleWindowMouseUp:function(i){this.handleWindowTouchEnd(i)},update:function(i,r){var m=this,D=m.sv,G=Lg(D)?D.getWidth():D.getHeight(),f=D._dividerSize,H=m._lastAbsPosition-m._86o;Lg(D)?(H+=_d(i).x,H>G-f&&(H=G-f),0>H&&(H=0),m.resizeDiv&&(m.resizeDiv.style.left=H+hi)):(H+=_d(i).y,H>G-f&&(H=G-f),0>H&&(H=0),m.resizeDiv&&(m.resizeDiv.style.top=H+hi)),r&&G!==f&&(1===D._82O?D.setPosition(H,1):-1===D._82O?D.setPosition(H-G+f,1):D.setPosition(H/(G-f),1))}}),Kt.TabView=function(){var $=this,B=$._view=Kj(1,$),D=$._91O=Lj(1),T=$._tabModel=new gk,m=T.sm(),n=$.invalidate;$._7o=new td,$._canvas=qb(D),Vi(B,D),Vi(B,$._92O=Lj(1)),m.setSelectionMode(Jq),m.ms($.handleSelectionChange,$),T.mm(n,$),T.mh(n,$),T.md(n,$),$._interactor=new Qt($),$.iv()},Lt("TabView",y,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Li,Oe,"tabHPadding","tabBackground","selectWidth",ms,"moveBackground","insertColor"],_tabHPadding:0,_tabPosition:pj,_tabHeight:hk,_tabGap:Q.tabViewTabGap,_labelColor:Q.tabViewLabelColor,_labelFont:Q.tabViewLabelFont,_tabBackground:Q.tabViewTabBackground,_selectWidth:Q.tabViewSelectWidth,_selectBackground:Q.tabViewSelectBackground,_moveBackground:Q.tabViewMoveBackground,_insertColor:Q.tabViewInsertColor,_movable:!0,handleSelectionChange:function(){this._selectionChanged=!0,this.invalidate()},getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(n,H,e){var _,g=this._tabModel;return n instanceof Mt?(_=n,H&&_.setView(H)):(_=new Mt,_.setName(n),_.setView(H)),g.add(_),e&&g.sm().ss(_),_},getLabel:function(v){return v.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(w){this._23o=w,this.iv()},get:function(D){var f=this,P=f._tabModel;if(fe(D))return P._roots.get(D);if(Vp(D)){var i;return P.each(function(_){D===f.getLabel(_)&&(i=_)}),i}return D instanceof Mt?D:O},select:function(o){this._tabModel.sm().ss(this.get(o))},remove:function(D){var w=this;if(D=w.get(D)){var i=w._tabModel,c=i._roots.indexOf(D);w._tabModel.remove(D),w.selectByIndex(--c)}},getCurrentTab:function(){return this._8o},hideTabView:function(K,z){z.parentNode===this._92O&&(Oj(z)?(z.style.display=Eb,z._tab_=K):jf(z),Sk())},showTabView:function(K,Z){Oj(Z)&&(Z.style.display="block",Z._tab_=K),Z.parentNode!==this._92O&&(Vi(this._92O,Z),Sk())},_24o:function(){var d,r=this,x=r._8o,H=r._9o,$=r._tabModel.sm().ld();$&&(d=Dj($.getView())),d!==H&&(H&&(x.getView()&&x.getView().endEditing&&x.getView().endEditing(),r.hideTabView(x,H)),d&&r.showTabView($,d)),r._8o=$,r._9o=d,x!==$&&r.onTabChanged(x,$)},onTabClosing:function(){return!0},onTabChanged:function(){},onTabClosed:function(F,g){this.selectByIndex(--g)},selectByIndex:function(Q){var w=this,k=w._tabModel,g=k.size();if(g&&!k.sm().ld()){Q==O&&(Q=0),Q>=g&&(Q=g-1),0>Q&&(Q=0);for(var M=Q;M>=0;M--){var R=w.get(M);if(!R.isDisabled())return w.select(R),R}for(M=Q+1;g>M;M++)if(R=w.get(M),!R.isDisabled())return w.select(R),R}},getTabWidth:function(k){var O=this.getTabHPadding(),W=4+2*O,C=Nn(k.getIcon());C&&(W+=Yj(C,k)+4);var G=this.getLabel(k);return G&&(W+=Ye(this.getLabelFont(k),G).width+4),k.isClosable()&&(W+=10),W},drawTab:function(E,j,m,p,S,C,P){var M,o=this,N=o._tabPosition,f=this.getTabHPadding(),D=m+4+f,I=o._selectWidth,x=Nn(j.getIcon()),d=j.isDisabled(),q=o.getLabelColor(j),Q=o.getLabelFont(j),O=o.getLabel(j),s=o._selectBackground,r=N===wq+"-vertical",V=N===hb+"-vertical";(r||V)&&(D=p+4+f),d&&(E.globalAlpha=We),Kl(E,m,p,S,C,P),j===o._8o&&I&&(N===pj?Kl(E,m,p+C-I,S,I,s):N===wq?Kl(E,m+S-I,p,I,C,s):N===hb?Kl(E,m,p,I,C,s):r?Kl(E,m+S-I,p,I,C,s):V?Kl(E,m,p,I,C,s):Kl(E,m,p,S,I,s));var B=S/2;if(r&&(on(E,B,p+C/2),Hd(E,ei),on(E,-B,-p-C/2)),x){var Z=kp(x,j),F=Yj(x,j);if(r||V){var z=m+S/2,L=D+Z/2;on(E,z,L),Hd(E,th),on(E,-z,-L),Pq(E,x,m+S/2,D+Z/2,j,o),on(E,z,L),Hd(E,-th),on(E,-z,-L),D+=Z+4}else Pq(E,x,D+F/2,p+C/2,j,o),D+=F+4}return r||V?(on(E,S/2,D+S/2),Hd(E,th),on(E,-S/2,-D-S/2),Cb(E,O,Q,q,m,D,C,S),on(E,S/2,D+S/2),Hd(E,-th),on(E,-S/2,-D-S/2)):Cb(E,O,Q,q,D,p,S,C),r&&(on(E,B,p+C/2),Hd(E,-ei),on(E,-B,-p-C/2)),j.isClosable()&&(M=V?{x:m+S-12,y:p+C-12,width:12,height:12}:{x:m+S-12,y:p+2,width:12,height:12},this.drawCloseIcon(j,E,q,M)),d&&(E.globalAlpha=1),M},drawCloseIcon:function(V,v,j,p){var N=p.x,Z=p.y;v.strokeStyle=j,v.lineWidth=1,v.beginPath(),v.moveTo(N+2,Z+8),v.lineTo(N+8,Z+2),v.moveTo(N+8,Z+8),v.lineTo(N+2,Z+2),v.stroke()},getTabAt:function(k){var y=this._interactor._8Q(k);return y?y.tab:null},validateImpl:function(){var q=this;q._24o();var V,X=q._canvas,v=q._tabPosition,M=q._91O,O=q._92O,L=q._tabModel,W=q.getWidth(),t=q.getHeight(),z=q._tabHeight,I=q._7o,d=q._tabGap,D=v===pj,g=v===wq,r=v===hb,e=v===wq+"-vertical",Y=v===hb+"-vertical",p=q._23o,Q=0;if((g||r)&&L._roots.each(function(s){Q=C(q.getTabWidth(s),Q)}),D?(oc(M,0,0,W,z),V={x:0,y:z,width:W,height:C(0,t-z)}):g?(oc(M,0,0,Q,t),V={x:Q,y:0,width:C(0,W-Q),height:t}):r?(oc(M,W-Q,0,Q,t),V={x:0,y:0,width:C(0,W-Q),height:t}):e?(oc(M,0,0,z,t),V={x:z,y:0,width:C(0,W-z),height:t}):Y?(oc(M,W-z,0,z,t),V={x:0,y:0,width:C(0,W-z),height:t}):(oc(M,0,t-z,W,z),V={x:0,y:0,width:W,height:C(0,t-z)}),oc(O,V),e||Y){q._9o&&(V.x=0,oc(q._8o.getView(),V)),Wk(X,z,t);var U=sc(X),f=0;if(aj(U,0,q.ty(),1),U.clearRect(0,0,z,t),I.clear(),L._roots.each(function(r){if(r.isVisible()){var B,w=q.getTabWidth(r);if(!p||p.tab!==r){var n=q.getTabBackground(r);B=q.drawTab(U,r,0,f,z,w,n)}I.add({_75o:B,tab:r,startY:f,endY:f+w,height:w}),f+=w+d}}),q._23Q=C(0,f-d),p){var k=p.position;q.drawTab(U,p.tab,0,p.startY,z,p.height,q._moveBackground),Kl(U,0,k,z,1,q._insertColor)}if(U.restore(),q._selectionChanged){q._selectionChanged=!1;for(var j=q.ty(),N=0;N<I.size();N++){var x=I.get(N);if(x.tab===q._8o){if(x.endY+j<0){q.ty(-x.startY);break}if(x.startY+j>t){q.ty(t-x.endY);break}}}}q.ty(q.ty())}else if(g||r){q._9o&&(V.x=0,oc(q._8o.getView(),V)),Wk(X,Q,t);var U=sc(X),f=0;if(aj(U,0,q.ty(),1),U.clearRect(0,0,Q,t),I.clear(),L._roots.each(function(b){if(b.isVisible()){var $;if(!p||p.tab!==b){var i=q.getTabBackground(b);$=q.drawTab(U,b,0,f,Q,z,i)}I.add({_75o:$,tab:b,startY:f,endY:f+z,height:z}),f+=z+d}}),q._23Q=C(0,f-d),p){var k=p.position;q.drawTab(U,p.tab,0,p.startY,Q,p.height,q._moveBackground),Kl(U,0,k,Q,1,q._insertColor)}if(U.restore(),q._selectionChanged){q._selectionChanged=!1;for(var j=q.ty(),N=0;N<I.size();N++){var x=I.get(N);if(x.tab===q._8o){if(x.endY+j<0){q.ty(-x.startY);break}if(x.startY+j>t){q.ty(t-x.endY);break}}}}q.ty(q.ty())}else{q._9o&&(V.y=0,oc(q._8o.getView(),V)),Wk(X,W,z);var U=sc(X),h=0;if(aj(U,q.tx(),0,1),U.clearRect(0,0,W,z),I.clear(),L._roots.each(function(i){if(i.isVisible()){var r,C=q.getTabWidth(i);if(!p||p.tab!==i){var J=q.getTabBackground(i);r=q.drawTab(U,i,h,0,C,z,J)}I.add({_75o:r,tab:i,startX:h,endX:h+C,width:C}),h+=C+d}}),q._64I=C(0,h-d),p){var k=p.position;q.drawTab(U,p.tab,p.startX,0,p.width,z,q._moveBackground),lf(U,q._insertColor,k,0,z)}if(U.restore(),q._selectionChanged){q._selectionChanged=!1;for(var $=q.tx(),N=0;N<I.size();N++){var x=I.get(N);if(x.tab===q._8o){if(x.endX+$<0){q.tx(-x.startX);break}if(x.startX+$>W){q.tx(W-x.endX);break}}}}q.tx(q.tx())}for(var Z=[],J=O.children,N=0;N<J.length;N++){var A=J[N],b=A._tab_;b&&!L.contains(b)&&Z.push(A)}Z.forEach(function(y){O.removeChild(y)})}});var Qt=function(w){this.tv=w,this.addListeners()};vn(Qt,y,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(S){this.handleScroll(S,10*(S.wheelDelta/40))},handle_DOMMouseScroll:function(w){this.handleScroll(w,10*-w.detail)},handleScroll:function(V,c){tn(V);var z=this.tv,o=z._tabPosition;!z._40o()||o!==pj&&o!==ri||z.tx(this.tv.tx()+c),!z._41o()||o!==wq&&o!==hb&&o!==wq+"-vertical"&&o!==hb+"-vertical"||z.ty(this.tv.ty()+c)},_8Q:function(W){var b,v,Y=this.tv,C=Y._tabPosition,U=Y._7o;if(C===pj||C===ri){var x=Y.lp(W).x;for(b=0;b<U.size();b++)if(v=U.get(b),v.startX<=x&&x<=v.endX)return v}else if(C===wq||C===hb||C===wq+"-vertical"||C===hb+"-vertical"){var k=Y.lp(W).y;for(b=0;b<U.size();b++)if(v=U.get(b),v.startY<=k&&k<=v.endY)return v}return O},isClickable:function(b){var h=this.tv,K=h._tabPosition,d=this._73o=this._8Q(b);return!h._40o()||K!==pj&&K!==ri?!h._41o()||K!==wq&&K!==hb&&K!==wq+"-vertical"&&K!==hb+"-vertical"?d&&(!d.tab.isDisabled()||h.isMovable()):!0:!0},handle_mousemove:function($){var q=this;Nh?q._74o=q._8Q($):q.getView().style.cursor=q.isClickable($)?gg:""},handle_mousedown:function(n){this.handle_mousemove(n),this.handle_touchstart(n)},handle_touchstart:function(w){var B=this,F=B.tv,m=F._tabPosition;tn(w),Hb(w)&&B.isClickable(w)&&(m===pj||m===ri?(B.x=_d(w).x,B.lp=F.lp(w),B.tx=F.tx()):(B.y=_d(w).y,B.lp=F.lp(w),B.ty=F.ty()),ug(B,w))},handle_mouseup:function(r){this.handle_touchend(r)},handle_touchend:function(Y){if(Wr(Y)){var o=this._73o;if(!o)return;var I=this.tv,N=I.getTabModel(),H=o.tab;if(!H.isDisabled()&&H.isClosable()){var B=function(){var J=N._roots.indexOf(H);N.remove(H),I.onTabClosed(H,J)};I.onTabClosing(H,B)&&B()}}},handleWindowMouseMove:function(r){this.handleWindowTouchMove(r)},handleWindowTouchMove:function(U){var q,G=this,Q=G.tv,E=Q._tabPosition,h=G._73o;if(E===pj||E===ri){if(q=_d(U).x-G.x,!G._25o&&!G.moving&&o(q)>2&&(Q._40o()&&!Pp(U)?G._25o=1:h&&Q.isMovable()&&(G.moving=1)),G._25o)Q.tx(G.tx+q);else if(G.moving){var M=G.lp.x+q,S=Q._tabGap/2;Q._7o.each(function(o){var V=o.endX,c=M-o.startX<V-M;M>=o.startX&&V>=M&&Q._7Q({tab:h.tab,startX:h.startX+q,width:h.width,front:c,insertTab:o.tab,position:c?C(0,o.startX-S):g(Q._64I,V+S)})})}}else if(q=_d(U).y-G.y,!G._25o&&!G.moving&&o(q)>2&&(Q._41o()&&!Pp(U)?G._25o=1:h&&Q.isMovable()&&(G.moving=1)),G._25o)Q.ty(G.ty+q);else if(G.moving){var I=G.lp.y+q,S=Q._tabGap/2;Q._7o.each(function(w){var l=w.endY,G=I-w.startY<l-I;I>=w.startY&&l>=I&&Q._7Q({tab:h.tab,startY:h.startY+q,height:h.height,front:G,insertTab:w.tab,position:G?C(0,w.startY-S):g(Q._23Q,l+S)})})}},handleWindowMouseUp:function(Z){this.handleWindowTouchEnd(Z)},handleWindowTouchEnd:function(){var A=this,J=A.tv,Y=J._tabPosition,E=J.getTabModel(),l=E._roots,M=A._73o;if(A.moving){var h=J._23o;if(h&&h.insertTab!==h.tab){var F=h.tab,d=l.remove(F),c=l.indexOf(h.insertTab);c>=0&&(h.front||c++,c<=l.size()&&(l.add(F,c),E._38I(F,d,c)))}J._7Q(O),delete A.moving}else if(!A._25o&&M){F=M.tab;var v=A._74o;if(!v||v.tab===F)if(!F.isDisabled()&&Ol(M._75o,A.lp)){var T=function(){var C=l.indexOf(F);E.remove(F),J.onTabClosed(F,C)};J.onTabClosing(F,T)&&T()}else F.isDisabled()||J._8o===F||E.sm().ss(F)}A._25o=A._73o=A._74o=Y===pj||Y===ri?A.x=A.lp=A.tx=O:A.y=A.lp=A.ty=O}}),Kt.PropertyView=function(C){var r=this;r._view=Kj(1,r),r._canvas=qb(r._view),Vi(r._view,r._79O=Lj()),r._rows=new td,r._28o=new td,r._26o={},r._26Q={};var l=r._propertyModel=new gk,G=r.ivm;l.mm(G,r),l.md(G,r),l.mh(G,r),r.dm(C?C:new gk),new Rt(r)},Lt("PropertyView",y,{ms_ac:[Li,$k,Oe,Yl,Un,"categorizable",Cf,mb,Zd,Nm,es,om,$i,Ve,"selectRowIndex",ms,"background",Sj,$r,fq,bc,Rh],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:rm,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:rk,_background:Q.propertyViewBackground,_expandIcon:Q.propertyViewExpandIcon,_collapseIcon:Q.propertyViewCollapseIcon,_scrollBarColor:sk,_scrollBarSize:fj,_autoHideScrollBar:Bm,_selectBackground:Q.propertyViewSelectBackground,_rowHeight:Xe,_rowLineVisible:Q.propertyViewRowLineVisible,_rowLineColor:Q.propertyViewRowLineColor,_10I:.5,_columnLineVisible:Q.propertyViewColumnLineVisible,_columnLineColor:Q.propertyViewColumnLineColor,_labelColor:Q.propertyViewLabelColor,_labelSelectColor:Q.propertyViewLabelSelectColor,_labelFont:Q.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(J){0>J&&(J=0),J>1&&(J=1);var U=this,T=U._10I;U._10I=J,U.fp("columnPosition",T,J)},getPropertyName:function(g){return g.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(R,c,C){return C===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(Y,M){return M===this._selectRowIndex?this._labelSelectColor:Y.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(P){var a=this.getHeight()-this._59I;return a>P&&(P=a),P>0?0:j(P)},isExpanded:function(g){if(!g)return!0;var B=this._26o[g];return B?B.isExpanded:!(this._26Q[g]===!1)},toggle:function(z){var Y=this;Y.isExpanded(z)?Y.collapse(z):Y.expand(z)},expandAll:function(){this.validate();for(var s in this._26o)this.expand(s)},expand:function(p){if(p&&p!==Eb){var T=this,Y=T._26o[p];Y&&!Y.isExpanded&&(Y.isExpanded=!0,T.onExpanded(p),T.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var K in this._26o)this.collapse(K)},collapse:function(T){if(T&&T!==Eb){var X=this,s=X._26o[T];s&&s.isExpanded&&(s.isExpanded=!1,X.onCollapsed(T),X.ivm())}},onCollapsed:function(){},getCategoryName:function(W){if(!this.isCategorizable())return Eb;var L=W.getCategoryName();return L?L:Eb},getPropertyModel:function(){return this._propertyModel},handleSelectionChange:function(){this.ivm()},setDataModel:function(B){var M=this,O=M._dataModel;O!==B&&(O&&(O.umd(M.handlePropertyChange,M),M._selectionModel||O.sm().ums(M.handleSelectionChange,M)),M._dataModel=B,B.md(M.handlePropertyChange,M),M._selectionModel?M._selectionModel._21I(B):B.sm().ms(M.handleSelectionChange,M),M.fp(Rf,O,B))},isVisible:function(U){return this._visibleFunc?this._visibleFunc(U):!0},onPropertyChanged:function(l){var m=this,e=l.property;Ft[e]?m.ivm():m.iv(),e===Fb&&m._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:ps},handlePropertyChange:function(K){this._27o===K.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var u=this;u._96I||(u.setSelectRowIndex(-1),u._96I=1,u.iv())},redraw:function(){this.iv()},validateModel:function(){var Q=this,h=Q._rows,L=Q._28o,A={},z=new td,D=Q._27o;Q.updateCurrentData(),D!==Q._27o&&Q.endEditing(),h.clear(),L.clear(),Q.getRawProperties().each(function(j){if(Q.isVisible(j)){z.add(j);var K=Q.getCategoryName(j);A[K]||(L.add(K,K===Eb?0:n),A[K]={isExpanded:Q.isExpanded(K),properties:new td})}}),Q._sortFunc&&z.sort(Q._sortFunc);for(var G in Q._26o)Q._26Q[G]=Q.isExpanded(G);Q._26o=A,L.each(function(I){I!==Eb&&h.add(I);var V=A[I];V.isExpanded&&z.each(function(k){Q.getCategoryName(k)===I&&(V.properties.add(k),h.add({property:k,data:Q._27o}))},Q)})},validateImpl:function(){var N=this;N._76o(),N._96I&&(N.validateModel(),delete N._96I);var l=N._canvas,J=N.getWidth(),b=N.getHeight(),e=-N.ty(),t=N._rowHeight,F=N._indent,y=J-F,o=N._rows,a=o.size(),j=N._9I=F+y*N._10I,X=N._59I=a*t;Wk(l,J,b),N._29I={x:0,y:e,width:J,height:b},N._31I=B(e/t),N._14I=s((e+b)/t),N._31I<0&&(N._31I=0),N._14I>a&&(N._14I=a);var m,G=sc(l),U=N._background;aj(G,0,-e,1),G.beginPath(),G.rect(0,e,J,b),G.clip(),G.clearRect(0,e,J,b),N._93db(G),U&&Kl(G,0,0,F,X,U);for(var g=N._31I;g<N._14I;g++){var Z=o.get(g),e=t*g;if(Vp(Z))U&&Kl(G,F,e,y,t,U),m=Nn(N.isExpanded(Z)?N._expandIcon:N._collapseIcon),m&&ks(G,m,Iq,0,e,F,t),G.save(),G.beginPath(),G.rect(F,e,y,t),G.clip(),N.drawCategoryName(G,Z,g,F,e,y,t),G.restore();else{var d=Z.property,f=Z.data,m=Nn(d.getIcon()),n=N._selectRowIndex===g?N.getSelectBackground():O;if(m&&ks(G,m,Iq,0,e,F,t),n&&Kl(G,F,e,y,t,n),G.save(),G.beginPath(),G.rect(F,e,j-F,t),G.clip(),N.drawPropertyName(G,d,g,F,e,j-F,t),G.restore(),!N.isEditing(f,d)){var h=j+1,T=J-j-1;G.save(),G.beginPath(),G.rect(h,e,T,t),G.clip(),N._87o(N.drawPropertyValue(G,d,N.getValue(f,d),g,h,e,T,t,f),g,h,e,T,t),G.restore()}}N._rowLineVisible&&Kl(G,F,e+t-1,y,1,N._rowLineColor)}N._columnLineVisible&&(Kl(G,j,0,1,X,N._columnLineColor),Kl(G,J-1,0,1,X)),N._92db(G),N._93I(),G.restore(),N.ty(N.ty())},drawCategoryName:function(u,i,o,w,I,Q,Y){Cb(u,i,this.getCategoryFont(i),this.getCategoryColor(i),w,I,Q,Y)},drawPropertyName:function(t,D,j,A,V,r,d){return D.drawPropertyName?(D.drawPropertyName(t,D,j,A,V,r,d,this),void 0):(Cb(t,this.getPropertyName(D),this.getPropertyFont(D,j),this.getPropertyColor(D,j),A,V,r,d),void 0)},drawPropertyValue:function(M,L,v,R,o,D,f,I,T){return L.drawPropertyValue?L.drawPropertyValue(M,L,v,R,o,D,f,I,T,this):(Ht(M,v,L,this.getLabelFont(L,v,R),this.getLabelColor(L,v,R),o,D,f,I,T,this),void 0)},isPropertyEditable:function(k){return k.isEditable()&&this.isEditable()},setProperties:function(B){this._propertyModel.clear(),this.addProperties(B)},addProperties:function(J){if(J){var o=this._propertyModel;J.forEach(function(s){if(!(s instanceof Ot)){var Y=_b(s.className);s=Xf(Y?Y:Ot,s)}o.add(s)})}},getRowIndexAt:function(A){var T=this,m=B(T.lp(A).y/T._rowHeight);return m>=0&&m<T._rows.size()?m:-1},getPropertyAt:function(b){var R=this,Y=R.getRowIndexAt(b);return Y>=0?R._rows.get(Y).property:O},getToolTip:function(D){var T=this,E=T.getPropertyAt(D),t=T._27o;return E&&t?E.getToolTip(t,T._9I<T.lp(D).x,T):O}});var Rt=function(G){this.pv=G,this.addListeners()};vn(Rt,y,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(r){this.getView().style.cursor=r},clear:function(){var q=this;q._62O=q.cp=q.ty=q.p=O,q.setCursor(Pg)},handle_mousedown:function(d){this.handle_touchstart(d)},handle_touchstart:function(h){var t=this,q=t.pv;tn(h),q.setFocus(h)&&(Hb(h)?(t.cp=_d(h),t.ty=q.ty(),t.p=q.getColumnPosition(),t.handle_touchmove(h)):q.setSelectRowIndex(q.getRowIndexAt(h)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(g){this.handle_touchend(g)},handle_touchend:function(j){var S=this;if(S.cp&&!S._62O){var m=S.pv,K=m.lp(j),Z=K.x,s=K.y,g=m._indent,r=m.getRowIndexAt(j),n=m._9I;if(r>=0){var _=m._rowHeight,I=_*r,e=m._rows.get(r),y=e.property;if(Vp(e))Nn(m.isExpanded(e)?m._expandIcon:m._collapseIcon)&&Z>=0&&g>=Z&&s>=I&&I+_>=s?m.toggle(e):Tn(j)&&m.toggle(e);else if(Z>n&&m.isPropertyEditable(y,j)){var X={x:n+1,y:I,width:m.getWidth()-n-1,height:_},b={x:X.x+m.tx(),y:X.y+m.ty(),width:X.width,height:X.height},Q=0,P=m._29I;X.y<P.y?Q=X.y-P.y:X.y+_>P.y+P.height&&(Q=X.y+_-P.y-P.height),Q&&(m.ty(m.ty()-Q),b.y-=Q),m.beginEditing({data:e.data,property:y,value:m.getValue(e.data,y),event:j,rect:X,editorRect:b,view:m})}}m.setSelectRowIndex(r)}S.clear()},handleWindowMouseMove:function(e){this.handleWindowTouchMove(e)},handleWindowTouchMove:function(z){var m=this,e=m.pv,O=m.ty,B=m.cp,W=_d(z),V=m._62O;if("p"===V)e.setTranslateY(O+W.y-B.y);else if("c"===V){var o=e.getWidth()-e._indent;if(o>16){var y=m.p-(B.x-W.x)/o,H=16/o;H>y&&(y=H),y>1-H&&(y=1-H),e.setColumnPosition(y)}}else"s"===V&&e.setTranslateY(O+(B.y-W.y)*e._59I/e._29I.height)},handle_mousemove:function(T){this.handle_touchmove(T)},handle_touchmove:function(N){if(!Nh&&Hb(N)){var X=this,p=X.pv,H=o(p.lp(N).x-p._9I)<=(eb?8:3);X.cp?X._62O||(H?(X._62O="c",ug(X,N)):o(_d(N).y-X.cp.y)>=2&&(X._62O=X.isV(N)?"s":"p",ug(X,N))):(H?X.setCursor(Uh):X.setCursor(Pg),X.isV(N)&&p._43o())}},isV:function(y){var R=this.pv,l=R._29I;return R._41o()&&l.x+l.width-R.lp(y).x<Vm},handle_mousewheel:function(Q){this.handleScroll(Q,Q.wheelDelta/40)
},handle_DOMMouseScroll:function(y){2===y.axis&&this.handleScroll(y,-y.detail)},handleScroll:function(h,Y){var Q=this.pv;tn(h),Q.endEditing(),Q.translate(0,Y*Q.getRowHeight())},handle_keydown:function(Y){var U=this.pv,o=U._rows.size(),R=U._selectRowIndex+(Fq(Y)?-1:1);(Fq(Y)||No(Y))&&(0>R&&(R=0),R>=o&&(R=o-1),U.setSelectRowIndex(R))}}),Kt.ListView=function(I){this._5o(I),new St(this)},Lt("ListView",y,{ms_ac:[Li,$k,Oe,Sj,Cf,$r,fq,mb,Zd,om,$i,Ve,zk,ms],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:rk,_rowHeight:Xe,_rowLineVisible:Q.listViewRowLineVisible,_rowLineColor:Q.listViewRowLineColor,_scrollBarColor:sk,_scrollBarSize:fj,_autoMakeVisible:jg,_autoHideScrollBar:Bm,_selectBackground:Q.listViewSelectBackground,_labelColor:Q.listViewLabelColor,_labelSelectColor:Q.listViewLabelSelectColor,_labelFont:Q.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(i){var m=this,w=m._checkMode;m._checkMode=i,m.fp(Eq,w,i)},drawRow:function(F,C,T,y,J,h,l){var R=this,D=0,H=R._indent,t=R.getIconWidth(C);R.drawRowBackground(F,C,T,y,J,h,l),R._checkMode&&(Pq(F,Nn(R.getCheckIcon(C)),D+H/2,J+l/2,C,R),D+=H),R.drawIcon(F,C,D,J,t,l),R.drawLabel(F,C,D+t,J,l)}});var St=function(N){this.list=N,this.addListeners()};vn(St,y,{ms_listener:1,getView:function(){return this.list._view},clear:function(x){var q=this,K=q.list;x&&"d"===q._62O&&!q.dragCancel&&K.handleDragAndDrop(x,"end"),K.draggingData&&(K.draggingData=null,K.redraw()),q.dragCancel=q._62O=q._isV=q._isH=q.cp=q.tx=q.ty=O},handle_mousedown:function(k){this.handle_touchstart(k)},handle_touchstart:function(h){var R=this,w=R.list;if(tn(h),w.setFocus(h)){var Q=w.getDataAt(h);R.cp=_d(h),R.tx=w.tx(),R.ty=w.ty(),Hb(h)?Q&&w.handleDragAndDrop&&!R.isV(h)&&!R.isH(h)&&w.isDraggable(Q)&&(w.draggingData=Q,w.redraw(),w.handleDragAndDrop(h,"prepare")):(Q?R._33o(h,Q):this._cancelDataDoubleSelect(),R.clear(h))}},handleWindowMouseUp:function(I){this.clear(I)},handleWindowTouchEnd:function(H){this.clear(H)},handle_mouseup:function(Y){this.handle_touchend(Y)},handle_touchend:function(H){var j=this,v=j.list;if(!j._isV&&!j._isH&&j.cp&&!j._62O){var r=v.getDataAt(H);r?(v.isCheckMode()?j._34o(H,r):j._33o(H,r),Tn(H)?v.onDataDoubleClicked(r,H):v.onDataClicked(r,H)):(j._cancelDataDoubleSelect(),v.handleBackgroundClick(H))}j.clear(H)},handleWindowMouseMove:function(g){this.handleWindowTouchMove(g)},handleWindowTouchMove:function(s){var h=this,m=h.list,C=h._62O,T=h.tx,G=h.ty,B=h.cp,j=_d(s),g=m._29I;"p"===C?m.setTranslate(T+j.x-B.x,G+j.y-B.y):"v"===C?m.ty(G+(B.y-j.y)*m._59I/g.height):"h"===C?m.tx(T+(B.x-j.x)*m._91I/g.width):"d"===C&&(h.dragCancel||m.handleDragAndDrop(s,"between"))},handle_mousemove:function(T){this.handle_touchmove(T)},handle_touchmove:function(B){if(!Nh&&Hb(B)){var w=this,W=w.list;if(w._isV=w.isV(B),w._isH=w.isH(B),w.cp){if(!w._62O){if(xh(_d(B),w.cp)<2)return;w._isV?w._62O="v":w._isH?w._62O="h":W.draggingData&&!this.dragCancel?(w._62O="d",W.handleDragAndDrop(B,"begin")):w._62O="p",w._62O&&"d"!==w._62O&&W.draggingData&&(W.draggingData=null,W.redraw()),ug(w,B)}}else w._isV&&W._43o(),w._isH&&W._42o()}},isV:function(J){var X=this.list,D=X._29I;return X._41o()&&D.x+D.width-X.lp(J).x<Vm},isH:function(y){var f=this.list,b=f._29I;return f._40o()&&b.y+b.height-f.lp(y).y<Vm},handle_mousewheel:function(g){this.handleScroll(g,g.wheelDelta/40,g.wheelDelta!==g.wheelDeltaX)},handle_DOMMouseScroll:function(U){this.handleScroll(U,-U.detail,1)},handleScroll:function(C,f,m){var o=this.list;tn(C),o.endEditing&&o.endEditing(),m&&o._41o()?o.translate(0,f*o.getRowHeight()):o._40o()&&o.translate(10*f,0)},handle_keydown:function(h){if(!Q.isInput(h.target)){var l,i=this.list,J=i.sm(),N=i._rows,n=N.size();if(bj(h))i.selectAll();else if(lm(h))i.handleDelete&&i.handleDelete(h);else if(af(h))"d"!==this._62O||this.dragCancel||(i.handleDragAndDrop(h,"cancel"),this.dragCancel=!0);else if(vr(h))i.isCheckMode()&&(l=i.getFocusData(),l&&i.checkData(l));else if(Fq(h)||No(h)){var v=i.isCheckMode();if(l=v?i.getFocusData():J.ld()){var O=i.getRowIndex(l);O>=0&&(Fq(h)?0!==O&&(l=N.get(O-1),v?i.setFocusData(l):J.ss(l)):O!==n-1&&(l=N.get(O+1),v?i.setFocusData(l):J.ss(l)))}else n>0&&(l=N.get(0),v?i.setFocusData(l):J.ss(l))}}},_34o:function(u,M){var Y=this.list,y=Y.lp(u).x;return y>=0&&y<=Y._indent?(Y.checkData(M),void 0):(Y.setFocusData(M),void 0)},_33o:function(U,H){var w=this.list,e=w.sm(),s=e.ld();if(!w.canHandleSelectMode(U,H))return this._cancelDataDoubleSelect(),void 0;if(Pp(U))w.isSelected(H)?e.rs(H):e.as(H);else if(Sl(U))if(s)for(var g=w.getRowIndex(s),y=w.getRowIndex(H);g!==y;)g+=y>g?1:-1,e.as(w._rows.get(g));else e.ss(H);else Hb(U)?(e.contains(H)?w.handleDataDoubleSelect&&(this._handleDataDoubleSelect(U,H),Tn(U)&&this._cancelDataDoubleSelect()):this._cancelDataDoubleSelect(),e.ss(H)):e.contains(H)||e.ss(H)},_handleDataDoubleSelect:function(L,$){this._cancelDataDoubleSelect(),this._doubleSelectTimer=yd(function(){this.list.handleDataDoubleSelect(L,$),this._doubleSelectTimer=n}.bind(this),Q.doubleClickSpeed)},_cancelDataDoubleSelect:function(){this._doubleSelectTimer&&(rn(this._doubleSelectTimer),this._doubleSelectTimer=n)}}),Kt.TreeView=function(s){var H=this;H._35o(),H._5o(s),new Tt(H)},Lt("TreeView",y,{ms_ac:[Li,$k,Oe,"rootVisible",Eq,"rootData",mb,Zd,om,$i,Ve,Cf,Sj,$r,fq,Nm,es,zk,ms,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:O,_indent:rk,_rowHeight:Xe,_rowLineVisible:Q.treeViewRowLineVisible,_rowLineColor:Q.treeViewRowLineColor,_scrollBarColor:sk,_scrollBarSize:fj,_autoHideScrollBar:Bm,_expandIcon:Q.treeViewExpandIcon,_collapseIcon:Q.treeViewCollapseIcon,_autoMakeVisible:jg,_selectBackground:Q.treeViewSelectBackground,_labelColor:Q.treeViewLabelColor,_labelSelectColor:Q.treeViewLabelSelectColor,_labelFont:Q.treeViewLabelFont,_doubleClickToToggle:Q.treeViewDoubleClickToToggle,drawRow:function(z,G,k,x,B,p,W){var t=this;t.drawRowBackground(z,G,k,x,B,p,W),t.drawTree(z,G,k,0,B,p,W)},isOnToggleIcon:function(G){var k=this.getDataAt(G);if(k){var e=this.getIndent(),d=this.lp(G).x;if(Nn(this.getToggleIcon(k))){var N=e*this.getLevel(k);if(d>=N&&N+e>=d)return!0}}return!1}});var Tt=function(b){Ig(Tt,this,[b])};vn(Tt,St,{toggle:function(L,K,q,C){var l=this.list,D=l.lp(L).x;if(Nn(l.getToggleIcon(K))){var o=q*C;if(D>=o&&o+q>=D)return l.toggle(K),!0}return l.isDoubleClickToToggle()&&Tn(L)?(l.toggle(K),!0):!1},_34o:function(e,s){var $=this.list,U=$.lp(e).x,O=$._levelMap[s._id],K=$._indent,Z=K*(O+1);return U>=Z&&Z+K>=U?($.checkData(s),void 0):(this.toggle(e,s,K,O)||$.setFocusData(s),void 0)},_33o:function(e,n){var w=this,R=w.list;if(!w.toggle(e,n,R._indent,R.getLevel(n)))if(Sl(e)){var N=R.sm();if(N.size()>0){for(var E=R._rows,m=null,f=0,Z=E.size();Z>f;f++)if(R.isSelected(E.get(f))){m=f;break}for(var H=null,f=E.size()-1;f>=0;f--)if(R.isSelected(E.get(f))){H=f;break}var d,p,F=R.getRowIndex(n);for(m>F?(d=F-1,p=m):F>H?(d=H,p=F):(d=m,p=H);d!==p;)d++,N.as(R._rows.get(d))}else N.ss(n)}else Tt.superClass._33o.call(w,e,n)},handle_keydown:function(z){if(nn(z)||Fk(z)){var W=this.list,C=W._rows,R=W.isCheckMode(),e=W.sm(),d=R?W.getFocusData():e.ld();d?d.hasChildren()&&(nn(z)?W.collapse(d):W.expand(d)):C.size()>0&&(d=C.get(0),R?W.setFocusData(d):e.ss(d))}else Tt.superClass.handle_keydown.call(this,z)}});var Ut=Kt.TableView=function(H){this._98I(),this._5o(H),new Vt(this)};Lt("TableView",y,{ms_ac:[Li,$k,Oe,"sortMode",Yl,Un,Sj,$r,fq,bc,Rh,"sortColumn",mb,Zd,om,$i,Ve,zk,ms],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:wl,_editable:!0,_batchEditable:!1,_rowHeight:Xe,_rowLineVisible:Q.tableViewRowLineVisible,_rowLineColor:Q.tableViewRowLineColor,_columnLineVisible:Q.tableViewColumnLineVisible,_columnLineColor:Q.tableViewColumnLineColor,_scrollBarColor:sk,_scrollBarSize:fj,_autoHideScrollBar:Bm,_autoMakeVisible:jg,_selectBackground:Q.tableViewSelectBackground,_labelColor:Q.tableViewLabelColor,_labelSelectColor:Q.tableViewLabelSelectColor,_labelFont:Q.tableViewLabelFont,getCheckColumn:function(){var L=this;if(!L._31o){var q=L._31o=new Nt;q.setEditable(!0),q.setWidth(40),q.getValue=L.getCheckColumValue,q.drawCell=L.drawCheckColumnCell}return L._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(q){var O=this,C=O._39o,R=O.getCheckColumn();q!==O.isCheckMode()&&(q?C.add(R,0):C.remove(R),O.fp(Eq,!q,q))},getCheckColumValue:function(Z,Y,x){return x.isSelected(Z)},drawCheckColumnCell:function(S,O,Q,J,L,j,s,W,H){Pq(S,H.getCheckIcon(O),L+s/2,j+W/2,O,H)}});var Vt=function(n){Ig(Vt,this,[n])};vn(Vt,St,{_34o:function(d,C){var Z=this.list,z=Z._31o;if(Z.isCellEditable(C,z,d)){var K=Z._3Q(z),b=Z.lp(d).x;if(K&&b>=K.startX&&b<K.startX+z.getWidth())return Z.checkData(C),void 0}Z._37O(C,d),Z.setFocusData(C)},_33o:function(d,W){this.list._37O(W,d),Vt.superClass._33o.apply(this,arguments)}});var Wt=Kt.TreeTableView=function(u){var j=this,U=j._4o=new Nt;j._35o(),j._98I(),j._5o(u),U.setDisplayName("Name"),U.setEditable(!0),U.setWidth(180),U.drawCell=Xt,U.getValue=Yt,j._39o.add(U),new Zt(j)},Xt=function(S,L,f,t,c,C,F,T,Q){Q.drawTree(S,L,f,c,C,F,T)},Yt=function(d,v,I){return I.getLabel(d)};Lt("TreeTableView",y,{ms_ac:[Li,$k,Oe,"sortMode",Yl,Un,Cf,Eq,"rootData","rootVisible",mb,Zd,"sortColumn",Nm,es,om,$i,Ve,zk,fq,Sj,$r,bc,Rh,ms,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:wl,_checkMode:O,_editable:!0,_batchEditable:!1,_indent:rk,_rowHeight:Xe,_rowLineVisible:Q.treeTableViewRowLineVisible,_rowLineColor:Q.treeTableViewRowLineColor,_columnLineVisible:Q.treeTableViewColumnLineVisible,_columnLineColor:Q.treeTableViewColumnLineColor,_expandIcon:Q.treeTableViewExpandIcon,_collapseIcon:Q.treeTableViewCollapseIcon,_scrollBarColor:sk,_scrollBarSize:fj,_autoHideScrollBar:Bm,_autoMakeVisible:jg,_selectBackground:Q.treeTableViewSelectBackground,_labelColor:Q.treeTableViewLabelColor,_labelSelectColor:Q.treeTableViewLabelSelectColor,_labelFont:Q.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var Zt=function(z){Ig(Zt,this,[z])};vn(Zt,St,{_34o:function(W,t){var $=this.list,z=$._4o,Z=$._3Q(z),L=$.lp(W).x;if(Z){var T=$._indent,V=Z.startX+T*$.getLevel(t);if(Nn($.getToggleIcon(t))&&L>=V&&V+T>=L)return $.toggle(t),void 0;if($.isCellEditable(t,z)&&(V+=T,L>=V&&V+T>=L))return $.checkData(t),void 0}$._37O(t,W),$.setFocusData(t)},_33o:function(d,q){var m=this.list,V=m.lp(d).x;if(Nn(m.getToggleIcon(q))){var G=m._3Q(m._4o);if(G){var C=m._indent,R=G.startX+C*m.getLevel(q);if(V>=R&&R+C>=V)return m.toggle(q),void 0}}m._37O(q,d),Zt.superClass._33o.apply(this,arguments)}});var $t=Kt.TableHeader=function(f){var U=this,O=U._view=Kj(1,U),h=U._39o=f.getColumnModel(),J=U.iv;U.tv=U._tableView=f,U._60I=new td,U._canvas=qb(O),O.style.background=Q.tableHeaderBackground||"",O.style.height=Jb+hi,h.mm(J,U),h.md(J,U),h.mh(J,U),f.mp(function(E){Bt[E.property]&&U.iv()},U),new _t(U),U.iv()};Lt("TableHeader",y,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Li,Oe,Cf,"moveBackground","insertColor",bc,Rh,"resizable","movable"],_checkIcon:Dk,_movable:!0,_resizable:!0,_labelColor:Q.tableHeaderLabelColor,_labelFont:Q.tableHeaderLabelFont,_columnLineColor:Q.tableHeaderColumnLineColor,_columnLineVisible:Q.tableHeaderColumnLineVisible,_sortDescIcon:Q.tableHeaderSortDescIcon,_sortAscIcon:Q.tableHeaderSortAscIcon,_moveBackground:Q.tableHeaderMoveBackground,_insertColor:Q.tableHeaderInsertColor,_indent:rk,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(q){return q.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(N){return N.getColor()||this._labelColor},getLabelAlign:function(l){return l._align},onPropertyChanged:function(){this.iv()},_5Q:function(D){this._61I=D,this.iv()},getLogicalPoint:function(u){return Re(u,this._canvas,this.tv.tx())},validateImpl:function(){var j=this,Z=j._canvas,o=j.getWidth(),B=j.getHeight(),N=j.tv,m=j._60I,g=j._61I,x=-N.tx(),Q=0;(o!==Z.clientWidth||B!==Z.clientHeight)&&Wk(Z,o,B),m.clear(),j._39o._roots.each(function(n){if(n.isVisible()){var i=Q+n.getWidth();x+o>=Q&&i>=x&&m.add({column:n,startX:Q}),Q=i}});var I=sc(Z);if(aj(I,-x,0,1),I.beginPath(),I.rect(x,0,o,B),I.clip(),I.clearRect(x,0,o,B),m.each(function(y){var $=y.column,W=y.startX,Y=$.getWidth();Y>0&&(I.save(),I.beginPath(),I.rect(W,0,Y,B),I.clip(),g&&g.column===$||j.drawColumn(I,$,W,0,Y,B),j._columnLineVisible&&Kl(I,W+Y-1,0,1,B,j._columnLineColor),I.restore())}),g){var s=g.column,Q=g.startX,q=g.position,C=s.getWidth();I.save(),I.beginPath(),I.rect(Q,0,C,B),I.clip(),I.fillStyle=j._moveBackground,I.fill(),j.drawColumn(I,s,Q,0,C,B),I.restore(),lf(I,j._insertColor,q,0,B)}I.restore()},_6Q:function(Z){var T=this.tv;return T._31o===Z&&T.sm().getSelectionMode()===De},drawColumn:function(P,C,e,J,D,o){var b=this,h=b.tv,U=Nn(C.getIcon()),i=b.getLabelAlign(C);if(b._6Q(C)){var v=Nn(b._checkIcon);Pq(P,v,e+D/2,J+o/2,C,b)}else{var N=b.getLabel(C),W=b.getLabelFont(C),Q=b.getLabelColor(C),Y=Ye(W,N).width,k=U?b._indent:0;i===wq?(U&&ks(P,U,Iq,e,J,k,o),Cb(P,N,W,Q,e+k,J,D,o,wq)):i===hb?(U&&ks(P,U,Iq,e+D-Y-k,J,k,o),Cb(P,N,W,Q,e,J,D,o,hb)):(U&&ks(P,U,Iq,e+(D-Y-k)/2,J,k,o),Cb(P,N,W,Q,e+(D-Y+k)/2,J,0,o,wq))}if(C.isSortable()&&h.getSortColumn()===C&&(U=Nn(C.getSortOrder()===Tb?b._sortAscIcon:b._sortDescIcon))){var m=Yj(U,C)/2+2;Pq(P,U,i===hb?e+m:e+D-m,J+o/2,C,h)}}});var _t=function(_){var t=this;t.th=_,t.tv=_._tableView,t.addListeners()};vn(_t,y,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(h){this.getView().style.cursor=h},handle_mousemove:function(H){if(!Nh){var j=this;delete j._29o,j.setCursor(Pg);for(var n=j.th,Y=n._60I,D=n.lp(H).x,q=Y.size()-1;q>=0;q--){var F=Y.get(q),N=F.column,s=F.startX+N.getWidth();if(n.isResizable()&&o(s-D)<=(eb?10:3))return j._29o=F,j.setCursor(Uh),void 0;D>F.startX&&s>D&&(j._29o=F),(N.isClickable()||N.isSortable()||n.isMovable()||j.tv.getCheckColumn&&N===j.tv.getCheckColumn())&&D>F.startX&&s>D&&j.setCursor(gg)}}},handle_mousedown:function(G){this.handle_touchstart(G)},handle_touchstart:function(P){var i=this;tn(P),i.tv.endEditing(),i.handle_mousemove(P),i._29o&&(i.x=_d(P).x,i.lx=i.th.lp(P).x,i.w=i._29o.column.getWidth(),ug(i,P))},handleWindowMouseMove:function(E){this.handleWindowTouchMove(E)},handleWindowTouchMove:function($){var p=this,V=p.th,r=p.getView().style.cursor,m=p._29o,b=_d($).x-p.x;if(p.resizing||p.moving||(r===Uh?p.resizing=1:V.isMovable()&&r===gg&&o(b)>2&&(p.moving=1)),p.resizing)m.column.setWidth(p.w+b);else if(p.moving){var t=p.lx+b;V._60I.each(function(U){var i=U.startX,f=i+U.column.getWidth();if(t>=i&&f>=t){var Q={column:m.column,startX:m.startX+b,front:f-t>t-i,insertColumn:U.column};Q.position=Q.front?i:f,V._5Q(Q)}})}},_16Q:function(C,U){var o=this,s=o.tv,Y=o.th,E=Y._checkIcon;if(Y._6Q(C)){var I=Nn(E),H=o.lx,k=C.getWidth(),r=Yj(I,C);if(H>=U+k/2-r&&U+k/2+r>=H){Y.setCheckIcon(E===vj?Dk:vj);var d=s.sm(),T=s._rows;return E===vj?d.rs(T):d.ss(T),s.onCheckColumnClicked(C),!0}}return!1},handleWindowMouseUp:function(X){this.handleWindowTouchEnd(X)},handleWindowTouchEnd:function(q){var I=this,R=I.tv,r=I.th,m=I._29o;if(I.moving){var K=r._61I;if(K&&K.insertColumn!==K.column){var l=K.column,y=R.getColumnModel()._roots,L=y.remove(l),C=y.indexOf(K.insertColumn);C>=0&&(K.front||C++,C<=y.size()&&(y.add(l,C),R.getColumnModel()._38I(l,L,C)))}r._5Q(O),delete I.moving}else if(!I.resizing&&m){l=m.column;var Y=r.lp(q).x,b=m.startX,E=!0;if(r.onColumnClicked){var t=r.onColumnClicked(l,q,b);t===!1&&(E=!1)}if(E&&Y>=b&&Y<=b+l.getWidth()&&!I._16Q(l,b)){if(l.isSortable()){var j=R.getSortMode(),T=l.getSortOrder();j===wl?R.getSortColumn()===l?(T===yq&&R.setSortColumn(O),l.setSortOrder(T===Tb?yq:Tb)):R.setSortColumn(l):"bistate"===j&&(R.getSortColumn()===l?l.setSortOrder(T===Tb?yq:Tb):R.setSortColumn(l))}R.onColumnClicked(l,q,b)}}I._29o=I.resizing=I.x=I.lx=I.w=O}}),Kt.TablePane=function(K){this.init(new Ut(K))},Lt("TablePane",y,{ms_v:1,_44o:1}),Kt.TreeTablePane=function($){this.init(new Wt($))},Lt("TreeTablePane",y,{ms_v:1,_44o:1}),Kt.Toolbar=function(C){var $=this,d=$._view=Kj(1,$),J=d.style;J.background=Q.toolbarBackground||"",J.height=hk+hi,$._canvas=qb(d),$._30o=new td,$._90I=new td,$.setItems(C||[]),d.handleGroupSelectedChanged=function(d){if(d.isSelected()){var Z=d.getGroupId();null!=Z&&$._items.forEach(function(U){var C=U.element;C&&C!==d&&C.setSelected&&C.getGroupId&&C.getGroupId()===Z&&C.setSelected(!1)})}},new au($)},Lt("Toolbar",y,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[sf,Li,Oe,$k,ms,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:Q.toolbarLabelColor,_labelSelectColor:Q.toolbarLabelSelectColor,_labelFont:Q.toolbarLabelFont,_selectBackground:Q.toolbarSelectBackground,_itemGap:Q.toolbarItemGap,_separatorColor:Q.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(Z){var k=this.getItemInfoAt(Z);return k?k.item.toolTip:O},getLabelColor:function(R){return R&&R.selected&&R.type!==vj&&R.type!==Cq?this._labelSelectColor:this._labelColor},onPropertyChanged:function(W){this.iv(),W.property===sf&&this._items.forEach(function(J){Md(J)})},redraw:function(){this.iv()},addItem:function(F,$){var B=this._items;$==O?B.push(F):B.splice($,0,F),this.fp(sf,O,B)},removeItem:function(H){if(H)for(var j=this._items,A=0;A<j.length;A++)H===j[A]&&(j.splice(A,1),this.fp(sf,O,j))},removeItemById:function(L){if(L!=O)for(var W=this._items,V=0;V<W.length;V++)if(L===W[V].id){var i=W.splice(V,1)[0];return this.fp(sf,O,W),i}},getItemById:function(_){if(_!=O)for(var a=this._items,j=0;j<a.length;j++){var h=a[j];if(_===h.id)return h}},setItemVisible:function(I,y){var J=this.getItemById(I);J&&(J.visible=y)},getItemInfos:function(){return this._30o},getItemInfoAt:function(t){var e=this,Y=0,B=e._30o,R=e.lp(t),H=R.x,X=R.y;if(X>=0&&X<=e.getHeight())for(;Y<B.size();Y++){var W=B.get(Y);if(W.startX<=H&&H<=W.endX)return W}return O},drawItem:function(O,I,F,q,u){if(I.visible===!1)return 0;if(Le(I.visible)&&!I.visible())return 0;var y=this,W=I.disabled;W&&(O.globalAlpha=We);var _=y.drawItemImpl(O,I,F,q,u),H=y._itemGap;return W&&(O.globalAlpha=1),this._currentItem!==I||"separator"===I||I.separator===!0||I.unfocusable||Ed(O,y._separatorColor,F-H/2,0,_+H,q),_},drawItemImpl:function(j,k,V,n,m){var r=this,P=r._view,s=r._itemGap,J=n/2,_=k.type,h=k.element,B=k.label;Vp(h)&&(B=h,h=O);var A,q=r.getLabelFont(k),f=r.getLabelColor(k),U=k.selected,E=Nn(k.icon),p=Yj(E,k),e=0,S=p+(B?Ye(q,B).width:0);if("separator"===k||k.separator===!0)return lf(j,r._separatorColor,V,n/4,J),1;if(h){E&&Pq(j,E,V+p/2,J,k,r),Cb(j,B,q,f,V+p,0,0,n);var c=Dj(h);m||r._90I.add(c),c.parentNode!==P&&Vi(P,c),h.iv&&h.iv(),h.validate&&h.validate();var d=c.getBoundingClientRect(),D=d.width,y=c.style;return Xh(c),y.left=r.tx()+V+S+hi,y.top=(n-d.height)/2+hi,S+D}return _===Cq?A=Nn(U?rf:qs):_===vj&&(A=Nn(U?vj:Dk)),A?(e=Yj(A,k),Pq(j,A,V+e/2,J,k,r),V+=e,S+=e):U&&Kl(j,V-s/2,0,S+s,n,r.getSelectBackground(k)),E&&Pq(j,E,V+p/2,J,k,r),Cb(j,B,q,f,V+p,0,0,n),S},validateImpl:function(){var y=this,G=y._canvas,k=y.getWidth(),S=y.getHeight(),d=y._30o,Z=y._items;Wk(G,k,S);var F=sc(G),H=y._itemGap,u=H/2;aj(F,y.tx(),0,1),F.clearRect(0,0,k,S);var I=y._90I;y._90I=new td,d.clear(),Z.forEach(function(k){var _=y.drawItem(F,k,u,S);d.add({item:k,startX:u,endX:u+_,width:_}),_&&(u+=_+H)}),I.each(function(Y){y._90I.contains(Y)||jf(Y)});var J=y._64I;y._64I=C(0,u-H/2),F.restore(),y._stickToRight?(y._65O=0,F=sc(G),u=k-y._64I+H/2,aj(F,0,0,1),F.clearRect(0,0,k,S),d.clear(),Z.forEach(function(x){var E=y.drawItem(F,x,u,S,!0);d.add({item:x,startX:u,endX:u+E,width:E}),E&&(u+=E+H)}),F.restore()):y.tx(y.tx()),J!==y._64I&&y.onSumWidthChanged(J,y._64I)},onSumWidthChanged:function(){},handleClick:function(J,V){var L=this,B=J.type,m=J.action,g=J.groupId,f=J.selected;J.disabled||(g!=O?f||(J.selected=!0,this._items.forEach(function(m){m.groupId===g&&J!==m&&(m.selected=!1)}),m&&J.action(J,L,V)):B===vj||"toggle"===B?(J.selected=!f,m&&J.action(J,L,V)):m&&J.action(J,L,V)),Sk(),L.iv()}});var au=function(Z){this.tb=Z,this.addListeners()};vn(au,y,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(D){this.handleScroll(D,10*(D.wheelDelta/40))},handle_DOMMouseScroll:function(c){this.handleScroll(c,10*-c.detail)},handleScroll:function(k,b){tn(k);var n=this.tb;n.isScrollable()&&!n._stickToRight&&(n.tx(n.tx()+b),er())},handle_mousemove:function(Y){var $=this;Nh||$.setItem(Y)},handle_mouseout:function(S){var P=this;S.target===P.getView()?P.tb.setCurrentItem(O):P.handle_mousemove(S)},handle_mousedown:function(R){this.handle_mousemove(R),this.handle_touchstart(R)},handle_touchstart:function(q){var K=this,M=K.tb,h=q.target;Hb(q)&&(h===K.getView()||h===M._canvas)&&(tn(q),M.setFocus(q)&&(this.setItem(q,!0),(M.isScrollable()||K.info&&!K.info.item.disabled)&&(K.x=_d(q).x,K.tx=M.tx(),ug(K,q))))},handleWindowMouseMove:function(P){this.handleWindowTouchMove(P)},handleWindowTouchMove:function(Y){var s=this,W=s.tb;if(!W._stickToRight){var S=_d(Y).x-s.x;!s._25o&&o(S)>2&&W.isScrollable()&&(s._25o=1),s._25o&&W.tx(s.tx+S)}},handleWindowMouseUp:function(L){this.handleWindowTouchEnd(L)},handleWindowTouchEnd:function(H){var $=this,e=$.tb,x=$.info,I=$.tb.getItemInfoAt(H);if(!$._25o&&x){var z=x.item;I&&I.item===z&&e.handleClick(z,H)}$._25o=$.x=$.tx=O,$.setItem()},setItem:function(S,h){var D=this,A=D.tb,E=D.info=S?A.getItemInfoAt(S):O,T=E?E.item:O;A.setCurrentItem(T),h&&T&&Le(T.onDown)&&T.onDown(S)}}),Kt.BorderPane=function(){this._view=Kj(1,this),this.iv()},Lt("BorderPane",y,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(x,D){this._12o("leftView",x),D!=O&&this.setLeftWidth(D)},getRightView:function(){return this._rightView},setRightView:function(W,H){this._12o("rightView",W),H!=O&&this.setRightWidth(H)},getTopView:function(){return this._topView},setTopView:function(o,g){this._12o("topView",o),g!=O&&this.setTopHeight(g)},getBottomView:function(){return this._bottomView},setBottomView:function(e,y){this._12o("bottomView",e),y!=O&&this.setBottomHeight(y)},getCenterView:function(){return this._centerView},setCenterView:function(w){this._12o("centerView",w)},_12o:function(c,F){var C=this,u="_"+c,E=C._view,h=C[u];h!==F&&(h&&(h.getView?jf(h.getView()):jf(h)),C[u]=F,F&&(F.getView?Vi(E,F.getView(),1):Vi(E,F,1)),C.fp(c,h,F))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var e=this,d=e._topView,n=e._bottomView,j=e._leftView,i=e._rightView,p=e._centerView,f=e.getWidth(),Z=e.getHeight(),H=0,$=0,m=f,Q=Z,u=0,I=0,R=0,L=0;d&&(u=e._topHeight==O?Kk(d):e._topHeight,$=u),n&&(I=e._bottomHeight==O?Kk(n):e._bottomHeight,Q=Z-I),j&&(R=e._leftWidth==O?Lq(j):e._leftWidth,H=R),i&&(L=e._rightWidth==O?Lq(i):e._rightWidth,m=f-L);var K=C(0,m-H),V=C(0,Q-$);d&&oc(d,0,0,f,u),n&&oc(n,0,Q,f,I),j&&oc(j,0,$,R,V),i&&oc(i,m,$,L,V),p&&oc(p,H,$,K,V)}})}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);