!function(V,$,m){"use strict";function I(M){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(M);for(var w="",n=0,J=M.length;J>n;n++)w+=String.fromCharCode(M[n]);try{return decodeURIComponent(escape(w))}catch(y){return w}}function c(w){var c="Kaydara FBX Binary  \0";return w.byteLength>=c.length&&c===F(w,0,c.length)}function F(Y,Z,E){return Z===m&&(Z=0),E===m&&(E=Y.byteLength),I(new Uint8Array(Y,Z,E))}function X(f){return f/46186158e3}function k(J){return J*Math.PI/180}function e(B){return B=B||0,B>=6?_[0]:_[B]}function l(S){var H=new u,I=new u,w=new u,D=new u,U=new u,j=new u,p=new u,m=new u,W=new u,X=new u,h=new u,b=new u,N=S.inheritType?S.inheritType:0;if(S.translation&&H.setPosition(d.fromArray(S.translation)),S.preRotation){var L=S.preRotation.map(k);L.push(S.eulerOrder),I.makeRotationFromEuler(Z.fromArray(L))}if(S.rotation){var L=S.rotation.map(k);L.push(S.eulerOrder),w.makeRotationFromEuler(Z.fromArray(L))}if(S.postRotation){var L=S.postRotation.map(k);L.push(S.eulerOrder),D.makeRotationFromEuler(Z.fromArray(L)),D.invert()}S.scale&&U.scale(d.fromArray(S.scale)),S.scalingOffset&&p.setPosition(d.fromArray(S.scalingOffset)),S.scalingPivot&&j.setPosition(d.fromArray(S.scalingPivot)),S.rotationOffset&&m.setPosition(d.fromArray(S.rotationOffset)),S.rotationPivot&&W.setPosition(d.fromArray(S.rotationPivot)),S.parentMatrixWorld&&(h.copy(S.parentMatrix),X.copy(S.parentMatrixWorld));var t=I.clone().multiply(w).multiply(D),V=new u;V.extractRotation(X);var $=new u;$.copyPosition(X);var g=$.clone().invert().multiply(X),i=V.clone().invert().multiply(g),K=U,s=new u;if(0===N)s.copy(V).multiply(t).multiply(i).multiply(K);else if(1===N)s.copy(V).multiply(i).multiply(t).multiply(K);else{var c=(new u).scale((new T).setFromMatrixScale(h)),F=c.clone().invert(),R=i.clone().multiply(F);s.copy(V).multiply(t).multiply(R).multiply(K)}var O=W.clone().invert(),n=j.clone().invert(),G=H.clone().multiply(m).multiply(W).multiply(I).multiply(w).multiply(D).multiply(O).multiply(p).multiply(j).multiply(U).multiply(n),f=(new u).copyPosition(G),B=X.clone().multiply(f);return b.copyPosition(B),G=b.clone().multiply(s),G.premultiply(X.invert()),G}function w(M){for(var o=[],P=new u,T=0,t=M.length;t>T;T++)P.copy(M[T].matrixWorld).invert().toArray(o,16*T);return o}function A(s,b,x,r){var q;switch(r.mappingType){case"ByPolygonVertex":q=s;break;case"ByPolygon":q=b;break;case"ByVertice":q=x;break;case"AllSame":q=r.indices[0];break;default:console.warn("unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(q=r.indices[q]);var d=q*r.dataSize,Q=d+r.dataSize;return G(a,r.buffer,d,Q)}function n(f,n){for(var k=0,u=f.length,h=n.length;h>k;k++,u++)f[u]=n[k]}function G(Y,X,k,t){for(var S=k,n=0;t>S;S++,n++)Y[n]=X[S];return Y}function H(u,I,C){return u.slice(0,I).concat(C).concat(u.slice(I))}function b(y){return y.replace(/\s/g,"_").replace(Xj,"")}function q(i){function s(P){var q=i[P-1];return i=i.slice(L+P),L++,q}for(var o=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],L=0,l=0;l<o.length;++l){var B=s(1);if(B===o[l])return!1}return!0}function P(Q){var p=/FBXVersion: (\d+)/,G=Q.match(p);if(G){var k=parseInt(G[1]);return k}throw new Error("Cannot find the version number for the file given.")}function W(L){var h=L.split(",").map(function(S){return parseFloat(S)});return h}function C(j,i,s){this.name="",this.array=j,this.itemSize=i,this.count=j!==m?j.length/i:0,this.normalized=s===!0,this.usage=p.WebGLConstants.STATIC_DRAW,this.updateRange={offset:0,count:-1},this.version=0}function Y(F,X,l){C.call(this,new Int8Array(F),X,l)}function E($,d,s){C.call(this,new Uint8Array($),d,s)}function y(R,B,O){C.call(this,new Uint8ClampedArray(R),B,O)}function D(c,I,G){C.call(this,new Int16Array(c),I,G)}function R(S,j,u){C.call(this,new Uint16Array(S),j,u)}function t(x,l,O){C.call(this,new Int32Array(x),l,O)}function N(e,o,v){C.call(this,new Uint32Array(e),o,v)}function M(j,P,y){C.call(this,new Float32Array(j),P,y)}function Q(g,U,b){C.call(this,new Float64Array(g),U,b)}function O(y,a,c){var Q=c.length-y-1;if(a>=c[Q])return Q-1;if(a<=c[y])return y;for(var d=y,v=Q,Z=Math.floor((d+v)/2);a<c[Z]||a>=c[Z+1];)a<c[Z]?v=Z:d=Z,Z=Math.floor((d+v)/2);return Z}function j(X,H,g,o){var p=[],C=[],x=[];p[0]=1;for(var t=1;g>=t;++t){C[t]=H-o[X+1-t],x[t]=o[X+t]-H;for(var T=0,O=0;t>O;++O){var F=x[O+1],D=C[t-O],G=p[O]/(F+D);p[O]=T+F*G,T=D*G}p[t]=T}return p}function x(w,x,C,S){for(var h=O(w,S,x),e=j(h,S,w,x),E=new L(0,0,0,0),t=0;w>=t;++t){var o=C[h-w+t],M=e[t],f=o.w*M;E.x+=o.x*f,E.y+=o.y*f,E.z+=o.z*f,E.w+=o.w*M}return E}var o,B="ht",p=V[B],s=p.Default,r=s.getInternal(),K=(s.clone,s.def),u=(p.WebGLVarants,p.Math.Matrix4),L=p.Math.Vector4,h=p.Math.Euler,g=p.Math.Quaternion,T=p.Math.Vector3,_=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"],v={position:"vs",normal:"ns"},S=new u,i=function(){var J=new T,v=new g,i=new T;return function(c,U){U.decompose(J,v,i),c.position=J.toArray(),c.quaternion=v.toArray(),c.scale=i.toArray()}}(),U=function(T,O,C){var L=O[C];L!==m&&(T[C]=L)},z=function(J,w,a,d){var p=w.mat;p&&(J.mat=p.name);var X=w.mesh;if(X){var l;J.mesh=l={},X.index&&(l.index=X.index.array);var b=X.attributes;for(var L in b){var V=v[L]||L;l[V]=b[L].array}}w.matrix.equals(S)||i(J,w.matrix);var Z;if(w.userData&&(Z=w.userData.transformData)&&(Z.rotationOffset||Z.rotationPivot||Z.scalingOffset||Z.scalingPivot)){var c=J.transformData={};c.translation=Z.translation||[0,0,0];var E;Z.rotation?(E=Z.rotation.map(k),E.push(Z.eulerOrder),c.rotation=E):c.rotation=[0,0,0,1],c.scale=Z.scale||[1,1,1],U(c,Z,"rotationOffset"),U(c,Z,"rotationPivot"),U(c,Z,"scalingOffset"),U(c,Z,"scalingPivot")}var P=w.isBone;P&&(J.isBone=!0),J.name=w.name,J.ID=w.ID;var _=w.skeleton;_&&(J.skeleton=_);var G=w.animations;G&&(J.animations=G);var x=w.getChildren().getArray();if(x){J.comps=[];for(var j,r=0,R=x.length;R>r;r++)J.comps.push(j={}),z(j,x[r],a,d)}},J=function(_,D){if(c(_))o=(new bh)._zS(_);else{var W=F(_);if(!q(W))throw new Error("Unknown format.");if(P(W)<7e3)throw new Error("FBX version not supported, FileVersion: "+P(W));o=(new Bs)._zS(W)}var n=(new Id)._zS(o),B={model3d:!0},d=n.materialMap;if(d){var G=B.matDef={};d.forEach(function(V){var J=V.name,E=G[J]={};for(var L in V)"name"!==L&&"setValues"!==L&&(E[L]=V[L])})}z(B,n,D,{});var M,e={},I={};if(s.traverse(B,null,function(Z){if(e[Z.name]){Z.displayName=Z.name;do M=Z.name+"_"+p.Math.generateIncreasingID();while(e[M]);Z.name=M}e[Z.name]=Z.ID,I[Z.ID]=Z.name,delete Z.ID},"comps"),B.animations&&B.animations.forEach(function(A){var x=A.tracks;x.forEach(function(m){var K=m.name,S=K.split(".");S[0]&&I[S[0]]&&(m.name=I[S[0]]+"."+S.slice(1).join("."))})}),s.traverse(B,null,function(d){var G=d.skeleton;if(G){for(var R=G[0],A=R.length,X=new Array(A),_=0;A>_;_++)X[_]=R[_].name;d.skeleton={bones:X,boneMatrixInverses:G[1],bindMatrix:G[2].toArray(),bindMatrixInverse:(new u).copy(G[2]).invert().toArray()}}},"comps"),s.traverse(B,null,function(n){var e=n.comps;if(e)for(var N=e.length-1;N>=0;N--){var I=e[N];I.mesh||I.isBone||I.comps&&I.comps.length||e.splice(N,1)}},"comps"),D.center||D.cube){var r=new p.Math.Box3,g=new p.Math.Box3;s.traverse(n,function(b){var p=b.mesh;p&&p.attributes&&p.attributes.position&&(g.setFromArray(p.attributes.position.array),b.matrixWorld&&g.applyMatrix4(b.matrixWorld),r.expandByBox(g))},null,"_children");var R,J,L,X,k,C;if(D.center?(B.center=r.max.clone().add(r.min).multiplyScalar(.5).toArray(),R=B.center[0],J=B.center[1],L=B.center[2]):R=J=L=0,D.cube){var Q;D.center?(Q=r.max.clone().sub(r.min).toArray(),X=Q[0],k=Q[1],C=Q[2]):(X=2*Math.max(Math.abs(r.min.x),Math.abs(r.max.x)),k=2*Math.max(Math.abs(r.min.y),Math.abs(r.max.y)),C=2*Math.max(Math.abs(r.min.z),Math.abs(r.max.z))),0===X&&(X=Math.min(k,C)/1e3||.001),0===k&&(k=Math.min(X,C)/1e3||.001),0===C&&(C=Math.min(X,k)/1e3||.001),B.rawS3=[X,k,C],B.scale=[1/X,1/k,1/C]}else X=k=C=1;D.center&&(B.position=[-R/X,-J/k,-L/C])}var O=D.flipY!==!1;O&&s.traverse(B,function(B){var C=B.mesh;if(C&&(C.uv||C.uv2)){for(var f=1,l=C.uv,A=l?l.length:0;A>f;f+=2)l[f]=1-l[f];for(var f=1,l=C.uv2,A=l?l.length:0;A>f;f+=2)l[f]=1-l[f]}},null,"comps");var y=D.matDef;if(y)if(B.matDef)for(var i in y)B.matDef[i]=y[i];else B.matDef=y;return B},f=function(){this.add=function(z,w){this[z]=w}};r.addMethod(s,{loadFbx:function(G,l){l=l||{};var k=function(Q){var y=l.finishFunc,q=l.shape3d,I=Q?J(Q,l):null;I?y&&y(I,G,q):y&&y(null)};l.responseType="arraybuffer",s.xhrLoad(G,function(f){k(f)},l)},parseFbx:function(S,e){return J(S,e)}});var Z=new h,d=new T,a=[],Br="\\[\\]\\.:\\/",Xj=new RegExp("["+Br+"]","g"),oh=function(){this.userData={},this.matrix=new u,this.matrixWorld=new u,oh.superClass.constructor.apply(this,arguments)};K(oh,p.Data,{add:function(R){this.addChild(R)},traverse:function(O){s.traverse(this,O)},applyMatrix4:function(L){this.matrix.premultiply(L),this.getParent()?this.matrixWorld.multiplyMatrices(this.getParent().matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix)}});var kf=function(){this.type="phong",this.setValues=function(h){if(h)for(var U in h)this[U]=h[U]},this.clone=function(){var f=new kf;for(var Y in this)this[Y]&&(f[Y]=this[Y]);return f}},yj=function(X){for(var F in X)this[F]=X[F]},og=function(K,R){this.mat=R,this.mesh=K,this.userData={},og.superClass.constructor.apply(this,arguments)};K(og,oh,{});var qm,ag,Bs=function(){this._2S=function(){return this.nodeStack[this.currentIndent-2]},this._3S=function(){return this.nodeStack[this.currentIndent-1]},this._4S=function(){return this.currentProp},this._5S=function(G){this.nodeStack.push(G),this.currentIndent+=1},this._6S=function(){this.nodeStack.pop(),this.currentIndent-=1},this._7S=function(E,$){this.currentProp=E,this.currentPropName=$},this._zS=function(N){this.currentIndent=0,this.allNodes=new f,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var s=this,K=N.split(/[\r\n]+/);return K.forEach(function(U,i){var V=U.match(/^[\s\t]*;/),r=U.match(/^[\s\t]*$/);if(!V&&!r){var Y=U.match("^\\t{"+s.currentIndent+"}(\\w+):(.*){",""),g=U.match("^\\t{"+s.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=U.match("^\\t{"+(s.currentIndent-1)+"}}");Y?s._8S(U,Y):g?s._aS(U,g,K[++i]):c?s._6S():U.match(/^[^\s\t}]/)&&s._bS(U)}}),this.allNodes},this._8S=function(g,E){var l=E[1].trim().replace(/^"/,"").replace(/"$/,""),o=E[2].split(",").map(function(S){return S.trim().replace(/^"/,"").replace(/"$/,"")}),n={name:l},v=this._9S(o),N=this._3S();0===this.currentIndent?this.allNodes.add(l,n):l in N?("PoseNode"===l?N.PoseNode.push(n):N[l].id!==m&&(N[l]={},N[l][N[l].id]=N[l]),""!==v.id&&(N[l][v.id]=n)):"number"==typeof v.id?(N[l]={},N[l][v.id]=n):"Properties70"!==l&&(N[l]="PoseNode"===l?[n]:n),"number"==typeof v.id&&(n.id=v.id),""!==v.name&&(n.attrName=v.name),""!==v.type&&(n.attrType=v.type),this._5S(n)},this._9S=function(J){var M=J[0];""!==J[0]&&(M=parseInt(J[0]),isNaN(M)&&(M=J[0]));var K="",g="";return J.length>1&&(K=J[1].replace(/^(\w+)::/,""),g=J[2]),{id:M,name:K,type:g}},this._aS=function(Z,r,O){var c=r[1].replace(/^"/,"").replace(/"$/,"").trim(),A=r[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===c&&","===A&&(A=O.replace(/"/g,"").replace(/,$/,"").trim());var G=this._3S(),g=G.name;if("Properties70"===g)return this._cS(Z,c,A),void 0;if("C"===c){var w=A.split(",").slice(1),D=parseInt(w[0]),f=parseInt(w[1]),h=A.split(",").slice(3);h=h.map(function(I){return I.trim().replace(/^"/,"")}),c="connections",A=[D,f],n(A,h),G[c]===m&&(G[c]=[])}"Node"===c&&(G.id=A),c in G&&Array.isArray(G[c])?G[c].push(A):"a"!==c?G[c]=A:G.a=A,this._7S(G,c),"a"===c&&","!==A.slice(-1)&&(G.a=W(A))},this._bS=function($){var a=this._3S();a.a+=$,","!==$.slice(-1)&&(a.a=W(a.a))},this._cS=function(f,d,k){var w=k.split('",').map(function(s){return s.trim().replace(/^\"/,"").replace(/\s/,"_")}),T=w[0],j=w[1],A=w[2],L=w[3],r=w[4];switch(j){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":r=parseFloat(r);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":r=W(r)}this._2S()[T]={type:j,type2:A,flag:L,value:r},this._7S(this._2S(),T)}},bh=function(){this._zS=function(v){var M=new ec(v);M.skip(23);var E=M.getUint32();if(6400>E)throw new Error("FBX version not supported : "+E);for(var t=new f;!this._dS(M);){var n=this._eS(M,E);null!==n&&t.add(n.name,n)}return t},this._dS=function(K){return 0===K.size()%16?(-16&K.getOffset()+160+16)>=K.size():K.getOffset()+160+16>=K.size()},this._eS=function(_,p){var R={},L=p>=7500?_.getUint64():_.getUint32(),j=p>=7500?_.getUint64():_.getUint32();p>=7500?_.getUint64():_.getUint32();var t=_.getUint8(),E=_.getString(t);if(0===L)return null;for(var k=[],$=0;j>$;$++)k.push(this._gS(_));var g=k.length>0?k[0]:"",F=k.length>1?k[1]:"",l=k.length>2?k[2]:"";for(R.singleProperty=1===j&&_.getOffset()===L?!0:!1;L>_.getOffset();){var I=this._eS(_,p);null!==I&&this._fS(E,R,I)}return R.propertyList=k,"number"==typeof g&&(R.id=g),""!==F&&(R.attrName=F),""!==l&&(R.attrType=l),""!==E&&(R.name=E),R},this._fS=function(l,L,v){if(v.singleProperty===!0){var z=v.propertyList[0];Array.isArray(z)?(L[v.name]=v,v.a=z):L[v.name]=z}else if("Connections"===l&&"C"===v.name){var X=[];v.propertyList.forEach(function(B,O){0!==O&&X.push(B)}),L.connections===m&&(L.connections=[]),L.connections.push(X)}else if("Properties70"===v.name){var V=$.keys(v);V.forEach(function(J){L[J]=v[J]})}else if("Properties70"===l&&"P"===v.name){var I,T=v.propertyList[0],y=v.propertyList[1],a=v.propertyList[2],u=v.propertyList[3];0===T.indexOf("Lcl ")&&(T=T.replace("Lcl ","Lcl_")),0===y.indexOf("Lcl ")&&(y=y.replace("Lcl ","Lcl_")),I="Color"===y||"ColorRGB"===y||"Vector"===y||"Vector3D"===y||0===y.indexOf("Lcl_")?[v.propertyList[4],v.propertyList[5],v.propertyList[6]]:v.propertyList[4],L[T]={type:y,type2:a,flag:u,value:I}}else L[v.name]===m?"number"==typeof v.id?(L[v.name]={},L[v.name][v.id]=v):L[v.name]=v:"PoseNode"===v.name?(Array.isArray(L[v.name])||(L[v.name]=[L[v.name]]),L[v.name].push(v)):L[v.name][v.id]===m&&(L[v.name][v.id]=v)},this._gS=function(v){var r,h=v.getString(1);switch(h){case"C":return v._hS();case"D":return v.getFloat64();case"F":return v.getFloat32();case"I":return v.getInt32();case"L":return v.getInt64();case"R":return r=v.getUint32(),v._vS(r);case"S":return r=v.getUint32(),v.getString(r);case"Y":return v.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var c=v.getUint32(),f=v.getUint32(),$=v.getUint32();if(0===f)switch(h){case"b":case"c":return v._iS(c);case"d":return v.getFloat64Array(c);case"f":return v.getFloat32Array(c);case"i":return v.getInt32Array(c);case"l":return v.getInt64Array(c)}"undefined"==typeof zk&&console.error("Require External library fflate.min.js.");var o=zk.unzlibSync(new Uint8Array(v._vS($))),S=new ec(o.buffer);switch(h){case"b":case"c":return S._iS(c);case"d":return S.getFloat64Array(c);case"f":return S.getFloat32Array(c);case"i":return S.getInt32Array(c);case"l":return S.getInt64Array(c)}default:throw new Error("Unknown property type "+h)}}},ec=function(T,y){this.dv=new DataView(T),this.offset=0,this.littleEndian=y!==m?y:!0,this.getOffset=function(){return this.offset},this.size=function(){return this.dv.buffer.byteLength},this.skip=function(b){this.offset+=b},this._hS=function(){return 1===(1&this.getUint8())},this._iS=function(Q){for(var Y=[],x=0;Q>x;x++)Y.push(this._hS());return Y},this.getUint8=function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},this.getInt16=function(){var O=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,O},this.getInt32=function(){var R=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,R},this.getInt32Array=function(t){for(var u=[],o=0;t>o;o++)u.push(this.getInt32());return u},this.getUint32=function(){var D=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,D},this.getInt64=function(){var D,L;return this.littleEndian?(D=this.getUint32(),L=this.getUint32()):(L=this.getUint32(),D=this.getUint32()),2147483648&L?(L=4294967295&~L,D=4294967295&~D,4294967295===D&&(L=4294967295&L+1),D=4294967295&D+1,-(4294967296*L+D)):4294967296*L+D},this.getInt64Array=function(h){for(var $=[],I=0;h>I;I++)$.push(this.getInt64());return $},this.getUint64=function(){var B,w;return this.littleEndian?(B=this.getUint32(),w=this.getUint32()):(w=this.getUint32(),B=this.getUint32()),4294967296*w+B},this.getFloat32=function(){var x=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,x},this.getFloat32Array=function(Q){for(var D=[],x=0;Q>x;x++)D.push(this.getFloat32());return D},this.getFloat64=function(){var P=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,P},this.getFloat64Array=function(G){for(var z=[],s=0;G>s;s++)z.push(this.getFloat64());return z},this._vS=function(H){var n=this.dv.buffer.slice(this.offset,this.offset+H);return this.offset+=H,n},this.getString=function(n){for(var N=[],v=0;n>v;v++)N[v]=this.getUint8();var z=N.indexOf(0);return z>=0&&(N=N.slice(0,z)),I(new Uint8Array(N))}},zk=function(i){return i()}(function(){function e(w,d){return d||"function"!=typeof w||(d=w,w={}),this.ondata=d,w}function Y(G,a,A){if(A||(A=a,a={}),"function"!=typeof A)throw"no callback";return jl(G,a,[Il],function(r){return sg(t(r.data[0],r.data[1]))},0,A)}function t(M,I){return Kc(M,I||{},0,0)}function g(O,m,j){if(j||(j=m,m={}),"function"!=typeof j)throw"no callback";return jl(O,m,[wd],function(f){return sg(y(f.data[0],Np(f.data[1])))},1,j)}function y(J,H){return W(J,H)}function f(q,L,m){if(m||(m=L,L={}),"function"!=typeof m)throw"no callback";return jl(q,L,[Il,Ke,function(){return[i]}],function(d){return sg(i(d.data[0],d.data[1]))},2,m)}function i(S,L){L||(L={});var i=Db(),g=S.length;i.p(S);var Z=Kc(S,L,If(L),8),s=Z.length;return oe(Z,L),zf(Z,s-8,i.d()),zf(Z,s-4,g),Z}function M(X,g,W){if(W||(W=g,g={}),"function"!=typeof W)throw"no callback";return jl(X,g,[wd,en,function(){return[l]}],function(z){return sg(l(z.data[0]))},3,W)}function l(b,v){return W(b.subarray(Fl(b),-8),v||new F(_d(b)))}function L(K,U,L){if(L||(L=U,U={}),"function"!=typeof L)throw"no callback";return jl(K,U,[Il,Rg,function(){return[X]}],function(D){return sg(X(D.data[0],D.data[1]))},4,L)}function X(z,O){O||(O={});var W=Sf();W.p(z);var t=Kc(z,O,2,4);return $f(t,O),zf(t,t.length-4,W.d()),t}function B(i,W,I){if(I||(I=W,W={}),"function"!=typeof I)throw"no callback";return jl(i,W,[wd,Mc,function(){return[T]}],function(u){return sg(T(u.data[0],Np(u.data[1])))},5,I)}function T(p,z){return W((Jb(p),p.subarray(2,-4)),z)}function h(u,A,y){if(y||(y=A,A={}),"function"!=typeof y)throw"no callback";return 31==u[0]&&139==u[1]&&8==u[2]?M(u,A,y):8!=(15&u[0])||u[0]>>4>7||(u[0]<<8|u[1])%31?g(u,A,y):B(u,A,y)}function S(Z,E){return 31==Z[0]&&139==Z[1]&&8==Z[2]?l(Z,E):8!=(15&Z[0])||Z[0]>>4>7||(Z[0]<<8|Z[1])%31?y(Z,E):T(Z,E)}function z(n,g){if(g){for(var Q=new F(n.length),Z=0;Z<n.length;++Z)Q[Z]=n.charCodeAt(Z);return Q}if(fl)return fl.encode(n);var S=n.length,W=new F(n.length+(n.length>>1)),c=0,X=function(X){W[c++]=X};for(Z=0;S>Z;++Z){if(c+5>W.length){var a=new F(c+8+(S-Z<<1));a.set(W),W=a}var B=n.charCodeAt(Z);128>B||g?X(B):2048>B?(X(192|B>>6),X(128|63&B)):B>55295&&57344>B?(X(240|(B=65536+(1047552&B)|1023&n.charCodeAt(++Z))>>18),X(128|63&B>>12),X(128|63&B>>6),X(128|63&B)):(X(224|B>>12),X(128|63&B>>6),X(128|63&B))}return _(W,0,c)}function d(a,B){if(B){for(var v="",x=0;x<a.length;x+=16384)v+=String.fromCharCode.apply(null,a.subarray(x,x+16384));return v}if(ss)return ss.decode(a);var o=He(a);if(o[1].length)throw"invalid utf-8 data";return o[0]}function k(T,Q,w){if(w||(w=Q,Q={}),"function"!=typeof w)throw"no callback";var J={};gk(T,"",J,Q);var A=$.keys(J),V=A.length,f=0,p=0,x=V,u=Array(V),b=[],Z=function(){for(var y=0;y<b.length;++y)b[y]()},h=function(){var k=new F(p+22),J=f,g=p-f;p=0;for(var H=0;x>H;++H){var e=u[H];try{var E=e.c.length;Up(k,p,e,e.f,e.u,E);var G=30+e.f.length+af(e.extra),y=p+G;k.set(e.c,y),Up(k,f,e,e.f,e.u,E,p,e.m),f+=16+G+(e.m?e.m.length:0),p=y+E}catch(k){return w(k,null)}}Xr(k,f,u.length,g,J),w(null,k)};V||h();for(var R=function(i){var d=A[i],$=J[d],q=$[0],g=$[1],S=Db(),L=q.length;S.p(q);var c=z(d),B=c.length,I=g.comment,T=I&&z(I),j=T&&T.length,v=af(g.extra),r=0==g.level?0:8,l=function(O,U){if(O)Z(),w(O,null);else{var G=U.length;u[i]=ld(g,{size:L,crc:S.d(),c:U,f:c,m:T,u:B!=d.length||T&&I.length!=j,compression:r}),f+=30+B+v+G,p+=76+2*(B+v)+(j||0)+G,--V||h()}};if(B>65535&&l("filename too long",null),r)if(16e4>L)try{l(null,t(q,g))}catch(i){l(i,null)}else b.push(Y(q,g,l));else l(null,q)},c=0;x>c;++c)R(c);return Z}function I(W,N){N||(N={});var h={},n=[];gk(W,"",h,N);var f=0,g=0;for(var L in h){var y=h[L],T=y[0],c=y[1],M=0==c.level?0:8,P=(S=z(L)).length,E=c.comment,l=E&&z(E),b=l&&l.length,K=af(c.extra);if(P>65535)throw"filename too long";var H=M?t(T,c):T,u=H.length,d=Db();d.p(T),n.push(ld(c,{size:T.length,crc:d.d(),c:H,f:S,m:l,u:P!=L.length||l&&E.length!=b,o:f,compression:M})),f+=30+P+K+u,g+=76+2*(P+K)+(b||0)+u}for(var s=new F(g+22),w=f,o=g-f,I=0;I<n.length;++I){var S;Up(s,(S=n[I]).o,S,S.f,S.u,S.c.length);var A=30+S.f.length+af(S.extra);s.set(S.c,S.o+A),Up(s,f,S,S.f,S.u,S.c.length,S.o,S.m),f+=16+A+(S.m?S.m.length:0)}return Xr(s,f,n.length,o,w),s}function x(V,j){if("function"!=typeof j)throw"no callback";for(var n=[],m=function(){for(var h=0;h<n.length;++h)n[h]()},f={},B=V.length-22;101010256!=yr(V,B);--B)if(!B||V.length-B>65558)return void j("invalid zip file",null);var Y=gm(V,B+8);Y||j(null,{});var J=Y,k=yr(V,B+16),I=4294967295==k;if(I){if(B=yr(V,B-12),101075792!=yr(V,B))return void j("invalid zip file",null);J=Y=yr(V,B+32),k=yr(V,B+48)}for(var w=function(){var q=ik(P,k,I),C=q[0],X=q[1],W=q[2],M=q[3],H=q[4],o=Ci(P,q[5]);k=H;var D=function(h,y){h?(m(),j(h,null)):(f[M]=y,--Y||j(null,f))};if(C)if(8==C){var U=P.subarray(o,o+X);if(32e4>X)try{D(null,y(U,new F(W)))}catch(P){D(P,null)}else n.push(g(U,{size:W},D))}else D("unknown compression type "+C,null);else D(null,_(P,o,o+X))},t=0;J>t;++t)w();return m}function o(M){for(var D={},Q=M.length-22;101010256!=yr(M,Q);--Q)if(!Q||M.length-Q>65558)throw"invalid zip file";var p=gm(M,Q+8);if(!p)return{};var q=yr(M,Q+16),V=4294967295==q;if(V){if(Q=yr(M,Q-12),101075792!=yr(M,Q))throw"invalid zip file";p=yr(M,Q+32),q=yr(M,Q+48)}for(var g=0;p>g;++g){var O=ik(M,q,V),j=O[0],t=O[1],U=O[2],f=O[3],I=O[4],W=Ci(M,O[5]);if(q=I,j){if(8!=j)throw"unknown compression type "+j;D[f]=y(M.subarray(W,W+t),new F(U))}else D[f]=_(M,W,W+t)}return D}var r={},A=("undefined"!=typeof module&&"object"==typeof exports?function(t){var J,D=";var __w=require('worker_threads');__w.parentPort.on('message',function(m){onmessage({data:m})}),postMessage=function(m,t){__w.parentPort.postMessage(m,t)},close=process.exit;self=global";try{J=require("worker_threads").Worker}catch(J){}return exports.default=J?function(d,r,U,n,j){var B=!1,I=new J(d+D,{eval:!0}).on("error",function(D){return j(D,null)}).on("message",function(b){return j(null,b)}).on("exit",function(X){X&&!B&&j(Error("exited with code "+X),null)});return I._wS(U,n),I.terminate=function(){return B=!0,J.prototype.terminate.call(I)},I}:function(P,t,v,J,q){setImmediate(function(){return q(Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});var C=function(){};return{terminate:C,_wS:C}},t}:function(e){var Z={},s=function(Y){return URL.createObjectURL(new Blob([Y],{type:"text/javascript"}))},O=function(y){return new Worker(y)};try{URL.revokeObjectURL(s(""))}catch(Z){s=function(k){return"data:application/javascript;charset=UTF-8,"+encodeURI(k)},O=function(U){return new Worker(U,{type:"module"})}}return e.default=function(S,C,r,f,I){var d=O(Z[C]||(Z[C]=s(S)));return d._yS=function(N){return I(N.error,null)},d._xS=function(E){return I(null,E.data)},d._wS(r,f),d},e})({}),F=Uint8Array,D=Uint16Array,s=Uint32Array,J=new F([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),E=new F([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u=new F([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),j=function(u,Y){for(var k=new D(31),m=0;31>m;++m)k[m]=Y+=1<<u[m-1];var B=new s(k[30]);for(m=1;30>m;++m)for(var W=k[m];W<k[m+1];++W)B[W]=W-k[m]<<5|m;return[k,B]},m=j(J,2),Z=m[0],N=m[1];Z[28]=258,N[258]=28;for(var U=j(E,0),K=U[0],Q=U[1],q=new D(32768),p=0;32768>p;++p){var w=(43690&p)>>>1|(21845&p)<<1;q[p]=((65280&(w=(61680&(w=(52428&w)>>>2|(13107&w)<<2))>>>4|(3855&w)<<4))>>>8|(255&w)<<8)>>>1}var P=function(M,E,J){for(var h=M.length,L=0,f=new D(E);h>L;++L)++f[M[L]-1];var U,O=new D(E);for(L=0;E>L;++L)O[L]=O[L-1]+f[L-1]<<1;if(J){U=new D(1<<E);var k=15-E;for(L=0;h>L;++L)if(M[L])for(var s=L<<4|M[L],i=E-M[L],Q=O[M[L]-1]++<<i,K=Q|(1<<i)-1;K>=Q;++Q)U[q[Q]>>>k]=s}else for(U=new D(h),L=0;h>L;++L)M[L]&&(U[L]=q[O[M[L]-1]++]>>>15-M[L]);return U},C=new F(288);for(p=0;144>p;++p)C[p]=8;for(p=144;256>p;++p)C[p]=9;for(p=256;280>p;++p)C[p]=7;for(p=280;288>p;++p)C[p]=8;var V=new F(32);for(p=0;32>p;++p)V[p]=5;var G=P(C,9,0),b=P(C,9,1),n=P(V,5,0),H=P(V,5,1),c=function(G){for(var x=G[0],h=1;h<G.length;++h)G[h]>x&&(x=G[h]);return x},v=function(H,A,s){var r=0|A/8;return(H[r]|H[r+1]<<8)>>(7&A)&s},a=function(J,S){var b=0|S/8;return(J[b]|J[b+1]<<8|J[b+2]<<16)>>(7&S)},O=function(e){return(0|e/8)+(7&e&&1)},_=function(E,b,n){(null==b||0>b)&&(b=0),(null==n||n>E.length)&&(n=E.length);var $=new(E instanceof D?D:E instanceof s?s:F)(n-b);return $.set(E.subarray(b,n)),$},W=function($,D,R){var M=$.length;if(!M||R&&!R.l&&5>M)return D||new F(0);var X=!D||R,q=!R||R.i;R||(R={}),D||(D=new F(3*M));var A=function(O){var m=D.length;if(O>m){var C=new F(Math.max(2*m,O));C.set(D),D=C}},o=R.f||0,g=R.p||0,T=R.b||0,s=R.l,x=R.d,Q=R.m,d=R.n,m=8*M;do{if(!s){R.f=o=v($,g,1);var B=v($,g+1,3);if(g+=3,!B){var V=$[(L=O(g)+4)-4]|$[L-3]<<8,C=L+V;if(C>M){if(q)throw"unexpected EOF";break}X&&A(T+V),D.set($.subarray(L,C),T),R.b=T+=V,R.p=g=8*C;continue}if(1==B)s=b,x=H,Q=9,d=5;else{if(2!=B)throw"invalid block type";var w=v($,g,31)+257,p=v($,g+10,15)+4,U=w+v($,g+5,31)+1;g+=14;for(var i=new F(U),f=new F(19),I=0;p>I;++I)f[u[I]]=v($,g+3*I,7);g+=3*p;var Y=c(f),z=(1<<Y)-1,j=P(f,Y,1);for(I=0;U>I;){var L,l=j[v($,g,z)];if(g+=15&l,(L=l>>>4)<16)i[I++]=L;else{var y=0,n=0;for(16==L?(n=3+v($,g,3),g+=2,y=i[I-1]):17==L?(n=3+v($,g,7),g+=3):18==L&&(n=11+v($,g,127),g+=7);n--;)i[I++]=y}}var W=i.subarray(0,w),G=i.subarray(w);Q=c(W),d=c(G),s=P(W,Q,1),x=P(G,d,1)}if(g>m){if(q)throw"unexpected EOF";break}}X&&A(T+131072);for(var r=(1<<Q)-1,k=(1<<d)-1,t=g;;t=g){var N=(y=s[a($,g)&r])>>>4;if((g+=15&y)>m){if(q)throw"unexpected EOF";break}if(!y)throw"invalid length/literal";if(256>N)D[T++]=N;else{if(256==N){t=g,s=null;break}var h=N-254;N>264&&(h=v($,g,(1<<(Xh=J[I=N-257]))-1)+Z[I],g+=Xh);var e=x[a($,g)&k],S=e>>>4;if(!e)throw"invalid distance";if(g+=15&e,G=K[S],S>3){var Xh=E[S];G+=a($,g)&(1<<Xh)-1,g+=Xh}if(g>m){if(q)throw"unexpected EOF";break}X&&A(T+131072);for(var Qj=T+h;Qj>T;T+=4)D[T]=D[T-G],D[T+1]=D[T+1-G],D[T+2]=D[T+2-G],D[T+3]=D[T+3-G];T=Qj}}R.l=s,R.p=t,R.b=T,s&&(o=1,R.m=Q,R.d=x,R.n=d)}while(!o);return T==D.length?D:_(D,0,T)},R=function(G,g,u){var V=0|g/8;G[V]|=u<<=7&g,G[V+1]|=u>>>8},jh=function(A,G,V){var y=0|G/8;A[y]|=V<<=7&G,A[y+1]|=V>>>8,A[y+2]|=V>>>16},ps=function(c,$){for(var k=[],a=0;a<c.length;++a)c[a]&&k.push({s:a,f:c[a]});var f=k.length,o=k.slice();if(!f)return[Ir,0];if(1==f){var _=new F(k[0].s+1);return _[k[0].s]=1,[_,1]}k.sort(function(G,c){return G.f-c.f}),k.push({s:-1,f:25001});var z=k[0],Y=k[1],V=0,t=1,m=2;for(k[0]={s:-1,f:z.f+Y.f,l:z,r:Y};t!=f-1;)z=k[k[V].f<k[m].f?V++:m++],Y=k[V!=t&&k[V].f<k[m].f?V++:m++],k[t++]={s:-1,f:z.f+Y.f,l:z,r:Y};var T=o[0].s;for(a=1;f>a;++a)o[a].s>T&&(T=o[a].s);var X=new D(T+1),e=el(k[t-1],X,0);if(e>$){a=0;var S=0,A=e-$,q=1<<A;for(o.sort(function(r,w){return X[w.s]-X[r.s]||r.f-w.f});f>a;++a){var W=o[a].s;if(!(X[W]>$))break;S+=q-(1<<e-X[W]),X[W]=$}for(S>>>=A;S>0;){var B=o[a].s;X[B]<$?S-=1<<$-X[B]++-1:++a}for(;a>=0&&S;--a){var d=o[a].s;X[d]==$&&(--X[d],++S)}e=$}return[new F(X),e]},el=function(e,x,L){return-1==e.s?Math.max(el(e.l,x,L+1),el(e.r,x,L+1)):x[e.s]=L},hr=function(j){for(var U=j.length;U&&!j[--U];);for(var G=new D(++U),m=0,s=j[0],N=1,I=function(r){G[m++]=r},X=1;U>=X;++X)if(j[X]==s&&X!=U)++N;else{if(!s&&N>2){for(;N>138;N-=138)I(32754);N>2&&(I(N>10?28690|N-11<<5:12305|N-3<<5),N=0)}else if(N>3){for(I(s),--N;N>6;N-=6)I(8304);N>2&&(I(8208|N-3<<5),N=0)}for(;N--;)I(s);N=1,s=j[X]}return[G.subarray(0,m),U]},Gq=function(B,Y){for(var M=0,X=0;X<Y.length;++X)M+=B[X]*Y[X];return M},zk=function(L,Z,T){var e=T.length,H=O(Z+2);L[H]=255&e,L[H+1]=e>>>8,L[H+2]=255^L[H],L[H+3]=255^L[H+1];for(var f=0;e>f;++f)L[H+f+4]=T[f];return 8*(H+4+e)},Ok=function(M,k,b,h,A,Y,I,B,H,p,K){R(k,K++,b),++A[256];for(var r=ps(A,15),_=r[0],N=r[1],U=ps(Y,15),v=U[0],f=U[1],y=hr(_),e=y[0],X=y[1],L=hr(v),Q=L[0],d=L[1],t=new D(19),w=0;w<e.length;++w)t[31&e[w]]++;for(w=0;w<Q.length;++w)t[31&Q[w]]++;for(var i=ps(t,7),O=i[0],g=i[1],l=19;l>4&&!O[u[l-1]];--l);var m,F,Z,q,S=p+5<<3,j=Gq(A,C)+Gq(Y,V)+I,z=Gq(A,_)+Gq(Y,v)+I+14+3*l+Gq(t,O)+(2*t[16]+3*t[17]+7*t[18]);if(j>=S&&z>=S)return zk(k,K,M.subarray(H,H+p));if(R(k,K,1+(j>z)),K+=2,j>z){m=P(_,N,0),F=_,Z=P(v,f,0),q=v;var x=P(O,g,0);for(R(k,K,X-257),R(k,K+5,d-1),R(k,K+10,l-4),K+=14,w=0;l>w;++w)R(k,K+3*w,O[u[w]]);K+=3*l;for(var $=[e,Q],s=0;2>s;++s){var a=$[s];for(w=0;w<a.length;++w)R(k,K,x[o=31&a[w]]),K+=O[o],o>15&&(R(k,K,127&a[w]>>>5),K+=a[w]>>>12)}}else m=G,F=C,Z=n,q=V;for(w=0;B>w;++w)if(h[w]>255){var o;jh(k,K,m[257+(o=31&h[w]>>>18)]),K+=F[o+257],o>7&&(R(k,K,31&h[w]>>>23),K+=J[o]);var W=31&h[w];jh(k,K,Z[W]),K+=q[W],W>3&&(jh(k,K,8191&h[w]>>>5),K+=E[W])}else jh(k,K,m[h[w]]),K+=F[h[w]];return jh(k,K,m[256]),K+F[256]},ne=new s([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ir=new F(0),Jo=function(b,M,$,l,v,r){var t=b.length,C=new F(l+t+5*(1+Math.ceil(t/7e3))+v),U=C.subarray(l,C.length-v),K=0;if(!M||8>t)for(var p=0;t>=p;p+=65535){var o=p+65535;t>o?K=zk(U,K,b.subarray(p,o)):(U[p]=r,K=zk(U,K,b.subarray(p,t)))}else{for(var j=ne[M-1],q=j>>>13,y=8191&j,G=(1<<$)-1,z=new D(32768),L=new D(G+1),w=Math.ceil($/3),Y=2*w,h=function(r){return(b[r]^b[r+1]<<w^b[r+2]<<Y)&G},e=new s(25e3),k=new D(288),S=new D(32),H=0,A=0,d=(p=0,0),c=0,P=0;t>p;++p){var W=h(p),m=32767&p,T=L[W];if(z[m]=T,L[W]=m,p>=c){var u=t-p;if((H>7e3||d>24576)&&u>423){K=Ok(b,U,0,e,k,S,A,d,P,p-P,K),d=H=A=0,P=p;for(var n=0;286>n;++n)k[n]=0;for(n=0;30>n;++n)S[n]=0}var B=2,I=0,R=y,x=32767&m-T;if(u>2&&W==h(p-x))for(var i=Math.min(q,u)-1,Z=Math.min(32767,p),a=Math.min(258,u);Z>=x&&--R&&m!=T;){if(b[p+B]==b[p+B-x]){for(var V=0;a>V&&b[p+V]==b[p+V-x];++V);if(V>B){if(B=V,I=x,V>i)break;var g=Math.min(x,V-2),f=0;for(n=0;g>n;++n){var X=32767&p-x+n+32768,Io=32767&X-z[X]+32768;Io>f&&(f=Io,T=X)}}}x+=32767&(m=T)-(T=z[m])+32768}if(I){e[d++]=268435456|N[B]<<18|Q[I];var Oq=31&N[B],xr=31&Q[I];A+=J[Oq]+E[xr],++k[257+Oq],++S[xr],c=p+B,++H}else e[d++]=b[p],++k[b[p]]}}K=Ok(b,U,r,e,k,S,A,d,P,p-P,K),!r&&7&K&&(K=zk(U,K+1,Ir))}return _(C,0,l+O(K)+v)},Ie=function(){for(var Z=new s(256),t=0;256>t;++t){for(var x=t,X=9;--X;)x=(1&x&&3988292384)^x>>>1;Z[t]=x}return Z}(),Db=function(){var W=-1;return{p:function(s){for(var L=W,R=0;R<s.length;++R)L=Ie[255&L^s[R]]^L>>>8;W=L},d:function(){return~W}}},Sf=function(){var I=1,y=0;return{p:function(x){for(var G=I,j=y,n=x.length,Q=0;Q!=n;){for(var h=Math.min(Q+2655,n);h>Q;++Q)j+=G+=x[Q];G=(65535&G)+15*(G>>16),j=(65535&j)+15*(j>>16)}I=G,y=j},d:function(){return(255&(I%=65521))<<24|I>>>8<<16|(255&(y%=65521))<<8|y>>>8}}},Kc=function(Y,$,u,V,D){return Jo(Y,null==$.level?6:$.level,null==$.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(Y.length)))):12+$.mem,u,V,!D)},ld=function(_,M){var p={};for(var l in _)p[l]=_[l];for(var l in M)p[l]=M[l];return p},El=function(V,s,$){for(var K=V(),L=""+V,Y=L.slice(L.indexOf("[")+1,L.lastIndexOf("]")).replace(/ /g,"").split(","),h=0;h<K.length;++h){var g=K[h],G=Y[h];if("function"==typeof g){s+=";"+G+"=";var I=""+g;if(g.prototype)if(-1!=I.indexOf("[native code]")){var w=I.indexOf(" ",8)+1;s+=I.slice(w,I.indexOf("(",w))}else for(var e in s+=I,g.prototype)s+=";"+G+".prototype."+e+"="+g.prototype[e];
else s+=I}else $[G]=g}return[s,$]},oo=[],Yr=function(Q){var h=[];for(var b in Q)(Q[b]instanceof F||Q[b]instanceof D||Q[b]instanceof s)&&h.push((Q[b]=new Q[b].varructor(Q[b])).buffer);return h},Yo=function(y,c,l,Q){var d;if(!oo[l]){for(var t="",J={},p=y.length-1,j=0;p>j;++j)t=(d=El(y[j],t,J))[0],J=d[1];oo[l]=El(y[p],t,J)}var f=ld({},oo[l][1]);return A.default(oo[l][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+c+"}",l,f,Yr(f),Q)},wd=function(){return[F,D,s,J,E,u,Z,K,b,H,q,P,c,v,a,O,_,W,y,sg,Np]},Il=function(){return[F,D,s,J,E,u,N,Q,G,C,n,V,q,ne,Ir,P,R,jh,ps,el,hr,Gq,zk,Ok,O,_,Jo,Kc,t,sg]},Ke=function(){return[oe,If,zf,Db,Ie]},en=function(){return[Fl,_d]},Rg=function(){return[$f,zf,Sf]},Mc=function(){return[Jb]},sg=function(g){return postMessage(g,[g.buffer])},Np=function(Z){return Z&&Z.size&&new F(Z.size)},jl=function(A,F,E,l,r,W){var G=Yo(E,l,r,function(N,B){G.terminate(),W(N,B)});return G._wS([A,F],F.consume?[A.buffer]:[]),function(){G.terminate()}},Bd=function(l){return l.ondata=function(W,b){return postMessage([W,b],[W.buffer])},function(p){return l.push(p.data[0],p.data[1])}},uc=function(r,g,R,C,t){var I,l=Yo(r,C,t,function(i,D){i?(l.terminate(),g.ondata.call(g,i)):(D[1]&&l.terminate(),g.ondata.call(g,i,D[0],D[1]))});l._wS(R),g.push=function(A,s){if(I)throw"stream finished";if(!g.ondata)throw"no stream handler";l._wS([A,I=s],[A.buffer])},g.terminate=function(){l.terminate()}},gm=function($,p){return $[p]|$[p+1]<<8},yr=function(e,p){return(e[p]|e[p+1]<<8|e[p+2]<<16|e[p+3]<<24)>>>0},Dg=function(n,d){return yr(n,d)+4294967296*yr(n,d+4)},zf=function(f,s,F){for(;F;++s)f[s]=F,F>>>=8},oe=function(L,d){var R=d.filename;if(L[0]=31,L[1]=139,L[2]=8,L[8]=d.level<2?4:9==d.level?2:0,L[9]=3,0!=d.mtime&&zf(L,4,Math.floor(new Date(d.mtime||Date.now())/1e3)),R){L[3]=8;for(var G=0;G<=R.length;++G)L[G+10]=R.charCodeAt(G)}},Fl=function(Y){if(31!=Y[0]||139!=Y[1]||8!=Y[2])throw"invalid gzip data";var h=Y[3],n=10;4&h&&(n+=Y[10]|2+(Y[11]<<8));for(var C=(1&h>>3)+(1&h>>4);C>0;C-=!Y[n++]);return n+(2&h)},_d=function(S){var Z=S.length;return(S[Z-4]|S[Z-3]<<8|S[Z-2]<<16|S[Z-1]<<24)>>>0},If=function(S){return 10+(S.filename&&S.filename.length+1||0)},$f=function(h,u){var K=u.level,H=0==K?0:6>K?1:9==K?3:2;h[0]=120,h[1]=H<<6|(H?32-2*H:1)},Jb=function(Y){if(8!=(15&Y[0])||Y[0]>>>4>7||(Y[0]<<8|Y[1])%31)throw"invalid zlib data";if(32&Y[1])throw"invalid zlib data: preset dictionaries not supported"},ym=function(){function N(u,G){G||"function"!=typeof u||(G=u,u={}),this.ondata=G,this.o=u||{}}return N.prototype.p=function(k,W){this.ondata(Kc(k,this.o,0,0,!W),W)},N.prototype.push=function(A,e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=e,this.p(A,e||!1)},N}();r.Deflate=ym;var rh=function(){return function(U,A){uc([Il,function(){return[Bd,ym]}],this,e.call(this,U,A),function(S){var u=new ym(S.data);onmessage=Bd(u)},6)}}();r.AsyncDeflate=rh,r.deflate=Y,r.deflateSync=t;var jo=function(){function U(Z){this.s={},this.p=new F(0),this.ondata=Z}return U.prototype.e=function(U){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var K=this.p.length,Q=new F(K+U.length);Q.set(this.p),Q.set(U,K),this.p=Q},U.prototype.c=function(p){this.d=this.s.i=p||!1;var n=this.s.b,Y=W(this.p,this.o,this.s);this.ondata(_(Y,n,this.s.b),this.d),this.o=_(Y,this.s.b-32768),this.s.b=this.o.length,this.p=_(this.p,0|this.s.p/8),this.s.p&=7},U.prototype.push=function(g,Z){this.e(g),this.c(Z)},U}();r.Inflate=jo;var Rd=function(){return function(_){this.ondata=_,uc([wd,function(){return[Bd,jo]}],this,0,function(){var A=new jo;onmessage=Bd(A)},7)}}();r.AsyncInflate=Rd,r.inflate=g,r.inflateSync=y;var Dc=function(){function t(K,V){this.c=Db(),this.l=0,this.v=1,ym.call(this,K,V)}return t.prototype.push=function(M,E){ym.prototype.push.call(this,M,E)},t.prototype.p=function(D,g){this.c.p(D),this.l+=D.length;var y=Kc(D,this.o,this.v&&If(this.o),g&&8,!g);this.v&&(oe(y,this.o),this.v=0),g&&(zf(y,y.length-8,this.c.d()),zf(y,y.length-4,this.l)),this.ondata(y,g)},t}();r.Gzip=Dc,r.Compress=Dc;var fi=function(){return function(c,k){uc([Il,Ke,function(){return[Bd,ym,Dc]}],this,e.call(this,c,k),function(Q){var F=new Dc(Q.data);onmessage=Bd(F)},8)}}();r.AsyncGzip=fi,r.AsyncCompress=fi,r.gzip=f,r.compress=f,r.gzipSync=i,r.compressSync=i;var ed=function(){function j(q){this.v=1,jo.call(this,q)}return j.prototype.push=function(K,h){if(jo.prototype.e.call(this,K),this.v){var X=this.p.length>3?Fl(this.p):4;if(X>=this.p.length&&!h)return;this.p=this.p.subarray(X),this.v=0}if(h){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}jo.prototype.c.call(this,h)},j}();r.Gunzip=ed;var ar=function(){return function(z){this.ondata=z,uc([wd,en,function(){return[Bd,jo,ed]}],this,0,function(){var O=new ed;onmessage=Bd(O)},9)}}();r.AsyncGunzip=ar,r.gunzip=M,r.gunzipSync=l;var jj=function(){function m(w,v){this.c=Sf(),this.v=1,ym.call(this,w,v)}return m.prototype.push=function(e,b){ym.prototype.push.call(this,e,b)},m.prototype.p=function(k,v){this.c.p(k);var P=Kc(k,this.o,this.v&&2,v&&4,!v);this.v&&($f(P,this.o),this.v=0),v&&zf(P,P.length-4,this.c.d()),this.ondata(P,v)},m}();r.Zlib=jj;var mf=function(){return function(T,u){uc([Il,Rg,function(){return[Bd,ym,jj]}],this,e.call(this,T,u),function(c){var X=new jj(c.data);onmessage=Bd(X)},10)}}();r.AsyncZlib=mf,r.zlib=L,r.zlibSync=X;var um=function(){function t(U){this.v=1,jo.call(this,U)}return t.prototype.push=function(m,D){if(jo.prototype.e.call(this,m),this.v){if(this.p.length<2&&!D)return;this.p=this.p.subarray(2),this.v=0}if(D){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}jo.prototype.c.call(this,D)},t}();r.Unzlib=um;var pd=function(){return function(p){this.ondata=p,uc([wd,Mc,function(){return[Bd,jo,um]}],this,0,function(){var q=new um;onmessage=Bd(q)},11)}}();r.AsyncUnzlib=pd,r.unzlib=B,r.unzlibSync=T;var Sb=function(){function n(v){this.G=ed,this.I=jo,this.Z=um,this.ondata=v}return n.prototype.push=function(R,O){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(R,O);else{if(this.p&&this.p.length){var B=new F(this.p.length+R.length);B.set(this.p),B.set(R,this.p.length)}else this.p=R;if(this.p.length>2){var c=this,G=function(){c.ondata.apply(c,arguments)};this.s=31==this.p[0]&&139==this.p[1]&&8==this.p[2]?new this.G(G):8!=(15&this.p[0])||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(G):new this.Z(G),this.s.push(this.p,O),this.p=null}}},n}();r.Decompress=Sb;var _o=function(){function T(p){this.G=ar,this.I=Rd,this.Z=pd,this.ondata=p}return T.prototype.push=function(K,P){Sb.prototype.push.call(this,K,P)},T}();r.AsyncDecompress=_o,r.decompress=h,r.decompressSync=S;var gk=function(_,v,o,R){for(var t in _){var r=_[t],k=v+t;r instanceof F?o[k]=[r,R]:Array.isArray(r)?o[k]=[r[0],ld(R,r[1])]:gk(r,k+"/",o,R)}},fl="undefined"!=typeof TextEncoder&&new TextEncoder,ss="undefined"!=typeof TextDecoder&&new TextDecoder,ok=0;try{ss.decode(Ir,{stream:!0}),ok=1}catch(A){}var He=function(I){for(var u="",N=0;;){var V=I[N++],O=(V>127)+(V>223)+(V>239);if(N+O>I.length)return[u,_(I,N-1)];O?3==O?(V=((15&V)<<18|(63&I[N++])<<12|(63&I[N++])<<6|63&I[N++])-65536,u+=String.fromCharCode(55296|V>>10,56320|1023&V)):u+=String.fromCharCode(1&O?(31&V)<<6|63&I[N++]:(15&V)<<12|(63&I[N++])<<6|63&I[N++]):u+=String.fromCharCode(V)}},zp=function(){function c(V){this.ondata=V,ok?this.t=new TextDecoder:this.p=Ir}return c.prototype.push=function(X,s){if(!this.ondata)throw"no callback";if(s=!!s,this.t){if(this.ondata(this.t.decode(X,{stream:!0}),s),s){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}}else{if(!this.p)throw"stream finished";var P=new F(this.p.length+X.length);P.set(this.p),P.set(X,this.p.length);var N=He(P),L=N[0],w=N[1];if(s){if(w.length)throw"invalid utf-8 data";this.p=null}else this.p=w;this.ondata(L,s)}},c}();r.DecodeUTF8=zp;var Uh=function(){function W(T){this.ondata=T}return W.prototype.push=function(p,T){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(z(p),this.d=T||!1)},W}();r.EncodeUTF8=Uh,r.strToU8=z,r.strFromU8=d;var Hd=function(R){return 1==R?3:6>R?2:9==R?1:0},Ci=function(g,J){return J+30+gm(g,J+26)+gm(g,J+28)},ik=function(V,z,U){var i=gm(V,z+28),m=d(V.subarray(z+46,z+46+i),!(2048&gm(V,z+8))),e=z+46+i,H=yr(V,z+20),y=U&&4294967295==H?xr(V,e):[H,yr(V,z+24),yr(V,z+42)],k=y[0],R=y[1],t=y[2];return[gm(V,z+10),k,R,m,e+gm(V,z+30)+gm(V,z+32),t]},xr=function(l,D){for(;1!=gm(l,D);D+=4+gm(l,D+2));return[Dg(l,D+12),Dg(l,D+4),Dg(l,D+20)]},af=function(D){var T=0;if(D)for(var y in D){var N=D[y].length;if(N>65535)throw"extra field too long";T+=N+4}return T},Up=function(N,F,G,x,c,r,W,M){var l=x.length,t=G.extra,m=M&&M.length,o=af(t);zf(N,F,null!=W?33639248:67324752),F+=4,null!=W&&(N[F++]=20,N[F++]=G.os),N[F]=20,F+=2,N[F++]=G.flag<<1|(null==r&&8),N[F++]=c&&8,N[F++]=255&G.compression,N[F++]=G.compression>>8;var z=new Date(null==G.mtime?Date.now():G.mtime),j=z.getFullYear()-1980;if(0>j||j>119)throw"date not in range 1980-2099";if(zf(N,F,j<<25|z.getMonth()+1<<21|z.getDate()<<16|z.getHours()<<11|z.getMinutes()<<5|z.getSeconds()>>>1),F+=4,null!=r&&(zf(N,F,G.crc),zf(N,F+4,r),zf(N,F+8,G.size)),zf(N,F+12,l),zf(N,F+14,o),F+=16,null!=W&&(zf(N,F,m),zf(N,F+6,G.attrs),zf(N,F+10,W),F+=14),N.set(x,F),F+=l,o)for(var V in t){var O=t[V],J=O.length;zf(N,F,+V),zf(N,F+2,J),N.set(O,F+4),F+=4+J}return m&&(N.set(M,F),F+=m),F},Xr=function(S,M,m,B,R){zf(S,M,101010256),zf(S,M+8,m),zf(S,M+10,m),zf(S,M+12,B),zf(S,M+16,R)},fm=function(){function l(o){this.filename=o,this.c=Db(),this.size=0,this.compression=0}return l.prototype.process=function(j,N){this.ondata(null,j,N)},l.prototype.push=function(N,V){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(N),this.size+=N.length,V&&(this.crc=this.c.d()),this.process(N,V||!1)},l}();r.ZipPassThrough=fm;var Mn=function(){function R(o,C){var R=this;C||(C={}),fm.call(this,o),this.d=new ym(C,function(f,l){R.ondata(null,f,l)}),this.compression=8,this.flag=Hd(C.level)}return R.prototype.process=function(I,W){try{this.d.push(I,W)}catch(I){this.ondata(I,null,W)}},R.prototype.push=function(L,w){fm.prototype.push.call(this,L,w)},R}();r.ZipDeflate=Mn;var jf=function(){function B(E,W){var w=this;W||(W={}),fm.call(this,E),this.d=new rh(W,function(d,O,P){w.ondata(d,O,P)}),this.compression=8,this.flag=Hd(W.level),this.terminate=this.d.terminate}return B.prototype.process=function(A,r){this.d.push(A,r)},B.prototype.push=function(_,B){fm.prototype.push.call(this,_,B)},B}();r.AsyncZipDeflate=jf;var Jg=function(){function s(c){this.ondata=c,this.u=[],this.d=1}return s.prototype.add=function(H){var D=this;if(2&this.d)throw"stream finished";var q=z(H.filename),i=q.length,N=H.comment,Y=N&&z(N),d=i!=H.filename.length||Y&&N.length!=Y.length,b=i+af(H.extra)+30;if(i>65535)throw"filename too long";var K=new F(b);Up(K,0,H,q,d);var L=[K],Z=function(){for(var W=0,N=L;W<N.length;W++)D.ondata(null,N[W],!1);L=[]},s=this.d;this.d=0;var f=this.u.length,S=ld(H,{f:q,u:d,o:Y,t:function(){H.terminate&&H.terminate()},r:function(){if(Z(),s){var E=D.u[f+1];E?E.r():D.d=1}s=1}}),j=0;H.ondata=function(t,G,$){if(t)D.ondata(t,G,$),D.terminate();else if(j+=G.length,L.push(G),$){var C=new F(16);zf(C,0,134695760),zf(C,4,H.crc),zf(C,8,j),zf(C,12,H.size),L.push(C),S.c=j,S.b=b+j+16,S.crc=H.crc,S.size=H.size,s&&S.r(),s=1}else s&&Z()},this.u.push(S)},s.prototype.end=function(){var e=this;if(2&this.d){if(1&this.d)throw"stream finishing";throw"stream finished"}this.d?this.e():this.u.push({r:function(){1&e.d&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},s.prototype.e=function(){for(var S=0,x=0,s=0,q=0,W=this.u;q<W.length;q++)s+=46+(P=W[q]).f.length+af(P.extra)+(P.o?P.o.length:0);for(var O=new F(s+22),T=0,V=this.u;T<V.length;T++){var P;Up(O,S,P=V[T],P.f,P.u,P.c,x,P.o),S+=46+P.f.length+af(P.extra)+(P.o?P.o.length:0),x+=P.b}Xr(O,S,this.u.length,s,x),this.ondata(null,O,!0),this.d=2},s.prototype.terminate=function(){for(var w=0,u=this.u;w<u.length;w++)u[w].t();this.d=2},s}();r.Zip=Jg,r.zip=k,r.zipSync=I;var Eh=function(){function x(){}return x.prototype.push=function(_,E){this.ondata(null,_,E)},x.compression=0,x}();r.UnzipPassThrough=Eh;var pq=function(){function c(){var O=this;this.i=new jo(function(n,L){O.ondata(null,n,L)})}return c.prototype.push=function(k,H){try{this.i.push(k,H)}catch(x){this.ondata(x,k,H)}},c.compression=8,c}();r.UnzipInflate=pq;var mq=function(){function n(w,E){var a=this;32e4>E?this.i=new jo(function(u,E){a.ondata(null,u,E)}):(this.i=new Rd(function(k,Q,J){a.ondata(k,Q,J)}),this.terminate=this.i.terminate)}return n.prototype.push=function(f,X){this.i.terminate&&(f=_(f,0)),this.i.push(f,X)},n.compression=8,n}();r.AsyncUnzipInflate=mq;var dl=function(){function h(N){this.onfile=N,this.k=[],this.o={0:Eh},this.p=Ir}return h.prototype.push=function(E,y){var L=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var H=Math.min(this.c,E.length),e=E.subarray(0,H);if(this.c-=H,this.d?this.d.push(e,!this.c):this.k[0].push(e),(E=E.subarray(H)).length)return this.push(E,y)}else{var T=0,q=0,B=void 0,l=void 0;this.p.length?E.length?((l=new F(this.p.length+E.length)).set(this.p),l.set(E,this.p.length)):l=this.p:l=E;for(var C=l.length,p=this.c,$=p&&this.d,X=function(){var I,h=yr(l,q);if(67324752==h){T=1,B=q,u.d=null,u.c=0;var M=gm(l,q+6),K=gm(l,q+8),F=2048&M,W=8&M,O=gm(l,q+26),J=gm(l,q+28);if(C>q+30+O+J){var e=[];u.k.unshift(e),T=2;var Q,Y=yr(l,q+18),P=yr(l,q+22),S=d(l.subarray(q+30,q+=30+O),!F);4294967295==Y?(I=W?[-2]:xr(l,q),Y=I[0],P=I[1]):W&&(Y=-1),q+=J,u.c=Y;var $={name:S,compression:K,start:function(){if(!$.ondata)throw"no callback";if(Y){var k=L.o[K];if(!k)throw"unknown compression type "+K;(Q=0>Y?new k(S):new k(S,Y,P)).ondata=function(L,Z,N){$.ondata(L,Z,N)};for(var o=0,u=e;o<u.length;o++)Q.push(u[o],!1);L.k[0]==e&&L.c?L.d=Q:Q.push(Ir,!0)}else $.ondata(null,Ir,!0)},terminate:function(){Q&&Q.terminate&&Q.terminate()}};Y>=0&&($.size=Y,$.originalSize=P),u.onfile($)}return"break"}if(p){if(134695760==h)return B=q+=12+(-2==p&&8),T=3,u.c=0,"break";if(33639248==h)return B=q-=4,T=3,u.c=0,"break"}},u=this;C-4>q&&"break"!==X();++q);if(this.p=Ir,0>p){var J=l.subarray(0,T?B-12-(-2==p&&8)-(134695760==yr(l,B-16)&&4):q);$?$.push(J,!!T):this.k[+(2==T)].push(J)}if(2&T)return this.push(l.subarray(q),y);this.p=l.subarray(q)}if(y){if(this.c)throw"invalid zip file";this.p=null}},h.prototype.register=function(J){this.o[J.compression]=J},h}();return r.Unzip=dl,r.unzip=x,r.unzipSync=o,r}),Id=function(n,_){this.textureLoader=n,this.manager=_};K(Id,$,{_zS:function(){qm=this._AS();var _=this._BS(),x=this._CS(_),h=this._DS(x),w=this._ES(),u=(new Fq)._zS(w);return this._FS(w,u,h),ag},_AS:function(){var k=new Map;if("Connections"in o){var s=o.Connections.connections;s.forEach(function(l){var L=l[0],$=l[1],f=l[2];k.has(L)||k.set(L,{parents:[],children:[]});var I={ID:$,relationship:f};k.get(L).parents.push(I),k.has($)||k.set($,{parents:[],children:[]});var J={ID:L,relationship:f};k.get($).children.push(J)})}return k},_BS:function(){var F={},g={};if("Video"in o.Objects){var n=o.Objects.Video;for(var w in n){var q=n[w],k=parseInt(w);if(F[k]=q.RelativeFilename||q.Filename,"Content"in q){var z=q.Content instanceof ArrayBuffer&&q.Content.byteLength>0,Y="string"==typeof q.Content&&""!==q.Content;if(z||Y){var l=this._lS(n[w]);g[q.RelativeFilename||q.Filename]=l}}}}for(var k in F){var M=F[k];F[k]=g[M]!==m?g[M]:F[k].split("\\").pop()}return F},_lS:function(K){var l,r=K.Content,i=K.RelativeFilename||K.Filename,C=i.slice(i.lastIndexOf(".")+1).toLowerCase();switch(C){case"bmp":l="image/bmp";break;case"jpg":case"jpeg":l="image/jpeg";break;case"png":l="image/png";break;case"tif":l="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",i),l="image/tga";break;default:return console.warn('FBXLoader: Image type "'+C+'" is not supported.'),void 0}if("string"==typeof r)return"data:"+l+";base64,"+r;var O=new Uint8Array(r);return V.URL.createObjectURL(new Blob([O],{type:l}))},_CS:function(w){var d=new Map;if("Texture"in o.Objects){var P=o.Objects.Texture;for(var h in P){var e=this.parseTexture(P[h],w);d.set(parseInt(h),e)}}return d},parseTexture:function(A,y){return},_GS:function(e,z){var T,H=this.textureLoader.path,l=qm.get(e.id).children;l!==m&&l.length>0&&z[l[0].ID]!==m&&(T=z[l[0].ID],(0===T.indexOf("blob:")||0===T.indexOf("data:"))&&this.textureLoader.setPath(m));var $,u=e.FileName.slice(-3).toLowerCase();if("tga"===u){var G=this.manager.getHandler(".tga");null===G?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),$=new yj):(G.setPath(this.textureLoader.path),$=G.load(T))}else"psd"===u?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),$=new yj):$=this.textureLoader.load(T);return this.textureLoader.setPath(H),$},_DS:function(Y){var R=new Map;if("Material"in o.Objects){var O=o.Objects.Material;for(var s in O){var r=this._kS(O[s],Y);null!==r&&R.set(parseInt(s),r)}}return R},_kS:function(W,X){var V=W.id,E=W.attrName,g=W.ShadingModel;if("object"==typeof g&&(g=g.value),!qm.has(V))return null;var A=this._gS(W,X,V),S=new kf;return S.setValues(A),S.name=E,S},_gS:function(k,u,z){var D={};k.BumpFactor&&(D.bumpScale=k.BumpFactor.value),k.Diffuse?D.diffuse=k.Diffuse.value:!k.DiffuseColor||"Color"!==k.DiffuseColor.type&&"ColorRGB"!==k.DiffuseColor.type||(D.diffuse=k.DiffuseColor.value),k.DisplacementFactor&&(D.displacementScale=k.DisplacementFactor.value),k.Emissive?D.emissive=k.Emissive.value:!k.EmissiveColor||"Color"!==k.EmissiveColor.type&&"ColorRGB"!==k.EmissiveColor.type||(D.emissive=k.EmissiveColor.value),k.EmissiveFactor&&(D.emissiveIntensity=parseFloat(k.EmissiveFactor.value)),k.Opacity&&(D.opacity=parseFloat(k.Opacity.value)),D.opacity<1&&(D.transparent=!0),k.ReflectionFactor&&(D.envMapIntensity=k.ReflectionFactor.value),k.Shininess&&(D.shininess=k.Shininess.value),k.Specular?D.specular=k.Specular.value:k.SpecularColor&&"Color"===k.SpecularColor.type&&(D.specular=k.SpecularColor.value);var n=this;return qm.get(z).children.forEach(function(t){var P=t.relationship;switch(P){case"Bump":D.bumpMap=n._HS(u,t.ID);break;case"Maya|TEX_ao_map":D.aoMap=n._HS(u,t.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":D.map=n._HS(u,t.ID),D.map!==m&&(D.map.encoding=sRGBEncoding);break;case"DisplacementColor":D.displacementMap=n._HS(u,t.ID);break;case"EmissiveColor":D.emissiveMap=n._HS(u,t.ID),D.emissiveMap!==m&&(D.emissiveMap.encoding=sRGBEncoding);break;case"NormalMap":case"Maya|TEX_normal_map":D.normalMap=n._HS(u,t.ID);break;case"ReflectionColor":D.envMap=n._HS(u,t.ID),D.envMap!==m&&(D.envMap.mapping=EquirectangularReflectionMapping,D.envMap.encoding=sRGBEncoding);break;case"SpecularColor":D.specularMap=n._HS(u,t.ID),D.specularMap!==m&&(D.specularMap.encoding=sRGBEncoding);break;case"TransparentColor":case"TransparencyFactor":D.alphaMap=n._HS(u,t.ID),D.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("%s map is not supported.",P)}}),D},_HS:function(U,u){return"LayeredTexture"in o.Objects&&u in o.Objects.LayeredTexture&&(console.warn("layered textures are not supported."),u=qm.get(u).children[0].ID),U.get(u)},_ES:function(){var R={},y={};if("Deformer"in o.Objects){var g=o.Objects.Deformer;for(var B in g){var D=g[B],F=qm.get(parseInt(B));if("Skin"===D.attrType){var K=this._mS(F,g);K.ID=B,F.parents.length>1&&console.warn("skeleton attached to more than one geometry is not supported."),K.geometryID=F.parents[0].ID,R[B]=K}else if("BlendShape"===D.attrType){var $={id:B};$.rawTargets=this._nS(F,g),$.id=B,F.parents.length>1&&console.warn("morph target attached to more than one geometry is not supported."),y[B]=$}}}return{skeletons:R,morphTargets:y}},_mS:function(i,N){var n=[];return i.children.forEach(function(W){var q=N[W.ID];if("Cluster"===q.attrType){var B={ID:W.ID,indices:[],weights:[],transformLink:(new u).fromArray(q.TransformLink.a)};"Indexes"in q&&(B.indices=q.Indexes.a,B.weights=q.Weights.a),n.push(B)}}),{rawBones:n,bones:[]}},_nS:function(U,d){for(var g=[],w=0;w<U.children.length;w++){var i=U.children[w],V=d[i.ID],T={name:V.attrName,initialWeight:V.DeformPercent,id:V.id,fullWeights:V.FullWeights.a};if("BlendShapeChannel"!==V.attrType)return;T.geoID=qm.get(parseInt(i.ID)).children.filter(function(P){return P.relationship===m})[0].ID,g.push(T)}return g},_FS:function(h,d,M){ag=new oh;var Q=this._oS(h.skeletons,d,M),q=o.Objects.Model,O=this;Q.forEach(function(z){var i=q[z.ID];O._IS(z,i);var D=qm.get(z.ID).parents;D.forEach(function(j){var D=Q.get(j.ID);D!==m&&D.add(z)}),null==z.getParent()&&ag.add(z)}),this._JS(h.skeletons,d,Q),this._LS(),ag.traverse(function(M){var r=M.userData.transformData;if(r){var X=M.getParent();X&&(r.parentMatrix=X.matrix,r.parentMatrixWorld=X.matrixWorld);var C=l(r);M.applyMatrix4(C)}}),ag.materialMap=M,ag.animations=(new cn)._zS()},_oS:function(P,h,m){var r=new Map,V=o.Objects.Model;for(var y in V){var g=parseInt(y),D=V[y],k=qm.get(g),S=this._pS(k,P,g,D.attrName);if(!S){switch(D.attrType){case"Mesh":S=this._sS(k,h,m);break;case"NurbsCurve":case"Camera":case"Light":case"LimbNode":case"Root":case"Null":default:S=new oh}S.name=D.attrName?b(D.attrName):"",D.uid||(D.uid=p.Math.generateIncreasingID()),S.uid=D.uid,S.ID=g}this._uS(S,D),r.set(g,S)}return r},_pS:function(f,S,e,E){var J=null;return f.parents.forEach(function(C){for(var g in S){var i=S[g];i.rawBones.forEach(function(x,u){x.ID===C.ID&&(J=new oh,J.isBone=!0,J.matrixWorld.copy(x.transformLink),J.name=E?b(E):"",J.ID=e,i.bones[u]=J)})}}),J},_rS:function(n){var D,d;if(n.children.forEach(function(W){var T=o.Objects.NodeAttribute[W.ID];T!==m&&(d=T)}),d===m)D=new Object3D;else{var I;I=d.LightType===m?0:d.LightType.value;var l=16777215;d.Color!==m&&(l=(new Color).fromArray(d.Color.value));var c=d.Intensity===m?1:d.Intensity.value/100;d.CastLightOnObject!==m&&0===d.CastLightOnObject.value&&(c=0);var v=0;d.FarAttenuationEnd!==m&&(v=d.EnableFarAttenuation!==m&&0===d.EnableFarAttenuation.value?0:d.FarAttenuationEnd.value);var G=1;switch(I){case 0:D=new PointLight(l,c,v,G);break;case 1:D=new DirectionalLight(l,c);break;case 2:var B=Math.PI/3;d.InnerAngle!==m&&(B=k(d.InnerAngle.value));var A=0;d.OuterAngle!==m&&(A=k(d.OuterAngle.value),A=Math.max(A,1)),D=new SpotLight(l,c,v,B,A,G);break;default:console.warn("Unknown light type "+d.LightType.value+", defaulting to a PointLight."),D=new PointLight(l,c)}d.CastShadows!==m&&1===d.CastShadows.value&&(D.castShadow=!0)}return D},_sS:function(F,b,a){var x,q=null,g=null,A=[];if(F.children.forEach(function(t){b.has(t.ID)&&(q=b.get(t.ID)),a.has(t.ID)&&A.push(a.get(t.ID))}),A.length>0)g=A[0];else{var k;(k=a.has(-1))||(k=new kf({name:"empty"}),a.set(-1,k)),g=k}return x=new og(q,g)},_tS:function(v,S){return},_uS:function(T,L){var W={};"InheritType"in L&&(W.inheritType=parseInt(L.InheritType.value)),W.eulerOrder="RotationOrder"in L?e(L.RotationOrder.value):"ZYX","Lcl_Translation"in L&&(W.translation=L.Lcl_Translation.value),"PreRotation"in L&&(W.preRotation=L.PreRotation.value),"Lcl_Rotation"in L&&(W.rotation=L.Lcl_Rotation.value),"PostRotation"in L&&(W.postRotation=L.PostRotation.value),"Lcl_Scaling"in L&&(W.scale=L.Lcl_Scaling.value),"ScalingOffset"in L&&(W.scalingOffset=L.ScalingOffset.value),"ScalingPivot"in L&&(W.scalingPivot=L.ScalingPivot.value),"RotationOffset"in L&&(W.rotationOffset=L.RotationOffset.value),"RotationPivot"in L&&(W.rotationPivot=L.RotationPivot.value),T.userData.transformData=W},_IS:function(C,v){if("LookAtProperty"in v){var $=qm.get(C.ID).children;$.forEach(function(b){if("LookAtProperty"===b.relationship){var L=o.Objects.Model[b.ID];if("Lcl_Translation"in L){var r=L.Lcl_Translation.value;C.target!==m?(C.target.position.fromArray(r),ag.add(C.target)):C.lookAt((new T).fromArray(r))}}})}},_JS:function(n,i,$){var G=this._KS();for(var I in n){var O=n[I],m=qm.get(parseInt(O.ID)).parents;m.forEach(function(P){if(i.has(P.ID)){var A=P.ID,k=qm.get(A);k.parents.forEach(function(k){if($.has(k.ID)){var m=$.get(k.ID);m.skeleton=[O.bones,w(O.bones),G[k.ID]]}})}})}},_KS:function(){var _={};if("Pose"in o.Objects){var P=o.Objects.Pose;for(var V in P)if("BindPose"===P[V].attrType){var b=P[V].PoseNode;Array.isArray(b)?b.forEach(function(g){_[g.Node]=(new u).fromArray(g.Matrix.a)}):_[b.Node]=(new u).fromArray(b.Matrix.a)}}return _},_LS:function(){if("GlobalSettings"in o&&"AmbientColor"in o.GlobalSettings){var m=o.GlobalSettings.AmbientColor.value,l=m[0],J=m[1],v=m[2];if(0!==l||0!==J||0!==v){var h=new Color(l,J,v);ag.add(new AmbientLight(h,1))}}}});var wg=function(){this.uuid=p.Math.generateUUID(),this.name="",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null},Jr=new p.Math.Matrix4;K(wg,$,{_3s:function(b){return this.index=Array.isArray(b)?new(arrayMax(b)>65535?N:R)(b,1):b,this},_4s:function(x,e){return this.attributes[x]=e,this},_5s:function(q){return delete this.attributes[q],this},_6s:function(f){return this.attributes[f]!==m},applyMatrix4:function(o){var s=this.attributes.position;s!==m&&(s.applyMatrix4(o),s.needsUpdate=!0);var r=this.attributes.normal;if(r!==m){var g=(new p.Math.Matrix3).getNormalMatrix(o);r.applyNormalMatrix(g),r.needsUpdate=!0}var W=this.attributes.tangent;return W!==m&&(W.transformDirection(o),W.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},applyQuaternion:function(U){return Jr.makeRotationFromQuaternion(U),this.applyMatrix4(Jr),this},_MS:function(p,B,S){this.groups.push({start:p,count:B,materialIndex:S||0})},setFromPoints:function(u){for(var j=[],w=0,d=u.length;d>w;w++){var X=u[w];j.push(X.x,X.y,X.z||0)}return this._4s("position",new M(j,3)),this}}),$.defineProperty(C.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});var fe=new T;$.assign(C.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(R){return this.usage=R,this},copy:function(w){return this.name=w.name,this.array=new w.array.constructor(w.array),this.itemSize=w.itemSize,this.count=w.count,this.normalized=w.normalized,this.usage=w.usage,this},_8s:function(o,x,G){o*=this.itemSize,G*=x.itemSize;for(var t=0,H=this.itemSize;H>t;t++)this.array[o+t]=x.array[G+t];return this},_9s:function(l){return this.array.set(l),this},copyColorsArray:function(i){for(var k=this.array,D=0,h=0,N=i.length;N>h;h++){var S=i[h];S===m?(k[D++]=1,k[D++]=1,k[D++]=1):(k[D++]=S.r,k[D++]=S.g,k[D++]=S.b)}return this},_7s:function(j){for(var H=this.array,M=0,F=0,L=j.length;L>F;F++){var n=j[F];n===m&&(n=new Vector2),H[M++]=n.x,H[M++]=n.y}return this},_as:function(S){for(var f=this.array,w=0,B=0,Y=S.length;Y>B;B++){var $=S[B];$===m&&($=new T),f[w++]=$.x,f[w++]=$.y,f[w++]=$.z}return this},_bs:function(c){for(var J=this.array,U=0,g=0,N=c.length;N>g;g++){var A=c[g];A===m&&(A=new L),J[U++]=A.x,J[U++]=A.y,J[U++]=A.z,J[U++]=A.w}return this},applyMatrix3:function(R){for(var B=0,Q=this.count;Q>B;B++)fe.x=this.getX(B),fe.y=this.getY(B),fe.z=this.getZ(B),fe.applyMatrix3(R),this.setXYZ(B,fe.x,fe.y,fe.z);return this},applyMatrix4:function(d){for(var k=0,x=this.count;x>k;k++)fe.x=this.getX(k),fe.y=this.getY(k),fe.z=this.getZ(k),fe.applyMatrix4(d),this.setXYZ(k,fe.x,fe.y,fe.z);return this},applyNormalMatrix:function(O){for(var t=0,f=this.count;f>t;t++)fe.x=this.getX(t),fe.y=this.getY(t),fe.z=this.getZ(t),fe.applyNormalMatrix(O),this.setXYZ(t,fe.x,fe.y,fe.z);return this},transformDirection:function(A){for(var R=0,H=this.count;H>R;R++)fe.x=this.getX(R),fe.y=this.getY(R),fe.z=this.getZ(R),fe.transformDirection(A),this.setXYZ(R,fe.x,fe.y,fe.z);return this},set:function($,H){return H===m&&(H=0),this.array.set($,H),this},getX:function(h){return this.array[h*this.itemSize]},setX:function(Q,T){return this.array[Q*this.itemSize]=T,this},getY:function(k){return this.array[k*this.itemSize+1]},setY:function(I,s){return this.array[I*this.itemSize+1]=s,this},getZ:function(w){return this.array[w*this.itemSize+2]},setZ:function(x,X){return this.array[x*this.itemSize+2]=X,this},getW:function(s){return this.array[s*this.itemSize+3]},setW:function(g,y){return this.array[g*this.itemSize+3]=y,this},setXY:function(i,q,W){return i*=this.itemSize,this.array[i+0]=q,this.array[i+1]=W,this},setXYZ:function(z,y,Y,Z){return z*=this.itemSize,this.array[z+0]=y,this.array[z+1]=Y,this.array[z+2]=Z,this},setXYZW:function(O,s,d,z,F){return O*=this.itemSize,this.array[O+0]=s,this.array[O+1]=d,this.array[O+2]=z,this.array[O+3]=F,this},onUpload:function($){return this.onUploadCallback=$,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Y.prototype=$.create(C.prototype),Y.prototype.constructor=Y,E.prototype=$.create(C.prototype),E.prototype.constructor=E,y.prototype=$.create(C.prototype),y.prototype.constructor=y,D.prototype=$.create(C.prototype),D.prototype.constructor=D,R.prototype=$.create(C.prototype),R.prototype.constructor=R,t.prototype=$.create(C.prototype),t.prototype.constructor=t,N.prototype=$.create(C.prototype),N.prototype.constructor=N,M.prototype=$.create(C.prototype),M.prototype.constructor=M,Q.prototype=$.create(C.prototype),Q.prototype.constructor=Q;var Fq=function(){};K(Fq,$,{_zS:function(s){var M=new Map;if("Geometry"in o.Objects){var F=o.Objects.Geometry;for(var A in F){var f=qm.get(parseInt(A)),e=this._2s(f,F[A],s);M.set(parseInt(A),e)}}return M},_2s:function(Q,v,T){switch(v.attrType){case"Mesh":return this._1s(Q,v,T);case"NurbsCurve":return this._PS(v)}},_1s:function(j,z,T){var k=T.skeletons,E=[],v=j.parents.map(function(X){return o.Objects.Model[X.ID]});if(0!==v.length){var f=j.children.reduce(function(H,z){return k[z.ID]!==m&&(H=k[z.ID]),H},null);j.children.forEach(function(e){T.morphTargets[e.ID]!==m&&E.push(T.morphTargets[e.ID])});var W=v[0],$={};"RotationOrder"in W&&($.eulerOrder=e(W.RotationOrder.value)),"InheritType"in W&&($.inheritType=parseInt(W.InheritType.value)),"GeometricTranslation"in W&&($.translation=W.GeometricTranslation.value),"GeometricRotation"in W&&($.rotation=W.GeometricRotation.value),"GeometricScaling"in W&&($.scale=W.GeometricScaling.value);var Y=l($);return this._ZS(z,f,E,Y)}},_ZS:function(t,G,v,H){var b=new wg;t.attrName&&(b.name=t.attrName);var V=this._YS(t,G),N=this._XS(V),j=new M(N.vertex,3);if(j.applyMatrix4(H),b._4s("position",j),N.colors.length>0&&b._4s("color",new M(N.colors,3)),G&&(b._4s("skinIndex",new R(N.weightsIndices,4)),b._4s("skinWeight",new M(N.vertexWeights,4)),b.FBX_Deformer=G),N.normal.length>0){var y=(new p.Math.Matrix3).getNormalMatrix(H),L=new M(N.normal,3);L.applyNormalMatrix(y),b._4s("normal",L)}if(N.uvs.forEach(function(y,v){var J="uv"+(v+1).toString();0===v&&(J="uv"),b._4s(J,new M(N.uvs[v],2))}),V.material&&"AllSame"!==V.material.mappingType){var i=N.materialIndex[0],z=0;if(N.materialIndex.forEach(function(P,S){P!==i&&(b._MS(z,S-z,i),i=P,z=S)}),b.groups.length>0){var I=b.groups[b.groups.length-1],q=I.start+I.count;q!==N.materialIndex.length&&b._MS(q,N.materialIndex.length-q,i)}0===b.groups.length&&b._MS(0,N.materialIndex.length,N.materialIndex[0])}return this._VS(b,t,v,H),b},_YS:function(l,B){var C={};if(C.vertexPositions=l.Vertices!==m?l.Vertices.a:[],C.vertexIndices=l.PolygonVertexIndex!==m?l.PolygonVertexIndex.a:[],l.LayerElementColor&&(C.color=this._RS(l.LayerElementColor[0])),l.LayerElementMaterial&&(C.material=this._QS(l.LayerElementMaterial[0])),l.LayerElementNormal&&(C.normal=this._TS(l.LayerElementNormal[0])),l.LayerElementUV){C.uv=[];for(var y=0;l.LayerElementUV[y];)l.LayerElementUV[y].UV&&C.uv.push(this._SS(l.LayerElementUV[y])),y++}return C.weightTable={},null!==B&&(C.skeleton=B,B.rawBones.forEach(function(X,F){X.indices.forEach(function(s,k){C.weightTable[s]===m&&(C.weightTable[s]=[]),C.weightTable[s].push({id:F,weight:X.weights[k]})
})})),C},_XS:function(Q){var D={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},R=0,y=0,T=!1,Y=[],d=[],c=[],g=[],F=[],I=[],M=this;return Q.vertexIndices.forEach(function(h,N){var f,q=!1;0>h&&(h=-1^h,q=!0);var p=[],_=[];if(Y.push(3*h,3*h+1,3*h+2),Q.color){var G=A(N,R,h,Q.color);c.push(G[0],G[1],G[2])}if(Q.skeleton){if(Q.weightTable[h]!==m&&Q.weightTable[h].forEach(function(X){_.push(X.weight),p.push(X.id)}),_.length>4){T||(console.warn("Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),T=!0);var B=[0,0,0,0],n=[0,0,0,0];_.forEach(function(X,f){var a=X,O=p[f];n.forEach(function(b,W,w){if(a>b){w[W]=a,a=b;var S=B[W];B[W]=O,O=S}})}),p=B,_=n}for(;_.length<4;)_.push(0),p.push(0);for(var S=0;4>S;++S)F.push(_[S]),I.push(p[S])}if(Q.normal){var G=A(N,R,h,Q.normal);d.push(G[0],G[1],G[2])}Q.material&&"AllSame"!==Q.material.mappingType&&(f=A(N,R,h,Q.material)[0]),Q.uv&&Q.uv.forEach(function(e,K){var E=A(N,R,h,e);g[K]===m&&(g[K]=[]),g[K].push(E[0]),g[K].push(E[1])}),y++,q&&(M._WS(D,Q,Y,f,d,c,g,F,I,y),R++,y=0,Y=[],d=[],c=[],g=[],F=[],I=[])}),D},_WS:function(t,H,$,u,G,q,y,O,v,I){for(var Z=2;I>Z;Z++)t.vertex.push(H.vertexPositions[$[0]]),t.vertex.push(H.vertexPositions[$[1]]),t.vertex.push(H.vertexPositions[$[2]]),t.vertex.push(H.vertexPositions[$[3*(Z-1)]]),t.vertex.push(H.vertexPositions[$[3*(Z-1)+1]]),t.vertex.push(H.vertexPositions[$[3*(Z-1)+2]]),t.vertex.push(H.vertexPositions[$[3*Z]]),t.vertex.push(H.vertexPositions[$[3*Z+1]]),t.vertex.push(H.vertexPositions[$[3*Z+2]]),H.skeleton&&(t.vertexWeights.push(O[0]),t.vertexWeights.push(O[1]),t.vertexWeights.push(O[2]),t.vertexWeights.push(O[3]),t.vertexWeights.push(O[4*(Z-1)]),t.vertexWeights.push(O[4*(Z-1)+1]),t.vertexWeights.push(O[4*(Z-1)+2]),t.vertexWeights.push(O[4*(Z-1)+3]),t.vertexWeights.push(O[4*Z]),t.vertexWeights.push(O[4*Z+1]),t.vertexWeights.push(O[4*Z+2]),t.vertexWeights.push(O[4*Z+3]),t.weightsIndices.push(v[0]),t.weightsIndices.push(v[1]),t.weightsIndices.push(v[2]),t.weightsIndices.push(v[3]),t.weightsIndices.push(v[4*(Z-1)]),t.weightsIndices.push(v[4*(Z-1)+1]),t.weightsIndices.push(v[4*(Z-1)+2]),t.weightsIndices.push(v[4*(Z-1)+3]),t.weightsIndices.push(v[4*Z]),t.weightsIndices.push(v[4*Z+1]),t.weightsIndices.push(v[4*Z+2]),t.weightsIndices.push(v[4*Z+3])),H.color&&(t.colors.push(q[0]),t.colors.push(q[1]),t.colors.push(q[2]),t.colors.push(q[3*(Z-1)]),t.colors.push(q[3*(Z-1)+1]),t.colors.push(q[3*(Z-1)+2]),t.colors.push(q[3*Z]),t.colors.push(q[3*Z+1]),t.colors.push(q[3*Z+2])),H.material&&"AllSame"!==H.material.mappingType&&(t.materialIndex.push(u),t.materialIndex.push(u),t.materialIndex.push(u)),H.normal&&(t.normal.push(G[0]),t.normal.push(G[1]),t.normal.push(G[2]),t.normal.push(G[3*(Z-1)]),t.normal.push(G[3*(Z-1)+1]),t.normal.push(G[3*(Z-1)+2]),t.normal.push(G[3*Z]),t.normal.push(G[3*Z+1]),t.normal.push(G[3*Z+2])),H.uv&&H.uv.forEach(function(A,d){t.uvs[d]===m&&(t.uvs[d]=[]),t.uvs[d].push(y[d][0]),t.uvs[d].push(y[d][1]),t.uvs[d].push(y[d][2*(Z-1)]),t.uvs[d].push(y[d][2*(Z-1)+1]),t.uvs[d].push(y[d][2*Z]),t.uvs[d].push(y[d][2*Z+1])})},_VS:function(j,J,p,x){if(0!==p.length){j.morphTargetsRelative=!0,j.morphAttributes.position=[];var S=this;p.forEach(function(T){T.rawTargets.forEach(function(p){var u=o.Objects.Geometry[p.geoID];u!==m&&S._US(j,J,u,x,p.name)})})}},_US:function(j,T,$,J,O){for(var a=T.PolygonVertexIndex!==m?T.PolygonVertexIndex.a:[],q=$.Vertices!==m?$.Vertices.a:[],H=$.Indexes!==m?$.Indexes.a:[],i=3*j.attributes.position.count,c=new Float32Array(i),K=0;K<H.length;K++){var I=3*H[K];c[I]=q[3*K],c[I+1]=q[3*K+1],c[I+2]=q[3*K+2]}var C={vertexIndices:a,vertexPositions:c},u=this._XS(C),P=new M(u.vertex,3);P.name=O||$.attrName,P.applyMatrix4(J),j.morphAttributes.position.push(P)},_TS:function(Z){var u=Z.MappingInformationType,m=Z.ReferenceInformationType,_=Z.Normals.a,A=[];return"IndexToDirect"===m&&("NormalIndex"in Z?A=Z.NormalIndex.a:"NormalsIndex"in Z&&(A=Z.NormalsIndex.a)),{dataSize:3,buffer:_,indices:A,mappingType:u,referenceType:m}},_SS:function(h){var p=h.MappingInformationType,T=h.ReferenceInformationType,m=h.UV.a,u=[];return"IndexToDirect"===T&&(u=h.UVIndex.a),{dataSize:2,buffer:m,indices:u,mappingType:p,referenceType:T}},_RS:function(e){var m=e.MappingInformationType,z=e.ReferenceInformationType,H=e.Colors.a,U=[];return"IndexToDirect"===z&&(U=e.ColorIndex.a),{dataSize:4,buffer:H,indices:U,mappingType:m,referenceType:z}},_QS:function(P){var r=P.MappingInformationType,J=P.ReferenceInformationType;if("NoMappingInformation"===r)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:J};for(var v=P.Materials.a,Q=[],j=0;j<v.length;++j)Q.push(j);return{dataSize:1,buffer:v,indices:Q,mappingType:r,referenceType:J}},_PS:function(N){if(ms===m)return console.error("The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new wg;var t=parseInt(N.Order);if(isNaN(t))return console.error("Invalid Order %s given for geometry ID: %s",N.Order,N.id),new wg;for(var q=t-1,v=N.KnotVector.a,j=[],u=N.Points.a,S=0,E=u.length;E>S;S+=4)j.push((new L).fromArray(u,S));var G,a;if("Closed"===N.Form)j.push(j[0]);else if("Periodic"===N.Form){G=q,a=v.length-1-G;for(var S=0;q>S;++S)j.push(j[S])}var f=new ms(q,v,j,G,a),K=f.getPoints(12*j.length);return(new wg).setFromPoints(K)}});var cn=function(){};K(cn,$,{_zS:function(){var C=[],u=this._qs();if(u!==m)for(var b in u){var I=u[b],h=this._js(I);C.push(h)}return C},_qs:function(){if(o.Objects.AnimationCurve===m)return m;var L=this._ns();this._ms(L);var _=this._ls(L),B=this._ks(_);return B},_ns:function(){var I=o.Objects.AnimationCurveNode,A=new Map;for(var $ in I){var h=I[$];if(null!==h.attrName.match(/S|R|T|DeformPercent/)){var v={id:h.id,attr:h.attrName,curves:{}};A.set(v.id,v)}}return A},_ms:function(t){var N=o.Objects.AnimationCurve;for(var V in N){var L={id:N[V].id,times:N[V].KeyTime.a.map(X),values:N[V].KeyValueFloat.a},E=qm.get(L.id);if(E!==m){var J=E.parents[0].ID,Z=E.parents[0].relationship;Z.match(/X/)?t.get(J).curves.x=L:Z.match(/Y/)?t.get(J).curves.y=L:Z.match(/Z/)?t.get(J).curves.z=L:Z.match(/d|DeformPercent/)&&t.has(J)&&(t.get(J).curves.morph=L)}}},_ls:function(H){var B=o.Objects.AnimationLayer,q=new Map;for(var w in B){var C=[],A=qm.get(parseInt(w));if(A!==m){var I=A.children;I.forEach(function(h,X){if(H.has(h.ID)){var R=H.get(h.ID);if(R.curves.x!==m||R.curves.y!==m||R.curves.z!==m){if(C[X]===m){var D=qm.get(h.ID).parents.filter(function(o){return o.relationship!==m})[0].ID;if(D!==m){var $=o.Objects.Model[D.toString()];if($===m)return console.warn("FBXLoader: unused curve.",h),void 0;var B={modelName:$.attrName?b($.attrName):"",ID:$.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};ag.traverse(function(r){r.ID===$.id&&(B.transform=r.matrix,r.userData.transformData&&(B.eulerOrder=r.userData.transformData.eulerOrder))}),B.transform||(B.transform=new u),"PreRotation"in $&&(B.preRotation=$.PreRotation.value),"PostRotation"in $&&(B.postRotation=$.PostRotation.value),C[X]=B}}C[X]&&(C[X][R.attr]=R)}else if(R.curves.morph!==m){if(C[X]===m){var d=qm.get(h.ID).parents.filter(function(X){return X.relationship!==m})[0].ID,_=qm.get(d).parents[0].ID,e=qm.get(_).parents[0].ID,D=qm.get(e).parents[0].ID,$=o.Objects.Model[D],B={modelName:$.attrName?PropertyBinding.sanitizeNodeName($.attrName):"",ID:$.id,morphName:o.Objects.Deformer[d].attrName};C[X]=B}C[X][R.attr]=R}}}),q.set(parseInt(w),C)}}return q},_ks:function(u){var v=o.Objects.AnimationStack,t={};for(var S in v){var l=qm.get(parseInt(S)).children,E=u.get(l[0].ID);t[S]={name:v[S].attrName,layer:E}}return t},_js:function(f){var w=[],C=this;f.layer.forEach(function(W){w=w.concat(C._ps(W))});var L=0;return w.forEach(function(d){L=Math.max(L,d.times[d.times.length-1])}),{name:f.name,duration:L,tracks:w}},_ps:function(k){var p=[],O=new T,N=new g,w=new T;if(k.transform&&k.transform.decompose(O,N,w),O=O.toArray(),N=(new h).setFromQuaternion(N,k.eulerOrder).toArray(),w=w.toArray(),k.T!==m&&$.keys(k.T.curves).length>0){var o=this._hs(k.ID,k.T.curves,O,"position");o!==m&&p.push(o)}if(k.R!==m&&$.keys(k.R.curves).length>0){var i=this._gs(k.ID,k.R.curves,N,k.preRotation,k.postRotation,k.eulerOrder);i!==m&&p.push(i)}if(k.S!==m&&$.keys(k.S.curves).length>0){var n=this._hs(k.ID,k.S.curves,w,"scale");n!==m&&p.push(n)}if(k.DeformPercent!==m){var f=this._fs(k);f!==m&&p.push(f)}return p},_hs:function(u,w,C,g){var L=this._es(w),Q=this._ds(L,w,C);return{type:"vector",name:u+"."+g,times:L,values:Q}},_gs:function(W,v,L,e,x,X){v.x!==m&&(this._cs(v.x),v.x.values=v.x.values.map(k)),v.y!==m&&(this._cs(v.y),v.y.values=v.y.values.map(k)),v.z!==m&&(this._cs(v.z),v.z.values=v.z.values.map(k));var q=this._es(v),$=this._ds(q,v,L);e!==m&&(e=e.map(k),e.push(X),e=(new h).fromArray(e),e=(new g).setFromEuler(e)),x!==m&&(x=x.map(k),x.push(X),x=(new h).fromArray(x),x=(new g).setFromEuler(x).invert());for(var C=new g,j=new h,p=[],s=0;s<$.length;s+=3)j.set($[s],$[s+1],$[s+2],X),C.setFromEuler(j),e!==m&&C.premultiply(e),x!==m&&C.multiply(x),C.toArray(p,4*(s/3));return{type:"quaternion",name:W+".quaternion",times:q,values:p}},_fs:function(e){var y=e.DeformPercent.curves.morph,Z=y.values.map(function(l){return l/100}),C=ag.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return{type:"number",name:e.ID+".morphTargetInfluences["+C+"]",times:y.times,values:Z}},_es:function(b){var y=[];if(b.x!==m&&(y=y.concat(b.x.times)),b.y!==m&&(y=y.concat(b.y.times)),b.z!==m&&(y=y.concat(b.z.times)),y=y.sort(function(I,t){return I-t}),y.length>1){for(var I=1,C=y[0],P=1;P<y.length;P++){var v=y[P];v!==C&&(y[I]=v,C=v,I++)}y=y.slice(0,I)}return y},_ds:function(E,V,K){var g=K,k=[],l=-1,Q=-1,H=-1;return E.forEach(function(i){if(V.x&&(l=V.x.times.indexOf(i)),V.y&&(Q=V.y.times.indexOf(i)),V.z&&(H=V.z.times.indexOf(i)),-1!==l){var j=V.x.values[l];k.push(j),g[0]=j}else k.push(g[0]);if(-1!==Q){var Z=V.y.values[Q];k.push(Z),g[1]=Z}else k.push(g[1]);if(-1!==H){var w=V.z.values[H];k.push(w),g[2]=w}else k.push(g[2])}),k},_cs:function(x){for(var a=1;a<x.values.length;a++){var X=x.values[a-1],v=x.values[a]-X,T=Math.abs(v);if(T>=180){for(var Z=T/180,j=v/Z,c=X+j,w=x.times[a-1],P=x.times[a]-w,y=P/Z,M=w+y,V=[],S=[];M<x.times[a];)V.push(M),M+=y,S.push(c),c+=j;x.times=H(x.times,a,V),x.values=H(x.values,a,S)}}}});var ms=function(S,u,s,y,V){this.degree=S,this.knots=u,this._vs=[],this.startKnot=y||0,this.endKnot=V||this.knots.length-1;for(var D=0;D<s.length;++D){var G=s[D];this._vs[D]=new L(G.x,G.y,G.z,G.w)}this.getPoint=function(E,k){k=k||new T;var S=k,D=this.knots[this.startKnot]+E*(this.knots[this.endKnot]-this.knots[this.startKnot]),B=x(this.degree,this.knots,this._vs,D);return 1!==B.w&&B.divideScalar(B.w),S.set(B.x,B.y,B.z)},this.getPoints=function(c){c=c||5;for(var X=[],U=0;c>=U;U++)X.push(this.getPoint(U/c));return X}}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);