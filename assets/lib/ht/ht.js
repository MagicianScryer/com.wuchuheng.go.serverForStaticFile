!function(f,b,H){"use strict";function c(){ml.apply(this,arguments)}function n(){ml.apply(this,arguments)}function Y(){ml.apply(this,arguments)}function P(){ml.apply(this,arguments),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:"ZeroCurvature",endingEnd:"ZeroCurvature"}}function d(U,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function");U.prototype=b.create(m&&m.prototype,{constructor:{value:U,writable:!0,configurable:!0}}),m&&Qg(U,m)}function q(t){var R=b.prototype.toString.call(t);return"Array]"===R.substring(R.length-6)}function Z(I,u,T,d,Q,G){u=u||[],T=T||[],d=d||[];try{u.push(I);var U=Function.apply(0,u);return T[T.length]="return "+U,Function.apply(0,T).apply(0,d)}catch(x){return G&&G(x),Q}}function K(C){var n={};return{get:function(E){if(n[E]!==H)return n[E];var r;switch(E){case"WEBGL_depth_texture":r=C.getExtension("WEBGL_depth_texture")||C.getExtension("MOZ_WEBGL_depth_texture")||C.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=C.getExtension("EXT_texture_filter_anisotropic")||C.getExtension("MOZ_EXT_texture_filter_anisotropic")||C.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=C.getExtension("WEBGL_compressed_texture_s3tc")||C.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||C.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=C.getExtension("WEBGL_compressed_texture_pvrtc")||C.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":r=C.getExtension("WEBGL_compressed_texture_etc1");break;default:r=C.getExtension(E)}return n[E]=r,r}}}function N(Z,F,q){function O(){if(M!==H)return M;var x=F.get("EXT_texture_filter_anisotropic");return M=null!==x?Z.getParameter(x.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function m(u){if("highp"===u){if(Z.getShaderPrecisionFormat(35633,36338).precision>0&&Z.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";u="mediump"}return"mediump"===u&&Z.getShaderPrecisionFormat(35633,36337).precision>0&&Z.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var M;q=q||{};var p="undefined"!=typeof WebGL2RenderingContext&&Z instanceof WebGL2RenderingContext,X=q.precision!==H?q.precision:"highp",Q=m(X);Q!==X&&(console.warn("WebGL:",X,"not supported, using",Q,"instead."),X=Q);var b,T=q.logarithmicDepthBuffer===!0,$=Z.getParameter(34930),G=Z.getParameter(35660),k=Z.getParameter(3379),x=Z.getParameter(34076),A=Z.getParameter(34921),C=Z.getParameter(36347),K=Z.getParameter(36348),B=Z.getParameter(36349),V=G>0,h=p||!!F.get("OES_texture_float"),s=(p||!!F.get("OES_element_index_uint"))&&"undefined"!=typeof Uint32Array,L=V&&h,N=p?Z.getParameter(36183):0,R=!1;return p?R=!0:(b=F.get("ANGLE_instanced_arrays"))&&(R=!0,Z.vertexAttribDivisor=function(l,F){return b.vertexAttribDivisorANGLE(l,F)},Z.drawElementsInstanced=function(M,k,w,G,U){return b.drawElementsInstancedANGLE(M,k,w,G,U)},Z.drawArraysInstanced=function(o,R,J,h){return b.drawArraysInstancedANGLE(o,R,J,h)}),p?F.get("EXT_color_buffer_float"):(F.get("WEBGL_depth_texture"),F.get("OES_texture_half_float"),F.get("OES_texture_half_float_linear"),F.get("OES_standard_derivatives"),F.get("OES_vertex_array_object")),F.get("OES_texture_float_linear"),F.get("EXT_color_buffer_half_float"),F.get("WEBGL_multisampled_render_to_texture"),{getMaxAnisotropy:O,getMaxPrecision:m,precision:X,precisionstring:"precision "+X+" float;\nprecision "+X+" int;\n",logarithmicDepthBuffer:T,maxTextures:$,maxVertexTextures:G,maxTextureSize:k,maxCubemapSize:x,maxAttributes:A,maxVertexUniforms:C,maxVaryings:K,maxFragmentUniforms:B,vertexTextures:V,floatFragmentTextures:h,elementTypeUint:s,floatVertexTextures:L,maxSamples:N,instancedArray:R}}function k(S,s){return S.z!==s.z?s.z-S.z:S.id-s.id}var s="ht";if(!f[s]){!function(){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),f.performance&&f.performance.now||function(){var P=Date.now();f.performance||(f.performance={}),f.performance.now=function(){return Date.now()-P}}();for(var k=Date.now(),T=16,U=["ms","moz","webkit","o"],c=0;c<U.length&&!f.requestAnimationFrame;++c)f.requestAnimationFrame=f[U[c]+"RequestAnimationFrame"],f.cancelAnimationFrame=f[U[c]+"CancelAnimationFrame"]||f[U[c]+"CancelRequestAnimationFrame"];f.requestAnimationFrame||(f.requestAnimationFrame=function(h){var D=Date.now(),u=T+k-D;return 0>u&&(u=0),k=D,f.setTimeout(function(){k=Date.now(),h(performance.now())},u)}),f.cancelAnimationFrame||(f.cancelAnimationFrame=function(Q){return f.clearTimeout(Q)}),b.assign===H&&(b.assign=function(U){if(U===H||null===U)throw new TypeError("Cannot convert undefined or null to object");for(var N=b(U),p=1;p<arguments.length;p++){var z=arguments[p];if(z!==H&&null!==z)for(var g in z)b.prototype.hasOwnProperty.call(z,g)&&(N[g]=z[g])}return N}),f.btoa===H&&(f.btoa=function(Q){for(var K,a,H=String(Q),h=0,Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",T="";H.charAt(0|h)||(Y="=",h%1);T+=Y.charAt(63&K>>8-8*(h%1))){if(a=H.charCodeAt(h+=.75),a>255)throw new Error("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");K=K<<8|a}return T})}();var F,z,u,E,S=f.location,I=S&&f.document,C=null,G=H,L=f[s]={},m=f[s+"config"],T=L.Default=m&&m.Default||{},i=L.Style=m&&m.Style||{},l=L.Attr=m&&m.Attr||{},M=function(){return!0},y=function(){return!1},V=function(O){return O},w=function(K){return!K},W=L.Color=m&&m.Color||{},B=L.IsGetter=m&&m.IsGetter||{};!function(){var J=!1;try{var k=b.defineProperty({},"passive",{get:function(){return J=!0,H}});S&&(u=F=S)&&f.addEventListener("test",k,k),S&&(E=z=S)&&f.removeEventListener("test",k,k)}catch(B){J=!1}T.passiveSupported=J}();var U,x,e,D,j=T.passiveSupported,v=T.eventListenerOptionsFalse=j?{passive:!1,capture:!1}:!1,R=T.eventListenerOptionsTrue=j?{passive:!1,capture:!0}:!0,g=function(n,T,J,H){n.addEventListener(T,J,H?R:v)},J=function(h,c,E,s){h.removeEventListener(c,E,s?R:v)},o=Math,p=o.round,$=o.floor,O=o.ceil,Q=o.sqrt,h=o.max,r=o.min,A=o.abs,t=o.cos,X=o.acos,_=o.sin,a=o.pow,Jk=o.asin,md=o.exp,kl=o.PI,ok=2*kl,Qo=kl/2,Ui=o.tan,Nn=o.atan2,co=o.random,rg=o.log,Rr=function(U,F,L){return Math.max(F,Math.min(L,U))},jj=a(2,1),rm=!1,Ym=f.parseInt||global.parseInt,$k="2022-12-30",Vi=S&&(f.navigator?f.navigator.platform.indexOf("Win")>-1:!1),rf=function(G){return G*G},Yi=S&&f.setTimeout,Oi=S&&f.clearTimeout,Xg=S&&(f.navigator?f.navigator.userAgent.toLowerCase():""),Yh=function(m){return m.test(Xg)},zc=Yh(/msie/),bq=Yh(/msie/)||Yh(/trident/),im=Yh(/msie 10/),vg=Yh(/edge/),Xk=Yh(/firefox/),Ml=Yh(/mac/),kj=Yh(/mscAndroid/),Cd=T.isTouchable===H?Vi?!1:I?"ontouchend"in I:!1:T.isTouchable,mf="default",Ip="single",oq="multiple",Rl="front",cm="back",Ob="left",zb="right",pc="top",rq="bottom",Vk="center",Gp="eye",_c="middle",Ze="east",xm="west",Mq="north",zd="none",we="px",bg="absolute",Np="border",kn="triangle",xb="rect",Ke="circle",nm="cylinder",am="shape",mc="items",gn="normal",vc="remove",Hi="clear",kp="width",pb="height",uf="ingroup",Ed="check",Ve="uncheck",af="radio",kk="radioOn",Pg="radioOff",Qr="points",fd="values",fn="series",rh="body",Fb="label",Io="label2",Hp="note",Fd="note2",Dd="icons",fc="labelFont",Km="labelColor",eg="labelSelectColor",sm="note.expanded",Gk="note2.expanded",Pe="edge.expanded",Kn="edge.points",xo="edge.type",Wg="rotation",Gb="hidden",Dq="visible",_r="tuv",lg="no",od="draw",ed="select",an="currentSubGraph",df="selectBackground",tp="autoMakeVisible",dr="autoHideScrollBar",vl="scrollBarColor",di="scrollBarSize",qp="indent",Pc="rowHeight",rs="columnLineColor",ip="rowLineColor",Qk="columnLineVisible",fg="rowLineVisible",mh="visibleFunc",fs="expandIcon",dd="collapseIcon",mg="checkMode",ds="sortFunc",Gh="editable",Yj="batchEditable",Lf="tristate",qf="asc",Vm="desc",Ao="position",Ci="__",_j="elevation",Qe="children",hr="translateX",nj="translateY",Ir="dataModel",tc="maxSize",bb="enc",Eq="state",Dj=bb+"o"+"de",qb="shape3d",il="shape3d.resolution",id="shape3d.visible",Kr="shape3d.from.visible",yb="shape3d.to.visible",sn="shape3d.top.visible",Bk="shape3d.bottom.visible",ye="repeat.uv.length",Un="serializeValue",Xc="deserializeValue",lj="centerUniform",Bd="uniform",bn="rgba(255,255,255,0)",up="style",jn="attr",Lq="field",Wb="string",ae="boolean",Pp="color",sh="int",pn="number",Yo="ew-resize",Me="ns-resize",Xq="pointer",Yl="auto",Mn="mousedown",Ye="mousemove",ej="mouseup",gr="mouseout",ls="touchstart",kg="touchmove",go="touchend",oe="keydown",yo="keyup",og=["DOMMouseScroll","mousewheel"],th=Xk?og[0]:og[1],oi=Ci+s+Ci+Dj,Ti=[ls,kg,go],Ej=[Mn,Ye,ej,gr,th,"wheel","mouseenter","mouseleave","mouseover"],Hq=[oe,yo,"keypress","input","contextmenu","compositionstart","compositionupdate","compositionend"],rl=Cd?Ti.concat(Hq):Ej.concat(Hq),Xr=C,zq=C,Ki=C,ym=C,Ud=!1,wh=ej.length,Af=function(){Ki&&(Oi(Ki.timeout),Ki=C)},qj=function(){Ki&&Bs(Ki.e,Ki.info)};f.addEventListener&&(G=S)&&(Cd||(g(f,gr,function(){Af()}),g(f,th,function(){Oj()})),g(f,yo,function(K){91===K.keyCode?Zo={}:delete Zo[K.keyCode]},!0),g(f,oe,function(u){Zo[u.keyCode]=!0},!0),g(f,"blur",function(){Zo={}}));var Am,kq,pe,dg=0,No=C,Jf=function(b,Z){var o=Yi(function(){delete No[o],ss(No)&&(No=C),b()},Z);return o},Se=C,js=C,vm={},$b={},$e={},Hn={},gj={},pf={},Zo={},Lo={},Rd={},xk={},Ri={},bl=/.json$/,nb=/\.(json|bin|fbx|gltf|glb)$/,Ni=/^data:image\/svg\+xml/,fp={},$c=[],gc={},Dn=C,Im=C,zj=function(){},ns=function(){throw"Oops!"},ts=[0,0,0],Sr={x:0,y:0,width:0,height:0},uj=C,kh=C,ac=C,Oh=function(D,V){$b[D]=V,V&&V.comps&&!V.uuid&&(V.uuid=L.Math.generateUUID()),Ld[D]&&(V.cacheRule=Ld[D],delete Ld[D])},cc=function(M){kh&&!M._72O&&(ac||(ac={}),ac[M._72O=Eb()]=M),Am!=C?lk()<.05&&D&&!kq&&(fb=Af):fb=nn},Lj=function(j,i,B,Y){kh||(kh={});var F=kh[j];if(F){if(F.url===i)return;F.image?(F.image.onload=zj,F.image.onerror=zj):F.request&&(F.request.onload=zj,F.request.onerror=zj)}if(bl.test(i)){var v=new qg;if(kh[j]={request:v,url:i},i=T.beforeLoadURL(i,j),i.data){var Q=T.parse(i.data);Sq(j,Q),T.handleImageLoaded(j,Q)}else{v.onload=function(){if(200===this.status||0===this.status){var x=T.parse(v.getResponseText());Sq(j,x),T.handleImageLoaded(j,x)}else Sq(j,T.handleUnfoundImage(j,i)||C)},v.onerror=function(){Sq(j,T.handleUnfoundImage(j,i)||C)};var q={};q.url=encodeURI(i),q.sync=!1,v.send(q)}}else{var Q=new Image;kh[j]={image:Q,url:i},/^data:image/.test(i)||(i=T.beforeLoadURL(i,j),i=T.appendTimeStamp(i),i=encodeURI(i),Q.crossOrigin=T.crossOrigin),T.convertImageSrc(i,function(z){bq&&(i.toLowerCase().indexOf(".svg")>0||Ni.test(i))?(I.body.appendChild(Q),Q.style.visibility="hidden",Q.onload=function(){Yi(function(){if(B&&(Q.width=B),Y&&(Q.height=Y),!Q.width||!Q.height){var r=Q.width||Q.clientWidth,z=Q.height||Q.clientHeight;Q.width=r,Q.height=z}T.handleImageLoaded(j,Q),Sq(j,Q),I.body.removeChild(Q),Q.style.visibility=""},180)},Q.onerror=function(){Sq(j,T.handleUnfoundImage(j,i)||C),I.body.removeChild(Q),Q.style.visibility=""}):(Q.onload=function(){B&&(Q.width=B),Y&&(Q.height=Y),T.handleImageLoaded(j,Q),Sq(j,Q)},Q.onerror=function(){Sq(j,T.handleUnfoundImage(j,i)||C)}),Q.src=z})}},Sq=function(s,l){if(Oh(s,l),delete kh[s],ss(kh)&&(kh=C,ac)){for(var u in ac){var X=ac[u];X._2O&&X._2O[s]&&(X.deleteTexture(s),delete X._2O[s]),X.invalidateAll&&X.invalidateAll(H,"imageLoaded",s),X.redraw&&X.redraw(),X.iv(),X instanceof Fn&&X.dm().each(function(V){V instanceof cj&&V.updateLayoutAttaches()}),delete X._72O}ac=C}if(l&&ac)for(var u in ac){var X=ac[u];X.invalidateAll&&X.invalidateAll(H,"imageLoading",s),X.redraw&&X.redraw(),X.iv(),X instanceof Fn&&X.dm().each(function(e){e instanceof cj&&e.updateLayoutAttaches()})}},cl=function(){return rg=o&&Date,function(){return f.performance&&f.performance.now?f.performance.now():Date.now()}}(),Jo=function(Y,Q,A){return{width:Y,height:Q,comps:Tl(A)?A:[A]}},Fo=function(h,N){return{type:Ke,rect:[h,N,1.6,1.6],borderWidth:1,borderColor:ol,gradient:Rn,gradientColor:jp,background:ol}},Wi=function(H,i){return Jo(16,16,{type:kn,rect:[4,4,10,8],background:H,rotation:i?1.57:3.14})},bo=function(q,w){return Jo(16,16,{type:kn,rect:[4,4,8,7],background:q,rotation:w?3.14:0})},Xj=function(K){var T=K._orientation;return"horizontal"===T||"h"===T},Lp=function(e,p){var S=C||4,O=C||1,l=C||1;0>S?S=0:S>.25&&(S=.25);var H,m,V,A,s,r,d,w=.5,j=[],M=[],G=[],u=ok/l,y=ok/O,c=w-S;for(m=0;O>=m;m++)for(A=-kl+m*y,r=t(A),s=_(A),H=0;l>=H;H++)V=H*u,d=c+S*r,j.push(t(V)*d,s*S,-_(V)*d),(x=[e,p])&&M.push(H/l,1-m/O);for(m=0;O>m;m++){var D=m*(l+1),N=(m+1)*(l+1);for(H=0;l>H;H++)G.push(D+H,N+H+1,N+H,D+H,D+H+1,N+H+1),Le.z=rb.z=[e,p]}},gg=function(k){var r=2,K=0;for(var e in k)e.length===r&&Ym(e,32)===Gn&&(Dn=Im=k[e]),K++;return K},Zd=function(h,S,g,b){return g||(g=Cd?5:3,g/=b||1),{x:h-g,y:S-g,width:2*g,height:2*g}},Sh=function(q,P,O,U){var z=this;P||(P=Cd?5:3,O=20,U=20);var B={x:q,y:P,width:O,height:U};if(O)for(var C=0;O>C;C++)if(3===O)U=20;else for(var h=0;U>h;h++)z=f?f:O;var F={x:kl,y:2*kl};if(Ad(B,F)){var t=pb[0]+pc[0]+Hi[1]+qf.length,g=Gb[0]+Lf[0]+Hi[1]+rh.length;Nk[Gp]=[z[t],z[g]],z[t]=Ro[Gp],z[g]=Ro[qb]}},Dm=function(T){return(/ble$/.test(T)||/ed$/.test(T)||B[T]?"is":"get")+T.charAt(0).toUpperCase()+T.slice(1)},Ro=function(T){return"set"+T.charAt(0).toUpperCase()+T.slice(1)},jm=function(B){return typeof B===Wb||B instanceof String},ah=function(U){return typeof U===pn},nn=function(y){return typeof y===ae},oc=function(i){return i&&"object"==typeof i},mq=function(k){return"function"==typeof k},Tl=function(h){return h instanceof Array},Ur=function(q){return q instanceof Dg},gd=function(J){return Tl(J)?new Dg(J):J},Tk=function(j){return j instanceof cj},Cg=function(T){return T instanceof Wr},eo=function(C){return C instanceof yf},dj=function(u,s){if(!(u instanceof L.Group))return!1;if(!s)return u.isExpanded();var l=s.getDataUI(u);return l&&l._88I?!0:!1},$j=function(y){return y instanceof _i},Nj=function(o){return o&&"IFRAME"===o.tagName},or=function(Y){return Y==C||T.numberDigits==C?Y:parseFloat(Y.toFixed(T.numberDigits))},Uh=function(u,M,i){var o,X=M.length;if(i)for(var G=0;i>G;G++)if(3===X)u.push(M[0]),u.push(M[1]),u.push(M[2]);else for(o=0;X>o;o++)u.push(M[o]);else if(3===X)u.push(M[0]),u.push(M[1]),u.push(M[2]);else for(o=0;X>o;o++)u.push(M[o])},cf=function(N){return N?oc(N)?N:{}:!1},yd=function(N,K,v){var s,F=oc(N)?N:N.prototype;for(s in K)v&&s in F?F[s]===H&&console.warn("class",F,"has own undefined property",s,", keep exist!"):F[s]=K[s];return N},Ll=function(w,n){if(!("wheelDelta"in n)){var l=n.deltaMode;n.wheelDelta=l===n.DOM_DELTA_PIXEL?-n.deltaY:l===n.DOM_DELTA_LINE?40*-n.deltaY:120*-n.deltaY}w.handle_mousewheel(n)},np=function($){return String.fromCharCode($)},kb=function(n,N){for(var E,o,b=0,g="",i="",w=n.length;w>b;b++)E=n[N?b:w-1-b],"%"===E?E="'":"a"===E?E='"':"]"===E&&(E="\\"),o=np(E.charCodeAt(0)-1),N?b%2?i+=o:g=o+g:g+=o;return N?i+g:g},Ei=function(d,Y,p){d.superClass.constructor.apply(Y,p)},ss=function(B){for(var S in B)return!1;return!0},Wf=function(P){return P?0===P.length:!0},tl=function(){var H="";return[Ve[0],ip[0],Fb[0]].forEach(function(O){H+=Ro(O).slice(3)}),Bd=I&&I[H]||lj,function(f,R){return f===R?!0:f.x===R.x&&f.y===R.y&&f.width===R.width&&f.height===R.height}}(),Xl=function(G,b,e){return b>G?b:G>e?e:G},bd=function(m){return 0>m?-1:m>0?1:0},lk=function(){var y=1e4*_(wh++);return y-$(y)},zg=function(c,X,y){return Wl(c.x,c.y,X.x,X.y,y.x,y.y,y.x+y.width,y.y,!0)||Wl(c.x,c.y,X.x,X.y,y.x+y.width,y.y,y.x+y.width,y.y+y.height,!0)||Wl(c.x,c.y,X.x,X.y,y.x+y.width,y.y+y.height,y.x,y.y+y.height,!0)||Wl(c.x,c.y,X.x,X.y,y.x,y.y+y.height,y.x,y.y,!0)},Wl=function(c,K,E,Z,Y,w,u,M,$){var J=(u-Y)*(K-w)-(M-w)*(c-Y),n=(M-w)*(E-c)-(u-Y)*(Z-K);if(0!==n){var V=J/n,B=c+V*(E-c),m=K+V*(Z-K);return $&&(B+no<r(c,E)||B-no>h(c,E)||B+no<r(Y,u)||B-no>h(Y,u)||m+no<r(K,Z)||m-no>h(K,Z)||m+no<r(w,M)||m-no>h(w,M))?C:[B,m]}return C},Eg=function(z,J,a){if(z&&a){var G=function(h,s,u){if(s){if(s===up)return h.getStyle(u);if(s===jn)return h.getAttr(u);if(s===Lq)return h[u]}else if(u=Dm(u),h[u])return h[u]()};if("string"==typeof a&&"{"===a[0]&&"}"===a[a.length-1]){a=a.substr(1),a=a.substr(0,a.length-1);var x=a.split("."),$=G(z,J,x[0]);if($!=C)for(var s=1,N=x.length;N>s;s++)if($=$[x[s]],$==C)return $;return $}return G(z,J,a)}return H},Pf=function(F,T,i,W){if(F&&i)if(T){if(T===up)F.s(i,W);else if(T===jn)F.a(i,W);else if(T===Lq){var s=F[i];F[i]=W,F.fp("f:"+i,s,W)}}else i=Ro(i),F[i]&&F[i](W)},jh=function(s,o,t){var E=100*Math.max(s.width,s.height);return o&&"top"!==o?"bottom"===o?{x:s.x-E,y:s.y-E,width:s.width+2*E,height:s.height*t+E}:"right"===o?{x:s.x-E,y:s.y-E,width:s.width*t+E,height:s.height+2*E}:"left"===o?{x:s.x+s.width*(1-t),y:s.y-E,width:s.width*t+E,height:s.height+2*E}:void 0:{x:s.x-E,y:s.y+s.height*(1-t),width:s.width+2*E,height:s.height*t+E}},xl=function(c,N,w,p,f){N&&ri(c,w,p,1,f,N)},Vl=function(b,H,d,$){var M=1-b;return M*M*H+2*b*M*d+b*b*$},Le=function(K,W,R,F,I){var d=1-K;return d*d*d*W+3*d*d*K*R+3*d*K*K*F+K*K*K*I},Mc=function(P){var n,D,y,G,l=0;return P.forEach(function(m){if(n=m.length,n>0)for(D=m[0],G=1;n>G;G++)y=m[G],l+=mp(D,y),D=y}),l},Vp=function(C,v,H){var j="__"+C,n=function(z){("mousedown"===C||"mouseup"===C||"touchstart"===C||"touchend"===C)&&jb(z),H.disabled||H["handle_"+C](z)};H[j]||(H[j]=n,g(v,C,n))},Il=function(c,X,H){var K="__"+c,x=H[K];x&&(J(X,c,x),delete H[K])},Wc=function(f,i){var y="_"+i;f[Dm(i)]=function(){return this[y]},f[Ro(i)]=function(z){var Z=this[y];this[y]=z,this.fp(i,Z,z)}},zo=function(Q){return b.create(Q)},wd=function(u){if(!u.element){var F,z;(F=u.textField)?z=yl(Kt.TextField,F):(F=u.textArea)?z=yl(Kt.TextArea,F):(F=u.button)?z=yl(Kt.Button,F):(F=u.comboBox)?z=yl(Kt.ComboBox,F):(F=u.checkBox)?z=yl(Kt.CheckBox,F):(F=u.radioButton)?z=yl(Kt.RadioButton,F):(F=u.slider)?z=yl(Kt.Slider,F):(F=u.colorPicker)?z=yl(Kt.ColorPicker,F):(F=u.image)&&(z=yl(Kt.Image,F)),z&&(u.element=z)}},eh=function(O,J){var G=vh(O);return G._ht=J,G},Hl=f.top===f?f.top:f||f.document,vh=function(v,b){var i=I.createElement("div"),N=i.style;return i.tabIndex=-1,i.onkeydown=Ne,N.msTouchAction=zd,Pi(i,C,0),Cd&&N.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",C),v&&(N.overflow=Gb),b&&Nh(b,i),i},uc=function(p,J){var Z=I.createElement("canvas"),o=Z.style;return o.msTouchAction=zd,J||(o.pointerEvents=zd),Pi(Z,C,0),p&&Nh(p,Z),Z},Pi=function(k,P,N){var $=k.style;$.border=P?P+" solid 1px":0,$.outline=0,$.padding=N?"0 "+N+we:0,zm(k)},zm=function(g){var X=g.style;X.position=bg,X.margin=0,X.setProperty("box-sizing","border-box",C),X.setProperty("-moz-box-sizing","border-box",C)},Eh=function(S,m,r,v){v||(v=un),m!=C&&(S.width=m*v,S.style.width=m+we),r!=C&&(S.height=r*v,S.style.height=r+we)},Nh=function(S,X,u){S.appendChild(X),u&&(X.style.position=bg)},Xi=function(Q,C){C.split||(C+="");for(var b,O=C.split("\n"),M=0,H=O.length,J=0;H>J;J++){var S=Pr(Q.font,O[J]);S.width>M&&(M=S.width),b||(b=S.height)}return Q.ss=O,{width:M,height:b*H}},ao=function(){var d=I?uc().getContext("2d"):C;return function(x,A,f,H,n,k){var T=x.split("\n"),F=[],l=Pr(f,x).height;return H||(H=0),d.font=f,d.textBaseline=pc,T.forEach(function(x){for(var G=0,q=1,b=0,S=x.length;S>=q;q++){var t=x.substring(G,q),C=n?d.measureText(x[q]):Pr(f,t);n&&(b+=C.fontBoundingBoxDescent||l);var O=n?b+(t.length-1)*k:C.width+(t.length-1)*H;O>A&&(q-1===G?(F.push(x.substring(G,q)),G=q):(F.push(x.substring(G,q-1)),G=q-1,q--),b=0)}G!==q-1&&F.push(x.substring(G,q))}),F}}(),Pm=function(z,p,u,E,J,w,k,A){z.font=u;var e=z.measureText(p);if(z.beginPath(),z.strokeStyle=E,z.lineWidth=1,"underline"===A){var Y;Y=e.actualBoundingBoxDescent?e.actualBoundingBoxDescent+1:Pr(u,p).size/2,z.moveTo(J-k/2,w+Y),z.lineTo(J+k/2,w+Y)}else if("strikethrough"===A)z.moveTo(J-k/2,w),z.lineTo(J+k/2,w);else if("overline"===A){var Y;Y=e.fontBoundingBoxAscent?e.fontBoundingBoxAscent:Pr(u,p).size/2,z.moveTo(J-k/2,w-Y),z.lineTo(J+k/2,w-Y)}z.stroke()},ys=function(F,P,r,b,L,e,D,Z,O,m,d){var s=L.x,f=L.y,n=L.width,U=L.height;if(P!=C){var h=Pr(r,P),E={};O&&(h.width+=(P.length-1)*O),E.y=D&&D!==_c?D===pc?f+h.height/2:f+U-h.height/2:f+U/2,E.x=e&&e!==Ob?e===zb?s+n-h.width/2:s+n/2:s+h.width/2,Zp(F,P,E,r,b,O,m,d),Z&&Pm(F,P,r,b,E.x,E.y,h.width,Z)}},qk=function(B,l,v,W,M,D,R,r,m,b){var N=l.length;if(1===N){var j=l[0];if(Zp(B,j,v,W,M,r,m,b),R){var U=Pr(W,j);Pm(B,j,W,M,v.x+v.width/2,v.y+v.height/2,U.width,R)}}else for(var u=v.height/N,Q={x:v.x,y:v.y,width:v.width,height:u},g=0;g<l.length;g++){if(D)ys(B,l[g],W,M,Q,D,null,R,r,m,b);else if(Zp(B,l[g],Q,W,M,r,m,b),R){var U=Pr(W,l[g]);Pm(B,l[g],W,M,Q.x+Q.width/2,Q.y+Q.height/2,U.width,R)}Q.y+=u}},Zp=function(P,K,I,d,A,z,V,y){P.font=d?d:Tq,P.fillStyle=A?A:Jd,P.textAlign=Vk,P.textBaseline=_c;var J,R;I?I.width===H?(J=I.x,R=I.y):(J=I.x+I.width/2,R=I.y+I.height/2):(J=0,R=0);var T=V&&y;if(T&&(P.strokeStyle=y,P.lineWidth=V),z){var g=Pr(d,K);J-=(g.width+z*(K.length-1))/2;for(var B=(K+"").length,i=0;B>i;i++){var G=K[i],D=P.measureText(G);T&&P.strokeText(G,p(J+(D.width+4)/2),p(R)),P.fillText(G,p(J+(D.width+4)/2),p(R)),J+=D.width+z}}else T&&P.strokeText(K,p(J),p(R)),P.fillText(K,p(J),p(R))},ur=function(t){t.getView&&(t=t.getView());var z=t.offsetWidth||t.scrollWidth;return!z&&t.style.width&&(z=Ym(t.style.width)),z},wf=function(D){D.getView&&(D=D.getView());var r=D.offsetHeight||D.scrollHeight;return!r&&D.style.height&&(r=Ym(D.style.height)),r},Lm=function(a,s,H){var t=s[0].toUpperCase()+s.substring(1,s.length);a["webkit"+t]=H,a["moz"+t]=H,a["ms"+t]=H,a["o"+t]=H,a[s]=H},rk=function(){var F=function(D){Ne(D),D.stopPropagation()},l=function(S){Ne(S)},W=[ls,oe,Mn];return function(V,Z){var p=vh(),A=p.style;return A.backgroundColor=T.disabledBackground,V&&(A.backgroundImage="url("+V+")",A.backgroundPosition="50% 50%",A.backgroundRepeat="no-repeat no-repeat"),Z===!1?W.forEach(function(U){g(p,U,l)}):W.forEach(function(D){g(p,D,F)}),p}}(),yh=function(y){var s=y.getContext("2d");return s.save(),s.lineCap=Hj,s.lineJoin=sg,s},fb=function(n,m,s,X){qo(n,m*un,s*un),X*=un,1!==X&&n.scale(X,X)},qo=function(v,O,t){v.translate(O,t)},Tp=function(P,_){_&&P.rotate(_)},ze=function(D,v,M){v===H&&(v=1),M===H&&(M=1),(1!==v||1!==M)&&D.scale(v,M)},yi=!1,md=Hl[Ed[1]+hr[0]],tn=function(i){var C=I.activeElement;if(I.activeElement!==i){C&&C.forceOnblur&&C.forceOnblur();for(var l=[],q=i.parentNode;q;)l.push([q,q.scrollLeft,q.scrollTop]),q=q.parentNode;if(!yi){var e=[],k=[];try{for(var Q=f.parent,x=f;Q!==x;)e.push([Q,Q.scrollX,Q.scrollY]),x=Q,Q=f.parent;var T=f.frameElement;if(T)for(var s=T.parentNode;s;)k.push([s,s.scrollLeft,s.scrollTop]),s=s.parentNode}catch(L){yi=!0}}if(Cd)i.focus();else{var N=fk(),d=N.target;i.focus(),d.scrollLeft=N.left,d.scrollTop=N.top}l.forEach(function(N){N[0].scrollLeft=N[1],N[0].scrollTop=N[2]}),yi||(e.forEach(function(b){b[0].scrollTo(b[1],b[2])}),k.forEach(function(q){q[0].scrollLeft=q[1],q[0].scrollTop=q[2]}))}},Cr=function(t){return t&&t.getView?t.getView():t},mb=function(U,r,t,l,S){if(2===arguments.length&&(t=r.y,l=r.width,S=r.height,r=r.x),U.isSelfViewEvent)U.setX(r),U.setY(t),U.setWidth(l),U.setHeight(S);else{var d=Cr(U),f=d.style;if((I.fullscreenElement||I.mozFullScreenElement||I.webkitFullscreenElement||I.msFullscreenElement)!==d)r!==H&&(f.left=r+we),t!==H&&(f.top=t+we),l!==H&&(f.width=l+we),S!==H&&(f.height=S+we);else{var u=T.getWindowInfo();f.left=(r=u.left)+we,f.top=(t=u.top)+we,f.width=(l=u.width)+we,f.height=(S=u.height)+we}U.endEditing&&!Cd&&U.endEditing(),U.redraw&&U.redraw(),U.invalidate&&U.invalidate(),U.onLayouted&&U.onLayouted(r,t,l,S),U.fireViewEvent&&U.fireViewEvent("layout")}},On=function(X){if(!X.touches)return X;var C=X.touches[0];return C?C:X.changedTouches[0]},Jj=function(W){return To(W)?On(W).target:W.target},To=function(j){return j&&"object"==typeof j&&"touches"in j},Kq=function(j){T.popup&&T.popup.close(),T.popup=j},wk=C,xf=function(E){wk.handleWindowTouchMove(E)},jl=function(q){wk.handleWindowTouchEnd(q),J(f,kg,xf),J(f,go,jl),J(f,"blur",jl),wk=C},Gd=function(U){wk.handleWindowMouseMove(U)},gb=function(U){wk.handleWindowMouseUp(U),J(f,Ye,Gd),J(f,ej,gb),J(f,"blur",gb),wk=C},Qm=function(E){return 1===cg(E)},Jg=function(D,A){return A?A.keyCode===D:Zo[D]},jd=function(w){return cq(w)&&Jg(65,w)},$i=function(Y){return Jg(46,Y)||Jg(8,Y)},Cj=function(k){return function(g){return g?g.keyCode===k:Zo[k]}},Gn=573,Bi=[65,83,68,87,37,38,39,40,32,13,27],Kd=Cj(Bi[0]),Vd=Cj(Bi[1]),dc=Cj(Bi[2]),vs=Cj(Bi[3]),Qi=Cj(Bi[4]),Al=Cj(Bi[5]),nk=Cj(Bi[6]),xh=Cj(Bi[7]),rj=Cj(Bi[8]),br=Cj(Bi[9]),ic=Cj(Bi[10]),pp={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},ap=[2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,5,5,5,5,5,1613],_f=C,ld=C,Df=function(O,d){_f||(_f=uc()),Eh(_f,O,d,1);var V=yh(_f);return V.clearRect(0,0,O,d),V},Uo=function(B,j,q){if(j&&B){if("override"===q)return j;if("override_rgb"===q){var k=dh(j);return B=Nm(B),"rgba("+p(255*k[0])+","+p(255*k[1])+","+p(255*k[2])+","+B[3]/255+")"}if("override_a"===q){var k=dh(j);return B=Nm(B),"rgba("+B[0]+","+B[1]+","+B[2]+","+k[3]+")"}if("multiply_destinationAtop"===q){var l=dh(B),S=l[3],r=dh(j),J=r[3];if(0!==S&&0!==J){var y=l,G=y[3],D=l.map(function(L,Z){return L*r[Z]}),R=1-S,u=1-J,N=u*S+J;l=l.map(function(V,t){return(J*R*r[t]+J*S*D[t]+u*S*V)/N}),S=N,R=1-S,l=l.map(function(X,M){return y[M]*R+X*S}),S=G}return"rgba("+p(255*l[0])+","+p(255*l[1])+","+p(255*l[2])+","+S+")"}var k=dh(j);return B=Nm(B),"rgba("+p(B[0]*k[0])+","+p(B[1]*k[1])+","+p(B[2]*k[2])+","+B[3]/255*k[3]+")"}return B},Nm=function(){var x,U={};for(var P in f){var A=oq.length;if(P.length==A&&P[0]===oq[2]&&P[1]===zd[1]&&P[4]===oq[3]&&P[5]===oq[4]&&P.substr(A-2)===zd[1]+zd[2]){var E=f[P];for(var m in E)m.length===A&&m.substr(0,3)===zb[3]+vc[3]+ed[0]&&m.substr(A-2)===oq[0]+Hp[3]&&(og=E[m])}}return function(p){var k,L=U[p];return L||(x||(x=uc(),Eh(x,1,1,1)),k=x.getContext("2d"),k.clearRect(0,0,1,1),ri(k,0,0,1,1,p),L=k.getImageData(0,0,1,1).data,L=U[p]=[L[0],L[1],L[2],L[3]]),L}}(),dh=function(m){if(!jm(m))return m;var P=Nm(m);return P.CA||(P.CA=[P[0]/255,P[1]/255,P[2]/255,P[3]/255]),P.CA},fl=function(s,D,Y,R,Z){var _=uc();_.width=Y,_.height=R;var m=_.getContext("2d");m.drawImage(s,0,0,Y,R);try{for(var S=m.getImageData(0,0,Y,R),B=S.data,K=0,F=B.length;F>K;K+=4){var O=B[K+0],o=B[K+1],h=B[K+2],P=B[K+3];"override_a"===Z?B[K+3]=255*D[3]:"override_rgb"===Z?(B[K+0]=255*D[0],B[K+1]=255*D[1],B[K+2]=255*D[2]):"override"===Z?(B[K+0]=255*D[0],B[K+1]=255*D[1],B[K+2]=255*D[2],B[K+3]=255*D[3]):(B[K+0]=D[0]*O,B[K+1]=D[1]*o,B[K+2]=D[2]*h,B[K+3]=D[3]*P)}m.putImageData(S,0,0)}catch(x){return s}return _},Nk=function(p,W,G){return W&&(W="miter"===G?8*W+20:W+1,p&&Sb(p,W)),W},Kb=function(b,R){if(R){var r=new Ub(R),N=b.width/2,B=b.height/2,i=Jm([r.tf(-N,-B),r.tf(N,-B),r.tf(N,B),r.tf(-N,B)]);return i.x+=b.x+N,i.y+=b.y+B,i}return b},Fq=function(t,i,p,O,u,y,o,T){O*=Math.PI/180;var m={x:Math.cos(O)*(t.x-o.x)/2+Math.sin(O)*(t.y-o.y)/2,y:-Math.sin(O)*(t.x-o.x)/2+Math.cos(O)*(t.y-o.y)/2},n=Math.pow(m.x,2)/Math.pow(i,2)+Math.pow(m.y,2)/Math.pow(p,2);n>1&&(i*=Math.sqrt(n),p*=Math.sqrt(n));var C=(u==y?-1:1)*Math.sqrt((Math.pow(i,2)*Math.pow(p,2)-Math.pow(i,2)*Math.pow(m.y,2)-Math.pow(p,2)*Math.pow(m.x,2))/(Math.pow(i,2)*Math.pow(m.y,2)+Math.pow(p,2)*Math.pow(m.x,2)));isNaN(C)&&(C=0);var j={x:C*i*m.y/p,y:C*-p*m.x/i},E={x:(t.x+o.x)/2+Math.cos(O)*j.x-Math.sin(O)*j.y,y:(t.y+o.y)/2+Math.sin(O)*j.x+Math.cos(O)*j.y},J=function(o){return Math.sqrt(Math.pow(o[0],2)+Math.pow(o[1],2))},F=function(t,U){return(t[0]*U[0]+t[1]*U[1])/(J(t)*J(U))},x=function(U,Z){return(U[0]*Z[1]<U[1]*Z[0]?-1:1)*Math.acos(F(U,Z))},g=x([1,0],[(m.x-j.x)/i,(m.y-j.y)/p]),P=[(m.x-j.x)/i,(m.y-j.y)/p],c=[(-m.x-j.x)/i,(-m.y-j.y)/p],a=x(P,c);F(P,c)<=-1&&(a=Math.PI),F(P,c)>=1&&(a=0);var F=i>p?i:p,W=i>p?1:i/p,I=i>p?p/i:1;if(null==T){var V={x:0,y:0,width:0,height:0};Sb(V,F),V.x*=W,V.width*=W,V.y*=I,V.height*=I;var H=new Ub(O);return V=Jm([H.tf(V.x,V.y),H.tf(V.x+V.width,V.y),H.tf(V.x+V.width,V.y+V.height),H.tf(V.x,V.y+V.height)]),V.x+=E.x,V.y+=E.y,[{x:V.x,y:V.y},{x:V.x+V.width,y:V.y},{x:V.x+V.width,y:V.y+V.height},{x:V.x,y:V.y+V.height}]}T.translate(E.x,E.y),T.rotate(O),T.scale(W,I),T.arc(0,0,F,g,g+a,1-y),T.scale(1/W,1/I),T.rotate(-O),T.translate(-E.x,-E.y)},ib=function(y,c){y&&y.beginPath();for(var L,$,z,Y=[],J=function(J){for(var t,h=/(\-{0,1}[\d\.]+)/gi,f=[];t=h.exec(J);)f.push(parseFloat(t[0]));return f},Z=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,n={x:0,y:0};L=Z.exec(c);){var D=L[0],E=D.substr(0,1);if("M"===E||"m"===E){for(var e=J(D),k=0;k<e.length;k+=2){var H=e[k],W=e[k+1];"m"===E&&(H+=n.x,W+=n.y),y&&y.moveTo(H,W),Y.push({x:H,y:W}),n.x=H,n.y=W}$=z=null}else if("H"===E||"h"===E){for(var e=J(D),k=0;k<e.length;k+=1){var H=e[k];"h"===E&&(H+=n.x),y&&y.lineTo(H,n.y),Y.push({x:H,y:n.y}),n.x=H}$=z=null}else if("C"===E||"c"===E){for(var e=J(D),k=0;k<e.length;k+=6){var b=e[k],x=e[k+1],V=e[k+2],v=e[k+3],H=e[k+4],W=e[k+5];"c"===E&&(b+=n.x,x+=n.y,V+=n.x,v+=n.y,H+=n.x,W+=n.y),y&&y.bezierCurveTo(b,x,V,v,H,W),Y.push({x:b,y:x}),Y.push({x:V,y:v}),Y.push({x:H,y:W}),n.x=H,n.y=W}$=[b,x,V,v,H,W],z=null}else if("S"===E||"s"===E){for(var e=J(D),k=0;k<e.length;k+=4){var b,x;$?(b=2*$[4]-$[2],x=2*$[5]-$[3]):(b=n.x,x=n.y);var V=e[k],v=e[k+1],H=e[k+2],W=e[k+3];"s"===E&&(V+=n.x,v+=n.y,H+=n.x,W+=n.y),y&&y.bezierCurveTo(b,x,V,v,H,W),Y.push({x:b,y:x}),Y.push({x:V,y:v}),Y.push({x:H,y:W}),n.x=H,n.y=W}$=[b,x,V,v,H,W],z=null}else if("Q"===E||"q"===E){for(var e=J(D),k=0;k<e.length;k+=4){var b=e[k],x=e[k+1],H=e[k+2],W=e[k+3];"q"===E&&(b+=n.x,x+=n.y,H+=n.x,W+=n.y),y&&y.quadraticCurveTo(b,x,H,W),Y.push({x:b,y:x}),Y.push({x:H,y:W}),n.x=H,n.y=W}$=null,z=[b,x,H,W]}else if("T"===E||"t"===E){for(var e=J(D),k=0;k<e.length;k+=2){var b,x;z?(b=2*z[2]-z[0],x=2*z[3]-z[1]):(b=n.x,x=n.y);var H=e[k],W=e[k+1];"t"===E&&(H+=n.x,W+=n.y),y&&y.quadraticCurveTo(b,x,H,W),Y.push({x:b,y:x}),Y.push({x:H,y:W}),n.x=H,n.y=W}$=null,z=[b,x,H,W]}else if("V"===E||"v"===E){for(var e=J(D),k=0;k<e.length;k+=1){var W=e[k];"v"===E&&(W+=n.y),y&&y.lineTo(n.x,W),Y.push({x:n.x,y:W}),n.y=W}$=z=null}else if("L"===E||"l"===E){for(var e=J(D),k=0;k<e.length;k+=2){var H=e[k],W=e[k+1];"l"===E&&(H+=n.x,W+=n.y),y&&y.lineTo(H,W),Y.push({x:H,y:W}),n.x=H,n.y=W}$=z=null}else if("A"===E||"a"===E){for(var e=J(D),k=0;k<e.length;k+=7){var q=e[k],u=e[k+1],K=e[k+2],h=e[k+3],l=e[k+4],H=e[k+5],W=e[k+6];"a"===E&&(H+=n.x,W+=n.y);var f=Fq(n,q,u,K,h,l,{x:H,y:W},y);f&&(Y=Y.concat(f)),n.x=H,n.y=W}$=z=null}var I=D.substr(D.length-1);("z"===I||"Z"===I)&&y&&y.closePath()}return Y},lf=function(y,S,Y,q,_){var A,Q=S[0];if(y.save(),Tl(S))if(Q&&1===Q.length){var x,O="L"===S[0],b=S.length;O?(y.transform(S[5],S[6],S[7],S[8],S[9],S[10]),A=y.createLinearGradient(S[1],S[2],S[3],S[4]),x=11):(y.transform(S[7],S[8],S[9],S[10],S[11],S[12]),A=y.createRadialGradient(S[1],S[2],S[3],S[4],S[5],S[6]),x=13);for(var t=y.compGray;b>x;){var n=S[x+1];n=Y(n),A.addColorStop(S[x],t?T.toGrayColor(n):n),x+=2}}else{var x,O="linear"===Q,N=_.x,k=_.y,U=_.width,J=_.height,b=S.length,t=y.compGray;if(O)A=y.createLinearGradient(N+U*S[1],k+J*S[2],N+U*S[3],k+J*S[4]),x=5;else{var c=Math.min(U,J),E=S[1]*U+N,R=S[2]*J+k,f=S[3]*c;if(jm(S[5]))A=y.createRadialGradient(E,R,0,E,R,f),x=4;else{y.transform(S[7],S[8],S[9],S[10],S[11]+E,S[12]+R);var z=S[4]*U+N-E,Z=S[5]*J+k-R,V=S[6]*c;A=y.createRadialGradient(0,0,f,z,Z,V),x=13}}for(;b>x;){var n=S[x+1];n=Y(n),A.addColorStop(S[x],t?T.toGrayColor(n):n),x+=2}}else A=S;return q?y.strokeStyle=A:y.fillStyle=A,A},rb=function(){function I(T,Y){var $=T.length,N=T[0];if(jm(T)||N&&1!==N.length)return T;for(var L=new Array($),G=0;$>G;G++)L[G]=T[G];var E,u,K,X,g,M,S,D,v,F,H,U,l,b="L"===L[0];return E=b?5:7,u=L[E],K=L[E+1],X=L[E+2],g=L[E+3],M=L[E+4],S=L[E+5],D=Y[0],v=Y[1],F=Y[2],H=Y[3],U=Y[4],l=Y[5],L[E]=D*u+F*K,L[E+1]=v*u+H*K,L[E+2]=D*X+F*g,L[E+3]=v*X+H*g,L[E+4]=D*M+F*S+U,L[E+5]=v*M+H*S+l,L}return function(_,H){var t;(t=_.s("shape.gradient.pack"))&&_.s("shape.gradient.pack",I(t,H)),(t=_.s("shape.border.gradient.pack"))&&_.s("shape.border.gradient.pack",I(t,H))}}(),Fc=function(F,k,S,Z){var r=!1;if(F.beginPath?F.beginPath():r=!0,Ur(k)&&(k=k._as),Ur(S)&&(S=S._as),S&&S.length){for(var X,R,M,f,B=0,v=0,T=S.length;T>v;v++)X=S[v],1===X?(R=k[B++],F.moveTo(R.x,r?-R.y:R.y)):2===X?(R=k[B++],F.lineTo(R.x,r?-R.y:R.y)):3===X?(R=k[B++],M=k[B++],F.quadraticCurveTo(R.x,r?-R.y:R.y,M.x,r?-M.y:M.y)):4===X?(R=k[B++],M=k[B++],f=k[B++],F.bezierCurveTo(R.x,r?-R.y:R.y,M.x,r?-M.y:M.y,f.x,r?-f.y:f.y)):5===X&&F.closePath();
Z&&5!==X&&F.closePath()}else{var U,t,h,E=k.length;if(E>0){for(U=k[0],F.moveTo(U.x,r?-U.y:U.y),t=1;E>t;t++)h=k[t],F.lineTo(h.x,r?-h.y:h.y);Z&&F.closePath()}}},Pk=function(c,r,E,Z){if(Ur(c)&&(c=c._as),Ur(r)&&(r=r._as),r&&r.length){E=E||Er;for(var w,R,i,J,v,u,A,O,x=[],G=C,N=0,U=0,t=r.length;t>U;U++)if(w=r[U],1===w)x.push(G=[]),G.push(c[N++]);else if(2===w)G.push(c[N++]);else if(3===w){for(R=G[G.length-1],i=c[N++],J=c[N++],u=1;E>u;u++)A=Vl(u/E,R.x,i.x,J.x),O=Vl(u/E,R.y,i.y,J.y),G.push({x:A,y:O,b:!0});G.push(J)}else if(4===w){for(R=G[G.length-1],i=c[N++],J=c[N++],v=c[N++],u=1;E>u;u++)A=Le(u/E,R.x,i.x,J.x,v.x),O=Le(u/E,R.y,i.y,J.y,v.y),G.push({x:A,y:O,b:!0});G.push(v)}else 5===w&&G.push(G[0]);return Z&&5!==w&&G&&G.length>2&&G.push(G[0]),x}return Z&&c.length>2&&(c=c.slice(),c.push(c[0])),c?[c]:[]},Lh=function(c,M,C,B,x,d){var l,e,n,T=Nm(M),H=B,y=T[0],t=T[1],S=T[2];if(C){var b=Nm(C);l=b[0]-y,e=b[1]-t,n=b[2]-S}else l=255-y,e=255-t,n=255-S;for(d||(d=B>10?1:.5,d=1>x?r(d/x,2):d),c.save(),c.shadowOffsetX=0,c.shadowOffsetY=0,c.shadowBlur=0,c.shadowColor=0;(B-=d)>0;){var i=1-B/H,G=y+l*i,$=t+e*i,k=S+n*i;G=r(O(G),255),$=r(O($),255),k=r(O(k),255),c.strokeStyle="rgb("+G+","+$+","+k+")",c.lineWidth=B,c.stroke()}c.restore()},ig=function(){if(Ud&&G){var S=G+""||qf;kj=S.indexOf(Gb.substr(0,2))>0&&S.indexOf(pc+pc.substr(1,1))>1?!0:!1}var h={};return function(G,D){var q=G+"-"+D,o=h[q];if(o)return o;var m,n,S,i=Nm(G);return 0>D?(D=(100+D)/100,m=O(i[0]*D),n=O(i[1]*D),S=O(i[2]*D)):(D/=100,m=i[0],n=i[1],S=i[2],m+=(255-m)*D,n+=(255-n)*D,S+=(255-S)*D,m=r(O(m),255),n=r(O(n),255),S=r(O(S),255)),h[q]="rgb("+m+","+n+","+S+")"}}(),ri=function(R,m,L,l,W,f){f&&(R.fillStyle=f),R.beginPath(),R.rect(m,L,l,W),R.fill()},Qf=function(P,R,b,B,M,m,g){P.beginPath(),Nd[R](P,b.x,b.y,b.width,b.height,B,M,m,g)},wo=function(r,C,g,E,t){var _=Nd[g];r.fillStyle=_?_(r,C,E?E:jp,t.x,t.y,t.width,t.height):C},Fl=function(f,t,Y,z,v,r){f.fillStyle=Sg(f,t,Y,z,v,r)},qq=function($,R,K,L,d,e){$.strokeStyle=Sg($,R,K,L,d,e)},Sg=function(F,i,G,m,R,v){var A;try{if(!i.tagName&&i.comps){i._cacheImage_||(i._cacheImage_={});var u;u="override"===m?"colors_override":"override_rgb"===m?"colors_override_rgb":"override_a"===m?"colors_override_a":"colors",i._cacheImage_[u]||(i._cacheImage_[u]={__count__:0});var V=i._cacheImage_[u][G];V||(i._cacheImage_[u].__count__>T.imageCacheThreshold&&(i._cacheImage_[u]={__count__:0}),V=L.Default.toCanvas(i,wc(i),sl(i),null,R,v,G,null,m),i._cacheImage_[u][G]=V,i._cacheImage_[u].__count__++),i=V}A=F.createPattern(i,"repeat")}catch(I){A="black"}return A},Nr=function($){var b,R,g=[],k=0,E=$.length;for(b=0;65>b;b++)g[b]=b;for(b=0;65>b;b++)k=(k+g[b]+$.charCodeAt(b%E))%65,R=g[b],g[b]=g[k],g[k]=R;for(b=0;65>b;b++)g[b]=Yf[g[b]];return g.join("")},fr=function(J){for(var I=8+Of.randomInt(8),X=Yf[8*Of.randomInt(8)+(I-8)],j="",w=0;I>w;w++)j+=Yf[Of.randomInt(64)];var y=Nr(j+s+Ci+Dj);return X+j+Sd.encode(J,y)},qi=function(T){var Z=T[0],C=Yf.indexOf(Z);if(0>C)return"";C=8+(7&C);var j=T.slice(1,1+C),J=Nr(j+s+Ci+Dj);return Sd.decode(T,J,1+C)},Co=function(B,w,$,N,j,y,f){B.save(),B.translate(w,$),B.scale(1,f/y),B.arc(0,0,y,N,j),B.restore()},hs=function(p,W,J,z,$,j,i,y){var M,D,F,g,f,k,r,C,w,U,a;if(A($)>2*kl&&($=2*kl),f=O(A($)/(kl/4)),M=$/f,D=-M,F=-z,f>0){k=W+t(z)*j,r=J+_(-z)*i,y?p.lineTo(k,r):p.moveTo(k,r);for(var e=0;f>e;e++)F+=D,g=F-D/2,C=W+t(F)*j,w=J+_(F)*i,U=W+t(g)*(j/t(D/2)),a=J+_(g)*(i/t(D/2)),p.quadraticCurveTo(U,a,C,w)}},Dk=function(B,U,P,a,L,h,v,w,f){6===arguments.length&&(Tl(h)?(w=h[1],f=h[2],v=h[3],h=h[0]):(v=h,w=h,f=h));var T=U+a,s=P+L,V=L>a?2*a:2*L;return h=V>h?h:V,v=V>v?v:V,w=V>w?w:V,f=V>f?f:V,B.roundRect?(B.roundRect(U,P,a,L,[h,v,f,w]),void 0):(B.moveTo(U+a/2,P),B.arcTo(T,P,T,s,v),B.arcTo(T,s,U,s,f),B.arcTo(U,s,U,P,w),B.arcTo(U,P,T,P,h),B.lineTo(U+a/2,P),void 0)},lo=function(W,A,u,z,d,Z,T){A&&(u=p(u),z=p(z),T||(T=1),W.fillStyle=A,W.beginPath(),W.rect(u,z,T,Z),W.rect(u,z,d,T),Z-T>0&&W.rect(u,z+Z-T,d,T),d-T>0&&W.rect(u+d-T,z,T,Z),W.fill())},Rk=function(J,W,G,F){var p=F.x,X=F.y,t=F.width,b=F.height;if(!(!W||!G||0>=t||0>=b)){var q,w=dm(W),N=qe(W),$=G>0;1===G||-1===G?(J.fillStyle=$?w:N,J.beginPath(),J.rect(p,X,1,b),J.rect(p,X,t,1),J.fill(),J.fillStyle=$?N:w,J.beginPath(),J.rect(p,X+b-1,t,1),J.rect(p+t-1,X,1,b),J.fill()):(G=r(A(G),r(t/2,b/2)),q=J.createLinearGradient(p,X,p+G,X),q.addColorStop(0,$?w:N),q.addColorStop(1,W),J.fillStyle=q,J.beginPath(),J.moveTo(p,X),J.lineTo(p+G,X+G),J.lineTo(p+G,X+b-G),J.lineTo(p,X+b),J.lineTo(p,X),J.fill(),q=J.createLinearGradient(p,X,p,X+G),q.addColorStop(0,$?w:N),q.addColorStop(1,W),J.fillStyle=q,J.beginPath(),J.moveTo(p,X),J.lineTo(p+G,X+G),J.lineTo(p+t-G,X+G),J.lineTo(p+t,X),J.lineTo(p,X),J.fill(),q=J.createLinearGradient(p,X+b,p,X+b-G),q.addColorStop(0,$?N:w),q.addColorStop(1,W),J.fillStyle=q,J.beginPath(),J.moveTo(p,X+b),J.lineTo(p+G,X+b-G),J.lineTo(p+t-G,X+b-G),J.lineTo(p+t,X+b),J.lineTo(p,X+b),J.fill(),q=J.createLinearGradient(p+t,X,p+t-G,X),q.addColorStop(0,$?N:w),q.addColorStop(1,W),J.fillStyle=q,J.beginPath(),J.moveTo(p+t,X),J.lineTo(p+t-G,X+G),J.lineTo(p+t-G,X+b-G),J.lineTo(p+t,X+b),J.lineTo(p+t,X),J.fill())}},ro=function(Z,N,Q,e,W,k,G){var b=Z.createLinearGradient(e,W,k,G);return b.addColorStop(0,Q),b.addColorStop(1,N),b},mm=function(A,Z,s,G,n,p,V){var W=A.createLinearGradient(G,n,p,V);return W.addColorStop(0,Z),W.addColorStop(.5,s),W.addColorStop(1,Z),W},cd=function(M,P,K,Q,u,I,y){var W=M.createLinearGradient(Q,u,I,y);return W.addColorStop(0,P),W.addColorStop(1/3,K),W.addColorStop(2/3,P),W.addColorStop(1,K),W},xe=function(d,S,j,U,I,p,H,Z,J){var Y=d.createRadialGradient(U+p*Z,I+H*J,r(p,H)/24,U+p/2,I+H/2,h(p,H)/2);return Y.addColorStop(0,j),Y.addColorStop(1,S),Y},xj=[0,-1,.22451398828979272,-.30901699437494734,.9510565162951535,-.30901699437494745,.3632712640026804,.11803398874989468,.5877852522924731,.8090169943749473,-1.1102230246251565e-16,.38196601125010515,-.587785252292473,.8090169943749475,-.3632712640026805,.1180339887498949,-.9510565162951536,-.3090169943749473,-.22451398828979285,-.30901699437494734],Nd={polygon:function(o,f,i,j,W,g,m,$){(g==C||3>g)&&(g=6),m==C&&(m=0),$==C&&($=!0);var U,s=r(j,W),p=s/2,H=new Sf(f+j/2,i+W/2),w=new Sf,R=0,P=2*kl/g,l=new Sf(p,p);if($===!1&&l.multiply({x:j/s,y:W/s}),0===m)for(U=0;g>U;U++)w.set(t(R),_(R)).multiply(l).add(H),0===U?o.moveTo(w.x,w.y):o.lineTo(w.x,w.y),R+=P;else{var I=[];for(U=0;2>U;U++)I.push(new Sf(t(R),_(R)).multiply(l).add(H)),R+=P;var S=I.shift(),L=I[0],v=new Sf(t(R),_(R)).multiply(l).add(H),T=S.clone().sub(L),M=v.clone().sub(L),A=T.clone().normalize().dot(M.clone().normalize()),k=Math.sqrt((1-A)/(1+A)),J=m/k;for(T.setLength(J).add(L),o.moveTo(T.x,T.y),U=0;g>U;U++)I.push(new Sf(t(R),_(R)).multiply(l).add(H)),R+=P,S=I.shift(),L=I[0],o.arcTo(S.x,S.y,L.x,L.y,m)}o.closePath()},arc:function(l,f,S,q,t,W,L,K,A){W==C&&(W=kl),L==C&&(L=ok),K==C&&(K=!0);var E=f+q/2,Z=S+t/2;K&&l.moveTo(E,Z),A?Co(l,E,Z,W,L,q/2,t/2):l.arc(E,Z,r(q,t)/2,W,L),K&&l.closePath()},rect:function(k,J,Z,y,C){k.rect(J,Z,y,C)},circle:function(m,y,U,J,F){m.arc(y+J/2,U+F/2,r(J,F)/2,0,ok,!0)},oval:function(b,E,B,x,w){Co(b,E+x/2,B+w/2,0,ok,x/2,w/2)},roundRect:function(z,K,l,y,Z,o){o==C&&(o=r(r(y,Z)/4,8)),Dk(z,K,l,y,Z,o),z.closePath()},star:function(G,v,E,V,B){var z=2*V,x=2*B,o=v+V/2,g=E+B/2;G.moveTo(o-z/4,g-x/12),G.lineTo(v+.306*V,E+.579*B),G.lineTo(o-z/6,g+x/4),G.lineTo(v+V/2,E+.733*B),G.lineTo(o+z/6,g+x/4),G.lineTo(v+.693*V,E+.579*B),G.lineTo(o+z/4,g-x/12),G.lineTo(v+.611*V,E+.332*B),G.lineTo(o+0,g-x/4),G.lineTo(v+.388*V,E+.332*B),G.closePath()},pentagram:function(E,y,C,B,c){var Z=.5*c,H=y+.5*B,F=C+Z,e=.5257311121191336*B;e>Z&&(e=Z);var o=xj,u=0;for(E.moveTo(H+e*o[u++],F+e*o[u++]);20>u;)E.lineTo(H+e*o[u++],F+e*o[u++]);E.closePath()},triangle:function(O,N,k,p,T){O.moveTo(N+p/2,k),O.lineTo(N+p,k+T),O.lineTo(N,k+T),O.closePath()},hexagon:function(b,L,m,H,U){b.moveTo(L,m+U/2),b.lineTo(L+H/4,m+U),b.lineTo(L+3*H/4,+m+U),b.lineTo(L+H,m+U/2),b.lineTo(L+3*H/4,m),b.lineTo(L+H/4,m),b.closePath()},pentagon:function(G,u,W,t,T){var Z=2*t,X=2*T,R=u+t/2,l=W+T/2;G.moveTo(R-Z/4,l-X/12),G.lineTo(R-Z/6,l+X/4),G.lineTo(R+Z/6,l+X/4),G.lineTo(R+Z/4,l-X/12),G.lineTo(R+0,l-X/4),G.closePath()},diamond:function(j,r,K,x,C){j.moveTo(r+x/2,K),j.lineTo(r,K+C/2),j.lineTo(r+x/2,K+C),j.lineTo(r+x,K+C/2),j.closePath()},rightTriangle:function(p,d,Y,T,c){p.moveTo(d,Y),p.lineTo(d+T,Y+c),p.lineTo(d,Y+c),p.closePath()},parallelogram:function(U,b,N,S,T){var R=S/4;U.moveTo(b+R,N),U.lineTo(b+S,N),U.lineTo(b+S-R,N+T),U.lineTo(b,N+T),U.closePath()},trapezoid:function(h,u,W,r,w){var U=r/4;h.moveTo(u+U,W),h.lineTo(u+r-U,W),h.lineTo(u+r,W+w),h.lineTo(u,W+w),h.closePath()},"linear.southwest":function(Q,y,t,W,f,z,g){return ro(Q,y,t,W,f+g,W+z,f)},"linear.southeast":function(b,T,u,x,M,J,A){return ro(b,T,u,x+J,M+A,x,M)},"linear.northwest":function(N,G,B,o,c,S,M){return ro(N,G,B,o,c,o+S,c+M)},"linear.northeast":function(U,a,s,l,M,k,O){return ro(U,a,s,l+k,M,l,M+O)},"linear.north":function(j,k,p,r,c,A,S){return ro(j,k,p,r,c,r,c+S)},"linear.south":function(E,S,q,r,o,h,Z){return ro(E,S,q,r,o+Z,r,o)},"linear.west":function(z,D,h,G,c,V){return ro(z,D,h,G,c,G+V,c)},"linear.east":function(c,e,o,Z,b,l){return ro(c,e,o,Z+l,b,Z,b)},"radial.center":function(n,t,$,M,f,K,R){return xe(n,t,$,M,f,K,R,.5,.5)},"radial.southwest":function(B,G,q,x,R,b,K){return xe(B,G,q,x,R,b,K,.25,.75)},"radial.southeast":function(r,$,Q,p,h,P,B){return xe(r,$,Q,p,h,P,B,.75,.75)},"radial.northwest":function(X,j,e,J,l,y,S){return xe(X,j,e,J,l,y,S,.25,.25)},"radial.northeast":function(h,P,f,E,o,L,O){return xe(h,P,f,E,o,L,O,.75,.25)},"radial.north":function(e,o,O,F,A,W,y){return xe(e,o,O,F,A,W,y,.5,.25)},"radial.south":function(R,J,g,m,Y,y,W){return xe(R,J,g,m,Y,y,W,.5,.75)},"radial.west":function(t,J,P,i,T,f,u){return xe(t,J,P,i,T,f,u,.25,.5)},"radial.east":function(q,R,o,B,n,I,z){return xe(q,R,o,B,n,I,z,.75,.5)},"spread.horizontal":function(U,g,m,P,p,J){return mm(U,g,m,P,p,P+J,p)},"spread.vertical":function(H,A,U,Q,m,M,d){return mm(H,A,U,Q,m,Q,m+d)},"spread.diagonal":function(P,l,W,x,u,f,n){return mm(P,l,W,x+f,u,x,u+n)},"spread.antidiagonal":function(_,r,C,N,t,H,w){return mm(_,r,C,N,t,N+H,t+w)},"spread.north":function(x,H,R,S,B,h,z){return cd(x,H,R,S,B-z/4,S,B+z+z/4)},"spread.south":function(m,b,J,P,T,D,Q){return cd(m,J,b,P,T-Q/4,P,T+Q+Q/4)},"spread.west":function(j,k,S,Q,u,P){return cd(j,k,S,Q-P/4,u,Q+P+P/4,u)},"spread.east":function(_,L,A,j,N,W){return cd(_,A,L,j-W/4,N,j+W+W/4,N)}},Jb=function(T,f,n){return new Ub(T).tf(f,n)},Rc=function(g){var i=g.touches[0],z=g.touches[1],n=i.clientX,Z=i.clientY,M=z.clientX,w=z.clientY;return Q((n-M)*(n-M)+(Z-w)*(Z-w))},lp=function(a){var l=a.touches[0],W=a.touches[1],y=l.clientX,C=l.clientY,S=W.clientX,L=W.clientY;return{x:(y+S)/2,y:(C+L)/2}},lc=(function(){for(var y=0,D=Vm.split(""),e=0;e<D.length;e++)y=10*Ym(D[e])+y;return Lp(f[Gn.toString(8*e)+Fb.substr(e)+3],f[Gn.toString(8*e)+Fb.substr(e)+4]),y}(),function(D,L,y){for(var Y=0;Y<y.size();Y++){var w=y.get(Y);D.co(w)&&L.add(w)}for(Y=0;Y<y.size();Y++)w=y.get(Y),lc(D,L,w._children)}),Zj=function(o,j,P){for(var U=0;U<P.size();U++){var z=P.get(P.size()-1-U);o.co(z)&&j.add(z)}for(U=0;U<P.size();U++)z=P.get(U),Zj(o,j,z._children)},He=function(W,m,T){for(var A=!1,f=0;f<T.size();f++){var M=T.get(f);W.co(M)?A&&m.add(M):A=1}for(f=0;f<T.size();f++)M=T.get(f),He(W,m,M._children)},jo=function(K,o,I){for(var G=!1,Z=0;Z<I.size();Z++){var b=I.get(I.size()-1-Z);K.co(b)?G&&o.add(b):G=!0}for(Z=0;Z<I.size();Z++)b=I.get(Z),jo(K,o,b._children)},_k=T.moveDatas=function(S,Z,p,a){var n=a==C;if(0!==Z||0!==p||!n&&0!==a){var L=!0,h=[];if(S.forEach(function(X){L&&(X._69O||eo(X)||$j(X))&&(L=!1)}),L)h=S;else{var _={},X={};S.forEach(function(w){_[w._id]=!0});var c={},D=function(A){var p=A._id;return _[p]?(h.push(A),c[p]=!0):c[p]=!1},d=function(C){var O=C._id;if(X[O])return D(C);var L=c[O];if(L!==H)return L;var w=C._parent;if(w&&($j(w)||eo(w))&&d(w))return c[O]=!0;var Q=C._host;return Q&&(X[O]=O,L=d(Q),X[O]=H,L)?c[O]=!0:D(C)};S.forEach(function(q){d(q)})}h.forEach(function(i){if(Tk(i))n?i.translate(Z,p):i.translate3d(Z,p,a);else{var H=i.s(Kn);if(!H||H.isEmpty())return;var W=new Dg;H.each(function($){$=ho($),n?($.x+=Z,$.y+=p):($.x+=Z,$.y+=a,$.e==C?$.e=p:$.e+=p),W.add($)}),i.s(Kn,W)}})}},ne=function(){function W(R,W){return W===R.substring(0,W.length)?!0:!1}function x(X){return parseFloat(X)||0}function i(U,f){if(f==H&&(f=new kc),W(U,"matrix3d")){var a=U.substring(9,U.length-1).split(",");a=a.map(x),f.fromArray(a)}else if(W(U,"matrix")){var a=U.substring(7,U.length-1).split(",");a=a.map(x),f.el[0]=a[0],f.el[1]=a[1],f.el[2]=0,f.el[3]=0,f.el[4]=a[2],f.el[5]=a[3],f.el[6]=0,f.el[7]=0,f.el[8]=0,f.el[9]=0,f.el[10]=1,f.el[11]=0,f.el[12]=a[4],f.el[13]=a[5],f.el[14]=0,f.el[15]=1}return f}function G(R,w){w==H&&(w=new ng);var L=R.split(/\s+/);return L=L.map(x),w.set(L[0]||0,L[1]||0,L[2]||0),w}var Y,E,Z,P,V,B=function(L,t){Y||(Y=new kc,E=new ng,Z=new kc,P=new kc,V=new kc),t==H&&(t=new kc);var l=getComputedStyle(L);!bq&&l.perspective&&"none"!==l.perspective&&(Z.el[11]=-1/x(l.perspective),G(l.perspectiveOrigin,E),P.setPosition(E),E.negate(),V.setPosition(E),t.multiplyMatrices(V,t),t.multiplyMatrices(Z,t),t.multiplyMatrices(P,t)),l.transform&&"none"!==l.transform&&(i(l.transform,Y),G(l.transformOrigin,E),P.setPosition(E),E.negate(),V.setPosition(E),(bq||"preserve-3d"!==l.transformStyle)&&(Y.el[8]=0,Y.el[9]=0,Y.el[10]=1,Y.el[11]=0),t.multiplyMatrices(V,t),t.multiplyMatrices(Y,t),t.multiplyMatrices(P,t));for(var b=L.offsetParent,q=L.offsetLeft,d=L.offsetTop,D=L.parentElement;D&&D!==b;){var n=getComputedStyle(D);if("none"!==n.transform||"none"!==n.perspective)break;D=D.parentElement}return D==H&&L!==L.ownerDocument.documentElement&&"fixed"!==l.position&&(D=L.ownerDocument.documentElement),b!=H&&b!=D&&(q-=D.offsetLeft,d-=D.offsetTop),D&&(q-=D.scrollLeft,d-=D.scrollTop),E.set(q,d,0),P.setPosition(E),t.multiplyMatrices(P,t),D&&B(D,t),t};return function(e,x){var P=e.parentElement;if(P){var Q=P.updateAppendMatrix;if(Q){delete P.updateAppendMatrix;var z=new kc;B(P,z);var r=new kc;r.getInverse(z),P._matrixAppend=r,P._maxrixPreAppend=z}return x?P._matrixAppend:P._maxrixPreAppend}}}(),iq=function(z,P){for(;z&&!z.hasOwnProperty(P);)z=b.getPrototypeOf(z);return z&&b.getOwnPropertyDescriptor(z,P)},Ue=b.getPrototypeOf?function(f,J,U){var c=iq(J,U);c&&b.defineProperty(f,U,c)}:function(L,G,S){L[S]=G[S]},sp={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},Zh=function(){var I={1:function(G,_){return{x:G.x-_.width/2,y:G.y-_.height/2}},2:function(s,V){return{x:s.x+V.width/2,y:s.y-V.height/2}},3:function(W,s){return{x:W.x+W.width/2,y:W.y-s.height/2}},4:function(B,z){return{x:B.x+B.width-z.width/2,y:B.y-z.height/2}},5:function(z,U){return{x:z.x+z.width+U.width/2,y:z.y-U.height/2}},6:function(N){return{x:N.x,y:N.y}},7:function(D){return{x:D.x+D.width/2,y:D.y}},8:function(p){return{x:p.x+p.width,y:p.y}},9:function(T,E){return{x:T.x-E.width/2,y:T.y+E.height/2}},10:function(C,R){return{x:C.x+R.width/2,y:C.y+R.height/2}},11:function(U,u){return{x:U.x+U.width/2,y:U.y+u.height/2}},12:function(J,k){return{x:J.x-k.width/2+J.width,y:J.y+k.height/2}},13:function(X,e){return{x:X.x+X.width+e.width/2,y:X.y+e.height/2}},14:function(A,b){return{x:A.x-b.width/2,y:A.y+A.height/2}},15:function(F){return{x:F.x,y:F.y+F.height/2}},16:function(C,h){return{x:C.x+h.width/2,y:C.y+C.height/2}},17:function(G){return{x:G.x+G.width/2,y:G.y+G.height/2}},18:function(B,v){return{x:B.x+B.width-v.width/2,y:B.y+B.height/2}},19:function(C){return{x:C.x+C.width,y:C.y+C.height/2}},20:function(D,U){return{x:D.x+D.width+U.width/2,y:D.y+D.height/2}},21:function(o,U){return{x:o.x-U.width/2,y:o.y+o.height-U.height/2}},22:function(O,L){return{x:O.x+L.width/2,y:O.y+O.height-L.height/2}},23:function($,E){return{x:$.x+$.width/2,y:$.y+$.height-E.height/2}},24:function(O,H){return{x:O.x+O.width-H.width/2,y:O.y+O.height-H.height/2}},25:function(o,V){return{x:o.x+o.width+V.width/2,y:o.y+o.height-V.height/2}},26:function(X){return{x:X.x,y:X.y+X.height}},27:function(B){return{x:B.x+B.width/2,y:B.y+B.height}},28:function(x){return{x:x.x+x.width,y:x.y+x.height}},29:function(e,s){return{x:e.x-s.width/2,y:e.y+e.height+s.height/2}},30:function(k,p){return{x:k.x+p.width/2,y:k.y+k.height+p.height/2}},31:function(Q,b){return{x:Q.x+Q.width/2,y:Q.y+Q.height+b.height/2}},32:function(l,T){return{x:l.x+l.width-T.width/2,y:l.y+l.height+T.height/2}},33:function(S,H){return{x:S.x+S.width+H.width/2,y:S.y+S.height+H.height/2}},34:function(q,p){return{x:q.x,y:q.y-p.height/2}},35:function(d,t){return{x:d.x+d.width,y:d.y-t.height/2}},36:function(r,H){return{x:r.x,y:r.y+r.height+H.height/2}},37:function(Z,v){return{x:Z.x+Z.width,y:Z.y+Z.height+v.height/2}},38:function(C,x){return{x:C.x+C.width/4,y:C.y-x.height/2}},39:function(H,q){return{x:H.x+3*H.width/4,y:H.y-q.height/2}},40:function(u){return{x:u.x+u.width/4,y:u.y}},41:function(O){return{x:O.x+3*O.width/4,y:O.y}},42:function(E,I){return{x:E.x+E.width/4,y:E.y+I.height/2}},43:function(r,j){return{x:r.x+3*r.width/4,y:r.y+j.height/2}},44:function(y,r){return{x:y.x+y.width/2,y:y.y+y.height/2-r.height/2}},45:function(R){return{x:R.x+R.width/4,y:R.y+R.height/2}},46:function(n,p){return{x:n.x+n.width/2-p.width/2,y:n.y+n.height/2}},47:function(N,x){return{x:N.x+N.width/2+x.width/2,y:N.y+N.height/2}},48:function(z){return{x:z.x+3*z.width/4,y:z.y+z.height/2}},49:function(E,K){return{x:E.x+E.width/2,y:E.y+E.height/2+K.height/2}},50:function(k,U){return{x:k.x+k.width/4,y:k.y+k.height-U.height/2}},51:function(D,b){return{x:D.x+3*D.width/4,y:D.y+D.height-b.height/2}},52:function(f){return{x:f.x+f.width/4,y:f.y+f.height}},53:function(B){return{x:B.x+3*B.width/4,y:B.y+B.height}},54:function(K,g){return{x:K.x+K.width/4,y:K.y+K.height+g.height/2}},55:function(d,D){return{x:d.x+3*d.width/4,y:d.y+d.height+D.height/2}}};return gg(f)?function(z,Z,n){return I[z](Z,n?n:Sr)}:void 0}();yd(W,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#45C4F9",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#FFF",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var Ec=W.reverse,Ul=W.transparent,Rb=W.rectSelectBackground,yj=W.dash,Ik=W.titleBackground,xi=W.titleIconBackground,Rf=W.headerBackground,Kg=W.headerIconBackground,sq=W.headerSeparator,hn=W.headerLine,Gr=W.contentIconBackground,Jr=W.contentLine,bh=(W.widgetIconHighlight,W.widgetIconBorder),ol=(W.widgetIconGradient,W.imageBackground),jp=W.imageGradient,yn=W.highlight,vn=W.label,cn=W.labelSelect;if($k&&!f.shutAlert1){var Lr=new Date,Pq=$k.split("-"),ni=new Date(Lr.getFullYear(),Lr.getMonth(),Lr.getDate()),$k=new Date(Ym(Pq[0],10),Ym(Pq[1],10)-1,Ym(Pq[2],10)),xq=ni.getTime(),Je=$k.getTime(),Li=s+"_try",tr=f.alert;try{var tm=f.localStorage;if(tm&&tr)if(Je>xq&&1728e6>Je-xq){var Ic=(Je-xq)/864e5;tm&&tm[Li]!=Ic&&(tm[Li]=Ic,f.htWillExpire?tr(f.htWillExpire.replace("{{day}}",Ic)):tr("HT for Web free trial license will expire in "+Ic+" days, please apply for a new license!"))}else xq>=Je&&(f.htExpired?tr(f.htExpired):tr("Your free trial of HT for Web has expired!")),tm&&delete tm[Li]}catch(Kk){}}Math.sign===H&&(Math.sign=function(l){return 0>l?-1:l>0?1:+l});var Yf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Sd={encode:function(e,G){var k,d,m,H,z,y,w,N="",C=0;for(e=unescape(encodeURIComponent(e));C<e.length;)k=e.charCodeAt(C++),d=e.charCodeAt(C++),m=e.charCodeAt(C++),H=k>>2,z=(3&k)<<4|d>>4,y=(15&d)<<2|m>>6,w=63&m,isNaN(d)?y=w=64:isNaN(m)&&(w=64),N=N+G.charAt(H)+G.charAt(z)+G.charAt(y)+G.charAt(w);return N},decode:function(T,v,M){for(var W,n,r,g,U,H,O,Y="",P=M||0;P<T.length;)g=v.indexOf(T.charAt(P++)),U=v.indexOf(T.charAt(P++)),H=v.indexOf(T.charAt(P++)),O=v.indexOf(T.charAt(P++)),W=g<<2|U>>4,n=(15&U)<<4|H>>2,r=(3&H)<<6|O,Y+=String.fromCharCode(W),64!=H&&(Y+=String.fromCharCode(n)),64!=O&&(Y+=String.fromCharCode(r));return Y=decodeURIComponent(escape(Y))},_utf8_encode:function(G){G=G.replace(/\r\n/g,"\n");for(var v="",O=0;O<G.length;O++){var e=G.charCodeAt(O);128>e?v+=String.fromCharCode(e):e>127&&2048>e?(v+=String.fromCharCode(192|e>>6),v+=String.fromCharCode(128|63&e)):(v+=String.fromCharCode(224|e>>12),v+=String.fromCharCode(128|63&e>>6),v+=String.fromCharCode(128|63&e))}return v},_utf8_decode:function(D){for(var r="",i=0,I=0,Z=0,h=0;i<D.length;)I=D.charCodeAt(i),128>I?(r+=String.fromCharCode(I),i++):I>191&&224>I?(Z=D.charCodeAt(i+1),r+=String.fromCharCode((31&I)<<6|63&Z),i+=2):(Z=D.charCodeAt(i+1),h=D.charCodeAt(i+2),r+=String.fromCharCode((15&I)<<12|(63&Z)<<6|63&h),i+=3);return r}},Vq=[],hm=[],Of=L.Math={generateUUID:function(){for(var S=[],z=0;256>z;z++)S[z]=(16>z?"0":"")+z.toString(16).toUpperCase();return function(){var C=0|4294967295*Math.random(),c=0|4294967295*Math.random(),u=0|4294967295*Math.random(),w=0|4294967295*Math.random();return S[255&C]+S[255&C>>8]+S[255&C>>16]+S[255&C>>24]+"-"+S[255&c]+S[255&c>>8]+"-"+S[64|15&c>>16]+S[255&c>>24]+"-"+S[128|63&u]+S[255&u>>8]+"-"+S[255&u>>16]+S[255&u>>24]+S[255&w]+S[255&w>>8]+S[255&w>>16]+S[255&w>>24]}}(),clamp:function(Y,F,U){return Math.max(F,Math.min(U,Y))},fequal:function(v,G,g){return null==g&&(g=1e-8),Math.abs(v-G)<g},generateIncreasingID:function(){var H=0;return function(){return++H}}(),newIdGenerator:function(){var e=0;return{next:function(){return++e}}},encodeBase64:function(U,N){return Sd.encode(U,N||Yf)},decodeBase64:function(v,q){return Sd.decode(v,q||Yf)},randomArray:function(A,Z){Z=Z||A.length;for(var G=Z-1;G>0;G--){var n=Math.floor(Math.random()*(G+1)),v=A[G];A[G]=A[n],A[n]=v}return A},randomInt:function(p,L){return L===H&&(L=p,p=0),p+Math.floor(Math.random()*(L-p))},randomFloat:function(q,r){return r===H&&(r=q,q=0),q+Math.random()*(r-q)},modToPositive:function(_,r){var f=_%r;return 0>f&&(f+=r),f},roundFloat:function(y,l){var o;return o=1===l?10:2==l?100:3==l||l==C?1e3:Math.pow(10,l),Math.round(y*o)/o},isPOT:function(n){return n>0&&0===(n-1&n)},nearestPOT:function(K){if(!K)return 1;var R=K;R--,R|=R>>1,R|=R>>2,R|=R>>4,R|=R>>8,R|=R>>16,R++;var D=R>>1;return K-D>R-K?R:D},requestMatrix4:function(){return Vq.length>0?Vq.pop():new Of.Matrix4},releaseMatrix4:function(F){Vq.push(F)},requestVector3:function(){return hm.length>0?hm.pop():new Of.Vector3},releaseVector3:function(Y){hm.push(Y)}},vi=L.Matrix=L.Math.Matrix2d=function(B,Z,A,L,v){this.setFromTransform(B,Z,A,L,v)},Ub=vi;vi.prototype={},vi.prototype.constructor=vi,vi.prototype.set=function(S,Y,M,e,J,g){return this.a=S,this.b=Y,this.c=M,this.d=e,this.tx=J,this.ty=g,this},vi.prototype.setFromTransform=function(B,k,A,e,s){var f=this;if(B===H)return f.a=1,f.b=0,f.c=0,f.d=1,f.tx=0,f.ty=0,void 0;var C,N;return B?(C=_(B),N=t(B)):(C=0,N=1),e=e||1,s=s||1,f.a=N*e,f.b=C*e,f.c=-C*s,f.d=N*s,f.tx=k||0,f.ty=A||0,f},vi.prototype.apply=function(L,O){O=O||new Sf;var E=L.x,C=L.y;return O.x=this.a*E+this.c*C+this.tx,O.y=this.b*E+this.d*C+this.ty,O},vi.prototype.applyInverse=function(t,e){e=e||new Sf;var B=1/(this.a*this.d+this.c*-this.b),d=t.x,x=t.y;return e.x=this.d*B*d+-this.c*B*x+(this.ty*this.c-this.tx*this.d)*B,e.y=this.a*B*x+-this.b*B*d+(-this.ty*this.a+this.tx*this.b)*B,e},vi.prototype.translate=function(X,E){return this.tx+=X,this.ty+=E,this},vi.prototype.scale=function(w,X){return this.a*=w,this.d*=X,this.c*=w,this.b*=X,this.tx*=w,this.ty*=X,this},vi.prototype.rotate=function(G){var Q=Math.cos(G),c=Math.sin(G),X=this.a,f=this.c,I=this.tx;return this.a=X*Q-this.b*c,this.b=X*c+this.b*Q,this.c=f*Q-this.d*c,this.d=f*c+this.d*Q,this.tx=I*Q-this.ty*c,this.ty=I*c+this.ty*Q,this},vi.prototype.appendTranslate=function(d,z){return this.tx+=this.a*d+this.c*z,this.ty+=this.b*d+this.d*z,this},vi.prototype.appendScale=function(y,V){return this.a*=y,this.d*=V,this.c*=V,this.b*=y,this},vi.prototype.appendRotate=function(L){if(!L)return this;var B=Math.cos(L),Z=Math.sin(L),X=this.a,t=this.b;return this.a=X*B+this.c*Z,this.b=t*B+this.d*Z,this.c=-X*Z+this.c*B,this.d=-t*Z+this.d*B,this},vi.prototype.append=function(B){var M=this.a,c=this.b,l=this.c,r=this.d;return this.a=B.a*M+B.b*l,this.b=B.a*c+B.b*r,this.c=B.c*M+B.d*l,this.d=B.c*c+B.d*r,this.tx=B.tx*M+B.ty*l+this.tx,this.ty=B.tx*c+B.ty*r+this.ty,this},vi.prototype.setTransform=function(c,d,i,Y,W,f,H,w,k){var o,q,E,L,b,A,r,a,C,v;return b=Math.sin(H),A=Math.cos(H),r=Math.cos(k),a=Math.sin(k),C=-Math.sin(w),v=Math.cos(w),o=A*W,q=b*W,E=-b*f,L=A*f,this.a=r*o+a*E,this.b=r*q+a*L,this.c=C*o+v*E,this.d=C*q+v*L,this.tx=c+(i*o+Y*E),this.ty=d+(i*q+Y*L),this},vi.prototype.prepend=function(r){var b=this.tx;if(1!==r.a||0!==r.b||0!==r.c||1!==r.d){var o=this.a,n=this.c;this.a=o*r.a+this.b*r.c,this.b=o*r.b+this.b*r.d,this.c=n*r.a+this.d*r.c,this.d=n*r.b+this.d*r.d}return this.tx=b*r.a+this.ty*r.c+r.tx,this.ty=b*r.b+this.ty*r.d+r.ty,this},vi.prototype.transform=vi.prototype.prepend,vi.prototype.invert=function(){var $=this.a,Y=this.b,M=this.c,_=this.d,d=this.tx,K=$*_-Y*M;return this.a=_/K,this.b=-Y/K,this.c=-M/K,this.d=$/K,this.tx=(M*this.ty-_*d)/K,this.ty=-($*this.ty-Y*d)/K,this},vi.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},vi.prototype.clone=function(){var d=new vi;return d.a=this.a,d.b=this.b,d.c=this.c,d.d=this.d,d.tx=this.tx,d.ty=this.ty,d},vi.prototype.copy=function(d){return d.a=this.a,d.b=this.b,d.c=this.c,d.d=this.d,d.tx=this.tx,d.ty=this.ty,d},vi.prototype.tf=function(m,z){1===arguments.length&&(z=m.y,m=m.x);var H=this;return{x:H.a*m+H.c*z+H.tx,y:H.b*m+H.d*z+H.ty}},vi.prototype.toArray=function(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]},vi.prototype.fromArray=function(w){return this.a=w[0],this.b=w[1],this.c=w[2],this.d=w[3],this.tx=w[4],this.ty=w[5],this},vi.prototype.toArray9=function(){return[this.a,this.b,0,this.c,this.d,0,this.tx,this.ty,1]},vi.prototype.tfi=function(h,z){1===arguments.length&&(z=h.y,h=h.x);var H=this,g=1/(H.a*H.d+H.c*-H.b);return{x:H.d*g*h+-H.c*g*z+(H.ty*H.c-H.tx*H.d)*g,y:H.a*g*z+-H.b*g*h+(-H.ty*H.a+H.tx*H.b)*g}},vi.prototype.decompose=function(){var M=this,E=M.a,U=M.b,V=M.c,B=M.d,e=Math.sqrt(E*E+U*U),R=Math.sqrt(V*V+B*B),g=E*B-U*V;return 0>g&&(B>E?e=-e:R=-R),e&&(E*=1/e,U*=1/e),R&&(V*=1/R,B*=1/R),{translateX:M.tx,translateY:M.ty,rotation:Math.atan2(U,E),scaleX:e,scaleY:R}},vi.IDENTITY=new vi,vi.TEMP_MATRIX=new vi;var $d=L.Math.Quaternion=function(J,K,w,P){this.set(J,K,w,P)};b.assign($d.prototype,{set:function(s,c,p,z){var f=this;return f._x=s||0,f._y=c||0,f._z=p||0,f._w=z!==H?z:1,f},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(R){var I=this;return I._x=R._x,I._y=R._y,I._z=R._z,I._w=R._w,I},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this},dot:function(I){return this._x*I._x+this._y*I._y+this._z*I._z+this._w*I._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var P=this.length();return 0===P?(this._x=0,this._y=0,this._z=0,this._w=1):(P=1/P,this._x=this._x*P,this._y=this._y*P,this._z=this._z*P,this._w=this._w*P),this},fromArray:function(X,J){J===H&&(J=0);var Q=this;return Q._x=X[J],Q._y=X[J+1],Q._z=X[J+2],Q._w=X[J+3],this},slerp:function(_,L){if(0===L)return this;if(1===L)return this.copy(_);var b=this._x,z=this._y,k=this._z,X=this._w,j=X*_._w+b*_._x+z*_._y+k*_._z;if(0>j?(this._w=-_._w,this._x=-_._x,this._y=-_._y,this._z=-_._z,j=-j):this.copy(_),j>=1)return this._w=X,this._x=b,this._y=z,this._z=k,this;var J=Math.sqrt(1-j*j);if(Math.abs(J)<.001)return this._w=.5*(X+this._w),this._x=.5*(b+this._x),this._y=.5*(z+this._y),this._z=.5*(k+this._z),this;var T=Math.atan2(J,j),Z=Math.sin((1-L)*T)/J,G=Math.sin(L*T)/J;return this._w=X*Z+this._w*G,this._x=b*Z+this._x*G,this._y=z*Z+this._y*G,this._z=k*Z+this._z*G,this},equals:function(J){return J._x===this._x&&J._y===this._y&&J._z===this._z&&J._w===this._w},setFromAxisAngle:function(R,q){var f=q/2,c=Math.sin(f);return this._x=R.x*c,this._y=R.y*c,this._z=R.z*c,this._w=Math.cos(f),this},setFromEuler:function(O){var K=O._x,k=O._y,o=O._z,S=O._order,D=Math.cos,t=Math.sin,Y=D(K/2),I=D(k/2),i=D(o/2),R=t(K/2),G=t(k/2),L=t(o/2);return"XYZ"===S?(this._x=R*I*i+Y*G*L,this._y=Y*G*i-R*I*L,this._z=Y*I*L+R*G*i,this._w=Y*I*i-R*G*L):"YXZ"===S?(this._x=R*I*i+Y*G*L,this._y=Y*G*i-R*I*L,this._z=Y*I*L-R*G*i,this._w=Y*I*i+R*G*L):"ZXY"===S?(this._x=R*I*i-Y*G*L,this._y=Y*G*i+R*I*L,this._z=Y*I*L+R*G*i,this._w=Y*I*i-R*G*L):"ZYX"===S?(this._x=R*I*i-Y*G*L,this._y=Y*G*i+R*I*L,this._z=Y*I*L-R*G*i,this._w=Y*I*i+R*G*L):"YZX"===S?(this._x=R*I*i+Y*G*L,this._y=Y*G*i+R*I*L,this._z=Y*I*L-R*G*i,this._w=Y*I*i-R*G*L):"XZY"===S&&(this._x=R*I*i-Y*G*L,this._y=Y*G*i-R*I*L,this._z=Y*I*L+R*G*i,this._w=Y*I*i+R*G*L),this},setFromRotationMatrix:function(K){var n,D=K.el,f=D[0],L=D[4],l=D[8],I=D[1],W=D[5],Q=D[9],B=D[2],Y=D[6],s=D[10],g=f+W+s;return g>0?(n=.5/Math.sqrt(g+1),this._w=.25/n,this._x=(Y-Q)*n,this._y=(l-B)*n,this._z=(I-L)*n):f>W&&f>s?(n=2*Math.sqrt(1+f-W-s),this._w=(Y-Q)/n,this._x=.25*n,this._y=(L+I)/n,this._z=(l+B)/n):W>s?(n=2*Math.sqrt(1+W-f-s),this._w=(l-B)/n,this._x=(L+I)/n,this._y=.25*n,this._z=(Q+Y)/n):(n=2*Math.sqrt(1+s-f-W),this._w=(I-L)/n,this._x=(l+B)/n,this._y=(Q+Y)/n,this._z=.25*n),this},setFromToVectors:function(){var l,q;return function(v,z){return l===H&&(l=new ng),q=v.dot(z)+1,1e-7>q?(q=0,Math.abs(v.x)>Math.abs(v.z)?l.set(-v.y,v.x,0):l.set(0,-v.z,v.y)):l.crossVectors(v,z),this._x=l.x,this._y=l.y,this._z=l.z,this._w=q,this.normalize()}}(),setFromUnitVectors:function(){var L,z,C=1e-6;return function(K,Y){return L===H&&(L=new ng),z=K.dot(Y)+1,C>z?(z=0,Math.abs(K.x)>Math.abs(K.z)?L.set(-K.y,K.x,0):L.set(0,-K.z,K.y)):L.crossVectors(K,Y),this._x=L.x,this._y=L.y,this._z=L.z,this._w=z,this.normalize()}}(),multiply:function(a){return this.multiplyQuaternions(this,a)},premultiply:function(O){return this.multiplyQuaternions(O,this)},multiplyQuaternions:function(e,M){var _=e._x,K=e._y,D=e._z,r=e._w,k=M._x,y=M._y,I=M._z,F=M._w;return this._x=_*F+r*k+K*I-D*y,this._y=K*F+r*y+D*k-_*I,this._z=D*F+r*I+_*y-K*k,this._w=r*F-_*k-K*y-D*I,this},toArray:function(e,N){return e||(e=[]),N=N||0,e[N]=this._x,e[N+1]=this._y,e[N+2]=this._z,e[N+3]=this._w,e}}),$d.slerpFlat=function(r,q,m,a,N,h,e){var t=m[a+0],R=m[a+1],W=m[a+2],n=m[a+3],J=N[h+0],y=N[h+1],C=N[h+2],Z=N[h+3];if(0===e)return r[q+0]=t,r[q+1]=R,r[q+2]=W,r[q+3]=n,void 0;if(1===e)return r[q+0]=J,r[q+1]=y,r[q+2]=C,r[q+3]=Z,void 0;if(n!==Z||t!==J||R!==y||W!==C){var Y=1-e,$=t*J+R*y+W*C+n*Z,X=$>=0?1:-1,P=1-$*$;if(P>Number.EPSILON){var l=Math.sqrt(P),w=Math.atan2(l,$*X);Y=Math.sin(Y*w)/l,e=Math.sin(e*w)/l}var H=e*X;if(t=t*Y+J*H,R=R*Y+y*H,W=W*Y+C*H,n=n*Y+Z*H,Y===1-e){var E=1/Math.sqrt(t*t+R*R+W*W+n*n);t*=E,R*=E,W*=E,n*=E}}r[q]=t,r[q+1]=R,r[q+2]=W,r[q+3]=n};var pq=L.Math.Vector4=function(f,v,M,W){this.x=f||0,this.y=v||0,this.z=M||0,this.w=W!==H?W:1};b.assign(pq.prototype,{isVector4:!0,set:function(n,d,H,m){return this.x=n,this.y=d,this.z=H,this.w=m,this},setScalar:function(O){return this.x=O,this.y=O,this.z=O,this.w=O,this},setX:function(W){return this.x=W,this},setY:function(f){return this.y=f,this
},setZ:function(h){return this.z=h,this},setW:function(E){return this.w=E,this},setComponent:function(o,g){switch(o){case 0:this.x=g;break;case 1:this.y=g;break;case 2:this.z=g;break;case 3:this.w=g;break;default:throw new Error("index is out of range: "+o)}return this},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(c){return this.x=c.x,this.y=c.y,this.z=c.z,this.w=c.w!==H?c.w:1,this},add:function(t,C){return C!==H?this.addVectors(t,C):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(H){return this.x+=H,this.y+=H,this.z+=H,this.w+=H,this},addVectors:function(E,u){return this.x=E.x+u.x,this.y=E.y+u.y,this.z=E.z+u.z,this.w=E.w+u.w,this},addScaledVector:function(N,C){return this.x+=N.x*C,this.y+=N.y*C,this.z+=N.z*C,this.w+=N.w*C,this},sub:function(M,i){return i!==H?this.subVectors(M,i):(this.x-=M.x,this.y-=M.y,this.z-=M.z,this.w-=M.w,this)},subScalar:function(B){return this.x-=B,this.y-=B,this.z-=B,this.w-=B,this},subVectors:function(M,h){return this.x=M.x-h.x,this.y=M.y-h.y,this.z=M.z-h.z,this.w=M.w-h.w,this},multiplyScalar:function(d){return this.x*=d,this.y*=d,this.z*=d,this.w*=d,this},applyMatrix4:function(h){var q=this.x,r=this.y,n=this.z,Z=this.w,e=h.el;return this.x=e[0]*q+e[4]*r+e[8]*n+e[12]*Z,this.y=e[1]*q+e[5]*r+e[9]*n+e[13]*Z,this.z=e[2]*q+e[6]*r+e[10]*n+e[14]*Z,this.w=e[3]*q+e[7]*r+e[11]*n+e[15]*Z,this},divideScalar:function(f){return this.multiplyScalar(1/f)},setAxisAngleFromQuaternion:function(c){this.w=2*Math.acos(c.w);var N=Math.sqrt(1-c.w*c.w);return 1e-4>N?(this.x=1,this.y=0,this.z=0):(this.x=c.x/N,this.y=c.y/N,this.z=c.z/N),this},setAxisAngleFromRotationMatrix:function(g){var o,u,x,I,b=.01,D=.1,N=g.el,d=N[0],s=N[4],p=N[8],n=N[1],U=N[5],M=N[9],c=N[2],T=N[6],$=N[10];if(Math.abs(s-n)<b&&Math.abs(p-c)<b&&Math.abs(M-T)<b){if(Math.abs(s+n)<D&&Math.abs(p+c)<D&&Math.abs(M+T)<D&&Math.abs(d+U+$-3)<D)return this.set(1,0,0,0),this;o=Math.PI;var E=(d+1)/2,B=(U+1)/2,J=($+1)/2,G=(s+n)/4,A=(p+c)/4,O=(M+T)/4;return E>B&&E>J?b>E?(u=0,x=.707106781,I=.707106781):(u=Math.sqrt(E),x=G/u,I=A/u):B>J?b>B?(u=.707106781,x=0,I=.707106781):(x=Math.sqrt(B),u=G/x,I=O/x):b>J?(u=.707106781,x=.707106781,I=0):(I=Math.sqrt(J),u=A/I,x=O/I),this.set(u,x,I,o),this}var r=Math.sqrt((T-M)*(T-M)+(p-c)*(p-c)+(n-s)*(n-s));return Math.abs(r)<.001&&(r=1),this.x=(T-M)/r,this.y=(p-c)/r,this.z=(n-s)/r,this.w=Math.acos((d+U+$-1)/2),this},min:function(d){return this.x=Math.min(this.x,d.x),this.y=Math.min(this.y,d.y),this.z=Math.min(this.z,d.z),this.w=Math.min(this.w,d.w),this},max:function(c){return this.x=Math.max(this.x,c.x),this.y=Math.max(this.y,c.y),this.z=Math.max(this.z,c.z),this.w=Math.max(this.w,c.w),this},clamp:function(o,u){return this.x=Math.max(o.x,Math.min(u.x,this.x)),this.y=Math.max(o.y,Math.min(u.y,this.y)),this.z=Math.max(o.z,Math.min(u.z,this.z)),this.w=Math.max(o.w,Math.min(u.w,this.w)),this},clampScalar:function(){var u,n;return function(K,J){return u===H&&(u=new pq,n=new pq),u.set(K,K,K,K),n.set(J,J,J,J),this.clamp(u,n)}}(),clampLength:function(n,p){var A=this.length();return this.divideScalar(A||1).multiplyScalar(Math.max(n,Math.min(p,A)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(v){return this.x*v.x+this.y*v.y+this.z*v.z+this.w*v.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(i){return this.normalize().multiplyScalar(i)},lerp:function(X,U){return this.x+=(X.x-this.x)*U,this.y+=(X.y-this.y)*U,this.z+=(X.z-this.z)*U,this.w+=(X.w-this.w)*U,this},lerpVectors:function(g,M,N){return this.subVectors(M,g).multiplyScalar(N).add(g)},equals:function(S){return S.x===this.x&&S.y===this.y&&S.z===this.z&&S.w===this.w},fromArray:function(j,X){return X===H&&(X=0),this.x=j[X],this.y=j[X+1],this.z=j[X+2],this.w=j[X+3],this},toArray:function(c,j){return c===H&&(c=[]),j===H&&(j=0),c[j]=this.x,c[j+1]=this.y,c[j+2]=this.z,c[j+3]=this.w,c},fromBufferAttribute:function($,u){return this.x=$.getX(u),this.y=$.getY(u),this.z=$.getZ(u),this.w=$.getW(u),this}});var ng=L.Math.Vector3=function(r,b,R){r===H?(this.x=0,this.y=0,this.z=0):"object"==typeof r?this.copy(r):this.set(r,b==H?r:b,R==H?r:R)},dk=L.Math.Vector3;b.assign(ng.prototype,{isNaN:function(){return isNaN(this.x)||isNaN(this.y)||isNaN(this.z)},set:function(D,h,Y){return this.x=D,this.y=h,this.z=Y,this},equals:function(Q){return Q&&this.x===Q.x&&this.y===Q.y&&this.z===Q.z},setScalar:function($){return this.x=$,this.y=$,this.z=$,this},setX:function(V){return this.x=V,this},setY:function(z){return this.y=z,this},setZ:function(M){return this.z=M,this},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(N){return N.x===H?(this.x=N[0],this.y=N[1],this.z=N[2]):(this.x=N.x,this.y=N.y,this.z=N.z||0),this},add:function(U){return this.x+=U.x,this.y+=U.y,this.z+=U.z,this},addScalar:function(z){return this.x+=z,this.y+=z,this.z+=z,this},addVectors:function(v,I){return this.x=v.x+I.x,this.y=v.y+I.y,this.z=v.z+I.z,this},addScaledVector:function(u,H){return this.x+=u.x*H,this.y+=u.y*H,this.z+=u.z*H,this},sub:function(H){return this.x-=H.x,this.y-=H.y,this.z-=H.z,this},subScalar:function(F){return this.x-=F,this.y-=F,this.z-=F,this},subVectors:function(K,I){return this.x=K.x-I.x,this.y=K.y-I.y,this.z=K.z-I.z,this},divide:function($){return this.x/=$.x,this.y/=$.y,this.z/=$.z,this},multiply:function(y){return this.x*=y.x,this.y*=y.y,this.z*=y.z,this},multiplyScalar:function(p){return this.x*=p,this.y*=p,this.z*=p,this},divideScalar:function(C){if(0!==C){var l=1/C;this.x*=l,this.y*=l,this.z*=l}else this.x=0,this.y=0,this.z=0;return this},distanceTo:function(d){return Math.sqrt(this.distanceToSquared(d))},distanceToSquared:function(L){var t=this.x-L.x,M=this.y-L.y,v=this.z-L.z;return t*t+M*M+v*v},distanceToSquared2:function(L){var O=this.x-L[0],N=this.y-L[1],m=this.z-L[2];return O*O+N*N+m*m},divideVectors:function(C,o){return this.x=C.x/o.x,this.y=C.y/o.y,this.z=C.z/o.z,this},multiplyVectors:function(E,P){return this.x=E.x*P.x,this.y=E.y*P.y,this.z=E.z*P.z,this},transformDirection:function(e){var q=this.x,k=this.y,C=this.z,z=e.el;return this.x=z[0]*q+z[4]*k+z[8]*C,this.y=z[1]*q+z[5]*k+z[9]*C,this.z=z[2]*q+z[6]*k+z[10]*C,this.normalize()},applyAxisAngle:function(){var L=new $d;return function(Z,O){return this.applyQuaternion(L.setFromAxisAngle(Z,O))}}(),applyEuler:function(){var B=new $d;return function(l){return this.applyQuaternion(B.setFromEuler(l))}}(),applyQuaternion:function(Y){var c=this.x,E=this.y,l=this.z,z=Y._x,B=Y._y,d=Y._z,R=Y._w,D=R*c+B*l-d*E,q=R*E+d*c-z*l,m=R*l+z*E-B*c,H=-z*c-B*E-d*l;return this.x=D*R+H*-z+q*-d-m*-B,this.y=q*R+H*-B+m*-z-D*-d,this.z=m*R+H*-d+D*-B-q*-z,this},applyMatrix4:function(H){var L=this.x,$=this.y,R=this.z,E=H.el,I=1/(E[3]*L+E[7]*$+E[11]*R+E[15]);return this.x=(E[0]*L+E[4]*$+E[8]*R+E[12])*I,this.y=(E[1]*L+E[5]*$+E[9]*R+E[13])*I,this.z=(E[2]*L+E[6]*$+E[10]*R+E[14])*I,this},applyMatrix3:function(G){var B=this.x,d=this.y,v=this.z,x=G.el;return this.x=x[0]*B+x[3]*d+x[6]*v,this.y=x[1]*B+x[4]*d+x[7]*v,this.z=x[2]*B+x[5]*d+x[8]*v,this},applyNormalMatrix:function(I){return this.applyMatrix3(I).normalize()},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},reflect:function(){var s=new ng;return function(C){return this.sub(s.copy(C).multiplyScalar(2*this.dot(C)))}}(),dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){var k=this.length();return k?this.multiplyScalar(1/k):this},setLength:function(Z){return this.normalize().multiplyScalar(Z)},fromArray:function(X,V){return V===H&&(V=0),this.x=X[V],this.y=X[V+1],this.z=X[V+2],this},toArray:function(m,s){return m===H&&(m=[0,0,0]),s===H&&(s=0),m[s]=this.x,m[s+1]=this.y,m[s+2]=this.z,m},cross:function(_){return this.crossVectors(this,_)},angleTo:function(A){var O=this.dot(A)/Math.sqrt(this.lengthSq()*A.lengthSq()),q=1e-6;return O>1+q||-1-q>O?0:Math.acos(Of.clamp(O,-1,1))},lerp:function(T,R){return this.x+=(T.x-this.x)*R,this.y+=(T.y-this.y)*R,this.z+=(T.z-this.z)*R,this},lerpVectors:function(F,n,E){return this.subVectors(n,F).multiplyScalar(E).add(F)},crossVectors:function(T,R){var S=T.x,u=T.y,I=T.z,$=R.x,r=R.y,A=R.z;return this.x=u*A-I*r,this.y=I*$-S*A,this.z=S*r-u*$,this},min:function(w){return this.x=Math.min(this.x,w.x),this.y=Math.min(this.y,w.y),this.z=Math.min(this.z,w.z),this},max:function(U){return this.x=Math.max(this.x,U.x),this.y=Math.max(this.y,U.y),this.z=Math.max(this.z,U.z),this},setFromMatrixPosition:function(O){return this.setFromMatrixColumn(O,3)},setFromMatrixScale:function(b){var v=this.setFromMatrixColumn(b,0).length(),x=this.setFromMatrixColumn(b,1).length(),Y=this.setFromMatrixColumn(b,2).length();return this.x=v,this.y=x,this.z=Y,this},setFromMatrixColumn:function(R,f){return this.fromArray(R.el,4*f)}}),ng.UP=new ng(0,1,0),ng.AxisX=new ng(1,0,0),ng.AxisY=new ng(0,1,0),ng.AxisZ=new ng(0,0,1),ng.normalizeArray=function(){var g=new ng;return function(X){return g.copy(X).normalize().toArray()}}(),function(){var N=new ng;return function(t,$){return $=$||N,$.x=t[0],$.y=t[1],$.z=t[2],$}}();var Sf=L.Math.Vector2=function(X,C,T){"object"==typeof X&&(X.x!=H?(C=X.y,T=X.e,X=X.x):(T=X[2],C=X[1],X=X[0])),this.set(X||0,C||0,T)};Sf.prototype={},Sf.prototype.constructor=Sf;var uq=Sf;b.defineProperties(Sf.prototype,{width:{get:function(){return this.x},set:function(d){this.x=d}},height:{get:function(){return this.y},set:function(f){this.y=f}}}),Sf.prototype.clone=function(){return new Sf(this.x,this.y,this.e)},Sf.prototype.copy=function(x){return this.set(x.x,x.y,x.e),this},Sf.prototype.equals=function(M){return M.x===this.x&&M.y===this.y&&M.e===this.e},Sf.prototype.set=function(f,N,y){return this.x=f||0,this.y=N||(0!==N?this.x:0),y!=H&&(this.e=y),this},Sf.prototype.setScalar=function(D){return this.x=D,this.y=D,this.e=D,this},Sf.prototype.setX=function(U){return this.x=U||0,this},Sf.prototype.setY=function(A){return this.y=A||0,this},Sf.prototype.setE=function(r){return this.e=r||0,this},Sf.prototype.add=function(p){return this.x+=p.x,this.y+=p.y,this},Sf.prototype.addVectors=function(d,s){return this.x=d.x+s.x,this.y=d.y+s.y,this},Sf.prototype.addScalar=function(A){return this.x+=A,this.y+=A,this},Sf.prototype.addScaledVector=function(A,E){return this.x+=A.x*E,this.y+=A.y*E,this},Sf.prototype.sub=function(l){return this.x-=l.x,this.y-=l.y,this},Sf.prototype.subScalar=function(g){return this.x-=g,this.y-=g,this},Sf.prototype.subVectors=function(K,J){return this.x=K.x-J.x,this.y=K.y-J.y,this},Sf.prototype.multiply=function(Z){return this.x*=Z.x,this.y*=Z.y,this},Sf.prototype.multiplyScalar=function(k){return this.x*=k,this.y*=k,this},Sf.prototype.divide=function(A){return this.x/=A.x,this.y/=A.y,this},Sf.prototype.divideScalar=function(C){return this.multiplyScalar(1/C)},Sf.prototype.min=function(W){return this.x=Math.min(this.x,W.x),this.y=Math.min(this.y,W.y),this},Sf.prototype.max=function(d){return this.x=Math.max(this.x,d.x),this.y=Math.max(this.y,d.y),this},Sf.prototype.fromArray=function(A,G){return G===H&&(G=0),this.x=A[G],this.y=A[G+1],this},Sf.prototype.clamp=function(j,I){return this.x=Math.max(j.x,Math.min(I.x,this.x)),this.y=Math.max(j.y,Math.min(I.y,this.y)),this},Sf.prototype.clampScalar=function(){var l,L;return function(G,E){return l===H&&(l=new Sf,L=new Sf),l.set(G,G),L.set(E,E),this.clamp(l,L)}}(),Sf.prototype.clampLength=function(G,R){var c=this.length();return this.multiplyScalar(Math.max(G,Math.min(R,c))/c)},Sf.prototype.dot=function(I){return this.x*I.x+this.y*I.y},Sf.prototype.cross=function(z){return this.x*z.y-this.y*z.x},Sf.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},Sf.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},Sf.prototype.normalize=function(){return this.divideScalar(this.length())},Sf.prototype.angle=function(){var s=Math.atan2(this.y,this.x);return 0>s&&(s+=2*Math.PI),s},Sf.prototype.distanceTo=function(j){return Math.sqrt(this.distanceToSquared(j))},Sf.prototype.distanceToSquared=function(i){var U=this.x-i.x,H=this.y-i.y;return U*U+H*H},Sf.prototype.isNearEnough=function(c){return this.distanceToSquared(c)<1e-8},Sf.prototype.setLength=function(o){var R=this.length();return R?this.multiplyScalar(o/R):this},Sf.prototype.lerp=function(s,I){return this.x+=(s.x-this.x)*I,this.y+=(s.y-this.y)*I,"number"==typeof s.e&&"number"==typeof this.e&&(this.e+=(s.e-this.e)*I),this},Sf.prototype.lerpVectors=function(O,R,m){return this.subVectors(R,O).multiplyScalar(m).add(O)},Sf.prototype.rotateAround=function(B,K){var Y=B?B.x:0,O=B?B.y:0,M=Math.cos(K),z=Math.sin(K),h=this.x-Y,i=this.y-O;return this.x=h*M-i*z+Y,this.y=h*z+i*M+O,this};var Gq=L.Math.Matrix3=function(){this.el=[1,0,0,0,1,0,0,0,1]};b.assign(Gq.prototype,{isMatrix3:!0,set:function(i,b,n,a,G,R,Z,D,H){var _=this.el;return _[0]=i,_[1]=a,_[2]=Z,_[3]=b,_[4]=G,_[5]=D,_[6]=n,_[7]=R,_[8]=H,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.el)},copy:function(o){var i=this.el,E=o.el;return i[0]=E[0],i[1]=E[1],i[2]=E[2],i[3]=E[3],i[4]=E[4],i[5]=E[5],i[6]=E[6],i[7]=E[7],i[8]=E[8],this},setFromMatrix4:function(b){var g=b.el;return this.set(g[0],g[4],g[8],g[1],g[5],g[9],g[2],g[6],g[10]),this},applyToBufferAttribute:function(){var E=new ng;return function(d){for(var x=0,X=d.count;X>x;x++)E.x=d.getX(x),E.y=d.getY(x),E.z=d.getZ(x),E.applyMatrix3(this),d.setXYZ(x,E.x,E.y,E.z);return d}}(),multiply:function(Z){return this.multiplyMatrices(this,Z)},premultiply:function(A){return this.multiplyMatrices(A,this)},multiplyMatrices:function(r,$){var f=r.el,H=$.el,Q=this.el,y=f[0],m=f[3],z=f[6],B=f[1],p=f[4],M=f[7],V=f[2],d=f[5],Z=f[8],k=H[0],J=H[3],E=H[6],g=H[1],G=H[4],R=H[7],h=H[2],q=H[5],Y=H[8];return Q[0]=y*k+m*g+z*h,Q[3]=y*J+m*G+z*q,Q[6]=y*E+m*R+z*Y,Q[1]=B*k+p*g+M*h,Q[4]=B*J+p*G+M*q,Q[7]=B*E+p*R+M*Y,Q[2]=V*k+d*g+Z*h,Q[5]=V*J+d*G+Z*q,Q[8]=V*E+d*R+Z*Y,this},multiplyScalar:function(A){var y=this.el;return y[0]*=A,y[3]*=A,y[6]*=A,y[1]*=A,y[4]*=A,y[7]*=A,y[2]*=A,y[5]*=A,y[8]*=A,this},determinant:function(){var z=this.el,x=z[0],y=z[1],d=z[2],K=z[3],Q=z[4],A=z[5],v=z[6],o=z[7],g=z[8];return x*Q*g-x*A*o-y*K*g+y*A*v+d*K*o-d*Q*v},getInverse:function(t){var C=t.el,Q=this.el,B=C[0],M=C[1],c=C[2],I=C[3],Z=C[4],s=C[5],x=C[6],f=C[7],R=C[8],w=R*Z-s*f,F=s*x-R*I,n=f*I-Z*x,V=B*w+M*F+c*n;if(0===V)return this.identity();var h=1/V;return Q[0]=w*h,Q[1]=(c*f-R*M)*h,Q[2]=(s*M-c*Z)*h,Q[3]=F*h,Q[4]=(R*B-c*x)*h,Q[5]=(c*I-s*B)*h,Q[6]=n*h,Q[7]=(M*x-f*B)*h,Q[8]=(Z*B-M*I)*h,this},transpose:function(){var Y,D=this.el;return Y=D[1],D[1]=D[3],D[3]=Y,Y=D[2],D[2]=D[6],D[6]=Y,Y=D[5],D[5]=D[7],D[7]=Y,this},getNormalMatrix:function(R){return this.setFromMatrix4(R).getInverse(this).transpose()},transposeIntoArray:function(w){var x=this.el;return w[0]=x[0],w[1]=x[3],w[2]=x[6],w[3]=x[1],w[4]=x[4],w[5]=x[7],w[6]=x[2],w[7]=x[5],w[8]=x[8],this},setUvTransform:function(a,$,C,U,c,d,W){var S=Math.cos(c),F=Math.sin(c);this.set(C*S,C*F,-C*(S*d+F*W)+d+a,-U*F,U*S,-U*(-F*d+S*W)+W+$,0,0,1)},scale:function(W,d){var u=this.el;return u[0]*=W,u[3]*=W,u[6]*=W,u[1]*=d,u[4]*=d,u[7]*=d,this},rotate:function(V){var U=Math.cos(V),u=Math.sin(V),I=this.el,T=I[0],q=I[3],g=I[6],x=I[1],K=I[4],R=I[7];return I[0]=U*T+u*x,I[3]=U*q+u*K,I[6]=U*g+u*R,I[1]=-u*T+U*x,I[4]=-u*q+U*K,I[7]=-u*g+U*R,this},translate:function(h,D){var Q=this.el;return Q[0]+=h*Q[2],Q[3]+=h*Q[5],Q[6]+=h*Q[8],Q[1]+=D*Q[2],Q[4]+=D*Q[5],Q[7]+=D*Q[8],this},equals:function(O){for(var N=this.el,Y=O.el,C=0;9>C;C++)if(N[C]!==Y[C])return!1;return!0},fromArray:function(w,S){S===H&&(S=0);for(var X=0;9>X;X++)this.el[X]=w[X+S];return this},toArray:function(f,A){f===H&&(f=[]),A===H&&(A=0);var F=this.el;return f[A]=F[0],f[A+1]=F[1],f[A+2]=F[2],f[A+3]=F[3],f[A+4]=F[4],f[A+5]=F[5],f[A+6]=F[6],f[A+7]=F[7],f[A+8]=F[8],f}});var jq=L.Math.Plane=function(x,q){this.normal=x!==H?x:new ng(1,0,0),this.constant=q!==H?q:0};b.assign(jq.prototype,{set:function(r,n){return this.normal.copy(r),this.constant=n,this},setComponents:function(I,h,N,J){return this.normal.set(I,h,N),this.constant=J,this},setFromNormalAndCoplanarPoint:function(b,O){return this.normal.copy(b),this.constant=-O.dot(this.normal),this},setFromCoplanarPoints:function(){var H=new ng,c=new ng;return function(Z,F,v){var a=H.subVectors(v,F).cross(c.subVectors(Z,F)).normalize();return this.setFromNormalAndCoplanarPoint(a,Z),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(a){return this.normal.copy(a.normal),this.constant=a.constant,this},normalize:function(){var f=1/this.normal.length();return this.normal.multiplyScalar(f),this.constant*=f,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(p){return this.normal.dot(p)+this.constant},distanceToSphere:function(j){return this.distanceToPoint(j.center)-j.radius},projectPoint:function(Z,l){return l===H&&(l=new ng),l.copy(this.normal).multiplyScalar(-this.distanceToPoint(Z)).add(Z)},intersectLine:function(){var S=new ng;return function(Z,m){m===H&&(m=new ng);var x=Z.delta(S),s=this.normal.dot(x);if(0===s)return 0===this.distanceToPoint(Z.start)?m.copy(Z.start):H;var e=-(Z.start.dot(this.normal)+this.constant)/s;return 0>e||e>1?H:m.copy(x).multiplyScalar(e).add(Z.start)}}(),intersectsLine:function(K){var z=this.distanceToPoint(K.start),a=this.distanceToPoint(K.end);return 0>z&&a>0||0>a&&z>0},intersectsBox:function(V){return V.intersectsPlane(this)},intersectsSphere:function(I){return I.intersectsPlane(this)},coplanarPoint:function(W){return W===H&&(W=new ng),W.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new ng,Y=new Gq;return function(Q,u){var Z=u||Y.getNormalMatrix(Q),H=this.coplanarPoint(t).applyMatrix4(Q),k=this.normal.applyMatrix3(Z).normalize();return this.constant=-H.dot(k),this}}(),translate:function(I){return this.constant-=I.dot(this.normal),this},equals:function(F){return F.normal.equals(this.normal)&&F.constant===this.constant}});var Aq=L.Math.Ray=function(P,d){this.origin=P!==H?P.clone():new ng,this.direction=d!==H?d.clone():new ng};b.assign(Aq.prototype,{set:function(e,D){return this.origin.copy(e),this.direction.copy(D),this},clone:function(){return(new this.constructor).copy(this)},copy:function(c){return this.origin.copy(c.origin),this.direction.copy(c.direction),this.maxHitLen=c.maxHitLen,this},at:function(e,c){var R=c||new ng;return R.copy(this.direction).multiplyScalar(e).add(this.origin)},setMaxHitLength:function(h){this.maxHitLen=h},lookAt:function(i){return this.direction.copy(i).sub(this.origin).normalize(),this},applyMatrix4:function(a){var r=this.maxHitLen;if(r){var k=this.direction.clone().multiplyScalar(r).add(this.origin);k.applyMatrix4(a)}return this.origin.applyMatrix4(a),this.direction.transformDirection(a),r&&(this.maxHitLen=this.origin.distanceTo(k)),this},distanceToPlane:function(A){var u=A.normal.dot(this.direction);if(0===u)return 0===A.distanceToPoint(this.origin)?0:null;var K=-(this.origin.dot(A.normal)+A.constant)/u;return K>=0?K:null},intersectPlane:function(T,i){var z=this.distanceToPlane(T);return null===z?null:this.at(z,i)},intersectSphere:function(){var V=new ng;return function(c,O){V.subVectors(c.center,this.origin);var b=V.dot(this.direction),k=V.dot(V)-b*b,d=c.radius*c.radius;if(k>d)return null;var X=Math.sqrt(d-k),r=b-X,f=b+X;return 0>r&&0>f?null:0>r?this.at(f,O):this.at(r,O)}}(),intersectEllipsoid:function(){var A=new ng,K=new ng;return function(o,Q){A.subVectors(o.center,this.origin),A.divide(o.radius),K.divideVectors(this.direction,o.radius);var F=K.lengthSq(),t=A.dot(K),X=A.dot(A)*F-t*t;if(X>F)return null;var i=Math.sqrt(F-X),y=(t-i)/F,p=(t+i)/F;return 0>y&&0>p?null:0>y?this.at(p,Q):this.at(y,Q)}}(),intersectBox:function(W,s){var d,V,t,I,D,L,K=1/this.direction.x,O=1/this.direction.y,Z=1/this.direction.z,B=this.origin;if(K>=0?(d=(W.min.x-B.x)*K,V=(W.max.x-B.x)*K):(d=(W.max.x-B.x)*K,V=(W.min.x-B.x)*K),O>=0?(t=(W.min.y-B.y)*O,I=(W.max.y-B.y)*O):(t=(W.max.y-B.y)*O,I=(W.min.y-B.y)*O),d>I||t>V)return null;if((t>d||d!==d)&&(d=t),(V>I||V!==V)&&(V=I),Z>=0?(D=(W.min.z-B.z)*Z,L=(W.max.z-B.z)*Z):(D=(W.max.z-B.z)*Z,L=(W.min.z-B.z)*Z),d>L||D>V)return null;if((D>d||d!==d)&&(d=D),(V>L||V!==V)&&(V=L),0>V)return null;var S=d>=0?d:V,$=this.maxHitLen;return $&&S>$?null:this.at(S,s)},intersectTriangle:function(){var Q=new ng,f=new ng,W=new ng,P=new ng;return function(j,R,x,i,y,k){f.subVectors(R,j),W.subVectors(x,j),P.crossVectors(f,W);var N=y||0,$=this.direction.dot(P);if($>N){if(i)return null}else if($>=-N)return null;var C=1/$;Q.subVectors(this.origin,j);var A=C*this.direction.dot(W.crossVectors(Q,W));if(-N>A)return null;var F=C*this.direction.dot(f.cross(Q));if(-N>F||A+F>1+N)return null;var p=-C*Q.dot(P);if(0>p)return null;var Y=this.maxHitLen;return Y&&p>Y?null:this.at(p,k)}}()});var qr=L.Math.Box3=function(p,w){this.min=p!==H?p:new ng(1/0,1/0,1/0),this.max=w!==H?w:new ng(-1/0,-1/0,-1/0)};b.assign(qr.prototype,{set:function(d,b){return this.min.copy(d),this.max.copy(b),this},setFromArray:function(N){for(var Z=1/0,J=1/0,I=1/0,T=-1/0,t=-1/0,E=-1/0,f=0,B=N.length;B>f;f+=3){var e=N[f],n=N[f+1],M=N[f+2];Z>e&&(Z=e),J>n&&(J=n),I>M&&(I=M),e>T&&(T=e),n>t&&(t=n),M>E&&(E=M)}return this.min.set(Z,J,I),this.max.set(T,t,E),this},setFromPoints:function(w){this.makeEmpty();for(var l=0,r=w.length;r>l;l++)this.expandByPoint(w[l]);return this},clone:function(){return(new this.constructor).copy(this)},intersectsBox:function(S){return S.max.x<this.min.x||S.min.x>this.max.x||S.max.y<this.min.y||S.min.y>this.max.y||S.max.z<this.min.z||S.min.z>this.max.z?!1:!0},copy:function(H){return this.min.copy(H.min),this.max.copy(H.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(j){return this.isEmpty()?j.set(0,0,0):j.addVectors(this.min,this.max).multiplyScalar(.5)},expandByPoint:function(P){return this.min.min(P),this.max.max(P),this},expandByBox:function(w){return this.min.min(w.min),this.max.max(w.max),this},applyMatrix4:function(){var t=[new ng,new ng,new ng,new ng,new ng,new ng,new ng,new ng];return function(H){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(H),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(H),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(H),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(H),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(H),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(H),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(H),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(H),this.setFromPoints(t),this)}}()});var Tm=L.Math.Sphere=function(X,n){this.center=X!==H?X:new ng,this.radius=n!==H?n:0};b.assign(Tm.prototype,{set:function($,n){return this.center.copy($),this.radius=n,this},setFromPoints:function(){var L=new qr;return function(e,G){var X=this.center;G!==H?X.copy(G):L.setFromPoints(e).getCenter(X);for(var N=0,v=0,J=e.length;J>v;v++)N=Math.max(N,X.distanceToSquared(e[v]));return this.radius=Math.sqrt(N),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(Y){return this.center.copy(Y.center),this.radius=Y.radius,this},empty:function(){return this.radius<=0},containsPoint:function(z){return z.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(i){return i.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var l=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=l*l},intersectsBox:function(F){return F.intersectsSphere(this)},intersectsPlane:function(k){return Math.abs(k.distanceToPoint(this.center))<=this.radius},clampPoint:function(p,N){var $=this.center.distanceToSquared(p);return N===H&&(N=new ng),N.copy(p),$>this.radius*this.radius&&(N.sub(this.center).normalize(),N.multiplyScalar(this.radius).add(this.center)),N},getBoundingBox:function(G){return G===H&&(G=new qr),G.set(this.center,this.center),G.expandByScalar(this.radius),G},applyMatrix4:function(p){return this.center.applyMatrix4(p),this.radius=this.radius*p.getMaxScaleOnAxis(),this},translate:function(B){return this.center.add(B),this},equals:function(F){return F.center.equals(this.center)&&F.radius===this.radius}});var hq=L.Math.Frustum=function(o,S,j,g,$,P){this.planes=[o!==H?o:new jq,S!==H?S:new jq,j!==H?j:new jq,g!==H?g:new jq,$!==H?$:new jq,P!==H?P:new jq]};b.assign(hq.prototype,{set:function(p,j,i,b,V,H){var q=this.planes;return q[0].copy(p),q[1].copy(j),q[2].copy(i),q[3].copy(b),q[4].copy(V),q[5].copy(H),this},clone:function(){return(new this.constructor).copy(this)},copy:function(q){for(var d=this.planes,k=0;6>k;k++)d[k].copy(q.planes[k]);return this},setFromMatrix:function(N){var P=this.planes,F=N.el,B=F[0],X=F[1],r=F[2],$=F[3],k=F[4],p=F[5],J=F[6],u=F[7],Z=F[8],t=F[9],S=F[10],D=F[11],_=F[12],o=F[13],A=F[14],R=F[15];return P[0].setComponents($-B,u-k,D-Z,R-_).normalize(),P[1].setComponents($+B,u+k,D+Z,R+_).normalize(),P[2].setComponents($+X,u+p,D+t,R+o).normalize(),P[3].setComponents($-X,u-p,D-t,R-o).normalize(),P[4].setComponents($-r,u-J,D-S,R-A).normalize(),P[5].setComponents($+r,u+J,D+S,R+A).normalize(),this},intersectsObject:function(){var T=new Tm;return function(F){var v=F.geometry;return null===v.boundingSphere&&v.computeBoundingSphere(),T.copy(v.boundingSphere).applyMatrix4(F.matrixWorld),this.intersectsSphere(T)}}(),intersectsSprite:function(){var E=new Tm;return function(h){return E.center.set(0,0,0),E.radius=.7071067811865476,E.applyMatrix4(h.matrixWorld),this.intersectsSphere(E)}}(),intersectsSphere:function(q){for(var Z=this.planes,u=q.center,Y=-q.radius,T=0;6>T;T++){var z=Z[T].distanceToPoint(u);if(Y>z)return!1}return!0},intersectsBox:function(){var V=new ng;return function(q){for(var N=this.planes,S=0;6>S;S++){var L=N[S];if(V.x=L.normal.x>0?q.max.x:q.min.x,V.y=L.normal.y>0?q.max.y:q.min.y,V.z=L.normal.z>0?q.max.z:q.min.z,L.distanceToPoint(V)<0)return!1}return!0}}(),containsPoint:function(E){for(var y=this.planes,J=0;6>J;J++)if(y[J].distanceToPoint(E)<0)return!1;return!0}});var kc=L.Math.Matrix4=function(){this.el=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};b.assign(kc.prototype,{isMatrix4:!0,set:function(R,G,p,D,f,y,Q,n,X,j,P,U,V,x,s,C){var J=this.el;return J[0]=R,J[4]=G,J[8]=p,J[12]=D,J[1]=f,J[5]=y,J[9]=Q,J[13]=n,J[2]=X,J[6]=j,J[10]=P,J[14]=U,J[3]=V,J[7]=x,J[11]=s,J[15]=C,this},clone:function(){return(new kc).fromArray(this.el)},fromArray:function(t,b){b===H&&(b=0);for(var G=this.el,g=0;16>g;g++)G[g]=t[g+b];return this},getElements:function(){return this.el},scale:function(e){var Q=this.el,w=e.x,I=e.y,E=e.z;return Q[0]*=w,Q[4]*=I,Q[8]*=E,Q[1]*=w,Q[5]*=I,Q[9]*=E,Q[2]*=w,Q[6]*=I,Q[10]*=E,Q[3]*=w,Q[7]*=I,Q[11]*=E,this},translate:function(d){var J=this.el,e=d.x||0,C=d.y||0,v=d.z||0;return J[12]+=J[0]*e+J[4]*C+J[8]*v,J[13]+=J[1]*e+J[5]*C+J[9]*v,J[14]+=J[2]*e+J[6]*C+J[10]*v,J[15]+=J[3]*e+J[7]*C+J[11]*v,this},rotate:function(){var M=new kc;return function(D){return M.makeRotationFromQuaternion(D),this.multiply(M)}}(),makeRotationFromEuler:function(X){var q=this.el,w=X._x,C=X._y,P=X._z,B=X._order,l=Math.cos(w),K=Math.sin(w),Q=Math.cos(C),h=Math.sin(C),S=Math.cos(P),n=Math.sin(P);if("XYZ"===B){var o=l*S,v=l*n,T=K*S,M=K*n;q[0]=Q*S,q[4]=-Q*n,q[8]=h,q[1]=v+T*h,q[5]=o-M*h,q[9]=-K*Q,q[2]=M-o*h,q[6]=T+v*h,q[10]=l*Q}else if("YXZ"===B){var d=Q*S,a=Q*n,m=h*S,x=h*n;q[0]=d+x*K,q[4]=m*K-a,q[8]=l*h,q[1]=l*n,q[5]=l*S,q[9]=-K,q[2]=a*K-m,q[6]=x+d*K,q[10]=l*Q}else if("ZXY"===B){var d=Q*S,a=Q*n,m=h*S,x=h*n;q[0]=d-x*K,q[4]=-l*n,q[8]=m+a*K,q[1]=a+m*K,q[5]=l*S,q[9]=x-d*K,q[2]=-l*h,q[6]=K,q[10]=l*Q}else if("ZYX"===B){var o=l*S,v=l*n,T=K*S,M=K*n;q[0]=Q*S,q[4]=T*h-v,q[8]=o*h+M,q[1]=Q*n,q[5]=M*h+o,q[9]=v*h-T,q[2]=-h,q[6]=K*Q,q[10]=l*Q}else if("YZX"===B){var $=l*Q,y=l*h,L=K*Q,t=K*h;q[0]=Q*S,q[4]=t-$*n,q[8]=L*n+y,q[1]=n,q[5]=l*S,q[9]=-K*S,q[2]=-h*S,q[6]=y*n+L,q[10]=$-t*n}else if("XZY"===B){var $=l*Q,y=l*h,L=K*Q,t=K*h;q[0]=Q*S,q[4]=-n,q[8]=h*S,q[1]=$*n+t,q[5]=l*S,q[9]=y*n-L,q[2]=L*n-y,q[6]=K*S,q[10]=t*n+$}return q[3]=0,q[7]=0,q[11]=0,q[12]=0,q[13]=0,q[14]=0,q[15]=1,this},makeRotationFromQuaternion:function(l){var y=this.el,O=l._x,M=l._y,x=l._z,X=l._w,_=O+O,U=M+M,G=x+x,j=O*_,N=O*U,R=O*G,L=M*U,k=M*G,A=x*G,b=X*_,m=X*U,d=X*G;return y[0]=1-(L+A),y[4]=N-d,y[8]=R+m,y[1]=N+d,y[5]=1-(j+A),y[9]=k-b,y[2]=R-m,y[6]=k+b,y[10]=1-(j+L),y[3]=0,y[7]=0,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},getInverse:function(o){var S=this.el,A=o.el,k=A[0],O=A[1],W=A[2],p=A[3],C=A[4],I=A[5],H=A[6],j=A[7],R=A[8],v=A[9],b=A[10],f=A[11],t=A[12],U=A[13],$=A[14],i=A[15],X=v*$*j-U*b*j+U*H*f-I*$*f-v*H*i+I*b*i,u=t*b*j-R*$*j-t*H*f+C*$*f+R*H*i-C*b*i,D=R*U*j-t*v*j+t*I*f-C*U*f-R*I*i+C*v*i,z=t*v*H-R*U*H-t*I*b+C*U*b+R*I*$-C*v*$,x=k*X+O*u+W*D+p*z;if(0===x)return this.identity();var Q=1/x;return S[0]=X*Q,S[1]=(U*b*p-v*$*p-U*W*f+O*$*f+v*W*i-O*b*i)*Q,S[2]=(I*$*p-U*H*p+U*W*j-O*$*j-I*W*i+O*H*i)*Q,S[3]=(v*H*p-I*b*p-v*W*j+O*b*j+I*W*f-O*H*f)*Q,S[4]=u*Q,S[5]=(R*$*p-t*b*p+t*W*f-k*$*f-R*W*i+k*b*i)*Q,S[6]=(t*H*p-C*$*p-t*W*j+k*$*j+C*W*i-k*H*i)*Q,S[7]=(C*b*p-R*H*p+R*W*j-k*b*j-C*W*f+k*H*f)*Q,S[8]=D*Q,S[9]=(t*v*p-R*U*p-t*O*f+k*U*f+R*O*i-k*v*i)*Q,S[10]=(C*U*p-t*I*p+t*O*j-k*U*j-C*O*i+k*I*i)*Q,S[11]=(R*I*p-C*v*p-R*O*j+k*v*j+C*O*f-k*I*f)*Q,S[12]=z*Q,S[13]=(R*U*W-t*v*W+t*O*b-k*U*b-R*O*$+k*v*$)*Q,S[14]=(t*I*W-C*U*W-t*O*H+k*U*H+C*O*$-k*I*$)*Q,S[15]=(C*v*W-R*I*W+R*O*H-k*v*H-C*O*b+k*I*b)*Q,this},invert:function(){return this.getInverse(this)},makeRotationAxis:function(Q,i){var z=Math.cos(i),G=Math.sin(i),t=1-z,B=Q.x,N=Q.y,D=Q.z,S=t*B,$=t*N;return this.set(S*B+z,S*N-G*D,S*D+G*N,0,S*N+G*D,$*N+z,$*D-G*B,0,S*D-G*N,$*D+G*B,t*D*D+z,0,0,0,0,1),this},multiply:function(U){return this.multiplyMatrices(this,U)},premultiply:function(V){return this.multiplyMatrices(V,this)},multiplyMatrices:function(V,c){var B=V.el||V,Q=c.el||c,o=this.el,a=B[0],H=B[4],L=B[8],_=B[12],I=B[1],Z=B[5],U=B[9],A=B[13],s=B[2],g=B[6],i=B[10],J=B[14],u=B[3],T=B[7],w=B[11],e=B[15],k=Q[0],d=Q[4],q=Q[8],m=Q[12],f=Q[1],N=Q[5],t=Q[9],z=Q[13],y=Q[2],M=Q[6],Y=Q[10],S=Q[14],R=Q[3],v=Q[7],C=Q[11],O=Q[15];return o[0]=a*k+H*f+L*y+_*R,o[4]=a*d+H*N+L*M+_*v,o[8]=a*q+H*t+L*Y+_*C,o[12]=a*m+H*z+L*S+_*O,o[1]=I*k+Z*f+U*y+A*R,o[5]=I*d+Z*N+U*M+A*v,o[9]=I*q+Z*t+U*Y+A*C,o[13]=I*m+Z*z+U*S+A*O,o[2]=s*k+g*f+i*y+J*R,o[6]=s*d+g*N+i*M+J*v,o[10]=s*q+g*t+i*Y+J*C,o[14]=s*m+g*z+i*S+J*O,o[3]=u*k+T*f+w*y+e*R,o[7]=u*d+T*N+w*M+e*v,o[11]=u*q+T*t+w*Y+e*C,o[15]=u*m+T*z+w*S+e*O,this},lookAt:function(){var V=new ng;return function(L,n,Q){return V.subVectors(L,n),this.lookAtDirection(V,Q)}}(),lookAtDirection:function(){var s=new ng,O=new ng,o=new ng;
return function(G,_){_||(_=ng.UP);var P=this.el;return o.copy(G),0===o.lengthSq()&&(o.z=1),o.normalize(),s.crossVectors(_,o),0===s.lengthSq()&&(1===Math.abs(_.z)?o.x+=1e-4:o.z+=1e-4,o.normalize(),s.crossVectors(_,o)),s.normalize(),O.crossVectors(o,s),P[0]=s.x,P[4]=O.x,P[8]=o.x,P[1]=s.y,P[5]=O.y,P[9]=o.y,P[2]=s.z,P[6]=O.z,P[10]=o.z,this}}(),extractScale:function(){var R;return function(L){R===H&&(R=new ng),L===H&&(L=new ng);var u=R.setFromMatrixColumn(this,0).length(),z=R.setFromMatrixColumn(this,1).length(),S=R.setFromMatrixColumn(this,2).length();return L.set(u,z,S),L}}(),extractRotation:function(){var N;return function(g){N===H&&(N=new ng),g===H&&(g=new kc);var t=this.el,F=g.el,K=1/N.setFromMatrixColumn(g,0).length(),z=1/N.setFromMatrixColumn(g,1).length(),O=1/N.setFromMatrixColumn(g,2).length();return t[0]=F[0]*K,t[1]=F[1]*K,t[2]=F[2]*K,t[4]=F[4]*z,t[5]=F[5]*z,t[6]=F[6]*z,t[8]=F[8]*O,t[9]=F[9]*O,t[10]=F[10]*O,this}}(),multiplyScalar:function(z){var U=this.el;return U[0]*=z,U[4]*=z,U[8]*=z,U[12]*=z,U[1]*=z,U[5]*=z,U[9]*=z,U[13]*=z,U[2]*=z,U[6]*=z,U[10]*=z,U[14]*=z,U[3]*=z,U[7]*=z,U[11]*=z,U[15]*=z,this},getPosition:function(e){return e===H&&(e=new ng),e.setFromMatrixColumn(this,3)},setPosition:function(x){var G=this.el;return G[12]=x.x,G[13]=x.y,G[14]=x.z,this},copyPosition:function(V){var A=this.el,S=V.el;return A[12]=S[12],A[13]=S[13],A[14]=S[14],this},toArray:function(r,I){r===H&&(r=[]),I===H&&(I=0);var V=this.el;return r[I]=V[0],r[I+1]=V[1],r[I+2]=V[2],r[I+3]=V[3],r[I+4]=V[4],r[I+5]=V[5],r[I+6]=V[6],r[I+7]=V[7],r[I+8]=V[8],r[I+9]=V[9],r[I+10]=V[10],r[I+11]=V[11],r[I+12]=V[12],r[I+13]=V[13],r[I+14]=V[14],r[I+15]=V[15],r},determinant:function(){var n=this.el||this,M=n[0],P=n[4],Z=n[8],d=n[12],f=n[1],h=n[5],u=n[9],e=n[13],D=n[2],K=n[6],r=n[10],S=n[14],I=n[3],V=n[7],O=n[11],G=n[15];return I*(+d*u*K-Z*e*K-d*h*r+P*e*r+Z*h*S-P*u*S)+V*(+M*u*S-M*e*r+d*f*r-Z*f*S+Z*e*D-d*u*D)+O*(+M*e*K-M*h*S-d*f*K+P*f*S+d*h*D-P*e*D)+G*(-Z*h*D-M*u*K+M*h*r+Z*f*K-P*f*r+P*u*D)},copy:function(C){var Z=this.el,B=C.el||C;return Z[0]=B[0],Z[1]=B[1],Z[2]=B[2],Z[3]=B[3],Z[4]=B[4],Z[5]=B[5],Z[6]=B[6],Z[7]=B[7],Z[8]=B[8],Z[9]=B[9],Z[10]=B[10],Z[11]=B[11],Z[12]=B[12],Z[13]=B[13],Z[14]=B[14],Z[15]=B[15],this},composeFromArray:function(p,D,G){var H,s,C,N,W,B,K,f,l,F;return D?(H=D[0],s=D[1],C=D[2],N=D[3]):(H=0,s=0,C=0,N=1),G?(W=G[0],B=G[1],K=G[2]):W=B=K=1,p?(f=p[0],l=p[1],F=p[2]):f=l=F=0,this._composeImpl(H,s,C,N,W,B,K,f,l,F)},compose:function(T,Y,H){var r,P,K,y,d,_,U,O,X,E;return Y?(r=Y._x,P=Y._y,K=Y._z,y=Y._w):(r=0,P=0,K=0,y=1),H?(d=H.x,_=H.y,U=H.z):d=_=U=1,T?(O=T.x,X=T.y,E=T.z):O=X=E=0,this._composeImpl(r,P,K,y,d,_,U,O,X,E)},_composeImpl:function(b,_,t,D,A,W,w,u,d,I){var M=this.el,T=b+b,v=_+_,G=t+t,R=b*T,L=b*v,F=b*G,x=_*v,k=_*G,h=t*G,J=D*T,e=D*v,Z=D*G;return M[0]=(1-(x+h))*A,M[1]=(L+Z)*A,M[2]=(F-e)*A,M[3]=0,M[4]=(L-Z)*W,M[5]=(1-(R+h))*W,M[6]=(k+J)*W,M[7]=0,M[8]=(F+e)*w,M[9]=(k-J)*w,M[10]=(1-(R+x))*w,M[11]=0,M[12]=u,M[13]=d,M[14]=I,M[15]=1,this},decompose:function(){var q=new ng,g=new kc;return function(u,V,y){var e=this.el,W=q.set(e[0],e[1],e[2]).length(),O=q.set(e[4],e[5],e[6]).length(),H=q.set(e[8],e[9],e[10]).length(),Z=this.determinant();0>Z&&(W=-W),u.x=e[12],u.y=e[13],u.z=e[14],g.copy(this);var Y=1/W,M=1/O,J=1/H;return g.el[0]*=Y,g.el[1]*=Y,g.el[2]*=Y,g.el[4]*=M,g.el[5]*=M,g.el[6]*=M,g.el[8]*=J,g.el[9]*=J,g.el[10]*=J,V.setFromRotationMatrix(g),y.x=W,y.y=O,y.z=H,this}}(),equals:function(k){for(var c=this.el,d=k.el,f=0;16>f;f++)if(c[f]!==d[f])return!1;return!0}});var qc=new kc,Sk=new kc;kc.determinantOfArray=function(){var o=L.Math.Matrix4.prototype.determinant;return function(d){return d?o.call(d):0}}(),kc.multiplyMatrixArray=function(h,u,I,R,j,g){var K=h.el||h,U=u.el||u,m=I.el||I,$=U[j+0],l=U[j+4],d=U[j+8],P=U[j+12],A=U[j+1],Z=U[j+5],F=U[j+9],O=U[j+13],V=U[j+2],v=U[j+6],W=U[j+10],D=U[j+14],B=U[j+3],Y=U[j+7],Q=U[j+11],e=U[j+15],C=m[g+0],J=m[g+4],c=m[g+8],N=m[g+12],k=m[g+1],G=m[g+5],x=m[g+9],p=m[g+13],r=m[g+2],b=m[g+6],T=m[g+10],y=m[g+14],S=m[g+3],z=m[g+7],i=m[g+11],X=m[g+15];return K[R+0]=$*C+l*k+d*r+P*S,K[R+4]=$*J+l*G+d*b+P*z,K[R+8]=$*c+l*x+d*T+P*i,K[R+12]=$*N+l*p+d*y+P*X,K[R+1]=A*C+Z*k+F*r+O*S,K[R+5]=A*J+Z*G+F*b+O*z,K[R+9]=A*c+Z*x+F*T+O*i,K[R+13]=A*N+Z*p+F*y+O*X,K[R+2]=V*C+v*k+W*r+D*S,K[R+6]=V*J+v*G+W*b+D*z,K[R+10]=V*c+v*x+W*T+D*i,K[R+14]=V*N+v*p+W*y+D*X,K[R+3]=B*C+Y*k+Q*r+e*S,K[R+7]=B*J+Y*G+Q*b+e*z,K[R+11]=B*c+Y*x+Q*T+e*i,K[R+15]=B*N+Y*p+Q*y+e*X,h};var Ep=L.Math.Triangle=function(Y,c,L){this.a=Y!==H?Y:new ng,this.b=c!==H?c:new ng,this.c=L!==H?L:new ng};b.assign(Ep,{barycoordFromPoint:function(){var I=new ng,S=new ng,o=new ng;return function(f,M,T,C,u){I.subVectors(C,M),S.subVectors(T,M),o.subVectors(f,M);var N=I.dot(I),x=I.dot(S),$=I.dot(o),i=S.dot(S),q=S.dot(o),Z=N*i-x*x,W=u||new ng;if(0===Z)return W.set(-2,-1,-1);var X=1/Z,j=(i*$-x*q)*X,a=(N*q-x*$)*X;return W.set(1-j-a,a,j)}}(),uvIntersection:function(){var g=new ng;return function(b,J,T,$,F,M,i){return Ep.barycoordFromPoint(b,J,T,$,g),F.multiplyScalar(g.x),M.multiplyScalar(g.y),i.multiplyScalar(g.z),F.add(M).add(i),F.clone()}}()});var re=L.Math.Euler=function(J,k,Z,G,m){this.set(J,k,Z,G,m)};re.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],re.DefaultOrder="XYZ",re.ReverseOrder=function(){var $={xyz:"ZYX",xzy:"YZX",yxz:"ZXY",yzx:"XZY",zxy:"YXZ",zyx:"XYZ"};return function(j){return $[j]}}(),b.defineProperties(re.prototype,{x:{get:function(){return this._x},set:function(x){this._x=x,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(O){this._y=O,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(L){this._z=L,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(R){this._order=R,this.onChangeCallback()}}}),b.assign(re.prototype,{set:function(p,I,Q,j,k){return Tl(p)&&(k=Q,j=I,Q=p[2],I=p[1],p=p[0]),j?k&&(j=re.ReverseOrder(j)):j="ZYX",this._x=p||0,this._y=I||0,this._z=Q||0,this._order=j||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(w){return this._x=w._x,this._y=w._y,this._z=w._z,this._order=w._order,this.onChangeCallback(),this},setFromRotationMatrix:function(r,k,q){var b=L.Math.clamp,M=r.el||r,G=M[0],F=M[4],Y=M[8],z=M[1],y=M[5],j=M[9],K=M[2],h=M[6],R=M[10];return k=k||this._order,"XYZ"===k?(this._y=Math.asin(b(Y,-1,1)),Math.abs(Y)<.99999?(this._x=Math.atan2(-j,R),this._z=Math.atan2(-F,G)):(this._x=Math.atan2(h,y),this._z=0)):"YXZ"===k?(this._x=Math.asin(-b(j,-1,1)),Math.abs(j)<.99999?(this._y=Math.atan2(Y,R),this._z=Math.atan2(z,y)):(this._y=Math.atan2(-K,G),this._z=0)):"ZXY"===k?(this._x=Math.asin(b(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-K,R),this._z=Math.atan2(-F,y)):(this._y=0,this._z=Math.atan2(z,G))):"ZYX"===k?(this._y=Math.asin(-b(K,-1,1)),Math.abs(K)<.99999?(this._x=Math.atan2(h,R),this._z=Math.atan2(z,G)):(this._x=0,this._z=Math.atan2(-F,y))):"YZX"===k?(this._z=Math.asin(b(z,-1,1)),Math.abs(z)<.99999?(this._x=Math.atan2(-j,y),this._y=Math.atan2(-K,G)):(this._x=0,this._y=Math.atan2(Y,R))):"XZY"===k?(this._z=Math.asin(-b(F,-1,1)),Math.abs(F)<.99999?(this._x=Math.atan2(h,y),this._y=Math.atan2(Y,G)):(this._x=Math.atan2(-j,R),this._y=0)):console.warn("unsupported order: "+k),this._order=k,q!==!1&&this.onChangeCallback(),this},setFromQuaternion:function(){var j=new kc;return function(Y,x,E){return j.makeRotationFromQuaternion(Y),this.setFromRotationMatrix(j,x,E)}}(),setFromVector3:function(Q,p){return this.set(Q.x,Q.y,Q.z,p||this._order)},reorder:function(){var H=new $d;return function(U){return H.setFromEuler(this),this.setFromQuaternion(H,U)}}(),equals:function(h){return h._x===this._x&&h._y===this._y&&h._z===this._z&&h._order===this._order},fromArray:function(J){return this._x=J[0],this._y=J[1],this._z=J[2],J[3]!==H&&(this._order=J[3]),this.onChangeCallback(),this},toArray:function(n,R){return n===H&&(n=[]),R===H&&(R=0),n[R]=this._x,n[R+1]=this._y,n[R+2]=this._z,n[R+3]=this._order,n},toVector3:function(B){return B?B.set(this._x,this._y,this._z):new ng(this._x,this._y,this._z)},onChange:function(X){return this.onChangeCallback=X,this},onChangeCallback:function(){}}),Of.eulerArrayToQuaternionArray=function(){var k=new $d,f=new re;return function(K,s){return k.setFromEuler(f.fromArray(K)).toArray(s)}}();var ml=L.Math.Interpolant=function(y,L,Q){this.parameterPositions=y,this._cachedIndex=0;var l=L.length/y.length;this.resultBuffer=Q!==H?Q:new L.constructor(l),this.sampleValues=L,this.valueSize=l,this.settings=null,this.DefaultSettings_={}};b.assign(ml.prototype,{evaluate:function(w){var L=this.parameterPositions,O=this._cachedIndex,f=L[O],C=L[O-1];a:{b:{var M;c:{d:if(!(f>w)){for(var l=O+2;;){if(f===H){if(C>w)break d;return O=L.length,this._cachedIndex=O,this.afterEnd_(O-1,w,C)}if(O===l)break;if(C=f,f=L[++O],f>w)break b}M=L.length;break c}if(w>=C)break a;var S=L[1];S>w&&(O=2,C=S);for(var l=O-2;;){if(C===H)return this._cachedIndex=0,this.beforeStart_(0,w,f);if(O===l)break;if(f=C,C=L[--O-1],w>=C)break b}M=O,O=0}for(;M>O;){var W=O+M>>>1;w<L[W]?M=W:O=W+1}if(f=L[O],C=L[O-1],C===H)return this._cachedIndex=0,this.beforeStart_(0,w,f);if(f===H)return O=L.length,this._cachedIndex=O,this.afterEnd_(O-1,C,w)}this._cachedIndex=O,this.intervalChanged_(O,C,f)}return this.interpolateImpl(O,C,w,f)},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(V){for(var B=this.resultBuffer,X=this.sampleValues,t=this.valueSize,N=V*t,w=0;w!==t;++w)B[w]=X[N+w];return B},interpolateImpl:function(){},intervalChanged_:function(){}}),ml.prototype.beforeStart_=ml.prototype.copySampleValue_,ml.prototype.afterEnd_=ml.prototype.copySampleValue_,c.prototype=b.create(ml.prototype),c.prototype.interpolateImpl=function(S){return this.copySampleValue_(S-1)},n.prototype=b.create(ml.prototype),n.prototype.interpolateImpl=function(n,q,c,h){for(var R=this.resultBuffer,d=this.sampleValues,B=this.valueSize,L=n*B,z=L-B,D=(c-q)/(h-q),W=1-D,K=0;K!==B;++K)R[K]=d[z+K]*W+d[L+K]*D;return R},Y.prototype=b.create(ml.prototype),Y.prototype.interpolateImpl=function(_,q,b,w){for(var i=this.resultBuffer,I=this.sampleValues,L=this.valueSize,n=(b-q)/(w-q),B=_*L,v=B+L;B!==v;B+=4)$d.slerpFlat(i,0,I,B-L,I,B,n);return i},P.prototype=b.create(ml.prototype),P.prototype.intervalChanged_=function(B,b,A){var X=this.parameterPositions,z=B-2,S=B+1,Q=X[z],t=X[S];if(Q===H)switch(this.getSettings_().endingStart){case"ZeroSlope":z=B,Q=2*b-A;break;case"WrapAround":z=X.length-2,Q=b+X[z]-X[z+1];break;default:z=B,Q=A}if(t===H)switch(this.getSettings_().endingEnd){case"ZeroSlope":S=B,t=2*A-b;break;case"WrapAround":S=1,t=A+X[1]-X[0];break;default:S=B-1,t=b}var x=.5*(A-b),L=this.valueSize;this._weightPrev=x/(b-Q),this._weightNext=x/(t-A),this._offsetPrev=z*L,this._offsetNext=S*L},P.prototype.interpolateImpl=function(V,p,Y,r){for(var D=this.resultBuffer,J=this.sampleValues,K=this.valueSize,z=V*K,k=z-K,C=this._offsetPrev,B=this._offsetNext,i=this._weightPrev,U=this._weightNext,o=(Y-p)/(r-p),g=o*o,I=g*o,h=-i*I+2*i*g-i*o,E=(1+i)*I+(-1.5-2*i)*g+(-.5+i)*o+1,m=(-1-U)*I+(1.5+U)*g+.5*o,c=U*I-U*g,f=0;f!==K;++f)D[f]=h*J[C+f]+E*J[k+f]+m*J[z+f]+c*J[B+f];return D};var Yp={ms_ac:function(E,e){for(var u=e.ms_ac,J=0;J<u.length;J++)Wc(E,u[J])},ms_listener:function(j){j.addListeners=function(){var K=this,L=rl;T.mockTouch&&(L=Ti.concat(Ej).concat(Hq)),K.__events__=L;for(var _=0,B=L.length;B>_;_++){var u=L[_];"wheel"===u&&!K.handle_wheel&&K.handle_mousewheel&&(K.handle_wheel=function(P){Ll(K,P)}),K["handle_"+u]&&Vp(u,K.getView(),K)}},j.removeListeners=function(){var Z=this,k=Z.__events__;if(k){Z.__events__=H;for(var u=0,p=k.length;p>u;u++)Z["handle_"+k[u]]&&Il(k[u],Z.getView(),Z)}}},ms_fire:function(p){p.mp=function(Q,r,K){this.addPropertyChangeListener(Q,r,K)},p.ump=function(T,Q){this.removePropertyChangeListener(T,Q)},p.fp=function(V,_,C,e,h){return this.firePropertyChange(V,_,C,e,h)},p.addPropertyChangeListener=function(P,s,D){var a=this;a._62I||(a._62I=new _m),a._62I.add(P,s,D)},p.removePropertyChangeListener=function(L,Q){this._62I&&this._62I.remove(L,Q)},p.firePropertyChange=function($,b,R,v,Q){if(v){if(v(b,R))return!1}else if(b===R)return!1;var M=this,k=Q||{};return k.property=$,k.oldValue=b,k.newValue=R,k.source=M,k.data=M,M._62I&&M._62I.fire(k),M.onPropertyChanged&&M.onPropertyChanged(k),!0}},ms_attr:function(R){R.a=function(m,v){var a=this;if(2===arguments.length)a.setAttr(m,v);else{if(!oc(m))return a.getAttr(m);for(var w in m)a.setAttr(w,m[w])}return a},R.getAttr=function(_,Y){if(Y===H&&(Y=1),this._attrObject&&_ in this._attrObject)return this._attrObject[_];if(this.getImage){var P=this.getImage();if(jm(P)&&(P=$b[P]),oc(P)&&"dataBindings"in P)for(var K=P.dataBindings,F=K.length-1;F>=0;F--){var n=K[F];if(n.attr===_){if("defaultValue"in n)return n.defaultValue;break}}}return Y?l[_]:H},R.setAttr=function(Q,E){var g=this;g._attrObject||(g._attrObject={});var v=g._attrObject[Q];E===H?delete g._attrObject[Q]:g._attrObject[Q]=E,g.fp&&g.fp("a:"+Q,v,E)&&g.onAttrChanged&&g.onAttrChanged(Q,v,E)},R.getSerializableAttrs=function(){var U,i={};for(U in this._attrObject)i[U]=1;return i}},ms_bnb:function(x){x.getBodyColor=function(Q){return Q.s("body.color")},x.getBorderColor=function(C){return C.s("border.color")}},_51o:function(P){P.mi=function(i,t,W){this.addInteractorListener(i,t,W)},P.umi=function(l,t){this.removeInteractorListener(l,t)},P.fi=function(p){this.fireInteractorEvent(p)},P.addInteractorListener=function(L,U,T){var D=this;D._63I||(D._63I=new _m),D._63I.add(L,U,T)},P.removeInteractorListener=function(N,q){this._63I&&this._63I.remove(N,q)},P.fireInteractorEvent=function(r){this._63I&&this._63I.fire(r)},P.setInteractors=function(l){var f=this,d=f._interactors;d&&d.each(function(_){_.tearDown()}),Tl(l)&&(l=new Dg(l)),f._interactors=l,l&&l.each(function(V){V.setUp()}),f.fp("interactors",d,l),f.invalidateSelection()},P.getInteractors=function(){return this._interactors}},_49o:function(D){D._44O=C,D._45O=C,D.getTopPainters=function(){return this._44O},D.getBottomPainters=function(){return this._45O},D.addTopPainter=function(u){var g=this;g._44O||(g._44O=new Dg),g._44O.contains(u)||(g._44O.add(u),g.redraw&&g.redraw())},D.removeTopPainter=function(L){var d=this;d._44O&&(d._44O.remove(L),d.redraw&&d.redraw())},D.addBottomPainter=function(b){var B=this;B._45O||(B._45O=new Dg),B._45O.contains(b)||(B._45O.add(b),B.redraw&&B.redraw())},D.removeBottomPainter=function(T){var U=this;U._45O&&(U._45O.remove(T),U.redraw&&U.redraw())},D._93db=function(T,$){var N=this;N._45O&&N._45O.each(function(l){l.draw?l.draw(T,$):l.call(N,T,$)})},D._92db=function(T,j){var c=this;c._44O&&c._44O.each(function(d){d.draw?d.draw(T,j):d.call(c,T,j)})}},ms_sm:function(t){t.sm=function(){return this.getSelectionModel()},t.setSelectableFunc=function(L){this.sm().setFilterFunc(L)},t.getSelectableFunc=function(){return this.sm().getFilterFunc()},t.getSelectionModel=function(){var K=this;return K._selectionModel?K._selectionModel:K.dm().sm()},t.isSelectionModelShared=function(){return!this._selectionModel},t.setSelectionModelShared=function(V){var s=this,S=s.sm(),G=!s._selectionModel,j=s.handleSelectionChange,g=s.dm();G!==V&&(s.invalidateSelection&&s.invalidateSelection(),V?(g.sm().ms(j,s),s._selectionModel.ums(j,s),s._selectionModel.dispose(),s._selectionModel=C):(g.sm().ums(j,s),s._selectionModel=new Di(g),s._selectionModel.ms(j,s)),s.onSelectionModelSharedChanged(),s.fp("selectionModelShared",G,V),s.fireViewEvent({kind:"selectionModelSharedChange",oldValue:G,newValue:V,oldSelectionModel:S,newSelectionModel:s.sm()}))},t.onSelectionModelSharedChanged=function(){var j=this;j.redraw(),j.invalidateSelection&&j.invalidateSelection()},t.removeSelection=function(){var u=this.dm();u.beginTransaction(),this.sm().toSelection().each(u.remove,u),u.endTransaction()},t.selectAll=function(){var F=this;F.sm().ss(F.dm().toDatas(function(c){return F.isVisible(c)&&F.isSelectable(c)}))},t.isSelected=function(g){return this.sm().co(g)},t.isSelectedById=function(J){var u=this.dm().getDataById(J);return u?this.isSelected(u):!1},t.isSelectable=function(G){return this.sm().isSelectable(G)}},ms_tx:function(I){I._64I=0,I._65O=0,I.isScrollable=function(){return this.getWidth()<this._64I},I._40o=function(){return this.isScrollable()},I.getLogicalPoint=function(J){return Dc(J,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},I.tx=function(l){return l===H?this.getTranslateX():(this.setTranslateX(l),void 0)},I.getTranslateX=function(){return this._65O},I.setTranslateX=function(x){var R=this,T=R.getWidth()-R._64I;T>x&&(x=T),x>0&&(x=0),x=p(x);var S=R._65O;R._65O=x,R.fp(hr,S,x)}},ms_ty:function(L){L._23Q=0,L._66O=0,L._41o=function(){return this.getHeight()<this._23Q},L.getLogicalPoint=function($){return Dc($,this._canvas||this._view,this.tx?this.tx():0,this.ty())},L.ty=function(e){return e===H?this.getTranslateY():(this.setTranslateY(e),void 0)},L.getTranslateY=function(){return this._66O},L.setTranslateY=function($){var y=this,e=y.getHeight()-y._23Q;e>$&&($=e),$>0&&($=0),$=p($);var T=y._66O;y._66O=$,y.fp(nj,T,$)}},ms_txy:function(B){B._65O=0,B._66O=0,B.tx=function(o){return o===H?this.getTranslateX():(this.setTranslateX(o),void 0)},B.ty=function(R){return R===H?this.getTranslateY():(this.setTranslateY(R),void 0)},B.onTranslateEnded=function(){},B.setTranslate=function(e,d,S){var Q=this;if(S=cf(S)){Q._65I&&Q._65I.stop(!0);var O=Q.tx(),k=Q.ty();S.action=function(X){Q.setTranslate(O+(e-O)*X,k+(d-k)*X)},S._37o=function(){delete Q._66I,delete Q._65I,Q.onTranslateEnded()},Q._66I=1,Q._65I=$m(S)}else Q.tx(e),Q.ty(d)},B.getTranslateX=function(){return this._65O},B.setTranslateX=function(M){var h=this;M=h.adjustTranslateX(M);var Z=h._65O;h._65O=M,h.fp(hr,Z,M)},B.getTranslateY=function(){return this._66O},B.setTranslateY=function(w){var N=this;w=N.adjustTranslateY(w);var c=N._66O;N._66O=w,N.fp(nj,c,w)},B.adjustTranslateX=function(S){return p(S)},B.adjustTranslateY=function(d){return p(d)},B.translate=function(T,r,w){this.setTranslate(this.tx()+T,this.ty()+r,w)},B.getLogicalPoint=function(M){var j=this;return Dc(M,this._canvas||j._view,j.tx(),j.ty())}},ms_dm:function(k){k.dm=function(f){return f?(this.setDataModel(f),void 0):this.getDataModel()},k.getDataModel=function(){return this._dataModel}},ms_lp:function(B){B.lp=function(E){return this.getLogicalPoint(E)}},ms_v:function(M){M._disabled=!1,M.setDisabled=function(v,B){var Y=this,I=Y._disabled;I!==v&&(I&&(me(Y._63O),delete Y._63O),v&&(Nh(Y._view,Y._63O=rk(B)),Y.iv()),Y._disabled=v,Y.fp("disabled",I,v))},M.isDisabled=function(){return this._disabled},M.getDisabledDiv=function(){return this._63O},M.getView=function(){return this._view},M.addToDOM=function(T){var E=this,B=E.getView(),r=B.style;T=T||I.body,T.appendChild(B),r.left="0",r.right="0",r.top="0",r.bottom="0",g(f,"resize",function(){E.iv()}),E.iv()},M.setCursor=function(F){"default"===F&&(F=this._defaultCursor||F);var $=this.getView().style;$.cursor=F,$.cursor="-webkit-"+F,$.cursor="-moz-"+F},M.getWidth=function(){return this._view.clientWidth},M.getHeight=function(){return this._view.clientHeight},M.setWidth=function(D){var H=this;H._view.style.width=D+we,H.iv(),H.fp&&H.fp(kp,C,D)},M.setHeight=function(f){var Y=this;Y._view.style.height=f+we,Y.iv(),Y.fp&&Y.fp(pb,C,f)},M.setFocus=function(x){var S=this,r=S._currentEditor;return x&&r&&(r.getView&&(r=r.getView()),r.contains(x.target))?!1:(tn(S._view),S.endEditing&&S.endEditing(),S.fireViewEvent("focus"),!0)},M.iv=function(w){this.invalidate(w)},M.invalidate=function(f){var Z=this;Z._68I||(Z._68I=1,Z._ivTimerId=ef(Z._validateImpl,Z,C,f),Z._ivTimerDelay=f,Z.onInvalidated&&Z.onInvalidated(),Z.fireViewEvent("invalidate"))},M.validate=function(){var N=this._ivTimerId,$=this._ivTimerDelay;this._validateImpl()!==!1&&N&&si(N,$)},M._validateImpl=function(){var A=this,e=A._view;if(!A._68I)return!1;if(delete A._68I,e.parentNode)if(0===e.offsetWidth&&0===e.offsetHeight&&A._67I!==C)A._67I===H&&(A._67I=T.reinvalidateCount),A._67I>0?A._67I--:A._67I=C,A.iv();else{A.fireViewEvent("beginValidate"),A.validateImpl(),A.onValidated&&A.onValidated(),A.fireViewEvent("validate");var Y=A._63O;Y&&(e.lastChild!==Y&&(me(Y),Nh(e,Y)),mb(Y,0,0,A.getWidth(),A.getHeight())),cc(A),tf(A),Hc(A),tb(A)}},M.layout=function(y,F,t,m){1===arguments.length?mb(this,y):mb(this,y,F,t,m)},M.addViewListener=function(p,A,c){var K=this;K._67O||(K._67O=new _m),K._67O.add(p,A,c)},M.removeViewListener=function(p,F){this._67O.remove(p,F)},M.fireViewEvent=function(B){var s=this;s._67O&&(jm(B)&&(B={kind:B}),s._67O.fire(B)),T.viewListener&&T.viewListener(s,B)}},ms_tip:function(R){R.setToolTipEnabled=function(m){var v=this;m?Cd||v._13o||(v.enableToolTip(),v.fp("toolTipEnabled",!1,!0)):v._13o&&(v.disableToolTip(),v.fp("toolTipEnabled",!0,!1))},R.isToolTipEnabled=function(){return!!this._13o},R.enableToolTip=function(){var n=this;if(!Cd&&!n._13o){n._13o=function(c){if(!c.toolTipView){c.toolTipView=n;var w=n.getToolTip(c);w!=C?(T.toolTipContinual&&T.isToolTipShowing()?Bs(c,w):(Oj(),Ki={timeout:Yi(qj,te),e:c,info:w}),ym={e:c,view:n}):Oj()}};var J=n.getView();g(J,Ye,n._13o),g(J,"mouseleave",T.hideToolTip)}},R.disableToolTip=function(){var O=this;if(O._13o){var f=O.getView();J(f,Ye,O._13o),J(f,"mouseleave",T.hideToolTip),delete O._13o}},R.getToolTip=function(z){var D=this;if(D.getDataAt){var r=D.getDataAt(z);return r?r.getToolTip():C}return D.getValue?D.getValue():void 0}},_52o:function(P){P._zoom=1,P._29I=Sr,P.zoomIn=function(B,K){this.setZoom(this._zoom*Ok,B,K)},P.zoomOut=function(o,n){this.setZoom(this._zoom/Ok,o,n)},P.zoomReset=function(v,K){this.setZoom(1,v,K)},P.scrollZoomIn=function(S){this.setZoom(this._zoom*Bf,C,S)},P.scrollZoomOut=function(I){this.setZoom(this._zoom/Bf,C,I)},P.pinchZoomIn=function(D){this.setZoom(this._zoom*yr,C,D)},P.pinchZoomOut=function(f){this.setZoom(this._zoom/yr,C,f)},P.adjustZoom=function(L){return Nc>L?Nc:L>vd?vd:L},P.getZoom=function(){return this._zoom},P.setZoom=function(A,N,K){var x=this;if(N=cf(N)){x._14o&&x._14o.stop(!0);var m=x._zoom;N.action=function(M){x._96O(m+(A-m)*M,K)},N._37o=function(){delete x._zooming,delete x._14o,x.onZoomEnded()},x._zooming=1,x._14o=$m(N)}else x._96O(A,K)},P._96O=function(Q,F){var b=this;if(Q=b.adjustZoom(Q),Q!==b._zoom){b.validate();var J=b._29I,e=b._zoom;0!==J.width&&0!==J.height&&(F=F?F:{x:J.x+J.width/2,y:J.y+J.height/2},b.tx((F.x-J.x)*e-F.x*Q),b.ty((F.y-J.y)*e-F.y*Q)),b._zoom=Q,b.fp("zoom",e,Q)}}},ms_edge:function(q){q._2I=function(j){var V=this;V._44I||(V._44I=new Dg),V._42I||(V._42I=new Dg),V._44I.add(j),V._42I.add(j),V._20I()},q._4I=function(I){var b=this;b._44I||(b._44I=new Dg),b._43I||(b._43I=new Dg),b._44I.add(I),b._43I.add(I),b._20I()},q._16I=function(I){var M=this;M._44I.remove(I),M._42I.remove(I),M._44I.isEmpty()&&delete M._44I,M._42I.isEmpty()&&delete M._42I,M._20I()},q._18I=function($){var z=this;z._44I.remove($),z._43I.remove($),z._44I.isEmpty()&&delete z._44I,z._43I.isEmpty()&&delete z._43I,z._20I()},q._20I=function(){var $=this;if(delete $._45I,!$._44I||$._44I.isEmpty())return delete $._70O,void 0;var U;$._44I.each(function(k){k.isLooped()&&(U||(U={}),U[k._id]||($._45I||($._45I=new Dg),$._45I.add(k),U[k._id]=k))}),U?($._70O=new Dg,$._44I.each(function(K){U[K._id]?"A"===U[K._id]||(U[K._id]="A",$._70O.add(K)):$._70O.add(K)})):$._70O=$._44I},q.hasAgentEdges=function(){return!!this._49I&&!this._49I.isEmpty()},q.getSourceAgentEdges=function(){return this._46I},q.getTargetAgentEdges=function(){return this._47I},q._1I=function(W){var b=this;b._46I||(b._46I=new Dg),b._48I||(b._48I=new Dg),b._46I.add(W),b._48I.add(W),b._19I()},q._3I=function(l){var m=this;m._47I||(m._47I=new Dg),m._48I||(m._48I=new Dg),m._47I.add(l),m._48I.add(l),m._19I()},q._15I=function(S){var U=this;U._46I.remove(S),U._48I.remove(S),U._46I.isEmpty()&&delete U._46I,U._48I.isEmpty()&&delete U._48I,U._19I()},q._17I=function(q){var g=this;g._47I.remove(q),g._48I.remove(q),g._47I.isEmpty()&&delete g._47I,g._48I.isEmpty()&&delete g._48I,g._19I()},q._19I=function(){var J=this;delete J._49I;var P=J._48I;if(P&&!P.isEmpty()){var E={};P.each(function(q){E[q._id]?J._49I||(J._49I=new Dg):E[q._id]=q}),J._49I?P.each(function(C){E[C._id]&&(J._49I.add(C),delete E[C._id])}):J._49I=P}},q.getLoopedEdges=function(){return this._45I},q.getEdges=function(){return this._70O},q.getAgentEdges=function(){return this._49I},q.getSourceEdges=function(){return this._42I},q.getTargetEdges=function(){return this._43I},q._8I=function(){this._70O&&this._70O.each(function(H){H._7I()})}}};yd(T,{getVersion:function(){return"7.6.0-dev32"}},!0);var rc=function(d){return d.devicePixelRatio?d.devicePixelRatio:d.screen&&d.screen.logicalXDPI?d.screen.deviceXDPI/d.screen.logicalXDPI:1};yd(T,{numberDigits:5,crossOrigin:"",baseZIndex:H,isTouchable:Cd,mockTouch:!0,devicePixelRatio:rc(f),reinvalidateCount:3,hitMaxArea:3e3,imageCacheThreshold:20,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:W.disabledBackground,forceHierarchicalSerialization:!0,extractBatchTranslation:!1,extractShapeTranslation:!1,extractPolylineTranslation:!1,extractVerticesTranslation:!1,envmapProbeMinWaitTime:300,envmapProbeMaxWaitTime:25e3,EnvmapTextureSize:1024,hoverDelay:600,clickDelay:200,toolTipDelay:800,toolTipContinual:!1,getDragger:function(){return wk},lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],blockMinSize:1,textExtraWidth:4,encodeStringKey:null,doubleClickSpeed:500,doubleClickRange:1,doubleTouchRange:20,touchMoveThreshold:10,animDuration:200,animEasing:function(e){return e*e},labelColor:vn,labelSelectColor:cn,labelFont:"12px arial, sans-serif",widgetIndent:Cd?30:20,widgetRowHeight:Cd?30:20,widgetHeaderHeight:Cd?32:22,widgetTitleHeight:Cd?34:24,scrollBarColor:Ul,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:Cd?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,pinchZoomThreshold:1,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:zg,intersectionLineLine:Wl,isEnter:br,isEsc:ic,isDelete:$i,isSpace:rj,isLeft:Qi,isUp:Al,isRight:nk,isDown:xh,isTouchEvent:To,getTarget:Jj,isString:jm,isNumber:ah,isBoolean:nn,isArray:Tl,isSelectAll:jd,isFunction:mq,isObject:oc,getPropertyValue:Eg,setPropertyValue:Pf,addMethod:yd,createGradient:function(m,T,h,o,i,y,f,z){var H=Nd[T];return H(m,h,o,i,y,f,z)},appendToScreen:function(T){T=T.getView?T.getView():T,(I.fullscreenElement||I.mozFullScreenElement||I.webkitFullscreenElement||I.msFullscreenElement||I.body).appendChild(T)},encodeString:function(D){return L.Math.encodeBase64(D,T.encodeStringKey)},decodeString:function(g){return L.Math.decodeBase64(g,T.encodeStringKey)},findView:function(k){var y=function(O,w){var M=w._ht;M&&O.push(M);var G=w.children,q=G.length;if(q)for(var B=0;q>B;B++)y(O,G[B])},X=[];y(X,I.body);var u=function(N,O){for(var M="2d"===O?gi.GraphView:jg.Graph3dView,E=0,B=N.length;B>E;E++)if(N[E]instanceof M)return X[E];return null};return"all"===k?X:"2d"===k?u(X,"2d"):"3d"===k?u(X,"3d"):u(X,"3d")||u(X,"2d")},toggleFullscreen:function(j){var V=j.getView();if(I.fullscreenElement||I.mozFullScreenElement||I.webkitFullscreenElement||I.msFullscreenElement)I.exitFullscreen?I.exitFullscreen():I.msExitFullscreen?I.msExitFullscreen():I.mozCancelFullScreen?I.mozCancelFullScreen():I.webkitExitFullscreen&&I.webkitExitFullscreen();else{var A=!0;if(j.isSelfViewEvent){var u=j.getX(),Z=j.getY(),J=j.getWidth(),k=j.getHeight(),m=V.style.background,d=V.style.backgroundColor;m||d||(V.style.backgroundColor="white"),V.requestFullscreen?V.requestFullscreen():V.msRequestFullscreen?V.msRequestFullscreen():V.mozRequestFullScreen?V.mozRequestFullScreen():V.webkitRequestFullscreen&&V.webkitRequestFullscreen();var c=setInterval(function(){if(V!==(I.fullscreenElement||I.mozFullScreenElement||I.webkitFullscreenElement||I.msFullscreenElement))clearInterval(c),j.setX(u),j.setY(Z),j.setWidth(J),j.setHeight(k),j._fullscreen=!1,V.style.oldBackgroundColor=d,j.iv();else{var e=L.Default.getWindowInfo();(A||e.width!==j.getWidth()||e.height!==j.getHeight())&&(j.setX(e.left),j.setY(e.top),j.setWidth(e.width),j.setHeight(e.height),j._fullscreen=!0,j.iv(),A=!1)}},500)}else{var T=V.style.left,a=V.style.top,J=V.style.width,k=V.style.height,m=V.style.background,d=V.style.backgroundColor;m||d||(V.style.backgroundColor="white"),V.requestFullscreen?V.requestFullscreen():V.msRequestFullscreen?V.msRequestFullscreen():V.mozRequestFullScreen?V.mozRequestFullScreen():V.webkitRequestFullscreen&&V.webkitRequestFullscreen();var c=setInterval(function(){if(V!==(I.fullscreenElement||I.mozFullScreenElement||I.webkitFullscreenElement||I.msFullscreenElement))clearInterval(c),V.style.left=T,V.style.top=a,V.style.width=J,V.style.height=k,V.style.oldBackgroundColor=d,j.iv();else{var i=L.Default.getWindowInfo();(A||i.width!==j.getWidth()||i.height!==j.getHeight())&&(mb(j),A=!1)}},500)}}},appendTimeStamp:function(D){return D},setCompType:function(m,i){jm(i)&&i.substr(0,12)==oi&&(i=T.parse(i)),mq(i)||oc(i)?Lo[m]=i:Wq(m)},getCompType:function(C){var s=Lo[C];return s===H&&bl.test(C)&&Wq(C),s},getCompTypeMap:function(){return Lo},drawCompType:function(v,b,D,T,u,i){v(b,D,T,u,i)},numberListener:function(){var X={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(x){var s=x.keyCode;X[s]||65===s&&T.isCtrlDown(x)||86===s&&T.isCtrlDown(x)||67===s&&T.isCtrlDown(x)||88===s&&T.isCtrlDown(x)||s>=35&&40>=s||(x.shiftKey||48>s||s>57)&&(96>s||s>105)&&x.preventDefault()}}(),ignoreKeyCodes:[122,123],preventDefault:function(e){var W=e.target.tagName;("DIV"===W||"CANVAS"===W)&&!(T.ignoreKeyCodes.indexOf(e.keyCode)>=0)&&("keydown"!==e.type||Qi(e)||nk(e)||Al(e)||xh(e)||$i(e)||65===e.keyCode&&(e.metaKey||e.ctrlKey))&&e.cancelable===!0&&(e.preventDefault(),e.preventManipulation&&e.preventManipulation())},getWindowInfo:function(){var T=I.documentElement,R=T&&(T.scrollLeft||T.scrollTop)?T:I.body;return{target:R,left:R.scrollLeft,top:R.scrollTop,width:f.innerWidth||R.clientWidth,height:f.innerHeight||R.clientHeight}},isDragging:function(){return!!wk},isLeftButton:function(z){return To(z)?!0:0===z.button},isMiddleButton:function(r){return To(r)?!1:r&&(1===r.button||4&(r.buttons||0))},isRightButton:function(_){return To(_)?!1:_&&(2===_.button||2&(_.buttons||0))},isInput:function(N){if(!N)return!1;var q=N.tagName;return"INPUT"===q||"TEXTAREA"===q||"SELECT"===q},getTouchCount:function(H){return To(H)?H.touches.length:1},isDoubleClick:function(){function Q(R){R.details=0,R.timeout=null,R.lastPoint=null}var b={};return Se=new rg,js=Se.getTime(),function(U){if(cg(U)>1)return!1;var V=U.button==C?"":U.button,k=U.type+V,A=k+"_isDoubleClick",q=b[k];if(q||(q=b[k]={details:0,timeout:null,lastPoint:null}),U[A]===H){U[A]=!0;var Y=oo(U);q.timeout&&(Oi(q.timeout),q.timeout=null);var x=To(U)?T.doubleTouchRange:T.doubleClickRange;q.lastPoint&&mp(q.lastPoint,Y)>x&&Q(q),q.lastPoint=Y,q.details++,q.timeout=Yi(function(){Q(this)}.bind(q),T.doubleClickSpeed)}return 2===q.details}}(),isShiftDown:function(u){return u?u.shiftKey:Zo["16"]},isCtrlDown:function(e){return e?Ml?e.metaKey:e.ctrlKey:Ml?Zo["91"]:Zo["17"]},getClientPoint:function(g){return To(g)&&(g=On(g)),{x:g.clientX,y:g.clientY}},isMouseEvent:function(c){return c instanceof MouseEvent||0===c.type.indexOf("mouse")},getTargetElement:function(r){var S,y=_b(r);if(S=T.isMouseEvent(r)||!I.elementFromPoint?r.target:I.elementFromPoint(y.x,y.y),bq&&I.elementFromPoint){for(var N=[],b=[];"none"===S.style.pointerEvents;)N.push(S),b.push(S.style.display||""),S.style.display="none",S=I.elementFromPoint(y.x,y.y);N.forEach(function(i,k){i.style.display=b[k]})}return S},getPagePoint:function(e){return To(e)&&(e=On(e)),{x:e.pageX,y:e.pageY}},createObject:function(h,V){var N=new h;for(var m in V){var T=V[m];if(mq(T))N[m]=T;else if(0===m.indexOf("s:"))N.s(m.substr(2),V[m]);else if(0===m.indexOf("a:"))N.a(m.substr(2),V[m]);else{var U=Ro(m),T=V[m];N[U]?(N[U](T),"setToolTip"===U&&N.enableToolTip&&N.enableToolTip()):N[m]=T}}return N},setImage:function(P,e,K,S){var d=arguments.length;4===d?Lj(P,S,e,K):2===d?jm(e)?e.substr(0,12)==oi?Oh(P,T.parse(e)):Lj(P,e):Oh(P,e):1===d&&Lj(P,P)
},getImage:function(I,q,O){var M;if(I==C)return C;if(oc(I)?M=I:(M=$b[I],I&&M===H&&(kh&&kh[I]||Lj(I,I))),q&&M&&M.tagName){var t;t="override"===O?"colors_override":"override_rgb"===O?"colors_override_rgb":"override_a"===O?"colors_override_a":"colors",M[t]||(M[t]={__count__:0});var X=M[t][q];return X||(M[t].__count__>T.imageCacheThreshold&&(M[t]={__count__:0}),X=fl(M,dh(q),M.width,M.height,O),M[t][q]=X,M[t].__count__++),X}return M},isImageComplete:function(U,t,I){var E=$p(U);if(!E)return!1;if(E.tagName)return E.complete;for(var v,U,X,B=E.comps,L=!0,Z=0,F=B.length;F>Z;Z++)if(v=B[Z],X=v.type,"image"===v.type){U=v.name,U&&U.func&&(U=hg(U,t));var e=ci(U,t,I);if(!e){L=!1;break}}else if(bl.test(X)&&T.getCompType(X)===H){L=!1,Wq(X);break}return L},getId:function(){var E=1;return function(){return++E}}(),callLater:function(V,d,G,m){var E=function(){V.apply(d,G)};return m?Yi(E,m):f.requestAnimationFrame(E)},cancelLater:function(S,Z){Z?Oi(S):f.cancelAnimationFrame(S)},clone:function(l){if(null==l||"object"!=typeof l)return l;if(l instanceof Date){var e=new Date;return e.setTime(l.getTime()),e}if(l instanceof Array){for(var e=[],W=0,H=l.length;H>W;W++)e[W]=ho(l[W]);return e}if(l instanceof Dg){for(var e=new Dg,W=0,H=l.length;H>W;W++)e.set(W,ho(l.get(W)));return e}if(l instanceof Iq)return l;if(l instanceof cr){var e=new cr;return e.deserialize(l.serialize()),e}if(l instanceof b){var e={};for(var V in l)l.hasOwnProperty(V)&&(e[V]=ho(l[V]));return e}return l},callWhenLoaded:function(W,L){L=L||100;var A=Jf(W,L);No||(No={}),No[A]={tick:A,cb:W,delay:L}},beforeLoadURL:function(h,$){if(No){var G={};for(var $ in No){var l=No[$];Oi(l.tick);var z=Jf(l.cb,l.delay);G[z]={tick:z,delay:l.delay,cb:l.cb}}No=G}return T.convertURL?T.convertURL(h,$):h},convertURL:function(W){return W},handleRefGraphLoaded:function(){},handleCompTypeLoaded:function(){},handleImageLoaded:function(){},handleUnfoundImage:function(){return T.getImage("default_blank")},resizeImage:function(I,V,M,k){M||(M=V),k||(k=uc());var s=k.getContext("2d");return Eh(k,V,M,1),s.drawImage(I,0,0,V,M),k},resizeImagePOT:function(O,H,P){if(!O||!O.tagName)return O;var y=O.width,I=O.height;if(!y||!I)return O;if(Of.isPOT(y)&&Of.isPOT(I)&&(!H||y===I))return O;var n,z;return H?z=n=Of.nearestPOT(Math.min(y,I)):(n=Of.nearestPOT(y),z=Of.nearestPOT(I)),T.resizeImage(O,n,z,P)},sortFunc:function(J,V){if(J===V)return 0;if(J==C&&V!=C)return 1;if(J!=C&&V==C)return-1;if(J==C&&V==C)return 0;var f,x=typeof J,Y=typeof V;return x===Wb&&Y===Wb?f=J.localeCompare(V):x===pn&&Y===pn&&(f=J-V),f===H&&(f=(""+J).localeCompare(""+V)),f>0?1:0>f?-1:0},getClassMap:function(){return vm},getClass:function(q){if(jm(q)){var b,o=vm[q];if(!o){b=q.split("."),o=f;for(var v=0;v<b.length;v++)o=o[b[v]];vm[q]=o}return o}return q},def:function(R,t,Z){var p,y,C,W=function(){};if(W.prototype=t.prototype,p=new W,jm(R)){if(vm[R])throw"'"+R+"' already defined";C=ue(R),p.getClassName=function(){return R}}else C=R;if(p.constructor=C,p.getClass=function(){return C},p.getSuperClass=function(){return t},Z)for(y in Z)Yp[y]&&Yp.hasOwnProperty(y)?Yp[y](p,Z):Ue(p,Z,y);C.prototype=p,C.superClass=t.prototype},startAnim:function(){var v=function(Q){Q.duration&&(Q.startTime=cl()),Q.timeId=ef(Q.tick,C,C,Q.interval)};return function(e){return e=ho(e),e.easing=e.easing||T.animEasing,e.duration||e.frames||(e.duration=T.animDuration),e.t=0,e.duration?e.interval=0:(e.frame=0,e.interval=e.interval||10),e.tick=function(){if(e.duration){var v=(cl()-e.startTime)/e.duration;if(v>1&&(v=1),e.t=v,e.action(e.easing(v),v),!e.isRunning())return;1===v?e.stop():e._isPaused||(e.timeId=ef(e.tick))}else{if(e.frame++,v=e.t=e.frame/e.frames,e.action(e.easing(v),v),!e.isRunning())return;e.frame<e.frames?e._isPaused||(e.timeId=ef(e.tick,C,C,e.interval)):e.stop()}},e.resume=function(){e._isPaused&&(delete e._isPaused,e.duration?e.t<1&&(e.startTime=cl()-e.duration*e.t,e.timeId=ef(e.tick)):e.frame<e.frames&&(e.timeId=ef(e.tick,C,C,e.interval)))},e.pause=function(){si(e.timeId,!e.duration),e._isPaused=!0},e.isPaused=function(){return this._isPaused},e.stop=function(w){e.isRunning()&&(si(e.timeId,!e.duration),delete e.timeId,e.duration?e.t<1&&w&&(e.t=1,e.action(e.easing(1),1)):e.frame<e.frames&&w&&(e.frame=e.frames,e.action(e.easing(1),1)),e._37o&&e._37o(),e.finishFunc&&e.finishFunc())},e.isRunning=function(){return e.timeId!=C},e.delay?ef(v,C,[e],e.delay):v(e),e}}(),getTextSize:function(){var A={},L=I?uc().getContext("2d"):C;return function(V,v){L.font=V?V:Tq;var h=A[L.font];return h||(h=2*L.measureText("e").width+4,A[L.font]=h),{width:L.measureText(v).width+T.textExtraWidth,height:h}}}(),drawText:function(j,d,Z,p,x,S,$,e,Q,L,n){if(d!=C){var a=Pr(Z,d),q={};q.y=L&&L!==_c?L===pc?S+a.height/2:S+e-a.height/2:S+e/2,q.x=Q&&Q!==Ob?Q===zb?x+$-a.width/2:x+$/2:x+a.width/2,Zp(j,d,q,Z,p),n&&Pm(j,d,Z,p,q.x,q.y,a.width,n)}},getDistance:function(M,J){var d=M.length;return J?3===d?Q(rf(M[0]-J[0])+rf(M[1]-J[1])+rf(M[2]-J[2])):2===d?Q(rf(M[0]-J[0])+rf(M[1]-J[1])):M.z===H?Q(rf(J.x-M.x)+rf(J.y-M.y)):Q(rf(J.x-M.x)+rf(J.y-M.y)+rf(J.z-M.z)):3===d?Q(rf(M[0])+rf(M[1])+rf(M[2])):2===d?Q(rf(M[0])+rf(M[1])):void 0},brighter:function(n,J){return 0>J&&(J=-J),ig(n,J?J:40)},darker:function(J,y){return y>0&&(y=-y),ig(J,y?y:-40)},traverse:function(){function n(v){var T=function(A,K,W,a){W&&W(A,K);var I;if(I=""===v?A.getChildren():A[v],I instanceof L.List&&(I=I.getArray()),I)for(var U=0,H=I.length;H>U;U++)T(I[U],A,W,a);a&&a(A,K)};return T}var I={};return function(R,F,s,N){N=N||"";var E;(E=I[N])||(E=I[N]=n(N)),E(R,null,F,s)}}(),unionPoint:function(c,k){if(!c)return C;if(2===arguments.length)return c&&k?{x:r(c.x,k.x),y:r(c.y,k.y),width:A(c.x-k.x),height:A(c.y-k.y)}:C;var T=c;if(T._as&&(T=T._as),T.length===H)return C;var F=T.length;if(0>=F)return C;for(var Z=1,U=T[0],P={x:U.x,y:U.y,width:0,height:0};F>Z;Z++){U=T[Z];var M=r(P.x,U.x),O=h(P.x+P.width,U.x),N=r(P.y,U.y),m=h(P.y+P.height,U.y);P.x=M,P.y=N,P.width=O-M,P.height=m-N}return P},unionRect:function(R,_){if(R&&!_)return ho(R);if(!R&&_)return ho(_);if(R&&_){var X={x:r(R.x,_.x),y:r(R.y,_.y)};return X.width=h(R.x+R.width,_.x+_.width)-X.x,X.height=h(R.y+R.height,_.y+_.height)-X.y,X}return C},containsPoint:function(d,k,M,J){if(J!=C&&1!==J){var A=d.x+d.width/2,y=d.y+d.height/2;d={x:A-d.width/2*J,y:y-d.height/2*J,width:d.width*J,height:d.height*J}}if(M){var O=d.width/2,h=d.height/2,e=_(-M),u=t(-M),w=k.x-d.x-O,W=k.y-d.y-h;return k={x:u*w-e*W,y:e*w+u*W},Ad({x:-O,y:-h,width:d.width,height:d.height},k)}return!(!d||k.x<d.x||k.y<d.y||k.x>d.x+d.width||k.y>d.y+d.height)},containsRect:function(G,u){if(!G||!u)return!1;var E=u.x,x=u.y,I=u.width,B=u.height,K=G.width,q=G.height;if(0>(K|q|I|B))return!1;var U=G.x,t=G.y;if(U>E||t>x)return!1;if(K+=U,I+=E,E>=I){if(K>=U||I>K)return!1}else if(K>=U&&I>K)return!1;if(q+=t,B+=x,x>=B){if(q>=t||B>q)return!1}else if(q>=t&&B>q)return!1;return!0},intersectsRect:function(Z,Q){if(!Z||!Q)return!1;var T=Q.width,p=Q.height,h=Z.width,H=Z.height;if(0>=h||0>=H||0>=T||0>=p)return!1;var r=Q.x,L=Q.y,z=Z.x,q=Z.y;return h+=z,H+=q,T+=r,p+=L,h>r&&H>L&&T>z&&p>q},intersection:function($,v){if(!$||!v)return C;var q=v.x,B=v.y,u=$.x,c=$.y,O=q,d=B,X=u,L=c;return O+=v.width,d+=v.height,X+=$.width,L+=$.height,u>q&&(q=u),c>B&&(B=c),O>X&&(O=X),d>L&&(d=L),O-=q,d-=B,0>=O||0>=d?C:{x:q,y:B,width:O,height:d}},grow:function(N,O,$){$===H&&($=O),N.x-=O,N.y-=$,N.width=N.width+2*O,N.height=N.height+2*$},getScreenPoint:function(v,Z,m,p,O,F,N){var y=m.getBoundingClientRect(),B=v*(F||1)-m.scrollLeft+(p||0),d=Z*(N||1)-m.scrollTop+(O||0),n=ne(m,!1);if(n){var a=new ng(B,d,0);return a.applyMatrix4(n),console.log(a),{x:a.x,y:a.y}}return{x:B+y.left,y:d+y.top}},getLogicalPoint:function(i,I,o,y,v,N){var C,V,T=I.getBoundingClientRect();i.target?(cq(i)?Ml?Zo["91"]=!0:Zo["17"]=!0:Ml?Zo["91"]=!1:Zo["17"]=!1,Zo["16"]=ee(i)?!0:!1,i=To(i)?On(i):i,C=i.clientX,V=i.clientY):(C=i.x,V=i.y);var l=ne(I,!0);if(l){var Z=new ng(C,V,0);Z.applyMatrix4(l);do{if(Math.abs(Z.z)<=1e-6)break;var h=new ng(C,V,1);if(h.applyMatrix4(l),Math.abs(h.z)<=1e-6){Z=h;break}if(h.sub(Z),Math.abs(h.z)<=1e-6)break;Z.addScaledVector(h,-Z.z/h.z)}while(!1);return{x:(Z.x+I.scrollLeft-(o||0))/(v||1),y:(Z.y+I.scrollTop-(y||0))/(N||1)}}return{x:(C-T.left+I.scrollLeft-(o||0))/(v||1),y:(V-T.top+I.scrollTop-(y||0))/(N||1)}},removeHTML:function(){var J;return function(r){return r&&r.getView&&(r=r.getView()),r&&r.parentNode?J===r?!0:(J=r,r.parentNode.removeChild(r),J=C,!0):!1}}(),getToolTipDiv:function(){if(!Xr){Xr=vh(),zq=vh();var U=Xr.style;T.baseZIndex!=C&&(U.zIndex=Ym(T.baseZIndex)+3+""),U.whiteSpace="nowrap",U.color=T.toolTipLabelColor,U.background=T.toolTipBackground,U.font=T.toolTipLabelFont,U.padding="5px",U.boxShadow="0px 0px 3px "+T.toolTipShadowColor}return Xr},isToolTipShowing:function(){return Xr&&Xr.parentNode?!0:zq&&zq.parentNode?!0:!1},updateToolTipContent:function(l,B){if(T.isToolTipShowing()&&(B||(B=ym&&ym.view),l===H&&B&&ym.e&&(l=B.getToolTip(ym.e)),l!=C)){var K;l.html?(l=l.html,K=zq):K=Xr,K.innerHTML=l}},hideToolTip:function(){if(Af(),T.isToolTipShowing()){me(Xr),me(zq);var O=ym&&ym.view;O&&O.onHideToolTip&&O.onHideToolTip(),ym=C}},showToolTip:function(o,r,u){if(!o||r==C)return Oj(),void 0;T.getToolTipDiv();var j,t;if(r.html?(r=r.html,j=zq,me(Xr)):(j=Xr,me(zq)),t=j.style,j.innerHTML="",r instanceof HTMLElement?j.appendChild(r):j.innerHTML=r,j.parentNode||L.Default.appendToScreen(j),o.target){o=_b(o);var v=fk(),Z=o.x,E=o.y,P=Cd?60:12;if(Cd){var w=j.getBoundingClientRect();t.left=Z-w.width/2+we,t.top=E-w.height-P<v.top?E+P+we:E-w.height-P+we}else{t.left=Z+P+we,t.top=E+P+we;var w=j.getBoundingClientRect();w.left+w.width>v.width&&(t.left=Z-P-w.width+we),w.top+w.height>v.height&&(t.top=E-P-w.height+we),w.left<0&&(t.left=Z+P+we),w.top<0&&(t.top=E+P+we)}}else t.left=o.x+we,t.top=o.y+we;Af(),u===H?u=ym&&ym.view:ym={e:o,view:u},u&&u.onShowToolTip&&u.onShowToolTip()},startDragging:function(r,o,C){C==H&&(C=!0),r!==wk&&(wk?C&&(To(o)?wk.handleWindowTouchEnd(o):wk.handleWindowMouseUp(o)):To(o)?(g(f,kg,xf),g(f,go,jl),g(f,"blur",jl)):(g(f,Ye,Gd),g(f,ej,gb),g(f,"blur",gb)),wk=r)},getImageMap:function(){return $b},toBoundaries:function(k,w,s,H){var e=[];return Pk(k,w,s,H).forEach(function(W){var l=[];W.forEach(function(V){l.push(V.x,V.y)}),e.push(l)}),e},getCurrentKeyCodeMap:function(){return Zo},drawCenterImage:function(l,k,O,R,N,t,I,v){!N&&t&&t.isSelfViewEvent&&(N=t);var j=wc(k,N,t),P=sl(k,N,t);Ae(l,k,p(O-j/2),p(R-P/2),j,P,N,t,I,v)},drawStretchImage:function(F,U,c,t,V,O,Q,e,C,B,I,G){!e&&C&&C.isSelfViewEvent&&(e=C);var q,E=wc(U,e,C,O),g=sl(U,e,C,Q);"uniform"===c?(q=r(O/E,Q/g),E*=q,g*=q,t+=p((O-E)/2),V+=p((Q-g)/2),O=E,Q=g):"centerUniform"===c&&((E>O||g>Q)&&(q=r(O/E,Q/g),E*=q,g*=q),t+=p((O-E)/2),V+=p((Q-g)/2),O=E,Q=g);var D=F.interactiveInfo;if(D){var i;if(i="center"===c?{x:t+O/2-E/2,y:V+Q/2-g/2,width:E,height:g}:{x:t,y:V,width:O,height:Q},D.rect){var l=D.compInfos,S=l.length;S&&(l[S-1].rect.image=U)}else D.rect=i}if("center"===c){var T=I!==!1&&(E>O||g>Q);T&&(F.save(),F.beginPath(),F.rect(t,V,O,Q),F.clip()),Ae(F,U,t+O/2-E/2,V+Q/2-g/2,E,g,e,C,B,G),T&&F.restore()}else Ae(F,U,t,V,O,Q,e,C,B,G)},toCanvas:function(S,Z,d,Q,z,x,N,s,R){S=$p(S,N),Z=Z||wc(S,z),d=d||sl(S,z);var h=uc(),$=yh(h);return s?(Eh(h,Z,d,s),$.scale(s,s)):Eh(h,Z,d,1),Oq($,S,Q,0,0,Z,d,z,x,N,R),S&&S.clampToEdge&&(h.clampToEdge=S.clampToEdge),$.restore(),h},toGrayColor:function(C){if(!C)return C;var J=Nm(C),m=p(.299*J[0]+.587*J[1]+.114*J[2]);return"rgba("+m+","+m+","+m+","+J[3]/255+")"},createGradientImage:function(W,_,v,J){for(var i=["L",0,0,W,0,1,0,0,1,0,0],t=0,q=Math.min(_.length,v.length);q>t;t++)i.push(v[t],_[t]);var V=L.Default.toCanvas({width:W,height:W,clampToEdge:!0,comps:[{type:"shape",rotation:J||0,points:[0,0,W,0,W,W,0,W],background:"#ffffff",gradientPack:i}]});return V},createElement:function(H,s,U,r){var k=I.createElement(H);return Pi(k,s||W.widgetBorder,2),k.style.font=U?U:Tq,r!=C&&(k.value=r),T.onElementCreated&&T.onElementCreated(k),k},containedInView:function(D,y){var t=Cr(y).getBoundingClientRect();return Ad({x:t.left,y:t.top,width:t.width,height:t.height},oo(D))},isIsolating:function(){return dg>0},setIsolating:function(n){n?dg++:dg--},getMSMap:function(){return Yp},stringify:function(k,x,Q){var B=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()};var A=cr.prototype.toJSON;cr.prototype.toJSON=function(){return"__ht__dataModel"+this.serialize(0)},x=Q?0:x==C?2:x;var u=JSON.stringify(k,function(x,e){return"function"==typeof e?"__ht__"+(e.__ht__||e.toString()):ah(e)?or(e):Dl(e)?null:e instanceof L.List?"__ht__list"+(e.__ht__list||T.stringify(e._as)):e},x);return Date.prototype.toJSON=B,cr.prototype.toJSON=A,Q&&(u=oi+fr(u)),u},parse:function(u,r){return jm(u)?u.substr(0,12)!=oi||(u=qi(u.substr(12)),jm(u))?(r=r||{},JSON.parse(u,function(i,N){if(jm(N))if(r.ignoreFunction||"__ht__function"!=N.substr(0,14)){if(!r.ignoreDate&&"__ht__date"==N.substr(0,10))return new Date(Ym(N.substr(10)));if("__ht__list"===N.substr(0,10))return new Dg(T.parse(N.substr(10)));if(!r.ignoreDataModel&&"__ht__dataModel"===N.substr(0,15)){var L=new cr;return L.deserialize(T.parse(N.substr(15))),L}}else{var a=N.indexOf("{")+1,h=N.lastIndexOf("}"),x=N.indexOf("(")+1,D=N.indexOf(")");if(a&&h&&x&&D)try{var y=new Function(N.substring(x,D),N.substring(a,h));return y.__ht__=N.substr(6),y}catch(e){throw console.info("=== SyntaxError ===\n",N),e}}return N})):u:u},loadJS:function(Q,e){e&&Q.push(e);var K=Q.shift();if(Tl(K))Q=K.contact(Q),T.loadJS(Q);else if(mq(K))K(),T.loadJS(Q);else if(jm(K)){var H=I.createElement("script");H.onload=function(){T.loadJS(Q)},H.setAttribute("src",K),I.getElementsByTagName("head")[0].appendChild(H)}else Q.length&&T.loadJS(Q)},extendClass:function(k,A){var B=k.prototype;for(var K in A)Yp[K]&&Yp.hasOwnProperty(K)?Yp[K](B,A):B[K]=A[K]},toRoundedCorner:function(){function u(H,k,a){H.x=k.x,H.y=k.e||a,H.z=k.y}var N=new ng,v=new ng,L=new ng,R=new ng;return function(Q,q){var S,l=0;Q.getPoints&&(l=Q.getElevation(),Q=Q.getPoints()),S=Q instanceof Dg?Q:new Dg(Q);var V=S.size();if(0>=q)return{points:S};var e=new Dg,J=new Dg,E=S.get(0);u(N,E,l),e.add(E),J.add(1);for(var y=1;V>y;y++)if(V>y+1){var M=S.get(y),x=S.get(y+1);u(v,M,l),u(L,x,l),R.subVectors(N,v).setLength(Math.min(.99*R.length(),q)).add(v),M.e!==H||E.e!==H?e.add({x:R.x,y:R.z,e:R.y}):e.add({x:R.x,y:R.z}),e.add(M),R.subVectors(L,v).setLength(Math.min(.99*R.length(),q)).add(v),M.e!==H||x.e!==H?e.add(E={x:R.x,y:R.z,e:R.y}):e.add(E={x:R.x,y:R.z}),N.copy(R),J.addAll([2,3])}else e.add(S.get(y)),J.add(2);return{points:e,segments:J}}}(),toColorData:Nm,setCanvas:Eh,createDiv:vh,createDisabledDiv:rk,createView:eh,createCanvas:uc,appendChild:Nh,initContext:yh,checkLoadingImage:cc,translateAndScale:fb,layout:mb,getPosition:Zh,drawPoints:Fc,drawRoundRect:Dk,drawBorder:lo,setFocus:tn,getter:Dm,setter:Ro,isEmptyObject:ss,cameraPriority:function(){var I={skybox:0,main:1e4,top:1e7,infinity:1/0};return b.seal(b.defineProperties({},{skybox:{configurable:!1,enumerable:!1,get:function(){return I.skybox},set:function(Q){if(Q>=I.main)throw new RangeError("Skybox camera must have lower priority than the main camera.");I.skybox=Number(Q)}},main:{configurable:!1,enumerable:!1,get:function(){return I.main},set:function(m){if(m<=I.skybox)throw new RangeError("Main camera must have higher priority than the skybox camera.");if(m>=I.top)throw new RangeError("Main camera must have lower priority than the top camera.");I.main=Number(m)}},top:{configurable:!1,enumerable:!1,get:function(){return I.top},set:function(m){if(m<=I.main)throw new RangeError("Top camera must have higher priority than the main camera.");I.top=Number(m)}}}))}(),addFontFace:function(){function y(V){var Z=V.substr(V.lastIndexOf(".")+1);V=T.convertURL?T.convertURL(V):V;var h=a[Z]||Z;return{postfix:Z,url:"url("+V+') format("'+h+'")'}}function E(M,u){return p[M.postfix]-p[u.postfix]}var a={ttf:"truetype",otf:"opentype",eot:"embedded-opentype"},p={eot:0,woff2:1,woff:2,ttf:3,otf:4};return function(w,p,e,O){if(w){O&&T.removeFontFace(w,!0);var D;if(D=$e[w])return D.parentNode||I.head.appendChild(D),e&&e(D),void 0;if(jm(p)&&(p=[p]),p=p.filter(function(y){return jm(y)?y.length>0:!1}),0!==p.length){p=p.map(y);var C="";p.sort(E).forEach(function(N){C+=", "+N.url}),C=C.substr(2);var D=I.createElement("style");D.innerText='@font-face{font-family: "'+w+'";src: '+C+";}",I.head.appendChild(D),$e[w]=D,e&&e(D)}}}}(),clearFontFace:function(){if(!ss($e)){for(var W in $e)T.removeFontFace(W);$e={}}},removeFontFace:function(L,c){if(L){var h=L;if(h.tagName){if(me(h),c){var M=[];for(var O in $e)$e[O]===h&&M.push(O);var k=M.length;if(k>0)for(var V=0,k=M.length;k>V;V++)delete $e[M[V]]}}else(h=$e[L])&&(me(h),c&&delete $e[L])}},getFontFaceMap:function(){return $e},handleFontFacesLoaded:function(){}},!0),I&&I.fonts&&I.fonts.addEventListener&&I.fonts.addEventListener("loadingdone",function(H){T.handleFontFacesLoaded(H.fontfaces),T.findView("all").forEach(function(w){w.redraw?w.redraw():w.iv()})}),yd(B,{autoAdjustIndex:1,hierarchicalRendering:1,adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1,doubleClickToToggle:1,continuousLayout:1,syncSize:1},!0);var xg=T.disabledOpacity,te=T.toolTipDelay,un=T.devicePixelRatio,Ck=T.autoMakeVisible,Bo=T.autoHideScrollBar,Rn=T.imageGradient,Bs=T.showToolTip,Oj=T.hideToolTip,lb=T.dashPattern,Hj=T.lineCap,sg=T.lineJoin,Jd=T.labelColor,Pj=T.labelSelectColor,Tq=T.labelFont,hi=T.widgetIndent,pj=T.widgetRowHeight,Mj=T.widgetHeaderHeight,_h=T.widgetTitleHeight,Om=T.scrollBarColor,ks=T.scrollBarSize,de=T.scrollBarTimeout,ak=T.scrollBarMinLength,Kc=T.scrollBarInteractiveSize,Ok=T.zoomIncrement,Bf=T.scrollZoomIncrement,yr=T.pinchZoomIncrement,vd=T.zoomMax,Nc=T.zoomMin,yl=T.createObject,Ne=T.preventDefault,wg=T.setImage,$p=T.getImage,ci=T.isImageComplete,ji=T.drawCenterImage,Oq=T.drawStretchImage,Eb=T.getId,ef=T.callLater,si=T.cancelLater,le=T.sortFunc,ho=T.clone,ue=T.getClass,$m=T.startAnim,dm=T.brighter,qe=T.darker,hf=T.drawText,Pr=T.getTextSize,Rj=T.isLeftButton,jr=T.isMiddleButton,hl=T.isRightButton,cg=T.getTouchCount,jb=T.isDoubleClick,ee=T.isShiftDown,cq=T.isCtrlDown,oo=T.getClientPoint,_b=T.getPagePoint,mp=T.getDistance,Jm=T.unionPoint,Ar=T.unionRect,Ad=T.containsPoint,sc=T.containsRect,We=T.intersectsRect,pl=T.intersection,fk=T.getWindowInfo,Sb=T.grow,Dc=T.getLogicalPoint,Wj=T.getScreenPoint,Jl=T.startDragging,me=T.removeHTML,qm=T.createElement,Er=T.segmentResolution,$r=T.shapeResolution,Zr=T.shapeSide,Po=T.def,ik=function(N,b,x){Po(s+"."+N,b,x)},Tf=function(m,d){m.childNodes.forEach(function(g){d(g),Tf(g,d)})};yd(T,{toolTipLabelColor:Jd,toolTipLabelFont:Tq,toolTipBackground:W.toolTipBackground,toolTipShadowColor:Ul,debugTipLabelFont:Tq,debugTipLabelColor:Jd,debugTipBackground:W.toolTipBackground,drawBreakableText:qk,setDevicePixelRatio:function(e){un=T.devicePixelRatio="number"==typeof e?e:rc(f),Tf(I.body,function(V){var n=V._ht;n&&n._canvas&&(Eh(n._canvas,n.getWidth(),n.getHeight()),n.redraw?n.redraw():n.iv())})},getPosition3dGap:function(){return ec()}},!0);var no=1e-6,Nq="undefined"!=typeof Uint16Array?Uint16Array:Array,Lg="undefined"!=typeof Uint32Array?Uint32Array:Nq,$n="undefined"!=typeof Float32Array?Float32Array:Array,Go=function(A,r,M){var Q=[A[0]-r[0],A[1]-r[1],A[2]-r[2]];if(M){var q=mp(Q);q>0&&(Q[0]/=q,Q[1]/=q,Q[2]/=q)}return Q},nc=function(){var Z="charCodeAt",X=2*(2*bg.length+1);for(var l in f)if(l===s+Ob[0]+(we.length+2)){var u=f[l];if(!u)break;for(var $=u.length,i=0;$>i;i++)if(u[i][Z](0)===X&&u[i+1]!=C&&u[i+1]===we[0]&&u[i+2]!=C&&u[i+2][Z](0)===X){for(var N=i+3;$>N;N++)if(u[N][Z](0)===X){if(0==u[N+1])for(var h,t=N+2;$>t;t++){if(u[t][Z](0)===X){0==u[t-1]&&h&&(zc=h.substr(0,h.length-1));break}h==C?h=u[t]:h+=u[t]}break}break}break}return function(c){return[-c[0],-c[1],-c[2]]}}(),he=function(N,E){return 3===N.length?N[0]*E[0]+N[1]*E[1]+N[2]*E[2]:N[0]*E[0]+N[1]*E[1]},Wp=function(){var d=new Array(16);return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d},ab=Wp(),Lc=function(b){var N=new Array(16);return N[0]=b[0],N[1]=b[1],N[2]=b[2],N[3]=b[3],N[4]=b[4],N[5]=b[5],N[6]=b[6],N[7]=b[7],N[8]=b[8],N[9]=b[9],N[10]=b[10],N[11]=b[11],N[12]=b[12],N[13]=b[13],N[14]=b[14],N[15]=b[15],N},Qc=function(x,u){return x[0]=u[0],x[1]=u[1],x[2]=u[2],x[3]=u[3],x[4]=u[4],x[5]=u[5],x[6]=u[6],x[7]=u[7],x[8]=u[8],x[9]=u[9],x[10]=u[10],x[11]=u[11],x[12]=u[12],x[13]=u[13],x[14]=u[14],x[15]=u[15],x},dn=function(S){return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S},Zg=function(b,I){var q=b[0],p=b[1],F=b[2];return b[0]=I[0]*q+I[4]*p+I[8]*F+I[12],b[1]=I[1]*q+I[5]*p+I[9]*F+I[13],b[2]=I[2]*q+I[6]*p+I[10]*F+I[14],b},Jq=function(X,Z){var P=X[0],x=X[1],r=X[2],b=X[3];return X[0]=Z[0]*P+Z[4]*x+Z[8]*r+Z[12]*b,X[1]=Z[1]*P+Z[5]*x+Z[9]*r+Z[13]*b,X[2]=Z[2]*P+Z[6]*x+Z[10]*r+Z[14]*b,X[3]=Z[3]*P+Z[7]*x+Z[11]*r+Z[15]*b,X},_o=function(I,E,p){var k,G;if("number"==typeof I?G=I:I&&(G=I.length,k=!0),G)for(var u,y=0,P=0;G>y;y++)u=E?r(G-1,1==P?y+1:2==P?y-1:y):y,p(k?I[u]:u),++P>2&&(P=0)},Ho=function(){var c,h,V,g,i=np(Bi[1]+Bi[7]),Z=np(Bi[0]+Bi[3]-Bi[10]),J=np(Bi[8]+2),q=function(){return h=V.charAt(c),c+=1,h},Y=function(){var r="";if(h===J)for(;q();){if(h===J)return q(),r;r+=h}else q()},X=function(){for(;h&&" ">=h;)q()},p=function(){var I,F={};if(h===i){if(q(),X(),h===Z)return q(),F;for(;h;){if(I=Y(),X(),q(),F[I]=g(),X(),h===Z)return q(),F;q(),X()}}};return g=function(){switch(X(),h){case i:return p();default:return Y()}},function($){if(D={},$){var Y;if(V=$,c=0,h=" ",Y=g(),X(),!h)return Y}}}(),Gf=function(Y,r){if(r){var m=_(r),A=t(r),C=Y[4],b=Y[5],E=Y[6],j=Y[7],e=Y[8],F=Y[9],W=Y[10],y=Y[11];Y[4]=C*A+e*m,Y[5]=b*A+F*m,Y[6]=E*A+W*m,Y[7]=j*A+y*m,Y[8]=e*A-C*m,Y[9]=F*A-b*m,Y[10]=W*A-E*m,Y[11]=y*A-j*m}},ki=function(K,a){if(a){var M=_(a),V=t(a),q=K[0],Y=K[1],O=K[2],S=K[3],B=K[8],r=K[9],b=K[10],i=K[11];K[0]=q*V-B*M,K[1]=Y*V-r*M,K[2]=O*V-b*M,K[3]=S*V-i*M,K[8]=q*M+B*V,K[9]=Y*M+r*V,K[10]=O*M+b*V,K[11]=S*M+i*V}},Sp=function(F,H){if(H){var j=_(H),v=t(H),h=F[0],J=F[1],b=F[2],c=F[3],x=F[4],w=F[5],s=F[6],l=F[7];F[0]=h*v+x*j,F[1]=J*v+w*j,F[2]=b*v+s*j,F[3]=c*v+l*j,F[4]=x*v-h*j,F[5]=w*v-J*j,F[6]=s*v-b*j,F[7]=l*v-c*j}},Pn=function(_,x,m){return sd(C,m===!1?C:_.getFinalScale3d(),_.getFinalRotation3d(),_.getRotationMode(),_.p3(),C,x)},sd=function(o,r,g,d,L,h,F){return h||(h=Wp()),L&&Zm(h,L),Ap(h,g,d),F&&Wo(h,h,F),r&&ag(h,r),o&&Wo(h,h,o),h},Ko=function(z,u,d){u=Ym(u),d=Ym(d);var e=this;e.g=z,e._84O=u,e._85O=d,e._70I=!0,e.F=0,e._83O=u+d,e.pen={x:0,y:0}},gf="lineDashOffset",wl="setLineDash",Sj=function(l){for(var f in l)1===f.length&&(gf=l[f]);return f?1:0},aq=function($,b,O){return Wf(b)?$:$[wl]?($[wl](b),O&&($.lineDashOffset=O),$):new Ko($,b[0],b.length>1?b[1]:b[0])},Sl=function(l,r){!Wf(r)&&l[wl]&&(l[wl]($c),l.lineDashOffset=0)};Po(Ko,b,{_69I:6,moveTo:function(K,b){var T=this,L=T.pen;L.x=K,L.y=b,T.g.moveTo(K,b),T.start||(T.start={x:K,y:b})},lineTo:function(r,a){var A=this,Z=A.pen,d=r-Z.x,O=a-Z.y,B=Nn(O,d),Y=t(B),h=_(B),Q=A._23O(Z.x,Z.y,r,a),p=A._85O,X=A._84O,u=A._83O;if(A.F){if(A.F>Q)return A._70I?A._72I(r,a):A.moveTo(r,a),A.F-=Q,void 0;if(A._70I?A._72I(Z.x+Y*A.F,Z.y+h*A.F):A.moveTo(Z.x+Y*A.F,Z.y+h*A.F),Q-=A.F,A.F=0,A._70I=!A._70I,!Q)return}var W=$(Q/u);if(W){for(var n=Y*X,s=h*X,e=Y*p,J=h*p,g=0;W>g;g++)A._70I?(A._72I(Z.x+n,Z.y+s),A.moveTo(Z.x+e,Z.y+J)):(A.moveTo(Z.x+e,Z.y+J),A._72I(Z.x+n,Z.y+s));Q-=u*W}A._70I?Q>X?(A._72I(Z.x+Y*X,Z.y+h*X),A.moveTo(r,a),A.F=p-(Q-X),A._70I=!1):(A._72I(r,a),Q===X?(A.F=0,A._70I=!A._70I):(A.F=X-Q,A.moveTo(r,a))):Q>p?(A.moveTo(Z.x+Y*p,Z.y+h*p),A._72I(r,a),A.F=X-(Q-p),A._70I=!0):(A.moveTo(r,a),Q===p?(A.F=0,A._70I=!A._70I):A.F=p-Q)},quadraticCurveTo:function(B,u,d,j){var P,k=this,p=k.pen,z=p.x,l=p.y,y=k._22O(z,l,B,u,d,j),I=0,X=0,O=k._85O,w=k._84O;if(k.F){if(k.F>y)return k._70I?k._71I(B,u,d,j):k.moveTo(d,j),k.F-=y,void 0;if(I=k.F/y,P=k._20O(z,l,B,u,d,j,I),k._70I?k._71I(P[2],P[3],P[4],P[5]):k.moveTo(P[4],P[5]),k.F=0,k._70I=!k._70I,!y)return}var e=y-y*I,s=$(e/k._83O),Y=w/y,F=O/y;if(s)for(var U=0;s>U;U++)k._70I?(X=I+Y,P=k._21O(z,l,B,u,d,j,I,X),k._71I(P[2],P[3],P[4],P[5]),I=X,X=I+F,P=k._21O(z,l,B,u,d,j,I,X),k.moveTo(P[4],P[5])):(X=I+F,P=k._21O(z,l,B,u,d,j,I,X),k.moveTo(P[4],P[5]),I=X,X=I+Y,P=k._21O(z,l,B,u,d,j,I,X),k._71I(P[2],P[3],P[4],P[5])),I=X;e=y-y*I,k._70I?e>w?(X=I+Y,P=k._21O(z,l,B,u,d,j,I,X),k._71I(P[2],P[3],P[4],P[5]),k.moveTo(d,j),k.F=O-(e-w),k._70I=!1):(P=k._19O(z,l,B,u,d,j,I),k._71I(P[2],P[3],P[4],P[5]),y===w?(k.F=0,k._70I=!k._70I):(k.F=w-e,k.moveTo(d,j))):e>O?(X=I+F,P=k._21O(z,l,B,u,d,j,I,X),k.moveTo(P[4],P[5]),P=k._19O(z,l,B,u,d,j,X),k._71I(P[2],P[3],P[4],P[5]),k.F=w-(e-O),k._70I=!0):(k.moveTo(d,j),e===O?(k.F=0,k._70I=!k._70I):k.F=O-e)},bezierCurveTo:function(){var $=arguments;this.pen={x:$[4],y:$[5]},this.g.bezierCurveTo($[0],$[1],$[2],$[3],$[4],$[5])},arc:function(p,Z,m,C,G,a){a||(C=-C,G=-G),hs(this,p,Z,C,G-C,m,m,!1)},rect:function(c,W,b,x){var z=this;z.pen={x:c,y:W},z.moveTo(c,W),z.lineTo(c,W+x),z.lineTo(c+b,W+x),z.lineTo(c+b,W),z.lineTo(c,W)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(H,G,X,t){var u=X-H,P=t-G;return Q(u*u+P*P)},_22O:function(i,w,v,t,e,Y,h){for(var A,k,l,F,r,V,U,m=0,c=i,u=w,a=h>0?h:this._69I,J=1;a>=J;J++)l=J/a,F=1-l,r=F*F,V=2*l*F,U=l*l,A=r*i+V*v+U*e,k=r*w+V*t+U*Y,m+=this._23O(c,u,A,k),c=A,u=k;return m},_21O:function(T,i,Z,d,M,b,s,h){var q=this;if(0===s)return q._20O(T,i,Z,d,M,b,h);if(1===h)return q._19O(T,i,Z,d,M,b,s);var o=q._20O(T,i,Z,d,M,b,h);return o.push(s/h),q._19O.apply(q,o)},_20O:function(k,j,h,E,o,u,H){if(1!==H){var $=h+(o-h)*H,f=E+(u-E)*H;h=k+(h-k)*H,E=j+(E-j)*H,o=h+($-h)*H,u=E+(f-E)*H}return[k,j,h,E,o,u]},_19O:function(I,E,m,s,P,X,W){if(1!==W){var w=I+(m-I)*W,f=E+(s-E)*W;m+=(P-m)*W,s+=(X-s)*W,I=w+(m-w)*W,E=f+(s-f)*W}return[I,E,m,s,P,X]},_72I:function(r,L){var u=this.pen;(r!==u.x||L!==u.y)&&(u.x=r,u.y=L,this.g.lineTo(r,L))},_71I:function(A,D,m,r){var n=this.pen;(A!==m||D!==r||m!==n.x||r!==n.y)&&(n.x=m,n.y=r,this.g.quadraticCurveTo(A,D,m,r))}}),Yp.ms_quickVisible=function(q){q._4BQ=!1,q._4CQ=function(q){var S=q._4EQ;return S!==H?S:S=q._4EQ=this._4FQ(q)},q._4DQ=function(t){if(!t)return this.dm().each(function(k){k._4EQ=H}),void 0;t._4EQ=H;var M=this;if(t instanceof _i||eo(t)||t instanceof uo||t.ISubGraph)t.eachChild(function(Y){M.invalidateQuickVisible(Y)});else if(t.getEdges){var B=t.getEdges();B&&B.each(function(n){M.invalidateQuickVisible(n)})}},q.enableQuickVisibleMode=function(){this._4BQ||(this._4BQ=!0,this._4FQ=this.isVisible,this.isVisible=this._4CQ,this.invalidateQuickVisible=this._4DQ)},q.disableQuickVisibleMode=function(){this._4BQ&&(this._4BQ=!1,this.isVisible=this._4FQ,this.invalidateQuickVisible=zj)},q.isQuickVisibleMode=function(){return this._4BQ},q.invalidateQuickVisible=zj},rm=co()+1,jj&&f.console&&rm&&!1&&(f.navigator&&f.navigator.userAgent.toLowerCase().indexOf("chrome")>-1?f.console.log.apply(console,["Hightopo - Version"+L.Default.getVersion()+" - %cTrialhttp://hightopo.com/request.html","color: #f00;"]):f.console.log("Hightopo - Version"+L.Default.getVersion()+" - Trialhttp://hightopo.com/request.html"));var Rq=C,tk=C,tf=T.checkLoadingCompType=function(b){Rq&&!b._72O_&&(tk||(tk={}),tk[b._72O_=Eb()]=b)},Wq=function(B,F){if(F||(F=B),F&&(Rq||(Rq={}),!Rq[B])){var u=new qg;if(Rq[F]={request:u,url:F},F=T.beforeLoadURL(F,B),F.data){var O=T.parse(F.data);fh(B,O),T.handleCompTypeLoaded(B,O)}else{u.onload=function(){if(200===this.status||0===this.status){var L=T.parse(u.getResponseText());fh(B,L),T.handleCompTypeLoaded(B,L)}else fh(B,C)},u.onerror=function(){fh(B,C)};var l={};l.url=encodeURI(F),l.sync=!1,u.send(l)}}},fh=function(X,e){if(Lo[X]=e,delete Rq[X],ss(Rq)&&(Rq=C,tk)){for(var G in tk){var L=tk[G];L.invalidateAll&&L.invalidateAll(H,"compTypeLoaded",X),L.redraw&&L.redraw(),L.iv(),delete L._72O_}tk=C}if(e&&tk)for(var G in tk){var L=tk[G];L.invalidateAll&&L.invalidateAll(H,"compTypeLoading",X),L.redraw&&L.redraw(),L.iv()}},kf=W.chart,zi="",uh=!0,xs=T.compStack=[],gm=/^style@/,Ac=/^attr@/,Bg=/^field@/,ei={x:.5,y:.5},El=function(){uh=!0},Tb=function(){return uh},uk=function(k,b,$){if(!k)return!1;var f;return $&&$.isImageFitSize&&(f=$.isImageFitSize(b,k)),f==C&&(f=hg(k.fitSize,b,$)),f},wc=function(u,v,t,L){if(!u)return 0;if(uk(u,v,t)&&L)return L;var o=hg(u.width,v,t);return null==o?20:o},sl=function(D,c,a,q){if(!D)return 0;if(uk(D,c,a)&&q)return q;var Q=hg(D.height,c,a);return null==Q?20:Q},hg=function(b,n,I){if(!b||!b.func)return b;var P,g=b.func,O=b.value;return P=mq(g)?I&&I.vectorDataBindingDisabled&&!b.isSafeFunc?O:g(n,I):n instanceof Iq||(L.ui?n instanceof L.ui.View:0)?Ac.test(g)?n.a(zi+g.slice(5)):gm.test(g)?n.s(zi+g.slice(6)):Bg.test(g)?n[g.slice(6)]:n[g]?n[g](I):O:O,O!==H&&P==C?O:P},Ae=T.drawImage=function(){var S,j,F,c,Q,u,e=3,X=6,b=function(q,Z){q.getValue&&q.getValue.compType===Z||(q.getValue=function(F){var b=D(q,F);if(b===H&&Z.properties){var y=Z.properties[F];y&&(b=y.defaultValue)}return b},q.getColor=function(d,S){return S===!0?$(d):$(q.getValue(d))},q.getValue.compType=Z)},D=function(a,C,Q){var A,X=!1;if(a.prefix&&j instanceof Iq){var f=j.a(zi+C);f!==H&&(X=!0,A=f)}return A===H&&(A=a[C]),A&&A.func&&(X=!0,A=hg(A,j,F)),Q&&(A=Q(A),X||(a[C]=A)),A},$=function(X,U){var B;return B=U?D(X,U):X,S&&S.compGray&&B?T.toGrayColor(B):Q&&B?Uo(B,Q,u):B},v=function(C){if(Tl(C)){for(var L=new Dg,K=C.length,d=0;K>d;d+=2)L.add({x:C[d],y:C[d+1]});C=L}return C},n=function(X){var m=D(X,"anchorX"),M=D(X,"anchorY");if(m!==H||M!==H)return{x:m===H?ei.x:m,y:M===H?ei.y:M};var S=D(X,"type"),N=D(X,"name");if("image"!==S||!N)return ei;var r=$p(N);return r&&r.anchorX!==H&&r.anchorY!==H?{x:r.anchorX,y:r.anchorY}:ei},O=function(h,o){var i=D(h,xb),e=n(h);if(Tl(i)){var x=i.length,f=D(h,"relative"),W=o.width,q=o.height;if(4===x)i={x:i[0],y:i[1],width:i[2],height:i[3]},f&&(i.x*=W,i.y*=q,i.width*=W,i.height*=q);else if(3===x){var B=i[0];i={width:i[1],height:i[2]},f&&(i.width*=W,i.height*=q),"object"==typeof B?B.length&&(B={x:B[0],y:B[1]}):B=Zh(B,o,i),i.x=B.x-i.width*e.x,i.y=B.y-i.height*e.y}i.x+=D(h,"offsetX")||0,i.y+=D(h,"offsetY")||0,!f&&o.fitSize&&(i=P(h,i,o))}return i},P=function(X,L,U){if(L){var T,g,J,R={x:L.x,y:L.y,width:L.width,height:L.height},j=n(X),e=D(X,"layoutH"),k=D(X,"layoutV"),m=1,c=1,A=0,l=0,S=1,N=1;switch(e){case"left":break;case"right":R.x+=U.width-U.rw;break;case"center":R.x+=.5*(U.width-U.rw);break;case"scale":case"leftright":default:T=D(X,Wg)||0,T&&(A=Math.abs(l=Math.sin(T)),S=Math.abs(N=Math.cos(T))),"leftright"!==e?(m+=S*(U.widthScale-1),c+=A*(U.widthScale-1)):(m+=R.width?S*(U.width-U.rw)/R.width:0,c+=R.height?A*(U.width-U.rw)/R.height:0,g=-Math.min(-j.x*N+j.y*l,-j.x*N-(1-j.y)*l,(1-j.x)*N+j.y*l,(1-j.x)*N-(1-j.y)*l))}switch(k){case"top":break;case"bottom":R.y+=U.height-U.rh;break;case"center":R.y+=.5*(U.height-U.rh);break;case"scale":case"topbottom":default:T==C&&(T=D(X,Wg),T&&(A=Math.abs(l=Math.sin(T)),S=Math.abs(N=Math.cos(T)))),"topbottom"!==k?(m+=A*(U.heightScale-1),c+=S*(U.heightScale-1)):(m+=R.width?A*(U.height-U.rh)/R.width:0,c+=R.height?S*(U.height-U.rh)/R.height:0,J=-Math.min(-j.x*l-j.y*N,-j.x*l+(1-j.y)*N,(1-j.x)*l-j.y*N,(1-j.x)*l+(1-j.y)*N))}return(1!==m||1!==c)&&("scale"!==e&&e?"leftright"===e&&(R.x+=R.width*(1-m)*j.x+g*(U.width-U.rw)):R.x+=R.x*(U.widthScale-1)+j.x*R.width*(U.widthScale-m),"scale"!==k&&k?"topbottom"===k&&(R.y+=R.height*(1-c)*j.y+J*(U.height-U.rh)):R.y+=R.y*(U.heightScale-1)+j.y*R.height*(U.heightScale-c),R.width*=m,R.height*=c),R.width<0&&(R.width=0),R.height<0&&(R.height=0),R}},l=function(h){return Tl(h)?new Dg(h):h},J=function($,O,s,T,k,C,F){var V=S.interactiveInfo,t=$.transform;if(t)return S.save(),S.setTransform(t.a,t.b,t.c,t.d,t.tx,t.ty),V&&V.compInfos.push({comp:$,rect:O,matrix:t.clone(),prefix:zi,refRect:V.refRect}),!0;k===H&&(k=1),C===H&&(C=1);var r=D($,"clipPercentage"),K=tl(s,O);if(K&&!T&&1===k&&1===C&&r==H)return V&&V.compInfos.push({comp:$,rect:O,matrix:V.matrix.clone(),prefix:zi,refRect:V.refRect}),!1;
F=F||ei;var L=O.x+O.width*F.x,d=O.y+O.height*F.y,a=s.x+s.width*F.x,h=s.y+s.height*F.y,I=s.width?k*(O.width/s.width):1,w=s.height?C*(O.height/s.height):1;if(S.save(),V&&(V.matrix.appendTranslate(L,d).appendRotate(T).appendScale(I,w).appendTranslate(-a,-h),V.compInfos.push({comp:$,rect:O,matrix:V.matrix.clone(),prefix:zi,refRect:V.refRect})),qo(S,L,d),Tp(S,T||0),ze(S,I,w),qo(S,-a,-h),r!=H){var e=jh(s,D($,"clipDirection"),r);S.beginPath(),S.rect(e.x,e.y,e.width,e.height),S.clip()}return!0},d=function(){S.restore()},q=function(t,v,y){var M=D(t,"path"),j=D(t,Wg),o=D(t,"scaleX"),B=D(t,"scaleY"),z=n(t),Z=C,f=ib(null,M);if(y||(y=t.unionRect,y||(y=Jm(f),t.path.func||(t.unionRect=y)),Z=y),y){Z||(Z=t.unionRect,Z||(Z=Jm(f),t.path.func||(t.unionRect=Z)));var x=J(t,y,Z,j,o,B,z),G=D(t,"borderPattern"),T=aq(S,G),Y=$(t,"background"),m=$(t,"borderColor"),r=D(t,"borderWidth"),F=D(t,"gradient"),U=$(t,"gradientColor"),k=D(t,"border3d"),I=$(t,"border3dColor"),H=D(t,"border3dAccuracy"),e=S.lineJoin,X=S.lineCap;S.lineJoin=D(t,"borderJoin")||sg,S.lineCap=D(t,"borderCap")||Hj,Y?(wo(S,Y,F,U,Z),ib(S,M),S.fill(),T!==S&&ib(S,M)):ib(S,M);var i=D(t,"borderWidthAbsolute");if(i&&(S.save(),S.setTransform(1,0,0,1,0,0)),r&&m&&(S.lineWidth=r,S.strokeStyle=m,S.stroke(),k&&Lh(S,m,I,r,c,H)),Sl(S,G),D(t,"dash")){var O=D(t,"dashWidth")||r;if(O>0){G=D(t,"dashPattern")||lb;var T=aq(S,G,D(t,"dashOffset")),P=$(t,"dashColor")||$(yj);T!==S&&ib(S,M),S.strokeStyle=P,S.lineWidth=O,S.stroke(),D(t,"dash3d")&&Lh(S,P,$(t,"dash3dColor"),O,c,D(t,"dash3dAccuracy")),Sl(S,G)}}i&&S.restore(),v===xb&&Rk(S,Y,D(t,"depth"),Z),S.lineJoin=e,S.lineCap=X,x&&d()}},o=function(L,Y,g,q){var V=D(L,Qr,v),i=D(L,Wg),G=n(L);if(V&&q.fitSize){var y=new Dg,w=Jm(V),T=P(L,w,q),_=w.x+G.x*w.width,r=w.y+G.y*w.height,h=T.x+G.x*T.width,t=T.y+G.y*T.height,e=w.width?T.width/w.width:1,p=w.height?T.height/w.height:1;V.each(function(M){y.add({x:h+(M.x-_)*e,y:t+(M.y-r)*p})}),V=y,L.unionRect=null}var A=D(L,"scaleX"),x=D(L,"scaleY"),X=Y===am,I=C;if(!g&&X&&(g=L.unionRect,g||(g=Jm(V),L.points.func||(L.unionRect=g)),I=g),g){X?I||(I=L.unionRect,I||(I=Jm(V),L.points.func||(L.unionRect=I))):I=g;var f,m,k,s,U=J(L,g,I,i,A,x,G),M=D(L,"borderPattern"),o=aq(S,M),z=$(L,"background"),B=$p(D(L,"repeatImage"),Q,u),O=D(L,"gradientPack"),E=D(L,"borderGradientPack"),R=$(L,"borderColor"),a=D(L,"borderWidth"),Z=$p(D(L,"borderRepeatImage"),Q,u),K=D(L,"segments",l),N=D(L,"gradient"),b=$(L,"gradientColor"),W=D(L,"border3d"),_b=$(L,"border3dColor"),hq=D(L,"border3dAccuracy"),Yr=D(L,"closePath"),No=D(L,"fillRule")||"nonzero",Fp=S.lineJoin,si=S.lineCap;if(S.lineJoin=D(L,"borderJoin")||sg,S.lineCap=D(L,"borderCap")||Hj,X)if(z||B||O){var fo=D(L,"fillClipPercentage");if(fo!=H){var vr=jh(I,D(L,"fillClipDirection"),fo);S.save(),S.beginPath(),S.rect(vr.x,vr.y,vr.width,vr.height),S.clip()}Fc(S,V,K,Yr),O?lf(S,O,$,!1,I):B?Fl(S,B,Q,u,j,F):wo(S,z,N,b,I),S.fill(No),O&&S.restore(),fo!=H&&S.restore(),o!==S&&Fc(o,V,K,Yr)}else Fc(o,V,K,Yr);else if("roundRect"===Y?f=D(L,"cornerRadius"):"polygon"===Y?(f=D(L,"polygonSide"),m=D(L,"cornerRadius"),k=D(L,"regular")):"arc"===Y&&(f=D(L,"arcFrom"),m=D(L,"arcTo"),k=D(L,"arcClose"),s=D(L,"arcOval")),z||B||O){var fo=D(L,"fillClipPercentage");if(fo!=H){var vr=jh(I,D(L,"fillClipDirection"),fo);S.save(),S.beginPath(),S.rect(vr.x,vr.y,vr.width,vr.height),S.clip()}Qf(S,Y,I,f,m,k,s),O?lf(S,O,$,!1,I):B?Fl(S,B,Q,u,j,F):wo(S,z,N,b,I),S.fill(No),O&&S.restore(),fo!=H&&S.restore(),S!==o&&Qf(o,Y,I,f,m,k,s)}else Qf(o,Y,I,f,m,k,s);var Aq=D(L,"borderWidthAbsolute");if(Aq&&(S.save(),S.setTransform(1,0,0,1,0,0)),a&&(R||Z||E)&&(S.lineWidth=a,E?lf(S,E,$,!0,I):Z?qq(S,Z,Q,u,j,F):S.strokeStyle=R,S.stroke(),E&&S.restore(),W&&Lh(S,R,_b,a,c,hq)),Sl(S,M),D(L,"dash")){var Pg=D(L,"dashWidth")||a;if(Pg>0){M=D(L,"dashPattern")||lb;var o=aq(S,M,D(L,"dashOffset")),Pf=$(L,"dashColor")||$(yj);o!==S&&(X?Fc(o,V,K,Yr):Qf(o,Y,I,f,m,k,s)),S.strokeStyle=Pf,S.lineWidth=Pg,S.stroke(),D(L,"dash3d")&&Lh(S,Pf,$(L,"dash3dColor"),Pg,c,D(L,"dash3dAccuracy")),Sl(S,M)}}Aq&&S.restore(),Y===xb&&Rk(S,z,D(L,"depth"),I),S.lineJoin=Fp,S.lineCap=si,U&&d()}},R=function(z,e){var V=Q||D(z,Pp),I=u||D(z,"blendMode"),Y=D(z,"name"),r=$p(Y,V,I);r&&r.cacheRule!=C&&(r=bj(S,r,D(z,"stretch"),e.width,e.height,j,F,V)),r?Oq(S,r,D(z,"stretch"),e.x,e.y,e.width,e.height,j,F,V,null,I):uh=!1},M=function(I,e){var Y=D(I,"text");if(Y!=C){Y+="";var v,A=D(I,"gradientPack"),R=D(I,"gradient"),Q=$(I,"gradientColor"),t=D(I,"font"),q=D(I,"vertical"),H=D(I,"verticalGap")||0,c=D(I,"align"),J=D(I,"vAlign"),s=D(I,"decoration"),x=D(I,"letterGap")||0,m=D(I,"wrap"),N=D(I,"borderWidth"),g=D(I,"borderColor"),i=Pr(t,Y);if(A?(v=lf(S,A,$,!1,e),S.restore()):v=$(I,Pp),!A&&R&&(v=T.createGradient(S,R,v||T.labelColor,Q||W.imageGradient,e.x,e.y,e.width,e.height)),N&&Tl(g)&&(g=lf(S,g,$,!1,e),S.restore()),q){null==H&&(H=1);var u,j,f,K=[],w=[];u=m?ao(Y,e.height,t,x,q,H):[Y],S.textBaseline=pc,S.font=t,u.forEach(function(I){for(var q=I.length,A=0,B=(q-1)*H,V=0;q>V;V++){var E=S.measureText(I[V]);K.push(E),B+=E.fontBoundingBoxDescent||i.height,A=h(A,E.width)}w.push({width:A,height:B})});var E=(u.length-1)*x;w.forEach(function(T){E+=T.width}),j=c&&c!==Ob?c===zb?e.x+e.width-E:e.x+(e.width-E)/2:e.x;var o=0;u.forEach(function(C,I){var h=w[I],B=C.length;f=J&&J!==_c?J===pc?e.y:e.y+e.height-h.height:e.y+(e.height-h.height)/2;for(var O=0;B>O;O++){var d=C[O],E=K[o],M=E.fontBoundingBoxDescent||i.height;ys(S,d,t,v,{x:j,y:f,width:h.width,height:M},Vk,J,s,x,N,g),f+=M+H,o++}j+=h.width+x})}else{var u=m?ao(Y,e.width,t,x,q,H):Y.split("\n"),V=u.length;if(V>1){var G=Pr(t,Y),P=G.height,_=V*P+H*(V-1),r=ho(e);return J&&J!==_c?J===rq&&(r.y=e.y+e.height-_):r.y=e.y+(e.height-_)/2,r.height=_,qk(S,u,r,t,v,c||Ob,s,x,N,g),void 0}ys(S,Y,t,v,e,c,J,s,x,N,g)}}},E=function(v,W){lo(S,$(v,Pp),W.x,W.y,W.width,W.height,D(v,"width"))},B=function(b,T){var m=D(b,fd),s=0;if(m&&(m.forEach(function(y){s+=y}),s>0)){for(var J=D(b,"colors")||kf,Y=D(b,"startAngle")||0,g=D(b,"hollow"),l=D(b,Fb),u=D(b,fc),w=D(b,Km),Q=l?new Dg:C,E=T.x,p=T.y,i=T.width,L=T.height,B=E+i/2,h=p+L/2,f=r(i,L)/2,F=0,V=0;V<m.length;V++){var n=m[V],U=ok*n/s,R=Y+U;if(S.fillStyle=J[F++],F===J.length&&(F=0),S.beginPath(),g){var c=B+t(Y)*f/2,H=h+_(Y)*f/2,A=B+t(R)*f,O=h+_(R)*f;S.moveTo(c,H),S.arc(B,h,f/2,Y,R,!1),S.lineTo(A,O),S.arc(B,h,f,R,Y,!0)}else S.moveTo(B,h),S.arc(B,h,f,R,Y,!0);Q&&(U=(Y+R)/2,Q.add({text:mq(l)?l(n,V,s,j):n,x:B+.75*t(U)*f,y:h+.75*_(U)*f})),S.closePath(),S.fill(),Y=R}Q&&Q.each(function(Q){hf(S,Q.text,u,w,Q.x,Q.y,0,0,Vk)})}},a=function(Q,I){var i=D(Q,fn);if(i&&i.length>0){var c=i.length,M=D(Q,Fb),s=D(Q,fc),P=D(Q,Km),q=M?new Dg:C,N=D(Q,"minValue")||0,e=D(Q,"maxValue");if(e==C&&(e=0,i.forEach(function(L){D(L,fd).forEach(function(S){e=h(e,S)})})),N===e)return;for(var E=I.height/(e-N),k=I.y+e*E,r=D(i[0],fd).length,b=I.width/(3*r+1),G=2*b/c,a=0,X=0;c>X;X++)for(var g=i[X],y=D(g,Pp),l=D(g,"colors"),v=D(g,fd),A=0;r>A;A++){l?S.fillStyle=l[A]:y?S.fillStyle=y:(S.fillStyle=kf[a++],a===kf.length&&(a=0));var T=v[A],J=T*E,t=I.x+(1+3*A)*b+X*G;if(ri(S,t,k-J,G,J),q){var p=mq(M)?M(T,A,g,j):T,m=Pr(s,p).height;q.add({x:t,y:k-J-m,width:G,height:m,text:p})}}q&&q.each(function(j){hf(S,j.text,s,P,j.x,j.y,j.width,j.height,Vk)})}},i=function(N,f){var V=D(N,fn);if(V&&V.length>0){var X=V.length,Z=D(V[0],fd).length,J=f.width/(3*Z+1),K=0,u=D(N,"maxValue"),a=D(N,Fb),w=D(N,fc),z=D(N,Km),B=a?new Dg:C;if(u==C){u=0;for(var I=0;Z>I;I++){for(var E=0,q=0;X>q;q++)E+=D(V[q],fd)[I];u=h(u,E)}}if(u>0){for(var I=0;Z>I;I++)for(var G=f.y+f.height,q=0;X>q;q++){var A=V[q],p=D(A,Pp),R=D(A,fd)[I],n=R/u*f.height;p?S.fillStyle=p:(S.fillStyle=kf[K++],K===kf.length&&(K=0)),G-=n;var $={x:f.x+(1+3*I)*J,y:G,width:2*J,height:n};ri(S,$.x,$.y,$.width,$.height),B&&($.text=mq(a)?a(R,I,A,j):R,B.add($))}B&&B.each(function(g){hf(S,g.text,w,z,g.x,g.y,g.width,g.height,Vk)})}}},U=function(M,J){var p=D(M,fn);if(p&&p.length>0){for(var i=p.length,P=D(p[0],fd).length,q=J.width/(3*P+1),t=0,s=D(M,Fb),h=D(M,fc),y=D(M,Km),Z=s?new Dg:C,x=0;P>x;x++){for(var F=0,_=0;i>_;_++)F+=D(p[_],fd)[x];if(F>0){var B=J.y+J.height;for(_=0;i>_;_++){var X=p[_],c=D(X,Pp),H=D(X,fd)[x],a=H/F*J.height;c?S.fillStyle=c:(S.fillStyle=kf[t++],t===kf.length&&(t=0)),B-=a;var $={x:J.x+(1+3*x)*q,y:B,width:2*q,height:a};ri(S,$.x,$.y,$.width,$.height),Z&&($.text=mq(s)?s(H,x,X,j):H,Z.add($))}}}Z&&Z.each(function(x){hf(S,x.text,h,y,x.x,x.y,x.width,x.height,Vk)})}},s=function(T,d){var y=D(T,fn);if(y&&y.length>0){var n=y.length,M=D(T,"minValue")||0,r=D(T,"maxValue");if(r==C&&(r=0,y.forEach(function(E){D(E,fd).forEach(function(b){r=h(r,b)})})),M===r)return;for(var m=d.height/(r-M),v=d.y+r*m,H=D(y[0],fd).length,q=d.width/(3*H+1),t=0,I=D(T,"lineWidth")||2,s=D(T,"line3d"),N=D(T,"linePoint"),b=D(T,Fb),i=D(T,fc),B=D(T,Km),k=0;n>k;k++){var W=y[k],L=D(W,Pp),P=D(W,fd);L?S.strokeStyle=L:(L=S.strokeStyle=kf[t++],t===kf.length&&(t=0)),S.beginPath();for(var K=0;H>K;K++){var e=d.x+(2+3*K)*q,f=v-P[K]*m;0===K?S.moveTo(e,f):S.lineTo(e,f)}if(S.lineWidth=I,S.stroke(),s&&Lh(S,L,C,I,c),N||b){var Z,z=I/2+2;for(K=0;H>K;K++){var V=P[K];if(e=d.x+(2+3*K)*q,f=v-V*m,mq(N)?N(S,e,f,L,K,W,j):N&&(S.fillStyle=L,S.beginPath(),S.arc(e,f,z,0,ok,!0),S.fill()),mq(b)?Z=b(V,K,W,j):b&&(Z=V),Z){var g=Pr(i,Z).height,Y=S.shadowBlur;if(Y){var o=S.shadowOffsetX,a=S.shadowOffsetY,G=S.shadowColor;S.shadowOffsetX=0,S.shadowOffsetY=0,S.shadowBlur=0,S.shadowColor=C}hf(S,Z,i,B,e,f-g-z+2,0,g,Vk),Y&&(S.shadowOffsetX=o,S.shadowOffsetY=a,S.shadowBlur=Y,S.shadowColor=G)}}}}}},k=function(X){S=X[0],j=X[1],F=X[2],c=X[3],Q=X[4],u=X[5]},g=function(){return[S,j,F,c,Q,u]},Z=function(E,o){var N;F&&F.getDrawableState?N=F.getDrawableState(j):F&&F.getState?N=F.getState(j):(N=j instanceof Iq?j.s(Eq):null,(N===H||null===N)&&(N=D(E,Eq)));var k=D(o,Eq);return k!==H&&null!==k&&k!==N?!1:D(o,Dq)},G={border:E,image:R,text:M,pieChart:B,columnChart:a,stackedColumnChart:i,percentageColumnChart:U,lineChart:s};return function(I,h,K,W,y,M,R,E,p,i){if(h&&y&&M){var z=g();S=I,j=R,F=E,!j&&F&&F.isSelfViewEvent&&(j=F),c=F?F._zoom?F._zoom:1:1,Q=p,u=i;var A=y,r=M;if(Gg()){var U,N,s,x,m,V,t;0===S[tc]?Gg[0]&&(U=!0):U=!0,S.texureImage2D?Gg[1]&&(N=!0):N=!0,S.texureImage3D?Gg[2]&&(s=!0):s=!0,S.drawDNDState?Gg[3]&&(m=!0):m=!0,S.drawRect?Gg[fc[2]]&&(t=!0):t=!0,L[di[1]+tp[0]+xo[1]]?Gg[tp[0]]&&(V=!0):V=!0,Im.widget[0]?Gg[4]&&(x=!0):x=!0,U&&N&&s&&x&&m&&V&&t&&(A=K,r=W)}if(h.tagName)return jm(zc)&&!f[zc]||S.drawImage(h,A,r,y,M),k(z),void 0;if(0==D(h,"visible"))return k(z),void 0;Q||(Q=hg(h.color,j,F)),i||(u=hg(h.blendMode,j,F)),jm(zc)&&!f[zc]&&(y=A,M=r);var P=wc(h,j,F,y),w=sl(h,j,F,M),a={x:0,y:0,width:P,height:w,fitSize:uk(h,j,F)},Y=D(h,"clip"),B=D(h,"opacity");if(a.fitSize){var _=a.rw=hg(h.width,j,F)||20;a.widthScale=P/_;var Oc=a.rh=hg(h.height,j,F)||20;a.heightScale=w/Oc}if(S.save(),S.interactiveInfo){var on=S.interactiveInfo.matrix,fr=on.clone();on.appendTranslate(A,r).appendScale(y/P,M/w),S.interactiveInfo.refRect=a}qo(S,A,r),(P!==y||w!==M)&&S.scale(y/P,M/w),Y&&(mq(Y)?Y(S,P,w,j,F,h):(S.beginPath(),S.rect(0,0,P,w),S.clip())),B!=C&&(S.globalAlpha*=B),D(h,"comps").forEach(function(_){if(_.prefix){var A=zi,W=hg(_.prefix,j,F);W&&(zi=zi+W+".")}if(0==Z(h,_))return _.prefix&&(zi=A),void 0;if(xs.splice(0,0,_),S.interactiveInfo)var U=S.interactiveInfo.matrix.clone();var w=D(_,"opacity"),p=D(_,"shadow"),m=D(_,"type"),y=D(_,"refRect")||a,Y=O(_,y);if(w!=C){var r=S.globalAlpha;S.globalAlpha*=w}if(p){var M=c*T.devicePixelRatio,f=S.shadowOffsetX,V=S.shadowOffsetY,t=S.shadowBlur,k=S.shadowColor,N=D(_,"shadowOffsetX"),g=D(_,"shadowOffsetY"),K=D(_,"shadowBlur"),s=$(_,"shadowColor");S.shadowOffsetX=(N==C?e:N)*M,S.shadowOffsetY=(g==C?e:g)*M,S.shadowBlur=(K==C?X:K)*M,S.shadowColor=s||$(yn)}if("save"===m)S.save();else if("endClip"===m||"restore"===m)S.restore();else if("clip"===m)S.save(),Fc(S,D(_,"points",v),D(_,"segments",l),!0),S.clip();else if(Nd[m]){if(Y=Y||{x:0,y:0,width:y.width,height:y.height},o(_,m,Y,y),_.prefix&&0===_.prefix.indexOf("ui.")&&F&&L.ui&&F instanceof L.ui.View){F._vectorCompInfo||(F._vectorCompInfo=[]);for(var I=!1,i=0;i<F._vectorCompInfo.length;i++){var B=F._vectorCompInfo[i];if(_.prefix===B.comp.prefix&&R===B.data){F._vectorCompInfo[i]={comp:_,type:m,rect:Y,compRefRect:y,data:R,image:h,transform:S.getTransform()},I=!0;break}}I||F._vectorCompInfo.push({comp:_,type:m,rect:Y,compRefRect:y,data:R,image:h,transform:S.getTransform()})}}else if(m===am)o(_,m,Y,y);else if("SVGPath"===m)q(_,m,Y);else{Y=Y||{x:0,y:0,width:y.width,height:y.height};var P=D(_,Wg),E=D(_,"scaleX"),u=D(_,"scaleY"),z=n(_),Q=J(_,Y,Y,P,E,u,z);if(mq(m))b(_,m),T.drawCompType(m,S,Y,_,j,F);else if(T.getCompType(m)){var x=T.getCompType(m),kj=x.func||x;b(_,x),T.drawCompType(kj,S,Y,_,j,F)}else G[m]?G[m](_,Y):T.getCompType(m)===H&&bl.test(m)&&(Wq(m),uh=!1);Q&&d()}p&&(S.shadowOffsetX=f,S.shadowOffsetY=V,S.shadowBlur=t,S.shadowColor=k),w!=C&&(S.globalAlpha=r),S.interactiveInfo&&(S.interactiveInfo.matrix=U),_.prefix&&(zi=A),xs.splice(0,1)}),S.interactiveInfo&&(S.interactiveInfo.matrix=fr),S.restore(),k(z)}}}();T.getCurrentComp=function(){return xs[0]},T.getParentComp=function(){return xs[1]},T.getInternal=function(){return{isEnter:br,isEsc:ic,isSpace:rj,isLeft:Qi,isUp:Al,isRight:nk,isDown:xh,addMethod:yd,superCall:Ei,toPointsArray:Pk,translateAndScale:fb,appendArray:Uh,createWorldMatrix:sd,vec3TransformMat4:Zg,setCanvas:Eh,createDiv:vh,createView:eh,createCanvas:uc,createImage:Jo,initContext:yh,layout:mb,fillRect:ri,Mat:Ub,drawBorder:lo,isString:jm,setBorder:Pi,getPropertyValue:Eg,setPropertyValue:Pf,drawVerticalLine:xl,draw3DRect:Rk,getPinchDist:Rc,isSameRect:tl,getPosition:Zh,intersectionLineRect:zg,getNodeRect:Gl,getEdgeAgentPosition:Rm,getEdgeHostPosition:Op,getImageWidth:wc,getImageHeight:sl,initItemElement:wd,compileShaderAndFetchUniforms:Zf,composeShaderSource:fe,decomposeShaderSource:Qh,drawPoints:Fc,createG2:aq,closePopup:Kq,isH:Xj,createAnim:cf,createNormalMatrix:Vg,makeUVMatrix:gl,toColorArray:dh,createNormals:bs,toFloatArray:Td,glMV:Bh,glPop:bf,batchShape:Mg,createNodeMatrix:Pn,getShapeModel:ir,getFaceInfo:Be,transformAppend:ge,drawFaceInfo:eq,glUploadData:Tr,glUploadElementData:mi,glDrawArray:Uq,glDrawElement:Ij,glBindTexture:io,pickValueToColor:$s,to3dPointsArray:cp,setGLDebugMode:function(V){_q=V},cube:function(){return{vs:Md,is:Xn,uv:bc}},ui:function(){return{DataUI:Od,NodeUI:Bj,EdgeUI:_g,GroupUI:ij,ShapeUI:qh,GridUI:Hf,Data3dUI:ot,Node3dUI:pt,Shape3dUI:st}},getInternalVersion:function(){return"U2FsdGVkX18O53xhsuyWa2aEHhpfpPtUG5TwWiz0S/Y="},getDragger:function(){return wk},addMSMap:function(T){yd(Yp,T)},k:U,overrideTimerFunc:function(a,Q){ef=L.Default.callLater=a,si=L.Default.cancelLater=Q},canEnterEditDetailMode:jf,addEventListener:g,removeEventListener:J,createGradientByPackedData:lf}},function(W){function E(o,P){o!=C&&(P==C&&Wb!=typeof o?this._54O(o,256):this._54O(o,P))}function S(){return new E(C)}function K(n,N,e,x,V,k){for(;--k>=0;){var Z=N*this[n++]+e[x]+V;V=$(Z/67108864),e[x++]=67108863&Z}return V}function R(o,Z,Y,G,p,j){for(var e=32767&Z,P=Z>>15;--j>=0;){var D=32767&this[o],k=this[o++]>>15,H=P*D+k*e;D=e*D+((32767&H)<<15)+Y[G]+(1073741823&p),p=(D>>>30)+(H>>>15)+P*k+(p>>>30),Y[G++]=1073741823&D}return p}function Z(_,H,a,O,V,T){for(var U=16383&H,W=H>>14;--T>=0;){var s=16383&this[_],e=this[_++]>>14,$=W*s+e*U;s=U*s+((16383&$)<<14)+a[O]+V,V=(s>>28)+($>>14)+W*e,a[O++]=268435455&s}return V}function g(w){return tm.charAt(w)}function m($,z){var J=Ur[$.charCodeAt(z)];return J==C?-1:J}function D(Q){for(var C=this.t-1;C>=0;--C)Q[C]=this[C];Q.t=this.t,Q.s=this.s}function T(O){this.t=1,this.s=0>O?-1:0,O>0?this[0]=O:-1>O?this[0]=O+this.DV:this.t=0}function G(P){var e=S();return e._58O(P),e}function y(M,T){var $,Y=this;if(16==T)$=4;else if(8==T)$=3;else if(256==T)$=8;else if(2==T)$=1;else if(32==T)$=5;else{if(4!=T)return Y.fromRadix(M,T),void 0;$=2}Y.t=0,Y.s=0;for(var o=M.length,e=!1,z=0;--o>=0;){var f=8==$?255&M[o]:m(M,o);0>f?"-"==M.charAt(o)&&(e=!0):(e=!1,0==z?Y[Y.t++]=f:z+$>Y.DB?(Y[Y.t-1]|=(f&(1<<Y.DB-z)-1)<<z,Y[Y.t++]=f>>Y.DB-z):Y[Y.t-1]|=f<<z,z+=$,z>=Y.DB&&(z-=Y.DB))}8==$&&0!=(128&M[0])&&(Y.s=-1,z>0&&(Y[Y.t-1]|=(1<<Y.DB-z)-1<<z)),Y._57O(),e&&E.ZERO._78O(Y,Y)}function c(){for(var h=this,g=h.s&h.DM;h.t>0&&h[h.t-1]==g;)--h.t}function n(m){var b=this;if(b.s<0)return"-"+b._85O()[un](m);var S;if(16==m)S=4;else if(8==m)S=3;else if(2==m)S=1;else if(32==m)S=5;else{if(4!=m)return b.toRadix(m);S=2}var v,U=(1<<S)-1,i=!1,F="",d=b.t,Z=b.DB-d*b.DB%S;if(d-->0)for(Z<b.DB&&(v=b[d]>>Z)>0&&(i=!0,F=g(v));d>=0;)S>Z?(v=(b[d]&(1<<Z)-1)<<S-Z,v|=b[--d]>>(Z+=b.DB-S)):(v=b[d]>>(Z-=S)&U,0>=Z&&(Z+=b.DB,--d)),v>0&&(i=!0),i&&(F+=g(v));return i?F:"0"}function B(){var w=S();return E.ZERO._78O(this,w),w}function M(){return this.s<0?this._85O():this}function f(H){var t=this,r=t.s-H.s;if(0!=r)return r;var d=t.t;if(r=d-H.t,0!=r)return t.s<0?-r:r;for(;--d>=0;)if(0!=(r=t[d]-H[d]))return r;return 0}function H(X){var s,d=1;return 0!=(s=X>>>16)&&(X=s,d+=16),0!=(s=X>>8)&&(X=s,d+=8),0!=(s=X>>4)&&(X=s,d+=4),0!=(s=X>>2)&&(X=s,d+=2),0!=(s=X>>1)&&(X=s,d+=1),d}function I(){var W=this;return W.t<=0?0:W.DB*(W.t-1)+H(W[W.t-1]^W.s&W.DM)}function d(M,Z){var y;for(y=this.t-1;y>=0;--y)Z[y+M]=this[y];for(y=M-1;y>=0;--y)Z[y]=0;Z.t=this.t+M,Z.s=this.s}function J(C,O){for(var e=C;e<this.t;++e)O[e-C]=this[e];O.t=h(this.t-C,0),O.s=this.s}function o(G,f){var j,y=this,M=G%y.DB,k=y.DB-M,h=(1<<k)-1,R=$(G/y.DB),S=y.s<<M&y.DM;for(j=y.t-1;j>=0;--j)f[j+R+1]=y[j]>>k|S,S=(y[j]&h)<<M;for(j=R-1;j>=0;--j)f[j]=0;f[R]=S,f.t=y.t+R+1,f.s=y.s,f._57O()}function Y(c,n){var z=this;n.s=z.s;var K=$(c/z.DB);if(K>=z.t)return n.t=0,void 0;var U=c%z.DB,A=z.DB-U,p=(1<<U)-1;n[0]=z[K]>>U;for(var P=K+1;P<z.t;++P)n[P-K-1]|=(z[P]&p)<<A,n[P-K]=z[P]>>U;U>0&&(n[z.t-K-1]|=(z.s&p)<<A),n.t=z.t-K,n._57O()}function x(A,D){for(var t=this,m=0,b=0,e=r(A.t,t.t);e>m;)b+=t[m]-A[m],D[m++]=b&t.DM,b>>=t.DB;if(A.t<t.t){for(b-=A.s;m<t.t;)b+=t[m],D[m++]=b&t.DM,b>>=t.DB;b+=t.s}else{for(b+=t.s;m<A.t;)b-=A[m],D[m++]=b&t.DM,b>>=t.DB;b-=A.s}D.s=0>b?-1:0,-1>b?D[m++]=t.DV+b:b>0&&(D[m++]=b),D.t=m,D._57O()}function L(H,e){var a=this.abs(),$=H.abs(),w=a.t;for(e.t=w+$.t;--w>=0;)e[w]=0;for(w=0;w<$.t;++w)e[w+a.t]=a.am(0,$[w],e,w,0,a.t);e.s=0,e._57O(),this.s!=H.s&&E.ZERO._78O(e,e)}function u(S){for(var W=this.abs(),r=S.t=2*W.t;--r>=0;)S[r]=0;for(r=0;r<W.t-1;++r){var h=W.am(r,W[r],S,2*r,0,1);(S[r+W.t]+=W.am(r+1,2*W[r],S,2*r+1,h,W.t-r-1))>=W.DV&&(S[r+W.t]-=W.DV,S[r+W.t+1]=1)}S.t>0&&(S[S.t-1]+=W.am(r,W[r],S,2*r,0,1)),S.s=0,S._57O()}function N(z,d,I){var o=z.abs(),M=this;if(!(o.t<=0)){var c=M.abs();if(c.t<o.t)return d!=C&&d._58O(0),I!=C&&M._77O(I),void 0;I==C&&(I=S());var K=S(),L=M.s,i=z.s,q=M.DB-H(o[o.t-1]);q>0?(o._44O(q,K),c._44O(q,I)):(o._77O(K),c._77O(I));var w=K.t,s=K[w-1];if(0!=s){var p=s*(1<<M.F1)+(w>1?K[w-2]>>M.F2:0),U=M.FV/p,Z=(1<<M.F1)/p,J=1<<M.F2,x=I.t,Y=x-w,A=d==C?S():d;for(K._59O(Y,A),I._52O(A)>=0&&(I[I.t++]=1,I._78O(A,I)),E.ONE._59O(w,A),A._78O(K,K);K.t<w;)K[K.t++]=0;for(;--Y>=0;){var h=I[--x]==s?M.DM:$(I[x]*U+(I[x-1]+J)*Z);if((I[x]+=K.am(0,h,I,Y,0,w))<h)for(K._59O(Y,A),I._78O(A,I);I[x]<--h;)I._78O(A,I)}d!=C&&(I._45O(w,d),L!=i&&E.ZERO._78O(d,d)),I.t=w,I._57O(),q>0&&I._46O(q,I),0>L&&E.ZERO._78O(I,I)}}}function P(e){var o=S();return this.abs()._49O(e,C,o),this.s<0&&o._52O(E.ZERO)>0&&e._78O(o,o),o}function i(I){this.m=I}function X(L){return L.s<0||L._52O(this.m)>=0?L.mod(this.m):L}function q(n){return n}function k(U){U._49O(this.m,C,U)}function F(w,d,A){w._47O(d,A),this._74O(A)}function A(Q,k){Q._48O(k),this._74O(k)}function l(){if(this.t<1)return 0;var g=this[0];if(0==(1&g))return 0;var G=3&g;return G=15&G*(2-(15&g)*G),G=255&G*(2-(255&g)*G),G=65535&G*(2-(65535&(65535&g)*G)),G=G*(2-g*G%this.DV)%this.DV,G>0?this.DV-G:-G}function V(L){var e=this;e.m=L,e.mp=L._50O(),e.mpl=32767&e.mp,e.mph=e.mp>>15,e.um=(1<<L.DB-15)-1,e.mt2=2*L.t}function v(v){var c=S();return v.abs()._59O(this.m.t,c),c._49O(this.m,C,c),v.s<0&&c._52O(E.ZERO)>0&&this.m._78O(c,c),c}function p(D){var r=S();return D._77O(r),this._74O(r),r}function j(s){for(var h=this;s.t<=h.mt2;)s[s.t++]=0;for(var Q=0;Q<h.m.t;++Q){var l=32767&s[Q],D=l*h.mpl+((l*h.mph+(s[Q]>>15)*h.mpl&h.um)<<15)&s.DM;for(l=Q+h.m.t,s[l]+=h.m.am(0,D,s,Q,0,h.m.t);s[l]>=s.DV;)s[l]-=s.DV,s[++l]++}s._57O(),s._45O(h.m.t,s),s._52O(h.m)>=0&&s._78O(h.m,s)}function b(D,k){D._48O(k),this._74O(k)}function z(J,X,e){J._47O(X,e),this._74O(e)}function w(){return 0==(this.t>0?1&this[0]:this.s)}function Bq(I,k){if(I>4294967295||1>I)return E.ONE;var s=S(),D=S(),j=k._73O(this),i=H(I)-1;for(j._77O(s);--i>=0;)if(k._76O(s,D),(I&1<<i)>0)k._75O(D,j,s);else{var e=s;s=D,D=e}return k.revert(s)}function hc(J,U){var O;return O=256>J||U._51O()?new i(U):new V(U),this.exp(J,O)}function qs(){var T=this;if(T.s<0){if(1==T.t)return T[0]-T.DV;if(0==T.t)return-1}else{if(1==T.t)return T[0];if(0==T.t)return 0}return(T[1]&(1<<32-T.DB)-1)<<T.DB|T[0]}function Nr(f,Z){return new E(f,Z)}function mq(){var u=this;u.n=C,u.e=0,u.d=C,u.p=C,u.q=C,u.dmp1=C,u.dmq1=C,u._10A=C}function cc(Q){return Q._53O(this.e,this.n)}function Li(W){var l,a,I,p="",k=0;for(l=0;l<W.length&&W.charAt(l)!=Ii;++l)I=oc.indexOf(W.charAt(l)),0>I||(0==k?(p+=g(I>>2),a=3&I,k=1):1==k?(p+=g(a<<2|I>>4),a=15&I,k=2):2==k?(p+=g(a),p+=g(I>>2),a=3&I,k=3):(p+=g(a<<2|I>>4),p+=g(15&I),k=0));return 1==k&&(p+=g(a<<2)),p}function Zc(s){var p=s.split(""),q=Li(s);return p.forEach(function(C){var H=C.length;H>0&&q&&(Am+=Ym(C))}),q}function lb(t,O){var F=fq._4O.Util._56O(t,"ss"),e={},G=0;return e.v=F==O,e.t=1,e.s=0>G?-1:0,kq=e.v,G>0?e[0]=G:-1>G?e[0]=G+e.DV:e.t=0,[F,e]}function vq(C){var n=38,r=C.substring(0,n);if(r&&30==r.indexOf("05000420")){var M=["ss",C.substring(n)];return M}return[]}function xd(Z,V){V=V.replace(Qc,""),V=V.replace(/[ \n]+/g,"");var q=Nr(V,16);if(q._55O()>this.n._55O())return 0;var M=this._37O(q),Q=M[un](16).replace(/^1f+00/,""),T=vq(Q);if(0==T.length)return!1;for(var l,c,W,g=.5,N=Zr,R=[0,.5,.75,.875,.9375],Y=[],S=[],s=[],w=ok/N,P=T[1],K=lb(Z,P)[0],E=0,z=0;E<R.length;E++){var y=0===E%2?0:.5;for(l=0;N>=l;l++)c=(l+y)*w,W=1-R[E],Y.push(t(c)*g*W,-g+2*R[E]*g,-_(c)*g*W),S.push((l+y)/N,W)}for(E=0;E<R.length-1;E++){var B=E*(N+1),J=(E+1)*(N+1);for(l=0;N>l;l++)s.push(B+l,J+l+1,J+l,B+l,B+l+1,J+l+1)}return s.forEach(function(G){z+=G}),P==K&&z>10}var Jj,pq=0xdeadbeefcafe,Cf=15715070==(16777215&pq),un="toString",lq="",Qk="nat",Je=function(){};e=W["D"+11182[un](a(2,5))];var hs=E.prototype;lg+=xm.substr(0,1);var Ol=W.navigator?W.navigator.appName:"";Cf&&"Microsoft Internet Explorer"==Ol?(hs.am=R,Jj=30):Cf&&"Netscape"!=Ol?(hs.am=K,Jj=26):(hs.am=Z,Jj=28),hs.DB=Jj,hs.DM=(1<<Jj)-1,hs.DV=1<<Jj;var Si=52;hs.FV=a(2,Si),hs.F1=Si-Jj,hs.F2=2*Jj-Si;var Zl,cr,tm="0123456789abcdefghijklmnopqrstuvwxyz",Ur=[],Vd=function($){return String.fromCharCode($)};for(Zl="0".charCodeAt(0),cr=0;9>=cr;++cr)Ur[Zl++]=cr;for(Zl="a".charCodeAt(0),cr=10;36>cr;++cr)Ur[Zl++]=cr;for(Zl="A".charCodeAt(0),cr=10;36>cr;++cr)Ur[Zl++]=cr;var jl=i.prototype;jl._73O=X,jl.revert=q,jl._74O=k,jl._75O=F,jl._76O=A;var Kq=V.prototype;Kq._73O=v,Kq.revert=p,Kq._74O=j,Kq._75O=z,Kq._76O=b,hs._77O=D,hs._58O=T,hs._54O=y,hs._57O=c,hs._59O=d,hs._45O=J,hs._44O=o,hs._46O=Y,hs._78O=x,hs._47O=L,hs._48O=u,hs._49O=N,hs._50O=l,hs._51O=w,hs.exp=Bq,hs.toString=n,hs._85O=B,hs.abs=M,hs._52O=f,hs._55O=I,hs.mod=P,hs._53O=hc,E.ZERO=G(0),E.ONE=G(1),hs._86O=qs;var kk=function(g,w){var N=this;N.isPublic=!0,typeof g!==Wb?(N.n=g,N.e=w):g!=C&&w!=C&&g.length>0&&w.length>0&&(N.n=Nr(g,16),N.e=Ym(w,16))};ld=function(){var q,y,r=Zc(Yd),L=r.substr(0,4),Z=r.substr(4,2),S=r.substr(6,2),B=1,V=!B,k=U,z=[],b=Me.charAt(7);if(e&&(e[un]().indexOf(Qk)<0||e[lg][un]().indexOf(Qk)<0||!r?q=C:(r=new e(L-0,Z-B,S-0),y=r.setHours(9),e[lg]()>y?q=rb[b]:V=!0)),r&&q&&q[0]&&q[O(.5)]&&k){var t=Ho(q[0]),J=Ho(q[1]);for(var l in J)z.push(l);var Q,f=0,Y=t[z[f]],N=J[z[f++]],D=J[z[f++]],H=J[z[f++]],s=J[z[f++]],A=J[z[f++]],h=J[z[f++]],c=t[z[f]],p=J[z[f++]],j=Eo._27O(k);if(Y===N&&j&&p){Q=N+D+H+s+A+h;var m=!h||h===og||!og&&h===(bl+"")[0];if(!m&&h)for(var W,n=0,i=h.length;i>n;n++)h[n]===mh[f]?W===og?m=!0:W[0]===eg[5]&&og&&og.indexOf(W.substr(1))>=0?m=!0:W=C:(W==C?W=h[n]:W+=h[n],n===i-1&&(W===og?m=!0:W[0]===eg[5]&&og&&og.indexOf(W.substr(1))>=0&&(m=!0)));Q&&j._31O(Q,p)&&j._31O(Y,c)&&m&&(!A||e[lg]()<A)&&(V=!0)}}return V||(Qf=Wf),b};var ig=mq.prototype;ig._37O=cc,ig._38O=kk;var oc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ii="=",$j=25,Hg=10,Yd="ICISMA==",_b=_b||function(C,n){var G={},M=G._7A={},T=M._6A=function(){function w(){}return{_80O:function(p){w.prototype=this;var E=new w;return p&&E._5A(p),E.hasOwnProperty("_82O")||(E._82O=function(){E.$super._82O.apply(this,arguments)}),E._82O.prototype=E,E.$super=this,E},_3A:function(){var L=this._80O();return L._82O.apply(L,arguments),L},_82O:function(){},_5A:function(Q){for(var J in Q)Q.hasOwnProperty(J)&&(this[J]=Q[J]);Q.hasOwnProperty(un)&&(this.toString=Q.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),y=M._39O=T._80O({_82O:function(E,m){E=this._84O=E||[],this._65O=m!=n?m:4*E.length},toString:function(s){return(s||c).stringify(this)},_89O:function(J){var L=this._84O,u=J._84O,E=this._65O,v=J._65O;if(this._57O(),E%4)for(var r=0;v>r;r++){var T=255&u[r>>>2]>>>24-8*(r%4);L[E+r>>>2]|=T<<24-8*((E+r)%4)}else if(u.length>65535)for(var r=0;v>r;r+=4)L[E+r>>>2]=u[r>>>2];else L.push.apply(L,u);return this._65O+=v,this},_57O:function(){var g=this._84O,N=this._65O;g[N>>>2]&=4294967295<<32-8*(N%4),g.length=O(N/4)},_88O:function(){var P=T._88O.call(this);return P._84O=this._84O.slice(0),P},_87O:function(k){for(var L=[],I=0;k>I;I+=4)L.push(0|4294967296*co);return new y._82O(L,k)}}),J=G._2A={},c=J._69O={stringify:function(O){var Z,b=O._84O,r=O._65O,t=[];for(Z=0;r>Z;Z++){var X=255&b[Z>>>2]>>>24-8*(Z%4);t.push((X>>>4).toString(16)),t.push((15&X).toString(16))}return t.join("")},_68O:function(K){for(var m=K.length,i=[],M=0;m>M;M+=2)i[M>>>3]|=Ym(K.substr(M,2),16)<<24-4*(M%8);return new y._82O(i,m/2)}},Z=J._8A={stringify:function(T){var q,k=T._84O,U=T._65O,O=[];for(q=0;U>q;q++){var G=255&k[q>>>2]>>>24-8*(q%4);O.push(Vd(G))}return O.join("")},_68O:function(_){var D,G=_.length,F=[];for(D=0;G>D;D++)F[D>>>2]|=(255&_.charCodeAt(D))<<24-8*(D%4);return new y._82O(F,G)}},Y=J._9A={stringify:function(r){try{return decodeURIComponent(escape(Z.stringify(r)))}catch(L){throw new Error("")}},_68O:function(Y){return Z._68O(unescape(encodeURIComponent(Y)))}},v=M._32O=T._80O({_1A:function(){this._83O=new y._82O,this._23O=0},_33O:function(V){typeof V==Wb&&(V=Y._68O(V)),this._83O._89O(V),this._23O+=V._65O},_25O:function(H){var j=this._83O,E=j._84O,g=j._65O,z=this._79O,f=4*z,e=g/f;e=H?O(e):h((0|e)-this._22O,0);var I=e*z,J=r(4*I,g);if(I){for(var s=0;I>s;s+=z)this._20O(E,s);var W=E.splice(0,I);j._65O-=J}return new y._82O(W,J)},_88O:function(){var h=T._88O.call(this);return h._83O=this._83O._88O(),h},_22O:0});M._66O=v._80O({cfg:T._80O(),_82O:function(z){this.cfg=this.cfg._80O(z),this._1A()},_1A:function(){v._1A.call(this),this._34O()},_81O:function(F){return this._33O(F),this._25O(),this},_72O:function(o){o&&this._33O(o);var w=this._21O();return w},_79O:16,_26O:function(k){return function(J,$){return new k._82O($)._72O(J)}},_19O:function(_){return function(K,d){return new V._71O._82O(_,d)._72O(K)}}});var V=G._67O={};return G}();!function(){var z=_b,R=z._7A,l=R._39O,s=R._66O,U=z._67O,u=[],c=[];!function(){function l(e){for(var i=Q(e),V=2;i>=V;V++)if(!(e%V))return!1;return!0}function r(x){return 0|4294967296*(x-(0|x))}for(var q=2,X=0;64>X;)l(q)&&(8>X&&(u[X]=r(a(q,.5))),c[X]=r(a(q,1/3)),X++),q++}();var H=[],I=U._41O=s._80O({_34O:function(){this._64O=new l._82O(u.slice(0))},_20O:function(X,R){for(var y=this._64O._84O,I=y[0],W=y[1],b=y[2],a=y[3],F=y[4],K=y[5],x=y[6],f=y[7],T=0;64>T;T++){if(16>T)H[T]=0|X[R+T];else{var N=H[T-15],Q=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,O=H[T-2],J=(O<<15|O>>>17)^(O<<13|O>>>19)^O>>>10;H[T]=Q+H[T-7]+J+H[T-16]}var S=F&K^~F&x,_=I&W^I&b^W&b,U=(I<<30|I>>>2)^(I<<19|I>>>13)^(I<<10|I>>>22),V=(F<<26|F>>>6)^(F<<21|F>>>11)^(F<<7|F>>>25),n=f+V+S+c[T]+H[T],D=U+_;f=x,x=K,K=F,F=0|a+n,a=b,b=W,W=I,I=0|n+D}y[0]=0|y[0]+I,y[1]=0|y[1]+W,y[2]=0|y[2]+b,y[3]=0|y[3]+a,y[4]=0|y[4]+F,y[5]=0|y[5]+K,y[6]=0|y[6]+x,y[7]=0|y[7]+f},_21O:function(){var D=this._83O,M=D._84O,Q=8*this._23O,j=8*D._65O;return M[j>>>5]|=128<<24-j%32,M[(j+64>>>9<<4)+14]=$(Q/4294967296),M[(j+64>>>9<<4)+15]=Q,D._65O=4*M.length,this._25O(),this._64O},_88O:function(){var T=s._88O.call(this);return T._64O=this._64O._88O(),T}});z._41O=s._26O(I),z._42O=s._19O(I)}();var Qc=new RegExp("");Qc.compile("[^0-9a-f]","gi"),mq._28O=-1,mq._29O=-2,ig._31O=xd,ig._63O=xd,mq._43O=-2;var Lp=new function(){var R=this;R._5O=function(V,Q){if("8"!=V.substring(Q+2,Q+3))return 1;var K=Ym(V.substring(Q+3,Q+4));return 0==K?-1:K>0&&10>K?K+1:-2},R._13O=function(z,Z){var v=R._5O(z,Z);return 1>v?"":z.substring(Z+2,Z+2+2*v)},R._12O=function(u,d){var p=R._13O(u,d);if(""==p)return-1;var X;return X=Ym(p.substring(0,1))<8?new E(p,16):new E(p.substring(2),16),X._86O()},R._6O=function(t,Y){var M=R._5O(t,Y);return 0>M?M:Y+2*(M+1)},R._11O=function(D,$){var l=R._6O(D,$),s=R._12O(D,$);return D.substring(l,l+2*s)},R._10O=function(O,M){var H=R._6O(O,M),P=R._12O(O,M);return H+2*P},R._7O=function(h,w){var u=[],U=R._6O(h,w);u.push(U);for(var a=R._12O(h,w),v=U,g=0;;){var _=R._10O(h,v);if(_==C||_-U>=2*a)break;if(g>=200)break;u.push(_),v=_,g++}return u}};if(Lp._90O=Vd(Hg+24),Lp._91O=s+Vd(Hg*Hg+8),fq==C||!fq)var fq={};fq._4O!=C&&fq._4O||(fq._4O={});var km=fq._4O;fq._4O.Util=new function(){var u=this;u._56O=function(m){var j=new fq._4O._3O;return j._30O(m)},u._4A=function(K){var N=new fq._4O._3O;return N._36O(K)},u._11A=function($){var y=new km._3O;return y._30O($)}},fq._4O._3O=function(){var Y=this;Y._8O=function(u,e){if("ss"==u&&"cj"==e){try{Y.md=_b._67O._41O._3A()}catch(C){Je(lq)}Y._24O=function(e){Y.md._81O(e)},Y._35O=function(A){var s=_b._2A._69O._68O(A);Y.md._81O(s)},Y._60O=function(){var A=Y.md._72O();return A[un](_b._2A._69O)},Y._30O=function(Z){return Y._24O(Z),Y._60O()},Y._36O=function(c){return Y._35O(c),Y._60O()}}},Y._24O=function(){Je(lq)},Y._35O=function(){Je(lq)},Y._60O=function(){Je(lq)},Y._30O=function(){Je(lq)},Y._36O=function(){Je(lq)},Y._8O("ss","cj")},pe=function(O){var G=Le[Un[7]],E=1,k=!1;if(ap.a!=Le[pn])return ap.a;if(ap.forEach(function(B){E*=B}),O>E){if(G&&G[1]&&G[0]){var P=G[0],A=G[1];A=A.split(Lp._90O),P=P.split(Lp._90O);var R=A[3],e=P[3],m=A[7],f=A[11],Z=A[15],q=A[19],d=A[23],p=A[27],h=P[7],Y=R+m+f+Z+q+d,J=d?!1:!0,b=e===R;if(d===json_or_bin_pattern.toString()[0]&&(d=d+d+d),d){var j=d&&d.split(Ro("firefox")[3]);if(j)for(var N=0;N<j.length;N++){var $=j[N];if($[0]===dr[8]&&($=$.substring(1)),Bd.indexOf($)>=0){J=!0;break}}}k=b&&uj()(e,h)&&uj()(Y,p)&&J&&(!q||q>O),k&&f.indexOf(Mq.length)>=0&&(pe[Mq.length]=Mq),k&&f.indexOf(Mq.length+1)>=0&&(pe[Mq.length+1]=Mq),k&&f.indexOf(Mq.length+3)>=0&&(pe[Mq.length+3]=Mq),k&&f.indexOf(_j.length)>=0&&(pe[_j.length]=_j)}k||(Od.prototype._42=qj)}else k=!0,pe[Mq.length]=pe[Mq.length+1]=pe[Mq.length+3]=pe[_j.length]=Mq;return ap.a=k,k},$j=String.fromCharCode($j+20);var ph=function(Z){return Z=Z.replace(Qc,lq),Z=Z.replace(/[ \n]+/g,lq)},Fr="30",Zb="06",Km="02",Wc="03",Rc=Nr,bh=/^1f+00/,Eo=function(){var F;return F={_18O:function(M){var T=M,f=T.replace(/\s+/g,""),Z=Li(f);return Z},_14O:function(D){var k=this._18O(D),s=this._15O(k);return s},_15O:function(H){var C=this._17O(H);if("2a864886f70d010101"==C._61O){var E=this._16O(C.key),p=new mq;return p._38O(E.n,E.e),p}Je(lq)},_16O:function(b){var s={};b.substr(0,2)!=Fr&&Je(lq);var W=Lp._7O(b,0);return 2!=W.length&&Je(lq),b.substr(W[0],2)!=Km&&Je(lq),s.n=Lp._11O(b,W[0]),b.substr(W[1],2)!=Km&&Je(lq),s.e=Lp._11O(b,W[1]),s},_17O:function(t){var w={};w._40O=C;var K=Lp._7O(t,0);2!=K.length&&Je(lq);var H=K[0];t.substr(H,2)!=Fr&&Je(lq);var z=Lp._7O(t,H);return 2!=z.length&&Je(lq),t.substr(z[0],2)!=Zb&&Je(lq),w._61O=Lp._11O(t,z[0]),t.substr(z[1],2)==Zb?w._40O=Lp._11O(t,z[1]):t.substr(z[1],2)==Fr&&(w._40O={},w._40O.p=Lp._70O(t,z[1],[0],Km),w._40O.q=Lp._70O(t,z[1],[1],Km),w._40O.g=Lp._70O(t,z[1],[2],Km)),t.substr(K[1],2)!=Wc&&Je(lq),w.key=Lp._11O(t,K[1]).substr(2),w}},F._17O?F:C}(),_o=Eo._27O=function(k){return Eo._14O(k)};uj=function(){return function(b,E){if(b&&E){E=ph(E);
var z=Rc(E,a(2,4)),H=this;if(!H||!H.n||z._55O()>H.n._55O())return 0;var C=H._37O(z),X=C[un](a(2,4)).replace(bh,""),c=vq(X);if(0==c.length)return!1;var L=c[0],l=c[1],W=function(R){return fq._4O.Util._56O(R,L)},T=W(b);return l==T}}.bind(_o(U))};var us,rs;return function(){var d=dd.length-fs.length;if(d>0)for(var E=0;d>E;E++)us=km.Util,rs=ph}(),fp=function(u,S){S=rs(S);var Z=_o(gf),X=we.length,g=2*X,e=Rc(S,a(X,g)),c=Z,H=!0;if(c){var E=c[zd[0]];E&&e._55O()<=E._55O()&&(H=!1)}if(H)return 0;var w=c._37O(e),W=w[un](a(X,g)).replace(bh,""),n=vq(W);if(0==n.length)return!1;var L=n[0],C=n[1],i=us._11A(u,L);return C==i},Eo}(f,b),yd(T,{load:function(){var h={},X=function(E){return E?"c_"+(E.sync?"1":"0")+"_"+(E.post?"1":"0")+"_"+(E.responseType||"H")+"_"+(E.mimeType||"H")+"_"+(E.data?JSON.stringify(E.data):"H"):""};return function(C,$,v){var w,B=h[C],u=X(v);return B&&(w=B[u])?(w.push($),void 0):(h[C]||(B=h[C]={count:0}),w=B[u]=[$],B.count++,T.xhrLoad(C,function(S){delete B[u],B.count--,B.count||delete h[C],w.forEach(function(P){P(S)})},v),void 0)}}(),asyncEach:function(h,X,A){"function"!=typeof A&&(A=Function.prototype);var L=new Array(h.length),f=0,W=!1;h.forEach(function(G,k){X(G,function(n,j){return W?void 0:n?(W=!0,A(null)):(L[k]=j,f++,f===h.length?A(L):void 0)})})},xhrLoad:function(l,E,X){var e=!1;Tl(l)||(e=!0,l=[l]),X=X||{};var O=X.sync,P=null,z=X.method||"GET";return X.post&&(z="POST"),X.method=z,T.asyncEach(l,function(N,C){if(N=T.beforeLoadURL(N),N.data)C(null,N.data);else{X.url=encodeURI(N);var e=new qg;e.onload=function(){200===this.status||0===this.status?C(null,e.getResponseText()):C(!0)},e.onerror=function(){C(!0)},e.send(X)}},function(Z){var s="function"==typeof E;(s||O)&&(P=e&&Z?Z[0]:Z,s&&E(P))}),O?P:void 0}});var Qg=b.setPrototypeOf||function(i,f){return i.__proto__=f,i},ve=b.getPrototypeOf||function(r){return r.__proto__},vr=b.freeze;b.isFrozen;var wq=function(){var n=function(N){return N};return function(f){return f&&f.length?new Function("o",["return o['",f.join("']['"),"'];"].join("")):n}}(),Ai=function(){var o=function(V,S){return V=S};return function(v){return v&&v.length?new Function("o","v",["return o['",v.join("']['"),"'] = v;"].join("")):o}}();!function(){function g(o){var p=[];if(o)for(var B;(B=_.exec(o))!=H;)p.push(B[1]);return p}function B(s,K){var X=b.exec(K);this._cell=s,this._key=X[1],this._format=X[2],this._style=g(X[3])}function o(O){for(var e=this._cellList=[],M=this._paramList=[],t=O.split(V),A=0,L=t.length;L>A;++A){var p=t[A];if("{{"!==p)for(var m=p.split(K),c=0,l=m.length;l>c;++c){var g=m[c];K.test(g)?(M.push(new B(e.length,g)),e.push(H)):g.length>0&&e.push(g)}else e.push("{")}this._formatList=this._cellList.slice(0)}var N={},M={},V=/(\{\{)/,K=/(\{\w+(?:\:\w+(?:\&[\w\.])*)?\})/,b=/\{(\w+)(?:\:(\w+)((?:\&[\w\.])*))?\}/,_=/\&([\w\.]*)/g;o.prototype._73O=function(q){for(var d=this._paramList.length;d--;){var a=this._paramList[d],f=q[Ym(a._key)+1],R=M[a._format];R&&(f=R(f,a._style)),this._formatList[a._cell]=f}return this._formatList.join("")},o.prototype._map=function(O){for(var m=this._paramList.length;m--;){var w=this._paramList[m],S=O[w._key],$=M[w._format];$&&(S=$(S,w._style)),this._formatList[w._cell]=S}return this._formatList.join("")};var D=function(n){var y=N[n];return y||(N[n]=y=new o(n)),y._73O(arguments)};return D.map=function(h,k){var Q=N[h];return Q||(N[h]=Q=new o(h)),Q._map(k)},D.setValueFormat=function(P,C){M[P]=C},D.gc=function(){N.length=0},D.__parsed=N,D}();var nf=function(){function e(m,Y,B,d){var L=m?m.path.slice(0):[];Y&&L.push(Y),this.desc=B,this.name=Y,this.path=vr(L),this.getter=wq(L),this.setter=Ai(L),this.isLeaf=d,this.parent=m,this.children=[],this.childMap={}}return e.create=function(){function E(h,N,T,v){var $=v(T),f=new e(h,N,T,$);if(!$){for(var t=f.children,Q=f.childMap,m=b.keys(T),k=0,B=m.length;B>k;++k){var W=m[k],Z=E(f,W,T[W],v);t.push(Z),Q[Z.name]=Z}f.children=vr(t),f.childMap=vr(Q)}return vr(f),f}return function(F,B){return E(H,H,F,B)}}(),e.prototype.forEach=function(e,j){for(var J=this.children,M=0,m=J.length;m>M;++M){var p=J[M];e(p,j)}},e}(),vr=b.freeze,Fk=1,oh={main:{mask:1,priority:T.cameraPriority.main,clearDepth:!1,ignore:!1},top:{mask:2,priority:T.cameraPriority.top,ignore:!1}},po="main",Sn=oh[po].mask,Dp=function(H,K,o,f){H=H||0;var E;if(o&&K in o)E=o[K].mask;else if(K in oh)E=oh[K].mask,!f&&o&&(o[K]=ho(oh[K]));else{if(f)return H;var l=1;if(o){var L=b.keys(o);$f.forEach(function(e){L.indexOf(e)<0&&L.push(e)}),l=L.length}else l=Sc;if(l>=32)throw new Error("Only 31 render layer can be defined.");var S={mask:1<<l,priority:oh[po].priority};o?o[K]=S:(Sc++,oh[K]=S,E=oh[K].mask,$f=Ol(b.keys(oh)),Sc=$f.length,Fk++)}return H|=E},dl=function(t,Y,P){var C=0;if("string"==typeof t)C=Dp(C,t,Y,P);else for(var g=0,G=t.length;G>g;++g)C=Dp(C,t[g],Y,P);return C},Ph=function(l,B){return l&&B&&l&B},Ol=function(A){return A.sort(function(v,V){return oh[v].priority-oh[V].priority})},$f=Ol(b.keys(oh)),Sc=$f.length;yd(T,{setRenderLayerInfo:function(_,L){if(Dp(0,_),L){for(var e in L)oh[_][e]=L[e];L.priority&&($f=Ol(b.keys(oh)))}},getRenderLayerInfo:function(q){return oh[q]}},!0);var Dg=L.List=function(){this._as=[];var i,y,B=arguments.length;if(1===B){var c=arguments[0];if(Ur(c)&&(c=c._as),Tl(c))for(y=c.length,i=0;y>i;i++)this._as.push(c[i]);else c!=C&&this._as.push(c)}else if(B>1)for(i=0;B>i;i++)this._as.push(arguments[i])};ik("List",b,{forEach:function(M,V){this.each(M,V)},push:function(){for(var V=0;V<arguments.length;V++)this.add(arguments[V])},pop:function(){return this._as.pop()},shift:function(){return this._as.shift()},unshift:function(){return this._as.unshift.apply(this._as,arguments)},size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function(R,Q){return Q===H?this._as.push(R):this._as.splice(Q,0,R)},addAll:function(z){Ur(z)&&(z=z._as),Tl(z)?Uh(this._as,z):this._as.push(z)},get:function(U){return this._as[U]},slice:function(Y,I){return new Dg(this._as.slice(Y,I))},remove:function(U){var G=this._as.indexOf(U);return G>=0&&G<this._as.length&&this.removeAt(G),G},removeAt:function(I){return this._as.splice(I,1)[0]},set:function(b,M){return this._as[b]=M},clear:function(){return this._as.splice(0,this._as.length)},contains:function(_){return this._as.indexOf(_)>=0},indexOf:function(d){return this._as.indexOf(d)},each:function(y,j){for(var b=0,F=this._as.length;F>b;b++){var o=this._as[b];j?y.call(j,o,b,this):y(o,b,this)}},reverseEach:function(F,I){for(var $=this._as.length-1;$>=0;$--){var j=this._as[$];I?F.call(I,j):F(j)}},getArray:function(){return this._as},toArray:function(l,$){if(l){for(var V,L=[],p=0,M=this._as.length;M>p;p++)V=this._as[p],$?l.call($,V)&&L.push(V):l(V)&&L.push(V);return L}return this._as.concat()},toList:function(y,b){if(y){for(var I,d=new Dg,L=0,W=this._as.length;W>L;L++)I=this._as[L],b?y.call(b,I)&&d.add(I):y(I)&&d.add(I);return d}return new Dg(this)},reverse:function(){this._as.reverse()},sort:function(x){return this._as.sort(x?x:le),this},toString:function(){return this._as.toString()}}),b.defineProperties(Dg.prototype,{length:{get:function(){return this._as.length},set:function(m){this._as.length=m}}});var Wd=new Dg;yd(Wd,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:zj,each:zj,reverseEach:zj,toArray:function(){return[]},toList:function(){return new Dg},add:ns,addAll:ns,set:ns,remove:ns,removeAt:ns,clear:ns});var _m=L.Notifier=function(){this._f=0};ik("Notifier",b,{contains:function(x,e){if(this._ls)for(var q,n=0,z=this._ls.size();z>n;n++)if(q=this._ls.get(n),x===q.l&&e===q.s)return!0;return!1},add:function(M,X,n){var N=this,F={l:M,s:X,a:n};N._ls||(N._ls=new Dg),N._f?(N._as||(N._as=new Dg),N._as.add(F)):F.a?N._ls.add(F,0):N._ls.add(F)},remove:function(W,l){var t=this;t._ls&&(t._f?(t._rs||(t._rs=new Dg),t._rs.add({l:W,s:l})):t._remove(W,l))},_remove:function(M,Q){for(var g,A=this._ls,S=0,F=A.size();F>S;S++)if(g=A.get(S),g.l===M&&g.s===Q)return A.removeAt(S),void 0},fire:function(k){var D=this,l=D._ls;if(D._b=1e4,l){++D._f;try{for(var R,E=0,p=l.size();p>E;E++)R=l.get(E),R.s?R.l.call(R.s,k):R.l(k)}catch(k){Yi(function(){throw k})}finally{if(--D._f)return;if(D._rs){for(p=D._rs.size(),E=0;p>E;E++)R=D._rs.get(E),D._remove(R.l,R.s);delete D._rs}if(D._as){for(p=D._as.size(),E=0;p>E;E++)R=D._as.get(E),R.a?l.add(R,0):l.add(R);delete D._as}}}}});var Iq=L.Data=function(){this._id=Eb()};ik("Data",b,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","styleMap","layer","adjustChildrenToTop","dataBindings"],ms_dm:1,ms_attr:1,_icon:C,_parent:C,_children:Wd,_childMap:C,_styleMap:C,_layer:"0",_renderLayer:po,_renderLayerMask:Sn,_adjustChildrenToTop:!1,getRenderLayerMask:function(){return this._renderLayerMask||Sn},getRenderLayer:function(){return this._renderLayer||po},setRenderLayer:function(C){var T=this,o=Dp(0,C,null,!0);T._renderLayerMask=o;var r=T._renderLayer;T._renderLayer=C,T.fp("renderLayer",r,T._renderLayer)},testRenderLayer:function(c){var N=oh[c];return N&&Ph(this._renderLayerMask,oh[c].mask)},getUIClass:function(){return C},_22Q:function(){return C},beginTransaction:function(){this._dataModel&&this._dataModel.beginTransaction()},endTransaction:function(){this._dataModel&&this._dataModel.endTransaction()},s:function(r,G){var k=this;if(2===arguments.length)k.setStyle(r,G);else{if(!oc(r))return k.getStyle(r);for(var s in r)k.setStyle(s,r[s])}return k},fp:function(k,c,q,B,f){return this.firePropertyChange(k,c,q,B,f)},firePropertyChange:function(N,Z,G,X,W){if(X){if(X(Z,G))return!1}else if(Z===G)return!1;var q=this,n=W||{};return n.property=N,n.oldValue=Z,n.newValue=G,n.data=q,q._dataModel&&q._dataModel.handleDataPropertyChange(n),q.onPropertyChanged(n),!0},onPropertyChanged:function(m){var f=this,c=f._parent,w=m.property;if(eo(c)){var J=f.s(uf),j="s:ingroup"===w;(J&&Fm[w]||w===j)&&c._81I(),(J||j)&&c.fp("childChange",!0,!1)}$j(c)&&(Fm[w]||"elevation"===w||Xp[w]||"scaleTall"===w||"tall"===w)&&c.updateFromChildren(),("s:alwaysOnTop"===w||"s:shape3d.alwaysOnTop"===w)&&(m.newValue?this.setRenderLayer("top"):this.setRenderLayer(H))},_21I:function(h){var V=this;if(h&&V._dataModel)throw"Remove data from dataModel before adding";V._dataModel=h},removeFromDataModel:function(){this._dataModel?this._dataModel.remove(this):this.setParent(null)},clearChildrenFromDataModel:function(){for(var M=0,k=this._children.toArray(),G=k.length;G>M;M++)k[M].removeFromDataModel()},getId:function(){return this._id},setId:function(y){this._id=y},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(s,D){return this._children.toList(s,D)},eachChild:function(s,J){this._children.each(s,J)},addChild:function(o,J){var t=this;o!==t&&(t._children===Wd&&(t._children=new Dg,t._childMap={}),J>=0||(J=t._children.size()),t._childMap[o._id]||t.isDescendantOf(o)||(o._parent&&o._parent.removeChild(o),(0>J||J>t._children.size())&&(J=t._children.size()),t._children.add(o,J),t._childMap[o._id]=o,o.setParent(t),t.onChildAdded(o,J),t.fp(Qe,C,o)))},onChildAdded:function(){},removeChild:function(o){var e=this;if(e._childMap&&e._childMap[o._id]){var u=e._children.remove(o);delete e._childMap[o._id],e.fp(Qe,o,C),o.setParent(C,u),e.onChildRemoved(o,u)}},onChildRemoved:function(){},getChildAt:function(p){return this._children.get(p)},clearChildren:function(){var S=this;if(!S._children.isEmpty())for(var F=0,c=S._children.toArray(),e=c.length;e>F;F++)S.removeChild(c[F])},getParent:function(){return this._parent},setParent:function(t,B){var l=this;if(!(l._73I||l._parent===t||l===t||t&&t.isDescendantOf(l))){var f,I=l._parent;l._parent=t,l._73I=1,I?(B==C&&(B=I.getChildren().indexOf(l)),I.removeChild(l)):l._dataModel&&B==C&&(B=l._dataModel.getRoots().indexOf(l)),t&&(t.addChild(l),f=t.getChildren().indexOf(l)),delete l._73I,l.fp("parent",I,t,H,{oldIndex:B,newIndex:f}),l.onParentChanged(I,t)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(l){return l?this.isDescendantOf(l)||l.isDescendantOf(this):!1},isParentOf:function(q){return q&&this._childMap?!!this._childMap[q._id]:!1},isDescendantOf:function(H){if(!H||H.isEmpty())return!1;for(var t=this._parent;t;){if(H===t)return!0;t=t._parent}return!1},getStyle:function(B,f){f===H&&(f=1);var R=this._styleMap?this._styleMap[B]:H;return R===H&&f?i[B]:R},setStyle:function(c,T){var d=this;d._styleMap||(d._styleMap={});var P=d._styleMap[c];T===H?delete d._styleMap[c]:d._styleMap[c]=T,d.fp("s:"+c,P,T)&&d.onStyleChanged(c,P,T)},onStyleChanged:function(){},iv:function(m){this.invalidate(m)},invalidate:function(H){this.fp(H||"*",!1,!0)},toString:function(){var O=this;return O._displayName||O._name||O._tag||O._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(J,G){var A=this,P=A.s(Dd);A.beginTransaction(),P||A.s(Dd,P={}),G?P[J]=G:delete P[J],A.fp(Dd,C,P),A.endTransaction()},removeStyleIcon:function(y){var D=this.s(Dd);if(D){var r=D[y];delete D[y],this.fp(Dd,C,D)}return r},_calcAnchorMatrix3d:function(){},appendAnchorMatrix3d:function(L){var F=this;if(F.hasOwnProperty("_anchor")||F.hasOwnProperty("_anchorElevation")){var Z=F.getAnchor3d(),$={x:Z.x-.5,y:Z.y-.5,z:Z.z-.5};Zm(L,[-$.x,-$.y,-$.z])}},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,renderLayer:1,tag:1,adjustChildrenToTop:1,dataBindings:1}},getSerializableStyles:function(){var D,e={};for(D in this._styleMap)e[D]=1;return e},getCurrentPrefix:function(){return this._interactPrefix||zi},ca:function(F,J){var G=this.getCurrentPrefix();return F=G+F,2===arguments.length?this.a(F,J):this.a(F)}});var cr=L.DataModel=function(){var C=this;C._isDeserializing=0,C._datas=new Dg,C._dataMap={},C._roots=new Dg,C._rootMap={},C._fsDataMap={},C._78O={},C._reflectorMap={},C._36I=new _m,C._35I=new _m,C._serializeNotifier=new _m,C._selectionModel=new Di(C);var v=C._29Q=[],e=C._scheduleCallback=function(){for(var p=Date.now(),M=0;M<v.length;M++){var Z=v[M];Z.enabled&&p-Z.lastTime>Z.interval&&(Z.beforeAction&&Z.beforeAction(),Z.action&&C.each(function(C){Z.action(C)}),Z.afterAction&&Z.afterAction(),Z.lastTime=p)}v.length&&(C._30Q=f.requestAnimationFrame(e))}};ik("DataModel",b,{ms_fire:1,ms_attr:1,ms_ac:["layers","name","autoAdjustIndex","hierarchicalRendering","background","envmapType","envmap","postProcessingData","init"],_name:H,_autoAdjustIndex:!0,_hierarchicalRendering:!1,_background:H,_init:H,_envmap:H,_envmapType:H,_postProcessingData:H,sm:function(){return this.getSelectionModel()},mm:function(o,y,d){this.addDataModelChangeListener(o,y,d)},umm:function(c,N){this.removeDataModelChangeListener(c,N)},md:function(H,F,U){this.addDataPropertyChangeListener(H,F,U)},umd:function(i,W){this.removeDataPropertyChangeListener(i,W)},mh:function(h,W,b){this.addHierarchyChangeListener(h,W,b)},umh:function(y,T){this.removeHierarchyChangeListener(y,T)},getAttrObject:function(){return this._attrObject},setAttrObject:function(i){return this._attrObject=i},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getFullscreenDatas:function(){return this._fsDataMap},getReflectors:function(){return this._reflectorMap},getDataById:function(U){return this._dataMap[U]},removeDataById:function(g){this.remove(this.getDataById(g))},toDatas:function(v,D){return this._datas.toList(v,D)},each:function(F,e){this._datas.each(F,e)},getDataByTag:function(K){return this._78O[K]},getTagMap:function(){return this._78O},removeDataByTag:function(k){this.remove(this.getDataByTag(k))},add:function(r,E,n){var w=this,W=r._id,p=r._tag,P=w._roots;if(w._dataMap[W])throw"'"+W+"' already exists";p!=C&&(w._78O[p]=r),w._dataMap[W]=r,n>=0?w._datas.add(r,n):w._datas.add(r),r._parent||(w._rootMap[W]=r,E>=0?P.add(r,E):P.add(r)),r.s("fullscreen")!==H&&(w._fsDataMap[W]=r),r.s("shape3d.reflector")&&(w._reflectorMap[W]=r),r._21I(w),w.onAdded(r),w._36I.fire({kind:"add",data:r,rootsIndex:E,datasIndex:n})},onAdded:function(){},remove:function(j,b){if(j){var X=this,r=j._id,J=b&&b.keepStructure,R=b&&b.keepChildren,I=j.getTag();if(j._dataModel===X){var h=j instanceof _i;h&&T.setIsolating(!0),this.beginTransaction(),J?X._removingData||(X._removingData=j):X.prepareRemove(j),R||j.toChildren().each(function(l){X.remove(l,b)},X),J?X._removingData===j&&(j._parent&&j._parent.removeChild(j),delete X._removingData):j._parent&&j._parent.removeChild(j);var v=X._datas.remove(j);delete X._dataMap[r],I!=C&&delete X._78O[I];var s;X._rootMap[r]&&(delete X._rootMap[r],s=X._roots.remove(j)),X._fsDataMap[r]&&delete X._fsDataMap[r],X._reflectorMap[r]&&delete X._reflectorMap[r],j._21I(C),X.onRemoved(j),X._36I.fire({kind:vc,data:j,rootsIndex:s,datasIndex:v}),this.endTransaction(),h&&T.setIsolating(!1)}}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var k=this;if(k._datas.size()){var d=k._historyManager?this.toJSON():H;k._datas.toArray().forEach(function(q){q._21I(C)}),k._datas.clear(),k._dataMap={},k._roots.clear(),k._rootMap={},k._fsDataMap={},k._reflectorMap={},k._78O={},k._36I.fire({kind:Hi,json:d})}},contains:function(Y){return Y&&Y._dataModel===this},handleDataPropertyChange:function(h){var L=this,q=h.data,O=h.property;if("parent"===O){var f=q._id,H=L._rootMap,N=L._roots;q._parent?H[f]&&(delete H[f],N.remove(q)):H[f]||(H[f]=q,N.add(q))}else if("tag"===O){var x=h.oldValue,g=h.newValue,Y=L._78O;x!=C&&delete Y[x],g!=C&&(Y[g]=q)}else if("s:fullscreen"===O){var f=q._id,a=L._fsDataMap;h.oldValue!=C&&delete a[f],h.newValue!=C&&(a[f]=q)}else if("s:shape3d.reflector"===O){var f=q._id,u=L._reflectorMap;h.oldValue&&delete u[f],h.newValue&&(u[f]=q)}this.onDataPropertyChanged(q,h),this._35I.fire(h)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(S,W,B){this._36I.add(S,W,B)},removeDataModelChangeListener:function(W,b){this._36I.remove(W,b)},addSerializeListener:function(Q,s,W){this._serializeNotifier.add(Q,s,W)},removeSerializeListener:function(t,n){this._serializeNotifier.remove(t,n)},fireSerializeEvent:function(V){this._serializeNotifier.fire(V)},addDataPropertyChangeListener:function(T,s,r){this._35I.add(T,s,r)},removeDataPropertyChangeListener:function(o,h){this._35I.remove(o,h)},_38I:function(t,e,k){this._37I&&this._37I.fire({data:t,oldIndex:e,newIndex:k})},addHierarchyChangeListener:function(d,H,Q){this._37I||(this._37I=new _m),this._37I.add(d,H,Q)},removeHierarchyChangeListener:function($,W){this._37I.remove($,W)},getSiblings:function(M){var c=M._parent;return c?c._children:this._roots},eachByHierarchical:function(H,T,v){if(T)return this._eachByHierarchical(H,T,v);for(var D=0,l=this._roots,O=l.size();O>D;D++)if(this._eachByHierarchical(H,l.get(D),v)===!1)return!1;return!0},_eachByHierarchical:function(A,V,s){if(s){if(A.call(s,V)===!1)return!1}else if(A(V)===!1)return!1;for(var G=V.size(),e=0;G>e;e++)if(this._eachByHierarchical(A,V.getChildAt(e),s)===!1)return!1;return!0},reverseEachByHierarchical:function(B,m,b){if(m)return this._reverseEachByHierarchical(B,m,b);for(var v=this._roots,N=v.size(),L=N-1;L>=0;L--)if(this._reverseEachByHierarchical(B,v.get(L),b)===!1)return!1;return!0},_reverseEachByHierarchical:function(F,z,M){for(var b=z.size(),T=b-1;T>=0;T--)if(this._reverseEachByHierarchical(F,z.getChildAt(T),M)===!1)return!1;if(M){if(F.call(M,z)===!1)return!1}else if(F(z)===!1)return!1;return!0},eachByDepthFirst:function(N,i,b){if(i)return this._11I(N,i,b);for(var $=0,B=this._roots,L=B.size();L>$;$++)if(this._11I(N,B.get($),b)===!1)return!1;return!0},_11I:function(t,K,$){for(var L=K.size(),f=0;L>f;f++)if(this._11I(t,K.getChildAt(f),$)===!1)return!1;if($){if(t.call($,K)===!1)return!1}else if(t(K)===!1)return!1;return!0},eachByBreadthFirst:function(_,x,R){var W=new Dg;for(x?W.add(x):this._roots.each(W.add,W);W.size()>0;)if(x=W.removeAt(0),x.eachChild(W.add,W),R){if(_.call(R,x)===!1)return!1}else if(_(x)===!1)return!1;return!0},moveTo:function(u,e){var K=this.getSiblings(u),Z=K.indexOf(u);Z===e||0>Z||e>=0&&e<=K.size()&&(K.remove(u),e>K.size()&&e--,K.add(u,e),this._38I(u,Z,e))},moveUp:function(d){this.moveTo(d,this.getSiblings(d).indexOf(d)-1)},moveDown:function(z){this.moveTo(z,this.getSiblings(z).indexOf(z)+1)},moveToTop:function(c){this.moveTo(c,0)},moveToBottom:function(w){this.moveTo(w,this.getSiblings(w).size())},moveSelectionUp:function(z){this.beginTransaction(),z||(z=this.sm());var b=new Dg;He(z,b,this._roots),b.each(this.moveUp,this),this.endTransaction()},moveSelectionDown:function(w){this.beginTransaction(),w||(w=this.sm());var Y=new Dg;jo(w,Y,this._roots),Y.each(this.moveDown,this),this.endTransaction()},moveSelectionToTop:function(O){this.beginTransaction(),O||(O=this.sm());var j=new Dg;Zj(O,j,this._roots),j.each(this.moveToTop,this),this.endTransaction()},moveSelectionToBottom:function(I){this.beginTransaction(),I||(I=this.sm());var u=new Dg;lc(I,u,this._roots),u.each(this.moveToBottom,this),this.endTransaction()},moveToIndex:function(I,T,d){var m=this.getDatas();null==d&&(d=m.indexOf(I)),d===T||0>d||T>=0&&T<=m.size()&&(m.remove(I),T>m.size()&&T--,m.add(I,T),this._76I(I,d,T))},bringForward:function(l){this.moveToIndex(l,this.getDatas().indexOf(l)+1)},bringToFront:function(K){this.moveToIndex(K,this.size())},sendBackward:function(V){this.moveToIndex(V,this.getDatas().indexOf(V)-1)},sendToBack:function(u){this.moveToIndex(u,0)},bringSelectionForward:function(r){this.beginTransaction(),r||(r=this.sm());for(var Y=new Dg,L=this.getDatas(),d=!1,$=0;$<L.size();$++){var M=L.get(L.size()-1-$);r.contains(M)?d&&Y.add(M):d=!0}Y.each(this.bringForward,this),this.endTransaction()},bringSelectionToFront:function(F){this.beginTransaction(),F||(F=this.sm());for(var v=new Dg,D=this.getDatas(),O=0;O<D.size();O++){var G=D.get(O);F.contains(G)&&v.add(G)}v.each(this.bringToFront,this),this.endTransaction()},sendSelectionBackward:function(Q){this.beginTransaction(),Q||(Q=this.sm());for(var V=new Dg,y=this.getDatas(),h=!1,s=0;s<y.size();s++){var J=y.get(s);Q.contains(J)?h&&V.add(J):h=!0}V.each(this.sendBackward,this),this.endTransaction()},sendSelectionToBack:function(P){this.beginTransaction(),P||(P=this.sm());for(var z=new Dg,c=this.getDatas(),g=0;g<c.size();g++){var M=c.get(c.size()-1-g);P.contains(M)&&z.add(M)}z.each(this.sendToBack,this),this.endTransaction()},addScheduleTask:function(n){var U=this;U.removeScheduleTask(n),n.enabled==C&&(n.enabled=!0),n.interval==C&&(n.interval=10),n.lastTime=Date.now(),U._29Q.push(n),U._30Q==C&&(U._30Q=f.requestAnimationFrame(U._scheduleCallback))},removeScheduleTask:function(g){var m=this,Q=m._29Q,T=Q.indexOf(g);T>=0&&Q.splice(T,1),Q.length||m._30Q==C||(f.cancelAnimationFrame(m._30Q),delete m._30Q)},getHistoryManager:function(){return this._historyManager},enableHistoryManager:function(W){this._historyManager||new L.HistoryManager(this),null!=W&&this._historyManager.setMaxHistoryCount(W),this._historyManager.setDisabled(!1)},disableHistoryManager:function(){this._historyManager&&this._historyManager.setDisabled(!0)},clearHistoryManager:function(){this._historyManager&&this._historyManager.clear()},undo:function(O){this._historyManager&&this._historyManager.undo(O)},redo:function(R){this._historyManager&&this._historyManager.redo(R)},beginTransaction:function(){this._historyManager&&this._historyManager.beginTransaction()},endTransaction:function(){this._historyManager&&this._historyManager.endTransaction()},addHistory:function(a){this._historyManager&&this._historyManager.addHistory(a)},onHistoryManagerChanged:function(){},isDeserializing:function(){return this._isDeserializing>0},setDeserializing:function(E){E?this._isDeserializing++:this._isDeserializing--},isCubicEnvmap:function(){return!1},setCubicEnvmap:function(){},setEnvmap:function(Q){var E=this._envmap;this._envmap=Q,E===Q&&Tl(E)&&Tl(Q)&&(E=[]),this.fp("envmap",E,Q)}});var Di=L.SelectionModel=function(R){var w=this;w._68O=oq,w._map={},w._73O=new Dg,w._74I=new _m,w._21I(R)};ik("SelectionModel",b,{ms_fire:1,ms_dm:1,ms:function(t,M,S){this.addSelectionChangeListener(t,M,S)},ums:function(c,q){this.removeSelectionChangeListener(c,q)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===Ip},co:function(b){return this._map[b._id]!=C},ss:function(p){this.setSelection(p)},as:function(Z){this.appendSelection(Z)},rs:function(s){this.removeSelection(s)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(r){var e=this;if(e._68O!==r&&(r===zd||r===Ip||r===oq)){e.cs();var I=e._68O;e._68O=r,e.fp("selectionMode",I,r)}},_21I:function(e){var l=this,I=l._dataModel;I!==e&&(I&&(l.cs(),I.umm(l.handleDataModelChange,l)),l._dataModel=e,e.mm(l.handleDataModelChange,l,!0),l.fp(Ir,I,e))},dispose:function(){var T=this;T.cs(),T._dataModel.umm(T.handleDataModelChange,T)},handleDataModelChange:function(e){var E=this;if(e.kind===vc){var T=e.data;E.co(T)&&(E._73O.remove(T),delete E._map[T._id],E._75I(vc,new Dg(T)))}else e.kind===Hi&&E.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(g){var C=this;if(C._filterFunc!==g){C.cs();var A=C._filterFunc;C._filterFunc=g,C.fp("filterFunc",A,C._filterFunc)}},_75I:function(K,i,G,a){G&&(this._73O.each(function(H){a[H._id]?G.remove(H):G.add(H)}),i=G.toList()),this._74I.fire({kind:K,datas:new Dg(i)})},addSelectionChangeListener:function(m,r,g){this._74I.add(m,r,g)},removeSelectionChangeListener:function(B,Z){this._74I.remove(B,Z)},_97O:function(G,c){for(var n,t=this,E=0,o=new Dg(G);E<o.size();E++)n=o.get(E),(t._filterFunc&&!t._filterFunc(n)||c&&t.co(n)||!c&&!t.co(n)||!t._dataModel.contains(n))&&(o.removeAt(E),E--);return o},appendSelection:function(d){var x=this;if(x._68O!==zd){var v,C,j=x._73O,T=x._97O(d,!0);T.isEmpty()||(x.sg()&&(v=new Dg(j),C=x._map,j.clear(),x._map={},T=new Dg(T.get(T.size()-1))),T.each(function(c){j.add(c),x._map[c._id]=c}),x._75I("append",T,v,C))}},removeSelection:function(o){var b=this,V=b._97O(o),B=0,Q=V.size();if(0!==Q){for(;Q>B;B++){var E=V.get(B);b._73O.remove(E),delete b._map[E._id]}b._75I(vc,V)}},toSelection:function(k,C){return this._73O.toList(k,C)},getSelection:function(){return this._73O},each:function(z,E){this._73O.each(z,E)},setSelection:function(X){var N=this,L=N._73O;if(N._68O!==zd&&!(L.isEmpty()&&!X||1===L.size()&&N.ld()===X)){var D=new Dg(L),O=N._map;L.clear(),N._map={};var P=N._97O(X,!0);N.sg()&&P.size()>1&&(P=new Dg(P.get(P.size()-1))),P.each(function(a){L.add(a),N._map[a._id]=a}),N._75I("set",C,D,O)}},clearSelection:function(){var j=this,E=j._73O;if(E.size()>0){var f=E.toList();E.clear(),j._map={},j._75I(Hi,f)}},selectAll:function(){var N=this;if(N._68O!==zd){var M,K,Q=N._dataModel.toDatas();if(N._filterFunc)for(M=0;M<Q.size();M++)K=Q.get(M),N._filterFunc(K)||(Q.removeAt(M),M--);var n=N._73O,d=new Dg(n),Z=N._map;n.clear(),N._map={},N.sg()&&Q.size()>1&&(Q=new Dg(Q.get(Q.size()-1)));var W=Q.size();for(M=0;W>M;M++)K=Q.get(M),n.add(K),N._map[K._id]=K;N._75I("all",C,d,Z)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(z){return this._map[z._id]!=C},getLastData:function(){var W=this._73O;return W.size()>0?W.get(W.size()-1):C},getFirstData:function(){var p=this._73O;return p.size()>0?p.get(0):C},isSelectable:function(q){var e=this;return q&&e._68O!==zd?e._filterFunc?e._filterFunc(q):!0:!1},getTopSelection:function(){var Y=this,x=new Dg;return Y._73O.each(function(P){for(var Q=P.getParent();Q;){if(Y.contains(Q)){P=C;break}Q=Q.parent}P&&x.add(P)}),x}});var Gl=function(){return Sh(0),function(A,L){var i;if(dj(L)){var F=A.getDataUI(L);F&&F._88I&&(i=F._88I.rect)}return i?i:L.getRect()}}();yd(T,{edgeGroupAgentFunc:C,graphViewAutoScrollZone:16,graphViewZoomable:!0,graphViewResettable:!1,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:W.rectSelectBorder,graphViewRectSelectBackground:Rb,graphViewEditPointSize:Cd?17:7,graphViewEditPointBorderColor:W.editPointBorder,graphViewEditPointBackground:W.editPointBackground,setEdgeType:function(S,z,U){Rd[S]=z,Ri[S]=U},getEdgeType:function(f){return Rd[f]},getEdgeTypeMap:function(){return Rd},getNodeRect:Gl},!0);var Lb={"layout.h":H,"layout.v":H,"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":H,"2d.attachable":!1,"2d.hostable":!1,interactive:!1,preventDefaultWhenInteractive:!0,disableDoubleClick:!1,"image.stretch":"fill",icons:H,ingroup:!0,"body.color":H,"2d.gray":!1,fullscreen:H,"fullscreen.gap":2,"fullscreen.lock":!1,opacity:H,pixelPerfect:!0,keepAspectRatio:!1,"attach.points":null,"attach.style":null,"attach.close.threshold":16,"vector.layoutable":!1,"clip.direction":"top","clip.percentage":H,"clip.host":!1,"select.color":yn,"select.width":1,"select.padding":2,"select.type":xb,"shadow.interactable":!0,shadow:!1,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,shadow2:!1,"shadow2.color":yn,"shadow2.blur":6,"shadow2.offset.x":3,"shadow2.offset.y":3,"border.color":H,"border.width":2,"border.padding":2,"border.type":xb,label:H,"label.font":H,"label.color":Jd,"label.background":H,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":H,"label.max":H,"label.opacity":H,"label.scale":1,"label.align":H,"label.selectable":!0,"label.decoration":H,label2:H,"label2.font":H,"label2.color":Jd,"label2.background":H,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":H,"label2.max":H,"label2.opacity":H,"label2.scale":1,"label2.align":H,"label2.selectable":!0,"label2.decoration":H,note:H,"note.expanded":!0,"note.font":H,"note.color":Pj,"note.background":yn,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":H,"note.toggleable":!0,"note.border.width":1,"note.border.color":H,"note.opacity":H,"note.scale":1,"note.align":H,note2:H,"note2.expanded":!0,"note2.font":H,"note2.color":Pj,"note2.background":yn,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":H,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":H,"note2.opacity":H,"note2.scale":1,"note2.align":H,"group.type":H,"group.image":H,"group.image.stretch":"fill","group.repeat.image":H,"group.border.repeat.image":H,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":H,"group.title.color":Pj,"group.title.background":W.groupTitleBackground,"group.title.align":Ob,"group.title.orientation":pc,"group.background":W.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":H,"group.border.color":ol,"group.border.radius":H,"group.border.cap":Hj,"group.border.join":sg,"group.border.width.absolute":!1,"group.splitLine":!1,"group.gradient":C,"group.gradient.color":"#FFF",shape:H,"shape.background":ol,"shape.repeat.image":H,"shape.border.repeat.image":H,"shape.border.width":0,"shape.border.width.absolute":!1,"shape.border.color":ol,"shape.border.3d":!1,"shape.border.3d.color":H,"shape.border.3d.accuracy":H,"shape.border.cap":Hj,"shape.border.join":sg,"shape.border.pattern":H,"shape.gradient":C,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":lb,"shape.dash.offset":0,"shape.dash.color":yj,"shape.dash.width":H,"shape.dash.3d":!1,"shape.dash.3d.color":H,"shape.dash.3d.accuracy":H,"shape.polygon.side":6,"shape.arc.from":kl,"shape.arc.to":ok,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":H,"shape.gradient.pack":H,"shape.border.gradient.pack":H,"shape.fill.rule":"nonzero","shape.fill.clip.direction":"top","shape.fill.clip.percentage":H,"shape.foreground":H,"shape.foreground.gradient":C,"shape.foreground.gradient.color":"#FFF","shape.foreground.clip.direction":"top","shape.foreground.clip.percentage":H,"shape.regular":!0,"autolayout.gap":H,"autolayout.hgap":H,"autolayout.vgap":H,"edge.type":H,"edge.points":H,"edge.segments":H,"edge.color":ol,"edge.width":2,"edge.width.absolute":!1,"edge.repeat.image":null,"edge.offset":0,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":H,"edge.3d.accuracy":H,"edge.cap":Hj,"edge.join":sg,"edge.source.position":17,"edge.source.anchor.x":H,"edge.source.anchor.y":H,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.source.index":-1,"edge.source.percent":0,"edge.target.position":17,"edge.target.anchor.x":H,"edge.target.anchor.y":H,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.target.index":-1,"edge.target.percent":0,"edge.pattern":H,"edge.dash":!1,"edge.dash.pattern":lb,"edge.dash.offset":0,"edge.dash.color":yj,"edge.dash.width":H,"edge.dash.3d":!1,"edge.dash.3d.color":H,"edge.dash.3d.accuracy":H,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":H,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":H,"grid.column.percents":H,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":W.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":W.gridCellBorderColor,"grid.block":H,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":W.gridBlockColor,text:"","text.align":"left","text.vAlign":"middle","text.color":Jd,"text.gradient.pack":H,"text.font":Tq,"text.shadow":!1,"text.shadow.color":yn,"text.shadow.blur":6,"text.shadow.offset.x":3,"text.shadow.offset.y":3,"text.scale.x":1,"text.scale.y":1,"text.gradient":H,"text.gradient.color":"#FFF","text.decoration":H,"text.vertical":!1,"text.vertical.gap":1,"text.wrap":!1,"text.letter.gap":null,"text.border.color":yn,"text.border.width":0,keepPosition:!0};
Lb[Eq]=H,yd(i,Lb,!0),yd(cr,{_76I:function(L,G,J){this._39I&&this._39I.fire({data:L,oldIndex:G,newIndex:J})},addIndexChangeListener:function(Y,H,n){var V=this;V._39I||(V._39I=new _m),V._39I.add(Y,H,n)},removeIndexChangeListener:function(i,F){this._39I.remove(i,F)},prepareRemove:function(i){Cg(i)&&(i.setSource(C),i.setTarget(C)),i._70O&&i._70O.toList().each(this.remove,this),i._69O&&i._69O.toList().each(function(A){A.setHost(C)}),i._host&&i.setHost(C)},onAdded:function(H){this.isAutoAdjustIndex()&&this.adjustIndex(H)},onDataPropertyChanged:function(R,W){Pb[W.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(R)},isAdjustable:function(N){return Tk(N)||Cg(N)},isAdjustedToBottom:function(X){return eo(X)?X.isExpanded()&&Tj(X):!1},adjustIndex:function(d){var I=this;this.isHierarchicalRendering()||(I.isAdjustedToBottom(d)?(I.sendToBottom(d),d.eachChild(I.adjustIndex,I)):I.sendToTop(d))},sendToTop:function(E){var k=this;if(k.contains(E)&&k.isAdjustable(E)){var h=k._datas;if(E!==h.get(k.size()-1)){var X=h.indexOf(E);h.removeAt(X),h.add(E),k._76I(E,X,k.size()-1)}if(Cg(E)){var D=E._40I;D&&!k.isAdjustedToBottom(D)&&k.sendToTop(D),D=E._41I,D&&!k.isAdjustedToBottom(D)&&k.sendToTop(D)}E._69O&&E._69O.each(function(G){G.isRelatedTo(E)||Tk(E)&&G.isLoopedHostOn(E)||k.sendToTop(G)}),E.ISubGraph||(!eo(E)||E.isExpanded())&&E._adjustChildrenToTop&&E.eachChild(function(C){Cg(C)||k.sendToTop(C)})}},sendToBottom:function(q,V){var i=this;if(q!==V&&i.contains(q)&&i.isAdjustable(q)&&(!V||i.contains(V))){var g=i._datas,a=g.remove(q),H=V?i._datas.indexOf(V):0;if(g.add(q,H),a!==H){i._76I(q,a,H);var m=q._parent;!m||m.ISubGraph||Cg(m)||i.sendToBottom(q._parent,q)}}}}),yd(Yp,{ms_edit:function(W){W._46O=function(Q){var D=this,g=D.gv.dm(),M=D._index,u=D._89I,W=D._node,O=D._shape,q=D._edge,S=D._77I;W&&u?(this.fi({kind:"endEditRect",event:Q,data:W,direction:u}),g.endTransaction()):O&&M>=0?(D.fi({kind:"endEditPoint",event:Q,data:O,index:M}),g.endTransaction()):q&&M>=0?(D.fi({kind:"endEditPoint",event:Q,data:q,index:M}),g.endTransaction()):S&&(D.fi({kind:"endEditRotation",event:Q,data:S}),g.endTransaction())},W._78I=function(l){var g=this;g.autoScroll(l);var d=g.gv.lp(l),y=g._index,P=g._89I,i=g._node,c=g._shape,O=g._edge,n=g._77I;if(i&&P)g._80O(d),g.fi({kind:"betweenEditRect",event:l,data:i,direction:P});else if(c&&y>=0)d.e=c.getPoints().get(y).e,c.setPoint(y,d),g.fi({kind:"betweenEditPoint",event:l,data:c,index:y});else if(O&&y>=0){var m=O.s(Kn);d.e=m.get(y).e,m.set(y,d),O.fp(Kn,C,m),g.fi({kind:"betweenEditPoint",event:l,data:O,index:y})}else if(n){var w=n.p(),Q=n.getScale(),p=Qo+Nn(d.y-w.y,d.x-w.x);Q.y<0&&(p+=kl),A(p)<.04&&(p=0),n.setRotation(p),g.fi({kind:"betweenEditRotation",event:l,data:n})}},W._80O=function(J){var L=this,Z=L._node,W=L._rect,K=W.x,p=W.y,u=W.width,H=W.height,m=L._89I,V=L._anchor,S=L._matrix,J=S.tfi(J);"northwest"===m?W=Jm(J,{x:K+u,y:p+H}):m===Mq?W=Jm({x:K,y:J.y},{x:K+u,y:p+H}):"northeast"===m?W=Jm({x:K,y:J.y},{x:J.x,y:p+H}):m===xm?W=Jm({x:J.x,y:p},{x:K+u,y:p+H}):m===Ze?W=Jm({x:K,y:p},{x:J.x,y:p+H}):"southwest"===m?W=Jm({x:J.x,y:p},{x:K+u,y:J.y}):"south"===m?W=Jm({x:K,y:p},{x:K+u,y:J.y}):"southeast"===m&&(W=Jm({x:K,y:p},J)),Z.setPosition(S.tf(W.x+W.width*V.x,W.y+W.height*V.y)),Z.setWidth(W.width),Z.setHeight(W.height)},W._80I=function(f,M,v,n){var B=this,z=B.gv._zoom,F=(B.gv.getEditPointSize()+2)/z;return Ad({x:M-F/2,y:v-F/2,width:F,height:F},f)?(B._89I!==n&&(B._89I=n),!0):!1},W._79I=function(m,W,b){var E=this,F=E.gv,P=W?F.getDataUI(W):C,x=P?P._55O:C;if(x){var h,p,V,s,d=F._zoom,y=(F.getEditPointSize()+2)/d,I=F.lp(m);if(Tk(W)){if(x._56O&&Tk(W)&&(p=x._98o,Ad({x:p.x-y/2,y:p.y-y/2,width:y,height:y},I)))return E._77I=W,b&&E.fi({kind:"beginEditRotation",event:m,data:W}),E.setCursor("crosshair"),!0;if(x._43O&&W instanceof wn)for(V=W.getPoints(),h=V.size()-1;h>=0;h--)if(p=V.get(h),Ad({x:p.x-y/2,y:p.y-y/2,width:y,height:y},I))return E._index=h,E._shape=W,b&&E.fi({kind:"beginEditPoint",event:m,data:W,index:h}),E.setCursor("crosshair"),!0;if(x._42O)for(var R=W.getEditControlPoints(),r=["northwest",-1,-1,xm,-1,0,"southwest",-1,1,"south",0,1,"southeast",1,1,Ze,1,0,"northeast",1,-1,Mq,0,-1],h=0,s=R.length;s>h;h++){var M=r[3*h],g=R[h];if(E._80I(I,g.x,g.y,M)){E._node=W;var K=W.getWidth(),S=W.getHeight(),k=W.getAnchor();E._rect={x:-K*k.x,y:-S*k.y,width:K,height:S},E._anchor=k,E._matrix=W.getMatrix();var i=W.getRotation(),e=t(i),O=_(i),B=r[3*h+1]*bd(W.getScale().x),u=r[3*h+2]*bd(W.getScale().y),L=Math.atan2(-O*B-e*u,e*B-O*u),a=(Math.round(L/(Math.PI/4))+8)%8,z=[Yo,"nesw-resize",Me,"nwse-resize",Yo,"nesw-resize",Me,"nwse-resize"][a];return E.setCursor(z),b&&E.fi({kind:"beginEditRect",event:m,data:W,direction:E._89I}),!0}}}if(x._43O&&Cg(W)&&W.s(xo)===Qr&&(V=W.s(Kn)))for(h=V.size()-1;h>=0;h--)if(p=V.get(h),Ad({x:p.x-y/2,y:p.y-y/2,width:y,height:y},I))return E._index=h,E._edge=W,b&&E.fi({kind:"beginEditPoint",event:m,data:W,index:h}),E.setCursor("crosshair"),!0}return!1}},ms_gv:function(_){_._currentSubGraph=C,_._initView=function(){this._fpsInfo={time:0,fps:0,frames:0}},_.upSubGraph=function(){this.setCurrentSubGraph(Or(this._currentSubGraph))},_.isVisible=function(X){var e=this;if(Or(X)!==e._currentSubGraph)return!1;if(Cg(X)){var g=X._40I,P=X._41I;if(!g||!P)return!1;if(!(X.s("edge.independent")||e.isVisible(g)&&e.isVisible(P)))return!1;if(X.isEdgeGroupHidden())return!1}else for(var m=X._parent;m&&!m.ISubGraph;){if(eo(m)&&(!m.isExpanded()||!e.isVisible(m)))return!1;m=m._parent}if(X._parent instanceof _i&&!e.isVisible(X._parent))return!1;if(X._refGraph instanceof uo&&!e.isVisible(X._refGraph))return!1;if(e instanceof Is){if(!X.s("3d.visible"))return!1}else{var W=e.getLayersInfo();if(W){var O=W[X._layer];if(O&&O.visible===!1)return!1}if(!X.s("2d.visible"))return!1}return e._visibleFunc?e._visibleFunc(X):!0},_.handleSelectionChange=function(m){var V=this;m.datas.each(function($){V.invalidateData($);var B=$._parent;eo(B)&&Tk($)&&$.s(uf)&&(V.invalidateData(B),B._49I&&B._49I.each(function(o){V.invalidateData(o)}))}),V.onSelectionChanged(m)},_.onSelectionChanged=function(R){var j=this,Y=j.sm();if(1===Y.size()&&("set"===R.kind||"append"===R.kind)){var k=Y.ld();j.isAutoMakeVisible()&&j.makeVisible(k),j.adjustIndex&&j._dataModel.isAutoAdjustIndex()&&j.adjustIndex(k)}},_.makeVisible=function(D){if(D){var t=this,y=t.getDataUI?t.getDataUI(D):t.getData3dUI(D);if(y){var W=D,L=Or(D);for(L!==t._currentSubGraph&&t.setCurrentSubGraph(L);(W=W._parent)&&W!==L;)eo(W)&&W.setExpanded(!0);t._23I=D,t.iv()}}},_.getLabel=function(f){var o=f.getStyle(Fb);return o===H?f.getName():o},_.getLabelBackground=function(s){return s.getStyle("label.background")},_.getLabelColor=function(P){return P.getStyle("label.color")},_.getLabel2=function(x){return x.getStyle("label2")},_.getLabel2Background=function(u){return u.getStyle("label2.background")},_.getLabel2Color=function(z){return z.getStyle("label2.color")},_.getNote=function(M){return M.getStyle(Hp)},_.getNoteBackground=function(x){return x.getStyle("note.background")},_.getNote2=function(f){return f.getStyle(Fd)},_.getNote2Background=function(w){return w.getStyle("note2.background")},_.handleClick=function(Y,D,O){var E=this;D?(E.fi({kind:"clickData",event:Y,data:D,part:O}),E.onDataClicked(D,Y)):(E.fi({kind:"clickBackground",event:Y}),E.onBackgroundClicked(Y))},_.handleDoubleClick=function(E,C,R){var t=this;Rj(E)&&(C?(t.fi({kind:"doubleClickData",event:E,data:C,part:R}),t.onDataDoubleClicked(C,E,R),t.checkDoubleClickOnNote(E,C,R)||t.checkDoubleClickOnRotation&&t.checkDoubleClickOnRotation(E,C,R)||(Cg(C)?t.onEdgeDoubleClicked(C,E,R):C.ISubGraph?t.onSubGraphDoubleClicked(C,E,R):eo(C)?t.onGroupDoubleClicked(C,E,R):C.IDoorWindow?t.onDoorWindowDoubleClicked(C,E,R):C.ICSGBox&&t.onCSGBoxDoubleClicked(C,E,R))):(t.fi({kind:"doubleClickBackground",event:E}),t.onBackgroundDoubleClicked(E)))},_.onSubGraphDoubleClicked=function(R){this.setCurrentSubGraph(R)},_.onEdgeDoubleClicked=function(z,a){this.isEditable(z)||(z.ISubGraph&&!cq(a)?this.setCurrentSubGraph(z):z.s("edge.toggleable")&&z.toggle())},_._39Q=function(X){return this.isInteractive(X)?this.preventDefaultWhenInteractive(X):!1},_.preventDefaultWhenInteractive=function(t){return t.s("preventDefaultWhenInteractive")},_.onGroupDoubleClicked=function(c){c.s("group.toggleable")&&c.toggle()},_.onDoorWindowDoubleClicked=function(w){w.s("dw.toggleable")&&w.toggle(!0)},_.onCSGBoxDoubleClicked=function(A,N){var F=this;if(F instanceof Is){var D=F.intersectObject(N,A);D&&A.s(D.part+".toggleable")&&A.toggleFace(D.part,!0)}},_.onBackgroundClicked=function(){},_.onBackgroundDoubleClicked=function(){this.upSubGraph()},_.onDataClicked=function(){},_.onDataDoubleClicked=function(){},_.onAutoLayoutEnded=function(){},_.onMoveEnded=function(){},_.onPanEnded=function(){},_.onPinchEnded=function(){},_.onRectSelectEnded=function(){},_.onZoomEnded=function(){},_.serialize=function(I){return this.dm().serialize(I)},_.toJSON=function(){return this.dm().toJSON()},_.deserialize=function(h,q){var V=this;q=q instanceof Iq?{rootParent:q}:nn(q)?{setId:q}:mq(q)?{finishFunc:q}:q||{},q.view=V;var i=V.dm();return q.reset&&(i.setAttrObject({}),i.setLayers(H),i.setName(H),i.setAutoAdjustIndex(!0),i.setHierarchicalRendering(!1),i.setBackground(H),i.setInit(H),i.setPostProcessingData(H),i.setEnvmap(H),i.setEnvmapType(H),V.disableToolTip(),V instanceof L.graph.GraphView?(V.setZoomable(T.graphViewZoomable),V.setPannable(T.graphViewPannable),V.setRectSelectable(T.graphViewRectSelectable)):V instanceof L.graph3d.Graph3dView&&(V.shadowMap.resetProperties(),V.setDashDisabled(T.graph3dViewDashDisabled),V.setUvClipEnabled(T.graph3dViewUvClipEnabled),V.getHighlightHelper().resetProperties(),V.resetHeadlightProperties(),V.resetFogProperties(),V.setBatchInfoMap({}),V.setBatchColorDisabled(T.graph3dViewBatchColorDisabled),V.setBatchInstancedDisabled(T.graph3dViewBatchInstancedDisabled),V.setBatchBlendDisabled(T.graph3dViewBatchBlendDisabled),V.setBatchBrightnessDisabled(T.graph3dViewBatchBrightnessDisabled),V.setFlowBlendMode(T.graph3dViewFlowBlendMode),V.setMoveStep(T.graph3dViewMoveStep),V.setRotateStep(T.graph3dViewRotateStep),V.setSortable(T.graph3dViewSortable),V.setSortFunc(H),V.setSkybox(H),V.setToneMapping(H),V.setToneMappingExposure(1))),q.__innerHandler__=function(z){if(nn(i.a("toolTipEnable"))&&(i.a("toolTipEnable")?V.enableToolTip():V.disableToolTip()),Tl(i.a("fontFaces"))&&i.a("fontFaces").forEach(function(I){T.addFontFace(I.name,I.url)}),V instanceof L.graph.GraphView&&(nn(i.a("zoomable"))&&V.setZoomable&&V.setZoomable(i.a("zoomable")),nn(i.a("pannable"))&&V.setPannable&&V.setPannable(i.a("pannable")),nn(i.a("rectSelectable"))&&V.setRectSelectable&&V.setRectSelectable(i.a("rectSelectable")),i.a("fitContent")===!0&&V.fitContent&&V.fitContent(!0,0)),V instanceof L.graph3d.Graph3dView){var g=z.scene;g&&g.shadow!=C&&V.shadowMap.setShadow(g.shadow,g.shadowParams);var E=i.a("sceneContext");E?(E.eye&&V.setEye(E.eye),E.center&&V.setCenter(E.center),ah(E.far)&&V.setFar(E.far),ah(E.near)&&V.setNear(E.near)):(ah(i.a("sceneNear"))&&V.setNear(i.a("sceneNear")),ah(i.a("sceneFar"))&&V.setFar(i.a("sceneFar")),g&&(g.eye&&V.setEye(g.eye),g.center&&V.setCenter(g.center))),ah(i.a("sceneFovy"))&&V.setFovy(i.a("sceneFovy")),nn(i.a("sceneOrtho"))&&V.setOrtho(i.a("sceneOrtho")),ah(i.a("sceneOrthoWidth"))&&V.setOrthoWidth(i.a("sceneOrthoWidth")),nn(i.a("sceneShadowEnabled"))&&(i.a("sceneShadowEnabled")?V.enableShadow():V.disableShadow()),ah(i.a("sceneShadowDegreeX"))&&V.setShadowDegreeX(i.a("sceneShadowDegreeX")),ah(i.a("sceneShadowDegreeZ"))&&V.setShadowDegreeZ(i.a("sceneShadowDegreeZ")),ah(i.a("sceneShadowIntensity"))&&V.setShadowIntensity(i.a("sceneShadowIntensity")),i.a("sceneShadowQuality")!=C&&V.setShadowQuality(i.a("sceneShadowQuality")),i.a("sceneShadowType")&&V.setShadowType(i.a("sceneShadowType")),ah(i.a("sceneShadowRadius"))&&V.setShadowRadius(i.a("sceneShadowRadius")),ah(i.a("sceneShadowBias"))&&V.setShadowBias(i.a("sceneShadowBias")),nn(i.a("sceneDashEnable"))&&V.setDashDisabled(!i.a("sceneDashEnable")),nn(i.a("sceneUvClipEnabled"))&&V.setUvClipEnabled(i.a("sceneUvClipEnabled")),jm(i.a("sceneHighlightMode"))&&V.setHighlightMode(i.a("sceneHighlightMode")),ah(i.a("sceneHighlightWidth"))&&V.setHighlightWidth(i.a("sceneHighlightWidth")),i.a("sceneHighlightColor")&&V.setHighlightColor(i.a("sceneHighlightColor")),i.a("sceneHighlightType")&&V.setHighlightType(i.a("sceneHighlightType")),i.a("sceneHighlightGlow")&&V.setHighlightGlow(i.a("sceneHighlightGlow")),i.a("sceneHighlightStrength")&&V.setHighlightStrength(i.a("sceneHighlightStrength")),nn(i.a("sceneHeadlightEnable"))&&V.setHeadlightDisabled(!i.a("sceneHeadlightEnable")),i.a("sceneHeadlightDirection")!=C&&V.setHeadlightDirection(i.a("sceneHeadlightDirection")),ah(i.a("sceneHeadlightRange"))&&V.setHeadlightRange(i.a("sceneHeadlightRange")),i.a("sceneHeadlightColor")&&V.setHeadlightColor(i.a("sceneHeadlightColor")),ah(i.a("sceneHeadlightIntensity"))&&V.setHeadlightIntensity(i.a("sceneHeadlightIntensity")),ah(i.a("sceneHeadlightAmbientIntensity"))&&V.setHeadlightAmbientIntensity(i.a("sceneHeadlightAmbientIntensity")),ah(i.a("sceneHeadlightRatioForPhysicalMaterial"))&&V.setHeadlightRatioForPhysicalMaterial(i.a("sceneHeadlightRatioForPhysicalMaterial")),ah(i.a("sceneHeadlightGroup"))&&V.setHeadlightGroup(i.a("sceneHeadlightGroup")),nn(i.a("sceneFogEnable"))&&V.setFogDisabled(!i.a("sceneFogEnable")),i.a("sceneFogMode")&&V.setFogMode(i.a("sceneFogMode")),ah(i.a("sceneFogDensity"))&&V.setFogDensity(i.a("sceneFogDensity")),i.a("sceneFogColor")&&V.setFogColor(i.a("sceneFogColor")),ah(i.a("sceneFogNear"))&&V.setFogNear(i.a("sceneFogNear")),ah(i.a("sceneFogFar"))&&V.setFogFar(i.a("sceneFogFar")),nn(i.a("sceneBatchBrightnessDisabled"))&&V.setBatchBrightnessDisabled(i.a("sceneBatchBrightnessDisabled")),i.a("sceneFlowBlendMode")!==H&&V.setFlowBlendMode(i.a("sceneFlowBlendMode")),i.a("sceneToneMapping")!==H&&V.setToneMapping(i.a("sceneToneMapping")),ah(i.a("sceneToneMappingExposure"))&&V.setToneMappingExposure(i.a("sceneToneMappingExposure")),nn(i.a("sceneBatchBlendDisabled"))&&V.setBatchBlendDisabled(i.a("sceneBatchBlendDisabled")),nn(i.a("sceneBatchColorDisabled"))&&V.setBatchColorDisabled(i.a("sceneBatchColorDisabled")),nn(i.a("sceneBatchInstancedDisabled"))&&V.setBatchInstancedDisabled(i.a("sceneBatchInstancedDisabled")),i.a("sceneBatchInfoMap")&&V.setBatchInfoMap(i.a("sceneBatchInfoMap")),i.a("sceneRenderLayerInfoMap")&&V.setRenderLayerInfoMap(i.a("sceneRenderLayerInfoMap")),ah(i.a("sceneMoveStep"))&&V.setMoveStep(i.a("sceneMoveStep")),ah(i.a("sceneRotateStep"))&&V.setRotateStep(i.a("sceneRotateStep")),nn(i.a("sceneSortable"))&&V.setSortable(i.a("sceneSortable")),mq(i.a("sceneSortFunc"))&&V.setSortFunc(i.a("sceneSortFunc"));var x=i.a("sceneSkyboxType")||"sphere";if(x!=C){var f={},K=!1,e=i.a("sceneSkyboxColor");if("sphere"===x){f.shape3d=x;var D=i.a("sceneSkyboxImage");D&&(f["shape3d.image"]=D,K=!0)}else"cube"===x?(f.shape3d=H,["front","back","left","right","top","bottom"].forEach(function(J){var d=J+".image",h=J.charAt(0).toUpperCase()+J.slice(1),E=i.a("sceneSkybox"+h+"Image");E&&(f[d]=E,K=!0)})):"color"===x&&e&&(K=!0);if(K){var o=new cj,t=i.a("sceneSkyboxDiameter");if(ah(t)?o.s3(t,t,t):o.s3(20,20,20),f["body.color"]=i.a("sceneSkyboxBodyColor"),f.envmap=i.a("sceneSkyboxEnvmap"),f["envmap.probe"]=i.a("sceneSkyboxEnvmapProbe"),f.roughness=i.a("sceneSkyboxRoughness"),f["shape3d.light"]=f["all.light"]=i.a("sceneSkyboxLight"),f["light.mask"]=i.a("sceneSkyboxLightMask"),f["headlight.ambientIntensity"]=i.a("sceneSkyboxHeadLightAmbientIntensity"),f["skybox.blur.size"]=i.a("sceneSkyboxBlurSize"),f["skybox.blur.resolution"]=i.a("sceneSkyboxBlurResolution"),f["texture.wrap"]="clampToEdge",f["3d.clipbox.mask"]=Ie,f["effect.flow.mask"]=Ie,"color"===x){f.shape3d="sphere";var w=2,$=1024,D=o.s("shape3d.image"),B=D&&L.Default.getImage(D);B&&"CANVAS"===B.tagName||(B=I.createElement("canvas"),D=L.Math.generateUUID(),L.Default.setImage(D,B)),D&&V.getTextureMap()&&V.deleteTexture(D),L.Default.setCanvas(B,w,$,1);var h=B.getContext("2d");h.clearRect(0,0,w,$),h.beginPath(),h.rect(0,0,w,$),lf(h,e,function(G){return G},!1,{x:0,y:0,width:w,height:$}),h.fill(),h.restore(),f["shape3d.image"]=D}o.s(f),["X","Y","Z"].forEach(function(l){var x=i.a("sceneSkyboxRotation"+l);ah(x)&&o["setRotation"+l](x)}),V.setSkybox(o)}}}},i.deserialize(h,q.rootParent,q)},_.isDebugTipShowing=function(){return!!this._debugDiv},_.showDebugTip=function(){var Y=this,Q=Y._debugDiv;if(!Q){Q=Y._debugDiv=I.createElement("div"),Q.style.position="absolute",Q.style.overflow="hidden",Q.style.font=T.debugTipLabelFont,Q.style.padding="6px",Q.style.backgroundColor=T.debugTipBackground,Q.style.color=T.debugTipLabelColor;var c=Y.getView();Y._79O?c.insertBefore(Q,Y._79O):c.appendChild(Q);var k=function(){Y.redraw();var J=Y._canvas,o="FPS: "+Y._fpsInfo.fps+"<br/>"+"Datas: "+Y.dm().getDatas().length+(J?"<br/>Size: "+J.width+" * "+J.height:""),X=Y.dm()._historyManager;X&&(o+="<br/>Undoes: "+X.getHistories().length+" index: "+X.getHistoryIndex());var n=Y.getDebugTip();n&&(o+="<hr>"+n),Q.innerHTML=o,Y._isDebugging&&requestAnimationFrame(k)};requestAnimationFrame(k),Y._isDebugging=!0}},_.hideDebugTip=function(){var i=this,L=i._debugDiv;L&&(delete i._debugDiv,i.getView().removeChild(L),i._isDebugging=!1)},_.updateDOMAppendMatrix=function(){var U=this.getView();U&&(U.updateAppendMatrix=!0)},_.countFrame=function(){if(this._isDebugging){var y=Date.now(),o=this._fpsInfo;y-o.time>1e3?(o.fps=Math.round(1e5*(o.frames+1)/(y-o.time))/100,o.time=y,o.frames=0):o.frames++}}},ms_icons:function(S){S.getRotation=function(b){return b==C?0:b},S._15O=function(){var A=this,q=A.s(Dd);if(q){var _=A,l=A.data||A._data,I=l.getRotation&&l.getRotation(),B=A._38o={icons:q,rects:{}};for(var S in q){var c=q[S],v=hg(c.shape3d,l,_);if(!(hg(c.visible,l,_)===!1||hg(c.for3d,l,_)&&!A.I3d||v&&!A.I3d)){var J=v?[v]:hg(c.names,l,_),x=J?J.length:0,b=hg(c.position,l,_)||3,o=hg(c.offsetX,l,_)||0,m=hg(c.offsetY,l,_)||0,K=hg(c.direction,l,_)||Ze,P=hg(c.gap,l,_),i=P!=C?P:1,Z=hg(c.rotation,l,_),D=hg(c.keepOrien,l,_),w=hg(c.rotationFixed,l,_)?Z:A.getRotation(Z,D,b),R=C,Y=B.rects[S]=new Array(x);ah(I)&&(ah(w)?w+=I:w=I),Y.rotation=w;for(var d=0;x>d;d++){var G,L,T,$,g=J[d];if(v)T=0,$=0;else{var X=$p(g);T=hg(c.width,l,_),$=hg(c.height,l,_),T==C&&(T=wc(X,l)),$==C&&($=sl(X,l))}if(R?K===Ze?o+=T/2:K===xm?o-=T/2:K===Mq?m-=$/2:m+=$/2:R={width:T,height:$},A.I3d){var O=-T/2,r=-$/2;L={width:T,height:$,mat:A._16O(hg(c.autorotate,l,_),b,R,hg(c.face,l,_)||Rl,hg(c.t3,l,_),hg(c.r3,l,_),hg(c.rotationMode,l,_),o,m),vs:new $n([O,-r,0,O,-r-$,0,O+T,-r-$,0,O+T,-r,0])}}else G=A.getPosition(b,o,m,R,hg(c.positionFixed,l,_)),L={x:G.x-T/2,y:G.y-$/2,width:T,height:$},A._68o(L,w);Y[d]=L,K===Ze?o+=T/2+i:K===xm?o-=T/2+i:K===Mq?m-=$/2+i:m+=$/2+i}}}}}}});var ad={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},Vo={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},Hh={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},Pb={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},Fm={position:1,width:1,height:1,expanded:1,rotation:1,anchor:1,scale:1,"s:edge.points":1},ud={"edge.type":1,"edge.group":1},Xp={rotation:1,rotationX:1,rotationZ:1,rotation3d:1},ql={rotation:1,position:1,width:1,height:1,anchor:1,scale:1,host:1,"s:vector.layoutable":1},so={position:1,width:1,height:1,anchor:1,scale:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},zp={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},$q={shape:1,thickness:1,position:1,anchor:1,scale:1},Or=function(V){if(!V)return C;if(Cg(V)){var r=V._40I,l=V._41I;if(!r||!l)return C;var T=Or(r),P=Or(l);return T===P?T:C}for(var o=V._parent;Cg(o)&&!o.ISubGraph;)o=o._parent;return o?o.ISubGraph?o:Or(o):C},bm=function(V,F,A,B){var x=F.getStyle(A)*B;x&&Sb(V,x),x=F.getStyle(A+".left")*B,x&&(V.x-=x,V.width+=x),x=F.getStyle(A+".right")*B,x&&(V.width+=x),x=F.getStyle(A+".top")*B,x&&(V.y-=x,V.height+=x),x=F.getStyle(A+".bottom")*B,x&&(V.height+=x),V.width<0&&(V.width=-V.width,V.x-=V.width),V.height<0&&(V.height=-V.height,V.y-=V.height)},Tj=function(t){for(var z,F=0,A=t.size();A>F;F++)if(z=t.getChildAt(F),Tk(z)&&Tj(z))return!0;return t.hasAgentEdges()},Ug=function(q){if(!q)return C;for(var Y=q._parent;eo(Y);){if(!eo(Y._parent))return Y.isExpanded()?q:Y;Y.isExpanded()||(q=Y),Y=Y._parent}return q},Kp=function(X,z){if(!X||!z)return C;var c,V,M,G=Or(X),n=Or(z);if(G!==n){for(;n&&G!==n;)n=Or(n);if(G===n)return X;c=new Dg,c.add(X,0);for(var B=X._parent;Tk(B)&&!z.isDescendantOf(B);)c.add(B,0),B=B._parent;for(M=c.size(),V=0;M>V;V++){var d=c.get(V);if(eo(d)&&!d.isExpanded())return d;if(d.ISubGraph)return d}return X}return X},Cb=function(B){if(B.isLooped())return B._source;var g=Ug(B._source),i=Ug(B._target);return g===i?B._source:Kp(g,i)},db=function(L){if(L.isLooped())return L._target;var p=Ug(L._source),F=Ug(L._target);return p===F?L._target:Kp(F,p)},Op=function(Y,D,m){"target"!==m&&(m="source");var C="target"===m?D.getTargetAgent():D.getSourceAgent(),A="edge."+m+".";if(Cg(C)){var d=Y.getDataUI(C);d._79o();var q=D.s(A+"index");if(q>=0){var v=Rh(d);return v[Math.max(0,Math.min(q,v.length-1))]}var P=D.s(A+"percent")||0;P=Math.max(0,Math.min(P,1));var t=Ag(d);return Jn(t,100*P)}return Rm(Y,C,D.s(A+"position"),D.s(A+"offset.x"),D.s(A+"offset.y"),D.s(A+"anchor.x"),D.s(A+"anchor.y"))},Rm=function(m,p,A,s,F,l,U){if(!p)return C;var P,T=p.getRotation?p.getRotation():0;if(l!==H||U!==H){l=l===H?.5:l,U=U===H?.5:U;var c=p.getScale();if(T&&!dj(p,m)||c.x<0||c.y<0){var O=p.getPosition(),y=p.getWidth(),E=p.getHeight(),Z=p.getAnchor(),$=new Ub(T,O.x,O.y,c.x,c.y);A=$.tf((l-Z.x)*y,(U-Z.y)*E)}else P=Gl(m,p),A={x:P.x+l*P.width,y:P.y+U*P.height}}else A=Zh(A,Gl(m,p));if(T){var i=t(T),M=_(T),a=s*i-F*M;F=s*M+F*i,s=a}return A.x+=s,A.y+=F,A},xr=function(V,Y){if(!V||!Y)return C;var k,J,y,u,b,S;if(V===Y){if(u=V.getLoopedEdges(),!u)return C;u=new Dg(u)}else{if(b=V.getAgentEdges(),S=Y.getAgentEdges(),!b||!S)return C;for(J=b.size(),k=0;J>k;k++)y=b.get(k),S.contains(y)&&(u||(u=new Dg),u.add(y))}if(u)for(k=0;k<u.size();k++)y=u.get(k),y.getStyle(xo)===Qr&&(y._22I(C),u.removeAt(k),k--);return u},nl=function(Z,G){var n=xr(Z,G);if(n&&!n.isEmpty()){if(1===n.size())return n.get(0)._22I(C),void 0;var l=new Dg,b=new Dg;n.each(function(P){var N=P.s("edge.group");l.contains(N)||l.add(N)}),l.sort(),l.each(function(Z){b.add(new L.EdgeGroup(n.toList(function(q){return Z===q.s("edge.group")}),b))}),b.each(function(Q){Q.each(function(R){R._22I(Q)})})}},Gj=function(g,v,f){var j=g._canvas;g._zoom;var d=Dc(v,j),I=Dc(f,j);return{x:d.x-I.x,y:d.y-I.y}},Mb=function(l,b){if(b){var c=b.rect,k=b.color,L=b.rotation,K=b.labelWidth,z=b.background,T=b.opacity,j=b.scale,B=j!=C&&1!==j;if(T!=C){var R=l.globalAlpha;l.globalAlpha*=T}if(L||B){l.save();var P=c.x+c.width/2,V=c.y+c.height/2;qo(l,P,V),L&&Tp(l,L),B&&l.scale(j,j),qo(l,-P,-V)}if(z&&ri(l,c.x,c.y,c.width,c.height,z),K){var U=c.width,p=l.createLinearGradient(c.x,c.y,c.x+U,c.y);p.addColorStop(0,k),p.addColorStop(.9,k),p.addColorStop(1,bn),k=p,c.width=K}qk(l,b.ss,c,b.font,k,b.align,b.decoration),K&&(c.width=U),(L||B)&&l.restore(),T!=C&&(l.globalAlpha=R)}},Tn=function(q,u){if(u){var N=u.rect,J=N.x,M=N.y,S=N.width,Z=N.height,G=u.background,Y=u.backgroundImage,I=u.borderWidth,o=u.borderColor,b=u.labelWidth,p=u.opacity,c=u.scale,w=c!=C&&1!==c;if(p!=C){var H=q.globalAlpha;q.globalAlpha*=p}if(w){q.save();var a=N.x+N.width/2,A=N.y+N.height/2;qo(q,a,A),q.scale(c,c),qo(q,-a,-A)}if(u.expanded){var B=r(8,S/4),V=M+Z-8;if(q.fillStyle=G,q.beginPath(),q.moveTo(J,M),q.lineTo(J,V),q.lineTo(J+S/2,V),q.lineTo(J+S/2,M+Z),q.lineTo(J+S/2+B,V),q.lineTo(J+S,V),q.lineTo(J+S,M),q.closePath(),q.fill(),I&&(q.lineWidth=I,q.lineJoin="round",q.lineCap="round",o?(q.strokeStyle=o,q.stroke()):(q.strokeStyle=qe(G),q.beginPath(),q.moveTo(J+S,M),q.lineTo(J+S,V),q.lineTo(J+S/2+B,V),q.lineTo(J+S/2,M+Z),q.stroke(),q.strokeStyle=dm(G),q.beginPath(),q.moveTo(J+S,M),q.lineTo(J,M),q.lineTo(J,V),q.lineTo(J+S/2,V),q.lineTo(J+S/2,M+Z),q.stroke())),Y)Oq(q,$p(Y),lj,N.x,N.y,N.width,N.height-8,u.data,u.view);else{if(N.height-=8,G=u.color,b){var Q=S,$=q.createLinearGradient(J,M,J+Q,M);$.addColorStop(0,G),$.addColorStop(.9,G),$.addColorStop(1,bn),G=$,N.width=b}qk(q,u.ss,N,u.font,G,u.align),b&&(N.width=Q),N.height+=8}}else if(u.icon)Ae(q,$p(u.icon),J,M,S,Z,u.data,u.view);else{var D=S/2;I&&(q.lineWidth=I,q.lineJoin="round",q.lineCap="round",q.strokeStyle=o?o:qe(G),q.beginPath(),q.arc(J+D,M+D,D,Qo,1.6*kl,!0),q.moveTo(J+D,M+Z),q.lineTo(J+S-D/5,M+D),q.stroke(),q.strokeStyle=o?o:dm(G),q.beginPath(),q.arc(J+D,M+D,D,1.6*kl,Qo,!0),q.moveTo(J+D,M+Z),q.lineTo(J+D/5,M+D),q.stroke()),q.fillStyle=G,q.beginPath(),q.arc(J+D,M+D,D,0,ok,!0),q.moveTo(J+D,M+Z),q.lineTo(J+S-D/5,M+D),q.lineTo(J+D/5,M+D),q.closePath(),q.fill(),q.fillStyle=u.color,q.beginPath(),q.arc(J+D,M+D,D/3,0,ok,!0),q.fill()}w&&q.restore(),p!=C&&(q.globalAlpha=H)}},vo=function(n,s){return s>2*n?n:s/2},Ak=function(o,r,K,S){if(!o||!r)return 0;var V=Nn(r.y-o.y,r.x-o.x);return K||(V=r.x<o.x?V+kl:V),V+S},Nf=function(c,A,H,v,h,u,F){F&&(c.x>A.x||c.x===A.x&&c.y>A.y)&&(H=sp[H],h=-h);var O=Zh(H,{x:0,y:0,width:mp(c,A),height:0},u);return O.x+=v,O.y+=h,O=new Ub(Nn(A.y-c.y,A.x-c.x)).tf(O),O.x+=c.x,O.y+=c.y,O},Id=function(T,J,$,j,Q){if(T._19Q=!0,!$.getEdgeGroup())return j?$.s("edge.gap"):0;if(Cg($.getSourceAgent())||Cg($.getTargetAgent()))return 0;var L,Z=0,E=0,W=0;if($.getEdgeGroup().getSiblings().each(function(K){K.each(function(n){if(J.isVisible(n)&&n.s(xo)==Q){var s=n.s("edge.gap");L?(E+=W/2+s/2,W=s):(L=n,W=s),n===$&&(Z=E)}})}),j)return E-Z+W;var u=Z-E/2;return L&&$._40I!==L._40I&&(T._19Q=!1),u},jf=function(X){var d=X._getValidSelection();if(1===d.length){var P=d[0],b=P instanceof L.Edge;if(P instanceof L.Shape||b){if(b){var o=P.s("edge.type");if(o&&"points"!==o)return}var h=X.gv;if((!h.isPointEditable||h.isPointEditable(P))&&h.isEditable(P))return P}}},Cf=function(){var B=function(M){var p=[];return M.forEach(function(U){p.push({x:U.x,y:U.y}),p.push({x:U.x+U.width,y:U.y+U.height}),p.push({x:U.x+U.width,y:U.y}),p.push({x:U.x,y:U.y+U.height})}),p};return function(k,O,f){if("oval"===k){var g=0,E=f.height/f.width,I=E*E,w=f.x+f.width/2,A=f.y+f.height/2,H=B(O);H.forEach(function(H){var h=H.x-w,u=H.y-A,m=h*h+u*u/I;m>g&&(g=m)}),g=Q(g);var x=E*g;return{x:w-g,y:A-x,width:2*g,height:2*x}}if("circle"===k){var N=0,w=f.x+f.width/2,A=f.y+f.height/2,H=B(O);return H.forEach(function(Y){var O=Y.x-w,D=Y.y-A,G=O*O+D*D;G>N&&(N=G)}),N=Q(N),{x:w-N,y:A-N,width:2*N,height:2*N}}return"roundRect"===k?(Sb(f,r(f.width,f.height)/16),f):f}}(),gi=L.graph={},$l=function(p,F,l){Po(s+".graph."+p,F,l)};L.layout={};var Ld={},bj=function(R,M,B,a,F,Q,c,G){var n=c._zoom;if(!n)return M;if(n!==c._cacheZoom&&(c._cacheZoom=n,c._cacheImage={}),n*=un,a=Math.ceil(a),F=Math.ceil(F),a*n>2048||F*n>2048)return M;var l=[M.uuid,a,F,B].join("_");if(Q instanceof L.Data){var p=M.dataBindings;if(p)for(var i=p.length-1;i>=0;i--){var E=Q.a(p[i].attr);oc(E)||Tl(E)||(l+="_"+E)}}var s=Q.s("state");if(s&&(l+="_"+s),M.cacheRule){var k;k=mq(M.cacheRule)?M.cacheRule(Q,c):hg(M.cacheRule,Q,c),l+="_"+k}var K,x=1;F>=a&&x>a*n?(K=F/a,a=x/n,F=a*K):a>=F&&x>F*n&&(K=a/F,F=x/n,a=F*K),a=Math.ceil(a),F=Math.ceil(F);var X=c._cacheImage[l];if(!X){if(El(),X=L.Default.toCanvas(M,a,F,B,Q,c,G,n),!Tb())return M;c._cacheImage[l]=X}return X};yd(T,{setImageCacheRule:function(j,k){var $;k||"object"!=typeof j?($={},$[j]=k):$=j;for(var b in $){var Y=$[b];jm(b)?(Po=$p(b),Po?Po.cacheRule=Y:Ld[b]=Y):b.cacheRule=Y}}});var Kh={comps:[{type:am,points:[85,50,70,115,100,71,86,107,88,49,47,102,71,109,80,90,122,53,108,98,118,119,88,78,48,105,70,114,97,116,113,65,101,54,113,77,121,82,118,116,85,68,111,61],borderWidth:1,borderColor:C}]};if(Kh[kp]=Kh[pb]=160,f.Image){var Jp=new f.Image;Jp.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAALUlEQVRYR+3QQREAAAABQfqXFsNnFTizzXk99+MAAQIECBAgQIAAAQIECBAgMBo/ACHo7lH9AAAAAElFTkSuQmCC",wg("default_blank",Jp)}wg("node_image",Jo(30,30,[{type:xb,rect:[4,5,22,16],gradient:Rn,gradientColor:jp,background:ol},{type:xb,rect:[2,3,26,20],borderWidth:1,borderColor:ol},{type:xb,rect:[11,23,8,4],background:ol},{type:xb,rect:[6,27,18,2],background:ol}])),wg("node_icon",Jo(16,16,[{type:xb,rect:[2,2,12,10],gradient:Rn,gradientColor:jp,background:ol},{type:Np,rect:[2,2,12,10],width:1,color:ol},{type:xb,rect:[6,12,4,2],background:ol},{type:xb,rect:[4,14,8,1],background:ol}])),wg("block_icon",Jo(16,16,[{type:Np,rect:[1,1,14,14],width:1,color:ol}])),wg("group_image",Jo(66,39,[{type:xb,rect:[44.3,18,18.1,12.8],gradient:Rn,gradientColor:jp,background:ol},{type:xb,rect:[3.3,17.8,18.1,12.8],gradient:Rn,gradientColor:jp,background:ol},{type:xb,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:ol,gradient:Rn,gradientColor:jp,background:ol},{type:xb,rect:[26.2,29.4,12.8,4.2],background:ol},{type:xb,rect:[21.3,33.5,22.5,2.3],background:ol},{type:xb,rect:[5.3,32.7,14.1,2.1],background:ol},{type:xb,rect:[9,30.4,6.7,2.4],background:ol},{type:xb,rect:[50,30.7,6.7,2.4],background:ol},{type:xb,rect:[46.3,33,14.1,2.1],background:ol}])),wg("group_icon",Jo(16,16,[{type:xb,rect:[4,12,4,2],background:ol},{type:xb,rect:[2,13,8,1],background:ol},{type:xb,rect:[12,12,2,1],background:ol},{type:xb,rect:[11,13,4,1],background:ol},{type:xb,rect:[10,7,6,5],gradient:Rn,gradientColor:jp,background:ol},{type:xb,rect:[1,2,10,10],gradient:Rn,gradientColor:jp,background:ol},{type:Np,rect:[1,2,10,10],width:1,color:ol}])),wg("refGraph_icon",Jo(16,16,[{type:"shape",borderWidth:1,borderColor:ol,borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:ol,borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}])),wg("edge_icon",Jo(16,16,[{type:xb,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:Rn,gradientColor:jp,background:ol},{type:xb,rect:[10.8,1,4,4],background:ol},{type:xb,rect:[1,11,4,4],background:ol}])),wg("subGraph_image",Jo(72,45,[{type:am,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:Rn,gradientColor:jp,background:ol},{type:xb,rect:[29.6,30.7,3.6,1.8],background:ol},{type:xb,rect:[28.4,32.3,6,1.2],background:ol},{type:xb,rect:[37.3,32,10.8,1.8],background:ol},{type:xb,rect:[39.1,29.9,7.2,2.3],background:ol},{type:xb,rect:[26.6,23.7,9.6,7.2],gradient:Rn,gradientColor:jp,background:ol},{type:xb,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:ol,gradient:Rn,gradientColor:jp,background:ol}])),wg("subGraph_icon",Jo(17,17,[{type:am,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:Rn,gradientColor:jp,background:ol}])),wg("shape_icon",Jo(16,16,[{type:am,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:ol}])),wg("polyline_icon",Jo(16,16,[{type:am,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:ol},Fo(7.5,.4),Fo(7.5,6.3),Fo(13.6,6.3),Fo(13.6,14),Fo(.7,13.9),Fo(.7,.3)])),wg("grid_icon",Jo(16,16,[{type:xb,rect:[1,1,4,4],background:ol,gradient:Rn,gradientColor:jp},{type:xb,rect:[6,1,4,4],background:ol,gradient:Rn,gradientColor:jp},{type:xb,rect:[11,1,4,4],background:ol,gradient:Rn,gradientColor:jp},{type:xb,rect:[11,6,4,4],background:ol,gradient:Rn,gradientColor:jp},{type:xb,rect:[6,6,4,4],background:ol,gradient:Rn,gradientColor:jp},{type:xb,rect:[1,6,4,4],background:ol,gradient:Rn,gradientColor:jp},{type:xb,rect:[11,11,4,4],background:ol,gradient:Rn,gradientColor:jp},{type:xb,rect:[6,11,4,4],background:ol,gradient:Rn,gradientColor:jp},{type:xb,rect:[1,11,4,4],background:ol,gradient:Rn,gradientColor:jp}])),wg("light_icon",Jo(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:ol},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:ol,gradient:Rn,gradientColor:jp,background:{func:function(l){var j=l?l.s(wr):C;
return Tl(j)?"rgb("+Ym(255*j[0])+","+Ym(255*j[1])+","+Ym(255*j[2])+")":j||ol}}}])),wg("text_icon",Jo(16,16,[{type:"shape",points:[3,3,13,3,8,3,8,14],segments:[1,2,1,2],borderWidth:1,borderColor:ol}])),wg("border_image",{fitSize:!0,comps:[{type:"border",relative:!0,rect:[0,0,1,1],color:{func:"style@border_color"},width:{func:"style@border_width"}}]}),wg("columnChart_image",{fitSize:!0,boundExtend:150,comps:[{type:{func:"style@chart.type"},relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"}}]}),wg("lineChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"lineChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"},linePoint:{func:"style@chart.line.point"},lineWidth:{func:"style@chart.line.width"},line3d:{func:"style@chart.line.3d"}}]}),wg("pieChart_image",{fitSize:!0,boundExtend:150,comps:[{type:"pieChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},hollow:{func:"style@chart.hollow"},startAngle:{func:"style@chart.start.angle"},values:{func:"style@chart.values"},colors:{func:"style@chart.colors"}}]});var Fe=function(U,E,c,P,Q,J){var m,e,B,k,b,h,q,F,W,a,D,Z=[];if(Math.abs(P)>2*Math.PI&&(P=2*Math.PI),b=Math.ceil(Math.abs(P)/(Math.PI/4)),m=P/b,e=-m,B=-c,b>0){h=U+Math.cos(c)*Q,q=E+Math.sin(-c)*J,Z.push({x:h,y:q});for(var s=0;b>s;s++)B+=e,k=B-e/2,F=U+Math.cos(B)*Q,W=E+Math.sin(B)*J,a=U+Math.cos(k)*(Q/Math.cos(e/2)),D=E+Math.sin(k)*(J/Math.cos(e/2)),Z.push({x:a,y:D}),Z.push({x:F,y:W})}return Z},Tc=function(m){if(m){var H=m._data;if(H instanceof L.Shape)return{points:H.getPoints(),segments:H.getSegments()};var S;if(H instanceof L.Edge&&(S=m._78o)){var z,f,J=S.type,V=S.points,g=S.segments,O=S.edgeTypeInfo;if(!J||V){var Y=S.sourcePoint,d=Y.x,X=Y.y,P=S.targetPoint,x=P.x,i=P.y;if(J)g?(z=new Dg({x:d,y:X}),z.addAll(V),z.add({x:x,y:i}),f=new Dg(g._as)):(z=new Dg({x:d,y:X}),V.each(function(X){z.add(X)}),z.add({x:x,y:i}));else if(S.looped){z=new Dg(Fe(d,X,0,2*Math.PI,S.radius,S.radius)),f=new Dg([1]);for(var r=0;r<(z.size()-1)/2;r++)f.add(3)}else z=new Dg,S.center?(z.add({x:S.c1.x,y:S.c1.y}),z.add({x:d,y:X}),z.add({x:x,y:i}),z.add({x:S.c2.x,y:S.c2.y})):(z.add({x:d,y:X}),z.add({x:x,y:i}))}else O&&(z=new Dg(O.points._as),O.segments&&(f=new Dg(O.segments._as)));return{points:z,segments:f}}}},Ag=function(t,o,R){if(null==o){var M=Tc(t);if(!M)return;o=M.points,R=M.segments}if(o){if(Array.isArray(o)&&(o=new Dg(o)),"number"==typeof o.get(0)){for(var U=new L.List,e=0;e<o.size();e+=2)U.add({x:o.get(e),y:o.get(e+1)});o=U}if(!R){R=[1];for(var J=o.length-1;J>0;J--)R.push(2)}Array.isArray(R)&&(R=new Dg(R));for(var n=Pk(o._as,R._as,50),j=n.length,b=[],e=0;j>e;e++){var v=n[e];v.length>1&&b.push(v)}return b}},Zb=function(X){for(var o=0,n=X.length-1,P=0;n>P;P++){var R=X[P],$=X[P+1],K=$.x-R.x,g=$.y-R.y;o+=Math.sqrt(K*K+g*g)}return o},Kj=function(D,W){for(var k=0,T=W.length,X=0;T>X;X++){var l=W[X];if(k+=l,k>D)return X}return Math.min(X,T-1)},Xo=function(I,N){for(var F=0,b=0,i=0,m=I.length-1,B=0;m>B;B++){var n=I[B],l=I[B+1],S=l.x-n.x,A=l.y-n.y;if(i=Math.sqrt(S*S+A*A),F+=i,F>N){F-=i,b=B;break}}var o=I[b],Y=I[b+1],z=Math.atan2(Y.y-o.y,Y.x-o.x),g=N-F,A=Math.sin(z)*g,S=Math.cos(z)*g;return{x:o.x+S,y:o.y+A}},Jn=function(R,A){if(R){var e;if(0===A)e=R[0][0];else if(100===A)R=R[R.length-1],e=R[R.length-1];else{for(var J=0,C=[],P=R.length,m=0;P>m;m++){var q=R[m],t=Zb(q);J+=t,C.push(t)}for(var $=J*A/100,h=Kj($,C),T=0,f=0;h>f;f++)T+=C[f];$-=T,e=Xo(R[h],$)}return e}},Rh=function(Y){var O,P;if(Y instanceof Od){var k=Tc(Y);O=k.points,P=k.segments}else O=arguments[0],P=arguments[1];var i,I,m,n,j=[],g=-1;for(I=0,m=P?P.length:O.length;m>I;I++){if(i=P?P.get(I):1,3===i)n=2;else if(4===i)n=3;else{if(5===i)continue;n=1}g+=n,j.push(O.get(g))}return j},rr=function(D,a,x,g){function n(G){if(G>=0&&1>=G){K=a(G);var H=(D.x-K.x)*(D.x-K.x)+(D.y-K.y)*(D.y-K.y);return r>H?(r=H,w=G,!0):!1}}x=x||100,g=g||1e-5;for(var r=1/0,w=0,K=new Sf,N=0;x>N;++N)n(N/x);for(var F=1/(2*x);F>g;)n(w-F)||n(w+F)||(F/=2);return w};yd(T,{_edgeProtectMethod:{getStraightLinePoints:Ag,calculateLineLength:Zb,calcSegmentIndexByDistance:Kj,calculatePointAlongLine:Xo,getPercentPosition:Jn,getRealPointsFromDataUI:Rh}});var sk=function(Z,V){for(var Q=Z.vertices,M=0;M<Q.length;M++){var q=Q[M],b=q.y;q.y=q.z,q.z=-b,V&&(q.y+=V)}},Zn=function(R){for(var a,B,r,t,H,Y,I=[],m=[],z=[],Z=R.faces,W=0,U=0,T=0,l=Z.length;l>W;W++,U+=6,T+=9){var C=Z[W];1===C.i?(a||(a=[],B=[],r=[]),If(C,W,U,T,R,a,r,B)):2===C.i?(t||(t=[],H=[],Y=[]),If(C,W,U,T,R,t,Y,H)):If(C,W,U,T,R,I,z,m)}return{vs:I,uv:m,ns:z,top_vs:a,top_uv:B,top_ns:r,bottom_vs:t,bottom_uv:H,bottom_ns:Y}},If=function($,v,z,U,P,T,J,V){var K=P.vertices,L=P.faceVertexUvs,b=K[$.a],y=K[$.b],n=K[$.c];T.push(b.x,b.y,b.z,y.x,y.y,y.z,n.x,n.y,n.z);var q,h,C,Z=$.vertexNormals;3===Z.length?(q=Z[0],h=Z[1],C=Z[2]):q=h=C=$.normal,J.push(q.x,q.y,q.z,h.x,h.y,h.z,C.x,C.y,C.z);var _=L[0][v][0],x=L[0][v][1],g=L[0][v][2];V.push(_.x,_.y,x.x,x.y,g.x,g.y)},An=function(Y){var F;F=Tl(Y)?Y:[Y];var b,W,P,x,H,n,R,f,N=1/0,o=1/0,c=1/0,B=-1/0,l=-1/0,M=-1/0,j=["vs","top_vs","bottom_vs"];for(b=0,W=F.length;W>b;b++)for(f=F[b],P=0,x=j.length;x>P;P++)if(R=f[j[P]])for(H=0,n=R.length;n>H;H+=3)N=r(N,R[H]),o=r(o,R[H+1]),c=r(c,R[H+2]),B=h(B,R[H]),l=h(l,R[H+1]),M=h(M,R[H+2]);var s={min:{x:N,y:o,z:c},max:{x:B,y:l,z:M}};return Y.boundingBox=s,s},ug=function(){function r(D,c){return D.dot(c)>0}function Y(W,m,k,C,j,p,L){for(var Y,H,E=[m,k,C],e=[j,p,L],Z=[],u=E.length,B=!0;u--&&B;){for(var V=E[u],n=e.length,$=!1;n--;)if(V.equals(e[n])){e.splice(n,1),Z.push(V),$=!0;break}if(!$){if(Y){B=!1;break}Y=V}}return B&&2===Z.length&&(H=e[0],T.subVectors(Y,Z[0]),Q.subVectors(H,Z[0]),w.subVectors(Y,Z[1]),T.x*w.y*Q.z+w.x*Q.y*T.z+Q.x*T.y*w.z-Q.x*w.y*T.z-Q.y*w.z*T.x-Q.z*w.x*T.y<1e-6&&(i.subVectors(H,Z[1]),I.subVectors(Z[1],Z[0]),r(I,T)&&r(I,Q)&&(I.negate(),r(I,w)&&r(I,i))))?(W.push(Z[1].x,Z[1].y,Z[1].z),W.push(Y.x,Y.y,Y.z),W.push(Y.x,Y.y,Y.z),W.push(Z[0].x,Z[0].y,Z[0].z),W.push(Z[0].x,Z[0].y,Z[0].z),W.push(H.x,H.y,H.z),W.push(H.x,H.y,H.z),W.push(Z[1].x,Z[1].y,Z[1].z),2):(W.push(m.x,m.y,m.z),W.push(k.x,k.y,k.z),W.push(k.x,k.y,k.z),W.push(C.x,C.y,C.z),W.push(C.x,C.y,C.z),W.push(m.x,m.y,m.z),1)}function A(){this._vertexMap={},this._lineMap={},this._lineList=[]}function m(s,I,k,M,f,g,Z){var V=[k,f];s[0]===M&&V.reverse();var C=[V[0]._key,V[1]._key].join("|"),K=s._triangles[C];K||(s._triangles[C]=K={});var o=[g._key,Z._key].join("|");K[o]||(K[o]=[g,Z])}function n(W,N,u){var r=W._planes[u._key];if(!r)for(var Z in W._planes){var E=W._planes[Z];if(E._normal.angleTo(u)<.001){r=E;break}}return r?(r._vertices.indexOf(N)<0&&r._vertices.push(N),void 0):(W._planes[u._key]={_normal:u,_vertices:[N]},void 0)}function c(t,w){return 0===w?"0|0|0":1/0===Math.abs(w)?[t.x,t.y,t.z].join("|"):[Math.round(M.angleTo(t)*w),Math.round(z.angleTo(t)*w),Math.round(a.angleTo(t)*w)].join("|")}function N(F,E){var i=F._ctlineModel;if(i||(F._ctlineModel=i=[]),i[0])return i[0];var K;K=Tl(F)?F:[F];var f,W,X,t,w,c,e,P,U,S,O,_,y,r,b,Z,d,x,A,B,j,o=["","top_","bottom_"];i=[];var n=[];for(vf(K,E,n),f=0,W=n.length;W>f;f++)if(S=n[f],S&&(O=S.mesh))for(ff(O),X=0,t=o.length;t>X;X++)if(U=O[o[X]+"lvs"])for(A=i.length,B=U.length,i.length=A+B,j=0;B>j;++j,++A)i[A]=U[j];else if(e=O[o[X]+"vs"]){P=O[o[X]+"is"],x=S.matrix,c=P?P.length:e.length/3;for(var w=0;c-1>w;)P?(_=P[w],y=P[w+1],r=P[w+2],b=P[w+3],Z=P[w+4],d=P[w+5]):(_=w,y=w+1,r=w+2,b=w+3,Z=w+4,d=w+5),$.fromArray(e,3*_),D.fromArray(e,3*y),g.fromArray(e,3*r),l.fromArray(e,3*b),s.fromArray(e,3*Z),v.fromArray(e,3*d),x&&($.applyMatrix4(x),D.applyMatrix4(x),g.applyMatrix4(x),l.applyMatrix4(x),s.applyMatrix4(x),v.applyMatrix4(x)),w+=3*Y(i,$,D,g,l,s,v);c>w&&(P?(_=P[w],y=P[w+1],r=P[w+2]):(_=w,y=w+1,r=w+2),$.fromArray(e,3*_),D.fromArray(e,3*y),g.fromArray(e,3*r),x&&($.applyMatrix4(x),D.applyMatrix4(x),g.applyMatrix4(x)),i.push($.x,$.y,$.z),i.push(D.x,D.y,D.z),i.push(D.x,D.y,D.z),i.push(g.x,g.y,g.z),i.push(g.x,g.y,g.z),i.push($.x,$.y,$.z))}return F._ctlineModel[0]=i,i}function x(E,V,K){var q=E._ctlineModel;q||(E._ctlineModel=q=[]);var r=q[1];if(r&&r.epsilon===K)return r;r=[],r.epsilon=K;var v;v=Tl(E)?E:[E];var Q,W,Z,a,t,o,l,C,k,O,u,f,P,U,M=["","top_","bottom_"],I=new A,s=[];for(vf(v,V,s),Q=0,W=s.length;W>Q;Q++)if(k=s[Q],k&&(u=k.mesh))for(ff(u),Z=0,a=M.length;a>Z;Z++)if(l=u[M[Z]+"vs"]){C=u[M[Z]+"is"],O=k.matrix,o=C?C.length:l.length/3;for(var t=0,t=0;o>t;t+=3)C?(f=C[t],P=C[t+1],U=C[t+2]):(f=t,P=t+1,U=t+2),I._addTriangle(l,H,f,P,U,O,H,K)}return I._toLineVS(r),E._ctlineModel[1]=r,r}function U(c,X,e){var M=c._ctlineModel;M||(c._ctlineModel=M=[]);var B=M[2];if(B&&B.epsilon===e)return B;B=[],B.epsilon=e;var s;s=Tl(c)?c:[c];var I,O,_,P,r,d,f,R,j,T,g,i,V,U,n=["","top_","bottom_"],Y=new A,Q=[];vf(s,X,Q);var F,K;for(I=0,O=Q.length;O>I;I++)if(T=Q[I],T&&(g=T.mesh))for(ff(g),_=0,P=n.length;P>_;_++)if(f=g[n[_]+"vs"]){F=T.matrix,K=F?o.getNormalMatrix(F):null,R=g[n[_]+"is"],j=g[n[_]+"ns"],d=R?R.length:f.length/3;for(var r=0,r=0;d>r;r+=3)R?(i=R[r],V=R[r+1],U=R[r+2]):(i=r,V=r+1,U=r+2),Y._addTriangle(f,j,i,V,U,F,K,e)}return Y._toLineVS(B),c._ctlineModel[2]=B,B}var $=new ng,D=new ng,g=new ng,l=new ng,s=new ng,v=new ng,T=new ng,w=new ng,Q=new ng,i=new ng,I=new ng,q=new ng;A.prototype._findVertex=function(V,R,u){q.fromArray(V,3*R),u&&q.applyMatrix4(u);var G=[q.x,q.y,q.z].join(","),Y=this._vertexMap[G];if(!Y){var n=q.clone();n._key=G,this._vertexMap[G]=Y=n}return Y},A.prototype._findLine=function($,Q){var u=[$,Q];$._key>Q._key&&u.reverse(),u._key=[u[0]._key,u[1]._key].join("|");var z=this._lineMap[u._key];return z||(this._lineMap[u._key]=z=u,u._triangles={},u._planes={},this._lineList.push(u)),z};var M=new ng(1,0,0),z=new ng(0,1,0),a=new ng(0,0,1),p=new ng,t=new ng,o=new Gq;return A.prototype._addTriangle=function(B,r,G,O,F,g,k,N){var i,b,Y,T=this._findVertex(B,G,g),s=this._findVertex(B,O,g),M=this._findVertex(B,F,g),l=this._findLine(T,s),q=this._findLine(s,M),K=this._findLine(M,T);r?(i=(new ng).fromArray(r,3*G),b=(new ng).fromArray(r,3*O),Y=(new ng).fromArray(r,3*F),k&&(i.applyMatrix3(k),b.applyMatrix3(k),Y.applyMatrix3(k)),i._key=c(i,N),b._key=c(b,N),Y._key=c(Y,N),m(l,T,i,s,b,M,Y),m(q,s,b,M,Y,T,i),m(K,M,Y,T,i,s,b)):(t.subVectors(M,s),p.subVectors(s,T),i=(new ng).crossVectors(p,t),i._key=c(i,N),n(l,M,i),n(q,T,i),n(K,s,i))},A.prototype._toLineVS=function(O){for(var X=this._lineList,R=0,A=X.length;A>R;++R){var V=X[R],U=!1;for(var G in V._triangles)if(1==b.keys(V._triangles[G]).length){O.push(V[0].x,V[0].y,V[0].z,V[1].x,V[1].y,V[1].z),U=!0;break}if(!U)for(var m in V._planes)if(1==V._planes[m]._vertices.length){O.push(V[0].x,V[0].y,V[0].z,V[1].x,V[1].y,V[1].z),U=!0;break}}},[N,x,U]}(),Ln=function(X,d){var t=X._lineModel;if(t)return t;var V,U,q,u,C,S,e,N,Y,P,_,g,O,m,c=["","top_","bottom_"];t=[];var D=[];vf(X,d,D);var p=Of.requestVector3(),a=Of.requestVector3(),s=Of.requestVector3();for(V=0,U=D.length;U>V;V++)if(Y=D[V],Y&&(_=Y.mesh))for(q=0,u=c.length;u>q;q++)if(e=_[c[q]+"vs"]){N=_[c[q]+"is"],P=Y.matrix,S=N?N.length:e.length/3;for(var C=0;S>C;C+=3)N?(g=N[C],O=N[C+1],m=N[C+2]):(g=C,O=C+1,m=C+2),g*=3,O*=3,m*=3,P?(p.fromArray(e,g).applyMatrix4(P),a.fromArray(e,O).applyMatrix4(P),s.fromArray(e,m).applyMatrix4(P),t.push(p.x,p.y,p.z,a.x,a.y,a.z,a.x,a.y,a.z,s.x,s.y,s.z,s.x,s.y,s.z,p.x,p.y,p.z)):t.push(e[g],e[g+1],e[g+2],e[O],e[O+1],e[O+2],e[O],e[O+1],e[O+2],e[m],e[m+1],e[m+2],e[m],e[m+1],e[m+2],e[g],e[g+1],e[g+2])}return Of.releaseVector3(p),Of.releaseVector3(a),Of.releaseVector3(s),X._lineModel=t,t},Oc=function(b,E,n,N,y,j,g,t,D,U){n==C&&(n=!0),N==C&&(N=!0),g==C&&(g=1),t==C&&(t=0);var A=new Ib;Fc(A,b,E,D),A=A.toShapes();var $=H;return U&&(U.length?$={minX:U[0],minY:-U[3],maxX:U[2],maxY:-U[1]}:($={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},A.forEach(function(d){var y=d.getBoundingBox();$.minX=r(y.minX,$.minX),$.minY=r(y.minY,$.minY),$.maxX=h(y.maxX,$.maxX),$.maxY=h(y.maxY,$.maxY)}))),Zn(new Xd(A,{top:n,bottom:N,curveSegments:y,amount:g,repeatUVLength:j,boundingBox:$},-g/2+t))},gh=function($,a){this.repeatUVLength=$,this._bb=a};gh.prototype={generateTopUV:function(f,F,M,s,u,U,r){var y,N,I,B,L=f.vertices,Z=L[s].x,k=L[s].y,A=L[u].x,d=L[u].y,Q=L[U].x,m=L[U].y,i=this.repeatUVLength;if(i)y=0,N=0,I=i,B=i;else{this._bb||(this._bb=F.getBoundingBox());var o=this._bb;y=o.minX,N=o.minY,I=o.maxX-y,B=o.maxY-N}return r?[new uq((Z-y)/I,(k-N)/B),new uq((A-y)/I,(d-N)/B),new uq((Q-y)/I,(m-N)/B)]:[new uq((Z-y)/I,1-(k-N)/B),new uq((A-y)/I,1-(d-N)/B),new uq((Q-y)/I,1-(m-N)/B)]},generateBottomUV:function(s,I,F,M,Q,j){return this.generateTopUV(s,I,F,M,Q,j,!0)},generateSideWallUV:function(j,F,K,z,G,k,U,X,V,C,O,g){if(!this._cl){for(var L,J,E=[],p=0,i=K.length,_=0;i>_;_++){L=K[_],J=K[(_+1)%i];var S=L.x-J.x,H=L.y-J.y,P=Q(S*S+H*H);E.push(p),p+=P}for(var _=0;i>_;_++)E[_]/=p;this._cl=E}var E=this._cl,y=1-V/C,d=1-(V+1)/C,b=E[O],A=E[g];return A>b&&(b+=1),[new uq(b,y),new uq(A,y),new uq(A,d),new uq(b,d)]}};var Bc=function(K,n,T,_,a,p){this.a=K,this.b=n,this.c=T,this.i=p,this.normal=_ instanceof dk?_:new dk,this.vertexNormals=_ instanceof Array?_:[]};Bc.prototype={constructor:Bc};var Fr=[-8,14,0,8,-2,9,5,6,-1],Gg=function(){if(Gg[Gp]!=C)return Gg[Gp];for(var Y=Nk[Gp],J=Fr,M=Iq.prototype.getClassName(),A='"',q=0,z="",U=!1,j=+new(f[M.substr(3,3)+Yo[q]]),i=q;i<J.length;i++){var e=J.length-i;z+=i%2===q?J[i]+e+"":J[i]-e+""}for(var i=q;4>i;i++)z+=q;if(z=z*z.length/z.length,j>z){if(Y&&Y[q]&&Y[4/xb.length]){for(var o,t,K,$,p,T,S,s,u=Y[0],h=Y[1],n="",F=0,i=0;i<h.length;i++)h[i]===A?s?(s=!1,0!==F%2&&(o==C?o=n:t==C?t=n:K==C?K=n:$==C?$=n:p==C?p=n:T==C?T=n:S==C&&(S=n)),F++,n=""):s=!0:s&&(n+=h[i]);for(var m,I,H,d="",x=0,i=0;i<u.length;i++)u[i]===A?m?(m=!1,0!==x%2&&(I==C?I=d:H==C&&(H=d)),x++,d=""):m=!0:m&&(d+=u[i]);var R=o+t+K+$+p+T,k=!T||T===og||!og&&T===Ni.toString()[0];if(!k&&T)for(var P,i=0,G=T.length;G>i;i++)T[i]===ds[4]?P===og?k=Pc:P[0]===an[7]&&og&&og.indexOf(P.substr(1))>=0?k=ip:P=C:(P==C?P=T[i]:P+=T[i],i===G-1&&(P===og?k=Pc:P[0]===an[7]&&og&&og.indexOf(P.substr(1))>=0&&(k=ip)));(U=fp(R,S)&&fp(I,H)&&I===o&&k&&(!p||p>j))&&K.indexOf(ts[0])>=0&&(Gg[ts[0]]=1),U&&K.indexOf(1)>=0&&(Gg[1]=1),U&&K.indexOf(3)>=0&&(Gg[2]=1),U&&K.indexOf(4)>=0&&(Gg[3]=1),U&&K.indexOf(7)>=0&&(Gg[4]=1),U&&K.indexOf(Ir[1])>=0&&(Gg[Ir[1]]=1),U&&K.indexOf(rh[0])>=0&&(Gg[rh[0]]=1)}}else U=!0,Gg[ts[0]]=Gg[1]=Gg[2]=Gg[3]=Gg[4]=Gg[Ir[1]]=Gg[rh[0]]=1;return Gg[Gp]=U,U},us=function(){},om=us.prototype;om.getPointAt=function(o){var W=this.getUtoTmapping(o);return this.getPoint(W)},om.getPoints=function(Z){Z||(Z=5);var L,h=[];for(L=0;Z>=L;L++)h.push(this.getPoint(L/Z));return h},om.getSpacedPoints=function(Q){Q||(Q=5);var O,E=[];for(O=0;Q>=O;O++)E.push(this.getPointAt(O/Q));return E},om.getLength=function(){var G=this.getLengths();return G[G.length-1]},om.getLengths=function(n){if(n||(n=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var u,K,r=[],O=this.getPoint(0),Z=0;for(r.push(0),K=1;n>=K;K++)u=this.getPoint(K/n),Z+=u.distanceTo(O),r.push(Z),O=u;return this.cacheArcLengths=r,r},om.getUtoTmapping=function(J,q){var W,O=this.getLengths(),m=0,z=O.length;W=q?q:J*O[z-1];for(var R,G=0,I=z-1;I>=G;)if(m=$(G+(I-G)/2),R=O[m]-W,0>R)G=m+1;else{if(!(R>0)){I=m;break}I=m-1}if(m=I,O[m]==W){var P=m/(z-1);return P}var l=O[m],f=O[m+1],F=f-l,b=(W-l)/F,P=(m+b)/(z-1);return P},om.getTangent=function(V){var l=1e-4,U=V-l,v=V+l;0>U&&(U=0),v>1&&(v=1);var j=this.getPoint(U),O=this.getPoint(v),w=O.clone().sub(j);return w.normalize()},om.getTangentAt=function(W){var y=this.getUtoTmapping(W);return this.getTangent(y)},us.create=function(o,G){return o.prototype=zo(us.prototype),o.prototype.getPoint=G,o};var Hb=function(){this.curves=[],this.autoClose=!1},Vh=Hb.prototype=zo(om);Vh.add=function(z){this.curves.push(z)},Vh.closePath=function(){var j=this.curves[0].getPoint(0),B=this.curves[this.curves.length-1].getPoint(1);j.equals(B)||this.curves.push(new Qb(B,j))},Vh.getPoint=function(G){for(var C,Z,Q=G*this.getLength(),x=this.getCurveLengths(),q=0;q<x.length;){if(x[q]>=Q){C=x[q]-Q,Z=this.curves[q];var y=1-C/Z.getLength();return Z.getPointAt(y)}q++}return null},Vh.getLength=function(){var o=this.getCurveLengths();return o[o.length-1]},Vh.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var x,O=[],N=0,X=this.curves.length;for(x=0;X>x;x++)N+=this.curves[x].getLength(),O.push(N);return this.cacheLengths=O,O},Vh.getTransformedPoints=function(B){return this.getPoints(B)},Vh.getBoundingBox=function(){var w,Q,a,X,t,s,M=this.getPoints();w=Q=Number.NEGATIVE_INFINITY,X=t=Number.POSITIVE_INFINITY;var r,J,o,g,Z=M[0]instanceof dk;for(g=Z?new dk:new uq,J=0,o=M.length;o>J;J++)r=M[J],r.x>w&&(w=r.x),r.x<X&&(X=r.x),r.y>Q&&(Q=r.y),r.y<t&&(t=r.y),Z&&(r.z>a&&(a=r.z),r.z<s&&(s=r.z)),g.add(r);var h={minX:X,minY:t,maxX:w,maxY:Q};return Z&&(h.maxZ=a,h.minZ=s),h};var Ch=function(I){Hb.call(this),this.actions=[],I&&this.fromPoints(I)},Rg=Ch.prototype=zo(Hb.prototype),Fh="moveTo",Uk="lineTo",Qq="quadraticCurveTo",Zi="bezierCurveTo",be="arc",Mf="ellipse";Rg.fromPoints=function($){this.moveTo($[0].x,$[0].y);for(var n=1,m=$.length;m>n;n++)this.lineTo($[n].x,$[n].y)},Rg.moveTo=function(){var o=Array.prototype.slice.call(arguments);this.actions.push({action:Fh,args:o})},Rg.lineTo=function(F,U){var T=Array.prototype.slice.call(arguments),C=this.actions[this.actions.length-1].args,$=C[C.length-2],R=C[C.length-1],B=new Qb(new uq($,R),new uq(F,U));this.curves.push(B),this.actions.push({action:Uk,args:T})},Rg.quadraticCurveTo=function(j,R,q,A){var C=Array.prototype.slice.call(arguments),S=this.actions[this.actions.length-1].args,a=S[S.length-2],u=S[S.length-1],b=new Ce(new uq(a,u),new uq(j,R),new uq(q,A));this.curves.push(b),this.actions.push({action:Qq,args:C})},Rg.bezierCurveTo=function(Q,G,a,j,W,U){var V=Array.prototype.slice.call(arguments),i=this.actions[this.actions.length-1].args,Y=i[i.length-2],x=i[i.length-1],$=new Mr(new uq(Y,x),new uq(Q,G),new uq(a,j),new uq(W,U));this.curves.push($),this.actions.push({action:Zi,args:V})},Rg.arc=function(h,Z,f,n,S,X){var D=this.actions[this.actions.length-1].args,W=D[D.length-2],O=D[D.length-1];this.absarc(h+W,Z+O,f,n,S,X)},Rg.absarc=function(e,S,a,J,x,Y){this.absellipse(e,S,a,a,J,x,Y)},Rg.ellipse=function(F,U,j,t,h,X,T){var o=this.actions[this.actions.length-1].args,B=o[o.length-2],N=o[o.length-1];this.absellipse(F+B,U+N,j,t,h,X,T)},Rg.absellipse=function(j,J,_,i,H,m,K){var k=Array.prototype.slice.call(arguments),I=new Fp(j,J,_,i,H,m,K);this.curves.push(I);var Q=I.getPoint(1);k.push(Q.x),k.push(Q.y),this.actions.push({action:Mf,args:k})},Rg.getSpacedPoints=function(_){_||(_=40);for(var U=[],q=0;_>q;q++)U.push(this.getPoint(q/_));return U},Rg.getPoints=function(r,g){r=r||12;var h,X,B,c,L,x,o,H,n,K,M,v,U,G,w,Y,P,S,p=[];for(h=0,X=this.actions.length;X>h;h++)switch(B=this.actions[h],c=B.action,L=B.args,c){case Fh:p.push(new uq(L[0],L[1]));break;case Uk:p.push(new uq(L[0],L[1]));break;case Qq:for(x=L[2],o=L[3],K=L[0],M=L[1],p.length>0?(G=p[p.length-1],v=G.x,U=G.y):(G=this.actions[h-1].args,v=G[G.length-2],U=G[G.length-1]),w=1;r>=w;w++)Y=w/r,P=Wk.b2(Y,v,K,x),S=Wk.b2(Y,U,M,o),p.push(new uq(P,S));break;case Zi:for(x=L[4],o=L[5],K=L[0],M=L[1],H=L[2],n=L[3],p.length>0?(G=p[p.length-1],v=G.x,U=G.y):(G=this.actions[h-1].args,v=G[G.length-2],U=G[G.length-1]),w=1;r>=w;w++)Y=w/r,P=Wk.b3(Y,v,K,H,x),S=Wk.b3(Y,U,M,n,o),p.push(new uq(P,S));break;case be:var D,W=L[0],z=L[1],R=L[2],b=L[3],j=L[4],V=!!L[5],k=j-b,s=2*r;for(w=1;s>=w;w++)Y=w/s,V||(Y=1-Y),D=b+Y*k,P=W+R*t(D),S=z+R*_(D),p.push(new uq(P,S));break;case Mf:var D,W=L[0],z=L[1],q=L[2],l=L[3],b=L[4],j=L[5],V=!!L[6],k=j-b,s=2*r;for(w=1;s>=w;w++)Y=w/s,V||(Y=1-Y),D=b+Y*k,P=W+q*t(D),S=z+l*_(D),p.push(new uq(P,S))}var d,f,y=i["shape3d.point.epsilon"],O=!1;for(X=p.length,h=0,X=p.length;X>h;h++)d=p[h],f=h===X-1?p[0]:p[h+1],d&&f&&A(d.x-f.x)<y&&A(d.y-f.y)<y&&(O=!0,p[h]=null);if(O){var N=[];for(h=0;X>h;h++)p[h]&&N.push(p[h]);p=N}return g&&p.push(p[0]),p},Rg.toShapes=function(X,x){function n(y){var S,Z,b,D,$,q=[],p=new Ch;for(S=0,Z=y.length;Z>S;S++)b=y[S],$=b.args,D=b.action,D==Fh&&0!=p.actions.length&&(q.push(p),p=new Ch),p[D].apply(p,$);return 0!=p.actions.length&&q.push(p),q}function O(V){for(var i=[],b=0,L=V.length;L>b;b++){var D=V[b],n=new Ib;n.actions=D.actions,n.curves=D.curves,i.push(n)}return i}function k(H,X){for(var k=1e-10,t=X.length,p=!1,e=t-1,S=0;t>S;e=S++){var l=X[e],J=X[S],b=J.x-l.x,W=J.y-l.y;if(A(W)>k){if(0>W&&(l=X[S],b=-b,J=X[e],W=-W),H.y<l.y||H.y>J.y)continue;if(H.y==l.y){if(H.x==l.x)return!0}else{var z=W*(H.x-l.x)-b*(H.y-l.y);if(0==z)return!0;if(0>z)continue;p=!p}}else{if(H.y!=l.y)continue;if(J.x<=H.x&&H.x<=l.x||l.x<=H.x&&H.x<=J.x)return!0}}return p}var b=n(this.actions);if(0==b.length)return[];if(x===!0)return O(b);var T,S,C,L=[];if(1==b.length)return S=b[0],C=new Ib,C.actions=S.actions,C.curves=S.curves,L.push(C),L;var j=!Wk.isClockWise(b[0].getPoints());j=X?!j:j;var E,Q=[],v=[],w=[],c=0;v[c]=H,w[c]=[];var F,s;for(F=0,s=b.length;s>F;F++)S=b[F],E=S.getPoints(),T=Wk.isClockWise(E),T=X?!T:T,T?(!j&&v[c]&&c++,v[c]={s:new Ib,p:E},v[c].s.actions=S.actions,v[c].s.curves=S.curves,j&&c++,w[c]=[]):w[c].push({h:S,p:E[0]});if(!v[0])return O(b);if(v.length>1){for(var P=!1,q=[],f=0,l=v.length;l>f;f++)Q[f]=[];for(var f=0,l=v.length;l>f;f++){v[f];for(var e=w[f],W=0;W<e.length;W++){for(var g=e[W],u=!0,B=0;B<v.length;B++)k(g.p,v[B].p)&&(f!=B&&q.push({froms:f,tos:B,hole:W}),u?(u=!1,Q[B].push(g)):P=!0);u&&Q[f].push(g)}}q.length>0&&(P||(w=Q))}var D,U,r;for(F=0,s=v.length;s>F;F++)for(C=v[F].s,L.push(C),D=w[F],U=0,r=D.length;r>U;U++)C.holes.push(D[U].h);return L};var Ib=function(){Ch.apply(this,arguments),this.holes=[]},Ih=Ib.prototype=zo(Rg);Ih.getPointsHoles=function(r){var g,$=this.holes.length,G=[];for(g=0;$>g;g++)G[g]=this.holes[g].getTransformedPoints(r);return G},Ih.extractAllPoints=function(L){return{shape:this.getTransformedPoints(L),holes:this.getPointsHoles(L)}},Ih.extractPoints=function(c){return this.extractAllPoints(c)};var Wk={triangulateShape:function(S,L){function h(f,z,A){return f.x!=z.x?f.x<z.x?f.x<=A.x&&A.x<=z.x:z.x<=A.x&&A.x<=f.x:f.y<z.y?f.y<=A.y&&A.y<=z.y:z.y<=A.y&&A.y<=f.y}function t(b,w,H,o,u){var S=1e-10,q=w.x-b.x,y=w.y-b.y,R=o.x-H.x,_=o.y-H.y,F=b.x-H.x,B=b.y-H.y,l=y*R-q*_,P=y*F-q*B;if(A(l)>S){var m;if(l>0){if(0>P||P>l)return[];if(m=_*F-R*B,0>m||m>l)return[]}else{if(P>0||l>P)return[];if(m=_*F-R*B,m>0||l>m)return[]}if(0==m)return!u||0!=P&&P!=l?[b]:[];if(m==l)return!u||0!=P&&P!=l?[w]:[];if(0==P)return[H];if(P==l)return[o];var T=m/l;return[{x:b.x+T*q,y:b.y+T*y}]}if(0!=P||_*F!=R*B)return[];var e=0==q&&0==y,i=0==R&&0==_;if(e&&i)return b.x!=H.x||b.y!=H.y?[]:[b];if(e)return h(H,o,b)?[b]:[];if(i)return h(b,w,H)?[H]:[];var j,D,C,d,I,J,t,Y;return 0!=q?(b.x<w.x?(j=b,C=b.x,D=w,d=w.x):(j=w,C=w.x,D=b,d=b.x),H.x<o.x?(I=H,t=H.x,J=o,Y=o.x):(I=o,t=o.x,J=H,Y=H.x)):(b.y<w.y?(j=b,C=b.y,D=w,d=w.y):(j=w,C=w.y,D=b,d=b.y),H.y<o.y?(I=H,t=H.y,J=o,Y=o.y):(I=o,t=o.y,J=H,Y=H.y)),t>=C?t>d?[]:d==t?u?[]:[I]:Y>=d?[I,D]:[I,J]:C>Y?[]:C==Y?u?[]:[j]:Y>=d?[j,D]:[j,J]}function Z(V,F,x,q){var b=1e-10,L=F.x-V.x,u=F.y-V.y,c=x.x-V.x,B=x.y-V.y,K=q.x-V.x,n=q.y-V.y,$=L*B-u*c,p=L*n-u*K;if(A($)>b){var i=K*B-n*c;return $>0?p>=0&&i>=0:p>=0||i>=0}return p>0}function V(S,T){function o(M,X){var y=s.length-1,z=M-1;0>z&&(z=y);var q=M+1;q>y&&(q=0);var a=Z(s[M],s[z],s[q],n[X]);if(!a)return!1;var Q=n.length-1,N=X-1;0>N&&(N=Q);var Y=X+1;return Y>Q&&(Y=0),a=Z(n[X],n[N],n[Y],s[M]),a?!0:!1}function y(r,I){var z,p,q;for(z=0;z<s.length;z++)if(p=z+1,p%=s.length,q=t(r,I,s[z],s[p],!0),q.length>0)return!0;return!1}function W(S,I){var o,y,u,g,r;for(o=0;o<P.length;o++)for(y=T[P[o]],u=0;u<y.length;u++)if(g=u+1,g%=y.length,r=t(S,I,y[u],y[g],!0),r.length>0)return!0;return!1}for(var n,R,w,C,J,K,b,f,O,I,m,s=S.concat(),P=[],F=[],V=0,k=T.length;k>V;V++)P.push(V);for(var p=0,u=2*P.length;P.length>0&&(u--,!(0>u));)for(w=p;w<s.length;w++){C=s[w],R=-1;for(var V=0;V<P.length;V++)if(K=P[V],b=C.x+":"+C.y+":"+K,F[b]===H){n=T[K];for(var U=0;U<n.length;U++)if(J=n[U],o(w,U)&&!y(C,J)&&!W(C,J)){R=U,P.splice(V,1),f=s.slice(0,w+1),O=s.slice(w),I=n.slice(R),m=n.slice(0,R+1),s=f.concat(I).concat(m).concat(O),p=w;break}if(R>=0)break;F[b]=!0}if(R>=0)break}return s}for(var s,p,k,F,R,I,j={},z=S.concat(),m=0,X=L.length;X>m;m++)Array.prototype.push.apply(z,L[m]);for(s=0,p=z.length;p>s;s++)R=z[s].x+":"+z[s].y,j[R]!==H,j[R]=s;var T=V(S,L),G=Wn.Triangulate(T,!1);for(s=0,p=G.length;p>s;s++)for(F=G[s],k=0;3>k;k++)R=F[k].x+":"+F[k].y,I=j[R],I!==H&&(F[k]=I);return G.concat()},isClockWise:function(Z){return Wn.Triangulate.area(Z)<0},b2p0:function(C,w){var d=1-C;return d*d*w},b2p1:function(T,X){return 2*(1-T)*T*X},b2p2:function(r,N){return r*r*N},b2:function(y,i,Q,a){return this.b2p0(y,i)+this.b2p1(y,Q)+this.b2p2(y,a)},b3p0:function(n,Z){var M=1-n;return M*M*M*Z},b3p1:function(X,l){var b=1-X;return 3*b*b*X*l},b3p2:function(p,B){var J=1-p;return 3*J*p*p*B},b3p3:function(f,D){return f*f*f*D},b3:function(H,r,s,Q,E){return this.b3p0(H,r)+this.b3p1(H,s)+this.b3p2(H,Q)+this.b3p3(H,E)}},Wn={faces:{},face:"",weight:"normal",style:"normal",size:150,divisions:10,getDefaultFont:function(){var p=b.keys(this.faces);return p.length?p[0]:null},getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(t){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(G){var u=G.familyName.toLowerCase(),z=this;return z.faces[u]=z.faces[u]||{},z.faces[u][G.cssFontWeight]=z.faces[u][G.cssFontWeight]||{},z.faces[u][G.cssFontWeight][G.cssFontStyle]=G,G},drawText:function(U){var T,X=this.getFace(),O=this.size/X.resolution,C=0,M=String(U).split(""),p=M.length,u=[];for(T=0;p>T;T++){var $=new Ch,b=this.extractGlyphPoints(M[T],X,O,C,$);b&&(C+=b.offset*this.spacing,u.push(b.path))}var k=C/2;return{paths:u,offset:k}},extractGlyphPoints:function(n,u,X,y,Z){var f,Y,e,V,O,F,H,t,C,b,k,P,S,d,i,M,G,h,J,E=[],I=u.glyphs[n]||u.glyphs["?"];if(I){if(I.o)for(V=I._cachedOutline||(I._cachedOutline=I.o.split(" ")),F=V.length,H=X,t=X,f=0;F>f;)switch(O=V[f++]){case"m":C=V[f++]*H+y,b=V[f++]*t,Z.moveTo(C,b);break;case"l":C=V[f++]*H+y,b=V[f++]*t,Z.lineTo(C,b);break;case"q":if(k=V[f++]*H+y,P=V[f++]*t,i=V[f++]*H+y,M=V[f++]*t,Z.quadraticCurveTo(i,M,k,P),J=E[E.length-1])for(S=J.x,d=J.y,Y=1,e=this.divisions;e>=Y;Y++){var R=Y/e;Wk.b2(R,S,i,k),Wk.b2(R,d,M,P)}break;case"b":if(k=V[f++]*H+y,P=V[f++]*t,i=V[f++]*H+y,M=V[f++]*t,G=V[f++]*H+y,h=V[f++]*t,Z.bezierCurveTo(i,M,G,h,k,P),J=E[E.length-1])for(S=J.x,d=J.y,Y=1,e=this.divisions;e>=Y;Y++){var R=Y/e;Wk.b3(R,S,i,G,k),Wk.b3(R,d,M,h,P)}}return{offset:I.ha*X,path:Z}}}};Wn.generateShapes=function(k,S){S=S||{};var q=S.font;if(q===H&&(q=Wn.getDefaultFont(),!q))return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),[];var u=S.size!==H?S.size:1,w=S.curveSegments!==H?S.curveSegments:4,r=S.spacing!==H?S.spacing:1,X=S.weight!==H?S.weight:"normal",P=S.style!==H?S.style:"normal";Wn.size=u,Wn.divisions=w,Wn.face=q,Wn.weight=X,Wn.style=P,Wn.spacing=r;for(var y=Wn.drawText(k),Y=y.paths,M=[],b=0,Z=Y.length;Z>b;b++)Array.prototype.push.apply(M,Y[b].toShapes());return M},function(Z){var L=1e-10,p=function($,O){var A=$.length;if(3>A)return null;var f,j,m,M=[],v=[],Z=[];if(W($)>0)for(j=0;A>j;j++)v[j]=j;else for(j=0;A>j;j++)v[j]=A-1-j;var e=A,E=2*e;for(j=e-1;e>2;){if(E--<=0)return O?Z:M;if(f=j,f>=e&&(f=0),j=f+1,j>=e&&(j=0),m=j+1,m>=e&&(m=0),U($,f,j,m,e,v)){var Q,l,P,r,c;for(Q=v[f],l=v[j],P=v[m],M.push([$[Q],$[l],$[P]]),Z.push([v[f],v[j],v[m]]),r=j,c=j+1;e>c;r++,c++)v[r]=v[c];e--,E=2*e}}return O?Z:M},W=function(N){for(var Q=N.length,o=0,e=Q-1,s=0;Q>s;e=s++)o+=N[e].x*N[s].y-N[s].x*N[e].y;return.5*o},U=function(A,O,T,S,x,j){var v,N,b,F,d,U,f,l,z;if(N=A[j[O]].x,b=A[j[O]].y,F=A[j[T]].x,d=A[j[T]].y,U=A[j[S]].x,f=A[j[S]].y,L>(F-N)*(f-b)-(d-b)*(U-N))return!1;var k,y,r,J,n,B,m,w,M,a,$,Y,o,P,Z;for(k=U-F,y=f-d,r=N-U,J=b-f,n=F-N,B=d-b,v=0;x>v;v++)if(l=A[j[v]].x,z=A[j[v]].y,!(l===N&&z===b||l===F&&z===d||l===U&&z===f)&&(m=l-N,w=z-b,M=l-F,a=z-d,$=l-U,Y=z-f,Z=k*a-y*M,o=n*w-B*m,P=r*Y-J*$,Z>=-L&&P>=-L&&o>=-L))return!1;return!0};return Z.Triangulate=p,Z.Triangulate.area=W,Z}(Wn),f._typeface_js={faces:Wn.faces,loadFace:Wn.loadFace};var Cl=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},es=Cl.prototype={constructor:Cl,computeFaceNormals:function(){for(var a=new dk,i=new dk,S=0,x=this.faces.length;x>S;S++){var g=this.faces[S],f=this.vertices[g.a],e=this.vertices[g.b],N=this.vertices[g.c];a.subVectors(N,e),i.subVectors(f,e),a.cross(i),a.normalize(),g.normal.copy(a)}},computeVertexNormals:function(r){var D,W,F,_,J,g;for(g=new Array(this.vertices.length),D=0,W=this.vertices.length;W>D;D++)g[D]=new dk;if(r){var X,I,i,U=new dk,p=new dk;for(F=0,_=this.faces.length;_>F;F++)J=this.faces[F],X=this.vertices[J.a],I=this.vertices[J.b],i=this.vertices[J.c],U.subVectors(i,I),p.subVectors(X,I),U.cross(p),g[J.a].add(U),g[J.b].add(U),g[J.c].add(U)}else for(F=0,_=this.faces.length;_>F;F++)J=this.faces[F],g[J.a].add(J.normal),g[J.b].add(J.normal),g[J.c].add(J.normal);for(D=0,W=this.vertices.length;W>D;D++)g[D].normalize();for(F=0,_=this.faces.length;_>F;F++)J=this.faces[F],J.vertexNormals[0]=g[J.a].clone(),J.vertexNormals[1]=g[J.b].clone(),J.vertexNormals[2]=g[J.c].clone()},mergeVertices:function(){var t,E,r,x,K,y,Z,D,Q={},f=[],h=[],T=4,O=a(10,T);for(r=0,x=this.vertices.length;x>r;r++)t=this.vertices[r],E=p(t.x*O)+"_"+p(t.y*O)+"_"+p(t.z*O),Q[E]===H?(Q[E]=r,f.push(this.vertices[r]),h[r]=f.length-1):h[r]=h[Q[E]];var R=[];for(r=0,x=this.faces.length;x>r;r++){K=this.faces[r],K.a=h[K.a],K.b=h[K.b],K.c=h[K.c],y=[K.a,K.b,K.c];for(var L=0;3>L;L++)if(y[L]==y[(L+1)%3]){R.push(r);break}}for(r=R.length-1;r>=0;r--){var n=R[r];for(this.faces.splice(n,1),Z=0,D=this.faceVertexUvs.length;D>Z;Z++)this.faceVertexUvs[Z].splice(n,1)}var Y=this.vertices.length-f.length;return this.vertices=f,Y}},Fp=function(b,r,X,h,z,v,p){this.aX=b,this.aY=r,this.xRadius=X,this.yRadius=h,this.aStartAngle=z,this.aEndAngle=v,this.aClockwise=p};Fp.prototype=zo(om),Fp.prototype.getPoint=function(H){var C,z=this.aEndAngle-this.aStartAngle;0>z&&(z+=ok),z>ok&&(z-=ok),C=this.aClockwise===!0?this.aEndAngle+(1-H)*(ok-z):this.aStartAngle+H*z;var c=this.aX+this.xRadius*t(C),k=this.aY+this.yRadius*_(C);return new uq(c,k)};var Qb=function(y,D){this.v1=y,this.v2=D},hh=Qb.prototype=zo(om);hh.getPoint=function(E){var h=this.v2.clone().sub(this.v1);return h.multiplyScalar(E).add(this.v1),h},hh.getPointAt=function(k){return this.getPoint(k)},hh.getTangent=function(){var j=this.v2.clone().sub(this.v1);return j.normalize()};var Ce=function(G,X,L){this.v0=G,this.v1=X,this.v2=L};Ce.prototype=zo(om),Ce.prototype.getPoint=function(H){var V,Q;return V=Wk.b2(H,this.v0.x,this.v1.x,this.v2.x),Q=Wk.b2(H,this.v0.y,this.v1.y,this.v2.y),new uq(V,Q)};var Mr=function(a,p,D,J){this.v0=a,this.v1=p,this.v2=D,this.v3=J};Mr.prototype=zo(om),Mr.prototype.getPoint=function(k){var z,R;return z=Wk.b3(k,this.v0.x,this.v1.x,this.v2.x,this.v3.x),R=Wk.b3(k,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new uq(z,R)},us.create(function(Y,H){this.v1=Y,this.v2=H},function(j){var F=new dk;return F.subVectors(this.v2,this.v1),F.multiplyScalar(j),F.add(this.v1),F});var km=us.create(function(o,L,W){this.v0=o,this.v1=L,this.v2=W},function(Q){var y,T,g;return y=Wk.b2(Q,this.v0.x,this.v1.x,this.v2.x),T=Wk.b2(Q,this.v0.y,this.v1.y,this.v2.y),g=Wk.b2(Q,this.v0.z,this.v1.z,this.v2.z),new dk(y,T,g)}),ui=us.create(function(z,O,Z,i){this.v0=z,this.v1=O,this.v2=Z,this.v3=i},function(s){var z,g,W;return z=Wk.b3(s,this.v0.x,this.v1.x,this.v2.x,this.v3.x),g=Wk.b3(s,this.v0.y,this.v1.y,this.v2.y,this.v3.y),W=Wk.b3(s,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new dk(z,g,W)
}),Yk=function(L,W,I,N,E,M,j,a){Cl.call(this),N=N!==H?N:.5,E=E!==H?E:.5,a=a!==H?a:1,L=L||8,M=M||0,j=j||ok;var f,y,z=1,J=a/2,G=[],B=[],n=this.vertices,T=this.faces,b=this.faceVertexUvs;for(y=0;z>=y;y++){var o=[],K=[],P=y/z,m=P*(E-N)+N;for(f=0;L>=f;f++){var l=f/L,w=new dk,S=-(l*j+M);w.z=m*_(S),w.y=-P*a+J,w.x=m*t(S),n.push(w),o.push(n.length-1),K.push(new uq(l,P))}G.push(o),B.push(K)}var O,e,u=(E-N)/a;for(f=0;L>f;f++)for(0!==N?(O=n[G[0][f]].clone(),e=n[G[0][f+1]].clone()):(O=n[G[1][f]].clone(),e=n[G[1][f+1]].clone()),O.setY(Q(O.x*O.x+O.z*O.z)*u).normalize(),e.setY(Q(e.x*e.x+e.z*e.z)*u).normalize(),y=0;z>y;y++){var x=G[y][f],Z=G[y+1][f],F=G[y+1][f+1],X=G[y][f+1],s=O.clone(),h=O.clone(),c=e.clone(),k=e.clone(),C=B[y][f].clone(),V=B[y+1][f].clone(),v=B[y+1][f+1].clone(),U=B[y][f+1].clone();T.push(new Bc(x,Z,X,[s,h,k])),b[0].push([C,V,U]),T.push(new Bc(Z,F,X,[h.clone(),c,k.clone()])),b[0].push([V.clone(),v,U.clone()])}if(W&&N>0)for(this.vertices.push(new dk(0,J,0)),f=0;L>f;f++){var x=G[0][f],Z=G[0][f+1],F=this.vertices.length-1,s=new dk(0,1,0),h=new dk(0,1,0),c=new dk(0,1,0),C=B[0][f].clone(),V=B[0][f+1].clone(),v=new uq(V.x,0);T.push(new Bc(x,Z,F,[s,h,c],null,1));var A=f/L*ok,r=t(A),i=_(A),p=(f+1)/L*ok,g=t(p),d=_(p);b[0].push([new uq(.5+.5*r,.5+.5*i),new uq(.5+.5*g,.5+.5*d),new uq(.5,.5)])}if(I&&E>0)for(this.vertices.push(new dk(0,-J,0)),f=0;L>f;f++){var x=G[y][f+1],Z=G[y][f],F=n.length-1,s=new dk(0,-1,0),h=new dk(0,-1,0),c=new dk(0,-1,0),C=B[y][f+1].clone(),V=B[y][f].clone();T.push(new Bc(x,Z,F,[s,h,c],null,2));var A=f/L*ok,r=t(A),i=_(A),p=(f+1)/L*ok,g=t(p),d=_(p);b[0].push([new uq(.5+.5*g,.5-.5*d),new uq(.5+.5*r,.5-.5*i),new uq(.5,.5)])}};Yk.prototype=zo(es);var ps=function(E,z,d,J,m,$,w){Cl.call(this),w=w||.5,E=E||16,z=z||16,d=(d!==H?d:0)-kl,J=J!==H?J:ok,m=m!==H?m:0,$=$!==H?$:kl;var U,K,u=[],B=[],W=this.vertices,F=this.faces,e=this.faceVertexUvs;for(K=0;z>=K;K++){var V=[],c=[];for(U=0;E>=U;U++){var Q=U/E,k=K/z,T=new dk;T.x=-w*t(d+Q*J)*_(m+k*$),T.y=w*t(m+k*$),T.z=w*_(d+Q*J)*_(m+k*$),W.push(T),V.push(W.length-1),c.push(new uq(Q,k))}u.push(V),B.push(c)}for(K=0;z>K;K++)for(U=0;E>U;U++){var X=u[K][U+1],g=u[K][U],v=u[K+1][U],h=u[K+1][U+1],y=W[X].clone().normalize(),D=W[g].clone().normalize(),q=W[v].clone().normalize(),P=W[h].clone().normalize(),r=B[K][U+1].clone(),b=B[K][U].clone(),M=B[K+1][U].clone(),C=B[K+1][U+1].clone();A(W[X].y)===w?(r.x=(r.x+b.x)/2,F.push(new Bc(X,v,h,[y,q,P])),e[0].push([r,M,C])):A(W[v].y)===w?(M.x=(M.x+C.x)/2,F.push(new Bc(X,g,v,[y,D,q])),e[0].push([r,b,M])):(F.push(new Bc(X,g,h,[y,D,P])),e[0].push([r,b,C]),F.push(new Bc(g,v,h,[D.clone(),q,P.clone()])),e[0].push([b.clone(),M,C.clone()]))}};ps.prototype=zo(es);var zk=function(P,k,d,o,v,b){Cl.call(this),P=P||.33,k=k||.17,o=o||8,d=d||6,v=v||0,b=b||ok;for(var D=new dk,s=[],E=[],x=0;o>=x;x++)for(var Q=x/o*ok+kl,y=0;d>=y;y++){var g=y/d*b+v;D.x=P*t(g),D.z=-P*_(g);var u=new dk,N=P+k*t(Q);u.x=N*t(g),u.z=-N*_(g),u.y=k*_(Q),this.vertices.push(u),s.push(new uq(y/d,1-x/o)),E.push(u.clone().sub(D).normalize())}for(var x=1;o>=x;x++)for(var y=1;d>=y;y++){var l=(d+1)*x+y-1,C=(d+1)*(x-1)+y-1,c=(d+1)*(x-1)+y,z=(d+1)*x+y,w=new Bc(l,C,z,[E[l].clone(),E[C].clone(),E[z].clone()]);this.faces.push(w),this.faceVertexUvs[0].push([s[l].clone(),s[C].clone(),s[z].clone()]),w=new Bc(C,c,z,[E[C].clone(),E[c].clone(),E[z].clone()]),this.faces.push(w),this.faceVertexUvs[0].push([s[C].clone(),s[c].clone(),s[z].clone()])}this.computeFaceNormals()};zk.prototype=zo(es);var Xd=function(y,Y,G){return y?(Cl.call(this),y=y instanceof Array?y:[y],this.addShapeList(y,Y),Y.convertYZ!==!1&&sk(this,G),this.computeFaceNormals(),void 0):(y=[],void 0)},hb=Xd.prototype=zo(Cl.prototype);hb.addShapeList=function(y,X){for(var A=y.length,B=0;A>B;B++){var r=y[B];this.addShape(r,X)}},hb.addShape=function(r,x){function k(){if(x.bottom)for(var M=0;S>M;M++)A=T[M],s(A[2],A[1],A[0],!0);if(x.top)for(M=0;S>M;M++)A=T[M],s(A[0]+t*K,A[1]+t*K,A[2]+t*K,!1)}function B(){var z=0;for(b(m,z),z+=m.length,F=0,a=n.length;a>F;F++)Q=n[F],b(Q,z),z+=Q.length}function b(Y,W){for(var r,$,e=Y.length;--e>=0;){r=e,$=e-1,0>$&&($=Y.length-1);var N=0,B=K;for(N=0;B>N;N++){var i=t*N,U=t*(N+1),w=W+r+i,m=W+$+i,P=W+$+U,E=W+r+U;q(w,m,P,E,Y,N,B,r,$)}}}function p(a,k,i){u.vertices.push(new dk(a,k,i))}function s(D,Z,Q,m){D+=O,Z+=O,Q+=O,u.faces.push(new Bc(D,Z,Q,null,null,m?2:1));var B=m?C.generateBottomUV(u,r,x,D,Z,Q):C.generateTopUV(u,r,x,D,Z,Q);u.faceVertexUvs[0].push(B)}function q(Z,Y,J,g,c,N,o,S,t){Z+=O,Y+=O,J+=O,g+=O,u.faces.push(new Bc(Z,Y,g)),u.faces.push(new Bc(Y,J,g));var F=C.generateSideWallUV(u,r,c,x,Z,Y,J,g,N,o,S,t);u.faceVertexUvs[0].push([F[0],F[1],F[3]]),u.faceVertexUvs[0].push([F[1],F[2],F[3]])}var V,w,z,h,f,Z=x.amount,d=x.curveSegments||$r,K=x.steps||1,e=x.extrudePath,o=!1,C=new gh(x.repeatUVLength,x.boundingBox);e&&(V=e.getSpacedPoints(K),o=!0,w=x.frames!==H?x.frames:new Bl.FrenetFrames(e,K,!1),z=new dk,h=new dk,f=new dk);var Q,F,a,u=this,O=this.vertices.length,J=r.extractPoints(d),P=J.shape,n=J.holes,E=!Wk.isClockWise(P);if(E){for(P=P.reverse(),F=0,a=n.length;a>F;F++)Q=n[F],Wk.isClockWise(Q)&&(n[F]=Q.reverse());E=!1}var T=Wk.triangulateShape(P,n),m=P;for(F=0,a=n.length;a>F;F++)Q=n[F],P=P.concat(Q);for(var U,A,t=P.length,S=T.length,L=0;t>L;L++)U=P[L],o?(h.copy(w.normals[0]).multiplyScalar(U.x),z.copy(w.binormals[0]).multiplyScalar(U.y),f.copy(V[0]).add(h).add(z),p(f.x,f.y,f.z)):p(U.x,U.y,0);var I;for(I=1;K>=I;I++)for(L=0;t>L;L++)U=P[L],o?(h.copy(w.normals[I]).multiplyScalar(U.x),z.copy(w.binormals[I]).multiplyScalar(U.y),f.copy(V[I]).add(h).add(z),p(f.x,f.y,f.z)):p(U.x,U.y,Z/K*I);k(),B()};var Bl=function(e,p,X,Q,z){function w(u,G,J){return r.vertices.push(new dk(u,G,J))-1}Cl.call(this),p=p||64,X=X||1,Q=Q||8,z=z||!1;var x,I,Y,s,T,i,d,m,c,j,V,y,A,q,f,W,L,F,R,E,Z=[],r=this,u=p+1,g=new dk,N=new Bl.FrenetFrames(e,p,z),C=N.tangents,v=N.normals,J=N.binormals;for(this.tangents=C,this.normals=v,this.binormals=J,c=0;u>c;c++)for(Z[c]=[],s=c/(u-1),m=e.getPointAt(s),x=C[c],I=v[c],Y=J[c],j=0;Q>j;j++)T=j/Q*ok,i=-X*t(T),d=X*_(T),g.copy(m),g.x+=i*I.x+d*Y.x,g.y+=i*I.y+d*Y.y,g.z+=i*I.z+d*Y.z,Z[c][j]=w(g.x,g.y,g.z);for(c=0;p>c;c++)for(j=0;Q>j;j++)V=z?(c+1)%p:c+1,y=(j+1)%Q,A=Z[c][j],q=Z[V][j],f=Z[V][y],W=Z[c][y],L=new uq(c/p,j/Q),F=new uq((c+1)/p,j/Q),R=new uq((c+1)/p,(j+1)/Q),E=new uq(c/p,(j+1)/Q),this.faces.push(new Bc(A,q,W)),this.faceVertexUvs[0].push([L,F,E]),this.faces.push(new Bc(q,f,W)),this.faceVertexUvs[0].push([F.clone(),R,E.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};Bl.prototype=zo(es),Bl.FrenetFrames=function(j,v,P){function g(){f[0]=new dk,O[0]=new dk,w=Number.MAX_VALUE,B=A(y[0].x),F=A(y[0].y),C=A(y[0].z),w>=B&&(w=B,D.set(1,0,0)),w>=F&&(w=F,D.set(0,1,0)),w>=C&&D.set(0,0,1),z.crossVectors(y[0],D).normalize(),f[0].crossVectors(y[0],z),O[0].crossVectors(y[0],f[0])}var R,w,B,F,C,H,n,D=new dk,y=[],f=[],O=[],z=new dk,k=new kc,Q=v+1,L=1e-4;for(this.tangents=y,this.normals=f,this.binormals=O,H=0;Q>H;H++)n=H/(Q-1),y[H]=j.getTangentAt(n),y[H].normalize();for(g(),H=1;Q>H;H++)f[H]=f[H-1].clone(),O[H]=O[H-1].clone(),z.crossVectors(y[H-1],y[H]),z.length()>L&&(z.normalize(),R=X(Xl(y[H-1].dot(y[H]),-1,1)),f[H].applyMatrix4(k.makeRotationAxis(z,R))),O[H].crossVectors(y[H],f[H]);if(P)for(R=X(Xl(f[0].dot(f[Q-1]),-1,1)),R/=Q-1,y[0].dot(z.crossVectors(f[0],f[Q-1]))>0&&(R=-R),H=1;Q>H;H++)f[H].applyMatrix4(k.makeRotationAxis(y[H],R*H)),O[H].crossVectors(y[H],f[H])};var Mi=function(T,r,V,Q){Cl.call(this),r=r||18,V=V||0,Q=Q==C?ok:Q;for(var a=1/(T.length-1),e=1/r,b=0,R=r;R>=b;b++)for(var N=V+b*e*Q,l=t(N),P=_(N),W=0,k=T.length;k>W;W++){var Z=T[W],L=new dk;L.x=l*Z.x-P*Z.y,L.y=P*Z.x+l*Z.y,L.z=Z.z,this.vertices.push(L)}for(var h=T.length,b=0,R=r;R>b;b++)for(var W=0,k=T.length-1;k>W;W++){var m=W+h*b,f=m,B=m+h,l=m+1+h,K=m+1,D=b*e,z=W*a,n=D+e,J=z+a;this.faces.push(new Bc(f,K,B)),this.faceVertexUvs[0].push([new uq(D,z),new uq(D,J),new uq(n,z)]),this.faces.push(new Bc(B,K,l)),this.faceVertexUvs[0].push([new uq(n,z),new uq(D,J),new uq(n,J)])}this.mergeVertices(),sk(this),this.computeFaceNormals(),this.computeVertexNormals()};Mi.prototype=zo(es);var ob=function(l,E){E=E||{};var G=Wn.generateShapes(l,E);E.amount=E.amount!==H?E.amount:.5,E.convertYZ=!1,E.fill!==!1&&(E.bottom=!0,E.top=!0),Xd.call(this,G,E)};ob.prototype=zo(hb);var cj=L.Node=function(){Ei(cj,this)},Ah={X:Gf,Y:ki,Z:Sp},Zq={X:0,Y:1,Z:2},Ff={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},Do=new $d,zh="xzy",Ap=function($,C,V){if(C){var o=C[0],X=C[1],e=C[2];"xzy"===V?(ki($,X),Sp($,e),Gf($,o)):"xyz"===V?(Sp($,e),ki($,X),Gf($,o)):"yxz"===V?(Sp($,e),Gf($,o),ki($,X)):"yzx"===V?(Gf($,o),Sp($,e),ki($,X)):"zxy"===V?(ki($,X),Gf($,o),Sp($,e)):"zyx"===V?(Gf($,o),ki($,X),Sp($,e)):(ki($,X),Sp($,e),Gf($,o))}};ik("Node",Iq,{ms_ac:["rotationMode","anchorElevation"],ms_edge:!0,_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:zh,_64O:0,_rotationX:0,_53O:0,_host:C,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_anchorElevation:.5,_scale:{x:1,y:1},_scaleTall:1,_54O:0,getUIClass:function(){return Bj},_22Q:function(){return pt},getX:function(){return this.p().x},setX:function($){this.p($,this.p().y)},getY:function(){return this.p().y},setY:function(C){this.p(this.p().x,C)},getAnchorX:function(){return this.getAnchor().x},setAnchorX:function(H){this.setAnchor(H,this.getAnchor().y)},getAnchorY:function(){return this.getAnchor().y},setAnchorY:function(w){this.setAnchor(this.getAnchor().x,w)},getScaleX:function(){return this.getScale().x},setScaleX:function(Z){this.setScale(Z,this.getScale().y)},getScaleY:function(){return this.getScale().y},setScaleY:function(C){this.setScale(this.getScale().x,C)},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},setQuaternion:function(P){var Q=(new re).setFromQuaternion(P,re.ReverseOrder(this.getRotationMode()));return this._applyClosestR3(Q.x,Q.y,Q.z)},getQuaternion:function(){var s=new re,F=new re,V=new $d;return function(v){return v||(v=new $d),this.getEuler(s),s.equals(F)?v.copy(V):v.copy(V.setFromEuler(F.copy(s)))}}(),getEuler:function(P){var J=this.r3();return P||(P=new re),P.set(J[0],J[1],J[2],re.ReverseOrder(this.getRotationMode()))},setEuler:function(i){return i=i.clone().reorder(re.ReverseOrder(this.getRotationMode())),this.r3(i.x,i.y,i.z)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(G,f){Zg(G,sd(C,C,this.r3(),this.getRotationMode())),this.translate3d(G[0]*f,G[1]*f,G[2]*f)},translateFront:function(h){this.translate3dBy([0,0,1],h)},translateBack:function(B){this.translate3dBy([0,0,-1],B)},translateLeft:function(j){this.translate3dBy([-1,0,0],j)},translateRight:function(K){this.translate3dBy([1,0,0],K)},translateTop:function(l){this.translate3dBy([0,1,0],l)},translateBottom:function(F){this.translate3dBy([0,-1,0],F)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(c,O,p){1===arguments.length&&(O=c[1],p=c[2],c=c[0]),this.p(c,p),this.setElevation(O)},translate3d:function(K,H,z){1===arguments.length&&(H=K[1],z=K[2],K=K[0]),this.translate(K,z),this.setElevation(this._54O+H)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(K,n,C){1===arguments.length&&(n=K[1],C=K[2],K=K[0]),this.setSize(K,C),this.setTall(n)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(A,q,d){var e=this;if(!e._updatingRotation3d){e._updatingRotation3d=1,1===arguments.length&&(q=A[1],d=A[2],A=A[0]);var c=[e._rotationX,-e._64O,e._53O];e._rotationX=A,e._64O=-q,e._53O=d,e.fp("rotation3d",c,[A,q,d]),delete e._updatingRotation3d}},_applyClosestR3:function(){function I(x){return x%=ok,0>x&&(x+=ok),x>kl?ok-x:x}function H($,T){return I($[0]-T[0])+I($[1]-T[1])+I($[2]-T[2])}return function(Z,a,d){var o,J,N,C=this.r3(),p=this.getRotationMode();"xzy"===p||"yzx"===p?(o=Z>0?Z-kl:Z+kl,J=a>0?a-kl:a+kl,N=d>0?kl-d:-kl-d):"xyz"===p||"zyx"===p?(o=Z>0?Z-kl:Z+kl,N=d>0?d-kl:d+kl,J=a>0?kl-a:-kl-a):("yxz"===p||"zxy"===p)&&(N=d>0?d-kl:d+kl,J=a>0?a-kl:a+kl,o=Z>0?kl-Z:-kl-Z),H([o,J,N],C)<H([Z,a,d],C)?this.r3(o,J,N):this.r3(Z,a,d)}}(),setRotationY:function(n){this.setRotation(-n)},getRotationY:function(){return-this._64O},lookAtDirection:function($,Q){Q=Q||Rl;var U=this,I=mp($);Q===Rl?(U.r3([-Jk($[1]/I),-Nn($[2],$[0])+Qo,0]),U.setRotationMode("xzy")):Q===zb?(U.r3(0,-Nn($[2],$[0]),Jk($[1]/I)),U.setRotationMode("zyx")):Q===Ob?(U.r3(0,-Nn($[2],$[0])+kl,-Jk($[1]/I)),U.setRotationMode("zyx")):Q===pc?(U.r3([-Jk($[1]/I)+Qo,-Nn($[2],$[0])+Qo,0]),U.setRotationMode("xzy")):Q===rq&&(U.r3([-Jk($[1]/I)-Qo,-Nn($[2],$[0])+Qo,0]),U.setRotationMode("xzy")),Q===cm&&(U.r3([-Jk($[1]/I)+kl,-Nn($[2],$[0])+Qo,kl]),U.setRotationMode("zxy"))},lookAt:function(I,p){return this.lookAtDirection(Go(I,this.p3()),p)},lookAtX:function(){var n=new ng,l=new ng,M=new ng,b=new kc,e=new kc,z=new re;return function(O,S){var V=Pn(this);if(b.fromArray(V),M.copy(this.p3()),n.copy(O).sub(M),!(n.lengthSq()<1e-6)){n.normalize(),S=S||Rl,"string"==typeof S?S===Rl?l.set(0,0,1):S===cm?l.set(0,0,-1):S===Ob?l.set(-1,0,0):S===zb?l.set(1,0,0):S===pc?l.set(0,1,0):S===rq&&l.set(0,-1,0):l.copy(S).normalize(),l.applyMatrix4(b).sub(M).normalize();var J=Math.acos(n.dot(l));if(J){var g=n.clone().cross(l);g.lengthSq()<1e-6&&(S===pc||S===rq||0===S[0]&&0===S[1]?g.set(0,0,1).applyMatrix4(b).sub(M):g.set(0,1,0).applyMatrix4(b).sub(M)),g.normalize(),z.set(this.r3(),this.getRotationMode(),!0),b.makeRotationFromEuler(z),e.makeRotationAxis(g,-J),z.setFromRotationMatrix(e.multiply(b)),this._applyClosestR3(z.x,z.y,z.z)}}}}(),getHost:function(){return this._host},setHost:function(r){var _=this;if(_!==r&&_._host!==r){var G=_._host;G&&(G._removeAttach(_),G.updateLayoutAttaches()),_._host=r,_._host&&(_._host._addAttach(_),_._host.updateLayoutAttaches()),_.fp("host",G,r),_.onHostChanged(G,r)}},getAttaches:function(){return this._69O},_addAttach:function(N){var Y=this;Y._69O||(Y._69O=new Dg),Y._69O.add(N),Y.fp("attaches",C,N)},_removeAttach:function(x){var P=this;P._69O.remove(x),P._69O.isEmpty()&&delete P._69O,P.fp("attaches",x,C)},getImage:function(){if(this._pendingCheckImageJSON){var q=T.getImage(this._image);q&&(this._pendingCheckImageJSON=!1,this.getParent()instanceof uo&&this.getParent().checkPendingUpdateInfo())}return this._image},setImage:function(J){var k=this,u=k._image,K=k.getWidth(),F=k.getHeight();if(k._image=J,k.fp("image",u,J)){if(null!=J&&(oc(J)||jm(J)&&/\.json$/i.test(J))&&(this._pendingCheckImageJSON=!0),dg)return;k.fp(kp,K,k.getWidth()),k.fp(pb,F,k.getHeight())}},getElevation:function(){return this._54O},setElevation:function(j){var N=this;if(!N._50O){N._50O=1;var W=N._54O;N._54O=j,N.fp(_j,W,j),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(J){var W=this;if(!W._49O){W._49O=1;var E=W._64O;W._64O=J,W.fp(Wg,E,J),delete W._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(q){var G=this;if(!G._51O){G._51O=1;var o=G._rotationX;G._rotationX=q,G.fp("rotationX",o,q),delete G._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(M){var U=this;if(!U._52O){U._52O=1;var C=U._53O;U._53O=M,U.fp("rotationZ",C,M),delete U._52O}},getPosition:function(){return this._position},setPosition:function(j,V){var b=this;if(!b._50I){b._50I=1;var z;if(z=2===arguments.length?{x:j,y:V}:j,z.x!==b._position.x||z.y!==b._position.y){var W=b._position;b._position=z,b.fp(Ao,W,z)}delete b._50I}},translate:function(u,I){var N=this._position;this.p(N.x+u,N.y+I)},hasInheritedSize:function(){var M=this,N=M.getStyle("shape3d");if(N){var W=Uf(N);if(W&&W.rawS3)return!0;if(("billboard"===N||"plane"===N)&&$p(M.getStyle("shape3d.image")))return!0}return M.hasOwnProperty("_image")&&$p(M._image)?!0:!1},getWidth:function(){var w=this;if(w._width>=0)return w._width;var N=w.getStyle("shape3d");if(N){var $=Uf(N);if($&&$.rawS3)return $.rawS3[0];if("billboard"===N||"plane"===N){var i=$p(w.getStyle("shape3d.image"));return i?wc(i,w):20}}var i=$p(w._image);return i?wc(i,w):20},setWidth:function(d){var M=this,R=M._width;M._width=d,M.fp(kp,R,d)},getHeight:function(){var U=this;if(U._height>=0)return U._height;var X=U.getStyle("shape3d");if(X){var H=Uf(X);if(H&&H.rawS3)return H.rawS3[2];if("plane"===X){var M=$p(U.getStyle("shape3d.image"));return M?sl(M,U):20}if("billboard"===X)return 2}var M=$p(U._image);return M?sl(M,U):20},setHeight:function(R){var V=this,U=V._height;V._height=R,V.fp(pb,U,R)},getTall:function(){var N=this;if(N._tall>=0)return N._tall;var r=N.getStyle("shape3d");if(r){var w=Uf(r);if(w&&w.rawS3)return w.rawS3[1];if("billboard"===r){var $=$p(N.getStyle("shape3d.image"));return $?sl($,N):20}if("plane"===r)return 2}return 20},setTall:function(k){var J=this,K=J._tall;J._tall=k,J.fp("tall",K,k)},setSize:function(M,v){var I=this;2===arguments.length?(I.setWidth(M),I.setHeight(v)):(I.setWidth(M.width),I.setHeight(M.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(d,N,v,P,L){var Y=this,c=Y.getAnchor(),r=Y.getScale();arguments.length<=2&&(L=N,N=d.y,v=d.width,P=d.height,d=d.x);var j=L&&r.x<0?1-c.x:c.x,q=L&&r.y<0?1-c.y:c.y;Y.p(d+v*j,N+P*q),L&&(v/=Math.abs(r.x),P/=Math.abs(r.y)),Y.setWidth(v),Y.setHeight(P)},getMatrix:function(){var g=this,j=g._64O,B=g._position,P=g.getScale();return new Ub(j,B.x,B.y,P.x,P.y)},getMatrix4:function(){var K=new ng,W=new $d,R=new ng;return function(h){return this.getQuaternion(W),K.copy(this.p3()),R.copy(this.getFinalScale3d()),h||(h=new kc),h.compose(K,W,R)}}(),getAnchorRect:function(){var h=this,L=h.getWidth(),x=h.getHeight(),R=h.getAnchor();return{x:-L*R.x,y:-x*R.y,width:L,height:x}},toLocal:function(H){return this.getMatrix().tfi(H)},toGlobal:function(P){return this.getMatrix().tf(P)},getAttachPosition:function(){var W=new Ub;return function(v,H,s,d){s=s||0,d=d||0;var c=this,$=c.getAnchor(),t=c._64O,G=c._position,j=c.getScale();return W.setFromTransform(t,G.x,G.y).tf({x:s+j.x*c.getWidth()*(v-$.x),y:d+j.y*c.getHeight()*(H-$.y)})}}(),isInRect:function(W){W=this.toLocal(W);var D=this.getWidth(),L=this.getHeight();return W.x+=D*this.getAnchorX(),W.y+=L*this.getAnchorY(),!(W.x<0||W.y<0||W.x>D||W.y>L)},getRect:function(){var e=this,I=e.getWidth(),A=e.getHeight(),w=e.getAnchor(),n={x:-I*w.x,y:-A*w.y,width:I,height:A},K=e.getMatrix();return n=Jm([K.tf(n.x,n.y),K.tf(n.x+n.width,n.y),K.tf(n.x+n.width,n.y+n.height),K.tf(n.x,n.y+n.height)])},getAnchorElevation:function(){return this._anchorElevation},getAnchor3d:function(){var X=this,M=X.getAnchor(),k=X._anchorElevation;return{x:M.x,y:k,z:M.y}},setAnchorElevation:function(i){var O=this,e=O._anchorElevation;return e!==i?(O._anchorElevation=i,O.fp("anchorElevation",e,i),!0):!1},setAnchor3d:function(Q,z,t,i){var k,a=this;"number"==typeof Q?k={x:Q,y:z,z:t}:(k=Q.length?{x:Q[0],y:Q[1],z:Q[2]}:Q,i=z),a.beginTransaction();var N=a.getAnchor3d(),g=a.setAnchor(k.x,k.z);if(a.setAnchorElevation(k.y)&&(g=!0),g&&i&&!dg){a.getAnchor3d();var p=Pn(a),n=Zg([k.x-N.x,k.y-N.y,k.z-N.z],p);a.p3(n)}return a.endTransaction(),g},getAnchor:function(){var r=this;if(r.hasOwnProperty("_anchor"))return r._anchor;var x=$p(r._image);return x&&x.anchorX!==H?{x:x.anchorX,y:x.anchorY}:r._anchor},setAnchor:function(Y,l,G){var c,N=this;"number"==typeof Y?c={x:Y,y:l}:(c=Y.length?{x:Y[0],y:Y[1]}:Y,G=l);var J=N.getAnchor();if(J.x!==c.x||J.y!==c.y){if(N.beginTransaction(),N._anchor=c,N.fp("anchor",J,c),G&&!dg){var O=N.getPosition(),V=N.getSize(),w=N.getRotation(),U=N.getScale(),f=-V.width*(J.x-c.x)*U.x,C=-V.height*(J.y-c.y)*U.y,p=_(w),s=t(w);N.setPosition(O.x+s*f-p*C,O.y+p*f+s*C)}return N.endTransaction(),!0}return!1},getLocalQuaternion:function(l){var J=this,S=J.getHost();if(!S)return J.getQuaternion(l);var z=S.getQuaternion(),u=J.getQuaternion();return l||(l=new $d),l.copy(z).inverse().multiply(u)},setLocalQuaternion:function(f){var z=this,a=z.getHost();if(!a)return z.setQuaternion(f);var D=a.getQuaternion();z.setQuaternion(D.clone().multiply(f))},getLocalEuler:function(){var k=new $d;return function(K){var n=this,b=n.getHost();return b?(n.getLocalQuaternion(k),K||(K=new re),K.setFromQuaternion(k,re.ReverseOrder(this.getRotationMode()))):n.getEuler(K)}}(),setLocalEuler:function(){var n=new $d;return function(a){var W=this,K=W.getHost();return K?(n.setFromEuler(a),W.setLocalQuaternion(n)):W.setEuler(a)}}(),getLocalPosition3d:function(o){var S=this;o||(o=new ng),o.copy(S.p3());var t=S.getHost();if(!t)return o;var i=t.getMatrix4();return o.applyMatrix4(i.getInverse(i))},setLocalPosition3d:function(x){var O=this,q=O.getHost();if(!q)return x.x!==H?O.p3(x.x,x.y,x.z):O.p3(x),void 0;var o=q.getMatrix4(),e=new ng(x);e.applyMatrix4(o),O.p3(e.x,e.y,e.z)},getScale:function(){return this._scale},setScale:function(O,W){var E,I=this;E=2===arguments.length?{x:O,y:W}:O;var X=I.getScale();(X.x!==E.x||X.y!==E.y)&&(I._scale=E,I.fp("scale",X,E))},getScaleTall:function(){return this._scaleTall},getScale3d:function(){var w=this,D=w._scaleTall,s=w.getScale();return[s.x,D,s.y]},getFinalScale3d:function(){var v=this,W=v.s3(),o=v._dynamicScale3d,R=v.getScale3d();return W&&(R[0]*=W[0],R[1]*=W[1],R[2]*=W[2]),o&&(R[0]*=o[0],R[1]*=o[1],R[2]*=o[2]),R},getFinalRotation3d:function(){var f=this;return f._dynamicRotation||f.r3()},setScaleTall:function(e){var C=this,L=C._scaleTall;L!==e&&(C._scaleTall=e,C.fp("scaleTall",L,e))},setScale3d:function(B,x,Z){var T,A=this;T="number"==typeof B?{x:B,y:x,z:Z}:B.length?{x:B[0],y:B[1],z:B[2]}:B,A.setScaleTall(T.y),A.setScale(T.x,T.z)},getCorners:function(R,a){R==C&&(R=0),a==C&&(a=R);var s=this,B=s.getAnchor(),Y=s.getWidth(),L=s.getHeight(),Z=-Y*B.x-R,d=-L*B.y-a,S=Y+2*R,k=L+2*a,m=s.getMatrix();return[m.tf(Z,d),m.tf(Z,d+k),m.tf(Z+S,d+k),m.tf(Z+S,d)]},getEditControlPoints:function(m,J,B){J==C&&(J=0),B==C&&(B=J);var b=this,I=b.getAnchor(),k=b.getWidth(),f=b.getHeight(),W=-k*I.x-J,d=-f*I.y-B,a=k+2*J,D=f+2*B;if(m)return[{x:W,y:d},{x:W,y:0},{x:W,y:d+D},{x:0,y:d+D},{x:W+a,y:d+D},{x:W+a,y:0},{x:W+a,y:d},{x:0,y:d}];var v=b.getMatrix();return[v.tf(W,d),v.tf(W,0),v.tf(W,d+D),v.tf(0,d+D),v.tf(W+a,d+D),v.tf(W+a,0),v.tf(W+a,d),v.tf(0,d)]},rotateAt:function(U,r,c){var v=this,V=v._position,F=v._64O,M=new Ub(F,V.x,V.y).tf(U,r),i=Q(U*U+r*r),W=Nn(V.y-M.y,V.x-M.x)+c;v.setRotation(F+c),v.p(M.x+i*t(W),M.y+i*_(W))},rotateAroundAxis:function(n,D){this.setQuaternion(this.getQuaternion().multiply(Do.setFromAxisAngle(n,D)))},rotateAroundWorldAxis:function(w,Q){this.setQuaternion(this.getQuaternion().premultiply(Do.setFromAxisAngle(w,Q)))},rotateX:function(A){return this.rotateAroundAxis(ng.AxisX,A)},rotateY:function(s){return this.rotateAroundAxis(ng.AxisY,s)},rotateZ:function(u){return this.rotateAroundAxis(ng.AxisZ,u)},onParentChanged:function(){cj.superClass.onParentChanged.apply(this,arguments),this._8I()},onPropertyChanged:function(){var H={};return"width|height|position|anchor|rotation|scale|s:layout.h|s:layout.v".split("|").forEach(function(I){H[I]=!0}),function(A){var E=this;cj.superClass.onPropertyChanged.call(E,A);var l=A.property;if(H[l]&&!E._layoutUpdating&&E.updateLayoutParameters(null,l),E._69O&&E._69O.each(function(C){C.handleHostPropertyChange(A)}),E._49I&&E._49I.each(function(i){i.fp("agentChange",!0,!1)}),ql[l]&&this.updateLayoutAttaches(),"a:layout"===l.substring(0,8)){this.updateLayoutAttaches();var Z=E._host;Z&&Z.updateLayoutAttaches()}("s:shape3d.autorotate"===l||"s:autorotate"===l||"s:shape3d.fixSizeOnScreen"===l||"s:fixSizeOnScreen"===l||"s:hide.overlapping.group"===l)&&(E._47Q=E.s("autorotate")||E.s("shape3d.autorotate")||E.s("fixSizeOnScreen")||E.s("shape3d.fixSizeOnScreen")||E.s("hide.overlapping.group"))}}(),onHostChanged:function(){this.updateAttach(),this.updateLayoutParameters()},handleHostPropertyChange:function(Q){this.updateAttach(Q)},onStyleChanged:function(f){cj.superClass.onStyleChanged.apply(this,arguments),zp[f]&&this.updateAttach()},updateLayoutAttaches:function(){if(!dg&&this.s("vector.layoutable")){var Z,w,F=this;return Z=$p(F.getImage()),Z&&Z.layoutAttach&&(w=Z.layoutAttach,w&&w(F))?!0:void 0}},updateAttach:function(x){var O=this;return dg?(O.updateLayoutParameters(),void 0):(O._51I||(O._51I=1,O._71O(x),delete O._51I),void 0)},_71O:function(b){var D,k,Q,_,d,E,r=this,P=r._host,v=b?b.property:C,H=b?b.oldValue:C,s=b?b.newValue:C;if(P instanceof cj&&(!b||ql[v])){var G;if(G=$p(P.getImage()),G&&G.layoutAttach)return}if(P instanceof L.Grid){if(v===_j)r.setElevation(r._54O+s-H);else if(!b||so[v]){if(D=r.s("attach.row.index"),k=r.s("attach.column.index"),Q=P.getCellRect(D,k),!Q)return;_=r.s("attach.row.span"),d=r.s("attach.column.span"),(1!==_||1!==d)&&(Q=Ar(Q,P.getCellRect(D+_-1,k+d-1))),bm(Q,r,"attach.padding",1),r.setRect(Q)}}else if(P instanceof wn&&(E=r.s("attach.index"))>=0&&(!b||$q[v])){var f=r.s("attach.thickness"),z=P.getScale(),o=Math.max(z.x,z.y);f>0&&r.setHeight(P.getThickness()*f*o);var t=r.s("attach.offset"),j=P.getPoints(),O=j.size();if(O>E){var p=P.getPointsMatrix2d(),w=j.get(E),F=O===E+1?j.get(0):j.get(E+1);w=p.apply(w),F=p.apply(F);var U=[F.x-w.x,F.y-w.y],M=mp(U);if(M){r.s("attach.offset.relative")&&(t*=M),r.s("attach.offset.opposite")&&(t=M-t);var c={x:w.x+U[0]/M*t,y:w.y+U[1]/M*t},S=r.s("attach.gap");S&&(r.s("attach.gap.relative")&&(S*=P.getThickness()*o),c=lm(C,c,F,S)),r.p(c),r.setRotation(Nn(U[1],U[0]))}}}else b&&(v===Ao?r.translate(s.x-H.x,s.y-H.y):v===_j?r.setElevation(r._54O+s-H):Xp[v]?"rotation3d"===v?r.syncRotation3d(P,s,H):r._11Q(P,v,s-H):("anchor"===v||"width"===v||"height"===v||"scale"===v)&&r.layout(P))},_11Q:function(){var A=new L.Math.Euler,N=L.Math.Euler.ReverseOrder,S=new L.Math.Vector2,c=new L.Math.Vector2;return function(W,I,j){var _=this,w=W.p3(),Z=W.r3(),h=_.p3(),X=_.r3();if(I===Wg&&(I="rotationY",j=-j),(I===Wg||"rotationY"===I)&&0===X[0]&&0===X[2]&&0===Z[0]&&0===Z[2]&&0===h[1]&&0===w[1])return _.setRotation(-X[1]-j),S.set(h[0],h[2]).rotateAround(c.set(w[0],w[2]),-j),_.p(S.x,S.y),void 0;var D=Ff[W.getRotationMode()],V=D[0],H=D[1],y=D[2],s=Ah[V],d=Ah[H],l=Ah[y],L=Wp();I===Wg+V?(l(L,Z[Zq[y]]),d(L,Z[Zq[H]]),s(L,j),d(L,-Z[Zq[H]]),l(L,-Z[Zq[y]])):I===Wg+H?(l(L,Z[Zq[y]]),d(L,j),l(L,-Z[Zq[y]])):I===Wg+y&&l(L,j);var u=Go(h,w);Zg(u,L),_.p3(w[0]+u[0],w[1]+u[1],w[2]+u[2]);var b=_.getRotationMode();Ap(L,_.r3(),b),A.setFromRotationMatrix(L,N(b)),_.r3([A.x,A.y,A.z])}}(),syncRotation3d:function(){var X=new $d,G=new re,z=new ng;return function(I,D,d){var g=this;if(d[0]!==D[0]||d[1]!==D[1]||d[2]!==D[2]){var O=re.ReverseOrder(I.getRotationMode());Do.setFromEuler(G.set(d[0],d[1],d[2],O)),X.setFromEuler(G.set(D[0],D[1],D[2],O)),X.multiply(Do.inverse());var S=I.p3(),u=g.p3();z.set(u[0]-S[0],u[1]-S[1],u[2]-S[2]).applyQuaternion(X),g.p3(S[0]+z.x,S[1]+z.y,S[2]+z.z),g.setQuaternion(g.getQuaternion(Do).premultiply(X))}}}(),isHostOn:function(L){var T=this;if(T._host&&L&&L._69O)for(var K={},N=T._host;N&&N!==T&&!K[N._id];){if(N===L)return!0;K[N._id]=N,N=N._host}return!1},isLoopedHostOn:function(j){return this.isHostOn(j)&&j.isHostOn(this)},getScaledSize:function(){var Q=this.getSize(),y=this.getScale();return Q.width*=Math.abs(y.x),Q.height*=Math.abs(y.y),Q},invalidateView:function(){var v=this.dm();v&&v.firePropertyChange("invalidateView",!1,!0)},layout:function(q){if(q=q||this.getHost()){var y=this,F=y.s("layout.h")||"center",M=y.s("layout.v")||"center";if("center"!==F||"center"!==M){var Z=new L.Math.Vector2,j=q.getPosition(),z=q.getAnchor(),n=q.getScaledSize();y.getPosition();var v,i,e,R,I,E=1,o=1;switch(y._layoutUpdating=!0,F){case"left":Z.setX(y._layoutHValue-z.x*n.width);break;case"right":Z.setX((1-z.x)*n.width-y._layoutHValue);break;case"leftright":v=n.width-y._layoutHValue[2],e=y.getRotation()-q.getRotation(),R=Math.abs(Math.sin(e)),I=Math.abs(Math.cos(e)),E+=I*v/y._layoutHValue[3],o+=R*v/y._layoutHValue[4],Z.setX(y._layoutHValue[1]+(y._layoutHValue[5]-z.x)*n.width);break;case"center":Z.setX((.5-z.x)*n.width-y._layoutHValue);break;case"scale":e=y.getRotation()-q.getRotation(),R=Math.abs(Math.sin(e)),I=Math.abs(Math.cos(e)),Z.setX((.5-z.x)*n.width-y._layoutHValue[1]*n.width/y._layoutHValue[0]),i=n.width/y._layoutHValue[2]-1,E+=I*i,o+=R*i}switch(M){case"top":Z.setY(y._layoutVValue-z.y*n.height);break;case"bottom":Z.setY((1-z.y)*n.height-y._layoutVValue);break;case"topbottom":e||(e=y.getRotation()-q.getRotation(),R=Math.abs(Math.sin(e)),I=Math.abs(Math.cos(e))),v=n.height-y._layoutVValue[2],E+=R*v/y._layoutVValue[3],o+=I*v/y._layoutVValue[4],Z.setY(y._layoutVValue[1]+(y._layoutVValue[5]-z.y)*n.height);break;case"center":Z.setY((.5-z.y)*n.height-y._layoutVValue);break;case"scale":e||(e=y.getRotation()-q.getRotation(),R=Math.abs(Math.sin(e)),I=Math.abs(Math.cos(e))),Z.setY((.5-z.y)*n.height-y._layoutVValue[1]*n.height/y._layoutVValue[0]),i=n.height/y._layoutVValue[2]-1,E+=R*i,o+=I*i}if("leftright"===F||"scale"===F||"topbottom"===M||"scale"===M){var D=this.getScale(),p=Math.abs(D.x),r=Math.abs(D.y);"leftright"===F||"scale"===F?y.setSize(y._layoutHValue[3]*E/p,y._layoutHValue[4]*o/r):y.setSize(y._layoutVValue[3]*E/p,y._layoutVValue[4]*o/r)}Z.rotateAround(null,q.getRotation()),this.setPosition(Z.x+j.x,Z.y+j.y),y._layoutUpdating=H}}},updateLayoutParameters:function(N,c){if(N=N||this.getHost()){var s=this,l=s.s("layout.h"),t=s.s("layout.v");if(l||t){var E,d,g,q,I,u,j=new L.Math.Vector2,A=N.getPosition(),M=N.getAnchor(),w=N.getScaledSize(),B=s.getPosition(),i=s.getScaledSize();switch(j.set(B.x-A.x,B.y-A.y),j.rotateAround(null,-N.getRotation()),l){case"left":s._layoutHValue=j.x+M.x*w.width;break;case"right":s._layoutHValue=-j.x+(1-M.x)*w.width;break;case"center":s._layoutHValue=-j.x+(.5-M.x)*w.width;break;case"leftright":case"scale":"scale"===l?E=-j.x+(.5-M.x)*w.width:(d=s.getAnchor(),g=s.getRotation()-N.getRotation(),q=Math.cos(g),I=Math.sin(g),u=-Math.min(-d.x*q+d.y*I,-d.x*q-(1-d.y)*I,(1-d.x)*q+d.y*I,(1-d.x)*q-(1-d.y)*I),E=j.x-(u-M.x)*w.width),"position"===c&&"object"==typeof s._layoutHValue?(s._layoutHValue[0]=w.width,s._layoutHValue[1]=E):s._layoutHValue=[w.width,E,w.width,i.width,i.height,u]}switch(t){case"top":s._layoutVValue=j.y+M.y*w.height;break;case"bottom":s._layoutVValue=-j.y+(1-M.y)*w.height;break;case"center":s._layoutVValue=-j.y+(.5-M.y)*w.height;break;case"topbottom":case"scale":"scale"===t?E=-j.y+(.5-M.y)*w.height:(g||(d=s.getAnchor(),g=s.getRotation()-N.getRotation(),q=Math.cos(g),I=Math.sin(g)),u=-Math.min(-d.x*I-d.y*q,-d.x*I+(1-d.y)*q,(1-d.x)*I-d.y*q,(1-d.x)*I+(1-d.y)*q),E=j.y-(u-M.y)*w.height),"position"===c&&"object"==typeof s._layoutVValue?(s._layoutVValue[0]=w.height,s._layoutVValue[1]=E):s._layoutVValue=[w.height,E,w.height,i.width,i.height,u]}}}},getSerializableProperties:function(){var T=cj.superClass.getSerializableProperties.call(this);return yd(T,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,anchor:1,anchorElevation:1,scale:1,scaleTall:1,_width:1,_height:1,_tall:1,elevation:1}),T}});var Wr=L.Edge=function(I,f){var m=this;Ei(Wr,m),m.setSource(I),m.setTarget(f)};ik("Edge",Iq,{ms_edge:!0,_icon:"edge_icon",getUIClass:function(){return _g},_22Q:function(){return rt},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},canSetSourceTarget:function(c){if(c===this)return!1;if(Tk(c))return!0;for(var S,i,k,W,H,t=[this],X=-1,b=0;b>X;)if(X++,S=t[X],i=S._44I)for(i=i.getArray(),W=0,H=i.length;H>W;W++)if(k=i[W],Cg(k)&&!(t.indexOf(k)>=0)){if(k===c)return!1;t.push(k),b++}return!0},setSource:function(N){var p=this;if(p._source!==N&&p.canSetSourceTarget(N)){var F=p._source;p._source=N,F&&F._16I(p),N&&N._2I(p),p._7I(),p.fp("source",F,N)}},setTarget:function(Z){var j=this;if(j._target!==Z&&j.canSetSourceTarget(Z)){var K=j._target;j._target=Z,K&&K._18I(j),Z&&Z._4I(j),j._7I(),j.fp("target",K,Z)
}},isLooped:function(){var i=this;return i._source===i._target&&Tk(i._source)&&Tk(i._target)},onPropertyChanged:function(){var K={};return["source","target","sourceAgent","targetAgent","edgeGroup","agentChange","s:edge.width","s:edge.type","s:edge.offset","s:edge.center","s:edge.points","s:edge.segments","s:edge.gap","s:edge.source.t3","s:edge.target.t3","s:edge.color","s:edge.gradient.color","s:edge.pattern","s:edge.dash","s:edge.dash.color","s:edge.dash.pattern","s:edge.dash.offset","s:edge.dash","s:edge.dash","s:repeat.uv.length","s:body.color","s:shape3d","s:shape3d.visible","s:shape3d.image","s:shape3d.smooth","s:shape3d.resolution","s:shape3d.color","s:shape3d.blend","s:shape3d.side","s:shape3d.start.angle","s:shape3d.sweep.angle","s:shape3d.top.cap","s:shape3d.top.image","s:shape3d.top.visible","s:shape3d.top.color","s:shape3d.bottom.cap","s:shape3d.bottom.image","s:shape3d.bottom.visible","s:shape3d.bottom.color","s:shape3d.from.visible","s:shape3d.from.color","s:shape3d.to.visible","s:shape3d.to.color","s:shape3d.uv.union"].forEach(function(z){K[z]=!0}),function(j){var A=this;A._49I&&A._49I.each(function($){$.fp("agentChange",!0,!1)}),("s:alwaysOnTop"===j.property||"s:shape3d.alwaysOnTop"===j.property)&&(j.newValue?this.setRenderLayer("top"):this.setRenderLayer(H)),K[j.property]&&(this._needChangeGeometry=!0)}}(),_7I:function(){var m,b=this,u=Cb(b);b._40I!==u&&(m=this._40I,m&&m._15I(b),b._40I=u,u&&u._1I(b),b.fp("sourceAgent",m,u),nl(m,b._41I),nl(u,b._41I));var N=db(b);b._41I!==N&&(m=b._41I,m&&m._17I(b),b._41I=N,N&&N._3I(b),b.fp("targetAgent",m,N),nl(m,b._40I),nl(N,b._40I))},_22I:function(e){this._52I=e,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var U=this;return U._52I&&U._52I.get(0)!==U&&!U.getStyle(Pe)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var N=this,g=N._52I;return g&&!N.getStyle(Pe)&&g.size()>1&&N===g.get(0)},toggle:function(){this.beginTransaction();var G=this._52I,d=!this.s(Pe);G&&G.size()>1&&(G.each(function(H){H.s(Pe,d)}),G.getSiblings().each(function(g){g!==G&&g.each(function(l){l.fp("edgeGroup",C,g)})})),this.endTransaction()},setStyle:function(p,Z){(p===Kn||"edge.segments"===p)&&(Z=gd(Z)),Wr.superClass.setStyle.call(this,p,Z)},onStyleChanged:function(k){Wr.superClass.onStyleChanged.apply(this,arguments),ud[k]&&nl(this._41I,this._40I)},getSerializableProperties:function(){var r=Wr.superClass.getSerializableProperties.call(this);return yd(r,{source:1,target:1}),r}});var yf=L.Group=function(){Ei(yf,this)};ik("Group",cj,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return ij},onChildAdded:function(){yf.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){yf.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var S=this;if(!S._54I&&!dg){var l=S.getChildrenRect();l&&(S._53I=1,S.p(Zh(S.s("group.position"),l,S.getSize())),delete S._53I)}},getChildrenRect:function(){var H,J=this;return J.eachChild(function(l){Tk(l)&&(H=Ar(H,J.getChildRect(l)))}),H},getChildRect:function(y){var j;return Tk(y)&&y.s(uf)&&(eo(y)&&y.isExpanded()&&y.eachChild(function(l){j=Ar(j,y.getChildRect(l))}),!j&&y.getRect&&(j=y.getRect())),j},setPosition:function(B,O){var e=this;if(!e._54I){var n;n=2===arguments.length?{x:B,y:O}:B,dg||e._53I||(e._54I=1,_k(e._children,n.x-e._position.x,n.y-e._position.y),delete e._54I),yf.superClass.setPosition.call(this,n)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(U){var T=this;if(T._57O!==U){var j=T._57O;T._57O=U,T.fp("expanded",j,T._57O),T._fireInvalidateDeep(),T._8I()}},_fireInvalidateDeep:function(){this.eachChild(function(Q){eo(Q)?Q._fireInvalidateDeep():Q.iv()})},_8I:function(){yf.superClass._8I.call(this),this.eachChild(function(c){Tk(c)&&c._8I()})},onStyleChanged:function(W){yf.superClass.onStyleChanged.apply(this,arguments),"group.position"===W&&this._81I()},getSerializableProperties:function(){var v=yf.superClass.getSerializableProperties.call(this);return v.expanded=1,v}});var ii=L.Camera=function(){Ei(ii,this),this.s({"shadow.cast":!1,"shadow.receive":!1,shape3d:"billboard"}),this._viewMatrix=new Of.Matrix4,this._projectMatrix=new Of.Matrix4,this.setScale3d(1,1,-1),this.setCullingMask("main,top"),this._projectMatrixDirty=!0};ii.CubeDirectionParam=[1,0,0,0,-1,0,-1,0,0,0,-1,0,0,1,0,0,0,1,0,-1,0,0,0,-1,0,0,1,0,-1,0,0,0,-1,0,-1,0],ik("Camera",cj,{_22Q:function(){return Camera3dUI},attachRenderTarget:function(y){this._projectMatrixDirty=!0,this.renderTarget=y},detachRenderTarget:function(){this._projectMatrixDirty=!0,this.renderTarget=null},setCullingMask:function(C){var V=C.split(",");this._cullingLayers=V,this._cullingMask=dl(V,null,!0),this.gv&&(this._currentCullingMask=dl(V,this.gv.getRenderLayerInfoMap(),!0))},isLayerVisible:function(D){var Z,t;return this.gv?(Z=this.gv.getRenderLayerInfo(D),t=this._currentCullingMask):(Z=oh[D],t=this._cullingMask),Z&&Ph(t,Z.mask)},isOrtho:function(){return"ortho"===this.s("camera.type")&&!this.isCube()},isCube:function(){return this.renderTarget&&this.renderTarget.isCube()},isPerspective:function(){return!this.isOrtho()},setViewMatrix:function(){var d=new L.Math.Matrix4,u=new L.Math.Euler;return function(m){var E=this;m.isMatrix4?E._viewMatrix.copy(m):E._viewMatrix.fromArray(m),d.getInverse(E._viewMatrix),E.p3(d.getPosition().toArray()),u.set(0,0,0,E.getRotationMode(),!0).setFromRotationMatrix(d),E.r3([u.x,u.y,u.z])}}(),getViewMatrix:function(D){var p=this,H=sd(null,null,p.r3(),p.getRotationMode(),p.p3()),h=p._viewMatrix;return h.fromArray(H).getInverse(h),h.toArray(D)},setProjectMatrix:function(B){var Z=this;B.isMatrix4?Z._projectMatrix.copy(B):Z._projectMatrix.fromArray(B),B=Z._projectMatrix.getElements(),Z.isOrtho()?Z.s({"camera.near":(B[14]+1)/B[10],"camera.far":(B[14]-1)/B[10],"camera.ortho.width":2/B[0]}):Z.s({"camera.near":B[14]/(B[10]-1),"camera.far":B[14]/(B[10]+1),"camera.fovy":2*Math.atan(1/B[5]),"camera.aspect":B[5]/B[0]}),Z._projectMatrixDirty=!1},onPropertyChanged:function($){var E=this;ii.superClass.onPropertyChanged.call(E,$);var Q=$.property;("s:camera.near"===Q||"s:camera.far"===Q||"s:camera.fovy"===Q||"s:camera.aspect"===Q||"s:camera.ortho.width"===Q)&&(E._projectMatrixDirty=!0)},getProjectMatrix:function(){var g=this;if(g._projectMatrixDirty){var G=g.gv,d=g.isCube(),n=d?1:g.s("camera.aspect")||(G?G.getAspect():null)||T.graph3dViewAspect,X=g.s("camera.near")||(G?G.getNear():null)||T.graph3dViewNear,A=g.s("camera.far")||(G?G.getFar():null)||T.graph3dViewFar,k=Wp();if(g.isOrtho()){var x=g.s("camera.ortho.width")||(G?G.getOrthoWidth():null)||T.graph3dViewOrthoWidth,c=x/2,F=c/n;fm(k,-c,c,-F,F,X,A)}else{var W=d?Math.PI/2:g.s("camera.fovy")||(G?G.getFovy():null)||T.graph3dViewFovy;cs(k,W,n,X,A)}g._projectMatrix.fromArray(k),g._projectMatrixDirty=!1}return g._projectMatrix.toArray()},lookAt:function(t,d){var b=this.p3();return t.x?this.lookAtDirection([t.x-b[0],t.y-b[1],t.z-b[2]],d):this.lookAtDirection([t[0]-b[0],t[1]-b[1],t[2]-b[2]],d)},lookAtDirection:function(){var B=new L.Math.Matrix4,k=new L.Math.Euler,a=new L.Math.Vector3,j=new L.Math.Vector3;return function(h,P){B.lookAtDirection(a.copy(h).multiplyScalar(-1),P?j.copy(P):j.set(0,1,0)),k.set(0,0,0,this.getRotationMode(),!0).setFromRotationMatrix(B),this.r3([k.x,k.y,k.z])}}(),updateAndRender:function(t){return t.syncRenderState(),t.updateScene(),this.render(t)},getSize:function(r){var f=this.renderTarget;if(f)return[f.width,f.height];if(!r)return[0,0];var Z=r.getDevicePixelRatio();return[r.getWidth()*Z,r.getHeight()*Z]},getWidth:function(b){return this.getSize(b)[0]},getHeight:function(d){return this.getSize(d)[1]},render:function(M){var s=this,i=M.getGL();if(!i)return!1;this._currentCullingMask=dl(this._cullingLayers,M.getRenderLayerInfoMap(),!0);var J=s.renderTarget,K=s.getSize(M);s.gv=M,M._camera=s;var v=M._frameState.renderState.glState,U=v.color.clear.slice(0);pk(i,s.s("camera.background"));var y=M.getEye;if(M.getEye=function(){return s.p3()},M.syncRenderState(),s.isCube())for(var D=ii.CubeDirectionParam,O=0;6>O;O++)J&&J.bind(i,O),M._18Q=null,s.lookAtDirection([D[6*O+0],D[6*O+1],D[6*O+2]],[D[6*O+3],D[6*O+4],D[6*O+5]]),s.s("camera.clear")!==!1&&i.clear(16384),M.setViewport(i,0,0,K[0],K[1]),s.s("camera.onlySky")?M.renderSky():M.renderScene({renderAxis:s.s("camera.renderAxis"),renderGrid:s.s("camera.renderGrid"),renderEdit:s.s("camera.renderEdit"),renderShadowMap:s.s("camera.renderShadowMap"),renderReflector:!1}),M._18Q=null,J&&J.unbind(i);else J&&J.bind(i),M._18Q=null,s.s("camera.clear")!==!1&&i.clear(16384),M.overlappingBox.clear(),M.setViewport(i,0,0,K[0],K[1]),s.s("camera.onlySky")?M.renderSky():M.renderScene({renderAxis:s.s("camera.renderAxis"),renderGrid:s.s("camera.renderGrid"),renderEdit:s.s("camera.renderEdit"),renderShadowMap:s.s("camera.renderShadowMap")}),M._18Q=null,J&&J.unbind(i);return M.getEye=y,pk(i,U),M._camera=null,s.gv=null,!0}});var _i=L.Block=function(){Ei(_i,this),this.s({"shadow.cast":!1,"shadow.receive":!1})};ik("Block",cj,{_icon:"block_icon",_clickThroughEnabled:!1,_syncSize:!0,_scaleMode:"2d",ms_ac:["clickThroughEnabled","syncSize","scaleMode"],getUIClass:function(){return pg},_22Q:function(){return qt},onChildAdded:function(){_i.superClass.onChildAdded.apply(this,arguments),this.updateFromChildren()},onChildRemoved:function(){_i.superClass.onChildRemoved.apply(this,arguments),this.updateFromChildren()},_getBoundingBox:function(){function n(B,S,Y){r.fromArray(Pn(S));var s=S.getAnchor3d();B.push((new ng).set(0-s.x,0-s.y,0-s.z).applyMatrix4(r).applyMatrix4(Y)),B.push((new ng).set(0-s.x,0-s.y,1-s.z).applyMatrix4(r).applyMatrix4(Y)),B.push((new ng).set(0-s.x,1-s.y,0-s.z).applyMatrix4(r).applyMatrix4(Y)),B.push((new ng).set(0-s.x,1-s.y,1-s.z).applyMatrix4(r).applyMatrix4(Y)),B.push((new ng).set(1-s.x,0-s.y,0-s.z).applyMatrix4(r).applyMatrix4(Y)),B.push((new ng).set(1-s.x,0-s.y,1-s.z).applyMatrix4(r).applyMatrix4(Y)),B.push((new ng).set(1-s.x,1-s.y,0-s.z).applyMatrix4(r).applyMatrix4(Y)),B.push((new ng).set(1-s.x,1-s.y,1-s.z).applyMatrix4(r).applyMatrix4(Y))}function U(i,d){var O=(new kc).makeRotationFromEuler(this.getEuler()).setPosition((new ng).fromArray(this.p3()));O.getInverse(O),i.forEach(function(D){Tk(D)&&n(d,D,O)})}var r=new kc;return function(Y,A){if(Y instanceof cj&&(Y=[Y]),!Y||0===Y.length)return C;var A=[];U.call(this,Y,A);var y=[1/0,1/0,1/0],t=[-1/0,-1/0,-1/0];return A.forEach(function(A){y[0]=Math.min(A.x,y[0]),y[1]=Math.min(A.y,y[1]),y[2]=Math.min(A.z,y[2]),t[0]=Math.max(A.x,t[0]),t[1]=Math.max(A.y,t[1]),t[2]=Math.max(A.z,t[2])}),{min:y,max:t}}}(),updateFromChildren:function(){var O=this;if(!dg&&!O._updatingToChildren&&O._syncSize&&0!==O.size()&&!O._freezeSyncFromChildren){var w=this._getBoundingBox(O.toChildren(Tk));if(w){O._updatingFromChildren=1;var q=(new ng).fromArray(this.getScale3d()),U=(new ng).fromArray(w.min),X=(new ng).fromArray(w.max),t=T.blockMinSize,G=new ng,g=X.clone().sub(U);0===g.x&&G.setX(.5),0===g.y&&G.setY(.5),0===g.z&&G.setZ(.5);var S=this._width==C||-1===this._width,K=new ng(this.getAnchor3d()),Z=q.clone().multiply((new ng).fromArray(this.s3())),p=g.clone();0===p.x&&p.setX(t),0===p.y&&p.setY(t),0===p.z&&p.setZ(t);var I=K.clone().multiply(Z),Q=I.clone().multiplyScalar(-1).sub(U).divide(p).add(I.divide(p)).add(G),r=this.s("keepPosition");if(S||this._anchorChanged||this._scaleChanged||!r){!S&&r&&(K=Q);var W=K.clone().multiply(g).add(U).applyEuler(this.getEuler()).add((new ng).fromArray(this.p3()));this.p3([W.x,W.y,W.z])}else this.setAnchor3d(Q.x,Q.y,Q.z);var M=new ng(1,1,1).divide(q).multiply(g);this.s3(Math.abs(M.x),Math.abs(M.y),Math.abs(M.z)),delete O._updatingFromChildren}}},setPosition:function(m,L){var b=this;if(!b._updatingToChildren){var S;S=2===arguments.length?{x:m,y:L}:m,dg||b._updatingFromChildren||(b._updatingToChildren=1,_k(b._children,S.x-b._position.x,S.y-b._position.y),delete b._updatingToChildren),_i.superClass.setPosition.call(this,S)}},setSize3d:function(){this.beginTransaction(),_i.superClass.setSize3d.apply(this,arguments),this.endTransaction()},setTall:function(B){var P=this;if(!P._updatingToChildren){this.beginTransaction(),B=h(B,T.blockMinSize);var R=P.getTall();if(B!==R&&_i.superClass.setTall.call(P,B),!dg&&!P._updatingFromChildren){P._updatingToChildren=1;var V=B/R;P._adjustChildTallOrScale(V,"size"),delete P._updatingToChildren,P.updateFromChildren()}this.endTransaction()}},setWidth:function(G){return this.setSize(G,this.getHeight())},setHeight:function(C){return this.setSize(this.getWidth(),C)},setSize:function(w,r){var J=T.blockMinSize;w=h(w,J),r=h(r,J);var v=this;if(!v._updatingToChildren){2!==arguments.length&&(r=w.height,w=w.width),this.beginTransaction();var l=v.getWidth(),F=v.getHeight();if(w!==l&&_i.superClass.setWidth.call(v,w),r!==F&&_i.superClass.setHeight.call(v,r),!dg&&!v._updatingFromChildren){v._updatingToChildren=1;var V=w/l,q=r/F;v._adjustChildScaleOrSize(V,q,"size"),delete v._updatingToChildren,v.updateFromChildren()}this.endTransaction()}},_adjustChildScaleOrSize:function(y,Y,h){var a=this;if(a._syncSize){var J=a.getPosition(),v=a.getRotation();a.eachChild(function(o){if(Tk(o)){var I=o.getPosition(),q=o.getRotation(),O=o.getWidth(),B=o.getHeight(),$=o.getScale(),W=$.x*O,Q=$.y*B;if(0!==W&&0!==Q){0>y*Y&&o.setRotation(-1*q);var S=new Ub(q,I.x,I.y,W,Q);S.translate(-J.x,-J.y),S.rotate(-v),q=Nn(S.b*Math.sign(W),S.a*Math.sign(W)),S.scale(y,Y);var d,u,N,r=t(q);if(Math.abs(r)<.001?(d=_(q),u=S.b/d,N=-S.c/d):(u=S.a/r,N=S.d/r),"scale"===h)o.setScale(u/O,N/B);else if("size"===h){var U=u/$.x,c=N/$.y;o.setScale(bd(u)*Math.abs($.x),bd(N)*Math.abs($.y)),o instanceof L.Shape?(o.setWidthForce(Math.max(Math.abs(U),1e-5)),o.setHeightForce(Math.max(Math.abs(c),1e-5))):o.setSize(Math.max(.01,Math.abs(U)),Math.max(.01,Math.abs(c)))}S.rotate(v),S.translate(J.x,J.y),o.setPosition(S.tx,S.ty)}}})}},_calcChangeFactor:function(j,P,r,J){var x,U,E,D;return x=A(j),U=A(r),E=x>U?x/U:U/x,x=A(P),U=A(J),D=x>U?x/U:U/x,h(E,D)},setElevation:function(q){var X=this;if(!X._updatingToChildren){var O=X.getElevation(),E=q-O;0!==E&&(dg||X._updatingFromChildren||(X._updatingToChildren=1,_k(X._children,0,E,0),delete X._updatingToChildren),_i.superClass.setElevation.apply(X,arguments))}},setScaleTall:function(f){var c=this;if(!c._updatingToChildren){var t=c.getScaleTall();if(A(f)<.01&&(f=.01*(bd(f)||bd(t))),"3d"===c._scaleMode){var v=c.getScale();return c.setScale3d(v.x,f,v.y),void 0}if(_i.superClass.setScaleTall.call(c,f),!dg&&!c._updatingFromChildren){c._updatingToChildren=1;var l=f/t;c._adjustChildTallOrScale(l,"scale"),delete c._updatingToChildren,c._scaleChanged=1,this.updateFromChildren(),delete c._scaleChanged}}},_adjustChildTallOrScale:function(A,H){var Y=this;if(Y._syncSize){var B=Y.getElevation();Y.eachChild(function(t){if(Tk(t)){if("size"===H){var b=t.getTall();0>A&&t.setScaleTall(-1*t.getScaleTall()),t.setTall(Math.max(.01,Math.abs(b*A)))}else{var L=t.getScaleTall();t.setScaleTall(L*A)}t.setElevation(B+(t.getElevation()-B)*A)}})}},setAnchor3d:function(){if(!this._updatingToChildren){this.beginTransaction();var h=_i.superClass.setAnchor3d.apply(this,arguments);return h&&!dg&&!this._updatingFromChildren&&this._syncSize&&(this._anchorChanged=1,this.updateFromChildren(),delete this._anchorChanged),this.endTransaction(),h}},setAnchor:function(){var k=this;if(!k._updatingToChildren){var S=k.getAnchor(),c=_i.superClass.setAnchor.apply(k,arguments);if(dg||k._updatingFromChildren||!k._syncSize)return c;k._updatingToChildren=1;var N=k.getAnchor(),G=k.getSize(),m=G.width*(S.x-N.x),w=G.height*(S.y-N.y),H=(new kc).compose(new ng,this.getQuaternion(),new ng(this.getScale3d())),U=new ng(m,0,w).applyMatrix4(H);return k.eachChild(function(D){if(Tk(D)){var q=new ng(D.p3());D.p3(q.add(U).toArray())}}),delete k._updatingToChildren,c}},setAnchorElevation:function(){var U=this;if(!U._updatingToChildren){var s=U.getAnchorElevation(),A=_i.superClass.setAnchorElevation.apply(U,arguments);if(dg||U._updatingFromChildren||!U._syncSize)return A;U._updatingToChildren=1;var H=U.getAnchorElevation(),C=U.getTall()*(s-H),j=(new kc).compose(new ng,this.getQuaternion(),new ng(this.getScale3d())),R=new ng(0,C,0).applyMatrix4(j);return U.eachChild(function(S){if(Tk(S)){var T=new ng(S.p3());S.p3(T.add(R).toArray())}}),delete U._updatingToChildren,A}},setRotation:function(x){this._updateChildrenRotation3d("rotation",x)},setRotationX:function(c){this._updateChildrenRotation3d("rotationX",c)},setRotationZ:function(p){this._updateChildrenRotation3d("rotationZ",p)},setRotation3d:function(){var i=this;if(!i._updatingToChildren){var S=i.r3();_i.superClass.setRotation3d.apply(i,arguments);var J=i.r3();dg||i._updatingFromChildren||(i._updatingToChildren=1,i.eachChild(function(I){Tk(I)&&I.syncRotation3d(i,J,S)}),delete i._updatingToChildren)}},_updateChildrenRotation3d:function(S,u){var N=this;if(!N._updatingToChildren){var Y=N[Dm(S)]();_i.superClass[Ro(S)].call(N,u),dg||N._updatingFromChildren||this._updateRotationToChildren(S,u-Y)}},_updateRotationToChildren:function(J,c){var E=this;E._updatingToChildren=1,E.eachChild(function(W){Tk(W)&&W._11Q(E,J,c)}),delete E._updatingToChildren},setScale:function(L,$){var l=this;if(!l._updatingToChildren){null==$&&($=L.y,L=L.x);var p=l.getScale();if(A(L)<.01&&(L=.01*(bd(L)||bd(p.x))),A($)<.01&&($=.01*(bd($)||bd(p.y))),"3d"===l._scaleMode)return l.setScale3d(L,l.getScaleTall(),$),void 0;if(_i.superClass.setScale.call(l,L,$),!dg&&!l._updatingFromChildren){l._updatingToChildren=1;var s=L/p.x,D=$/p.y;l._adjustChildScaleOrSize(s,D,"scale"),delete l._updatingToChildren,l._scaleChanged=1,l.updateFromChildren(),delete l._scaleChanged}}},onPropertyChanged:function(b){_i.superClass.onPropertyChanged.call(this,b),"s:3d.visible"===b.property&&this._invalidateChildrenBatch()},_invalidateChildrenBatch:function(){this.eachChild(function(A){(A.s("batch")||A.s("wf.geometry")||A.s("wf.visible"))&&A.iv(),A instanceof _i&&A._invalidateChildrenBatch()})},getSerializableProperties:function(){var F=_i.superClass.getSerializableProperties.call(this);return F.clickThroughEnabled=1,F.syncSize=1,F.scaleMode=1,F},setScale3d:function(){var M=new ng,g=new ng,s=new ng,k=new kc,z=new $d,n=new ng;return function(O,a,A){var Y,G=this;if(Y="number"==typeof O?{x:O,y:a,z:A}:O.length?{x:O[0],y:O[1],z:O[2]}:O,"3d"!==G._scaleMode)return _i.superClass.setScale3d.apply(G,arguments),void 0;if(G._syncSize&&0!==G.size()){var T=G.getMatrix4();T.getInverse(T),_i.superClass.setScaleTall.call(G,Y.y),_i.superClass.setScale.call(G,Y.x,Y.z);var e=G.getMatrix4();dg||G._updatingFromChildren||(G._updatingToChildren=1,G.eachChild(function(F){if(Tk(F)){if(g.fromArray(F.s3()),F instanceof L.Polyline){var G=F.getThickness();g.x=g.x||G,g.y=g.y||G,g.z=g.z||G,n.copy(F.getScale3d()).multiplyScalar(G),F.getQuaternion(z),M.copy(F.p3()),s.copy(F.getFinalScale3d()),s.x=s.x||n.x,s.y=s.y||n.y,s.z=s.z||n.z,k.compose(M,z,s)}else F.getMatrix4(k);k.premultiply(T).premultiply(e),k.decompose(M,z,s),s.divide(g),F.setQuaternion(z),F.p3(M.toArray()),F.setScale3d(s.toArray())}}),delete G._updatingToChildren,G._scaleChanged=1,G.updateFromChildren(),delete G._scaleChanged)}}}()});var lr=L.Grid=function(){Ei(L.Grid,this)};ik("Grid",cj,{IRotatable:!1,_icon:"grid_icon",_image:C,getUIClass:function(){return Hf},setRotation:function(){},getCellRect:function($,g){var m=this,s=m.s("grid.row.count"),q=m.s("grid.column.count");if(0>=s||0>=q||0>$||$>=s||0>g||g>=q)return C;var j,I,w,L=m.getRect(),u=m.s("grid.row.percents"),V=m.s("grid.column.percents");if(bm(L,m,"grid.border",-1),u&&u._as&&(u=u._as),V&&V._as&&(V=V._as),u&&u.length===s){for(w=0,j=0;$>j;j++)w+=L.height*u[j];L.y+=w,L.height=L.height*u[$]}else L.height=L.height/s,L.y+=L.height*$;if(V&&V.length===q){for(I=0,j=0;g>j;j++)I+=L.width*V[j];L.x+=I,L.width=L.width*V[g]}else L.width=L.width/q,L.x+=L.width*g;return Sb(L,-m.s("grid.gap")),L}});var Hr=L.Text=function(){Ei(Hr,this),this.setSize(100,50),this.s("text","TEXT")};ik("Text",cj,{_icon:"text_icon",_image:"__text__",getUIClass:function(){return ih},setWidth:function(D){D||(D=.001),Hr.superClass.setWidth.call(this,D)},setHeight:function(Q){Q||(Q=.001),Hr.superClass.setHeight.call(this,Q)},toLabel:function(){return this._displayName||this._name||this.s("text")}}),wg("__text__",{width:{value:100,isSafeFunc:!0,func:function(O){return O?O._width:100}},height:{value:50,isSafeFunc:!0,func:function(R){return R?R._height:50}},comps:[{type:"text",relative:!0,rect:[0,0,1,1],text:{func:"style@text"},align:{func:"style@text.align"},vAlign:{func:"style@text.vAlign"},color:{func:"style@text.color"},font:{func:"style@text.font"},shadow:{func:"style@text.shadow"},shadowColor:{func:"style@text.shadow.color"},shadowBlur:{func:"style@text.shadow.blur"},shadowOffsetX:{func:"style@text.shadow.offset.x"},shadowOffsetY:{func:"style@text.shadow.offset.y"},scaleX:{func:"style@text.scale.x"},scaleY:{func:"style@text.scale.y"},gradient:{func:"style@text.gradient"},gradientColor:{func:"style@text.gradient.color"},gradientPack:{func:"style@text.gradient.pack"},decoration:{func:"style@text.decoration"},vertical:{func:"style@text.vertical"},verticalGap:{func:"style@text.vertical.gap"},wrap:{func:"style@text.wrap"},letterGap:{func:"style@text.letter.gap"},borderWidth:{func:"style@text.border.width"},borderColor:{func:"style@text.border.color"}}]});var wn=L.Shape=function(){Ei(wn,this),this._59O=new Dg};wn.__de__=Kh,ik("Shape",cj,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return qh},_22Q:function(){return st},getLength:function(W){return Mc(Pk(this._59O,this._58O,W,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var a=this._58O;return a?new Dg(a._as.slice(0)):a},setSegments:function(K){var f=this._58O;K=K?Tl(K)?new Dg(K.slice(0)):new Dg(K._as.slice(0)):null,(f&&K&&f._as.join(",")!==K._as.join(",")||f!==K)&&(this._58O=K,this.fp("segments",f,K))},getPoints:function(){return this._59O},toPoints:function(){var y=this._59O;return new Dg(y._as.slice(0))},getPointsMatrix2d:function(){var P=this,U=new Of.Matrix2d,E=P.getPosition(),l=P.getScale(),z=P.getRotation();return U.translate(-E.x,-E.y).scale(l.x,l.y).rotate(z).translate(E.x,E.y),U},getPointsMatrix3d:function(){return function(){var s=this,W=new Of.Matrix4,H=W.getElements(),E=s.p3();Zm(H,E),Ap(H,s.getFinalRotation3d(),s.getRotationMode());var c=s.getScale3d(),n=s._dynamicScale3d;return n&&(c[0]*=n[0],c[1]*=n[1],c[2]*=n[2]),ag(H,c),Zm(H,nc(E)),W}}(),setPoints:function(W,d){var t=this,M=t._59O;W=W?Tl(W)?new Dg(W.slice(0)):new Dg(W._as.slice(0)):new Dg;var r,j,Q,R,T,D;d&&(r=t.getPosition(),D=new Ub(t.getRotation(),0,0,t.getScale().x,t.getScale().y)),(M&&W&&M._as.join(",")!==W._as.join(",")||M!==W)&&(t._59O=W,t.fs(),t.fp("points",M,W)),d&&(j=t.getPosition(),Q=j.x-r.x,R=j.y-r.y,T=D.tf(Q,R),t.setPosition(j.x-Q+T.x,j.y-R+T.y))},setPoints3d:function(b,L){var E=new ng(this.p3()),Z=this.getPointsMatrix3d();if(Z.setPosition(new ng),Aj.superClass.setPoints.call(this,b),L){var y=new ng(this.p3()),d=y.clone().sub(E).applyMatrix4(Z);E.add(d),this.p3(E.x,E.y,E.z)}},addPoint:function(t,W,u){var l=this.toPoints();l.add(t,W),this.setPoints(l,u)},setPoint:function(Y,X,C){var r=this.toPoints();r.set(Y,X),this.setPoints(r,C)},removePointAt:function(T){var p=this.toPoints();p.removeAt(T),this.setPoints(p)},setWidthForce:function(m){var k=this;if(!k._55I&&!dg&&k.getWidth()){k._55I=1;var X=k._position.x,Y=m/k.getWidth(),d=k.toPoints(),C=new Dg;1!==Y&&(d.each(function(w){C.add({x:(w.x-X)*Y+X,y:w.y,e:w.e})}),k.setPoints(C),rb(k,[Y,0,0,1,X*(1-Y),0]),k.fs()),delete k._55I}wn.superClass.setWidth.call(k,m)},setWidth:function(c){return this.setWidthForce(no>c?no:c)},setHeightForce:function(K){var L=this;if(!L._55I&&!dg&&L.getHeight()){L._55I=1;var h=L._position.y,m=K/L.getHeight(),d=L.toPoints(),g=new Dg;1!==m&&(d.each(function(c){g.add({x:c.x,y:(c.y-h)*m+h,e:c.e})}),L.setPoints(g),rb(L,[1,0,0,m,0,h*(1-m)]),L.fs()),delete L._55I}wn.superClass.setHeight.call(L,K)},setHeight:function(E){return this.setHeightForce(no>E?no:E)},setAnchorElevation:function(P){var D=this;D._55I=!0;var T=D._updatingAnchor3d,l=!dg&&!T;if(l){var a,z=P,O=D.getAnchorElevation(),U=D.getTall();a=U*(O-z),0!==a&&D.shiftPointsElevation(a)}var V=wn.superClass.setAnchorElevation.apply(D,arguments);return T||delete D._55I,V},getShapeElevation:function(){var P=this,Z=P._54O;return Z-(P.getTall()||0)*(P._anchorElevation-.5)},setAnchor3d:function(W,K,q,o){var Z,x=this;if("number"==typeof W?Z={x:W,y:K,z:q}:(Z=W.length?{x:W[0],y:W[1],z:W[2]}:W,o=K),x._55I=!0,x._updatingAnchor3d=!0,x.beginTransaction(),!dg){var L=x.getAnchor3d(),z=x.getSize(),y=x.getTall(),P=z.width*(L.x-Z.x),l=z.height*(L.z-Z.z),p=y*(L.y-Z.y);o||x.shiftPoints(P,l,p);var s=x.p3()}var _=wn.superClass.setAnchor3d.apply(x,arguments);if(!dg&&o){var c=x.p3();x.shiftPoints(c[0]-s[0]+P,c[2]-s[2]+l,c[1]-s[1]+p)}return x.endTransaction(),delete x._updatingAnchor3d,delete x._55I,_},setAnchor:function(E,f,O){var _=this;_._55I=!0;var t=_._updatingAnchor3d,e=!dg&&!t;if(e){var s,G,d;"number"==typeof E?d={x:E,y:f}:(d=E.length?{x:E[0],y:E[1]}:E,O=f);var K=_.getAnchor(),R=_.getSize();s=R.width*(K.x-d.x),G=R.height*(K.y-d.y),O||_.shiftPoints(s,G);var c=_.getPosition()}var U=wn.superClass.setAnchor.apply(_,arguments);if(e){var u=_.getPosition();O&&_.shiftPoints(u.x-c.x+s,u.y-c.y+G)}return t||delete _._55I,U},shiftPoints:function(r,Q,_){if(r||Q||_){var I=this,i=I.getElevation()||0,T=I.toPoints(),N=new Dg;T.each(function(X){var z=X.e;_&&(z=(z==C?i:z)+_),N.add({x:X.x+r,y:X.y+Q,e:z})}),I.setPoints(N),I.fs()}},shiftPointsElevation:function(L){return this.shiftPoints(0,0,L)},setPosition:function(N,s){var a,i=this;if(!i._28Q){if(i._28Q=1,!i._55I&&!dg){a=2===arguments.length?{x:N,y:s}:N;var A=a.x-i._position.x,V=a.y-i._position.y;if(0===A&&0===V)return delete i._28Q,void 0;i._55I=1,i.shiftPoints(A,V),rb(i,[1,0,0,1,A,V]),delete i._55I}wn.superClass.setPosition.apply(i,arguments),delete i._28Q}},fs:function(){this.fireShapeChange()},_70I:function(){var N=this;if(2!==N._59O.size())return!1;var c=N._58O;return c?2===c.size()&&1===c.get(0)&&2===c.get(1)?!0:!1:!0},fireShapeChange:function(){var n=this;if(!n._55I&&!dg){var Q=Jm(n._59O);Q&&(n._55I=1,n.setRect(Q),delete n._55I)}n.fp(am,!1,!0)},getSerializableProperties:function(){var z=wn.superClass.getSerializableProperties.call(this);return z.segments=1,z.points=1,z.thickness=1,z.closePath=1,z}});var Zc=L.Points=function(){Ei(Zc,this)};ik("Points",cj,{_59O:[],_colors:[],_sizes:[],_uvoffsets:[],_22Q:function(){return tt},getPoints:function(){return this._59O},setPoints:function(J){var t=this._59O;J=J?J.slice(0):[];var x=J[0];if(ah(x)){var f=J;J=[];for(var L=0,T=f.length;T>L;L+=3)J.push({x:f[L],e:f[L+1],y:f[L+2]})}this._59O=J,this._pointsDirty=!0,this.fp("points",t,this._59O)},setPoint:function(N,j){var e=this._59O.slice(0);e[N]=j,this.setPoints(e)},addPoint:function(B){this.setPoint(this._59O.length,B)},getColors:function(){return this._colors},setColors:function(i){var E=this._colors;i=i?i.slice(0):[],this._colors=i,this._colorsDirty=!0,this.fp("colors",E,i)},setPointColor:function(K,J){var Q=this._colors.slice(0);Q[K]=J,this.setColors(Q)},getSizes:function(){return this._sizes},setSizes:function(V){var q=this._sizes;V=V?V.slice(0):[],this._sizes=V,this._sizesDirty=!0,this.fp("sizes",q,this._sizes)},setPointSize:function(s,a){var X=this._sizes.slice(0);X[s]=a,this.setSizes(X)},getUvoffsets:function(){return this._uvoffsets},setUvoffsets:function(f){var Y=this._uvoffsets;f=f?f.slice(0):[],this._uvoffsets=f,this._offsetsDirty=!0,this.fp("uvoffsets",Y,this._uvoffsets)},setPointUvoffset:function(Y,e,b){var x;"object"==typeof e?(x=e[0],b=e[1]):x=e;var V=this._uvoffsets.slice(0);V[2*Y+0]=x,V[2*Y+1]=b,this.setUvoffsets(V)},getPointInfo:function(x){var E=this.getPoints();if(!E||E[x]==C)return C;var t=E[x],r=[t.x,t.e,t.y],z=this.mat||Pn(this),m=[r[0],r[1],r[2]];Zg(m,z);var g=this.getColors(),f=g[x]||this.s("points.color"),o=this.getSizes(),N=o[x];return{size:N==C?this.s("points.size"):N,color:f,local:r,world:m}},getSerializableProperties:function(){var t=Zc.superClass.getSerializableProperties.call(this);return t.points=1,t.colors=1,t.sizes=1,t.uvoffsets=1,t},onPropertyChanged:function(Q){Zc.superClass.onPropertyChanged.call(this,Q);var c=Q.property;"s:points.color"===c?this._colorsDirty=!0:"s:points.size"===c?this._sizesDirty=!0:"s:points.model"===c&&(this._modelDirty=!0)},getWidth:function(){var E=this;if(E._width>=0)return E._width;var R=E.getStyle("points.model");if(R){var z=Uf(R);if(z&&z.rawS3)return z.rawS3[0]}return 1},getHeight:function(){var a=this;if(a._height>=0)return a._height;var r=a.getStyle("points.model");if(r){var u=Uf(r);if(u&&u.rawS3)return u.rawS3[2]}return 1},getTall:function(){var x=this;if(x._tall>=0)return x._tall;var q=x.getStyle("points.model");if(q){var X=Uf(q);if(X&&X.rawS3)return X.rawS3[1]}return 1}});var Aj=L.Polyline=function(){Ei(Aj,this),this.s({"shape.background":null,"shape.border.width":2})};ik("Polyline",wn,{_icon:"polyline_icon",_22Q:function(){return wt},getUIClass:function(){return Qn},setClosePath:function(){},setTall:function(z){var m=this;if(m.beginTransaction(),!m._55I&&!m._24Q&&!dg&&m.getTall()){m._24Q=1;var o=m._54O,Z=z/m.getTall();if(1!==Z){var j=m.toPoints(),t=new Dg;j.each(function(H){t.add({x:H.x,y:H.y,e:H.e==C?H.e:(H.e-o)*Z+o})}),m.setPoints(t),m.fs()}delete m._24Q}Aj.superClass.setTall.call(m,z),m.endTransaction()},setElevation:function(c){var J=this;if(J.beginTransaction(),!J._55I&&!J._24Q&&!dg){J._24Q=1;var $=c-J._54O;0!==$&&J.shiftPointsElevation($),delete J._24Q}Aj.superClass.setElevation.apply(J,arguments),J.endTransaction()},fireShapeChange:function(){var P=this,D=P._59O;if(!P._55I&&!P._24Q&&!dg){var p=D.size();if(p){var s=1,U=D.get(0),g=P._54O;U.e==C&&(U.e=g);for(var _=U.e,x=0;p>s;s++){U=D.get(s),U.e==C&&(U.e=g);var W=r(_,U.e),a=h(_+x,U.e);_=W,x=a-W}P._24Q=1,P.setTall(x),P.setElevation(_+x*P._anchorElevation),delete P._24Q}}Aj.superClass.fireShapeChange.apply(P,arguments)},onPropertyChanged:function(){var t={};return["points","segments","thickness","position","elevation","rotation","rotationX","rotationZ","rotationMode","scale","scaleTall","s:shape.border.color","s:shape.border.gradient.color","s:shape.border.pattern","s:shape.dash","s:shape.dash.color","s:shape.dash.pattern","s:shape.dash.offset","s:shape.dash","s:shape.dash","s:3d.clip.direction","s:repeat.uv.length","s:body.color","s:shape3d","s:shape3d.visible","s:shape3d.image","s:shape3d.smooth","s:shape3d.resolution","s:shape3d.color","s:shape3d.blend","s:shape3d.side","s:shape3d.start.angle","s:shape3d.sweep.angle","s:shape3d.top.cap","s:shape3d.top.image","s:shape3d.top.visible","s:shape3d.top.color","s:shape3d.bottom.cap","s:shape3d.bottom.image","s:shape3d.bottom.visible","s:shape3d.bottom.color","s:shape3d.from.visible","s:shape3d.from.color","s:shape3d.to.visible","s:shape3d.to.color","s:shape3d.uv.union"].forEach(function(G){t[G]=!0}),function(u){Aj.superClass.onPropertyChanged.call(this,u),t[u.property]&&(this._needChangeGeometry=!0)}}()});var ms=L.SubGraph=function(){Ei(ms,this)};ik("SubGraph",cj,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){ms.superClass._8I.call(this),this.eachChild(function(f){Tk(f)&&f._8I()})}}),T.loadingRefGraph=0;var uo=L.RefGraph=function(){Ei(uo,this)};ik("RefGraph",_i,{_icon:"refGraph_icon",getRef:function(){return this._ref},setRef:function(p){var R=this._ref;this._ref=p,this.fp("ref",R,p),this.updateRef()},_21I:function(){uo.superClass._21I.apply(this,arguments),this.updateRef()},updateRef:function(){var V=this;if(T.loadingRefGraph++,V.clearChildrenFromDataModel(),T.loadingRefGraph--,V._ref&&V._dataModel){V._xhrLoadHandler&&(V._xhrLoadHandler.cancel=!0);var $=dg,h=V._xhrLoadHandler=function(H){if(H&&V._dataModel){T.loadingRefGraph++;var G=V._pendingUpdateInfo={needToRestore:$};
$&&(G.p3=V.p3(),G.s3=V.s3(),G.r3=V.r3(),G.anchor3d=V.getAnchor3d(),G.scale3d=V.getScale3d()),V.r3(0,0,0),V.setScale3d(1,1,1),V.setAnchor3d(.5,.5,.5),V.p3(0,0,0);var L=T.parse(H),w=V._dataModel.deserialize(L,V,{justDatas:!0});w.each(function(C){C._refGraph=V}),V.checkPendingUpdateInfo(),T.loadingRefGraph--,T.handleRefGraphLoaded(V,w,L)}};h.xhrLoadCalled=!1,T.load(V._ref,function(p){h.cancel||(h.xhrLoadCalled?h(p):ef(function(){h(p)}))}),h.xhrLoadCalled=!0}},checkPendingUpdateInfo:function(){var o=this,M=o._pendingUpdateInfo;if(!M)return o.onPendingUpdated&&(T.loadingRefGraph++,o.onPendingUpdated(),T.loadingRefGraph--),void 0;var W=!0;this.eachChild(function(w){(w._pendingCheckImageJSON||w._pendingUpdateInfo)&&(W=!1)}),W&&(T.loadingRefGraph++,o._pendingUpdateInfo=null,o.updateFromChildren(),M.needToRestore&&(o.setAnchor3d(M.anchor3d),o.setScale3d(M.scale3d),o.r3(M.r3),o.p3(M.p3)),this.getParent()instanceof uo&&this.getParent().checkPendingUpdateInfo(),o.onPendingUpdated&&o.onPendingUpdated(),T.loadingRefGraph--)},getSerializableProperties:function(){var f=uo.superClass.getSerializableProperties.call(this);return f.ref=1,f}}),L.EdgeGroup=function(k,M){this._70O=k,this._siblings=M;for(var N,w,h=0,b=k.size(),o=i[Pe];b>h;h++)if(N=k.get(h).getStyle(Pe,!1),N!=C){o=N;break}o==C&&(o=!0);var G=T.edgeGroupAgentFunc;for(G&&(w=G(k),w&&w!==k.get(0)&&(k.remove(w),k.add(w,0))),h=0;b>h;h++)k.get(h).s(Pe,o)},ik("EdgeGroup",b,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(W){return this._70O.get(W)},indexOf:function(o){return this._70O.indexOf(o)},each:function(U,Q){this._70O.each(U,Q)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(V,O){this._siblings.each(function(y){y._70O.each(V,O)})}});var Ab=function(Z,W,g){var N=xk[Z]={type:Z,action:W};if(g)for(var T in g)N[T]=g[T]};yd(T,{setConnectAction:Ab,getConnectAction:function(M,C){if(!C){if(!M)return null;C=M.getCurrentConnectActionType()}return xk[C]},doConnectAction:function(A,h,L,X){X=X||A.getCurrentConnectActionType();var y=xk[X];if(!y)return!1;var P=y.action;return P?(h instanceof sf.Group?A.sm().getSelection().each(function(D){P.call(null,A,D,L)}):P.call(null,A,h,L),!0):!1},doDeleteConnectionAction:function($,O,S){S=S||$.getCurrentConnectActionType();var E=xk[S];if(!E||!E.delete)return!1;var a=E.delete.action;return a?(O instanceof sf.Group?$.sm().getSelection().each(function(k){a.call(null,$,k)}):a.call(null,$,O),!0):!1}});var pd=L.JSONSerializer=function(Y,O){this.dm=this._dataModel=Y,this._hierarchical=T.forceHierarchicalSerialization?!0:O==C?Y.isHierarchicalRendering():O};ik("JSONSerializer",b,{ms_ac:["hierarchical"],serialize:function(C){return T.stringify(this.toJSON(),C)},toJSON:function(){var N,e=this,B=e.dm,n=B.getRoots(),t=e.json={v:T.getVersion(),p:{},a:{},d:[]},d=B.getSerializableAttrs();(N=B.getInit())&&(t.init=N),(N=B.getName())&&(t.p.name=N),(N=B.getBackground())&&(t.p.background=N),(N=B.getLayers())&&(t.p.layers=N),(N=B.getEnvmap())&&(t.p.envmap=N),(N=B.getEnvmapType())&&(t.p.envmapType=N),t.p.autoAdjustIndex=B.isAutoAdjustIndex(),t.p.hierarchicalRendering=B.isHierarchicalRendering();for(var i in d){var O=B.a(i);O!==H&&e[Un](i,O,t.a)}return ss(t.a)&&delete t.a,e._hierarchical?n.each(e.serializeData,this):B.each(function(q){e.serializeData(q)}),B.fireSerializeEvent({type:"serialize",json:t}),B.getPostProcessingData()&&(t.p.postProcessingData=B.getPostProcessingData()),t},isSerializable:function(){return!0},getProperties:function(m){return m.getSerializableProperties()},getStyles:function(k){return k.getSerializableStyles()},getAttrs:function(n){return n.getSerializableAttrs()},serializeData:function(O){var a=this;if(a.isSerializable(O)&&!O._refGraph){var V,z,J,x,I,M,e=ue(O.getClassName())||O.getClass(),l=new e,W={c:O.getClassName(),i:O.getId(),p:{},s:{},a:{}};a.json.d.push(W),V=a.getProperties(O);for(z in V)if(/^_/.test(z)){if(J=O[z],!("_width"!==z&&"_height"!==z||J!=C&&-1!==J)){if(I==H){var U;M=(O.s("layout.h")||O.s("layout.v"))&&O.getHost()||O instanceof L.Node&&(U=O.getParent())&&U instanceof L.Block||O.s("fullscreen"),I=O.hasInheritedSize()}M&&I&&(J=O[z]="_width"===z?O.getWidth():O.getHeight())}J!==l[z]&&a[Un](z.substr(1),J,W.p)}else x=Dm(z),O[x]&&(J=O[x](),J!==l[x]()&&a[Un](z,J,W.p));V=a.getStyles(O);for(z in V)J=O.s(z),J!==l.s(z)&&a[Un](z,J,W.s);V=a.getAttrs(O);for(z in V)J=O.a(z),J!==l.a(z)&&a[Un](z,J,W.a);ss(W.p)&&delete W.p,ss(W.s)&&delete W.s,ss(W.a)&&delete W.a}a._hierarchical&&O.getChildren().each(a.serializeData,a)},serializeValue:function(M,l,S){Ur(l)?l={__a:l._as}:l instanceof Iq?l={__i:l.getId()}:l instanceof cr&&(l={__dm:l.serialize(0)}),S[M]=l},deserialize:function(M,V,E){var Z=this;return jm(M)&&/.json$/.test(M)?(T.xhrLoad(M,function(F){Z.deserializeImpl(F,V,E)}),void 0):Z.deserializeImpl(M,V,E)},deserializeImpl:function(x,b,Z){var M=this,N=M.dm;N.setDeserializing(!0),Z=nn(Z)?{setId:Z}:mq(Z)?{finishFunc:Z}:Z||{},x=M.json=jm(x)?T.parse(x):x,!Z.justDatas&&x.a&&x.a.onPreDeserialize&&!Z.disableOnPreDeserialize&&x.a.onPreDeserialize(x,N,Z.view),N.beginTransaction(),dg++,M._82I={};var v=new Dg,V=new Dg,m=0,z=x.d.length;if(Z.justDatas||(!Z.disableInit&&mq(x.init)&&x.init(N),N.setInit(x.init)),!Z.justDatas){for(var g in x.a)N.a(g,M[Xc](x.a[g]));for(var i in x.p)N[Ro(i)](x.p[i])}for(;z>m;m++){var f=x.d[m],J=ue(f.c),o=new J,B=f.i;Z.setId&&B!=C&&(o._id=B),M._82I[B]=o,v.add(o),V.add(f)}for(m=0;z>m;m++)M.deserializeData(v.get(m),V.get(m));return v.each(function(Y){b&&!Y.getParent()&&Y.setParent(b),N.add(Y)}),Z.__innerHandler__&&Z.__innerHandler__(x,N,Z.view,v),N.fireSerializeEvent({type:"deserialize",json:x}),dg--,N.endTransaction(),!Z.justDatas&&x.a&&x.a.onPostDeserialize&&!Z.disableOnPostDeserialize&&x.a.onPostDeserialize(x,N,Z.view,v),Z.finishFunc&&Z.finishFunc(x,N,Z.view,v),N.setDeserializing(!1),v},deserializeData:function(J,G){for(var h in G.p)J[Ro(h)](this[Xc](G.p[h]));for(h in G.s)J.s(h,this[Xc](G.s[h]));for(h in G.a)J.a(h,this[Xc](G.a[h]))},deserializeValue:function(H){if(oc(H)){var I=H.__i;if(I!=C)return this._82I[I];if(I=H.__dm,I!=C){var Z=new L.DataModel;return Z.deserialize(I),Z}if(I=H.__a,Tl(I))return new Dg(I)}return H}}),yd(cr,{serialize:function(R,K){return new pd(this,K).serialize(R)},toJSON:function(X){return new pd(this,X).toJSON()},deserialize:function(A,F,O){return new pd(this).deserialize(A,F,O)}});var Xf=L.OverlappingBox=function(e){this.gv=e,this.boxes={}};ik("OverlappingBox",b,{clear:function(){var K,T,n=this.boxes;for(K in n)T=n[K],T.length=0},isOverlapping:function(y,e){var _,S,M=this,b=M.boxes,X=b[y];X?(_=X.rects,S=X.length):X=b[y]={rects:_=[],length:S=0};var P,v,e;for(P=0;S>P;P++)if(v=_[P],v.x<e.x+e.w&&v.x+v.w>e.x&&v.y<e.y+e.h&&v.h+v.y>e.y)return!0;return _.length<=S?(_.push(e),X.length++):_[X.length++]=e,!1}}),yd(T,{fetch:function(Z,O){O=O||{},Z.open(O.method||"GET",O.url||"",!(null!=O.sync?O.sync:!1)),"json"===O.dataType&&Z.setRequestHeader("Content-Type","application/json"),O.responseType&&(Z.responseType=O.responseType),Z.send(O.data)},convertImageSrc:function(z,h){h&&"function"==typeof h||(h=function(){}),h(z)}});var qg=L.Request=function(){};ik("Request",b,{_mimeType:H,getXhr:function(){return this._xhr||(this._xhr=new XMLHttpRequest,this.overrideMimeType("text/plain")),this._xhr},send:function(Y){var j=this.getXhr();Y.mimeType&&this.overrideMimeType(Y.mimeType),j.onload=this.onload,j.onerror=this.onerror,T.fetch(j,Y)},onload:function(){},onerror:function(){},getResponseType:function(){return this.getXhr().responseType},setOverrideMimeType:function(d){this.overrideMimeType(d)},getMimeType:function(){return this._mimeType},overrideMimeType:function(e){this.getXhr().overrideMimeType(this._mimeType=e)},getResponseHeader:function(x){return this.getXhr().getResponseHeader(x)},getResponseText:function(){var L=this.getXhr();return L.response||L.responseText},getStatus:function(){return this.getXhr().status}});var Um={},Xe={},Rp={},ce={},tb=function(T){for(var V in Rp){var x=Rp[V];x&&!T["_loading_"+V+"_"]&&(ce[V][T["_loading_"+V+"_"]=Eb()]=T)}},mn=function(w,h){var r=Rp[w]={},X=Um[w]={},k=ce[w]={},D=w.charAt(0).toUpperCase()+w.substr(1);h=h||gc;var E=h.handleLoaded||zj,Y=function(M,L){var x;if((x=E(M,L))&&(L=x),X[M]=L,delete r[M],ss(r)&&k){for(var K in k){var m=k[K];m.invalidateAll&&m.invalidateAll(H,w+"Loaded",M),m.redraw&&m.redraw(),m.iv(),delete m["_loading_"+w+"_"]}return k=ce[w]={},void 0}if(L&&!ss(k))for(var K in k){var m=k[K];m.invalidateAll&&m.invalidateAll(H,w+"Loading",M),m.redraw&&m.redraw(),m.iv()}},A="load"+D+"ByURL";if(Xe[A]=function(f,m){if(m=m||f,m&&!r[f]){var Z=new qg;r[f]={request:Z,url:m};var X=!1;if("string"==typeof m&&(X=bl.test(m),m=T.beforeLoadURL(m,f)),m.data){var g=m.data;X&&g&&(g=T.parse(g)),Y(f,g),g&&T["handle"+D+"Loaded"](f,g)}else{Z.onload=function(){if(200===this.status||0===this.status){var P=Z.getResponseText();X&&(P=T.parse(P)),Y(f,P),T["handle"+D+"Loaded"](f,P)}else Y(f,C)},Z.onerror=function(){Y(f,C)};var d={};if(d.url=encodeURI(m),d.sync=!1,h.loadingParam)for(var t in h.loadingParam)d[t]=h.loadingParam[t];Z.send(d)}}},T["get"+D]=function(d){var s=X[d];return s===H&&Xe[A](d),s},T["get"+D+"Map"]=function(){return X},"shader"==w){var x=function(Y,K){K&&null!==K.data&&(X[Y]=null,Hm[Y]=null),Xe[A](Y,K)};T.setShader=function(I,f,C){if(jm(f)&&f.match(/\/\/ *FS/i))Hm[I]=null,X[I]=f;else if(jm(f)&&jm(C)){var y,i,g=0,J=function(){g>0||(r[I]=null,y&&i?x(I,{data:y+"\n// FS\n"+i}):x(I,{data:null}))};f.match(/void\s+main/i)?y=f:(g++,T.xhrLoad(f,function(O){y=O,g--,J()})),C.match(/void\s+main/i)?i=C:(g++,T.xhrLoad(C,function(p){i=p,g--,J()})),g&&(r[I]={}),J()}else x(I,f)}}else T["set"+D]=function(q,Z){jm(Z)&&Z.substr(0,12)==oi&&(Z=T.parse(Z)),mq(Z)||oc(Z)?X[q]=Z:Xe[A](q)};T["handle"+D+"Loaded"]=function(){}};T.registerResourceLoader=function(L,g){mn(L,g)},gi.GraphView=function(S){var h=this;h._24I={},h._34I=new Dg,h.enableDirtyRect(),h._25I={},h._56I={},h._view=eh(1,h),h._canvas=uc(h._view),h.dm(S?S:new cr),this._coreInteractor=new Jc(this),h.setEditable(!1),h.setScrollBarVisible(T.graphViewScrollBarVisible),h._initView()},$l("GraphView",b,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:[vl,di,tp,dr,"resettable","editInteractor",an,"zoomable","pannable","rectSelectable","autoScrollZone",mh,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","anchorEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_zoomable:T.graphViewZoomable,_resettable:T.graphViewResettable,_pannable:T.graphViewPannable,_rectSelectable:T.graphViewRectSelectable,_autoScrollZone:T.graphViewAutoScrollZone,_rectSelectBackground:T.graphViewRectSelectBackground,_rectSelectBorderColor:T.graphViewRectSelectBorderColor,_editPointSize:T.graphViewEditPointSize,_editPointBorderColor:T.graphViewEditPointBorderColor,_editPointBackground:T.graphViewEditPointBackground,_scrollBarColor:Om,_scrollBarSize:ks,_autoHideScrollBar:Bo,_autoMakeVisible:Ck,_currentActionType:null,getCoreInteractor:function(){return this._coreInteractor},getLayers:function(){return this._dataModel.getLayers()},setLayers:function(O){this._dataModel.setLayers(O)},setEditable:function(T){var i=this,Q=i.__interactorMap__;if(!Q){var $=gi.XEditInteractor;Q=i.__interactorMap__={scrollBar:new bk(i),select:new En(i),edit:$?new $(i):new as(i),text:new Qd(i),move:new yc(i),"default":new nr(i),touch:new Cm(i,{editable:!1})}}T?(i._uieditable=!0,i.setInteractors([Q.scrollBar,Q.select,Q.text,Q.edit,Q.move,Q.default,Q.touch])):(i._uieditable=!1,i.setInteractors([Q.scrollBar,Q.select,Q.move,Q.default,Q.touch]))},getCanvas:function(){return this._canvas},_33I:function(e){var g=e.getUIClass();return g?new g(this,e):C},getDataUI:function(g){var t=this,b=t._25I[g._id];return b===H&&(b=t._33I(g),t._25I[g._id]=b),b},getNodeRect:function(l){return T.getNodeRect(this,l)},getFullscreenDatas:function(){return this._dataModel.getFullscreenDatas()},getEdgeInfo:function(D){var j=this.getDataUI(D);return j?(j._79o(),j._78o):null},getEdgeSourcePosition:function(v){var L=this,R=L.getDataUI(v),B=R.s,Q=R._data._40I;return Rm(L,Q,B("edge.source.position"),B("edge.source.offset.x"),B("edge.source.offset.y"),B("edge.source.anchor.x"),B("edge.source.anchor.y"))},getEdgeTargetPosition:function(l){var y=this,B=y.getDataUI(l),Q=B.s,j=B._data._41I;return Rm(y,j,Q("edge.target.position"),Q("edge.target.offset.x"),Q("edge.target.offset.y"),Q("edge.target.anchor.x"),Q("edge.target.anchor.y"))},invalidateAll:function(Y){var i=this;if(Y){for(var z in i._25I){var l=i._25I[z];l&&l.dispose()}i._25I={},i._56I={},i._24I={},i._34I.clear(),i.redraw()}else i.dm().each(function(c){i.invalidateData(c)})},invalidateSelection:function(){var A=this;A.sm().each(function(Z){A.invalidateData(Z)})},invalidateData:function(j){var i=this;i._24I[j._id]=j,i._21Q(j),i.iv()},_21Q:function(M){var D=this,o=D._24I;if(Cg(M)&&Ri[M.s(xo)]){var w=M.getSourceAgent();w&&w.getAgentEdges().each(function(V){o[V._id]=V}),w=M.getTargetAgent(),w&&w.getAgentEdges().each(function(b){o[b._id]=b}),D.iv()}},redraw:function(Q){var $=this;$._32I||(Q?$._34I.add(Q):($._32I=1,$._34I.clear()),$.iv())},each:function(C,p){var D,b,P,o=0,u=this.getLayers(),K=this._dataModel,M=K._datas._as,i=M.length;if(u){var h,c={};K.isHierarchicalRendering()&&K.eachByHierarchical(function(y){P=y._layer,h=c[P],h||(h=c[P]=[]),h.push(y)});for(var J=u.length;J>o;o++)if(P=u[o],oc(P)&&(P=P.name),K.isHierarchicalRendering()){h=c[P];var r,D,w;if(h&&(r=h.length)>0)for(var n=0;r>n;n++)if(D=h[n],w=p?C.call(p,D):C(D),w===!1)return}else for(var n=0;i>n;n++)if(D=M[n],D._layer===P&&(b=p?C.call(p,D):C(D),b===!1))return}else if(K.isHierarchicalRendering())this._dataModel.eachByHierarchical(C,null,p);else for(;i>o;o++)if(D=M[o],b=p?C.call(p,D):C(D),b===!1)return},reverseEach:function(H,K){var h,Q,C,b,P=this._dataModel,U=P._layers,M=P._datas._as,u=M.length;if(U){var F,s={};for(P.isHierarchicalRendering()&&P.reverseEachByHierarchical(function(L){b=L._layer,F=s[b],F||(F=s[b]=[]),F.push(L)}),h=U.length-1;h>=0;h--)if(b=U[h],oc(b)&&(b=b.name),P.isHierarchicalRendering()){F=s[b];var o,Q,L;if(F&&(o=F.length)>0)for(var w=0;o>w;w++)if(Q=F[w],L=K?H.call(K,Q):H(Q),L===!1)return}else for(var w=u-1;w>=0;w--)if(Q=M[w],Q._layer===b&&(C=K?H.call(K,Q):H(Q),C===!1))return}else if(P.isHierarchicalRendering())P.reverseEachByHierarchical(H,null,K);else for(h=u-1;h>=0;h--)if(Q=M[h],C=K?H.call(K,Q):H(Q),C===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var o=this,i=o._84I;if(!i){var h=this.dm().a("width"),p=this.dm().a("height");h>0&&p>0?o._84I={x:0,y:0,width:h,height:p}:(o.each(function(R){o.isVisible(R)&&(i=Ar(i,o.getDataUIBounds(R)))}),o._84I=i?i:Sr)}return o._84I},getScrollRect:function(){return Ar(this.getContentRect(),this._29I)},makeCenter:function(u,c,x){var f=this;if(!f.getWidth()||!f.getHeight())return x||ef(f.makeCenter,f,[u,c,!0],500),void 0;f.makeVisible(u),f.validate();var P=f.getDataUIBounds(u);if(P){var m=f.getWidth(),e=f.getHeight(),V=P.x+P.width/2,n=P.y+P.height/2,C=-V*f._zoom+m/2,W=-n*f._zoom+e/2;f.setTranslate(C,W,c)}},fitData:function(E,G,A,l,$){var Q=this;if(!Q.getWidth()||!Q.getHeight())return $||ef(Q.fitData,Q,[E,G,A,l,!0],500),void 0;var N=function(){Q.makeVisible(E),Q.validate();var N=Q.getDataUIBounds(E);N&&(N=ho(N),Sb(N,A==C?20:A),Q.fitRect(N,G,l))};G?T.callWhenLoaded(N):N()},fitContent:function($,R,P,l){var J=this;if(!J.getWidth()||!J.getHeight())return l||ef(J.fitContent,J,[$,R,P,!0],500),void 0;var m=function(){J.validate();var n=ho(J.getContentRect());Sb(n,R==C?20:R),J.fitRect(n,$,P)};$?T.callWhenLoaded(m):m()},fitRect:function(E,C,K){var t=this,N=t.getWidth(),j=t.getHeight(),F=E.x+E.width/2,D=E.y+E.height/2,V=r(N/E.width,j/E.height),b=t._zoom,f=-F*b+N/2,H=-D*b+j/2;0===V||isNaN(V)||(K&&(V=r(1,V)),C?(t._65I&&(delete t._65I.finishFunc,t._65I.stop(!0)),t._14o&&t._14o.stop(!0),t.setTranslate(f,H,{finishFunc:function(){t.setZoom(V,C)}})):(t.setTranslate(f,H),t.setZoom(V)))},fitSelection:function($,w,V){var j=this,m=j.sm(),u=null;m.size()&&(m.each(function(s){u=Ar(j.getDataUIBounds(s),u)}),$&&Sb(u,$),j.fitRect(u,w,V))},toCanvas:function(q,_,b){_=_||this._zoom,this.validateImpl();var Z=this,A=Z.getContentRect();b&&Sb(A,b),A.width||(A.width=10),A.height||(A.height=10);var Q=uc(),F=A.x*_,z=A.y*_,D=Math.ceil(A.width*_),Y=Math.ceil(A.height*_);Eh(Q,D,Y,1);var V=yh(Q);q=q||this._dataModel.getBackground(),q&&ri(V,0,0,D,Y,q),qo(V,-F,-z),V.scale(_,_);var X=this._zoom;return this._zoom=_,Z._42(V),this._zoom=X,V.restore(),this.redraw(),Q},toDataURL:function(m,M,y,B){return this.toCanvas(m,y,B).toDataURL(M||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(o,C){var U=this,K=U.dm().getBackground();if(K){var J=U.dm().a("width"),G=U.dm().a("height");J>0&&G>0&&ri(o,0,0,J,G,K)}var V=U.__htmlOrderList,Z=[],Y=U._forcedLayoutHTML;if(U._93db(o,C),U.each(function(g){var V=U.getDataUI(g);if(V){var k=U._56I[g._id],u=V._htmlView;if(k){var q=V._79o();if(u=V._htmlView,L.HtmlNode&&g instanceof L.HtmlNode)V._42(o);else{var y=U.getViewRect(),F=u&&u.layoutHTML;!C||We(C,q)?(F&&(u.layoutHTML(),V.__outerLayout&&delete V.__outerLayout),V._42(o)):We(y,q)||!F||V.__outerLayout&&!Y||(u.layoutHTML(),V.__outerLayout=!0)}}u&&(Z.push(u),u.getView&&(u=u.getView()),u.style.display=k?"block":zd)}}),V&&Z.length>0){var E=!1;if(V.length!==Z.length)E=!0;else for(var x=0;x<Z.length;x++)if(Z[x]!==V[x]){E=!0;break}E&&(Z.forEach(function(O){O.autoAdjustIndex!==!1&&U.appendHTML(O,!0)}),this.__htmlOrderList=Z)}else this.__htmlOrderList=Z;U._92db(o,C)},disableDirtyRect:function(){this._shouldRedrawAll=M},enableDirtyRect:function(){var d=this;d._shouldRedrawAll=function(){return d._32I}},validateImpl:function(){this.tryUpdateRootData();var r,x,P,w,F,Y=this,v=Y.tx(),X=Y.ty(),f=Y._zoom,m=Y._canvas,U=this.getWidth(),L=this.getHeight(),B=Y._29I,e={x:-v/f,y:-X/f,width:U/f,height:L/f},G={},J=Y._34I,s=Y._24I,t=Y._shouldRedrawAll(),o=Y._23I;Y._24I={},(U!==m.clientWidth||L!==m.clientHeight)&&(Eh(m,U,L),t=1,Y._forcedLayoutHTML=1),t||tl(e,B)||(t=1,Y._forcedLayoutHTML=1),Y._29I=e,Y.each(function(U){x=U._id;var b=G[x]=Y.isVisible(U);b!==Y._56I[x]&&(s[x]=U,P=Y.getDataUI(s[x]),P&&P._84o(b),Y._84o(U,b))},Y);for(x in s)P=Y.getDataUI(s[x]),P&&(!t&&Y._56I[x]&&(F=P._79o(),F&&J.add(F)),P.invalidate()),Y._83I=1;if(Y._56I=G,!t)for(x in s)G[x]&&(P=Y.getDataUI(s[x]),P&&(F=P._79o(),F&&J.add(F)));if(t?w=e:(J.each(function(i){We(e,i)&&(w=Ar(w,i))}),w&&(Sb(w,h(1,1/f)),w.x=$(w.x*f)/f,w.y=$(w.y*f)/f,w.width=O(w.width*f)/f,w.height=O(w.height*f)/f,w=pl(e,w))),Y._74O=w,w&&0!==w.width&&0!==w.height){r=yh(m);var A=w.x,k=w.y,T=w.width,b=w.height;A=Math.floor((A*f+v)*un),k=Math.floor((k*f+X)*un),T=Math.ceil(T*f*un)+1,b=Math.ceil(b*f*un)+1,t||(w.x=(A/un-v)/f,w.y=(k/un-X)/f,w.width=T/un/f,w.height=b/un/f),r.beginPath(),r.rect(A,k,T,b),r.clip(),r.clearRect(A,k,T,b),fb(r,v,X,f),Y._42(r,w),r.restore(),delete Y._74O}if(J.clear(),delete Y._32I,delete Y._forcedLayoutHTML,o&&U>0&&L>0){var P=Y.getDataUI(o);if(P){var F=P._79o(),K=Y._29I,j=K.x,l=K.y,c=K.width,a=K.height,f=Y._zoom;F&&!We(F,K)&&(F.x+F.width<j&&Y.tx(-F.x*f),F.x>j+c&&Y.tx(-(F.x+F.width-c)*f),F.y+F.height<l&&Y.ty(-F.y*f),F.y>l+a&&Y.ty(-(F.y+F.height-a)*f))}delete Y._23I}Y._83I&&(delete Y._83I,delete Y._84I),Y._98O(),Y.countFrame(),ss(Y._24I)||ef(Y.iv,Y)},isValidGuideLineSource:function(){return!0},tryUpdateRootData:function(){if(!this._rootDataUpdating){this._rootDataUpdating=!0;var b,p=this.getFullscreenDatas();for(var Q in p)b=p[Q],this.scaleRootData(b);this.onRootDataUpdated&&this.onRootDataUpdated(),this._rootDataUpdating=!1}},scaleRootData:function(t){var d=t.s("fullscreen");if("uniform"===d||"fill"===d){t.getRotation()&&t.setRotation(0);var M=t.s("fullscreen.gap")||0,o=this.getWidth(),k=this.getHeight();if(o&&k){var Q,D,X,i=o-2*M,s=k-2*M,h=t.getAnchor(),T=t.getScaledSize(),c=T.width,W=T.height,E=t.s("fullscreen.lock");if(E)return"uniform"===d?i/s>c/W?(Q=s/W,c=W*i/s):(Q=i/c,W=c*s/i):"v"===E?(Q=s/W,c=i/Q,t.getWidth()!==c&&t.setWidth(c)):(Q=i/c,W=s/Q,t.getHeight()!==W&&t.setHeight(W)),this.setZoom(Q),D=M-(t.getX()-h.x*c)*Q,X=M-(t.getY()-h.y*W)*Q,D!==this.tx()&&this.tx(D),X!==this.ty()&&this.ty(X),void 0;D=this.tx(),X=this.ty(),Q=this._zoom;var I={x:(-D+M)/Q,y:(-X+M)/Q,width:i/Q,height:s/Q};if("uniform"===d){var J=c/W,x=Math.min(I.width,I.height*J),N=x/J;I.x+=.5*(I.width-x),I.y+=.5*(I.height-N),I.width=x,I.height=N}i=I.width/t.getScaleX(),s=I.height/t.getScaleY(),(t.getWidth()!=i||t.getHeight()!==s)&&t.setSize(i,s);var f=I.x+h.x*I.width,G=I.y+h.y*I.height,n=t.getPosition();(f!==n.x||G!==n.y)&&t.setPosition(f,G)}}},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(d){var y=this;d!==y.isScrollBarVisible()&&(d?(Nh(y._view,y._79O=vh()),Nh(y._79O,y._27I=vh()),Nh(y._79O,y._28I=vh())):(me(y._79O),delete y._79O,delete y._27I,delete y._28I),y.fp("scrollBarVisible",!d,d))},getDebugTip:function(){return""},showScrollBar:function(){var u=this;u._79O&&(u._85I||(Yi(function(){u._86I()},de),u.iv()),u._85I=new Date)},_86I:function(){var e=this;if(e._85I){var J=new Date,z=J.getTime();z-e._85I.getTime()>=de?(delete e._85I,e.iv()):Yi(function(){e._86I()},de)}},getVScrollBar:function(){return this._27I},getHScrollBar:function(){return this._28I},_98O:function(){var y=this,q=this._27I,W=this._28I;if(y._79O){if(y._autoHideScrollBar&&!y._85I)return q.style.visibility=Gb,W.style.visibility=Gb,void 0;var Y=y.getScrollBarColor(),V=y._zoom,r=y.getScrollBarSize(),D=y.getViewRect(),j=y.getScrollRect(),p=D.height*V,g=j.height*V,H=D.width*V-r-2,w=p*((D.y-j.y)*V/g),h=p*(p/g),e=q.style;g-.5>p?(ak>h&&(w=w+h/2-ak/2,0>w&&(w=0),w+ak>p&&(w=p-ak),h=ak),mb(q,H,w,r,h),e.visibility=Dq,e.background=Y,e.borderRadius=r/2+we):e.visibility=Gb;var S=D.width*V,a=j.width*V,w=D.height*V-r-2,H=S*((D.x-j.x)*V/a),o=S*(S/a),e=W.style;a-.5>S?(ak>o&&(H=H+o/2-ak/2,0>H&&(H=0),H+ak>S&&(H=S-ak),o=ak),mb(W,H,w,o,r),e.visibility=Dq,e.background=Y,e.borderRadius=r/2+we):e.visibility=Gb}},setDataModel:function(H){var s=this,W=s._dataModel,V=s._selectionModel;W!==H&&(W&&(W.ump(s.handleDataModelPropertyChange,s),W.umm(s.handleDataModelChange,s),W.umd(s.handleDataPropertyChange,s),W.removeIndexChangeListener(s._75O,s),W.removeHierarchyChangeListener(s.handleHierarchyChange,s),V||W.sm().ums(s.handleSelectionChange,s)),s._dataModel=H,H.mp(s.handleDataModelPropertyChange,s),H.mm(s.handleDataModelChange,s),H.md(s.handleDataPropertyChange,s),H.addIndexChangeListener(s._75O,s),H.addHierarchyChangeListener(s.handleHierarchyChange,s),V?V._21I(H):H.sm().ms(s.handleSelectionChange,s),s.invalidateAll(!0),s.fp(Ir,W,H),s.updateBackground())},getLayersInfo:function(){if(this._layersInfo===H){var s=this.getLayers();s?(this._layersInfo={},s.forEach(function(J){var I=oc(J)?J.name:J;this._layersInfo[I]=J},this)):this._layersInfo=null}return this._layersInfo},calculateEdgePosition:function(P,V,Q){var o,q,T,v,W=this;P instanceof L.Data?(v=W.getDataUI(P),T=Ag(v)):(T=Ag(null,arguments[0],arguments[1]),V=arguments[2],Q=arguments[3]),2===V.length&&(V=new Sf(V[0],V[1]));var h=rr(V,function(V){return Jn(T,100*V)},100,.001),u=Jn(T,100*h);if(!Q){var G=v?Rh(v):Rh(arguments[0],arguments[1]),d=new Sf(u.x,u.y),S=49/(W._zoom*W._zoom);for(o=0,q=G.length;q>o;o++)if(d.distanceToSquared(G[o])<S)return{index:o,point:G[o],distance:Math.sqrt((G[o].x-V.x)*(G[o].x-V.x)+(G[o].y-V.y)*(G[o].y-V.y))}}return{percent:h,point:u,distance:Math.sqrt((u.x-V.x)*(u.x-V.x)+(u.y-V.y)*(u.y-V.y))}},getPercentPositionOfPath:function(i,f){var r;if(i instanceof L.Data){var h=this.getDataUI(i);r=Ag(h)}else r=Ag(null,arguments[0],arguments[1]),f=arguments[2];return Jn(r,f)},getNeareastPositionOfPath:function(){return this.calculateEdgePosition.apply(this,arguments)},getPointsOfPath:function(){function I(X,e,N,w,F,T){var U=new Sf(e.get(N)),G=T.apply(U);X.push({local:U,world:G,type:F,index:N,realIndex:w})}return function(c){var m,A;if(c instanceof L.Data){var R=this.getDataUI(c),a=Tc(R);m=a.points,A=a.segments}else m=arguments[0],A=arguments[1];var K,J,U,H=c instanceof L.Shape?c.getPointsMatrix2d():new Of.Matrix2d,T=[],O=-1,t=-1;for(J=0,U=A?A.length:m.length;U>J;J++)K=A?A.get(J):1,5!==K&&(t++,3===K?(I(T,m,O+1,t,"C",H),I(T,m,O+2,t,"M",H),O+=2):4===K?(I(T,m,O+1,t-1,"R",H),I(T,m,O+2,t,"L",H),I(T,m,O+3,t,"M",H),O+=3):(I(T,m,O+1,t,"M",H),O+=1));return T}}(),calculateAttachPoint:function(){var I=new Sf,J=new Sf,P=new Sf;return function(u,k){var Y=this.getAttachPoints(u);if(!Y||!Y.length)return null;P.set(k.x,k.y);for(var T,F,x,r,S,C=1/0,D=0,q=Y.length;q>D;D++)x=Y[D],J.x=x.x,J.y=x.y,I.x=x.offsetX||0,I.y=x.offsetY||0,r=Rm(this,u,0,I.x,I.y,J.x,J.y),F=P.distanceToSquared(r),C>F&&(T=D,C=F,S=r);C=Math.sqrt(C);var m=this.getAttachStyle(u);if("close"===m){var W=u.s("attach.close.threshold")/this._zoom;if(C>W)return null}return{index:T,distance:C,info:Y[T],point:S}}}(),getAttachPoints:function(V){var j=V.s("attach.points");if(j)return j;var M=$p(V._image);return M?hg(M.attachPoints,V,this)||null:void 0},getAttachStyle:function(R){var T=R.s("attach.style");if(T)return T;var Q=$p(R._image);return Q?hg(Q.attachStyle,R,this)||"close":void 0},updateLayers:function(){this._layersInfo=H,this.invalidateSelection(),this.redraw()},updateBackground:function(){var l=this.dm().a("width"),Z=this.dm().a("height");this._canvas.style.background=l>0&&Z>0?"":this.dm().getBackground()||""},handleDataModelPropertyChange:function(z){if("background"===z.property){var c=this._canvas.style.background,v=z.newValue||"";this.updateBackground(),this.fp("canvasBackground",c,v),this.redraw()}else"a:width"===z.property||"a:height"===z.property?(this._83I=1,this.updateBackground(),this.redraw()):"layers"===z.property?this.updateLayers():"hierarchicalRendering"===z.property&&this.redraw()},handleDataPropertyChange:function(A){this.dm().isHierarchicalRendering()&&"parent"===A.property&&A.data.hasChildren()&&this.redraw(),this.invalidateData(A.data)},onPropertyChanged:function(w){var D=this,Z=w.property;if(D.redraw(),"zoom"===Z){var Q=D.sm().getSelection();Q.size()&&Q.each(function(P){P.invalidate()})}else"dataModel"===Z&&(D._83I=1);Hh[Z]?D.showScrollBar():Z===an&&D.onCurrentSubGraphChanged(w)},onCurrentSubGraphChanged:function(){this.sm().cs(),this.reset()},handleDataModelChange:function(l){var v=this,p=l.kind,Z=l.data;if(v._83I=1,"add"===p)v.invalidateData(Z),Cg(Z)&&Z.getEdgeGroup()&&Z.getEdgeGroup().eachSiblingEdge(v.invalidateData,v),Z.getHost&&Z.getHost()&&Z.getHost().updateLayoutAttaches();else if(p===vc){v._21Q(Z);var s=Z._id,c=v._25I[s];if(c){if(v._56I[s]){var J=c._79o();J&&v.redraw(J)}c.dispose(),delete v._25I[s],delete v._24I[s],delete v._56I[s]}Z===v._currentSubGraph&&v.setCurrentSubGraph(C)}else p===Hi&&(v.invalidateAll(!0),v.setCurrentSubGraph(C))},_75O:function(g){this.invalidateData(g.data)},handleHierarchyChange:function(f){this.dm().isHierarchicalRendering()&&f.data.hasChildren()&&this.redraw(),this.invalidateData(f.data)},adjustIndex:function(N){var I=this;if(I.isVisible(N)){I.dm().beginTransaction();for(var C=N;C._parent&&I.isVisible(C._parent);)C=C._parent;C&&C!==N&&I._dataModel.adjustIndex(C),I._dataModel.adjustIndex(N),I.dm().endTransaction()}},getImage:function($){return $.getImage?$.getImage():H},getSelectWidth:function(D){var U=$p(this.getImage(D));return U&&hg(U.disableSelectedBorder,D,this)?0:D.s("select.width")},getSelectColor:function(y){return y.s("select.color")},isSelectable:function(d,K){if(this.isSelected(d))return!0;if(!K&&d.getParent()instanceof _i&&this.isSelectable(d.getParent(),!0)&&d.getParent().isSyncSize())return!1;var B=this.getLayersInfo();if(B){var E=B[d._layer];if(E&&E.selectable===!1)return!1}return d.s("2d.selectable")&&this.sm().isSelectable(d)},isMovable:function(g){var y=this;if(Cg(g)&&g.getStyle(xo)!==Qr)return!1;var D=this.getLayersInfo();if(D){var B=D[g._layer];if(B&&B.movable===!1)return!1}return g.s("2d.movable")?y._movableFunc?y._movableFunc(g):!0:!1},isEditable:function(Q){var J=this;if(L._uiSerializing)return J._uieditable;if(!J._editInteractor||!J.isSelected(Q))return!1;if(eo(Q)){var D=J.getDataUI(Q);if(!D||D._88I)return!1}if(Cg(Q)&&Q.getStyle(xo)!==Qr)return!1;var K=this.getLayersInfo();if(K){var V=K[Q._layer];if(V&&V.editable===!1)return!1}return Q.s("2d.editable")?J._editableFunc?J._editableFunc(Q):!0:!1},handleDelete:function(){this._editInteractor&&(this._editInteractor.handleDelete?this._editInteractor.handleDelete():this.removeSelection())},isPointEditable:function(o){return Tk(o)&&0!==o.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(o):!0},isRectEditable:function(H){return this._rectEditableFunc?this._rectEditableFunc(H):!0},isAnchorEditable:function(E){return this._anchorEditableFunc?this._anchorEditableFunc(E):!0},isRotationEditable:function(K){return K.setRotation&&K.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(K):!0:!1},isSourceTargetEditable:function(){return!0},getRotationPoint:function(D){var F=D.getAnchor(),v=D.getScale(),H=this._zoom,E=Jb(D.getRotation(),0,-D.getHeight()*v.y*F.y-(v.y<0?-1:1)*(Cd?32:16)/H),y=D.p();return E.x+=y.x,E.y+=y.y,E},getLogicalPoint:function(v){var w=this;return Dc(v,w._canvas,w.tx(),w.ty(),w._zoom,w._zoom)},getScreenPoint:function(m,o){var _,t=this;return"object"==typeof m?m.x!==H?(_=m.x,o=m.y):(_=m[0],o=m[1]):_=m,Wj(_,o,t._canvas,t.tx(),t.ty(),t._zoom,t._zoom)},getSelectedDataAt:function(N){var H=this;return this.getDataAt(N,function(C){return H.isSelected(C)})},getDataInfoAt:function(p,j,S){var W,X=this.lp(p),J=this.getDataAt(X,j,S);if(J){var s=this.getDataUI(J);W={data:J,ui:s,point:X};var l=s._38o;if(l){var _=l.icons;for(var V in _){var b=_[V],o=l.rects[V];if(o)for(var a=hg(b.names,J,this),y=a?a.length:0,M=o.rotation,k=y-1;k>=0;k--){var O=a[k],i=o[k];if(Ad(i,X,M))return W.part="icons",W.name=V,W.icon=O,W.rect=i,W.index=k,W.rotation=M,W}}}if(this.isNoteVisible(J)){if(s.note2Info&&Ad(s.note2Info.clickRect,X,C,s.note2Info.scale))return W.part="note2",W;if(s.noteInfo&&Ad(s.noteInfo.clickRect,X,C,s.noteInfo.scale))return W.part="note",W}if(this.isLabelVisible(J)){if(s.label2Info&&Ad(s.label2Info.rect,X,s.label2Info.rotation,s.label2Info.scale))return W.part="label2",W;if(s.labelInfo&&Ad(s.labelInfo.rect,X,s.labelInfo.rotation,s.labelInfo.scale))return W.part="label",W}if(J.isInRect&&J.isInRect(X))return W.part="body",W}return W},getDataAt:function(q,i,a){q.target&&(q=this.lp(q));var y,M=this._zoom;return this.reverseEach(function(I){return(i?i(I):this.isSelectable(I))&&this.rectIntersects(I,Zd(q.x,q.y,a,M))?(y=I,!1):void 0},this),y},getIconInfoAt:function(o,l){var Q=this;if(o.target&&(o=Q.lp(o)),l||(l=Q.getDataAt(o)),l){var Z=Q.getDataUI(l);if(Z&&Z._38o){var _,j=Z._38o,y=new Dg;for(_ in j.icons)y.add(_);for(var S=y.size()-1;S>=0;S--){_=y.get(S);for(var n=j.rects[_],a=n.rotation,u=n.length-1;u>=0;u--){var f=n[u],q=f.width,e=f.height,w={x:o.x-f.x-q/2,y:o.y-f.y-e/2};a!=C&&(w=Jb(-a,w.x,w.y));var f={x:-q/2,y:-e/2,width:q,height:e};if(Ad(f,w))return{key:_,index:u,name:j.icons[_].names[u],rect:n[u],point:o,rotation:a,relativeRect:f,relativePoint:w,data:l}}}}}return C},getDatasInRect:function(F,j,R){R===H&&(R=1);var Q=this,G=new Dg;return Q.reverseEach(function(O){R&&!Q.isSelectable(O)||(j?Q.rectIntersects(O,F):Q.rectContains(O,F))&&G.add(O)}),G},moveSelection:function(g,e){var a=this;a.dm().beginTransaction(),_k(a.sm().toSelection(a.isMovable,a),g,e),a.dm().endTransaction()},moveDatas:function(E,L,T){var R=this;R.dm().beginTransaction(),E instanceof Dg||(E=new Dg(E)),_k(E,L,T),R.dm().endTransaction()},getDataUIBounds:function(N){var l=this.getDataUI(N);return l?l._79o():C},drawData:function(R,b,v){var f=this.getDataUI(b);if(f){var X=f._79o();(!v||We(v,X))&&(f._42(R),b instanceof L.Block&&b.eachChild(function(p){this.isVisible(p)&&this.drawData(R,p,v)},this))}},getBoundsForGroup:function(g){return g.s(uf)?this.getDataUIBounds(g):C},isPixelPerfect:function(s){return s.s("pixelPerfect")},rectIntersects:function(f,z){this.validate();var F=C;if(this._56I[f._id]){var v=this._25I[f._id];
if(v){var X=v._79o();if(sc(z,X))F=!0;else if((z=pl(z,X))&&(v.rectIntersects&&(F=v.rectIntersects(z)),F==C)){if(!this.isPixelPerfect(f))return!0;var _=z.x,u=z.y,e=z.width,W=z.height,E=this._zoom,P=T.hitMaxArea,t=e*W*E*E;if(t>P){var N=Math.sqrt(P/t);E*=N}e*=E,W*=E,2>e&&(e=2),2>W&&(W=2),_*=E,u*=E;var h=Df(e,W);qo(h,-_,-u),h.scale(E,E),this._drawForChecking=!0,this.drawData(h,f,z),this._drawForChecking=!1;try{for(var x=0,Z=h.getImageData(0,0,e,W).data;x<Z.length;x+=4)if(0!==Z[x+3]){F=!0;break}h.restore()}catch(R){_f=C,F=!1}}}}return F?!0:!1},rectContains:function(F,W){if(this._56I[F._id]){var K=this._25I[F._id];if(K)return sc(W,K._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function($){if(!T.isInput($.target)){var W=this,E=W._focusData,q=E&&W._25I[E._id],w=0,c=W._dataModel._datas;if(!(E&&E._enabled&&E._editable&&q&&q.onKeyDown&&q.onKeyDown($)===!0))if(9===$.keyCode&&(E&&(w=c.indexOf(E),ee($)?-1===--w&&(w=0):++w===c.size()&&(w=0)),W._focusData=E=c.get(w),W.sm().setSelection(E)),jd($)?W.selectAll():rj($)&&W.isResettable()&&W.reset(),W.sm().isEmpty()){if(W._editing)return;var D=W.tx(),n=W.ty(),z=!1,U=ee()?100:10;Qi($)&&(D-=U,z=!0),Al($)&&(n-=U,z=!0),nk($)&&(D+=U,z=!0),xh($)&&(n+=U,z=!0),z&&W.setTranslate(D,n)}else{$i($)&&W.handleDelete($);var Y=ee()?10:1;Qi($)&&(W.moveSelection(-Y,0),W.fi({kind:"moveLeft"})),Al($)&&(W.moveSelection(0,-Y),W.fi({kind:"moveUp"})),nk($)&&(W.moveSelection(Y,0),W.fi({kind:"moveRight"})),xh($)&&(W.moveSelection(0,Y),W.fi({kind:"moveDown"}))}}},handleScroll:function(V,O){if(Ne(V),this.isZoomable()){if(!this.getEditInteractor()){var h=this.getDataAt(V);if(h){var v=$p(this.getImage(h));if(v&&hg(v.scrollable,h,this))return}}var p=this.getFullscreenDatas();for(var X in p)if(p[X].s("fullscreen.lock"))return;var b=this.lp(V);O>0?this.scrollZoomIn(b):0>O&&this.scrollZoomOut(b)}},handlePinch:function(p,M,E){this.isZoomable()&&(Math.abs(M-E)<T.pinchZoomThreshold||(M>E?this.pinchZoomIn(p):this.pinchZoomOut(p)))},checkDoubleClickOnNote:function(E,e){var P=this,m=P.lp(E),w=P.getDataUI(e),t=w.note2Info;return t&&e.s("note2.toggleable")&&Ad(t.clickRect,m)?(e.s(Gk,!e.s(Gk)),P.fi({kind:"toggleNote2",event:E,data:e}),!0):(t=w.noteInfo,t&&e.s("note.toggleable")&&Ad(t.clickRect,m)?(e.s(sm,!e.s(sm)),P.fi({kind:"toggleNote",event:E,data:e}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(Z,_){var J=this,M=J.getAutoScrollZone(),e=M/J.getZoom(),H=M/4,p=J._29I,K=J.lp(Z),T={x:J.tx(),y:J.ty()};return K&&M>0&&p&&(K.x-p.x<e?J.translate(H,0):p.x+p.width-K.x<e&&J.translate(-H,0),K.y-p.y<e?J.translate(0,H):p.y+p.height-K.y<e&&J.translate(0,-H)),T.x=J.tx()-T.x,T.y=J.ty()-T.y,_&&(_.x+=T.x,_.y+=T.y),T},getMoveMode:function(Q,r){var H=r.s("2d.move.mode");return H?H:Zo["88"]?"x":Zo["89"]?"y":"xy"},getSerializableProperties:function(){return{scrollBarColor:1,scrollBarSize:1,autoMakeVisible:1,autoHideScrollBar:1,editable:1,resettable:1,pannable:1,rectSelectable:1,autoScrollZone:1,visibleFunc:1,movableFunc:1,editableFunc:1,pointEditableFunc:1,rectEditableFunc:1,anchorEditableFunc:1,rotationEditableFunc:1,rectSelectBackground:1,rectSelectBorderColor:1,editPointSize:1,editPointBorderColor:1,editPointBackground:1,hoverDelay:1,dataModel:1,selectionModel:1,currentSubGraph:1,zoom:1,translateX:1,translateY:1}},serializeProperty:function(p,g,L){var z=this;return"currentSubGraph"===g?{__i:p.getId()}:L.serializeProperty(p,g,z)},deserializeProperty:function(k,o,P){var j=this;if("currentSubGraph"===o){var T=j.dm(),x=T.__idMap;return x[k.__i]}return P.deserializeProperty(k,o,j)},setDefaultCursor:function(X,N){this._defaultCursor=X,N!==!1&&this.setCursor(X)},getCurrentConnectActionType:function(){return this._currentActionType},setCurrentConnectActionType:function($){return $===C||T.getConnectAction(null,$)?(this._currentActionType=$,this.redraw(),!0):!1},getEditStyle:function(l){var t=this.getEditInteractor();return t?t.getStyle(l):H},setEditStyle:function(P,V,d){var L=this.getEditInteractor();return L?(L.setStyle(P,V,d),!0):!1},isConnectActionVisible:function(l){var x=T.getConnectAction(this);if(!x)return!1;var m=x.visible;return mq(m)&&(m=m(this,l)),m},isInteractive:function(O){if(this._drawForChecking)return!1;var h=$p(this.getImage(O));return h&&hg(h.interactive,O,this)?!0:O.s("interactive")},getRenderingStyleIconName:function(){return Lk},appendHTML:function(s,C){var p=this.getView();if(!(C||s&&s.parentNode!==p))return!1;var r=s.getView&&s.getView(),R=s.beforeCanvas;if(!C&&r&&r.parentNode===p)return!1;(s.getView||s.isSelfViewEvent)&&(s=s.getView());var L=this.getEditInteractor();return R?p.insertBefore(s,this.getCanvas()):L&&L._canvas?p.insertBefore(s,L._canvas):this.isScrollBarVisible()?p.insertBefore(s,this.getView().lastChild):Nh(p,s),!0},_layoutHTMLImpl:function(k,i,O){if(arguments.length>1){var j,c=this,D=c._zoom;if(i.getView&&(j=i,i=i.getView()),i.style.position="absolute",O){var S=k.getRect();mb(j||i,c.tx()+S.x*D,c.ty()+S.y*D,S.width*D,S.height*D)}else{var C=new vi,S=k.getAnchorRect(),z=k.getPosition(),L=k.getScale(),t=i.style;mb(j||i,S),C.appendTranslate(c.tx(),c.ty()),C.appendScale(D,D),C.append(new vi(k.getRotation(),z.x,z.y,L.x,L.y)),Lm(t,"transform","matrix("+C.a.toFixed(5)+", "+C.b.toFixed(5)+", "+C.c.toFixed(5)+",\n    "+C.d.toFixed(5)+", "+C.tx.toFixed(5)+", "+C.ty.toFixed(5)+")"),Lm(t,"transformOrigin",(-S.x).toFixed(5)+"px "+(-S.y).toFixed(5)+"px"),i.updateAppendMatrix=!0}}else this._layoutHTML&&this._layoutHTML()},getTextEditInfo:function(G){return G instanceof Hr?{name:"text",accessType:"s",font:G.s("text.font"),isMultiline:!0}:void 0},getState:function(J){var Y="state",n=J.s(Y);if(n)return n;var W=$p(J._image);return W?hg(W[Y],J,this)||null:void 0},getShape:function(F){return F.getStyle(am)}}),b.defineProperties(gi.GraphView.prototype,{layoutHTML:{get:function(){return this._layoutHTMLImplBind||(this._layoutHTMLImplBind=this._layoutHTMLImpl.bind(this)),this._layoutHTMLImplBind},set:function(n){this._layoutHTML=n}}});var Od=function(J,M){var g=this;g.gv=J,g.s=function(z){return M.getStyle(z)},g._data=M,g._87I=new Dg},Lk=C;Po(Od,b,{_6I:C,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.s("shadow")||this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},getSelectWidth:function(){var j=this,J=j.gv.isSelected(j._data);return!J||j.isShadowed()?0:j.gv.getSelectWidth(j._data)},getSelectColor:function(){return this.gv.getSelectColor(this._data)},getBodyColor:function(K){var P=this._data,t=this.gv.getBodyColor(P);return t?t:K?P.getStyle(K):C},_2Q:function(u){return this.s(u)},_1Q:function(s,A,I,i){var Q=this.s,X=Q("2d.gray"),D=Q(A+".dash.color");if(X&&(D=T.toGrayColor(D)),s.strokeStyle=D,s.lineWidth=I,s.stroke(),Q(A+".dash.3d")){var e=Q(A+".dash.3d.color");Lh(s,D,X?T.toGrayColor(e):e,I,this.gv._zoom,Q(A+".dash.3d.accuracy"))}Sl(s,i)},invalidate:function(){this._6I=C},_79o:function(){var d=this;if(!d._6I){var M=d._data,K=d.gv;d.labelInfo=d.label2Info=d.noteInfo=d.note2Info=d._38o=C,d._87I.clear(),d.interactiveInfo=K.isInteractive(M)?{}:C,d._3O(),d._55O=K.isEditable(M)?{_42O:K.isRectEditable(M),_43O:K.isPointEditable(M),_56O:K.isRotationEditable(M)}:C,d._6I=d._81o()}return d._6I},_3O:function(){},getPosition:function(){return Sr},_68o:function(f,B){f&&this._87I.add(Kb(f,B))},_81o:function(){var X=this,T=X.s;X._24O(Fb,"getLabel"),X._24O(Io,"getLabel2"),X._26O(Hp,"getNote"),X._26O(Fd,"getNote2"),X._15O(),X._55O&&X._48O();var F;if(X._87I.each(function(O){F=Ar(F,O)}),F&&T("shadow.interactable")){var D=X.isShadowed(),O=T("shadow2"),w=ho(F);O?(w.x+=T("shadow2.offset.x"),w.y+=T("shadow2.offset.y"),Sb(w,T("shadow2.blur"))):D&&(w.x+=T("shadow.offset.x"),w.y+=T("shadow.offset.y"),Sb(w,T("shadow.blur"))),F=Ar(F,w)}return X._87I.clear(),F},_42:function(g){var p=this,M=p._data,q=p.gv,b=p.s,e=b("opacity"),B=this.isShadowed(),m=b("shadow2");if(B||m){var U=g.shadowOffsetX,I=g.shadowOffsetY,X=g.shadowBlur,P=g.shadowColor,r=q.getZoom()*T.devicePixelRatio,O=B?"shadow":"shadow2";g.shadowOffsetX=b(O+".offset.x")*r,g.shadowOffsetY=b(O+".offset.y")*r,g.shadowBlur=b(O+".blur")*r,g.shadowColor=B?p.getSelectColor():b(O+".color")}if(e!=C){var h=g.globalAlpha;g.globalAlpha=e}p._80o(g),q.isLabelVisible(M)&&((!q._drawForChecking||b("label.selectable"))&&Mb(g,p.labelInfo),(!q._drawForChecking||b("label2.selectable"))&&Mb(g,p.label2Info)),q.isNoteVisible(M)&&(Tn(g,p.noteInfo),Tn(g,p.note2Info)),p._99O(g),e!=C&&(g.globalAlpha=h),(B||m)&&(g.shadowOffsetX=U,g.shadowOffsetY=I,g.shadowBlur=X,g.shadowColor=P)},_80o:function(){},_47O:function(){},_24O:function(T,Q){var o=this,l=o._data,O=o.gv,i=o.s,I=O[Q](l);if(I!=C){var P=i(T+".scale"),F=i(T+".max"),N=i(T+".position"),E=o[T+"Info"]={label:I,scale:P,color:O[Q+"Color"](l),font:i(T+".font"),opacity:i(T+".opacity"),align:i(T+".align"),decoration:i(T+".decoration"),rotation:o.getRotation(i(T+".rotation"),!1,N),background:O[Q+"Background"](l)},J=Xi(E,I);F>0&&F<J.width&&(E.labelWidth=J.width,J.width=F),1!==P&&(J.width*=P,J.height*=P);var z=o.getPosition(N,i(T+".offset.x"),i(T+".offset.y"),J,i(T+".position.fixed"));if(J.x=z.x-J.width/2,J.y=z.y-J.height/2,o._68o(E.rect=J,E.rotation),1!==P){var X=J.width/P,D=J.height/P;E.rect={x:z.x-X/2,y:z.y-D/2,width:X,height:D}}}},_26O:function(E,u){var Q=this,d=Q.gv,B=Q._data,N=Q.s,W=d[u](B);if(W!=C){var Z,P,R=N(E+".scale"),_=Q[E+"Info"]={note:W,scale:R,data:B,view:d,expanded:N(E+".expanded"),font:N(E+".font"),color:N(E+".color"),opacity:N(E+".opacity"),align:N(E+".align"),icon:N(E+".icon"),backgroundImage:N(E+".backgroundImage"),borderWidth:N(E+".border.width"),borderColor:N(E+".border.color"),background:d[u+"Background"](B)},t=Q.getPosition(N(E+".position"),N(E+".offset.x"),N(E+".offset.y")),g=t.x,I=t.y;if(_.expanded){var p,e=N(E+".max"),m=N(E+".backgroundImage");m?(m=$p(m),p={width:wc(m,B),height:sl(m,B)}):p=Xi(_,W),p.width+=6,p.height+=2,e>0&&e<p.width&&(_.labelWidth=p.width,p.width=e),Z=p.width,P=p.height+8,_.clickRect={x:g-Z*R/2,y:I-P*R,width:Z*R,height:P*R*p.height/P}}else{var G=N(E+".icon");G?(G=$p(G),Z=wc(G,B),P=sl(G,B)):(Z=12,P=18),_.clickRect={x:g-Z*R/2,y:I-P*R,width:Z*R,height:P*R}}_.rect={x:g-Z/2,y:I-P*R/2-P/2,width:Z,height:P};var f=O(_.borderWidth/2)*R;Q._68o({x:g-Z*R/2-f,y:I-P*R-f,width:Z*R+2*f,height:P*R+2*f})}},_48O:function(){},_99O:function(z){var F=this,W=F._38o;if(W){var R=F.gv,y=F._data,v=W.icons,d=F.interactiveInfo;d&&(d._38o={});for(var A in v){var p=v[A],u=W.rects[A];if(u){d&&(d._38o[A]=[]);var h=hg(p.opacity,y,R),L=hg(p.names,y,R),N=L?L.length:0,D=u.rotation;if(h!=C){var Z=z.globalAlpha;z.globalAlpha*=h}for(var U=0;N>U;U++){var M=L[U],k=$p(M),x=u[U];if(D){var s=x.x+x.width/2,w=x.y+x.height/2;z.save(),qo(z,s,w),Tp(z,D),qo(z,-s,-w)}d&&d._38o[A].push(z.interactiveInfo={compInfos:[],matrix:D?new vi(D,s,w).appendTranslate(-s,-w):new vi});var I=Lk;Lk=A,Oq(z,k,hg(p.stretch,y,R),x.x,x.y,x.width,x.height,F._data,F.gv),Lk=I,z.interactiveInfo=C,D&&z.restore()}h!=C&&(z.globalAlpha=Z)}}}}});var Bj=function(D,e){Ei(Bj,this,[D,e])};Po(Bj,Od,{_checkEmptyRect:!0,_40O:function(I,Y){var V=this,u=V.s,U=I.rect;(I.borderColor=V.gv.getBorderColor(V._data))&&(I.borderType=u("border.type"),I.borderWidth=u("border.width"),I.borderPadding=u("border.padding"),Y=h(Y,I.borderPadding+I.borderWidth/2));var t=V._data.getScale(),e=h(1,h(A(t.x),A(t.y)));if(I.selectWidth=V.getSelectWidth()){var M=V.gv._zoom;I.selectType=u("select.type"),I._97o=V.getSelectColor(),I.selectPadding=u("select.padding"),Y=h(Y,(I.selectPadding+I.selectWidth/2/M)/e)}Y>0&&(Y*=e,U=ho(U),Sb(U,Y)),V._68o(U)},_39O:function(u,b){var V,A=this,W=b.rect;if(b.borderWidth>0&&(V=b.borderPadding,u.strokeStyle=b.borderColor,u.lineWidth=b.borderWidth,Qf(u,b.borderType,{x:W.x-V,y:W.y-V,width:W.width+2*V,height:W.height+2*V}),u.stroke()),b.selectWidth>0){var p=A.gv._zoom;if(V=b.selectPadding,u.strokeStyle=b._97o,u.lineWidth=b.selectWidth/p,b.rotation!=C){u.save(),u.translate(b.position.x,b.position.y),u.rotate(b.rotation);var B=A._data,o=B.getWidth(),x=B.getHeight(),n=b.scale,E=b.anchor;W={x:n.x*-o*E.x,y:n.y*-x*E.y,width:n.x*o,height:n.y*x}}Qf(u,b.selectType,{x:W.x-V,y:W.y-V,width:W.width+2*V,height:W.height+2*V}),b.rotation!=C&&u.restore(),u.stroke()}},dispose:function(){var K=this,I=K._htmlView;Bj.superClass.dispose.call(K),I&&(I.onHTMLRemoved&&I.onHTMLRemoved(),me(I))},_3O:function(){var p,K=this,Q=K.s,D=K._data,x=K.gv,I=x.getShape(D),S=K.getBodyColor(),X=Q("shape.border.color"),c=K._83o=I?{shape:I,_53o:K.getBodyColor("shape.background"),_27Q:$p(Q("shape.repeat.image"),S),shapeGradientPack:Q("shape.gradient.pack"),shapeBorderGradientPack:Q("shape.border.gradient.pack"),_54o:Q("shape.border.width"),_55o:X,shapeBorderRepeatImage:$p(Q("shape.border.repeat.image"),X),_56o:Q("shape.border.3d"),_57o:Q("shape.border.3d.color"),_58o:Q("shape.border.3d.accuracy"),shapeGradient:Q("shape.gradient"),_59o:Q("shape.gradient.color"),_60o:Q("shape.border.pattern"),_61o:Q("shape.border.cap"),_62o:Q("shape.border.join"),shapeForeground:Q("shape.foreground"),bodyColor:S,gray:Q("2d.gray")}:{img:$p(x.getImage(D),S),bodyColor:S,gray:Q("2d.gray"),stretch:Q("image.stretch")},z=c.img;z&&z.renderHTML?(K._htmlInfo&&K._htmlInfo.img!==z&&(K._htmlInfo=C),K._htmlInfo||(K._htmlInfo={img:z,cache:{}}),p=z.renderHTML(D,x,K._htmlInfo.cache)):K._htmlInfo=C,K._htmlView&&K._htmlView!==p&&(K._htmlView.onHTMLRemoved&&K._htmlView.onHTMLRemoved(),me(K._htmlView.getView?K._htmlView.getView():K._htmlView)),(K._htmlView=p)&&x.appendHTML(p)&&(p.onHTMLAddedSync&&p.onHTMLAddedSync(),p.onHTMLAdded&&ef(p.onHTMLAdded)),c.rect=D.getRect(),c.position=D.p(),c.scale=D.getScale(),c.anchor=D.getAnchor(),c.rotation=D.getRotation(),I===xb&&(c._63o=Q("shape.depth"));var k=0;if(I)k=Nk(C,c._54o/2,c._62o),K.s("shape.dash")&&(k=h(k,(K.s("shape.dash.width")||c._54o)/2));else if(z&&z.boundExtend)if(k=hg(z.boundExtend,D,x),z.boundExtendAbsolute){var d=D.getScale();k/=x._zoom*h(1,h(A(d.x),A(d.y)))}else if(!hg(z.fitSize,D,x)){var e=hg(z.width,D,x),t=hg(z.height,D,x);k*=h(D.getWidth()/e,D.getHeight()/t)}K._40O(c,k);var Z=Q("clip.percentage");if(Z!=H&&(c.clipRect=jh(D.getAnchorRect(),Q("clip.direction"),Z)),I){var m=Q("shape.fill.clip.percentage");m!=H&&(c.shapeClipRect=jh(D.getAnchorRect(),Q("shape.fill.clip.direction"),m));var T=Q("shape.foreground.clip.percentage");T!=H&&(c.shapeForegroundClipRect=jh(D.getAnchorRect(),Q("shape.foreground.clip.direction"),T))}var _=Q("clip.host");_&&D.getHost()&&(c.clipHost=!0)},getPosition:function(v,H,e,j){var D=Zh(v,this._83o.rect,j);return D.x+=H,D.y+=e,D},_80o:function(q){var $=this,I=$.s,l=$.gv,K=$._data,v=$._83o,p=v.rect,n=v.position,H=v.rotation,U=v.anchor,J=v.scale,t=v.shape,G=v.clipHost,R=v.clipRect;if(!$._checkEmptyRect||p.width>0&&p.height>0){if(G){var r=K.getHost().getCorners();q.save(),q.beginPath(),r.forEach(function(P,c){c?q.lineTo(P.x,P.y):q.moveTo(P.x,P.y)}),q.clip()}var a=K.getSize();if(a.x=-a.width*U.x,a.y=-a.height*U.y,Ud&&!kj&&qo(q,a.width,a.height),q.save(),qo(q,n.x,n.y),Tp(q,H),ze(q,J.x,J.y),R&&(q.beginPath(),q.rect(R.x,R.y,R.width,R.height),q.clip()),l._drawForChecking&&v.img&&hg(v.img.pixelPerfect,K,l)===!1)ri(q,a.x,a.y,a.width,a.height,"#888888");else if($.freeDraw)$.freeDraw(q,a,v);else if(t){var D,M,w,u,P=v._60o,i=aq(q,P),c=v._27Q,b=v._54o,s=v.shapeGradientPack,k=v.gray,f=q.lineJoin,Y=q.lineCap,m=function(f){return k?T.toGrayColor(f):f};"roundRect"===t?D=I("shape.corner.radius"):"polygon"===t?(D=I("shape.polygon.side"),M=I("shape.corner.radius"),w=I("shape.regular")):"arc"===t&&(D=I("shape.arc.from"),M=I("shape.arc.to"),w=I("shape.arc.close"),u=I("shape.arc.oval")),q.lineJoin=v._62o,q.lineCap=v._61o;var V=m(v._53o);if(V||c||s){var e=v.shapeClipRect;e&&(q.save(),q.beginPath(),q.rect(e.x,e.y,e.width,e.height),q.clip()),Qf(q,t,a,D,M,w,u),s?lf(q,s,function(S){return Uo(S,v.bodyColor)},!1,a):c?Fl(q,c,m(v.bodyColor),null,K,l):wo(q,V,v.shapeGradient,m(v._59o),a),q.fill(),s&&q.restore(),e&&q.restore(),q!==i&&Qf(i,t,a,D,M,w,u)}else Qf(i,t,a,D,M,w,u);var L=v.shapeForeground;if(L){q.save();var Z=v.shapeForegroundClipRect;Z&&(q.beginPath(),q.rect(Z.x,Z.y,Z.width,Z.height),q.clip()),Qf(q,t,a,D,M,w,u),wo(q,L,I("shape.foreground.gradient"),m(I("shape.foreground.gradient.color")),a),q.fill(),q.restore()}if(b>0){var d=I("shape.border.width.absolute");d&&(q.save(),q.setTransform(1,0,0,1,0,0)),q.lineWidth=b;var o=m(v._55o),y=v.shapeBorderGradientPack;y?lf(q,y,m,!0,a):v.shapeBorderRepeatImage?qq(q,v.shapeBorderRepeatImage,o,null,K,l):q.strokeStyle=o,q.stroke(),y&&q.restore(),d&&q.restore(),v._56o&&Lh(q,o,m(v._57o),b,l._zoom,v._58o)}if(Sl(q,P),I("shape.dash")){var _=I("shape.dash.width")||b;if(_>0){P=I("shape.dash.pattern");var i=aq(q,P,$._2Q("shape.dash.offset"));i!==q&&Qf(i,t,a,D,M,w,u),$._1Q(q,"shape",_,P)}}Rk(q,V,v._63o,a),q.lineJoin=f,q.lineCap=Y}else{var F=$.interactiveInfo;F&&(q.interactiveInfo=F.bodyInfo={compInfos:[],matrix:new vi(H,n.x,n.y,J.x,J.y)}),v.gray&&(q.compGray=!0);var h=v.img;h&&h.cacheRule!=C&&(h=bj(q,h,v.stretch,a.width,a.height,K,l,v.bodyColor)),Oq(q,h,v.stretch,a.x,a.y,a.width,a.height,K,l,v.bodyColor),q.compGray=!1,q.interactiveInfo=C}q.restore(),G&&q.restore()}$._39O(q,v)},_48O:function(){},_47O:function(){}});var _g=function(L,n){Ei(_g,this,[L,n])},cb=function(E,K,n,O){var V=mp(E,K);return n=O?r(n,V):vo(n,V),V?n/=V:n=0,{x:E.x+(K.x-E.x)*n,y:E.y+(K.y-E.y)*n}};Po(_g,Od,{_3O:function(){var P,u=this,i=u._data,E=u.gv,m=u.s,r=m(xo),$=i.isLooped(),F=m("edge.width"),N=u.getBodyColor("edge.color"),f=m("edge.center"),e=m("edge.offset"),v=E.getBorderColor(i),W=v?m("border.width"):0,s=u.getSelectWidth(),Y=i._40I,J=i._41I,M=u._78o=Y&&J?{looped:$,type:r,width:F,center:f,color:N,repeatImage:$p(m("edge.repeat.image"),N),borderColor:v,borderWidth:W,_97o:s?u.getSelectColor():C,selectWidth:s,pattern:m("edge.pattern"),cap:m("edge.cap"),join:m("edge.join"),is3d:m("edge.3d"),_67o:m("edge.3d.color"),_66o:m("edge.3d.accuracy"),gray:m("2d.gray")}:C;if(M){var S=T.getEdgeType(r);if(S){var I=S(i,Id(u,E,i,$,r),E,u._19Q);I.points&&I.points.size()>1?(M.edgeTypeInfo=I,P=Jm(M.edgeTypeInfo.points)):I[od]&&I.rect&&(M.edgeTypeInfo=I,P=I.rect)}else{var X=m("edge.source.anchor.x"),Z=m("edge.source.anchor.y"),U=m("edge.target.anchor.x"),D=m("edge.target.anchor.y"),z=Op(E,i,"source"),A=Op(E,i,"target");if(r===Qr){var R=M.points=m(Kn)||Wd,w=R.size();M.segments=m("edge.segments");var j=X!==H||Z!==H||Cg(Y),l=U!==H||D!==H||Cg(J);if(!f)if(e)j||(z=cb(z,w?R.get(0):A,e,w)),l||(A=cb(A,w?R.get(w-1):z,e,w));else{var V;j||(V=zg(z,w?R.get(0):A,Gl(E,Y)),V&&(z={x:V[0],y:V[1]})),l||(V=zg(w?R.get(w-1):z,A,Gl(E,J)),V&&(A={x:V[0],y:V[1]}))}P=Ar(Jm(M.points),Jm(z,A))}else{var x=Id(u,E,i,$,r);if(u._19Q||(x=-x),$)z=ho(z),z.x=E.getNodeRect(Y).x,M.radius=x,P={x:z.x-x,y:z.y-x,width:2*x,height:2*x};else{var B=mp(z,A),g=vo(e,B),t={x:g,y:x},q={x:B-g,y:x},k=Nn(A.y-z.y,A.x-z.x),_=M.mat=new Ub(k);if(M.orienAngle=k,M.angle=A.x<z.x?k+kl:k,M.rect={x:t.x,y:t.y,width:q.x-t.x,height:0},M.origin=z,t=_.tf(t),t.x+=z.x,t.y+=z.y,q=_.tf(q),q.x+=z.x,q.y+=z.y,f){var c={x:B,y:0};c=_.tf(c),c.x+=z.x,c.y+=z.y,P=Jm([z,t,q,c]),M.c1=z,M.c2=c}else P=Jm(t,q);z=t,A=q}}M.sourcePoint=z,M.targetPoint=A,i._lastSourcePoint=z,i._lastTargetPoint=A}var a=0;m("edge.dash")&&(a=m("edge.dash.width")||F);var o="square"===M.cap?.71:.5;Nk(P,h(a*o,F*o+W+s),M.join),u._68o(P)}},getRotation:function(m,w,Z){m=m||0;var Q=this._78o;if(Q){var V,u=Q.angle,f=Q.points,T=Q.edgeTypeInfo;if(u!=C)return w?Q.orienAngle+m:u+m;if(T&&T[od])return T.getRotation?T.getRotation(this,m,w,Z):0;if(T&&T.points){var I=T.points;return V=I.size(),Vo[Z]?V&&0===V%2?Ak(I.get(V/2-1),I.get(V/2),w,m):m:ad[Z]?Ak(I.get(0),I.get(1),w,m):Ak(I.get(V-2),I.get(V-1),w,m)}if(f)return V=f.size(),Vo[Z]?V&&0===V%2?Ak(f.get(V/2-1),f.get(V/2),w,m):0===V?Ak(Q.sourcePoint,Q.targetPoint,w,m):m:ad[Z]?Ak(Q.sourcePoint,V?f.get(0):Q.targetPoint,w,m):Ak(V?f.get(V-1):Q.sourcePoint,Q.targetPoint,w,m)}return m},getPosition:function(q,i,D,M,t){var p=this._78o;if(p){var v,m=p.type,Q=p.points,_=p.edgeTypeInfo,O=p.sourcePoint,l=p.targetPoint;if(!m)return p.looped?{x:O.x-p.radius+i,y:O.y+D}:(t&&O&&l&&(O.x>l.x||O.x===l.x&&O.y>l.y)&&(q=sp[q],D=-D),v=Zh(q,p.rect,M),v.x+=i,v.y+=D,v=p.mat.tf(v),v.x+=p.origin.x,v.y+=p.origin.y,v);if(_&&_[od])return _.getPosition?_.getPosition(this,q,i,D,M,t):{x:(O.x+l.x)/2,y:(O.y+l.y)/2};if(Q){var v,x=Q.size();if(Vo[q]){if(x){var h=x%2;if(0===h)return Nf(Q.get(x/2-1),Q.get(x/2),q,i,D,M,t);v=Q.get((x-h)/2)}else v={x:(O.x+l.x)/2,y:(O.y+l.y)/2};return v=Zh(q,{x:v.x,y:v.y,width:0,height:0},M),v.x+=i,v.y+=D,v}return ad[q]?Nf(O,x?Q.get(0):l,q,i,D,M,t):Nf(x?Q.get(x-1):O,l,q,i,D,M,t)}if(_){var d=_.points,x=d.size();if(Vo[q]){var h=x%2;return 0===h?Nf(d.get(x/2-1),d.get(x/2),q,i,D,M,t):(v=d.get((x-h)/2),v=Zh(q,{x:v.x,y:v.y,width:0,height:0},M),v.x+=i,v.y+=D,v)}return ad[q]?Nf(d.get(0),d.get(1),q,i,D,M,t):Nf(d.get(x-2),d.get(x-1),q,i,D,M,t)}}return Sr},_42:function(h){this._78o&&_g.superClass._42.call(this,h)},drawPath:function(E,v){E.beginPath();var J=v.type,q=v.points,d=v.segments,j=v.edgeTypeInfo;if(!J||q){var u=v.sourcePoint,k=u.x,B=u.y,P=v.targetPoint,e=P.x,O=P.y;if(J)if(d){var L=new Dg({x:k,y:B});L.addAll(q),L.add({x:e,y:O}),Fc(E,L,d)}else E.moveTo(k,B),q.each(function(s){E.lineTo(s.x,s.y)}),E.lineTo(e,O);else v.looped?E.arc(k,B,v.radius,0,ok,!0):v.center?(E.moveTo(v.c1.x,v.c1.y),E.lineTo(k,B),E.lineTo(e,O),E.lineTo(v.c2.x,v.c2.y)):(E.moveTo(k,B),E.lineTo(e,O))}else j&&(j.points?Fc(E,j.points,j.segments):j[od]&&j[od](E,j))},_80o:function(n){var j=this,V=j.s,D=j._78o,p=D.width,Y=D.selectWidth,c=D.borderWidth,Z=D.repeatImage,H=n.lineJoin,O=n.lineCap,J=D.gray,F=D.pattern;n.lineJoin=D.join,n.lineCap=D.cap,j.drawPath(aq(n,F),D);var r=V("edge.width.absolute");r&&(n.save(),n.setTransform(1,0,0,1,0,0)),Y&&(n.strokeStyle=D._97o,n.lineWidth=p+2*(c+Y),n.stroke()),c&&(n.strokeStyle=J?T.toGrayColor(D.borderColor):D.borderColor,n.lineWidth=p+2*c,n.stroke());var d=J?T.toGrayColor(D.color):D.color;if(Z?qq(n,Z,d,null,j._data,j.gv):n.strokeStyle=d,n.lineWidth=p,n.stroke(),D.is3d){var b=J?T.toGrayColor(D._67o):D._67o;Lh(n,d,b,p,j.gv._zoom,D._66o)}if(V("edge.dash")){F=V("edge.dash.pattern");var B=aq(n,F,j._2Q("edge.dash.offset"));B!==n&&j.drawPath(B,D),j._1Q(n,"edge",V("edge.dash.width")||p,F)}r&&n.restore(),Sl(n,F),n.lineJoin=H,n.lineCap=O},_48O:function(){},_47O:function(){}});var ij=function(N,O){Ei(ij,this,[N,O])};Po(ij,Bj,{_3O:function(){var i,$,S=this,v=S.s,s=S._data,k=S.gv;if(S._88I=C,s.isExpanded()&&s.eachChild(function(z){if(Tk(z)){var V=k.getBoundsForGroup(z);V&&($||($=[]),$.push(V),i=Ar(i,V))}}),i){var c=k.getLabel(s),B=v("group.type"),D=v("group.border.width")||0,l=v("group.border.width.absolute"),N=D/2;l&&(D/=k._zoom),i=Cf(B,$,i),bm(i,s,"group.padding",1),Sb(i,D);var t=S._88I={type:B,rect:i,_64o:i};if(!B&&c!=C){var M,J=S.labelInfo={label:c,color:v("group.title.color"),font:v("group.title.font"),align:v("group.title.align")},X=Xi(J,c),Z=X.width+D,T=X.height+D,V=v("group.title.align"),g=v("group.title.orientation");if(g===pc||g===rq?(i.height+=D,Z>i.width&&(i.width=Z)):(g===Ob||g===zb)&&(i.width+=D,Z>i.height&&(i.height=Z)),M=V===Ob?i.x:V===zb?i.x+i.width-Z:i.x+i.width/2-Z/2,g===rq)t.titleRect={x:i.x,y:i.y+i.height,width:i.width,height:T},t.rect={x:i.x,y:i.y,width:i.width,height:i.height+T},J.rect={x:M,y:i.y+i.height,width:Z,height:T};else if(g===Ob){var E=t.titleRect={x:i.x-T,y:i.y,width:T,height:i.height};t.rect={x:i.x-T,y:i.y,width:i.width+T,height:i.height},J.rect={x:E.x+T/2-i.height/2,y:E.y+i.height/2-T/2,width:i.height,height:T},J.rotation=-Math.PI/2}else if(g===zb){var E=t.titleRect={x:i.x+i.width,y:i.y,width:T,height:i.height};t.rect={x:i.x,y:i.y,width:i.width+T,height:i.height},J.rect={x:E.x+T/2-i.height/2,y:E.y+i.height/2-T/2,width:i.height,height:T},J.rotation=Math.PI/2}else t.titleRect={x:i.x,y:i.y-T,width:i.width,height:T},t.rect={x:i.x,y:i.y-T,width:i.width,height:i.height+T},J.rect={x:M,y:i.y-T-N,width:Z,height:T+D}}S._40O(t,v("group.border.width")/2)}else ij.superClass._3O.call(S)},getPosition:function(w,L,f,M){var d=this._88I;if(d){var v=Zh(w,d.rect,M);return v.x+=L,v.y+=f,v}return ij.superClass.getPosition.apply(this,arguments)},_24O:function(A,O){var l=this._88I;(!l||l.type||"label2"===A)&&ij.superClass._24O.call(this,A,O)},_80o:function(i){var M=this,j=M._88I;if(j){var e=M._data,g=M.s,_=M.gv,l=j.type,w=j.rect,I=j._64o,h=j.titleRect,x=M.getBodyColor(),A=$p(g("group.image"),x),T=g("group.image.stretch"),L=M.getBodyColor("group.background"),J=$p(g("group.repeat.image"),x),Z=g("group.gradient.pack"),y=g("group.gradient"),P=g("group.gradient.color"),N=g("group.border.width"),c=g("group.border.color"),S=g("group.border.pattern"),k=g("group.title.orientation"),C=g("group.depth"),R=g("group.border.radius"),z=g("group.border.join"),H=g("group.border.cap"),F=g("group.border.width.absolute");F&&(N/=_._zoom);var m=c,q=g("group.border.repeat.image");if(q&&(q=$p(q,c))&&(m=Sg(i,q,c,null,e,_)),l){var O=i.lineJoin,u=i.lineCap;if(i.lineJoin=z,i.lineCap=H,A){if(i.save(),Qf(i,l,w,R),i.clip(),Oq(i,A,T,w.x,w.y,w.width,w.height,e,_,x),i.restore(),N>0){var s=aq(i,S);Qf(s,l,w,R),i.lineWidth=N,i.strokeStyle=m,i.stroke(),Sl(i,S)}}else{var s=aq(i,S);L||J||Z?(Qf(i,l,w,R),Z?lf(i,Z,function(l){return Uo(l,x)},!1,w):J?Fl(i,J,x,null,e,_):wo(i,L,y,P,w),i.fill(),Z&&i.restore(),i!==s&&Qf(s,l,w,R)):Qf(s,l,w,R),N>0&&(i.lineWidth=N,i.strokeStyle=m,i.stroke()),Sl(i,S),l===xb&&Rk(i,L,C,w)}i.lineJoin=O,i.lineCap=u}else{var Y=g("group.title.background");if((!R||0>R)&&(R=0),A)Oq(i,A,T,I.x,I.y,I.width,I.height,e,_,M.getBodyColor());else if(L||J)if(J?Fl(i,J,x,null,e,_):wo(i,L,y,P,I),0===N)Qf(i,xb,I),i.fill(),Rk(i,L,C,I);else{switch(i.beginPath(),k){case rq:Dk(i,I.x,I.y,I.width,I.height,R,R,0,0);break;case Ob:Dk(i,I.x,I.y,I.width,I.height,0,R,0,R);break;case zb:Dk(i,I.x,I.y,I.width,I.height,R,0,R,0);break;case pc:Dk(i,I.x,I.y,I.width,I.height,0,0,R,R)}i.fill()}if(h&&Y)if(0===N)ri(i,h.x,h.y,h.width,h.height,Y),Rk(i,Y,C,h);else{switch(i.beginPath(),i.fillStyle=Y,k){case rq:Dk(i,h.x,h.y,h.width,h.height,0,0,R,R);break;case Ob:Dk(i,h.x,h.y,h.width,h.height,R,0,R,0);break;case zb:Dk(i,h.x,h.y,h.width,h.height,0,R,0,R);break;case pc:Dk(i,h.x,h.y,h.width,h.height,R,R,0,0)}i.fill()}if(N>0){var s=aq(i,S);if(Qf(s,"roundRect",w,R),i.save(),i.lineWidth=N,i.strokeStyle=m,i.lineJoin=z,i.lineCap=H,i.closePath(),i.stroke(),h&&g("group.splitLine")){var W=h.x,$=h.y,B=h.width,f=h.height;i.beginPath(),k===rq?(i.moveTo(W,$),i.lineTo(W+B,$)):k===Ob?(i.moveTo(W+B,$),i.lineTo(W+B,$+f)):k===zb?(i.moveTo(W,$),i.lineTo(W,$+f)):(i.moveTo(W,$+f),i.lineTo(W+B,$+f))}i.stroke(),i.restore(),Sl(s,S)}}M._39O(i,j)}else ij.superClass._80o.call(M,i)}});var pg=function(l,s){Ei(pg,this,[l,s])};Po(pg,Bj,{_80o:function(x){this._39O(x,this._83o)}});var qh=function(c,A){Ei(qh,this,[c,A])};Po(qh,Bj,{_3O:function(){var n=this,c=n._data,O=n.s,M=n.gv,j=c.getPoints(),f=M.getBorderColor(c),G=f?O("border.width"):0,z=n.getSelectWidth(),F=O("shape.border.width"),N=c.getRect(),x=c.getAnchorRect(),$=M.getBodyColor(c),J=O("shape.border.color"),Y=n._99o=j.isEmpty()?C:{rect:N,rotation:c.getRotation(),fillRule:O("shape.fill.rule"),scale:c.getScale(),position:c.p(),points:j,segments:c.getSegments(),bodyColor:$,borderColor:f,borderWidth:G,_94o:O("shape.border.3d"),_95o:O("shape.border.3d.color"),_96o:O("shape.border.3d.accuracy"),_97o:z?n.getSelectColor():C,selectWidth:z,_53o:O("shape.background"),_27Q:$p(O("shape.repeat.image"),$),shapeGradientPack:O("shape.gradient.pack"),shapeBorderGradientPack:O("shape.border.gradient.pack"),_54o:F,_55o:J,shapeBorderRepeatImage:$p(O("shape.border.repeat.image"),J),shapeGradient:O("shape.gradient"),_59o:O("shape.gradient.color"),_60o:O("shape.border.pattern"),_61o:O("shape.border.cap"),_62o:O("shape.border.join"),shapeForeground:O("shape.foreground"),gray:O("2d.gray")};if(Y){x.x+=Y.position.x,x.y+=Y.position.y,Y.gradientRect=x;var o=c.getScale(),P=h(1,h(A(o.x),A(o.y)));O("shape.dash")&&O("shape.dash.width")>F&&(F=O("shape.dash.width"));var i,r=O("shape.border.width.absolute");i=r?(F+G+z)/n.gv._zoom/P:F*("square"===Y._61o?.71:.5)+G+z/n.gv._zoom/P,i&&(i*=P,N=ho(N),Nk(N,i,Y._62o)),n._68o(N);var q=O("clip.percentage");q!=H&&(Y.clipRect=jh(c.getAnchorRect(),O("clip.direction"),q));var D=O("shape.fill.clip.percentage");D!=H&&(Y.shapeClipRect=jh(c.getAnchorRect(),O("shape.fill.clip.direction"),D));var g=O("shape.foreground.clip.percentage");g!=H&&(Y.shapeForegroundClipRect=jh(c.getAnchorRect(),O("shape.foreground.clip.direction"),g))}},getPosition:function(h,A,K,Z){var Y=this._99o;if(Y){var M=Zh(h,Y.rect,Z);return M.x+=A,M.y+=K,M}return Sr},_42:function(U){this._99o&&qh.superClass._42.call(this,U)},_80o:function(o){var l,p=this,e=p.s,z=p._99o,P=z.position,W=z.scale,h=z.rotation,m=z.borderWidth,U=p.gv._zoom,M=z.selectWidth/U,X=z._27Q,S=z.shapeGradientPack,V=z._54o,d=z.clipRect,O=z.shapeClipRect,C=z.points,q=z.segments,g=p._data.isClosePath(),Z=z.fillRule,J=z.gray,n=function(Y){return J?T.toGrayColor(Y):Y},K=n(z._53o),$=K||X||S;o.save(),qo(o,P.x,P.y),Tp(o,h),ze(o,W.x,W.y),d&&(o.beginPath(),o.rect(d.x,d.y,d.width,d.height),o.clip()),$&&O&&(o.save(),o.beginPath(),o.rect(O.x,O.y,O.width,O.height),o.clip()),L.Default.extractShapeTranslation?(C=ho(C),C.forEach(function(c){c.x-=P.x,c.y-=P.y}),z.gradientRect.x-=P.x,z.gradientRect.y-=P.y):qo(o,-P.x,-P.y);var i=e("shape.border.width.absolute"),s=z._60o;i&&s&&(s=s.map(function(W){return W*U}));var B=aq(o,s),t=o.lineJoin,u=o.lineCap;o.lineJoin=z._62o,o.lineCap=z._61o;var _=n(z.bodyColor);$?(Fc(o,C,q,g),S?lf(o,S,function(X){return Uo(X,z.bodyColor)},!1,z.gradientRect):X?Fl(o,X,_,null,p._data,p.gv):(l=_?_:K,wo(o,l,z.shapeGradient,n(z._59o),z.gradientRect)),o.fill(Z),S&&o.restore(),O&&(o.restore(),qo(o,-P.x,-P.y)),B!==o&&Fc(B,C,q,g)):Fc(B,C,q,g);var y=z.shapeForeground;if(y){o.save();var c=z.shapeForegroundClipRect;c&&(qo(o,P.x,P.y),o.beginPath(),o.rect(c.x,c.y,c.width,c.height),o.clip(),qo(o,-P.x,-P.y)),Fc(o,C,q,g),wo(o,y,e("shape.foreground.gradient"),n(e("shape.foreground.gradient.color")),z.gradientRect),o.fill(Z),o.restore()}if(i&&(o.save(),o.setTransform(1,0,0,1,0,0)),M&&(o.strokeStyle=z._97o,o.lineWidth=V+2*(m+M),o.stroke()),m&&(o.strokeStyle=n(z.borderColor),o.lineWidth=V+2*m,o.stroke()),V){l=n(z._55o);var w=z.shapeBorderGradientPack;w?lf(o,w,n,!0,z.gradientRect):z.shapeBorderRepeatImage?qq(o,z.shapeBorderRepeatImage,l,null,p._data,p.gv):(!K&&_&&(l=_),o.strokeStyle=l),o.lineWidth=V,o.stroke(),w&&o.restore(),z._94o&&Lh(o,l,n(z._95o),V,U,z._96o)}if(Sl(o,s),e("shape.dash")){var b=e("shape.dash.width")||V;if(b>0){s=e("shape.dash.pattern"),i&&(s=s.map(function(Y){return Y*U}));var B=aq(o,s,p._2Q("shape.dash.offset"));B!==o&&Fc(B,C,q,g),p._1Q(o,"shape",b,s)}}i&&o.restore(),o.lineJoin=t,o.lineCap=u,o.restore()},_48O:function(){},_47O:function(){}});var Qn=function(T,m){Ei(Qn,this,[T,m])};Po(Qn,qh,{getRotation:function(){var D=new Sf,J=new Sf,p=new vi;return function(q,K,M){q=q||0;var v=this._data,Y=v.getPoints(),r=Y.size();if(r>1){var z,u,W=v.p(),n=v.getScale();if(p.identity().translate(-W.x,-W.y).scale(n.x,n.y).translate(W.x,W.y),Vo[M]){var l=r%2,h=(r-l)/2;z=Y.get(h-1),u=Y.get(h)}else ad[M]?(z=Y.get(0),u=Y.get(1)):(z=Y.get(r-2),u=Y.get(r-1));return p.apply(z,D),p.apply(u,J),Ak(D,J,K,q)}return q}}(),getPosition:function(){var X=new Sf,s=new Sf,V=new Sf;return function(O,f,i,Z,M){var Q=this._data,U=Q.getPoints(),h=U.size();if(h>1){var d,a,K=Q.getPointsMatrix2d();if(Vo[O]){var P=h%2,L=(h-P)/2;if(d=U.get(L-1),a=U.get(L),0!==P){var Y=Zh(O,Sr,Z);return Y.x+=f,Y.y+=i,K.apply(d,X),K.apply(a,s),K.identity().rotate(V.copy(s).sub(X).angle()).apply(Y,X).add(s)}}else ad[O]?(d=U.get(0),a=U.get(1)):(d=U.get(h-2),a=U.get(h-1));return K.apply(d,X),K.apply(a,s),Nf(X,s,O,f,i,Z,M)}return Sr}}()});var Hf=function(e,V){Ei(Hf,this,[e,V])};Po(Hf,Bj,{_3O:function(){var E=this;Hf.superClass._3O.call(E);var B=E.s,u=E._83o;E._82o=u.img||u.shape?C:{background:E.getBodyColor("grid.background"),depth:B("grid.depth"),rect:u.rect,_88o:B("grid.cell.depth"),cellBorderColor:B("grid.cell.border.color"),_89o:B("grid.row.count"),_90o:B("grid.column.count"),block:B("grid.block"),_91o:B("grid.block.color"),_92o:B("grid.block.padding"),_93o:B("grid.block.width")}
},_80o:function(M){var S=this,Z=S._82o;if(!Z)return Hf.superClass._80o.call(S,M),void 0;var H,G,C=S._data,j=Z.background,p=Z.rect,P=Z.block,J=Z._91o,U=Z._92o,X=Z._93o,v=Z._88o,T=Z.cellBorderColor,e=Z._89o,o=Z._90o;if(j)if(ri(M,p.x,p.y,p.width,p.height,j),Rk(M,j,Z.depth,p),v)for(H=0;e>H;H++)for(G=0;o>G;G++)p=C.getCellRect(H,G),p&&Rk(M,j,v,p);else if(T){for(M.beginPath(),H=0;e>H;H++)for(G=0;o>G;G++)p=C.getCellRect(H,G),p&&M.rect(p.x,p.y,p.width,p.height);M.strokeStyle=T,M.lineWidth=1,M.stroke()}if("h"===P)for(H=0;e>H;H++)p=Ar(C.getCellRect(H,0),C.getCellRect(H,o-1)),Sb(p,U),lo(M,J,p.x,p.y,p.width,p.height,X);else if("v"===P)for(G=0;o>G;G++)p=Ar(C.getCellRect(0,G),C.getCellRect(e-1,G)),Sb(p,U),lo(M,J,p.x,p.y,p.width,p.height,X);S._39O(M,S._83o)}});var ih=function(H,W){Ei(ih,this,[H,W])},mr=I?uc().getContext("2d"):C;Po(ih,Bj,{_checkEmptyRect:!1,_81o:function(){var g=this._data,Y=ih.superClass._81o.call(this),B=g.s("text");if(B!=C){B+="";var z,v=g.s("text.font"),i=g.s("text.align"),E=g.s("text.vAlign"),V=g.s("text.wrap"),X=g.s("text.vertical"),Z=g.s("text.vertical.gap"),k=g.s("text.letter.gap")||0,O=g.getWidth(),d=g.getHeight();if(null==Z&&(Z=1),X){var D;D=V?ao(B,d,v,k,X,Z):[B];var p=(D.length-1)*k,F=0;mr.textBaseline=pc,mr.font=v,D.forEach(function(f){for(var C=f.length,z=0,r=(C-1)*Z,l=0;C>l;l++){var n=mr.measureText(f[l]);r+=n.fontBoundingBoxDescent||Pr(v,f[l]).height,z=h(z,n.width)}p+=z,F=h(r,F)});var n=(D.length-1)*k;D.forEach(function(o){n+=o}),z={width:p,height:F}}else{var D=V?ao(B,O,v,k,X,Z):B.split("\n"),A=D.length;if(A>1){var y=Pr(v,B).height,p=0,F=y*A+Z*(A-1);D.forEach(function(y){p=h(p,Pr(v,y).width)}),z={width:p,height:F}}else z=Pr(v,B),k&&(z.width+=(B.length-1)*k)}var R,o,L=z.width,N=z.height,S=g.getAnchor();"left"===i?R=-O*S.x:"center"===i?R=-O*S.x+(O-L)/2:"right"===i&&(R=O*(1-S.x)-z.width),"top"===E?o=-d*S.y:"middle"===E?o=-d*S.y+(d-N)/2:"bottom"===E&&(o=d*(1-S.y)-z.height);var l,K=g.getMatrix();if(l=Jm([K.tf(R,o),K.tf(R+L,o),K.tf(R+L,o+N),K.tf(R,o+N)]),Y=Ar(Y,l),Y&&g.s("text.shadow")){var W=ho(Y);W.x+=g.s("text.shadow.offset.x"),W.y+=g.s("text.shadow.offset.y"),Sb(W,g.s("text.shadow.blur")),Y=Ar(Y,W)}}return Y}});var Nl=gi.Interactor=function(j){this.gv=this._graphView=j};$l("Interactor",b,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(T){this.gv.fi(T)},setCursor:function(n){Cd||this.gv.setCursor(n)},startDragging:function(c){var j=this;j._lastClientPoint=oo(c),j._lastLogicalPoint=j.gv.lp(c),Jl(j,c)},clearDragging:function(){var g=this;g._lastClientPoint=g._lastLogicalPoint=g._logicalPoint=C},autoScroll:function(s){return this.gv.autoScroll(s,this._lastClientPoint)}});var _l=C,_p=function(B){_l.handleWindowTouchMove(B)},Cp=function(A){_l.handleWindowTouchEnd(A),J(f,kg,_p),J(f,go,Cp),_l=C},Ee=function(y){_l.handleWindowMouseMove(y)},dp=function(W){_l.handleWindowMouseUp(W),J(f,Ye,Ee),J(f,ej,dp),_l=C},Og=function(w,E){if(w!==_l){var c=To(E);_l?c?_l.handleWindowTouchEnd(E):_l.handleWindowMouseUp(E):c?(g(f,kg,_p),g(f,go,Cp)):(g(f,Ye,Ee),g(f,ej,dp)),_l=w}},Jc=function(I){var d=this;d.gv=I,d._is2d=I instanceof gi.GraphView,d._eventListeners={},["mousedown","mousemove","mouseleave","touchstart","touchmove",th,"wheel"].forEach(function(Q){d.addListener(Q)}),d.initImageResource()};Po(Jc,Nl,{enableVR:function(U){var K=this;!!K._vrEnable!==U&&(K._vrEnable=U,U?K.gv.vr.mp(K.onVRControllerChange,K):K.gv.vr.ump(K.onVRControllerChange,K))},onVRControllerChange:function(Z){var n=this,X=Z.property,t=Z.newValue,A=t.id,w=n.gv.vr.getController(A),y=w.getRay();if(y){y.controllerId=A;var E=n.gv.vr.getRayEventType(y,X,t[Eq]);switch(E){case"down":n.handle_mousedown(y);break;case"up":_l&&dp(y);break;case"move":n.handle_mousemove(y),_l&&n.handleWindowMouseMove(y)}}},setPreventEventDefault:function(I,L){var J=this,u=J._eventListeners[I];u?u._prevent=L:J._eventListeners[I]=u={_removal:H,_prevent:L}},removeListener:function(K){var $=this,l=$._eventListeners[K];l&&l._removal&&(l._removal(),l._removal=H)},addListener:function(a){var R=this,Q=R._eventListeners[a];if(Q||(R._eventListeners[a]=Q={_removal:H,_prevent:!0}),!Q||!Q._removal){var O=function(U){Q._prevent&&T.preventDefault(U),R.disabled||R.gv._48Q||("wheel"===a?Ll(R,U):R["handle_"+a](U))};g(R.gv.getView(),a,O),Q._removal=function(){J(R.gv.getView(),a,O)}}},handleWindowTouchMove:function(l){this.handleWindowMouseMove(l)},handleWindowMouseMove:function(s){return!this.downInfo||To(s)&&1!==cg(s)?(this.isDragging&&(this.handleDownInfo("onEndDrag",s),this.isDragging=!1),void 0):(this.isDragging?this.handleDownInfo("onDrag",s):(this.handleDownInfo("onBeginDrag",s),this.isDragging=!0),void 0)},handleWindowTouchEnd:function(X){this.handleWindowMouseUp(X)},handleWindowMouseUp:function(H){if(this.isDragging&&(this.handleDownInfo("onEndDrag",H),this.isDragging=!1),this.downInfo){var K=this.handle("onUp",H);if(K&&K.data===this.downInfo.data){this.handleMissingUp(H);var w=this,R=2===H.button?"onContextMenu":"onClick",D=K.data;if(D.s("disableDoubleClick")||!w._dbclickTimer)return w._dbclickTimer=Yi(function(){delete w._dbclickTimer,w.handleClick(H,R,K),this.downInfo=C},T.clickDelay),void 0;Oi(w._dbclickTimer),delete w._dbclickTimer,R="onDoubleClick",w.handleClick(H,R,K)}else this.handleDownInfo("onUp",H);this.downInfo=C,this.downComps=C}},handle_mouseleave:function(Z){var I=this,G=I.gv;I._hoverTimer&&(Oi(I._hoverTimer),delete I._hoverTimer);var h=I.currentInfo?I.currentInfo.data:C;if(h){h.s("onLeave")&&h.s("onLeave")(Z,h,G),I.fire("data","onLeave",Z,h);var g=I.currentInfo?I.currentInfo.hits:C;if(g)for(var z in g)I.handleLeave(Z,z);I.currentInfo=C}},handle_mousewheel:function(O){O.scrollDelta=O.wheelDelta/40,this.handle("onScroll",O)},handle_DOMMouseScroll:function(D){D.scrollDelta=2===D.axis?-D.detail:0,this.handle("onScroll",D)},handle_touchstart:function(D){this.handle_mousedown(D)},handle_touchmove:function($){this.handle("onMove",$)},handle_mousedown:function(M){this.isDragging&&(this.handleDownInfo("onEndDrag",M),this.isDragging=!1),this.downComps=[],this.downInfo=this.handle("onDown",M),this.downInfo&&Og(this,M)},handle_mousemove:function(V){var g=this,X=g.gv;if(g._hoverTimer&&(Oi(g._hoverTimer),delete g._hoverTimer),!X._panning&&!X._moving){var s,H,e,$=g.handle("onMove",V),O=this.currentInfo?this.currentInfo.data:C,b=this.currentInfo?this.currentInfo.hits:C;if($&&(H=$.data,e=$.hits,g._hoverTimer=Yi(function(){Oi(g._hoverTimer),delete g._hoverTimer,g.handle("onHover",V,$)},X.getHoverDelay()||T.hoverDelay)),H!==O){if(O&&(O.s("onLeave")&&O.s("onLeave")(V,O,X),this.fire("data","onLeave",V,O)),H&&(H.s("onEnter")&&H.s("onEnter")(V,H,X),this.fire("data","onEnter",V,H)),b)for(s in b)this.handleLeave(V,s);if(e)for(s in e){var y=e[s],Y=H._interactPrefix=y.prefix,q=Y&&H.a(Y+"onEnter")||y.target.onEnter;q&&q.call(y.target,V,H,X,y.point,y.width,y.height),this.fire(y.type,"onEnter",y.event,y.data,y.image,y.comp,y.point,y),H._interactPrefix=null}}else{if(b)for(s in b)e&&e[s]||this.handleLeave(V,s);if(e)for(s in e)if(!b||!b[s]){var y=e[s],Y=H._interactPrefix=y.prefix,q=Y&&H.a(Y+"onEnter")||y.target.onEnter;q&&q.call(y.target,V,H,X,y.point,y.width,y.height),this.fire(y.type,"onEnter",y.event,y.data,y.image,y.comp,y.point,y),H._interactPrefix=null}}this.currentInfo=$}},handle:function(c,r,P){var u,s=this,i=s.gv;if(s._is2d){if(P=P||i.getDataInfoAt(r),!P||!i.isInteractive(P.data))return;if(u=P.ui.interactiveInfo){var H,T=P.data;if(T.s(c)&&T.s(c)(r,T,i),this.fire("data",c,r,T),"body"===P.part&&u.bodyInfo)H="body",P.hits=this.handleImage(H,i.getImage(T),c,r,T,P.point,u.bodyInfo);else if("icons"===P.part&&u._38o){var W=u._38o[P.name];W&&W[P.index]&&(H="icons|"+P.name+"|"+P.index,P.hits=this.handleImage(H,P.icon,c,r,T,P.point,W[P.index]))}}return P}var T,j;if(!P)if(r&&r instanceof L.Math.Ray&&i.isVREnabled()){var d=i.vr.intersectWorld(r);if(T=d.data,j=d.intersect,i.vr.renderRayDuringInteraction(r,T,j),!T)return;var F=i.getData3dUI(T);if(u=F.interactiveInfo,!u)return;P={data:T,part:j.part,ui:F}}else{if(P=this.getDataInfoAt(r),!P)return;P&&(P={data:P.data,part:P.part})}if(i.isInteractive(P.data)){if(!j){T=P.data;var F=i.getData3dUI(T);if(P.ui=F,u=F.interactiveInfo,!u)return P}if(T.s(c)&&T.s(c)(r,T,i),this.fire("data",c,r,T),!j&&(j=i.intersectObject(r,T),!j))return P;var e,E=j.part;return"body"!==E&&(e=T.s(E+".image")||T.s("shape3d."+E+".image")),e||(e=T.s("all.image")||T.s("shape3d.image")),e?(u="object"==typeof e?u[e.uuid]:u[e],u&&u.bodyInfo?(P.part="body",P.interactiveInfo=u,P.point=this._convertUVToPoint(j.uv,u,T,E,e),P.image=e,P.hits=this.handleImage("body",e,c,r,T,P.point,u.bodyInfo),P):P):P}},_handleLeaveOrMissing:function(d,b,N){var a="leave"===d?this.currentInfo:this.downInfo;if(a){var s=a.interactiveInfo||a.ui.interactiveInfo;if(s){var B,o,Q=a.data;if(this._is2d){if(o=this.gv.lp(b),"body"===a.part&&s.bodyInfo)B="body","leave"===d?this.handleLeaveImage(N,B,this.gv.getImage(Q),b,Q,o,s.bodyInfo):this.handleMissingUpImage(B,this.gv.getImage(Q),b,Q,o,s.bodyInfo);else if("icons"===a.part&&s._38o){var j=s._38o[a.name];j&&j[a.index]&&(B="icons|"+a.name+"|"+a.index,"leave"===d?this.handleLeaveImage(N,B,a.icon,b,Q,o,j[a.index]):this.handleMissingUpImage(B,a.icon,b,Q,o,j[a.index]))}}else{if(!s.bodyInfo)return;var w=this.gv.intersectObject(b,Q);o=w&&w.uv?this._convertUVToPoint(w.uv,s,Q,w.part,a.image):{x:1/0,y:1/0},"leave"===d?this.handleLeaveImage(N,"body",a.image,b,Q,o,s.bodyInfo):this.handleMissingUpImage("body",a.image,b,Q,o,s.bodyInfo)}}}},handleClick:function(U,L,q){var E=this,F=this.downInfo;if(F&&q){var R,M=q.interactiveInfo||q.ui.interactiveInfo,h=q.data,f=this.gv;if(h.s(L)&&h.s(L)(U,h,f),E.fire("data",L,U,h),M)if(this._is2d){if(F.part===q.part){var y=f.lp(U);"body"===q.part&&M.bodyInfo&&(R="body",this.handleClickImage(R,f.getImage(h),L,U,h,y,M.bodyInfo,q))}}else{if(!M.bodyInfo)return;var I=f.intersectObject(U,h);if(!I)return;y=this._convertUVToPoint(I.uv,M,h,I.part,F.image),this.handleClickImage("body",F.image,L,U,h,y,M.bodyInfo,q)}}},handleDownInfo:function(M,L){if(this.downInfo){var G=this.downInfo,d=this.gv,c=G.interactiveInfo||G.ui.interactiveInfo;if(c){var A,R=G.data;if(R.s(M)&&R.s(M)(L,R,d),this.fire("data",M,L,R),this._is2d){var I=d.lp(L);if("body"===G.part&&c.bodyInfo)A="body",this.handleDownInfoImage(A,d.getImage(R),M,L,R,I,c.bodyInfo);else if("icons"===G.part&&c._38o){var j=c._38o[G.name];j&&j[G.index]&&(A="icons|"+G.name+"|"+G.index,this.handleDownInfoImage(A,G.icon,M,L,R,I,j[G.index]))}}else{if(!c.bodyInfo)return;var _;if("onBeginDrag"===M?(_=d._raycaster.intersectObjectAndRecordTriangle(L,R),_&&(c.beginDragIntersectInfo=_.triangleInfo)):_=d.intersectObject(L,R),!_&&("onDrag"!==M&&"onEndDrag"!==M||!c.beginDragIntersectInfo||(_=d._raycaster.intersectLastTriangle(L,c.beginDragIntersectInfo)),!_))return;I=this._convertUVToPoint(_.uv,c,R,_.part,G.image),this.handleDownInfoImage("body",G.image,M,L,R,I,c.bodyInfo)}}}},fire:function(P,Z,c,L,o,v,g,O){this.gv.fi({kind:Z,type:P,event:c,data:L,image:o,comp:v,view:this.gv,point:g,width:O?O.width:H,height:O?O.height:H})},handleImage:function(C,p,J,y,I,h,q){var u={};if(p&&(p=$p(p))){var j=this.gv,Z=q.rect,S=this.convertPoint(h,q);S.inRect&&(p[J]&&p[J](y,I,j,S,Z.width,Z.height),this.fire("image",J,y,I,p,H,S,Z),u[C+"|image"]={target:p,type:"image",image:p,data:I,event:y,point:S,width:Z.width,height:Z.height});for(var X,N=q.compInfos,e=p,r=N.length-1;r>=0;r--){var o=N[r],M=o.comp;if(S=this.convertPoint(h,o,e,M,j,I),S.inRect){Z=o.rect;var x=I._interactPrefix=o.prefix,F=x&&I.a(x+J)||M[J];if(F&&(X=F.call(M,y,I,j,S,Z.width,Z.height)),this.fire("comp",J,y,I,p,M,S,Z),X!==!0&&(p=Z.image)&&(p[J]&&(X=p[J](y,I,j,S,Z.width,Z.height)),this.fire("image",J,y,I,p,H,S,Z)),I._interactPrefix=null,u[C+"|"+r]={target:M,type:"comp",comp:M,image:p,data:I,event:y,point:S,width:Z.width,height:Z.height,prefix:x},this.downComps&&this.downComps.push(M),p&&(u[C+"|"+r+"|image"]={target:p,type:"image",image:p,data:I,event:y,point:S,width:Z.width,height:Z.height,prefix:x}),X===!0)break}}}return u},handleLeave:function(k,y){return this._handleLeaveOrMissing("leave",k,y)},handleMissingUp:function(w){return this._handleLeaveOrMissing("missing",w)},handleLeaveImage:function(_,k,S,X,B,R,g){if(S&&(S=$p(S))){var A=this.gv,u=g.rect,y=this.convertPoint(R,g);_===k+"|image"&&(S.onLeave&&S.onLeave(X,B,A,y,u.width,u.height),this.fire("image","onLeave",X,B,S,H,y,u));for(var o,F=g.compInfos,Z=S,x=F.length-1;x>=0;x--){var E=F[x],q=E.comp;y=this.convertPoint(R,E,Z,q,A,B),u=E.rect;var Y=B._interactPrefix=E.prefix;if(_===k+"|"+x){var z=Y&&B.a(Y+"onLeave")||q.onLeave;z&&(o=z.call(q,X,B,A,y,u.width,u.height)),this.fire("comp","onLeave",X,B,S,q,y,u)}if(o!==!0&&(S=u.image)&&_===k+"|"+x+"|image"&&(S.onLeave&&(o=S.onLeave(X,B,A,y,u.width,u.height)),this.fire("image","onLeave",X,B,S,H,y,u)),B._interactPrefix=null,o===!0)break}}},handleMissingUpImage:function(M,q,D,p,w,R){var G="onUp",d=this.downInfo.hits;if(d&&q&&(q=$p(q))){var k=this.gv,j=R.rect,i=this.convertPoint(w,R);!i.inRect&&d[M+"|image"]&&(q[G]&&q[G](D,p,k,i,j.width,j.height),this.fire("image",G,D,p,q,H,i,j));for(var F,f=R.compInfos,z=q,W=f.length-1;W>=0;W--){var e=f[W],h=e.comp;if(i=this.convertPoint(w,e,z,h,k,p),!i.inRect){j=e.rect;var $=p._interactPrefix=e.prefix;if(d[M+"|"+W]){var Y=$&&p.a($+G)||h[G];Y&&(F=Y.call(h,D,p,k,i,j.width,j.height)),this.fire("comp",G,D,p,q,h,i,j)}if(F!==!0&&(q=j.image)&&d[M+"|"+W+"|image"]&&(q[G]&&(F=q[G](D,p,k,i,j.width,j.height)),this.fire("image",G,D,p,q,H,i,j)),p._interactPrefix=null,F===!0)break}}}},handleDownInfoImage:function($,Y,s,G,M,A,r){var d=this.downInfo.hits;if(d&&Y&&(Y=$p(Y))){var z=this.gv,N=r.rect,I=this.convertPoint(A,r);d[$+"|image"]&&(Y[s]&&Y[s](G,M,z,I,N.width,N.height),this.fire("image",s,G,M,Y,H,I,N));for(var C,S=r.compInfos,w=Y,D=S.length-1;D>=0;D--){var e=S[D],E=e.comp;I=this.convertPoint(A,e,w,E,z,M),N=e.rect;var n=M._interactPrefix=e.prefix,b=["onDrag","onEndDrag"].indexOf(s)>=0;if(!b&&d[$+"|"+D]||b&&this.downComps&&this.downComps.indexOf(E)>=0){var y=n&&M.a(n+s)||E[s];y&&(C=y.call(E,G,M,z,I,N.width,N.height)),this.fire("comp",s,G,M,Y,E,I,N)}if(C!==!0&&(Y=N.image)&&d[$+"|"+D+"|image"]&&(Y[s]&&(C=Y[s](G,M,z,I,N.width,N.height)),this.fire("image",s,G,M,Y,H,I,N)),M._interactPrefix=null,C===!0)break}}},handleClickImage:function(g,S,U,j,x,L,h,f){var d=this.downInfo.hits,R=f.hits;if(d&&S&&(S=$p(S))){var V=this.gv,O=h.rect,c=this.convertPoint(L,h);d[g+"|image"]&&(S[U]&&S[U](j,x,V,c,O.width,O.height),this.fire("image",U,j,x,S,H,c,O));for(var N,q=h.compInfos,J=S,$=q.length-1;$>=0;$--){var s=q[$],z=s.comp;c=this.convertPoint(L,s,J,z,V,x),O=s.rect;var E=x._interactPrefix=s.prefix;if(d[g+"|"+$]&&R[g+"|"+$]){var G=E&&x.a(E+U)||z[U];G&&(N=G.call(z,j,x,V,c,O.width,O.height)),this.fire("comp",U,j,x,S,z,c,O)}if(N!==!0&&(S=O.image)&&d[g+"|"+$+"|image"]&&(S[U]&&(N=S[U](j,x,V,c,O.width,O.height)),this.fire("image",U,j,x,S,H,c,O)),x._interactPrefix=null,N===!0)break}}},initImageResource:function(){T.setImage("coreInteractorRayHitImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",opacity:.3,rotation:-1.593,rect:[.73315,.6933,14.5337,14.61341]},{type:"oval",background:"rgb(255,0,0)",borderWidth:1,borderColor:"rgb(250,120,120)",rotation:-1.593,rect:[3.56695,3.75073,8.8661,8.49856]}]})},_convertUVToPoint:function(h,l,Y,m,n){if(!h)return{x:1/0,y:1/0};var C=l.bodyInfo.rect;if(Y&&n){var j,s;if("body"===m?(s=Y.s("shape3d.uv.scale"),j=Y.s("shape3d.uv.offset")):(s=Y.s(m+".uv.scale")||Y.s("all.uv.scale"),j=Y.s(m+".uv.offset")||Y.s("all.uv.offset")),s||j){n=T.getImage(n);var x=Of.isPOT(n.width)&&Of.isPOT(n.height),M=h.x*(s?s[0]:1)+(j?j[0]:0),b=h.y*(s?s[1]:1)+(j?j[1]:0);x&&(M=M%1+(M>0?0:1),b=b%1+(b>0?0:1)),h.set(M,b)}}var o=h.clone(),J=h.multiply({x:C.width,y:C.height});return J.local=o,J},convertPoint:function(U,Z,I,D,X,x){var o=Z.rect,J=Z.matrix.applyInverse(U).sub(o),F=J.x>=0&&J.y>=0&&J.x<=o.width&&J.y<=o.height;if(!F)return J;if(D&&hg(D.pixelPerfect,x,X)){var o,z=1;this._is2d?(z=X.getZoom(),o=Zd(U.x,U.y,H,z)):o=Zd(U.x,U.y);var k=!1,M=o.x,w=o.y,d=o.width,n=o.height,m=T.hitMaxArea,Q=d*n*z*z;if(Q>m){var u=Math.sqrt(m/Q);z*=u}d*=z,n*=z,2>d&&(d=2),2>n&&(n=2),M*=z,w*=z;var t=Df(d,n),l=new vi(0,-M,-w,z,z);l.append(Z.matrix),X._drawForChecking=!0,D.transform=l;var W=I.fitSize;Z.refRect&&Z.refRect.fitSize?(D.refRect=Z.refRect,I.fitSize=!0):I.fitSize=!1;var P=I.comps;I.comps=[D],Ae(t,I,0,0,d,n,x,self),I.comps=P,I.fitSize=W,delete D.refRect,delete D.unionRect,delete D.transform,X._drawForChecking=!1;try{for(var y=0,v=t.getImageData(0,0,d,n).data;y<v.length;y+=4)if(0!==v[y+3]){k=!0;break}t.restore()}catch(_){_f=C,k=!1}J.inRect=k}else J.inRect=!0;return J},getDataInfoAt:function(A,Z){return Us.prototype.getDataInfoAt.call(this,A,Z)}});var nr=gi.DefaultInteractor=function(X){Ei(nr,this,[X])};$l("DefaultInteractor",Nl,{handle_mousedown:function(R){Ne(R);var C=this,_=C.gv,M=_.getDataAt(R);if(_.setFocus(R)&&!_._editing&&!_._scrolling){jb(R)?_.handleDoubleClick(R,M):_.handleClick(R,M);var o=jr(R);!rj()&&!o&&M&&(_.isMovable(M)||_._39Q(M))||!_.isPannable()||!Rj(R)&&!o||cq(R)||(C._tx=_.tx(),C._ty=_.ty(),C.startDragging(R))}},handleWindowMouseUp:function(r){var f=this,p=f.gv;p._panning&&(delete p._panning,p.onPanEnded(),f.fi({kind:"endPan",event:r})),delete f._tx,delete f._ty,f.clearDragging()},handle_mousemove:function(k){var X=this,t=X.gv;X._hoverTimer&&(Oi(X._hoverTimer),delete X._hoverTimer),X._hoverTimer=Yi(function(){X.fi({kind:"hover",event:k}),Oi(X._hoverTimer),delete X._hoverTimer},t.getHoverDelay()||T.hoverDelay)},handle_mouseleave:function(){var r=this;r._hoverTimer&&(Oi(r._hoverTimer),delete r._hoverTimer)},handleWindowMouseMove:function(o){var S=this,K=S.gv;S.fi({kind:K._panning?"betweenPan":"beginPan",event:o}),K._panning=1;var V=Gj(K,o,S._lastClientPoint);K.setTranslate(S._tx+V.x,S._ty+V.y)},handle_mousewheel:function(j){this.gv.handleScroll(j,j.wheelDelta)},handle_DOMMouseScroll:function(v){2===v.axis&&this.gv.handleScroll(v,-v.detail)},handle_keydown:function(p){this.gv.handleKeyDown(p)}});var En=gi.SelectInteractor=function(V){Ei(En,this,[V])};$l("SelectInteractor",Nl,{_42:function(){var _=this,c=_.gv,r=c.getZoom(),Y=_.mark,y=_.div;y||(y=_.div=vh(),Nh(_.getView(),y));var t={};t.x=Y.x*r+c.tx(),t.y=Y.y*r+c.ty(),t.width=Y.width*r,t.height=Y.height*r,mb(y,t),this.intersects()?(y.style.border="",y.style.background=c.getRectSelectBackground()):(y.style.background="",y.style.border="1px solid "+c.getRectSelectBorderColor())},handle_mousedown:function(d){var K=this,M=K.gv;if(K._57I=C,K.pendingClickThrough=C,!(M._editing||M._scrolling||rj()||jr(d))){var H=M.getDataAt(d),q=M.sm();H?cq(d)?q.co(H)?q.rs(H):q.as(H):q.co(H)?H instanceof _i&&H.isClickThroughEnabled()&&Rj(d)&&(K.pendingClickThrough=oo(d)):q.ss(H):cq(d)||!M.isPannable()?Rj(d)&&(cq(d)||q.cs(),M.isRectSelectable()&&(K.startDragging(d),M._77O=1)):Rj(d)&&(K._57I=oo(d))}},handle_mouseup:function(S){var q=this,B=q.gv,s=q._57I;if(s&&(mp(s,oo(S))<=1&&B.sm().cs(),q._57I=C),q.pendingClickThrough){if(mp(q.pendingClickThrough,oo(S))<=1){var m=B.getDataAt(S);if(m instanceof _i&&m.isClickThroughEnabled()){var g=B.getDataAt(S,function(p){var i=p.getParent()===m&&B.isSelectable(p,!0);return i});g&&(S.clickThrough=!0,B.sm().ss(g))}}q.pendingClickThrough=C}},handleWindowMouseUp:function(W){this.clear(W)},handleWindowMouseMove:function(Q){var n=this,v=n.gv;n._logicalPoint=v.lp(Q),n.mark?(n.fi({kind:"betweenRectSelect",event:Q}),v.isPannable()&&n.autoScroll(Q),n.redraw()):n.fi({kind:"beginRectSelect",event:Q}),n.mark=Jm(n._lastLogicalPoint,n._logicalPoint),n.redraw()},intersects:function(){var i=this,a=i._lastLogicalPoint,q=i._logicalPoint;return a.x>q.x||a.y>q.y},clear:function(A){var w=this,F=w.gv,V=w.mark;if(w._57I=C,w.pendingClickThrough=C,w._lastLogicalPoint){if(V){if(0!==V.width&&0!==V.height){var h=F.getDatasInRect(V,w.intersects());if(!h.isEmpty()){var _=F.sm(),K=_.toSelection(),G=ee(A),W=A.altKey;h.each(function(C){_.co(C)?(!G||G&&W)&&K.remove(C):(!W||G&&W)&&K.add(C)}),_.ss(K)}}me(w.div),delete w.div,delete w.mark,w.redraw(),w.fi({kind:"endRectSelect",event:A}),F.onRectSelectEnded()}w.clearDragging(),delete F._77O}},redraw:function(){var n=this;n._draw||(n._draw=1,Yi(function(){n.mark&&n._42(),delete n._draw},16))}});var yc=gi.MoveInteractor=function(G){Ei(yc,this,[G])};$l("MoveInteractor",Nl,{handle_mousedown:function(J){var V=this,i=V.gv;if(Rj(J)&&!i._editing&&!i._scrolling&&!rj()){var D=i.getSelectedDataAt(J);!D||i._39Q(D)&&!i.isMovable(D)?i._focusData=C:(V._data=D,i.handleMouseDown&&i.handleMouseDown(J,D),V.startDragging(J),i.isMovable(D)&&(i._moving=1))}},handleWindowMouseUp:function($){var y=this,b=y.gv;b.handleMouseUp&&b.handleMouseUp($,y._data),y.clear($)},handleWindowMouseMove:function(T){var I=this,g=I._data,L=I.gv;if((!L._93O||!L._93O(T,g))&&L._moving){I._logicalPoint||I.fi({kind:"prepareMove",event:T});var d=I._logicalPoint?"betweenMove":"beginMove",N={kind:d,event:T},x=I._logicalPoint=L.lp(T);"beginMove"!==d||I._alreadyBeginTransaction||(I._alreadyBeginTransaction=!0,L.getDataModel().beginTransaction());var t=I._calcShift(d,T),c=t.x,V=t.y,b=I.gv.getMoveMode(T,g);b&&("x"===b?V=0:"y"===b?c=0:"xy"!==b&&(c=V=0)),L.moveSelection(c,V),I._lastLogicalPoint=x,I.autoScroll(T),I.fi(N)}},_calcShift:function(){var V=this,s=V._logicalPoint,D=V._lastLogicalPoint,z=s.x-D.x,L=s.y-D.y;return{x:z,y:L}},clear:function(j){var b=this,Y=b.gv;b._lastLogicalPoint&&(b._lastLogicalPoint=b._data=Y._moving=C,b._logicalPoint&&(b.fi({kind:"endMove",event:j}),Y.onMoveEnded()),b.clearDragging()),b._alreadyBeginTransaction&&(b._alreadyBeginTransaction=!1,Y.getDataModel().endTransaction())}});var Qd=gi.TextEditInteractor=function(I){Ei(Qd,this,[I]),this.init()};$l("TextEditInteractor",Nl,{setUp:function(){var $=this;Qd.superClass.setUp.call($),$.gv.mp($.handleGvPropertyChange,$)},teatDown:function(){var m=this;Qd.superClass.teatDown.call(m),m.gv.ump(m.handleGvPropertyChange,m)},handleGvPropertyChange:function(){this._editTarget&&this.endTextEdit()},init:function(){var r=this,S=this.input=I.createElement("input"),P=S.style;S.text="text",P.border="1px solid #d8d8d8",P.position="absolute",P.padding="2px 3px",P.outline="none",P.marginLeft="-90px",P.marginTop="-16px",P.backgroundColor="rgba(255,255,255, 1)",P.fontSize="14px",P.width="180px",P.height="32px",P.boxShadow="0 0 13px rgba(16,142,233, 0.5)",P.textAlign="center",P.boxSizing="border-box",g(S,"keyup",function(i){return br(i)&&r.endTextEdit(),ic(i)?(r.endTextEdit(!0),void 0):void 0}),g(S,"focus",function(){S.select()});var L=this.textarea=I.createElement("textarea"),e=this.wrap=I.createElement("div");e.appendChild(L),P=L.style,P.margin=0,P.padding="4px",P.overflow="hidden",P.boxSizing="border-box",P.position="absolute",P.outline="none",P.backgroundColor="transparent",P.resize="none",P.textAlign="center",P.fontSize="14px",P.borderWidth=0,P.width="100%",P=e.style,P.boxSizing="border-box",P.margin=0,P.padding=0,P.position="absolute",P.boxShadow="0 0 13px rgba(16,142,233, 0.5)",P.border="1px solid #d8d8d8",P.backgroundColor="rgba(255,255,255, 1)",P.zIndex="10",g(L,"keydown",function(B){return(ee()||cq())&&br(B)?(r.endTextEdit(),void 0):ic(B)?(r.endTextEdit(!0),void 0):(r._editTarget instanceof Hr||r.calculateTextareaHeight(String.fromCharCode(B.keyCode)),void 0)}),g(L,"focus",function(){L.select()});var K=function(U){U.stopPropagation()};g(S,"mousedown",K),g(S,"touchstart",K),g(L,"mousedown",K),g(L,"touchstart",K),g(L,"click",K),r.SIZING_STYLE=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],r.HIDDEN_TEXTAREA_STYLE="visibility:hidden; min-height:0 !important;max-height:none !important;height:0 !important;visibility:hidden !important;overflow:hidden !important;position:absolute !important;z-index:-1000 !important;top:0 !important;right:0 !important",r.handleWindowClick=function(g){var i=r._editingDOM;if(i){var j=i.getBoundingClientRect(),K=oo(g);Ad(j,K)||r.endTextEdit()}}},handle_mousedown:function(t){var w=this,g=w.gv;if(jb(t)&&!g._editing){var B=g.getDataAt(t);if(B){var i=g.getTextEditInfo(B);i&&(this._editInfo=i,this._editTarget=B,g._editing=!0,i.isMultiline?this.handleMultilineEdit():this.handleTextEdit())}}},handleMultilineEdit:function(){var N=this,e=N.gv,O=N._editTarget,i=N.getTargetValue(),Q=N.textarea,_=N.wrap,P=this._editInfo;this.hiddenTextarea||this.createHiddenTextarea(),(null===i||i===H)&&(i=""),Q.value=i,P.font&&(Q.style.font=P.font),N._editingDOM=Q,e.appendHTML(_),this.layoutHTML(_,O),O instanceof Hr?Q.style.height="100%":(Q.style.height="auto",this.calculateTextareaHeight()),Yi(function(){Q.focus(),g(f,"mousedown",N.handleWindowClick),g(f,"touchstart",N.handleWindowClick)},10)},handleTextEdit:function(){var m=this,C=m.gv,r=m._editTarget,z=m.getTargetValue(),N=m.input;(null===z||z===H)&&(z=""),N.value=z,m._editingDOM=N,C.getView().appendChild(N),this.layoutHTML(N,r),Yi(function(){N.focus(),g(f,"mousedown",m.handleWindowClick),g(f,"touchstart",m.handleWindowClick)},10)},layoutHTML:function(s,Z){var _=this.gv,Q=_.getZoom();if(Z instanceof Hr){var U=_.getDataUI(Z),c=U._6I,r=Z.getScale(),M=s.style;s.style.left=c.x*Q+_.tx()+"px",s.style.top=c.y*Q+_.ty()+"px",s.style.width=U._6I.width+"px",s.style.height=U._6I.height+"px",Lm(M,"transform","scale("+Q*r.x+","+Q*r.y+")"),Lm(M,"transformOrigin","0px 0px")}else if(Z instanceof cj){var c=Z.getRect(),l=c.width*Q;s.style.left=(c.x+c.width/2)*Q+_.tx()+"px",s.style.top=(c.y+c.height/2)*Q+_.ty()+"px",s.style.width=l+"px",s.style.marginLeft=-l/2+"px"}else if(Z instanceof L.Edge){var U=_.getDataUI(Z),c=U._6I;s.style.left=(c.x+c.width/2)*Q+_.tx()+"px",s.style.top=(c.y+c.height/2)*Q+_.ty()+"px"}},endTextEdit:function(k){var W=this,P=W._editInfo.isMultiline?W.wrap:W.input,p=W._editInfo.isMultiline?W.textarea:W.input;k||W.setTargetValue(p.value),W.gv.getView().removeChild(P),W.gv._editing=!1,delete W._editingDOM,delete W._editTarget,J(f,"mousedown",W.handleWindowClick),J(f,"touchstart",W.handleWindowClick)},setTargetValue:function(t){var o=this,y=o._editTarget,M=o._editInfo,J=M.accessType,Y=M.name;if(Y&&J||(J="p",Y="name"),"p"===J){var p=L.Default.setter(Y);y[p](t)}else"a"===J?y.a(Y,t):y.s(Y,t)},getTargetValue:function(){var $=this,Z=$._editTarget,k=$._editInfo,D=k.accessType,d=k.name;if(d&&D||(D="p",d="name"),"p"===D){var Y=L.Default.getter(d);return Z[Y]()}return"a"===D?Z.a(d):Z.s(d)},createHiddenTextarea:function(){this.hiddenTextarea=I.createElement("textarea"),this.hiddenTextarea.setAttribute("style","margin:0; padding:0; position:absolute; overflowY:scroll; resize:none; box-sizing:border-box;pointer-events: none;opacity:0;"),this.hiddenTextarea.setAttribute("rows","1"),this.gv.getView().appendChild(this.hiddenTextarea)},calculateHTMLStyle:function(b,s){if(s&&this.computedStyleCache)return this.computedStyleCache;var _=this,c=f.getComputedStyle(b),j=c.getPropertyValue("box-sizing")||c.getPropertyValue("-moz-box-sizing")||c.getPropertyValue("-webkit-box-sizing"),S=parseFloat(c.getPropertyValue("padding-bottom"))+parseFloat(c.getPropertyValue("padding-top")),J=parseFloat(c.getPropertyValue("border-bottom-width"))+parseFloat(c.getPropertyValue("border-top-width")),U=_.SIZING_STYLE.map(function(_){return _+":"+c.getPropertyValue(_)}).join(";"),V={sizingStyle:U,paddingSize:S,borderSize:J,boxSizing:j};return s&&(this.computedStyleCache=V),V},calculateTextareaHeight:function(F){F=F||"";var f=this,I=f.textarea,n=f.hiddenTextarea,X=f.wrap,N=32,E=f.calculateHTMLStyle(I,!1),B=E.paddingSize,V=E.borderSize,P=E.boxSizing,Y=E.sizingStyle;n.setAttribute("style",Y+";"+f.HIDDEN_TEXTAREA_STYLE),n.value=I.value+F;var s=n.scrollHeight;"border-box"===P?s+=V:"content-box"===P&&(s-=B),I.style.height=s+"px",X.style.height=Math.max(s,N)+"px",X.style.marginTop=s*-.5+"px"}});var bk=gi.ScrollBarInteractor=function(g){Ei(bk,this,[g])};$l("ScrollBarInteractor",Nl,{_41o:function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},_40o:function(){return this.gv.getViewRect().width<this.gv.getScrollRect().width},isV:function(Z){var L=this.gv.getViewRect();return this._41o()&&(L.x+L.width-this.gv.lp(Z).x)*this.gv.getZoom()<Kc},isH:function(B){var C=this.gv.getViewRect();return this._40o()&&(C.y+C.height-this.gv.lp(B).y)*this.gv.getZoom()<Kc},handle_mousemove:function(d){this.handle_touchmove(d)},handle_touchmove:function(q){if(!wk&&Rj(q)&&this.gv.isScrollBarVisible()){var L=this,h=L.isV(q),z=L.isH(q);(h||z)&&L.gv.showScrollBar(),L.gv._scrolling=h||z}},handleWindowMouseUp:function(n){this.handleWindowTouchEnd(n)},handleWindowTouchEnd:function(f){this._state=this._cp=this._tx=this._ty=this.gv._scrolling=C,this.fi({kind:"endScroll",event:f})},handle_mousedown:function(l){this.handle_touchstart(l)},handle_touchstart:function(Z){var Y=this;if(Y.gv.setFocus(Z),Ne(Z),Y.handle_touchmove(Z),!(cg(Z)>1)&&Y.gv._scrolling&&Y.gv.isScrollBarVisible()){Y._cp=oo(Z),Y._tx=Y.gv.tx(),Y._ty=Y.gv.ty();var p=Y.isV(Z);Y._state=p?"vScroll":"hScroll",Jl(Y,Z),Y.fi({kind:"beginScroll",event:Z})}},handleWindowMouseMove:function(k){this.handleWindowTouchMove(k)},handleWindowTouchMove:function(T){var b=oo(T),U=this.gv.getViewRect(),e=this.gv.getScrollRect();"vScroll"===this._state?this.gv.ty(this._ty+(this._cp.y-b.y)*e.height/U.height):"hScroll"===this._state&&this.gv.tx(this._tx+(this._cp.x-b.x)*e.width/U.width),this.fi({kind:"betweenScroll",event:T})}});var Cm=gi.TouchInteractor=function(r,V){V=V||{},V.selectable===H&&(V.selectable=!0),V.movable===H&&(V.movable=!0),V.pannable===H&&(V.pannable=!0),V.pinchable===H&&(V.pinchable=!0),V.editable===H&&(V.editable=!0),this.params=V,Ei(Cm,this,[r])};$l("TouchInteractor",Nl,{ms_edit:1,setUp:function(){var m=this;Cm.superClass.setUp.call(m),Cd&&m.params.editable&&m.gv.setEditInteractor(m)},tearDown:function(){var d=this;Cm.superClass.tearDown.call(d),Cd&&d.params.editable&&d.gv.setEditInteractor(C)},clear:function(u){var x=this,I=x.gv;I._moving&&(x.fi({kind:"endMove",event:u}),delete I._moving,I.onMoveEnded(),I.dm().endTransaction()),I._panning&&(x.fi({kind:"endPan",event:u}),delete I._panning,I.onPanEnded()),I._pinching&&(x.fi({kind:"endPinch",event:u}),delete I._pinching,I.onPinchEnded()),I._editing&&(x._46O(u),x._77I=x._node=x._edge=x._shape=x._rect=x._89I=x._index=I._editing=C),x.pendingClickThrough=x._moving=x._panning=x._pinching=x._editing=x._57I=x._data=x._beginHistory=C,x.clearDragging()},handle_touchstart:function(U){var B=this;if(!B.gv._editing){Ne(U),B._57I=C,B.pendingClickThrough=C;var c=B.params,I=B.gv,d=I.sm(),f=I.getDataAt(U),J=cg(U);if(1===J){if(jb(U))return I.handleDoubleClick(U,f),void 0;I.handleClick(U,f),f&&(I.handleMouseDown&&I.handleMouseDown(U,f),B._data=f),c.selectable||(f=C),f&&(d.co(f)?f instanceof _i&&f.isClickThroughEnabled()&&(B.pendingClickThrough=oo(U)):d.ss(f),c.editable&&I.isEditable(f)&&B._79I(U,f,!0)?(B._editing=1,B.startDragging(U)):c.movable&&I.isMovable(f)&&(B._moving=1,B.startDragging(U))),f&&(I.isMovable(f)||I._39Q(f))||(B._57I=oo(U),c.pannable&&I.isPannable()&&(B._panning=1,B.startDragging(U),B._translate={x:I.tx(),y:I.ty()}))}else if(c.pinchable&&2===J){if(!I.getEditInteractor()&&f){var n=$p(I.getImage(f));if(n&&hg(n.scrollable,f,this))return}B._pinching=1,B.startDragging(U);var Y=I.getView(),k=I.getZoom(),h=Y.getBoundingClientRect(),w=U.touches[0],V=U.touches[1],T={x:(w.clientX+V.clientX)/2-h.left,y:(w.clientY+V.clientY)/2-h.top};T.x-=I.tx(),T.y-=I.ty(),T.x/=k,T.y/=k,B._p=T,B._d=Rc(U)}}},handle_touchend:function(n){var V=this,K=V.gv,g=V._57I,R=V._data;if(g&&(mp(g,oo(n))<=1&&!K.getDataAt(n)&&K.sm().cs(),V._57I=C),R&&K.handleMouseUp&&K.handleMouseUp(n,R),V.pendingClickThrough){if(mp(V.pendingClickThrough,oo(n))<=1){var R=K.getDataAt(n);if(R instanceof _i&&R.isClickThroughEnabled()){var k=K.getDataAt(n,function(z){var S=z.getParent()===R&&K.isSelectable(z,!0);return S});k&&(n.clickThrough=!0,K.sm().ss(k))
}}V.pendingClickThrough=C}},handleWindowTouchEnd:function(z){this.clear(z)},handleWindowTouchMove:function(R){var p=this,z=p.gv,n=cg(R);if(1===n){var D=oo(R),l=Gj(z,D,p._lastClientPoint),q=mp({x:0,y:0},l);if(p._editing&&(p._beginHistory||(p._beginHistory=1,z.dm().beginTransaction()),z._editing=1,p._78I(R)),p._moving){if(!z._moving&&q<T.touchMoveThreshold)return;p._beginHistory||(p._beginHistory=1,z.dm().beginTransaction()),p.handleMove(R)}else if(p._panning){if(!z._panning&&q<T.touchMoveThreshold)return;z.setTranslate(p._translate.x+l.x,p._translate.y+l.y),p.fi({kind:z._panning?"betweenPan":"beginPan",event:R}),z._panning=1}}else if(2===n&&p._pinching){var U=Rc(R);z.handlePinch(p._p,U,p._d),p._d=U,p.fi({kind:z._pinching?"betweenPinch":"beginPinch",event:R}),z._pinching=1}},handleMove:function(t){var D=this,E=D.gv,$=E.lp(t);E._93O&&E._93O(t,D._data)||(E.moveSelection($.x-D._lastLogicalPoint.x,$.y-D._lastLogicalPoint.y),D._lastLogicalPoint=$,D.autoScroll(t),D.fi({kind:E._moving?"betweenMove":"beginMove",event:t}),E._moving=1)}});var L=f.ht,sf=L.graph._editor={Math:L.Math,Guide:{}};sf.getStyle=function(d){var O,X=sf.StyleMap;return X&&(O=X[d],O!==H)?O:sf.DefaultStyleMap[d]},sf.setStyle=function(_,n){var l=sf.StyleMap;l||(l=sf.StyleMap={}),l[_]=n},sf.inEdit=function(M){return M._inXEdit===!0},sf.startEdit=function(y){y._inXEdit=!0,sf.Inject.doInject(y)},sf._46O=function(X){X._inXEdit=!1,sf.Inject.undoInject(X)},sf.toScreenPosition=function(l,V){var k=l.tx(),D=l.ty(),E=l._zoom;return new sf.Math.Vector2(V.x*E+k,V.y*E+D)},sf.checkHit=function(V,f,X){return V.distanceTo(f)<X?!0:!1},sf.toWorldPosition=function(M,o){var _=M.tx(),l=M.ty(),f=M._zoom;return{x:(o.x-_)/f,y:(o.y-l)/f}},sf.setAntialias=function(L,I){for(var Q,S=["imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","msImageSmoothingEnabled"],R=0,p=S.length;p>R&&(Q=S[R],!(Q in L));R++);L[Q],L[Q]=I},sf.getTargetCornersOnScreen=function($,t){if(!t)return null;var b,u=[];if(dj(t,$)){var R=Gl($,t);b=[{x:R.x,y:R.y},{x:R.x+R.width,y:R.y},{x:R.x+R.width,y:R.y+R.height},{x:R.x,y:R.y+R.height}]}else{if(!t.getCorners)return null;b=t.getCorners()}return b.forEach(function(n){var V=sf.toScreenPosition($,n);u.push(V.x,V.y)}),u},sf.log=function(){};var vk;sf.updateTipInfo=function(D,n,b){if(b){var k=L.Default.getLogicalPoint(D,n._canvas);k.x+=sf.Icons.TipShiftX,k.y+=sf.Icons.TipShiftY,vk={helperPos:k,text:b,size:b.length}}else vk=C},sf.drawTip=function(O,k){vk&&sf.Icons.DrawIcon(k,O,sf.Icons.TipHelper,vk)};var Uc=sf.Inject={_modules:[]};Uc.registAsModule=function(n,R){var H={},z={};for(var A in n){var Z=R.prototype[A];H[A]=Z}n.getBackup=function(t){return H[t]},n.getBackups=function(){return H},z.doInject=function(){for(var w in n)"getBackup"!==w&&(R.prototype[w]=n[w])},z.undoInject=function(){for(var z in n)"getBackup"!==z&&(R.prototype[z]=H[z])},Uc._modules.push(z)},Uc.doInject=function(I){for(var r,P=Uc._modules,q=0,D=P.length;D>q;q++)r=P[q],r.doInject(I)},Uc.undoInject=function(i){for(var w,f=Uc._modules,e=0,Q=f.length;Q>e;e++)w=f[e],w.undoInject(i)};var Nl=L.graph.EditInteractor=function(M){var g=this,H=I.createElement("canvas");H.className="editCanvas",H.style.position="absolute",g._uuid=L.Math.generateUUID(),g._styleMap={},g._canvas=H,g._context=H.getContext("2d"),Nl.superClass.constructor.call(g,M),this._editDetail=!1,sf.setAntialias(g._context,!1),g._subModules=g.initSubModule(),g._gridGuide=new sf.Guide.Grid(g),g._rectGuide=new sf.Guide.Rect(g),g._hoverGuide=new sf.Guide.Hover(g)},as=Nl;L.Default.def(Nl,L.graph.Interactor,{ms_edit:1,ms_fire:1}),b.defineProperties(Nl.prototype,{editDetail:{get:function(){var C=!!this._editDetail;return C},set:function(x){var T=this,B=T._editDetail;B!==x&&(T._editDetail=x,T.gv._editing=x,T.fp("editDetail",B,x),T.fp("pointsEditingMode",B,x),T.fi({kind:x?"beginEditPoints":"endEditPoints"}))}},gvEditing:{get:function(){return this.gv._editing},set:function(T){(!this._editDetail||T)&&(this.gv._editing=T,T||(this.editDetail=!1))}},editing:{get:function(){return this._editing},set:function(S){this._editing=S,this.gvEditing=S}},editingModule:{get:function(){return this._editMod}},pointsEditingMode:{get:function(){return this.editDetail},set:function(K){var J=this;J.editDetail!==K&&(K?J._tryEnterEditDetailMode():J._tryQuitEditDetailMode())}},gridEnabled:{get:function(){var g=this._gridEnabled;if(!g)return!1;var J=this.gv;return J?!0:!0},set:function(j){j!==this._gridEnabled&&(this._gridEnabled=j,this._42())}},alignmentGuideEnabled:{get:function(){return this._agEnabled},set:function(b){b!==this._agEnabled&&(this._agEnabled=b,this._42())}},gridGuide:{get:function(){return this._gridGuide}},rectGuide:{get:function(){return this._rectGuide}},hoverGuide:{get:function(){return this._hoverGuide}}}),Nl.prototype.initSubModule=function(){var z=this;return[new sf.Anchor(z),new sf.RotateX(z),new sf.MoveDummy(z),new sf.Rect(z),new sf.Curve(z),new sf.MoveHelper(z)]},Nl.prototype.getSubModule=function(V){var U,H,X,k=this._subModules;for(H=0,X=k.length;X>H;H++)if(U=k[H],U.catalog===V)return U},Nl.prototype.invokeSubModule=function(S,o){for(var q,Q,P,s=this,h=s._subModules,F=Array.prototype.slice.call(arguments,2),l=0,k=h.length;k>l;l++)if(q=h[l],Q=q[S],Q&&(P=Q.apply(q,F),P!=H&&o))return q},Nl.prototype.invokeSubModuleInverse=function(P,_){var X=this,j=X._subModules;if(j)for(var N,g,M,l=Array.prototype.slice.call(arguments,2),L=j.length-1;L>=0;L--)if(N=j[L],g=N[P],g&&(M=g.apply(N,l),M!=H&&_))return N},Nl.prototype.setUp=function(){sf.log("setUp");var r=this,I=r.gv,l=I.getView(),o=r._canvas;Nl.superClass.setUp.call(r),I.setEditInteractor(r),I._79O?l.insertBefore(o,I._79O):l.appendChild(o),sf.startEdit(I),r.invokeSubModule("setUp"),I.dm().mm(r._onDataModelChanged,r),I.dm().md(r._onDataPropertyChanged,r)},Nl.prototype.tearDown=function(){sf.log("tearDown");var B=this,t=B.gv,m=t.getView();B._resetCustomCursorStyle(),Nl.superClass.tearDown.call(B),t.dm().umm(B._onDataModelChanged,B),t.dm().umd(B._onDataPropertyChanged,B),t.setEditInteractor(null),m.removeChild(B._canvas),B._drawTimer&&(Oi(B._drawTimer),B._drawTimer=null),sf._46O(t),B.invokeSubModule("tearDown")},Nl.prototype._onDataModelChanged=function(t){var k=this;("clear"===t.kind||"remove"===t.kind&&k.editDetail&&t.data===k.getSubModule("Curve").target)&&(k.editDetail=!1,k._42())},Nl.prototype._onDataPropertyChanged=function(N){var o=this;if(o.editDetail){var m=o.getSubModule("Curve"),d=N.data;d===m.target&&(d._writing||m._handleDataChanged(N))}},Nl.prototype.clear=function(){sf.log("clear")},Nl.prototype.redraw=function(){this._42()},Nl.prototype._42=function(){var O=this;O._drawTimer||(O._drawTimer=Yi(function(){O._drawTimer=null,O.drawImpl()},0))},Nl.prototype.drawImpl=function(){var c;for(c in{_42:!0})break;return function(){var A=this,S=A._canvas,$=A.gv,o=$.getWidth(),H=$.getHeight(),N=A._context,w=L.Default.getInternal(),t=T.devicePixelRatio;(S.width!==o||S.height!==H)&&w.setCanvas(S,o,H,t),N.clearRect(0,0,S.width,S.height);var W=A._getValidSelection();N.save(),N.scale(t,t),A._gridGuide._42(),A.invokeSubModuleInverse(c,!1,N,$,W),A._rectGuide._42(),A._hoverGuide._42(),N.restore()}}(),Nl.prototype._getValidSelection=function(){var L=this,p=L.gv,F=p.sm().getSelection(),E=[];return F.each(function(D){p.isVisible(D)&&p.isEditable(D)&&E.push(D)}),E},Nl.prototype.handle_touchmove=function(D){return this.handle_mousemove(D)},Nl.prototype.handle_mousemove=function(c){if(!L.Default.isDragging()){var X=this;if((X.editDetail||!rj()&&!jr(c))&&!X.gv._externalEditing){if(X.gvEditing=!1,X._checkEdit(c))X.gvEditing=!0;else{if(!X.getStyle("hoverGuideVisible"))return;X.hoverData=X.gv.getDataAt(c)}X._42()}}},Nl.prototype.handle_touchstart=function(c){return this.handle_mousedown(c)},Nl.prototype.handle_mousedown=function(b){Ne(b);var M=this;if((M.editDetail||!rj()&&!jr(b))&&!M.gv._externalEditing){if(jb(b)&&!b.clickThrough){if(M.editDetail){if(M._tryQuitEditDetailMode(b))return}else if(M._tryEnterEditDetailMode())return;M.gv.dm().beginTransaction();var T=M.invokeSubModule("handleDoubleClick",!0,b);if(M.gv.dm().endTransaction(),T)return}var $=M._checkEdit(b);$&&(M._downPosition=M._getLogicalPoint(b),M.gv.dm().beginTransaction(),$.startEdit(M,b),M.editing=!0)}},Nl.prototype._checkEdit=function(K){var C=this,$=C.gv,n=C._getLogicalPoint(K),w=C.invokeSubModule("check",!0,$,K,n)||null;return C._editMod=w,w},Nl.prototype.handleWindowTouchMove=function(x){return this.handleWindowMouseMove(x)},Nl.prototype.handleWindowMouseMove=function(s){var G=this,A=G._downPosition;if(A){var z=G._getLogicalPoint(s);if(z.distanceTo(A)<G.getStyle("moveSensitivity"))return;delete G._downPosition}var J=G._editMod;J&&J.handleEdit(G.gv,s),G.redraw()},Nl.prototype._getLogicalPoint=function(J){var y=this,U=L.Default.getLogicalPoint(J,y._canvas);return new sf.Math.Vector2(U)},Nl.prototype.handleWindowTouchEnd=function($){return this.handleWindowMouseUp($)},Nl.prototype.handleWindowMouseUp=function(){var D;for(D in{_46O:!0})break;return function(N){var S=this;S.editing=!1,S.setCursor("default"),S.invokeSubModule(D,!1,N),S._42(),S.gv.dm().endTransaction()}}(),Nl.prototype.handle_mousewheel=function(V){var j=this;Ne(V),j.invokeSubModule("preHandleScroll",!0)||j.gv.handleScroll(V,V.wheelDelta)},Nl.prototype.handleDelete=function(){var I=this;if(!I.editDetail){I.gv.dm().beginTransaction();var k=I.invokeSubModule("handleNormalStateDelete",!0);return I.gv.dm().endTransaction(),k||I.gv.removeSelection(),void 0}I.gv.dm().beginTransaction(),I.invokeSubModule("handleDelete",!0),I.gv.dm().endTransaction(),I._42()},Nl.prototype.handle_keydown=function(V){var D=this;if((V.metaKey||V.ctrlKey)&&D._42(),rj(V)&&!D.editing)return D.gvEditing=!1,D.setCursor("default"),D._42(),void 0;var X=br(V);return D.editDetail?((X||ic(V))&&(D.editDetail=!1,D._42()),D.gv.dm().beginTransaction(),D.invokeSubModule("handle_keydown",!0,V),D.gv.dm().endTransaction(),void 0):(D.gv.dm().beginTransaction(),D.invokeSubModule("handleNormalStateKeyDown",!0,V),D.gv.dm().endTransaction(),X&&D._tryEnterEditDetailMode(),void 0)},Nl.prototype.handle_keyup=function(a){this.gv.dm().beginTransaction(),this.invokeSubModule("handle_keyup",!0,a),this.gv.dm().endTransaction()},Nl.prototype._tryEnterEditDetailMode=function(){var d=this;return!d.editDetail&&d.invokeSubModule("canEnterEditDetailMode",!0)&&1===d._getValidSelection().length?(d.editDetail=!0,d._42(),!0):void 0},Nl.prototype._tryQuitEditDetailMode=function($){var b=this;return b.editDetail?!$||b.invokeSubModule("canQuitEditDetailMode",!0,$)?(b.editDetail=!1,b._42(),!0):!1:!1},Nl.prototype.setStyle=function(k,p,q){var f=this;q?sf.setStyle(k,p):f._styleMap[k]=p,"baseColor"===k&&(tq=p),f.fp("styleChanged",null,{key:k,value:p,base:q}),f._42()},Nl.prototype.getStyle=function(S){var k=this,I=k._styleMap[S];return I!==H?I:sf.getStyle(S)},Nl.prototype.setCursor=function(V){this._resetCustomCursorStyle(),L.graph.EditInteractor.superClass.setCursor.call(this,V)},Nl.prototype._drawHostGuide=function(M){var u=this,A=u._context,_=u.gv;sf.Icons.DrawIcon(u,A,sf.Icons.NodeHoverGuide,M.corners);var H=M.host;if(H){var O=_.getAttachPoints(H);if(O&&O.length)for(var m=0,x=O.length;x>m;m++){var Y=O[m],s=Rm(_,H,0,Y.offsetX||0,Y.offsetY||0,Y.x,Y.y);s=sf.toScreenPosition(_,s),s.isAttach=M.attach===m,sf.Icons.DrawIcon(u,A,sf.Icons.AttachPoint,s)}}},Nl.prototype._resetCustomCursorStyle=function(){var w=this;if(w._customStyle){var F=this.gv.getView();F.classList&&F.classList.remove&&F.classList.remove(w._customStyle),w._customStyle=null}},Nl.prototype._setRotateCursor=function(T){var o=this,u=o._cursorFactory;u||(u=o._cursorFactory=new sf.CursorFactory(o));var v=u.getRotateCursor(T),p=o.gv.getView();o._resetCustomCursorStyle(),o._customStyle=v,p.classList&&p.classList.add&&p.classList.add(v)};var mk=sf.Group=function(Z){var $=this;$._entities=Z,$._64O=0,$._position={x:0,y:0},$._scale={x:1,y:1},$._anchor={x:.5,y:.5},$._anchor2={x:.5,y:.5}};mk.prototype={},mk.prototype.constructor=mk;var Hd=null,zl=null;mk.findOrCreateGroup=function(b,Z){if(zl===Z&&Hd&&Hd.checkIsMe(b))return Hd;zl=Z;var p=new sf.Group(b);return p.getKeyOb()?(Hd=p,p):void 0},mk.prototype.checkIsMe=function(d){var l=this._entities;if(l.length!==d.length)return!1;var P,b={},n=d.length;for(P=0;n>P;P++)b[d[P]._id]=!0;for(P=0;n>P;P++)if(!b[l[P]._id])return!1;return!0},mk.prototype.getRotation=function(){return this._64O},mk.prototype.getPosition=function(){return this._position},mk.prototype.getAnchor=function(){return this._anchor},mk.prototype.getWidth=function(){return this._width},mk.prototype.getScale=function(){return this._scale},mk.prototype.getSize=function(){return{width:this._width,height:this._height}},mk.prototype.getHeight=function(){return this._height},mk.prototype.getKeyOb=function(){for(var Q=this._entities,X=Q.length-1;X>=0;X--){var p=Q[X];if(this.isNode(p))return p}},mk.prototype.getAnchor2=function(){var X=this,a=X.rotateCenter;if(a)return a;var $=X.getKeyOb();if(!$)return X._anchor;var t=X._anchor2,i=$.getMatrix();return i.tf({x:$.getWidth()*(t.x-$.getAnchor().x),y:$.getHeight()*(t.y-$.getAnchor().y)})},mk.prototype.setAnchor2=function(O,S){var P=this,i=P.getKeyOb();if(i){var c,T=i.getMatrix();c="number"==typeof O?{x:O,y:S}:O;var x=T.tfi(c);P._anchor2={x:i.getAnchor().x+x.x/i.getWidth(),y:i.getAnchor().y+x.y/i.getHeight()}}},mk.prototype.setRotation=function(){},mk.prototype.beginRotate=function(m){this.rotateCenter=m.pos,this.rotateMode=m.groupRotateMode},mk.prototype.endRotate=function(){delete this.rotateCenter,delete this.rotateMode},mk.prototype.addRotation=function(H,N,U){return"batch"===N?this._addRotationInBatchMode(H,U):"block"===N?this._addRotationInBlockMode(H,U):void 0},mk.prototype._addRotationInBlockMode=function(T,e){var k=this,G=k.rotateCenter||k.getPosition();k._entities.forEach(function(D){if(k.isNode(D)&&(!e||e(D))){var l=D.getMatrix();l.translate(-G.x,-G.y),l.rotate(T),l.translate(G.x,G.y);var I=Math.sign(D.getScale().x);D.setRotation(Nn(l.b*I,l.a*I)),D.setPosition(l.tx,l.ty)}})},mk.prototype._addRotationInBatchMode=function(O,Y){var a=this,B=a._anchor2;a._entities.forEach(function(L){if(a.isNode(L)&&(!Y||Y(L))){var A=L.getAnchor(),W=L.getMatrix(),z=W.tf({x:L.getWidth()*(B.x-A.x),y:L.getHeight()*(B.y-A.y)}),S=new sf.Math.Matrix2d;S.set(W.a,W.b,W.c,W.d,W.tx,W.ty),S.translate(-z.x,-z.y),S.rotate(O),S.translate(z.x,z.y);var r=Math.sign(L.getScale().x);L.setRotation(Nn(S.b*r,S.a*r)),L.setPosition(S.tx,S.ty)}})},mk.prototype.setPosition=function(t){var Q,$,H,h,f=this,A=f._position,o=t.x-A.x,I=t.y-A.y,S=f._entities;for($=0,H=S.length;H>$;$++)Q=S[$],Tk(Q)&&(h=Q.getPosition(),Q.setPosition(h.x+o,h.y+I));f._position=t},mk.prototype.setScale=function(x,y){var n=this,O=x/n._scale.x,$=y/n._scale.y;n._adjustChildScaleOrSize(O,$,"size"),n._scale={x:x,y:y}},mk.prototype.getRect=function(){var B=this,z=B._position,Q=B._width,O=B._height;return{x:z.x-Q/2,y:z.y-O/2,width:Q,height:O}},mk.prototype.setSize=function(O,X){var Q=this,O=Math.max(1,O),X=Math.max(1,X),t=O/Q._width,$=X/Q._height;Q._adjustChildScaleOrSize(t,$,"size"),Q._width=O,Q._height=X},mk.prototype._adjustChildScaleOrSize=function(Z,h,B){var x,H,w,T,J,k,A,R,U,e,W,p,c,s,D=this,O=D._position,V=D._entities,M=new sf.Math.Matrix2d;for(H=0,w=V.length;w>H;H++)if(x=V[H],D.isNode(x)){if(T=x.getPosition(),J=x.getRotation(),k=x.getWidth(),A=x.getHeight(),R=x.getScale(),W=R.x*k,p=R.y*A,M.identity().scale(W,p).rotate(J).translate(T.x,T.y).translate(-O.x,-O.y).rotate(-D._64O),J=Nn(M.b*Math.sign(W),M.a*Math.sign(W)),M.scale(Z,h),U=Math.cos(J),e=Math.sin(J),Math.abs(U)<.001?(c=M.b/e,s=-M.c/e):(c=M.a/U,s=M.d/U),"scale"===B)x.setScale(c/k,s/A);else if("size"===B){var N=c/R.x,o=s/R.y;x.setScale(bd(c)*Math.abs(R.x),bd(s)*Math.abs(R.y)),x.setSize(Math.max(.1,Math.abs(N)),Math.max(.1,Math.abs(o)))}M.rotate(D._64O).translate(O.x,O.y),x.setPosition(M.tx,M.ty)}},mk.prototype.getMatrix=function(){var y=this,B=y._position,O=L.Default.getInternal(),v=y._scale;return new O.Mat(y._64O,B.x,B.y,v.x,v.y)},mk.prototype.toGlobal=function(E){return this.getMatrix().tf(E)},mk.prototype.getCorners=function(){var t=this,W=t._width,$=t._height,n=t._anchor,j=-W*n.x,p=-$*n.y,z=t.getMatrix();return[z.tf(j,p),z.tf(j,p+$),z.tf(j+W,p+$),z.tf(j+W,p)]},mk.prototype.calcInfo=function(){var i,u,K,n,c,r,C=this,X=[],H=C._entities,O=C._64O;for(n=0,c=H.length;c>n;n++)r=H[n],C.isNode(r)&&r.getCorners&&X.push.apply(X,r.getCorners());if(X.length){var z=Math.cos(-O),Z=Math.sin(-O),o=1/0,t=-1/0,f=1/0,y=-1/0;for(n=0,c=X.length;c>n;n++)K=X[n],i=K.x,u=K.y,K.x=z*i-Z*u,K.y=Z*i+z*u,o=Math.min(o,K.x),t=Math.max(t,K.x),f=Math.min(f,K.y),y=Math.max(y,K.y);C._width=(t-o)/C._scale.x,C._height=(y-f)/C._scale.y,z=Math.cos(O),Z=Math.sin(O);var F=C._anchor;i=o+(t-o)*F.x,u=f+(y-f)*F.y,C._position={x:z*i-Z*u,y:Z*i+z*u}}},mk.prototype.isNode=function(B){return Tk(B)?dj(B)?B.size()?!1:!0:!0:!1},mk.prototype._42=function(b,a,D){var h,x,P,g,v,l,H,G,U=this,t=U._entities,f=U.rotateMode;for("batch"===f&&(G=U.getKeyOb()),h=0,x=t.length;x>h;h++)P=t[h],U.isNode(P)&&(l=P.getRect(),g=sf.toScreenPosition(D,{x:l.x,y:l.y}),v=sf.toScreenPosition(D,{x:l.x+l.width,y:l.y+l.height}),H={min:g,max:v},P===G&&(H.isKeyOb=!0),sf.Icons.DrawIcon(b,a,sf.Icons.GroupSubEntityRect,H))};var Fj=sf.CurveActiving=function(B,D){this._curve=B,this._interactor=B._interactor,this.silent=!0;for(var z in D)this[z]=D[z];delete this.silent};Fj.prototype={},Fj.prototype.constructor=Fj,b.defineProperties(Fj.prototype,{point:{get:function(){return this._point},set:function(E){var s=this;s._point=E,s.editingCtrl||s.silent||s._firePointChange()}},pairs:{get:function(){return this._pairs},set:function(n){var v=this;v._pairs=n,v.editingCtrl&&!v.silent&&v._firePointChange()}}}),Fj.prototype._firePointChange=function(){var v=this,D=v.getCurrentEditingPoint(),W=v._interactor;if(!D)return W.fi({kind:"selectPoint"}),void 0;var Q=this._curve.target;if(Q){var t=sf.getDataMatrix(Q).invert(),G=D.e;D=t.apply(sf.toWorldPosition(W.gv,D)),D.e=G;var f=v._lastFirePoint;f&&Math.abs(D.x-f.x)<1e-5&&Math.abs(D.y-f.y)<1e-5&&(D.e==H&&f.e==H||Math.abs(D.e-f.e)<1e-5)||(v._lastFirePoint=D,W.fi({kind:"selectPoint",x:D.x,y:D.y,e:D.e}))}},Fj.prototype.dispose=function(){this._interactor.fi({kind:"selectPoint"})},Fj.prototype.getCurrentEditingPoint=function(){var Y=this,p=Y.editingCtrl;if(p){var J=Y.pairs;if(J){var W=J[p.pairId];if(W){var U=W[p.type];if(U)return U}}}return Y._point};var Sm=sf.CursorFactory=function(F){var g=this;g._interactor=F,g._rotateCursorStyles={}};Sm.prototype={},Sm.prototype.constructor=Sm,Sm.prototype.getRotateCursor=function(o){var p=this;0>o&&(o+=2*Math.PI);var N=p._interactor,E=N.getStyle("rotateCursorSize"),C=N.getStyle("rotateCursorRound"),A=Math.round(180*(o/Math.PI)/C);A*C>=360&&(A=0);var M=p._rotateCursorStyles,u="htCustomRotateStyle_"+E+"_"+C+"_"+A;return M[u]||(p._produceRotateCursor(u,E,C,A),M[u]=!0),u},Sm.prototype._produceRotateCursor=function(r,g,e,x){var E=this;E._interactor;var $=E._canvas;$||($=E._canvas=I.createElement("canvas"));var B=T.devicePixelRatio;$.width=$.height=g*B,$.style.width=$.style.height=g+" px";var _=$.getContext("2d");sf.setAntialias(_,!1),_.scale(B,B);var L,R,C,j,G,W=Math.round(g/2),z=""+W+" "+W+",auto !important;",b=4;L=Math.PI/180*x*e,_.clearRect(0,0,g,g),_.save(),_.scale(g/32,g/32),_.translate(16,15),_.rotate(L+Math.PI/2),_.beginPath(),_.moveTo(-8,0),_.lineTo(-8,b),_.lineTo(-8+b,b),_.moveTo(8,0),_.lineTo(8,b),_.lineTo(8-b,b),_.moveTo(-8,b),_.quadraticCurveTo(0,-6,8,b),_.restore(),_.lineCap="round",_.lineJoin="miter",_.strokeStyle="white",_.lineWidth=4,_.stroke(),_.strokeStyle="black",_.lineWidth=2,_.stroke(),R=JSON.stringify($.toDataURL()),j="cursor:url("+R+")"+z,1!==B&&(C='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+g+'px" height="'+g+'px"><image xlink:href='+R+' width="'+g+'" height="'+g+'"/></svg>',j+="cursor:url(data:image/svg+xml;base64,"+btoa(C)+")"+z,j+="cursor:-webkit-image-set(url("+R+")"+B+"x,url("+R+")1x)"+z),G=I.createElement("style"),G.textContent="body."+r+" *, ."+r+"{"+j+"}",I.head.appendChild(G)};var lr=sf.Guide.Grid=function(L){var J=this;J._interactor=L,J._alignmentGuideId=0,J._xAlignmentGuide=[],J._yAlignmentGuide=[]};lr.prototype={},lr.prototype.constructor=lr,b.defineProperties(lr.prototype,{gridBlockSize:{get:function(){var G=this;return G._gridBlockSize||G._interactor.getStyle("gridBlockSize")},set:function(p){this._gridBlockSize=p,this._interactor._42()}},gridThickLinesEvery:{get:function(){var v=this;return v._gridThickLinesEvery||v._interactor.getStyle("gridThickLinesEvery")},set:function(F){this._gridThickLinesEvery=F,this._interactor._42()}},gridEnabled:{get:function(){var A=this,l=A._interactor;return l.gridEnabled&&A.isValidGrid()}}}),lr.prototype._42=function(){var n=this,K=n._interactor;n.gridEnabled&&n.drawGrid(),K.alignmentGuideEnabled&&n.drawAlignmentGuide()},lr.prototype.makeMatrix=function(){var j=this,b=j._interactor.getStyle("gridAngle"),o=j._interactor.getStyle("gridRotation"),p=new sf.Math.Matrix2d,u=Math.sin(b),J=Math.cos(b);return p.set(1,0,J,u,0,0),p.rotate(o),p},lr.prototype.isValidGrid=function(){var p=this,d=Math.PI,s=p._interactor,L=s.gv;if(L._zoom<s.getStyle("gridZoomThreshold"))return!1;var o=s.getStyle("gridAngle"),Q=Math.abs(180*(o%d/d)),T=1-1e-8;return T>Q||Q>180-T?!1:!0},lr.prototype.drawAlignmentGuide=function(){var J=this,R=J._interactor,D=R.gv,Z=R._canvas,j=R._context,B=Z.width,U=Z.height,i=D.tx(),P=D.ty(),G=D._zoom;j.beginPath(),j.strokeStyle=R.getStyle("gridAlignmentGuideColor"),j.lineWidth=1,J._xAlignmentGuide.forEach(function(t){var e=t.p*G+i;j.moveTo(e,0),j.lineTo(e,U)}),J._yAlignmentGuide.forEach(function(I){var t=I.p*G+P;j.moveTo(0,t),j.lineTo(B,t)}),j.stroke()},lr.prototype.drawGrid=function(){function Q(X,Q,M,g){var _=sf.toScreenPosition(K,h.apply({x:X,y:Q})),P=sf.toScreenPosition(K,h.apply({x:M,y:g}));B.moveTo(_.x,_.y),B.lineTo(P.x,P.y)}var I=this,S=I._interactor,v=I.gridBlockSize,E=I.gridThickLinesEvery,t=S.getStyle("gridThickColor"),p=S.getStyle("gridLightColor"),K=S.gv,L=S._canvas,B=S._context,$=L.width,j=L.height,h=I.makeMatrix(),R=h.applyInverse(sf.toWorldPosition(K,{x:0,y:0})),y=h.applyInverse(sf.toWorldPosition(K,{x:$,y:0})),s=h.applyInverse(sf.toWorldPosition(K,{x:0,y:j})),w=h.applyInverse(sf.toWorldPosition(K,{x:$,y:j})),V=Math.min(R.x,y.x,s.x,w.x),W=Math.max(R.x,y.x,s.x,w.x),O=Math.min(R.y,y.y,s.y,w.y),G=Math.max(R.y,y.y,s.y,w.y);$=W-V,j=G-O;var z=Math.ceil(V/v),r=Math.floor(W/v),X=Math.ceil(O/v),m=Math.floor(G/v);K.tx(),K.ty(),K._zoom;var x,H,D;for(B.save(),B.lineWidth=1,B.beginPath(),B.strokeStyle=t,D=Math.ceil(z/E)*E;r>=D;D+=E)x=D*v,Q(x,O,x,G);for(D=Math.ceil(X/E)*E;m>=D;D+=E)H=D*v,Q(V,H,W,H);for(B.stroke(),B.beginPath(),B.strokeStyle=p,D=z;r>=D;D++)0!==D%E&&(x=D*v,Q(x,O,x,G));for(D=X;m>=D;D++)0!==D%E&&(H=D*v,Q(V,H,W,H));B.stroke(),B.restore()},lr.prototype.getAlignmentGuides=function(){var E=this;return{x:E._xAlignmentGuide,y:E._yAlignmentGuide}},lr.prototype.addAlignmentGuide=function(z,B,K){var V=this,I="x"===z?V._xAlignmentGuide:V._yAlignmentGuide,K=K?K:++V._alignmentGuideId,u={p:B,id:K};if(I.length){var S=V._findClosestAlignmentGuide(u.p,I);S.dis<0?I.splice(S.index+1,0,u):I.splice(S.index,0,u)}else I.push(u);return V._interactor._42(),K},lr.prototype.findClosest=function(R,p,W){var C=this,a=C._interactor,n=a.gv;W&&(R=sf.toWorldPosition(n,R));var y,s,$,f=1/0,M=1/0,z=R.x,N=R.y;if(C.gridEnabled){var U=C.gridBlockSize,K=C.makeMatrix(),T=K.applyInverse(R);T=K.apply({x:Math.round(T.x/U)*U,y:Math.round(T.y/U)*U}),f=T.x-z,M=T.y-N,$=!0}if(a.alignmentGuideEnabled&&(y=C._findClosestAlignmentGuide(z,C._xAlignmentGuide).dis,s=C._findClosestAlignmentGuide(N,C._yAlignmentGuide).dis,Math.abs(y)<Math.abs(f)&&(f=y,$=!0),Math.abs(s)<Math.abs(M)&&(M=s,$=!0)),$){$=!1;var o=n._zoom,E=a.getStyle("smartGuideThreshold")/o,A={};if(Math.abs(f)<E&&"y"!==p&&(A.x=W?f*o:f,$=!0),Math.abs(M)<E&&"x"!==p&&(A.y=W?M*o:M,$=!0),$)return A}},lr.prototype._findClosestAlignmentGuide=function(Q,P){if(!P.length)return{dis:1/0};for(var S,D=0,t=P.length-1;t-D>1;)S=Math.floor((D+t)/2),P[S].p<Q?D=S:t=S;var d=P[D].p-Q,h=P[t].p-Q;return Math.abs(d)<=Math.abs(h)?{line:P[D],dis:d,index:D}:{line:P[t],dis:h,index:t}},lr.prototype.removeAllAlignmentGuide=function(l){var v=this;"y"!==l&&(v._xAlignmentGuide=[]),"x"!==l&&(v._yAlignmentGuide=[]),v._interactor._42()},lr.prototype.removeAlignmentGuide=function(g){for(var H,E,U,P=this,W=P._xAlignmentGuide,C=0;2>C;C++)for(W=0===C?P._xAlignmentGuide:P._yAlignmentGuide,H=0,E=W.length;E>H;H++)if(U=W[H],U.id===g)return W.splice(H,1),P._interactor._42(),{axis:0===C?"x":"y",position:U.p};return!1},lr.prototype.adjustAlignmentGuide=function(T,V){var i=this,q=i.removeAlignmentGuide(T);return q?(i.addAlignmentGuide(q.axis,V,T),!0):!1};var Vj=sf.Guide.Rect=function(S){var u=this;u._interactor=S};Vj.prototype={},Vj.prototype.constructor=Vj,Vj.prototype.gatherRects=function(){var c,n,K,E,l=this,t=l._interactor.gv,U=[],T=[],N={x:U,y:T},A={},O=t.getDataModel(),s=O.a("width"),y=O.a("height");s&&y&&(c=0,n=0,K=s,E=y,U.push({node:O,type:0,p:c},{node:O,type:1,p:c+K/2},{node:O,type:2,p:c+K}),T.push({node:O,type:0,p:n},{node:O,type:1,p:n+E/2},{node:O,type:2,p:n+E}),A[O._id||0]={x:c,y:n,width:K,height:E}),O.each(function(P){if(Tk(P)&&!t.isSelected(P)&&t.isVisible(P)&&t.isValidGuideLineSource(P)){var W=!1;if(t.sm().getSelection().each(function(s){W||(P.isHostOn(s)?W=!0:P.isDescendantOf(s)&&(W=!0))}),!W){var j=P.getRect();c=j.x,n=j.y,K=j.width,E=j.height,U.push({node:P,type:0,p:c},{node:P,type:1,p:c+K/2},{node:P,type:2,p:c+K}),T.push({node:P,type:0,p:n},{node:P,type:1,p:n+E/2},{node:P,type:2,p:n+E}),A[P._id]=j}}}),U.sort(function(I,$){return I.p-$.p}),T.sort(function(g,L){return g.p-L.p}),l._grid=N,l._87I=A},Vj.prototype.gatherLines=function(h,w,G){var z,A,s,c,Y,e,u,q,B,i,F,N,K=this,O=[K.findClosest({x:h.x,y:h.y},w),K.findClosest({x:h.x+h.w/2,y:h.y+h.h/2},w),K.findClosest({x:h.x+h.w,y:h.y+h.h},w)],R={},t=K._87I;G=G||255;var V,S;for(K._guideLine=[],z=0;2>z;z++)for(R={},0===z?(c="y",q=h.x,B=q+h.w):(c="x",q=h.y,B=q+h.h),A=0;3>A;A++)Y=O[A],Y&&isFinite(Y[c])&&(V=1<<3*z+A,G&V&&(e=Y[c+"Line"],u=e.node,S=u._id||0,R[S]||(R[S]=!0,N=t[S],"y"===c?(i=N.x,F=N.x+N.width):(i=N.y,F=N.y+N.height),s=e.p,K._guideLine.push({type:c,a:q,b:B,c:i,d:F,p:s,center:1===e.type}))))},Vj.prototype._binarySearchClosest=function(m,J){if(!J.length)return{dis:1/0};for(var n,k=0,d=J.length-1;d-k>1;)n=Math.floor((k+d)/2),J[n].p<m?k=n:d=n;var f=J[k].p-m,h=J[d].p-m;return Math.abs(f)<=Math.abs(h)?{line:J[k],dis:f}:{line:J[d],dis:h}},Vj.prototype.findClosest=function(H,D,v){var h=this,E=h._interactor,G=E.gv,i=h._grid;v&&(H=sf.toWorldPosition(G,H));var U,_=h._binarySearchClosest(H.x,i.x),u=h._binarySearchClosest(H.y,i.y),M=_.dis,K=u.dis,Q=G._zoom,o=E.getStyle("smartGuideThreshold")/Q,p={};return Math.abs(M)<o&&"y"!==D&&(p.x=v?M*Q:M,p.xLine=_.line,U=!0),Math.abs(K)<o&&"x"!==D&&(p.y=v?K*Q:K,p.yLine=u.line,U=!0),U?p:void 0},Vj.prototype._42=function(){var M=this,x=M._guideLine;if(x&&!L.Default.isCtrlDown()){var Y=M._interactor;if(Y.getStyle("guideLineVisible")){var F,E,J,I,s,l,z,D,p,m,b,j,n,K,q,G,Z,U=Y.gv,$=Y._context,A=U.tx(),N=U.ty(),r=U._zoom,d=Y.getStyle("guideLineTextSpacing");for(F=0,E=x.length;E>F;F++)J=x[F],D=J.type,p=J.p,m=J.a,b=J.b,j=J.c,n=J.d,K=Math.min(m,j),q=Math.max(b,n),"x"===D?(I=p*r+A,s=K*r+N,l=I,z=q*r+N):(I=K*r+A,s=p*r+N,l=q*r+A,z=s),sf.Icons.DrawIcon(Y,$,sf.Icons.MoveLineGuide,{rect:[I,s,l,z],center:J.center}),n>=m&&b>=j||(K=m>n?n:b,q=m>n?m:j,Z=q-K,"x"===D?(J.center2center||(I-=d,l=I),s=K*r+N,z=q*r+N,G=sf.Icons.MoveLineGuideDistanceV):"y"===D&&(J.center2center||(s-=d,z=s),I=K*r+A,l=q*r+A,G=sf.Icons.MoveLineGuideDistanceH),sf.Icons.DrawIcon(Y,$,G,{x0:I,y0:s,x1:l,y1:z,dis:Z}))}}},Vj.prototype.clear=function(){this._guideLine=null};var rp=sf.Guide.Hover=function(U){var h=this;h._interactor=U};rp.prototype={},rp.prototype.constructor=rp,b.defineProperties(rp.prototype,{}),rp.prototype._42=function(){var P=this._interactor;if(P.getStyle("hoverGuideVisible")&&!P.gvEditing){var S=P.hoverData,I=P.gv;if(!Tk(S)||I.isSelected(S))return P.hoverData=null,void 0;var H=Gl(I,S),z=sf.toScreenPosition(I,{x:H.x,y:H.y}),y=sf.toScreenPosition(I,{x:H.x+H.width,y:H.y+H.height});sf.Icons.DrawIcon(P,P._context,sf.Icons.HoverDataRect,{min:z,max:y,color:P.getStyle("hoverGuideColor")||P.getStyle("baseColor"),borderWidth:P.getStyle("hoverGuideBorderWidth")||1,borderPattern:P.getStyle("hoverGuideBorderPattern")||[1,4]})}},sf.DefaultStyleMap={baseColor:"rgb(51,153,255)",pointSize:[24,9],checkSize:7,rotateCheckSize:10,moveSensitivity:10,moveDummyThreshold:32,moveDummyPosition:[0,0,-16,-16],moveDummyLineExtraShift:[-32,0],moveDummySensitivity:16,keepAspectRatio:!1,rotateRound:Math.PI/2,shiftRotateRound:Math.PI/12,rotateSensitivity:Math.PI/60,rotateAsClock:!1,rotateTipVisible:!0,shiftLineRotateRound:Math.PI/4,anchorMovable:!0,anchorVisible:!0,anchorHideThreshold:25,anchorOutsideVisibleThreshold:.25,anchorRound:.25,anchorSensitivity:.02,smartGuideThreshold:8,curveIntersectSize:5,curvePointIntersectSize:8,edgeHostDetectPerFrame:!0,edgeHostEdgeMaxDistance:12,edgeHostEdgeHighlighColor:"#5d5d5d",edgeHostPointHighlighColor:"red",edgeHostHighlighPeriod:1500,edgeElevationEditable:!1,attachThreshold:25,guideLineVisible:!0,guideLineTextSpacing:0,hoverGuideVisible:!1,hoverGuideColor:null,gridBlockSize:40,gridThickLinesEvery:10,gridThickColor:"#5d5d5d",gridLightColor:"#d0d0d0",gridZoomThreshold:.25,gridAlignmentGuideColor:"#ff0000",gridAngle:Math.PI/2,gridRotation:0,groupRotateModeDefault:"block",groupRotateModeKey:["ctrlKey","metaKey"],rotateCursorSize:32,rotateCursorRound:45,tipTextColor:"#ffffff",tipBackground:"#333333",curveHighlightColor:"#30599e",rectPointBackground:"white",rectPointBorderColor:"#666666",rectPointShadowColor:"rgba(0,0,0,0.35)",shapeCtrlPointBackground:"white",shapeCtrlPointBorderColor:null,shapeCtrlPointHighlightBorder:null,shapeHighlighPointBackground:"#30599e",curveElevationVisible:!0,curveElevationIntersectSize:8,curveElevationGuideShift:[20,0],curveTipVisible:!0,connectGuideVisible:!0,connectGuideShift:[1,.25,8,0],connectGuideIntersectSize:8,connectGuideGarbageIntersectsize:25,connectGuideGarbageShift:[1,1,-48,-48]};var fi=sf.Icons={},xd=1e4,ek=null,tq=sf.DefaultStyleMap.baseColor,tg="rgb(183,232,135)",qn="rgb(255,204,153)",Zl=6;L.Default.setImage("Icons.RectPoint",{width:Zl,height:Zl,comps:[{type:"rect",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return tq}},rect:[0,0,Zl,Zl]}]}),fi.GroupSubEntityRect={comps:[{type:"shape",points:{func:function(){var k=fi.GroupSubEntityRect.data;if(!k)return[];var c=k.min,B=k.max;return[c.x,c.y,c.x,B.y,B.x,B.y,B.x,c.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return fi.GroupSubEntityRect.data.isKeyOb?tq:tq}}}]};var xn=4;fi.HoverDataRect={comps:[{type:"shape",points:{func:function(){var u=fi.HoverDataRect.data;if(!u)return[];var f=u.min,o=u.max,y=xn;return f.x-=y,f.y-=y,o.x+=y,o.y+=y,[f.x,f.y,f.x,o.y,o.x,o.y,o.x,f.y]}},segments:[1,2,2,2,5],background:null,borderWidth:{func:function(){return fi.HoverDataRect.data.borderWidth}},borderColor:{func:function(){return fi.HoverDataRect.data.color}},borderCap:"butt",borderPattern:{func:function(){return fi.HoverDataRect.data.borderPattern}}}]},fi.Line={comps:[{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[fi.Line.data.P1.x,fi.Line.data.P1.y],Zl,Zl]}}},{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[fi.Line.data.P2.x,fi.Line.data.P2.y],Zl,Zl]}}}]},fi.NodeHoverGuide={comps:[{type:"shape",points:{func:function(){return fi.NodeHoverGuide.data}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:"#3399FF"}]},fi.Rect={comps:[{type:"shape",points:{func:function(){var P=fi.Rect.data;if(!P)return[];var E=P.LT,$=P.LB,L=P.RB,a=P.RT;return[E.x,E.y,$.x,$.y,L.x,L.y,a.x,a.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return tq}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return fi.Rect.data.rotation
}},rect:{func:function(){return[[fi.Rect.data.LT.x,fi.Rect.data.LT.y],Zl,Zl]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return fi.Rect.data.rotation}},rect:{func:function(){return[[fi.Rect.data.LB.x,fi.Rect.data.LB.y],Zl,Zl]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return fi.Rect.data.rotation}},rect:{func:function(){return[[fi.Rect.data.RB.x,fi.Rect.data.RB.y],Zl,Zl]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return fi.Rect.data.rotation}},rect:{func:function(){return[[fi.Rect.data.RT.x,fi.Rect.data.RT.y],Zl,Zl]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return fi.Rect.data.rotation}},visible:{func:function(){return fi.Rect.data.L?!0:!1}},rect:{func:function(){return[[fi.Rect.data.L.x,fi.Rect.data.L.y],Zl,Zl]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return fi.Rect.data.rotation}},visible:{func:function(){return fi.Rect.data.R?!0:!1}},rect:{func:function(){return[[fi.Rect.data.R.x,fi.Rect.data.R.y],Zl,Zl]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return fi.Rect.data.rotation}},visible:{func:function(){return fi.Rect.data.T?!0:!1}},rect:{func:function(){return[[fi.Rect.data.T.x,fi.Rect.data.T.y],Zl,Zl]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return fi.Rect.data.rotation}},visible:{func:function(){return fi.Rect.data.B?!0:!1}},rect:{func:function(){return[[fi.Rect.data.B.x,fi.Rect.data.B.y],Zl,Zl]}}}]};var Ng=16;L.Default.setImage("Icons.Anchor",{width:12,height:12,comps:[{type:"shape",borderWidth:1,borderColor:{func:function(){return tq}},borderCap:"round",shadowColor:"#1ABC9C",points:[.50928,6,11.49072,6,6,6,6,.50928,6,11.49072]},{type:"circle",borderWidth:1,borderColor:{func:function(){return tq}},shadowColor:"#1ABC9C",rect:[2.84391,2.84391,6.53697,6.53697]}]}),fi.Anchor={comps:[{type:"image",name:"Icons.Anchor",rect:{func:function(){return[[fi.Anchor.data.POS.x,fi.Anchor.data.POS.y],Ng,Ng]}}}]},fi.TipShiftX=12,fi.TipShiftY=12;var Hk=[8,28];fi.TipHelper={comps:[{type:"roundRect",rect:{func:function(){return[fi.TipHelper.data.helperPos.x,fi.TipHelper.data.helperPos.y,Hk[0]*fi.TipHelper.data.size,Hk[1]]}},background:{func:function(){return ek.getStyle("tipBackground")}},opacity:.6},{type:"text",text:{func:function(){return fi.TipHelper.data.text}},rect:{func:function(){return[fi.TipHelper.data.helperPos.x,fi.TipHelper.data.helperPos.y,Hk[0]*fi.TipHelper.data.size,Hk[1]]}},color:{func:function(){return ek.getStyle("tipTextColor")}},font:"bold 12px Arial",align:"center"}]};var pr=7;fi.ShapePoint={comps:[{type:"circle",visible:{func:function(){return!!fi.ShapePoint.data.dynamicVisible}},rect:{func:function(){var G=fi.ShapePoint.data.point,J=fi.ShapePoint.data.size||pr;return[G,J+10,J+10]}},background:{func:function(){var v=Date.now(),t=fi.ShapePoint.data.dynamicPeriod||1500,u=Math.sin(v%t/t*Math.PI);return"rgba(27,124,22,"+.5*u+")"}},borderWidth:0},{type:"circle",rect:{func:function(){var m=fi.ShapePoint.data.point,M=fi.ShapePoint.data.size||pr;return[m,M,M]}},background:{func:function(){var K=fi.ShapePoint.data.isEnd;return K?"rgba(27,124,222,0.7)":"#ffffff"}},borderWidth:1,borderColor:{func:function(){return fi.ShapePoint.data.color||tq}}},{type:"rect",visible:{func:function(){return!!fi.ShapePoint.data.dynamicVisible}},background:"red",borderWidth:0,rotation:Math.PI/4,borderColor:{func:function(){return tq}},rect:{func:function(){var T=5;return[fi.ShapePoint.data.point,T,T]}}}]},fi.ShapeBgCurve={comps:[{type:"shape",visible:{func:function(){return!!fi.ShapeBgCurve.data.dynamicVisible}},points:{func:function(){return fi.ShapeBgCurve.data.P}},segments:{func:function(){return fi.ShapeBgCurve.data.S}},background:null,borderWidth:6,borderColor:{func:function(){var F=Date.now(),G=fi.ShapeBgCurve.data.dynamicPeriod||1500,J=Math.sin(F%G/G*Math.PI);return"rgba(27,124,22,"+.3*J+")"}}},{type:"shape",points:{func:function(){return fi.ShapeBgCurve.data.P}},segments:{func:function(){return fi.ShapeBgCurve.data.S}},background:null,borderWidth:1,borderColor:{func:function(){return fi.ShapeBgCurve.data.color||tq}}}]};var Si=8;fi.ShapeHighlighPoint={comps:[{type:"circle",rect:{func:function(){var l=fi.ShapeHighlighPoint.data;return[[l.x,l.y],Si,Si]}},background:{func:function(){return ek.getStyle("shapeHighlighPointBackground")}},borderWidth:0}]};var Gm=10;fi.ShapeHighlighRealPoint={comps:[{type:"circle",rect:{func:function(){var b=fi.ShapeHighlighRealPoint.data;return[[b.x,b.y],Gm,Gm]}},background:"#ffffff",borderWidth:2,borderColor:{func:function(){return tq}}}]};var gk=8;fi.ShapeHighlighCtrlPoint={comps:[{type:"shape",points:{func:function(){var q=fi.ShapeHighlighCtrlPoint.data,a=q.x,L=q.y,s=gk/2;return[a-s,L-s,a-s,L+s,a+s,L+s,a+s,L-s]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return ek.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return ek.getStyle("shapeCtrlPointBorderColor")||tq}}}]};var Yn=3;fi.ShapeHighlightCurve={comps:[{type:"shape",points:{func:function(){return fi.ShapeHighlightCurve.data}},segments:[1,4],background:null,borderWidth:Yn,borderColor:{func:function(){return ek.getStyle("curveHighlightColor")}}}]},fi.ShapeGuideLine={comps:[{type:"shape",points:{func:function(){return fi.ShapeGuideLine.data}},background:null,borderWidth:1,borderColor:"rgb(255,204,153)"}]},fi.MoveLineGuide={comps:[{type:"shape",points:{func:function(){return fi.MoveLineGuide.data.rect}},background:null,borderWidth:1,borderColor:{func:function(){return fi.MoveLineGuide.data.center?tg:qn}}}]};var Ef=5;fi.MoveLineGuideDistanceH={comps:[{type:"shape",points:{func:function(){var o=fi.MoveLineGuideDistanceH.data,Y=o.x0,n=o.y0;return[Y,n-Ef,Y,n+Ef]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:qn},{type:"shape",points:{func:function(){var Y=fi.MoveLineGuideDistanceH.data,h=Y.x1,V=Y.y1;return[h,V-Ef,h,V+Ef]}},rotation:-Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:qn},{type:"text",text:{func:function(){return Math.round(fi.MoveLineGuideDistanceH.data.dis)}},rect:{func:function(){var G=fi.MoveLineGuideDistanceH.data;return[[(G.x0+G.x1)/2,G.y0-10],20,20]}},color:qn,font:"12px Arial",align:"center"}]},fi.MoveLineGuideDistanceV={comps:[{type:"shape",points:{func:function(){var n=fi.MoveLineGuideDistanceV.data,G=n.x0,s=n.y0;return[G-Ef,s,G+Ef,s]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:qn},{type:"shape",points:{func:function(){var B=fi.MoveLineGuideDistanceV.data,K=B.x1,M=B.y1;return[K-Ef,M,K+Ef,M]}},rotation:Math.PI/4,segments:[1,2],background:null,borderWidth:1,borderColor:qn},{type:"text",text:{func:function(){return Math.round(fi.MoveLineGuideDistanceV.data.dis)}},rect:{func:function(){var j=fi.MoveLineGuideDistanceV.data;return[[j.x0-10,(j.y0+j.y1)/2],20,20]}},color:qn,font:"12px Arial",align:"center"}]},L.Default.setImage("Icons.EdgeElevationGuideImage",{width:16,height:16,comps:[{type:"oval",background:"rgb(255,255,255)",borderWidth:1,borderColor:"rgb(138,138,138)",rect:[.5,.5,15,15]},{type:"shape",borderWidth:2,borderColor:"rgb(44,44,44)",borderCap:"round",points:[4,8,8,4,12,8,8,4,8,13],segments:[1,2,2,1,2]}]}),fi.EdgeElevationGuide={comps:[{type:"image",name:"Icons.EdgeElevationGuideImage",rect:{func:function(){var B=fi.EdgeElevationGuide.data,Y=B.x,k=B.y,b=ek.getStyle("curveElevationIntersectSize"),C=ek.getStyle("curveElevationGuideShift");return Y+=C[0],k+=C[1],[Y-b,k-b,2*b,2*b]}}}]},L.Default.setImage("Icons.ConnectGuideBgImage",{width:12,height:12,comps:[{type:"shape",background:"#3399ff",fillRule:"evenodd",shadowColor:"#1ABC9C",rotation:3.14159,points:[6.00001,11.99999,6.00001,11.99999,2.6863,11.99999,1e-5,9.30695,1e-5,5.99999,1e-5,5.99999,1e-5,2.68628,2.69305,-1e-5,6.00001,-1e-5,12.00001,-1e-5,11.99998,12.00001,6.00001,11.99999],segments:[1,2,4,2,4,2,2,2]}]}),L.Default.setImage("Icons.ConnectGuideHeaderImage",{width:12,height:12,comps:[{type:"oval",background:"#3399FF",borderColor:"#3399FF",shadowColor:"#1ABC9C",rect:[0,0,12,12]},{type:"shape",borderWidth:1,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[4.76,2.56,8.2,5.98,4.76,9.44]}]}),fi.ConnectGuide={comps:[{type:"image",name:"Icons.ConnectGuideBgImage",rotation:{func:function(){return fi.ConnectGuide.data.rotation}},rect:{func:function(){var v=fi.ConnectGuide.data.connect;v.x,v.y;var u=ek.getStyle("connectGuideIntersectSize");return[[v.x,v.y],2*u,2*u]}}},{type:"image",name:"Icons.ConnectGuideHeaderImage",rect:{func:function(){var F=fi.ConnectGuide.data.cursorPos||fi.ConnectGuide.data.connect,t=ek.getStyle("connectGuideIntersectSize");return[[F.x,F.y],2*t-2,2*t-2]}}},{type:"shape",background:null,borderColor:"#3399ff",borderWidth:2,segments:[1,4],points:{func:function(){var K=fi.ConnectGuide.data.connect,v=fi.ConnectGuide.data.cursorPos||K;return[K.x,K.y,K.x+.5*(v.x-K.x),K.y,v.x+.5*(K.x-v.x),v.y,v.x,v.y]}}}]},L.Default.setImage("Icons.ConnectGuideGarbageImage",{width:48,height:48,comps:[{type:"oval",background:"rgba(0,0,0,0.1)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,48,48]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[19.84721,19.69091,19.84721,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[24.10371,19.69091,24.10371,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[28.15279,19.69091,28.15279,32.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[11.23055,15.22377,36.76945,15.189,19.12302,15.17121,20.94722,11.5228,26.41985,11.5228,28.24406,15.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[15.48702,15.22377,17.02595,21.25344]}]}),L.Default.setImage("Icons.ConnectGuideDeletingImage",{width:56,height:56,comps:[{type:"oval",background:"rgba(232,0,0,0.75)",borderColor:"#979797",shadowColor:"#1ABC9C",rect:[0,0,56,56]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[22.67939,27.69091,22.67939,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[26.93588,27.69091,26.93588,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",points:[30.98497,27.69091,30.98497,40.25123]},{type:"shape",borderWidth:2,borderColor:"rgb(255,255,255)",borderCap:"round",shadowColor:"#1ABC9C",anchorX:0,anchorY:1,rotation:5.65062,points:[14.06272,23.22377,39.60163,23.189,21.9552,23.17121,23.7794,19.5228,29.25203,19.5228,31.07623,23.17121]},{type:"rect",borderWidth:2,borderColor:"rgb(255,255,255)",shadowColor:"#1ABC9C",rect:[18.3192,23.22377,17.02595,21.25344]}]}),fi.ConnectGuideGarbage={comps:[{type:"image",name:{func:function(){var G=fi.ConnectGuideGarbage.data.hover;return G?"Icons.ConnectGuideDeletingImage":"Icons.ConnectGuideGarbageImage"}},rect:{func:function(){var d=fi.ConnectGuideGarbage.data,q=ek.getStyle("connectGuideGarbageIntersectsize");return d.hover&&(q+=5),[[d.x,d.y],2*q,2*q]}}}]};var je=6;fi.ShapeActivingCtrl={comps:[{type:"shape",visible:{func:function(){return fi.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var i=fi.ShapeActivingCtrl.data;return[i.point.x,i.point.y,i.c1.x,i.c1.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return tq}}},{type:"shape",visible:{func:function(){return fi.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var g=fi.ShapeActivingCtrl.data;return[g.point.x,g.point.y,g.c2.x,g.c2.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:{func:function(){return tq}}},{type:"shape",visible:{func:function(){return fi.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var q=fi.ShapeActivingCtrl.data.c1,B=q.x,m=q.y,V=je/2;return"c1"===fi.ShapeActivingCtrl.data.hl&&(V+=.5),[B-V,m-V,B-V,m+V,B+V,m+V,B+V,m-V]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return ek.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c1"===fi.ShapeActivingCtrl.data.hl?ek.getStyle("shapeCtrlPointHighlightBorder")||tq:ek.getStyle("shapeCtrlPointBorderColor")||tq}}},{type:"shape",visible:{func:function(){return fi.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var G=fi.ShapeActivingCtrl.data.c2,e=G.x,H=G.y,B=je/2;return"c2"===fi.ShapeActivingCtrl.data.hl&&(B+=.5),[e-B,H-B,e-B,H+B,e+B,H+B,e+B,H-B]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return ek.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return"c2"===fi.ShapeActivingCtrl.data.hl?ek.getStyle("shapeCtrlPointHighlightBorder")||tq:ek.getStyle("shapeCtrlPointBorderColor")||tq}}}]},fi.RoundPoint={comps:[{type:"circle",background:"rgb(247,247,247)",borderWidth:1,borderColor:{func:function(){return tq}},rect:{func:function(){return[[fi.RoundPoint.data.x,fi.RoundPoint.data.y],Zl,Zl]}}}]},fi.AttachPoint={comps:[{type:"rect",background:{func:function(){return fi.AttachPoint.data.isAttach?"rgb(51,153,255)":"rgb(247,247,247)"}},borderWidth:1,rotation:Math.PI/4,borderColor:{func:function(){return tq}},rect:{func:function(){var n=fi.AttachPoint.data.isAttach?Zl+4:Zl;return[[fi.AttachPoint.data.x,fi.AttachPoint.data.y],n,n]}}}]},fi.SimpleRect={comps:[{type:"rect",background:null,borderWidth:{func:function(){return fi.SimpleRect.data.borderWidth||1}},borderColor:{func:function(){return fi.SimpleRect.data.color||tq}},rect:{func:function(){var n=fi.SimpleRect.data;return[n.x,n.y,n.width,n.height]}}}]},L.Default.setImage("Icons.MoveDummyImage",{width:32,height:32,boundExtend:12,attachStyle:"close",comps:[{type:"oval",background:"rgb(255,255,255)",borderColor:"#979797",shadow:!0,shadowColor:"rgba(0,0,0,0.25)",shadowOffsetX:0,rect:[0,0,32,32]},{type:"shape",background:"rgb(51,153,255)",pixelPerfect:!0,points:[8.65079,11.90713,9.05502,11.46921,9.70629,11.46921,10.11052,11.90713,10.51476,12.28891,10.51476,12.92895,10.11052,13.34441,8.49359,14.97258,12.2889,14.97258,12.85034,14.97258,13.29949,15.42172,13.29949,15.99439,13.29949,16.57828,12.85034,17.0162,12.2889,17.0162,8.49359,17.0162,10.11052,18.6556,10.51476,19.0486,10.51476,19.7111,10.11052,20.09288,9.70629,20.50834,9.05502,20.50834,8.65079,20.09288,5.32709,16.76917,5.28217,16.71303,4.87794,16.32002,4.87794,15.67998,5.28217,15.26452,8.65079,11.90713,8.65079,11.90713,8.65079,11.90713,13.3444,10.09931,13.3444,10.09931,12.94017,10.50354,12.2889,10.50354,11.88467,10.09931,11.48043,9.69507,11.48043,9.0438,11.88467,8.63957,15.27574,5.25973,15.66874,4.86672,16.32001,4.86672,16.73547,5.25973,16.76917,5.31586,20.10409,8.63957,20.50832,9.0438,20.50832,9.68385,20.10409,10.09931,19.69986,10.49231,19.07105,10.50354,18.64436,10.09931,17.02742,8.45991,17.02742,12.26646,17.02742,12.83912,16.55581,13.31072,15.99438,13.31072,15.43295,13.31072,14.98379,12.83912,14.98379,12.26646,14.96134,8.45991,13.3444,10.09931,13.3444,10.09931,13.3444,10.09931,21.90069,13.33318,21.90069,13.33318,21.49646,12.91771,21.49646,12.27768,21.90069,11.89591,22.31615,11.45798,22.94497,11.45798,23.36043,11.89591,26.72904,15.2533,27.12205,15.66876,27.12205,16.3088,26.72904,16.7018,26.6729,16.75794,23.36043,20.08165,22.94497,20.49711,22.31615,20.49711,21.90069,20.08165,21.49646,19.69987,21.49646,19.03737,21.90069,18.64437,23.51763,17.00498,19.72231,17.00498,19.14965,17.00498,18.71173,16.56705,18.71173,15.98316,18.71173,15.41049,19.14965,14.96135,19.72231,14.96135,23.51763,14.96135,21.90069,13.33318,21.90069,13.33318,21.90069,13.33318,11.88467,23.32675,11.88467,23.32675,11.48043,22.94498,11.48043,22.27125,11.88467,21.88948,12.2889,21.48523,12.94017,21.48523,13.3444,21.88948,14.96134,23.52887,14.98379,19.7111,14.98379,19.14966,15.43295,18.67805,15.99438,18.67805,16.55581,18.67805,17.02742,19.14966,17.02742,19.7111,17.02742,23.52887,18.64436,21.88948,19.07105,21.48523,19.69986,21.48523,20.10409,21.88948,20.50832,22.27125,20.50832,22.94498,20.10409,23.32675,16.76917,26.65045,16.73547,26.72905,16.32001,27.13329,15.66874,27.13329,15.27574,26.72905,11.88467,23.32675,11.88467,23.32675,11.88467,23.32675],segments:[1,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,4,2,2,4,4,2,2,4,4,2,2,2,2,1,2,4,4,2,2,4,4,2,2,4,4,2,2,4,2,2,2]}]}),fi.MoveDummy={comps:[{type:"image",name:"Icons.MoveDummyImage",rect:{func:function(){var S=fi.MoveDummy.data;return[[S.pos.x,S.pos.y],2*S.size,2*S.size]}}}]},sf.Icons.DrawIcon=function(E,D,B,W){B.width=B.height=xd,B.data=W,ek=E,L.Default.drawImage(D,B,0,0,xd,xd),ek=H},sf.Icons.MapPoints=function(f,i){for(var j=0,S=f.length;S>j;j++)f[j]/=i},sf.roundTo=function(w,p,c){var R=Math.abs(w%p);return c>R||c>p-R?p*Math.round(w/p):w},sf.toFixed=function(y){return Math.round(100*y)/100},sf.getDataMatrix=function(m){if(m instanceof L.Shape){var N=new L.Math.Matrix2d,f=m.getPosition();return N.translate(-f.x,-f.y).scale(m.getScale().x,m.getScale().y).rotate(m.getRotation()).translate(f.x,f.y),N}return m.getMatrix?m.getMatrix():new L.Math.Matrix2d};var vq=sf.Math.Curve=function(){this._curves=[]};vq.prototype={},vq.prototype.constructor=vq,vq.prototype.createFromHtShape=function(d,e,E){e instanceof L.List&&(e=e.toArray());var D,S,a,k,R,G,U,l=this,x=null,J=null,A=0,C=sf.Math.Vector2,V=sf.Math.CubicBezier,p=function(m){return new C(d[m],d[m+1],E?E[m/2]:H)};for(S=0,a=e.length;a>S;S++){switch(k=e[S],R=null,k){case 1:J=p(A),x=J,A+=2;break;case 2:D=p(A),A+=2,R=new V(J,J.clone(),D.clone(),D),J=D;break;case 3:G=p(A),D=p(A+2),A+=4,R=new V(J,G.clone().sub(J).multiplyScalar(2/3).add(J),G.clone().sub(D).multiplyScalar(2/3).add(D),D),J=D;break;case 4:G=p(A),U=p(A+2),D=p(A+4),A+=6,R=new V(J,G,U,D),J=D;break;case 5:if(!x)break;R=new V(J,J.clone(),x.clone(),x),J=null,x=null}R&&(R._index=l._curves.length,l._curves.push(R))}},vq.prototype.checkPoint=function(I,U){var P,m,v,$,w,n=this,d=n._curves;for(P=0,m=d.length;m>P;P++)if($=d[P],w=$.intersectRect(I,U,U),w.length)return v=0,w.forEach(function(c){v+=c.t}),v/=w.length,I=$.getPointAt(v),I.t=v,{bezier:$,intersection:I}},vq.prototype.insertKnot=function(c,C){var V=c.insertKnot(C),n=this,j=n._curves;j.splice(c._index,1,V[0],V[1])},vq.prototype._isCloseEnough=function(k,A){return Math.abs(k.x-A.x)<1e-6&&Math.abs(k.y-A.y)<1e-6},vq.prototype._isSamePoint=function(J,v){return J===v},vq.prototype.moveRealPoint=function(h,$){var V=this,B=V._curves,S=$.clone().sub(h);B.forEach(function(y){var Y=y._p1;y._p2,y._p3;var d=y._p4;V._isSamePoint(Y,h)&&(y._p2.add(S),y._p1=$),V._isSamePoint(d,h)&&(y._p3.add(S),y._p4=$)})},vq.prototype.moveCtrlDueToRealPointMovement=function(v,X){var I=this,E=I._curves,T=function(v){v.add(X),v.e&&X.e&&(v.e+=X.e)};E.forEach(function(S){var _=S._p1;S._p2,S._p3;var t=S._p4;I._isSamePoint(_,v)&&T(S._p2),I._isSamePoint(t,v)&&T(S._p3)})},vq.prototype.moveCtrlPoint=function(K,v,Z){var f=K[Z];if(f){f.e!==H&&(v.e=f.e);var e=this,r=e._curves;v.clone().sub(f),r.forEach(function(i){var u;"c2"===Z?u="_p2":"c1"===Z&&(u="_p3"),e._isSamePoint(i[u],f)&&(i[u]=v)}),K[Z]=v}},vq.prototype.deleteRealPoint=function(x,b){var g,i,U,a,v,G,I,f=this,h=f._curves,X={},z=[],F=sf.Math.CubicBezier;for(i=0,U=h.length;U>i;i++)g=h[i],a=g._p1,v=g._p2,G=g._p3,I=g._p4,(X[i]||!f._isSamePoint(a,x))&&(f._isSamePoint(I,x)?U>i+1&&f._isSamePoint(h[i+1]._p1,x)&&(b||z.push(new F(a,v,h[i+1]._p3,h[i+1]._p4))):z.push(g));f._curves=z},vq.prototype.findPairs=function(M,t){var V,_,F,d,p,y,l,Y,i=this,r=i._curves,B={},w=[];for(_=0,F=r.length;F>_;_++)V=r[_],d=V._p1,p=V._p2,y=V._p3,l=V._p4,!B[_]&&i._isSamePoint(d,M)&&(t?w.push({point:d,r2:l}):w.push({point:d,c2:p})),i._isSamePoint(l,M)&&(Y=t?{point:l,r1:d}:{point:l,c1:y},F>_+1&&i._isSamePoint(r[_+1]._p1,M)&&(t?Y.r2=r[_+1]._p4:Y.c2=r[_+1]._p2,B[_+1]=!0),w.push(Y));return w},vq.prototype.toHtShape=function(){var g=this,_=g._curves,Q=[],G=[],P={x:1/0,y:1/0};return _.forEach(function(_){var H=_._p1,W=_._p2,k=_._p3,A=_._p4;return g._isCloseEnough(H,P)||(Q.push(1),G.push(H.clone())),P=A,g._isCloseEnough(H,W)&&g._isCloseEnough(k,A)?(Q.push(2),G.push(A.clone()),void 0):(Q.push(4),G.push(W.clone(),k.clone(),A.clone()),void 0)}),{segments:Q,points:G}};var bi=sf.Math.CubicBezier=function($,e,x,b){var g=this;g._id=sf.Math.CubicBezier._globalId++,g._p1=$,g._p2=e,g._p3=x,g._p4=b};bi._globalId=1,bi.prototype={},bi.prototype.constructor=bi,bi.prototype.toString=function(){return this._id},bi.prototype.intersectRect=function(F,f,t){var m=f/2,V=t/2,v=F.x,z=F.y,c=sf.Math.Vector2,h=new c(-m+v,-V+z),Q=new c(m+v,V+z),P=new c(Q.x,h.y),b=new c(h.x,Q.y),o=this,u=o.intersectLine(h,P),g=o.intersectLine(P,Q),M=o.intersectLine(Q,b),J=o.intersectLine(b,h),S=u.concat(g).concat(M).concat(J);return S},bi.prototype.intersectLine=function(h,F){var E,$,k,l,n,Q,C,b,a,g,B,d,T,Z=this,A=h.clone().min(F),R=h.clone().max(F);l=Z._p1,n=Z._p2,Q=Z._p3,C=Z._p4,E=l.clone().multiplyScalar(-1),$=n.clone().multiplyScalar(3),k=Q.clone().multiplyScalar(-3),B=E.add($).add(k).add(C),E=l.clone().multiplyScalar(3),$=n.clone().multiplyScalar(-6),k=Q.clone().multiplyScalar(3),g=E.add($).add(k),E=l.clone().multiplyScalar(-3),$=n.clone().multiplyScalar(3),a=E.add($),b=l.clone(),T=new sf.Math.Vector2(h.y-F.y,F.x-h.x),d=h.x*F.y-F.x*h.y;for(var j=Z.getRoots(T.dot(B),T.dot(g),T.dot(a),T.dot(b)+d),I=new Array,w=0,X=j.length;X>w;w++){var e=j[w];if(!(0>e||e>1)){var S=Z.getPointAt(e);S.t=e,h.x==F.x?A.y<=S.y&&S.y<=R.y&&I.push(S):h.y==F.y?A.x<=S.x&&S.x<=R.x&&I.push(S):S.x>=A.x&&S.y>=A.y&&S.x<=R.x&&S.y<=R.y&&I.push(S)}}return I},bi.prototype.solveTForPoint=function(f){var G,u,m,k,w=this;G=w._p1.x-f.x,u=w._p2.x-f.x,m=w._p3.x-f.x,k=w._p4.x-f.x;for(var t=w.getRoots(k-3*m+3*u-G,3*m-6*u+3*G,3*u-3*G,G),e=H,D=1/0,P=0,d=t.length;d>P;P++){var _=t[P];if(!(0>_||_>1)){var j=w.getPointAt(_);j.t=_;var L=Math.abs(j.y-f.y);D>L&&(D=L,e=j)}}return e},bi.prototype.getPointAt=function(e){var v=this,t=v._p1,h=v._p2,E=v._p3,f=v._p4,M=t.clone().lerp(h,e),N=h.clone().lerp(E,e),W=E.clone().lerp(f,e),$=M.lerp(N,e),n=N.lerp(W,e);return $.lerp(n,e)},bi.prototype.getPointByPercentage=function(R){var N=this.length*R,e=this._cacheLength,C=e.length;if(0===N)return e[0].point;if(R>=1)return e[C-1].point;for(var $=0;C>$;$++){var T=e[$];if(!(T.len<N)){var c=e[$-1];return T.point.clone().sub(c.point).setLength(N-c.len).add(c.point)}}},bi.prototype.getTByPercentage=function(V){var d=this.length*V,O=this._cacheLength,A=O.length;if(0===d||0>=V)return O[0].t;if(V>=1)return O[A-1].t;for(var z=0;A>z;z++){var y=O[z];if(!(y.len<d)){var W=O[z-1];return(d-W.len)/(y.len-W.len)*(y.t-W.t)+W.t}}},bi.prototype.getRoots=function(J,y,s,X){var x,q,B,H,t,b=new Array;if(Math.abs(J)<1e-6){var x=y,q=s/x,B=X/x,H=q*q-4*B;if(H>0){var t=Math.sqrt(H);b.push(.5*(-q+t)),b.push(.5*(-q-t))}else 0==H&&b.push(.5*-q)}y/=J,s/=J,X/=J,x=(3*s-y*y)/3,q=(2*y*y*y-9*s*y+27*X)/27;var O=y/3,N=q*q/4+x*x*x/27,M=q/2;if(Math.abs(N)<=1e-6&&(N=0),N>0){var p,Y,t=Math.sqrt(N);p=-M+t,Y=p>=0?Math.pow(p,1/3):-Math.pow(-p,1/3),p=-M-t,p>=0?Y+=Math.pow(p,1/3):Y-=Math.pow(-p,1/3),b.push(Y-O)}else if(0>N){var d=Math.sqrt(-x/3),R=Math.atan2(Math.sqrt(-N),-M)/3,Z=Math.cos(R),o=Math.sin(R),l=Math.sqrt(3);b.push(2*d*Z-O),b.push(-d*(Z+l*o)-O),b.push(-d*(Z-l*o)-O)}else{var p;p=M>=0?-Math.pow(M,1/3):Math.pow(-M,1/3),b.push(2*p-O),b.push(-p-O)}return b},bi.prototype._70I=function(){var p=this;return p._p1.distanceToSquared(p._p2)<1e-10&&p._p3.distanceToSquared(p._p4)<1e-10},bi.prototype.insertKnot=function(u){var V=this,F=V._p1,j=V._p2,T=V._p3,Q=V._p4,b=F.clone().lerp(j,u),W=j.clone().lerp(T,u),c=T.clone().lerp(Q,u),h=b.clone().lerp(W,u),q=W.clone().lerp(c,u),S=h.clone().lerp(q,u);return V._70I()?(F.clone().lerp(Q,u),[new sf.Math.CubicBezier(F,F.clone(),S.clone(),S),new sf.Math.CubicBezier(S,S.clone(),Q.clone(),Q)]):[new sf.Math.CubicBezier(F,b,h,S),new sf.Math.CubicBezier(S,q,c,Q)]},b.defineProperties(bi.prototype,{length:{get:function(){var F=this._cacheLength;if(!F){F=this._cacheLength=[];for(var P=this._p1,m=0,V=0;1>=m;){var X=this.getPointAt(m+=.001);V+=X.clone().sub(P).length(),P=X,F.push({len:V,t:m,point:X.clone()})}}return F[F.length-1].len}},p1:{get:function(){return this._p1},set:function(p){this._p1=p,this._cacheLength=H}},p2:{get:function(){return this._p2},set:function(y){this._p2=y,this._cacheLength=H}},p3:{get:function(){return this._p3},set:function(Z){this._p3=Z,this._cacheLength=H}},p4:{get:function(){return this._p4},set:function(F){this._p4=F,this._cacheLength=H}}});var _g=L.Default.getInternal().ui().EdgeUI,Yb={_47O:function(U){var $=this,S=Yb.getBackups()._47O;sf.inEdit($.gv)||S.call($,U)}};sf.Inject.registAsModule(Yb,_g);var Bj=L.Default.getInternal().ui().NodeUI,Dr={_47O:function(E){var n=this,e=Dr.getBackups()._47O;sf.inEdit(n.gv)||e.call(n,E)},getSelectWidth:function(){var P=this,Y=P.gv,B=P._data;if(Y.isEditable(B)&&sf.inEdit(Y))return 0;var l=Dr.getBackup("getSelectWidth");return l.call(P)}};sf.Inject.registAsModule(Dr,Bj);var Fn=L.graph.GraphView,Ii={_editPointSize:function(){var d=L.Default.isTouchable,p=sf.getStyle("pointSize");return p[d?0:1]}(),isPointEditable:function(B){var j=this;if(sf.inEdit(j))return j._pointEditableFunc?j._pointEditableFunc(B):!0;var I=Ii.getBackup("isPointEditable");I.call(j,B)},isEditable:function(_){var U,s=this,n=Ii.getBackup("isEditable");if(U=_ instanceof sf.Group?!0:n.call(s,_),!sf.inEdit(s))return U;if(!(_ instanceof L.Edge))return U;if(!_.s("2d.editable"))return!1;var Q=s.getEditableFunc();return Q?Q(_):!0},_42:function(i,P){var L=this,z=Ii.getBackups()._42;if(z.call(L,i,P),sf.inEdit(L)){var _=L.getEditInteractor();_.drawImpl()}}};sf.Inject.registAsModule(Ii,Fn);var qh=L.Default.getInternal().ui().ShapeUI,is={_47O:function(p){var O=this,g=is.getBackups()._47O;sf.inEdit(O.gv)||g.call(O,p)}};sf.Inject.registAsModule(is,qh);var nr=L.graph.DefaultInteractor,ti={handle_mousewheel:function(K){var s=this,b=ti.getBackup("handle_mousewheel");sf.inEdit(s.gv)||b.call(s,K)}};sf.Inject.registAsModule(ti,nr);var yc=L.graph.MoveInteractor,yg={_calcShift:function(J,e){var E=this,G=yg.getBackup("_calcShift"),Q=E.gv;if(!sf.inEdit(Q))return G.call(E,J,e);var N=Q.getEditInteractor(),X=N.getSubModule("Move").calcShift(J,e,E);return X||G.call(E,J,e)},clear:function(H){var $=this,r=yg.getBackup("clear");r.call($,H);var i=$.gv;if(sf.inEdit(i)){var V=i.getEditInteractor();V.getSubModule("Move").clear(H)}}};sf.Inject.registAsModule(yg,yc);var Vj=sf.Rect=function(u){this.catalog="Rect",this._interactor=u};Vj.prototype={},Vj.prototype.constructor=Vj,Vj.prototype.gatherInfo=function(i,_){var b=this;if(1===_.length){var f=_[0];return f instanceof L.Shape&&f._70I()?b.gatherLine(i,f):dj(f,i)?!1:b.gatherSingleTarget(i,f)}return _.length>1?b.gatherMultiTargets(i,_):!1},Vj.prototype.gatherSingleTarget=function(l,u){if(u.getCorners){var L,z=this,Y=z.info;z.target=u,L=z.screenInfo={};var Z=u.getCorners();Y.LT=new sf.Math.Vector2(Z[0]),Y.LB=new sf.Math.Vector2(Z[1]),Y.RB=new sf.Math.Vector2(Z[2]),Y.RT=new sf.Math.Vector2(Z[3]),Y.T=Y.LT.clone().add(Y.RT).divideScalar(2),Y.B=Y.LB.clone().add(Y.RB).divideScalar(2),Y.L=Y.LT.clone().add(Y.LB).divideScalar(2),Y.R=Y.RT.clone().add(Y.RB).divideScalar(2);for(var X in Y)L[X]=sf.toScreenPosition(l,Y[X]);var g=z._interactor,i=g.getStyle("checkSize"),J=function(E,y,Y){var u=y.clone().sub(E).setLength(-i),D=Y.clone().sub(E).setLength(-i),L=u.add(D).add(E);return L};return L.rotLT=J(L.LT,L.RT,L.LB),L.rotLB=J(L.LB,L.LT,L.RB),L.rotRB=J(L.RB,L.LB,L.RT),L.rotRT=J(L.RT,L.LT,L.RB),L.rotT=L.rotLT.clone().add(L.rotRT).divideScalar(2),L.rotB=L.rotLB.clone().add(L.rotRB).divideScalar(2),L.rotL=L.rotLT.clone().add(L.rotLB).divideScalar(2),L.rotR=L.rotRT.clone().add(L.rotRB).divideScalar(2),L.rotation=u.getRotation(),z.gatherConnectInfo(),!0}},Vj.prototype.gatherConnectInfo=function(){var E=this,S=E.target,W=E._interactor,$=E.screenInfo,a=W.gv;if(a.isConnectActionVisible(S)&&W.getStyle("connectGuideVisible")){var M;S.s&&(M=S.s("connectGuideShift")),M||(M=W.getStyle("connectGuideShift"));var t=S.getAnchor(),U=S.getSize(),F=S.toGlobal({x:U.width*(M[0]-t.x),y:U.height*(M[1]-t.y)});F=sf.toScreenPosition(a,F),$.P1?F.add($.P2.clone().sub($.P1).setLength(M[2])):(F.add($.RT.clone().sub($.LT).setLength(M[2])),F.add($.LB.clone().sub($.LT).setLength(M[3]))),$.connect=F}},Vj.prototype.gatherMultiTargets=function(X,k){var a=sf.Group.findOrCreateGroup(k,this._interactor._uuid);if(!a)return!1;var C=this;return C.editing&&"rotate"!==C.editing.mode||a.calcInfo(),C.gatherSingleTarget(X,a)},Vj.prototype.gatherLine=function(k,X){this.target=X;var F=this.screenInfo={},D=X.getPoints(),Y=sf.getDataMatrix(X);return F.P1=sf.toScreenPosition(k,Y.apply(D.get(0))),F.P2=sf.toScreenPosition(k,Y.apply(D.get(1))),this.gatherConnectInfo(),!0},Vj.ResizeKeys=["LT","RB","LB","RT","L","R","B","T"],Vj.ResizeDirection=[{x:-1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],Vj.RotateKeys=["rotLT","rotRB","rotLB","rotRT","rotL","rotR","rotB","rotT"],Vj.prototype.check=function(P,K,m){if(L.Default.isLeftButton(K)){var e=this;if(e.editing=null,e.tipInfo=null,e.screenInfo){var W=e.target,S=P.isEditable(W),F=e.screenInfo;if(S&&F.connect){var y=e._checkConnect(m);if(y)return y}if(F.P1)return e._checkLine(m);var w,Z,J,Y=null,u=e._interactor,N=u.getStyle("checkSize");if(S&&P.isRectEditable(W))for(Z=0;Z<sf.Rect.ResizeKeys.length;Z++)if(J=sf.Rect.ResizeKeys[Z],sf.checkHit(m,F[J],N)){Y=J,w="resize";break}if(!Y&&S&&P.isRotationEditable(W)&&!u.getStyle("rotateAsClock")){var g=u.getStyle("rotateCheckSize");for(Z=0;Z<sf.Rect.RotateKeys.length;Z++)if(J=sf.Rect.RotateKeys[Z],sf.checkHit(m,F[J],g)){Y=J,w="rotate";break}}if(!Y)return u.setCursor("default"),void 0;if("rotate"===w){var f,V=P.lp(K);if(W instanceof sf.Group){var o=u.getStyle("groupRotateModeKey");"string"==typeof o&&(o=[o]);for(var I=!1,p=0,Q=o.length;Q>p;p++)if(K[o[p]]){I=!0;break}var c=u.getStyle("groupRotateModeDefault");f=I?"batch"===c?"block":"batch":c}var G="batch"===f?W.getAnchor2():W.getPosition(),A=Math.atan2(V.y-G.y,V.x-G.x);u._setRotateCursor(A),e.editing={mode:w,key:Y,pos:G,flipY:W.getScale().y<0,rotation:W.getRotation(),hitRot:A},f&&(e.editing.groupRotateMode=f)}else{var z=sf.Rect.ResizeKeys.indexOf(Y),C=sf.Rect.ResizeDirection[z],U=Math.cos(W.getRotation()),_=Math.sin(W.getRotation()),s=C.x*Math.sign(W.getScale().x),r=C.y*Math.sign(W.getScale().y),H=Math.atan2(-_*s-U*r,U*s-_*r),T=(Math.round(H/(Math.PI/4))+8)%8,R=["ew-resize","nesw-resize","ns-resize","nwse-resize","ew-resize","nesw-resize","ns-resize","nwse-resize"][T];this._interactor.setCursor(R);var q=W.getWidth(),l=W.getHeight(),X=W.getAnchor();e.editing={mode:w,key:Y,rect:{x:-q*X.x,y:-l*X.y,width:q,height:l},anchor:X,matrix:W.getMatrix()}}return Y}}},Vj.prototype._checkLine=function(G){var i=this;i.screenInfo;var I,C=i._interactor.getStyle("checkSize");if(sf.checkHit(G,i.screenInfo.P1,C))I="P1";else{if(!sf.checkHit(G,i.screenInfo.P2,C))return this._interactor.setCursor("default"),void 0;I="P2"}return i.editing={mode:"line",key:I},I},Vj.prototype._checkConnect=function(O){var _=this,l=_.screenInfo,I=_._interactor,U=I.getStyle("connectGuideIntersectSize"),q=l.connect,a=O.x,e=q.x;if(e>a&&U>e-a&&Math.abs(q.y-O.y)<U||a>=e&&sf.checkHit(O,q,U)){var N="connect",L=T.getConnectAction(I.gv);if(_.editing={mode:N},L&&L.delete)if(_.target instanceof sf.Group){var E=!0;I.gv.sm().getSelection().each(function(J){L.delete.visible.call(null,I.gv,J)||(E=!1)}),_.editing.hasDeleteAction=E}else L.delete.visible.call(null,I.gv,_.target)&&(_.editing.hasDeleteAction=!0);return I.setCursor("default"),N}},Vj.prototype._fireEditEvent=function(L,G){var u=this._interactor,b=this.editing;if(b){var a=b.mode;a="rotate"===a?"Rotation":"connect"===a?"Connection":"resize"===a?"Rect":a[0].toUpperCase()+a.slice(1),u.fi({kind:L+"Edit"+a,event:G})}},Vj.prototype.startEdit=function(V,B){V.startDragging(B);var G=this;G._interactor.fi({kind:"prepareEdit",event:B});var v=G.editing,D=G.target;if(v){if(G._fireEditEvent("begin",B),v.started=!0,"rotate"===v.mode)return v.groupRotateMode&&D.beginRotate(v),V._42(),void 0;
if("connect"!==v.mode)("line"===v.mode||D&&0===D.getRotation())&&(G._inSmartGuide=!0,G._interactor.rectGuide.gatherRects());else if(v.hasDeleteAction){var J=V.gv,R=G._interactor.getStyle("connectGuideGarbageShift");v.garbageInfo={x:J.getWidth()*R[0]+R[2],y:J.getHeight()*R[1]+R[3],size:G._interactor.getStyle("connectGuideGarbageIntersectsize")},V._42()}}},Vj.prototype._46O=function(E){var M,l,u=this,n=u.editing,q=u.target;if(n){if("connect"===n.mode&&!n.canceled&&!n.deleted)try{n.garbageInfo&&n.garbageInfo.hover?T.doDeleteConnectionAction(u._interactor.gv,q):T.doConnectAction(u._interactor.gv,q,n.target)}catch(X){console.error(X)}l=n.freezeFlag,M=u.editing.groupRotateMode,u._fireEditEvent("end",E),u.editing=null}u.tipInfo=null,u._inSmartGuide&&(u._interactor.rectGuide.clear(),u._inSmartGuide=!1),M&&q&&q.endRotate(),q instanceof L.Block&&(l===H?delete q._freezeSyncFromChildren:q._freezeSyncFromChildren=l,q.updateFromChildren())},Vj.prototype.handleNormalStateDelete=function(){var M=this,j=M.editing;if(j&&"connect"===j.mode&&!j.canceled&&!j.deleted){if(j.garbageInfo){try{T.doDeleteConnectionAction(M._interactor.gv,M.target)}catch(r){console.error(r)}j.garbageInfo=null}return j.cursorPos=null,j.targetCorners=null,j.deleted=!0,M._interactor._42(),!0}},Vj.prototype.handleNormalStateKeyDown=function(s){var W=this,I=W.editing;return!I||"connect"!==I.mode||I.canceled||I.deleted?void 0:L.Default.isEsc(s)?(I.cursorPos=null,I.targetCorners=null,I.canceled=!0,W._interactor._42(),!0):void 0},Vj.prototype.handleEdit=function(o,e){var O=this,y=O.editing;if(y){var B,b,c,C,T,d=O.target,p=y.key,h=y.mode,F=o.lp(e),R=O._interactor;if("connect"===h){if(y.canceled)return;if(y.deleted)return;y.cursorPos=R._getLogicalPoint(e);var g=y.garbageInfo;return g&&sf.checkHit(y.cursorPos,g,g.size)?(g.hover=!0,y.target=null,y.targetCorners=null):(g&&(g.hover=!1),y.target=o.getDataAt(F,function(V){return o.isSelectable(V)?Tk(V)?!0:!1:!1})||null,y.targetCorners=sf.getTargetCornersOnScreen(o,y.target)),R._42(),void 0}if("rotate"===h){var I,$,J=y.pos,j=Math.atan2(F.y-J.y,F.x-J.x);if(y.groupRotateMode?$=j-y.hitRot:(I=j-y.hitRot,$=y.rotation+I),$%=2*Math.PI,0>$&&($+=2*Math.PI),!L.Default.isCtrlDown(e)){var P,u;ee(e)?(P=R.getStyle("shiftRotateRound"),u=P/2):(P=R.getStyle("rotateRound"),u=R.getStyle("rotateSensitivity")),$=sf.roundTo($,P,u)}y.groupRotateMode?(I=$-(y.lastRotation||0),0!==I&&(d.addRotation(I,y.groupRotateMode,function(L){return o.isRotationEditable(L)}),y.lastRotation=$)):d.setRotation($),R._setRotateCursor(j),$>Math.PI&&($-=2*Math.PI);var f=180*($/Math.PI);f=f.toFixed(2),B=""+f+""}else if("resize"===h){var s=y.rect;c=s.x,C=s.y;var A,K=s.width,G=s.height,i=y.anchor,a=y.matrix,W=d.s&&d.s("keepAspectRatio")||R.getStyle("keepAspectRatio");ee(e)&&(W=!W);var x=O._unionPointMode1,V=O._unionPointMode2;if(O._inSmartGuide&&!L.Default.isCtrlDown(e)&&!W){var m;"L"===p||"R"===p?m="x":("T"===p||"B"===p)&&(m="y"),O._adsorbedToClosest(F,m),T=!0}A=a.tfi(F);var Q;"LT"===p?(s=x(A,{x:c+K,y:C+G},K,G,W),Q=9):"T"===p?(s=V({x:c,y:A.y},{x:c+K,y:C+G},K,G,W,"v"),Q=1):"RT"===p?(s=x(A,{x:c,y:C+G},K,G,W),Q=33):"L"===p?(s=V({x:A.x,y:C},{x:c+K,y:C+G},K,G,W,"h"),Q=8):"R"===p?(s=V({x:c,y:C},{x:A.x,y:C+G},K,G,W,"h"),Q=32):"LB"===p?(s=x(A,{x:c+K,y:C},K,G,W),Q=12):"B"===p?(s=V({x:c,y:C},{x:c+K,y:A.y},K,G,W,"v"),Q=4):"RB"===p&&(s=x(A,{x:c,y:C},K,G,W),Q=36);var l=a.tf(s.x+s.width*i.x,s.y+s.height*i.y);d instanceof L.Block&&(y.hasOwnProperty("freezeFlag")||(y.freezeFlag=d._freezeSyncFromChildren,d._freezeSyncFromChildren=!0)),d.setPosition(l),d.setSize(s.width,s.height),T&&(b=d.getRect(),R.rectGuide.gatherLines({node:d,x:b.x,y:b.y,w:b.width,h:b.height},m,Q)),B=""+Math.round(s.width)+" * "+Math.round(s.height)}else if("line"===h){if(ee(e)){var z=d.getPoints(),H="P1"===p?z.get(1):z.get(0),E={x:F.x-H.x,y:F.y-H.y},S=R.getStyle("shiftLineRotateRound"),Z=O._shiftDirList;if(!Z||O._shiftRotateRound!==S){O._shiftRotateRound=S,O._shiftDirList=Z=[];for(var D=0;D<Math.PI;D+=S)Z.push({x:_(D),y:t(D)})}for(var v,r=0,U=0,w=Z.length;w>U;U++){var X=Z[U],N=X.x*E.x+X.y*E.y;Math.abs(N)>Math.abs(r)&&(r=N,v=X)}F={x:H.x+v.x*r,y:H.y+v.y*r},R.rectGuide.clear()}else O._inSmartGuide&&!L.Default.isCtrlDown(e)&&(O._adsorbedToClosest(F),T=!0);var q=sf.getDataMatrix(d).applyInverse(F);d.setPoint("P1"===p?0:1,q,!0);var Y=d.getPoints(),M=Y.get(0),n=Y.get(1);c=M.x-n.x,C=M.y-n.y,B=" "+Math.round(Math.sqrt(c*c+C*C))+" ",T&&(b=d.getRect(),R.rectGuide.gatherLines({node:d,x:b.x,y:b.y,w:b.width,h:b.height}))}if(B){var k=L.Default.getLogicalPoint(e,R._canvas);k.x+=sf.Icons.TipShiftX,k.y+=sf.Icons.TipShiftY,O.tipInfo={helperPos:k,text:B,size:B.length}}O._fireEditEvent("between",e)}},Vj.prototype._unionPointMode1=function(O,C,S,B,J){if(J&&S&&B){var G=O.x-C.x,f=O.y-C.y;Math.abs(G*B)<Math.abs(f*S)?(f=Math.sign(f)*Math.abs(G*B/S),O.y=C.y+f):(G=Math.sign(G)*Math.abs(f*S/B),O.x=C.x+G)}return L.Default.unionPoint(O,C)},Vj.prototype._unionPointMode2=function(Z,s,E,k,R,Q){var K=L.Default.unionPoint(Z,s);if(R&&E&&k){var c;"v"===Q?(c=K.x+K.width/2,K.width=E*K.height/k,K.x=c-K.width/2):(c=K.y+K.height/2,K.height=k*K.width/E,K.y=c-K.height/2)}return K},Vj.prototype._adsorbedToClosest=function(b,i){var q=this,R=q._interactor,y=R.rectGuide.findClosest(b,i),u=R.gridGuide.findClosest(b,i),W=1/0,G=1/0;y&&(isFinite(y.x)&&(W=y.x),isFinite(y.y)&&(G=y.y)),u&&(isFinite(u.x)&&Math.abs(u.x)<Math.abs(W)&&(W=u.x),isFinite(u.y)&&Math.abs(u.y)<Math.abs(G)&&(G=u.y)),isFinite(W)&&(b.x+=W),isFinite(G)&&(b.y+=G)},Vj.prototype._42=function(Q,H,L){var w=this;w.info={},w.screenInfo=null;var r=w._interactor;if(!r.editDetail&&w.gatherInfo(H,L)){var e=w.editing,R=e?e.groupRotateMode:null,m=w.screenInfo;if("block"!==R||!e||!e.started){if(m.P1?sf.Icons.DrawIcon(r,Q,sf.Icons.Line,m):sf.Icons.DrawIcon(r,Q,sf.Icons.Rect,m),m.connect&&(sf.Icons.DrawIcon(r,Q,sf.Icons.ConnectGuide,{rotation:m.rotation,connect:m.connect,cursorPos:e?e.cursorPos:null}),e)){if(e.targetCorners){for(var q={x:1/0,y:1/0},D={x:-1/0,y:-1/0},I=0,k=e.targetCorners.length;k>I;I+=2)q.x=Math.min(q.x,e.targetCorners[I]),D.x=Math.max(D.x,e.targetCorners[I]),q.y=Math.min(q.y,e.targetCorners[I+1]),D.y=Math.max(D.y,e.targetCorners[I+1]);sf.Icons.DrawIcon(r,Q,sf.Icons.HoverDataRect,{min:q,max:D,color:r.getStyle("hoverGuideColor")||r.getStyle("baseColor")})}e.garbageInfo&&sf.Icons.DrawIcon(r,Q,sf.Icons.ConnectGuideGarbage,e.garbageInfo)}r.getStyle("rotateTipVisible")&&w.tipInfo&&sf.Icons.DrawIcon(r,Q,sf.Icons.TipHelper,w.tipInfo)}w.target instanceof sf.Group&&w.target._42(r,Q,H)}};var rd=sf.Anchor=function(F){this.catalog="Anchor",this._interactor=F};rd.prototype={},rd.prototype.constructor=rd,rd.prototype.gatherInfo=function(x,I){var g=this;if(1===I.length){var B=I[0];if(!B.getAnchor)return;if(B instanceof L.Shape&&B._70I())return;if(dj(B,x))return;return g.gatherSingleTarget(x,I[0])}return I.length>1?g.gatherMultiTargets(x,I):!1},rd.prototype.gatherSingleTarget=function(o,w){var W=this;return W.info.POS=w.getPosition(),W.screenInfo.POS=sf.toScreenPosition(o,W.info.POS),W.target=w,!0},rd.prototype.gatherMultiTargets=function(E,v){var L=this,X=sf.Group.findOrCreateGroup(v,this._interactor._uuid);return X?(L.screenInfo.POS=sf.toScreenPosition(E,X.getAnchor2()),L.target=X,!0):!1},rd.prototype.isVisible=function(){var Q=this,P=Q._interactor;if(P.getStyle("anchorVisible")===!1)return!1;var z=Q.target;if(z){if(this.editing)return!0;var u=z.getAnchor(),v=P.getStyle("anchorOutsideVisibleThreshold");if(u.x<-v||u.x>1+v||u.y<-v||u.y>1+v)return!0;var b=z.getSize(),j=z.getScale(),K=Math.min(Math.abs(b.width*j.x),Math.abs(b.height*j.y));if(K*P.gv._zoom<P.getStyle("anchorHideThreshold"))return!1}return!0},rd.prototype.check=function(F,m,C){if(L.Default.isLeftButton(m)){var H=this,E=H._interactor;if(H.isVisible()&&E.getStyle("anchorMovable")!==!1){H.editing=null,H.tipInfo=null;var x=H.target;if(x&&F.isAnchorEditable(x)&&F.isEditable(x)){var g;if(H.screenInfo&&(g=H.screenInfo.POS)&&sf.checkHit(C,new sf.Math.Vector2(g),E.getStyle("checkSize"))){if(x instanceof sf.Group)return H.editing={},!0;var S=x.getWidth(),s=x.getHeight(),n=x.getAnchor();return H.editing={rect:{x:-S*n.x,y:-s*n.y,width:S,height:s},anchor:n,matrix:x.getMatrix()},!0}}}}},rd.prototype.startEdit=function(d,y){d.startDragging(y),d.fi({kind:"beginEditAnchor",event:y})},rd.prototype._46O=function(p){var h=this;h.editing&&(h.editing=null,h._interactor.fi({kind:"endEditAnchor",event:p})),h.tipInfo=null},rd.prototype.handleEdit=function(b,o){var O=this,t=O.target;if(t){var Z=O.editing;if(Z){var y=b.lp(o),Q=O._interactor;if(t instanceof sf.Group)return t.setAnchor2(y),Q._42(),void 0;var h=Z.matrix,g=h.tfi(y),X=Z.rect,r=(g.x-X.x)/X.width,H=(g.y-X.y)/X.height;if(!L.Default.isCtrlDown(o)){var I=Q.getStyle("anchorRound"),V=Q.getStyle("anchorSensitivity");r=sf.roundTo(r,I,V),H=sf.roundTo(H,I,V)}t.setAnchor(r,H,!0);var w=L.Default.getLogicalPoint(o,Q._canvas);w.x+=sf.Icons.TipShiftX,w.y+=sf.Icons.TipShiftY;var N=""+r.toFixed(2)+", "+H.toFixed(2);O.tipInfo={helperPos:w,text:N,size:N.length},Q.fi({kind:"betweenEditAnchor",event:o})}}},rd.prototype._42=function(D,C,s){var i=this;i.info={},i.screenInfo={};var w=i._interactor;w.editDetail||i.gatherInfo(C,s)&&i.isVisible()&&(sf.Icons.DrawIcon(w,D,sf.Icons.Anchor,i.screenInfo),i.tipInfo&&sf.Icons.DrawIcon(w,D,sf.Icons.TipHelper,i.tipInfo))};var ws=sf.MoveDummy=function(R){this.catalog="MoveDummy",this._interactor=R};ws.prototype={},ws.prototype.constructor=ws,ws.prototype.gatherInfo=function(){var v=this,l=this._interactor.getSubModule("Rect");if(l){var p=l.screenInfo;if(p){var b=v._interactor,X=v.getMovableTarget(l.target);if(X){var o=b.getStyle("moveDummyThreshold");if(o!==!1){var S=p.LT||p.P1,A=p.RT||p.P2,V=p.LB||S;if(S){var N=p.P1,O=Math.min(S.distanceTo(V),S.distanceTo(A));if(!(o!==!0&&O>o)){var W=b.getStyle("moveDummyPosition"),C=A.clone().sub(S),M=V.clone().sub(S),Z=W[2],U=W[3];if(N){var a=b.getStyle("moveDummyLineExtraShift");a&&(Z+=a[0],U+=a[1])}var m=S.clone().add(C.clone().multiplyScalar(W[0])).add(C.setLength(Z)).add(M.clone().multiplyScalar(W[1])).add(M.setLength(U));return v.screenInfo.pos=m,v.screenInfo.size=b.getStyle("moveDummySensitivity"),!0}}}}}}},ws.prototype.getMovableTarget=function(h){var i=this._interactor.gv;if(Tk(h)){if(i.isMovable(h))return h}else if(h instanceof sf.Group)for(var r=h._entities,N=r.length-1;N>=0;N--){var W=r[N];if(Tk(W)&&i.isMovable(W))return W}return null},ws.prototype.getMoveInteractor=function(){for(var V,B,P,l=this._interactor.gv,E=l.getInteractors(),V=0,B=E.length;B>V;V++)if(P=E.get(V),P instanceof yc)return P},ws.prototype.startEdit=function(r,E){r.startDragging(E);var V=this.getMoveInteractor();if(V){var x=this.selectedTarget,T=r.gv;T._moving=1,V._data=x,T.handleMouseDown&&T.handleMouseDown(E,x)}},ws.prototype._46O=function(g){var m=this,Q=m.getMoveInteractor();Q&&(Q.handleWindowMouseUp(g),m.selectedTarget=null)},ws.prototype.handleEdit=function(X,v){var W=this.getMoveInteractor();W&&W.handleWindowMouseMove(v)},ws.prototype.check=function(I,q,H){if(this.selectedTarget=null,L.Default.isLeftButton(q)&&!I._scrolling&&!rj()){var z=this;if(z.screenInfo){var f=z.screenInfo.pos;if(f&&!(H.distanceTo(f)>z.screenInfo.size)){var u=z._interactor;return z.selectedTarget=z.getMovableTarget(u.getSubModule("Rect").target),u.setCursor("default"),!0}}}},ws.prototype._42=function(M,s,g){var X=this;X.screenInfo={};var A=X._interactor;A.editDetail||X.gatherInfo(s,g)&&(!A.editing||X.selectedTarget)&&sf.Icons.DrawIcon(A,M,sf.Icons.MoveDummy,X.screenInfo)};var Th=sf.RotateX=function(J){this.catalog="RotateX",this._interactor=J};Th.prototype={},Th.prototype.constructor=Th,Th.prototype.gatherInfo=function(g,_){var n=this;if(1===_.length){var W=_[0];return W instanceof L.Shape&&W._70I()||dj(W,g)?!1:n.gatherSingleTarget(g,W)}return _.length>1?n.gatherMultiTargets(g,_):!1},Th.prototype.gatherSingleTarget=function(){var l=new L.Math.Vector2,Q=new L.Math.Vector2,y=new L.Math.Vector2,X=new L.Math.Vector2,W=function(w,l){var p=w.x-l.x,D=w.y-l.y;return p*p+D*D};return function(A,o){if(o.getCorners){var F=this,G=o.getCorners(),E=15,O=o.getPosition();l.copy(G[0]),y.copy(G[1]),X.copy(G[3]),Q.copy(l).add(X).divideScalar(2).add(l.sub(y).setLength(E/A.getZoom()));var i=Math.max(W(O,G[0]),W(O,G[1]),W(O,G[2]),W(O,G[3]));return F.info.POS=Q.clone(),F.screenInfo.POS=sf.toScreenPosition(A,F.info.POS),F.screenInfo.LEN=Math.sqrt(i)*A.getZoom()+E,F.screenInfo.CENTER=sf.toScreenPosition(A,O),F.target=o,!0}}}(),Th.prototype.gatherMultiTargets=function(l,b){var S=this,D=sf.Group.findOrCreateGroup(b,this._interactor._uuid);if(!D)return!1;var S=this;return S.gatherSingleTarget(l,D)},Th.prototype.isVisible=function(){var r=this._interactor;if(!r.getStyle("rotateAsClock"))return!1;var l=this.target;if(!l)return!0;var y=r.gv;return y.isEditable(l)&&y.isRotationEditable(l)?!0:!1},Th.prototype.check=function(u,H,d){var O=this,n=O._checkImpl(u,H,d);return(n||O._clockPainted)&&O._interactor._42(),n},Th.prototype._checkImpl=function(v,b,E){if(L.Default.isLeftButton(b)){var $=this;$.editing=null,$.tipInfo=null;var d;if($.screenInfo&&(d=$.screenInfo.POS)&&$.isVisible()){var t=$._interactor;if(sf.checkHit(E,d,t.getStyle("checkSize"))){var O=$.target,H=v.lp(b),i=O.getPosition(),s=Math.atan2(H.y-i.y,H.x-i.x);return t._setRotateCursor(s),$.editing={pos:i,rotation:O.getRotation(),hitRot:s,groupRotateMode:"block",screenInfo:{CENTER:$.screenInfo.CENTER,LEN:$.screenInfo.LEN}},!0}}}},Th.prototype.startEdit=function(V,h){V.startDragging(h),V.fi({kind:"beginEditRotation",event:h}),this.target instanceof sf.Group&&this.target.beginRotate(this.editing)},Th.prototype._46O=function($){var d=this;d.editing&&(d.editing=null,d._interactor.fi({kind:"endEditRotation",event:$})),d.target instanceof sf.Group&&d.target.endRotate(),d.tipInfo=null},Th.prototype.handleEdit=function(X,t){var y=this,A=y.editing;if(A){var j,R,q=y.target,m=X.lp(t),V=y._interactor,b=A.pos,P=Math.atan2(m.y-b.y,m.x-b.x),Z=q instanceof sf.Group;if(Z?R=P-A.hitRot:(j=P-A.hitRot,R=A.rotation+j),R%=2*Math.PI,0>R&&(R+=2*Math.PI),!L.Default.isCtrlDown(t)){var B,n;ee(t)?(B=V.getStyle("shiftRotateRound"),n=B/2):(B=V.getStyle("rotateRound"),n=V.getStyle("rotateSensitivity")),R=sf.roundTo(R,B,n)}Z?(j=R-(A.lastRotation||0),0!==j&&(q.addRotation(j,A.groupRotateMode,function(h){return X.isRotationEditable(h)}),A.lastRotation=R)):q.setRotation(R),V._setRotateCursor(P),R>Math.PI&&(R-=2*Math.PI);var i=180*(R/Math.PI),l=""+i.toFixed(2)+"",$=L.Default.getLogicalPoint(t,V._canvas);$.x+=sf.Icons.TipShiftX,$.y+=sf.Icons.TipShiftY,y.tipInfo={helperPos:$,text:l,size:l.length},V.fi({kind:"betweenEditRotation",event:t})}},Th.prototype._42=function(R,u,s){var a=this;a._clockPainted=!1,a.info={},a.screenInfo={};var p=a._interactor;p.editDetail||a.gatherInfo(u,s)&&a.isVisible()&&(sf.Icons.DrawIcon(p,R,sf.Icons.RoundPoint,a.screenInfo.POS),p.getStyle("rotateTipVisible")&&a.tipInfo&&sf.Icons.DrawIcon(p,R,sf.Icons.TipHelper,a.tipInfo),a.editing&&a.drawClock(R))},Th.prototype.drawClock=function(z){z.save();var $=this;$._clockPainted=!0;var O=$.editing||{},G=O.screenInfo||$.screenInfo,W=G.LEN,E=W+8,n=W+18;z.save(),z.translate(G.CENTER.x,G.CENTER.y),z.beginPath(),z.strokeStyle="rgb(150, 150, 150)";for(var x,w,U,s,l,K=0;360>K;K++)x=K*Math.PI/180,0===K%5&&(w=t(x)*W,U=_(x)*W,s=t(x)*E,l=_(x)*E,z.moveTo(w,U),z.lineTo(s,l)),0===K%45&&(w=t(x)*W,U=_(x)*W,s=t(x)*n,l=_(x)*n,z.moveTo(w,U),z.lineTo(s,l));z.stroke(),z.rotate(-Qo);var R=O.lastRotation||$.target.getRotation();z.beginPath(),z.fillStyle="rgba(255, 0, 0, 0.1)",z.strokeStyle="rgb(157, 157, 157)",z.moveTo(0,0),z.arc(0,0,n,0,R,!1),z.fill(),z.beginPath(),z.moveTo(0+n,0),z.arc(0,0,n,0,R,!1),z.stroke(),z.restore()};var vq=sf.Curve=function(I){this.catalog="Curve",this._interactor=I};vq.prototype={},vq.prototype.constructor=vq,b.defineProperties(vq.prototype,{activing:{get:function(){return this._activing},set:function(h){var r=this;if(h)r._activing=new sf.CurveActiving(this,h),r.gatherSingleTarget(r._interactor.gv,r.target);else{var U=r._activing;U&&U.dispose(),r._activing=null}}}}),vq.PointType={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3},vq.prototype.setUp=function(){var i=this,W=i._interactor;W&&W.gv.mp(i._onGraphviewPropertyChanged,i)},vq.prototype._onGraphviewPropertyChanged=function(k){("zoom"===k.property||"translateX"===k.property||"translateY"===k.property)&&this._handleDataChanged()},vq.prototype.tearDown=function(){var V=this,$=V._interactor;$&&$.gv.ump(V._onGraphviewPropertyChanged,V)},vq.prototype.canEnterEditDetailMode=function(){var R=jf(this._interactor);return R?this.target=R:void 0},vq.prototype.canQuitEditDetailMode=function(s){var C=this,m=C._interactor._getLogicalPoint(s);return C._checkEditRealPoint(m)?void 0:C._interactor.gv.getDataAt(s)!==C.target?!0:void 0},vq.prototype.preHandleScroll=function(){var l=this.editing;return l&&l.inEdit?!0:void 0},vq.prototype.getCurrentSelectintStatus=function(){var T=this;if(T.activing&&!T.activing.selections){if(T.activing.status!=H)return T.activing.status;var G=function(x){var U=T.activing.status;T.activing.status=x,T._interactor.fp("shapePointStatus",U,x)},q=sf.Curve.PointType,M=T.activing.point,O=T.activing.pairs;if(!O||1!==O.length)return G(q.Mirrored);var x=O[0],N=x.c1&&x.c1.isNearEnough(M),g=x.c2&&x.c2.isNearEnough(M);if(!x.c1||!x.c2)return N||g?G(q.Straight):G(q.Disconnected);if(N&&g)return G(q.Straight);if(N||g)return G(q.Asymmetric);var R=x.c1.clone().sub(M),L=x.c2.clone().sub(M);return Math.abs(R.x*L.y-R.y*L.x)>1e-5||R.x*L.x>0?G(q.Disconnected):Math.abs(R.length()-L.length())>1e-5?G(q.Asymmetric):G(q.Mirrored)}},vq.prototype.handle_keydown=function(d){var g=this;if(g._interactor.editDetail){var U=sf.Curve.PointType;"1"===d.key?g._setCurrentSelectionStatus(U.Straight):"2"===d.key?g._setCurrentSelectionStatus(U.Mirrored):"3"===d.key?g._setCurrentSelectionStatus(U.Disconnected):"4"===d.key&&g._setCurrentSelectionStatus(U.Asymmetric)}},vq.prototype.setCurrentSelectionStatus=function(W){var k=this,q=k._interactor;if(q){var f=q.gv;f.dm().beginTransaction(),this._setCurrentSelectionStatus(W),f.dm().endTransaction()}},vq.prototype._setCurrentSelectionStatus=function(y){var h=this,B=h.activing;if(B){var Y=h.getCurrentSelectintStatus();if(null!==Y&&Y!==y){B.status=y;var K=h.activing.point,i=h.activing.pairs;if(i&&1===i.length){var o=i[0],T=h.screenInfo.curve,g=sf.Curve.PointType,N=h._interactor,Q=function(){h._writeToHt(),N.fp("shapePointStatus",Y,y),h.check(N.gv,null,new sf.Math.Vector2(N._lastLogicalPoint))};if(y===g.Straight)return T.moveCtrlPoint(o,K,"c1"),T.moveCtrlPoint(o,K,"c2"),Q(),void 0;if(Y===g.Straight){var O=T.findPairs(K,!0),S=O[0],j=S.r1||K,X=S.r2||K,V=X.clone().sub(j).multiplyScalar(.25);return T.moveCtrlPoint(o,K.clone().sub(V),"c1"),T.moveCtrlPoint(o,K.clone().add(V),"c2"),Q(),void 0}var L=o.c1,s=o.c2;if(L&&s){if(y===g.Mirrored)return T.moveCtrlPoint(o,K.clone().multiplyScalar(2).sub(s),"c1"),Q(),void 0;if(y===g.Asymmetric&&Y===g.Disconnected){var d=L.clone().sub(K).length(),V=K.clone().sub(s).setLength(d).add(K);return T.moveCtrlPoint(o,V,"c1"),Q(),void 0}}B._firePointChange(),N.fp("shapePointStatus",Y,y),h.check(N.gv,null,new sf.Math.Vector2(N._lastLogicalPoint))}}}},vq.prototype._handleDataChanged=function(){var I="s:edge.points,s:edge.segments,points,segments,shape,position,rotation,scale".split(",");return function(p){var P=this;if(P.screenInfo&&P.target){if(p&&I.indexOf(p.property)<0)return;var R=P._interactor;P.gatherSingleTarget(R.gv,P.target,!0),P.check(R.gv,null,new sf.Math.Vector2(R._lastLogicalPoint)),R._42()}}}(),vq.prototype.gatherSingleTarget=function($,q,w){var m,D,g=this;g.screenInfo&&g.screenInfo.curve&&(D=g.screenInfo.curve._curves);var Z=g.editing;m=Z?g.screenInfo:g.screenInfo={};var e,r,X=q instanceof L.Edge;X?(e=q.s("edge.segments"),r=q.s("edge.points")||new L.List):(e=q._58O,r=q._59O),m.S=e;var x,t=m.P=[],K=sf.getDataMatrix(q);if(q instanceof L.Polyline||q instanceof L.Edge&&g._interactor.getStyle("edgeElevationEditable"))x=q.getElevation&&q.getElevation()||0,m.E=[];else{var b=!1;r.each(function(l){l.e!==H&&(b=!0)}),b&&(m.E=[])}if(r.each(function(L){m.E&&m.E.push(L.e!=H?L.e:x),L=K.apply(L);var r=sf.toScreenPosition($,L);t.push(r.x,r.y)}),X){var O=t.length,l=sf.toScreenPosition($,q._lastSourcePoint||(O?{x:t[0],y:t[1]}:{x:0,y:0})),T=sf.toScreenPosition($,q._lastTargetPoint||(O?{x:t[O-2],y:t[O-1]}:{x:0,y:0}));if(t.splice(0,0,l.x,l.y),t.push(T.x,T.y),m.E){var n=q.getSourceAgent();n instanceof L.Edge?m.E.splice(0,0,q.s("edge.source.offset.elevation")):m.E.splice(0,0,((q.s("edge.source.anchor.elevation")||.5)-.5)*n.getTall()*n.getScaleTall()+n.getElevation()+q.s("edge.source.offset.elevation"));var M=q.getTargetAgent();M instanceof L.Edge?m.E.push(q.s("edge.target.offset.elevation")):m.E.push(((q.s("edge.target.anchor.elevation")||.5)-.5)*M.getTall()*M.getScaleTall()+M.getElevation()+q.s("edge.target.offset.elevation"))}}if(!m.S||!m.S.size()){m.S=new L.List,m.S.add(1);for(var I=0;I<t.length/2-1;I++)m.S.add(2)}if((!Z||w)&&g.convertToCubicBezier(D),g.activing&&(w||!g.editing||"realPoint"===g.editing.type)){var i=m.curve.findPairs(g.activing.point);g.activing.pairs=i}},vq.prototype._convertToNewPoint=function(Q,R,y,V){var Z,u,X;for(Z=0,u=R.length;u>Z;Z++){if(X=R[Z],X._p1.isNearEnough(Q)&&(!V||V.indexOf(X._p1)<0))return X._p1;if(X._p4.isNearEnough(Q)&&(!V||V.indexOf(X._p4)<0))return X._p4}if(y)for(Z=0,u=Math.min(y.length,u);u>Z;Z++){if(X=y[Z],X._p1===Q&&(!V||V.indexOf(R[Z]._p1)<0))return R[Z]._p1;if(X._p4===Q&&(!V||V.indexOf(R[Z]._p4)<0))return R[Z]._p4}},vq.prototype.convertToCubicBezier=function(t){var A,a,p=this,d=new sf.Math.Curve,M=p.screenInfo;if(d.createFromHtShape(M.P,M.S,M.E),M.curve=d,p.activing){var w=d._curves;A=p.activing.point,a=p._convertToNewPoint(A,w,t);var n=[];if(a&&(p.activing.point=a,n.push(a)),p.activing.selections){var H=-1,S=p.activing.selections;S.forEach(function(i){H++,a=p._convertToNewPoint(i,w,t,n),a&&(S[H]=a,n.push(a))})}}},vq.prototype.check=function(b,c,f){if(!c||Rj(c)||jr(c)){var I=this;if(I._interactor.setCursor("default"),I.editing=null,I.highlight=null,I.tipInfo=null,I.edgeEditResult=null,I.screenInfo){if(rj()||c&&jr(c))return I._interactor._42(),!0;if(I._checkEditCtrlPoint(f))return I._interactor._42(),!0;if(I._checkEditRealPoint(f))return I._interactor._42(),!0;if(I._checkEditElevation(f))return I._interactor._42(),!0;var T=I.screenInfo.curve,Q=T.checkPoint(f,I._interactor.getStyle("curveIntersectSize"));if(Q){var X=I.highlight={};X.type="insertKnot",X.bezier=Q.bezier,X.point=Q.intersection}return I._interactor._42(),!0}}},vq.prototype.getAdjacentBeziers=function(W){var R=this.screenInfo;if(R){var f,w,i,I=R.curve._curves,Y=[],$=H;for(f=0,w=I.length;w>f;f++)if(i=I[f],$===H){if(i._p4.isNearEnough(W)){Y.push(i),$=f;continue}if(i._p1.isNearEnough(W))return Y.push(i),Y}else{if(i._p1.isNearEnough(W))return Y.push(i),Y;if(i._p4.isNearEnough(W)){Y[0]=i,$=f;continue}}return Y}},vq.prototype.roundCorner=function(r){if(this.activing&&this.screenInfo){var D,k,C,X,u,T=this.screenInfo.curve,v=T._curves,d=this.activing,j=d.point,L=this.getAdjacentBeziers(j);if(L&&2===L.length){k=L[1],u=k._index,k=k.insertKnot(k.getTByPercentage(r/k.length))[1],v[u]=k,X=k.p1,D=L[0];var l=D._index;D=D.insertKnot(D.getTByPercentage(1-r/D.length))[0],v[l]=D,C=D.p4}else{var H=d.pairs[0],F=v.length;if(H.c1){if(H.c2)return;D=L[0];var l=D._index;if(D=D.insertKnot(D.getTByPercentage(1-r/D.length))[0],C=D.p4,k=v[(l+1)%F],X=k.p1,X=X.clone().sub(j).setLength(r).add(j),u=l+1,1-Math.abs(C.clone().sub(j).normalize().dot(X.clone().sub(j).normalize()))<1e-8)return;v[l]=D}else{if(k=L[0],u=k._index,k=k.insertKnot(k.getTByPercentage(r/k.length))[1],X=k.p1,D=v[(u-1+F)%F],C=D.p4,C=C.clone().sub(j).setLength(r).add(j),1-Math.abs(C.clone().sub(j).normalize().dot(X.clone().sub(j).normalize()))<1e-8)return;v[u]=k}}var i=j,B=new sf.Math.CubicBezier(C,i.clone().sub(C).multiplyScalar(2/3).add(C),i.clone().sub(X).multiplyScalar(2/3).add(X),X);v.splice(u,0,B),this._writeToHt(),this.activing=null,this._interactor._42()}},vq.prototype._checkEditRealPoint=function(l){var V,p,U,b,t,n,u=this,A=u.screenInfo.curve._curves,T=u._interactor.getStyle("curvePointIntersectSize"),z=1/0;for(T*=T,U=0,b=A.length;b>U;U++)V=A[U],t=V._p1,n=l.distanceToSquared(t),z>n&&(z=n,p=t),t=V._p4,n=l.distanceToSquared(t),z>n&&(z=n,p=t);if(z>T)return!1;var F=u.highlight={};return F.type="changeRealPoint",F.point=p,u.editing={type:"realPoint",point:p,shiftGuide:{point:p.clone(),dir:"x",limit:0}},u._interactor.setCursor("crosshair"),!0},vq.prototype._checkEditElevation=function(h){var U=this;if(!U._interactor.getStyle("curveElevationVisible"))return!1;var M=U.target;if(M instanceof L.Edge&&!U._interactor.getStyle("edgeElevationEditable"))return!1;var g=U.activing;if(!g)return!1;var E=g.getCurrentEditingPoint();if(!E)return!1;var w=U._interactor,x=w.getStyle("curveElevationGuideShift"),Z=w.getStyle("curveElevationIntersectSize"),X=h.distanceToSquared({x:E.x+x[0],y:E.y+x[1]});if(!(X>Z*Z)){var d=U.highlight={};d.type="elevation";var O=new sf.Math.Vector2(h.x,h.y,E.e);return U.editing={type:"elevation",startPoint:O},U._interactor.setCursor("crosshair"),!0}},vq.prototype._checkEditCtrlPoint=function(f){var z=this;if(z.activing&&!z.activing.selections){var q=z.getCurrentSelectintStatus();if(q!==sf.Curve.PointType.Straight){var y=z.activing.pairs;if(y){var m=z._interactor.getStyle("curvePointIntersectSize");m*=m;var j,i,t,D,b,E,M,R,k,U=1/0;for(M=0,k=y.length;k>M;M++)for(D=y[M],R=0;2>R;R++)b=0===R?"c1":"c2",D[b]&&(E=f.distanceToSquared(D[b]),U>E&&(U=E,j=D,i=M,t=b));if(U>m)return!1;z.activing.hlpair=j,z.activing.hltype=t;var h=z.highlight={};return h.type="changeCtrlPoint",h.point=j[t],z.editing={type:"ctrlPoint",pair:j,pairId:i,ctrlType:t,direction:j[t].clone().sub(z.activing.point).normalize()},z._interactor.setCursor("crosshair"),!0}}}},vq.prototype.startEdit=function(l,o){l.startDragging(o);var d=this;d.highlight&&"insertKnot"===d.highlight.type&&(d.insertKnot(),d.gatherSingleTarget(d._interactor.gv,d.target),d.activing=null,d._checkEditRealPoint(d._interactor._getLogicalPoint(o)));var i=d._activing;if(i){var G=d.editing?d.editing.type:null;"ctrlPoint"===G?i.editingCtrl={pairId:d.editing.pairId,type:i.hltype}:"realPoint"===G&&(i.editingCtrl=!1)}var E=d.highlight,Y=L.Default.isCtrlDown(o);if(!E||rj()||jr(o)){var c=d._interactor.gv;if(!c.setFocus(o)||c._scrolling)return;return Y?d._multiSelect={startPoint:c.lp(o)}:c.isPannable()&&(Rj(o)||jr(o))&&(d._pan={tx:c.tx(),ty:c.ty()},l.fi({kind:"beginPan",event:o})),void 0}if("changeRealPoint"===E.type){var y,T=d.activing?d.activing.point:null,W=d.activing?d.activing.selections:null;if(Y&&d.activing)T===E.point?(W?(d.activing={point:W[0]},W.length>1&&(W.splice(0,1),d.activing.selections=W)):d.activing=null,d.editing=null):W&&(y=W.indexOf(E.point))>=0?(W.length>1?W.splice(y,1):delete d.activing.selections,d.editing=null):W?(W.push(T),d.activing={point:E.point,selections:W}):d.activing={point:E.point,selections:[T]};else if(W)T===E.point||((y=W.indexOf(E.point))>=0?(W.splice(y,1,T),d.activing={point:E.point,selections:W}):d.activing={point:E.point});else{var D;T===E.point&&(D=d.activing.status),d.activing={point:E.point},D&&(d.activing.status=D)}l.fi({kind:"beginEditPoint",event:o})}},vq.prototype.insertKnot=function(){var o=this,j=o.highlight,m=o.screenInfo.curve;m.insertKnot(j.bezier,j.point.t),o._writeToHt()},vq.prototype._writeToHt=function(){var j,c,S=this,Q=S.screenInfo.curve,i=Q.toHtShape(),l=i.points,B=[],s=i.segments,a=S._interactor.gv;a.dm().beginTransaction();var $,X,z=S.target,C=z instanceof L.Edge,M=sf.getDataMatrix(z).invert();X=z instanceof L.Polyline||C&&S._interactor.getStyle("edgeElevationEditable"),X&&($=z.getElevation&&z.getElevation()||0);for(var x=0,E=l.length;E>x;x++)j=l[x],c=sf.toWorldPosition(a,j),c=M.apply(c),isFinite(j.e)&&j.e!==$&&(c.e=j.e),B.push(c);if(z._writing=!0,C){z.s("edge.type","points"),z.setStyle("edge.segments",s),z.setStyle("edge.points",B.slice(1,B.length-1)),z.setStyle("edge.source.offset.x",0),z.setStyle("edge.source.offset.y",0),z.setStyle("edge.target.offset.x",0),z.setStyle("edge.target.offset.y",0);var f=S._nextChangeEdgeHost;delete S._nextChangeEdgeHost,f&&("source"===f.type?z.setSource(f.host):z.setTarget(f.host)),S._writeEdgeHostAnchor("source",B[0]),S._writeEdgeHostAnchor("target",B[B.length-1])}else B.length?(z.setSegments(s),z.setPoints(B,!0)):z.removeFromDataModel();a.dm().endTransaction(),delete z._writing},vq.prototype._writeEdgeHostAnchor=function(J,r){var e=this,z=e.target,A=e._calcHostAnchor(z,J,r);A.index!==H?(z.setStyle("edge."+J+".index",A.index),z.setStyle("edge."+J+".percent",H),z.setStyle("edge."+J+".anchor.x",H),z.setStyle("edge."+J+".anchor.y",H),z.setStyle("edge."+J+".anchor.elevation",H),z.setStyle("edge."+J+".offset.elevation",r.e)):A.percent!==H?(z.setStyle("edge."+J+".percent",A.percent),z.setStyle("edge."+J+".index",H),z.setStyle("edge."+J+".anchor.x",H),z.setStyle("edge."+J+".anchor.y",H),z.setStyle("edge."+J+".anchor.elevation",H),z.setStyle("edge."+J+".offset.elevation",r.e)):(z.s("edge."+J+".anchor.x",A.x),z.s("edge."+J+".anchor.y",A.y),z.s("edge."+J+".anchor.elevation",A.e),A.offsetX||A.offsetY||A.offsetElevation?(z.s("edge."+J+".offset.x",A.offsetX),z.s("edge."+J+".offset.y",A.offsetY),z.s("edge."+J+".offset.elevation",A.offsetElevation)):(z.s("edge."+J+".offset.x",0),z.s("edge."+J+".offset.y",0),z.s("edge."+J+".offset.elevation",0)))},vq.prototype._calcHostAnchor=function(P,K,S,f){f||(f="source"===K?P.getSource():P.getTarget());var N=this._interactor.gv,g=N.calculateAttachPoint(f,S);if(g)return g.info;if(Cg(f)){var G=N.calculateEdgePosition(f,S);return G}var p=f.getRotation(),h=f.getAnchor();dj(f,N)&&(p=0);var r=f.getElevation(),y=f.getTall()*f.getScaleTall();r=((S.e||0)-P.s("edge."+K+".offset.elevation")-r)/y+.5;var Q=f.getScale();if(p||Q.x<0||Q.y<0){var z=f.getMatrix(),v=z.tfi(S),i=f.getSize();return{x:v.x/i.width+h.x,y:v.y/i.height+h.y,e:r}}var E=Gl(N,f),I={x:(S.x-E.x)/E.width,y:(S.y-E.y)/E.height,e:r};return I},vq.prototype._handlePanning=function(U){var k=this,l=k._pan;if(l){l.started=!0;var X=k._interactor,I=X.gv,V=X._lastClientPoint,W=oo(U),t=Gj(I,W,V);I.setTranslate(l.tx+t.x,l.ty+t.y),k.gatherSingleTarget(X.gv,k.target),X._42(),X.fi({kind:"betweenPan",event:U})}},vq.prototype.handleEdit=function(y,U){var h=this,F=h.editing;if(h._pan)return h._handlePanning(U),void 0;if(h._multiSelect)return h._multiSelect.endPoint=y.lp(U),h._interactor.redraw(),void 0;if(F){F.inEdit=!0;var T,f,V,g=h._interactor._getLogicalPoint(U),v=L.Default.isCtrlDown(U),Q=L.Default.isShiftDown(U),b=F.type,K=h.activing;if(h._guideInfo=null,"ctrlPoint"===b&&Q){var W=h.editing.direction.clone();T=K.point;var D=W.dot(g.clone().sub(T));g=W.setLength(D).add(T)}else if("ctrlPoint"===b||"realPoint"===b){var W;if("realPoint"===b&&Q){var C=h.editing.shiftGuide;f=C.point;var u=Math.abs(g.x-f.x),z=Math.abs(g.y-f.y);u>z&&u>C.limit&&"y"===C.dir&&(C.dir="x"),z>u&&z>C.limit&&"x"===C.dir&&(C.dir="y"),W=C.dir,"x"===W?(g.y=f.y,C.limit=Math.max(C.limit,u)):"y"===W&&(g.x=f.x,C.limit=Math.max(C.limit,z))}if(!v){var Y,x=h._isEditEdgeSourceTarget();x&&(Y=g.clone());var n=h._guidingToEdit(g,W),G="realPoint"===b?h._interactor.gridGuide.findClosest(g,W,!0):null,q=1/0,t=1/0;G&&(G.x&&(q=G.x),G.y&&(t=G.y));var M=!1;if(n&&(n.xList&&(Math.abs(n.x)<=Math.abs(q)?(M=!0,q=n.x):delete n.xList),n.yList&&(Math.abs(n.y)<=Math.abs(t)?(M=!0,t=n.y):delete n.yList),M&&(h._guideInfo=n)),isFinite(q)&&(g.x+=q),isFinite(t)&&(g.y+=t),M&&(n.v=g),x){var e=M?g.clone():null;g.copy(Y);var X=h._editEdgeSourceTarget(x,g,v,e);X&&(h.edgeEditResult=X,V=X.tipText,X.isFixed&&(h._guideInfo=null))}}}var S=h.screenInfo.curve;if("realPoint"===F.type){T=F.point,T.e!==H&&(g.e=T.e),S.moveRealPoint(T,g),F.point=g,h.highlight.point=g;var m=K.status,I=K.selections;if(h.activing={point:g,status:m},I){var w=g.clone().sub(T),O=0;I.forEach(function(H){var Z=H.clone().add(w);S.moveRealPoint(H,Z),I[O++]=Z}),h.activing.selections=I}}else if("ctrlPoint"===F.type){var A=K.pairs,k=A[F.pairId];S.moveCtrlPoint(k,g,F.ctrlType);
var c=K.status,R=sf.Curve.PointType;if((c===R.Mirrored||c===R.Asymmetric)&&k.c1&&k.c2){var T=new sf.Math.Vector2(K.point),l="c1"===F.ctrlType?"c2":"c1";if(c===sf.Curve.PointType.Mirrored)S.moveCtrlPoint(k,T.clone().multiplyScalar(2).sub(g),l);else if(c===R.Asymmetric){var D=k[l].clone().sub(T).length(),p=T.clone().sub(k[F.ctrlType]).setLength(D).add(T);isNaN(p.x)||S.moveCtrlPoint(k,p,l)}}K._firePointChange()}else if("elevation"===F.type){f=F.startPoint;var N=f.e+(f.y-g.y)/y._zoom;h._setCurrentPointImpl("e",N),K._firePointChange(),V="E: "+sf.toFixed(N)}var E=L.Default.getLogicalPoint(U,h._interactor._canvas);if(E.x+=sf.Icons.TipShiftX,E.y+=sf.Icons.TipShiftY,!V){var P=sf.toWorldPosition(y,g);V=""+sf.toFixed(P.x)+", "+sf.toFixed(P.y)}h.tipInfo={helperPos:E,text:V,size:V.length},h._writeToHt(),h._interactor.fi({kind:"betweenEditPoint",event:U})}},vq.prototype._setCurrentPointImpl=function(G,q){var m=this,A=m._activing;if(!A)return!1;var $=m.target;if(!$)return!1;var Y=A.getCurrentEditingPoint();if(!Y)return!1;var J=A.editingCtrl;if(!J)var e=Y.clone();if("e"===G)Y.e=q;else{var N;if("x"===G||"y"===G){var t=A._lastFirePoint;N="x"===G?{x:q,y:t?t.y:0}:{x:t?t.x:0,y:q}}else"object"==typeof G?(N=G,G.e!==H&&(Y.e=G.e)):(N={x:arguments[0],y:arguments[1]},arguments[2]!==H&&(Y.e=arguments[2]));var d=sf.getDataMatrix($);N=sf.toScreenPosition(m._interactor.gv,d.apply(N)),Y.x=N.x,Y.y=N.y}if(!J){var Z=e.multiplyScalar(-1).add(Y);ah(Y.e)&&ah(e.e)&&(Z.e=Y.e-e.e);var W=m.screenInfo.curve;W.moveCtrlDueToRealPointMovement(Y,Z);var x=A.selections;if(x){var C=0;x.forEach(function(a){var B=a.clone().add(Z);isFinite(Z.e)&&(B.e=(isFinite(a.e)?a.e:$.getElevation()||0)+Z.e),W.moveRealPoint(a,B),x[C++]=B}),A.selections=x}}return!0},vq.prototype.setCurrentPoint=function(Y,f){return this._setCurrentPointImpl(Y,f)?(this._writeToHt(),!0):!1},vq.prototype._isEditEdgeSourceTarget=function(){var k=this,H=k.target;if(!(H instanceof L.Edge))return!1;var C=k.editing.point,$=k.screenInfo.curve._curves;return C===$[0]._p1?"source":C===$[$.length-1]._p4?"target":!1},vq.prototype._editEdgeSourceTarget=function(Y,n,i,X){var D,S=this,a=S.target;if(D="source"===Y?a.getSource():a.getTarget()){var N,x=S._interactor.gv,K=sf.toWorldPosition(x,n),A=S._calcHostAnchor(a,Y,K,D);if(N=A.index!==H||A.percent!==H?A.distance*x.getZoom()>S._interactor.getStyle("edgeHostEdgeMaxDistance"):S._interactor.getStyle("edgeHostDetectPerFrame")?!0:A.x<0||A.x>1||A.y<0||A.y>1?!0:!1){var Q=x.getDataAt(K,function(_){return x.isSelectable(_)?x.isSourceTargetEditable(a,_,Y)?a.canSetSourceTarget(_,Y)?!0:!1:!1:!1});if(Q){var M=S._calcHostAnchor(a,Y,K,Q);D=Q,S._nextChangeEdgeHost={type:Y,host:Q},A=M}}var B,G,I,Z=!1;if(i||A.x===H)(A.percent!==H||A.index!==H)&&(Z=!0,G=A.point);else{var W=S._interactor.getStyle("anchorRound"),l=S._interactor.getStyle("anchorSensitivity");B=x.calculateAttachPoint(D,K),B?(A=B.info,Z=!0):(X&&(A=S._calcHostAnchor(a,Y,sf.toWorldPosition(x,X),D)),A.x=sf.roundTo(A.x,W,l),A.y=sf.roundTo(A.y,W,l)),G=Rm(x,D,0,A.offsetX||0,A.offsetY||0,A.x,A.y)}G&&(I=sf.toScreenPosition(x,G),n.x=I.x,n.y=I.y),S._edgeHostGuideInfo={corners:sf.getTargetCornersOnScreen(x,D),attach:B?B.index:-1,host:D};var m;return A.percent!==H?m="percent: "+A.percent.toFixed(2):A.index!==H?m="index: "+A.index:(m=""+A.x.toFixed(2)+", "+A.y.toFixed(2),(A.offsetX||A.offsetY)&&(m+=" offset: "+A.offsetX.toFixed(2)+", "+A.offsetY.toFixed(2))),{host:D,anchor:A,tipText:m,isFixed:Z}}},vq.prototype._guidingToEdit=function(R,b){var V,Y,z=this;if(V=z.screenInfo.curve){Y=V._curves;var u,S,F,W,f,O,v,x,e=1/0,X=1/0,a=[];for(z.editing&&"realPoint"===z.editing.type&&(x=z.editing.point),f=0,O=2*Y.length;O>f;f++)v=Y[Math.floor(f/2)][f%2?"_p4":"_p1"],a.indexOf(v)>=0||(a.push(v),x&&x===v||(F=v.x-R.x,W=v.y-R.y,Math.abs(F)<Math.abs(e)?(e=F,u=[v]):F===e&&u.push(v),Math.abs(W)<Math.abs(X)?(X=W,S=[v]):W===X&&S.push(v)));var L=z._interactor.getStyle("smartGuideThreshold");if((Math.abs(e)>L||"y"===b)&&(u=null),(Math.abs(X)>L||"x"===b)&&(S=null),u||S){var _=!1,m={};if(u&&(_=!0,m.xList=u,m.x=e),S&&(_=!0,m.yList=S,m.y=X),_)return m}}},vq.prototype._46O=function(K){var f=this;f.editing&&(f.editing=null,f._interactor.fi({kind:"endEditPoint",event:K})),f._guideInfo=null,f._edgeHostGuideInfo=null,f._pan&&(f._pan=null,f._interactor.fi({kind:"endPan",event:K})),f._multiSelect&&(f._handleMultiSelect(f._multiSelect,K),f._multiSelect=null),f.tipInfo=null,f.edgeEditResult=null},vq.prototype._handleMultiSelect=function(l,q){if(l.startPoint&&l.endPoint){var B,i,p,g,D,w,d=this,R=d._interactor,M=R.gv,Z=sf.toScreenPosition(M,l.startPoint),O=sf.toScreenPosition(M,l.endPoint),X=L.Default.unionPoint(Z,O),h=d.screenInfo.curve._curves,S=[],b=function(K){K.x>=X.x&&K.y>=X.y&&K.x<=X.x+X.width&&K.y<=X.y+X.height&&S.indexOf(K)<0&&S.push(K)};for(B=0,i=h.length;i>B;B++)D=h[B],b(D._p1),b(D._p4);if(S.length){var m=d.activing||{},v=m.selections||[];m.point&&v.push(m.point);var _=L.Default.isShiftDown(q),K=q.altKey;if(K&&!_)for(w=S,S=[],B=0,i=w.length;i>B;B++)p=w[B],g=v.indexOf(p),g>=0&&S.push(p);for(B=0,i=v.length;i>B;B++)p=v[B],g=S.indexOf(p),g>=0?(!_||_&&K)&&(S[g]=H):S.push(p);for(w=S,S=[],B=0,i=w.length;i>B;B++)w[B]&&S.push(w[B]);i=S.length,0===i?d.activing=null:1===i?d.activing={point:S[0]}:(p=S[i-1],d.activing={point:p,selections:S.splice(0,i-1)}),R.redraw()}}},vq.prototype._canDeletePoint=function(d,M){var s=this.target;if(!(s instanceof L.Edge))return!0;var C=d._curves[0],f=d._curves[d._curves.length-1];return C._p1===M||f._p4===M?!1:!0},vq.prototype.handleDelete=function(){var t=this;if(t.activing&&t.screenInfo){var b=L.Default.isShiftDown(),P=t.screenInfo.curve;t._canDeletePoint(P,t.activing.point)&&P.deleteRealPoint(t.activing.point,b),t.activing.selections&&t.activing.selections.forEach(function(L){t._canDeletePoint(P,L)&&P.deleteRealPoint(L,b)}),t.activing=null,delete t.editing,delete t.tipInfo,delete t.edgeEditResult,delete t._pan,delete t._multiSelect,t._writeToHt(),t._interactor.fp("deleteShapePoint",!1,!0)}},vq.prototype.handleDoubleClick=function(n){var O=this,H=O._interactor._getLogicalPoint(n);if(O.screenInfo&&O._checkEditRealPoint(H)){var K=O.getCurrentSelectintStatus(),l=sf.Curve.PointType;return K=K===l.Mirrored?l.Straight:l.Mirrored,O._setCurrentSelectionStatus(K),O._interactor._42(),!0}},vq.prototype._drawHighlight=function(D){var c=this,d=c.highlight;if(d){var w=d.bezier,G=c._interactor;w&&sf.Icons.DrawIcon(G,D,sf.Icons.ShapeHighlightCurve,[w._p1.x,w._p1.y,w._p2.x,w._p2.y,w._p3.x,w._p3.y,w._p4.x,w._p4.y]);var n=d.point;n&&"insertKnot"===d.type&&sf.Icons.DrawIcon(G,D,sf.Icons.ShapeHighlighPoint,n)}},vq.prototype._drawGuide=function(y){var t=this,P=t._guideInfo;if(P){var S,g,D,Q,d=P.v;for(S=0;2>S;S++)if(Q=0===S?P.xList:P.yList)for(g=0,D=Q.length;D>g;g++)sf.Icons.DrawIcon(t._interactor,y,sf.Icons.ShapeGuideLine,[d.x,d.y,Q[g].x,Q[g].y])}},vq.prototype._drawCurrentPoint=function(v){var I=this;if(I.activing){var a=I.activing,n=I.getCurrentSelectintStatus(),t=I._interactor;if(n!==sf.Curve.PointType.Straight){var j=a.pairs;a.hlpair,a.hltype;var $=a.selections,A=a.editingCtrl;if(j&&!$){var H,k,l;for(k=0,l=j.length;l>k;k++)H=j[k],A&&k===A.pairId&&H[A.type]?sf.Icons.DrawIcon(t,v,sf.Icons.ShapeActivingCtrl,{point:H.point,c1:H.c1,c2:H.c2,hl:A.type}):sf.Icons.DrawIcon(t,v,sf.Icons.ShapeActivingCtrl,H)}}sf.Icons.DrawIcon(t,v,sf.Icons.ShapeHighlighRealPoint,I.activing.point),$&&$.forEach(function(J){sf.Icons.DrawIcon(t,v,sf.Icons.ShapeHighlighRealPoint,J)})}},vq.prototype.clear=function(){var c=this;c.editing=null,c._guideInfo=null,c.activing=null,c.highlight=null},vq.prototype._42=function(y){var Q=this;Q.info={},Q.editing||(Q.screenInfo=null);var j=Q._interactor;if(!j.editDetail)return Q.clear(),void 0;var v=j.gv;if(!Q.target||!v.isSelected(Q.target)||!v.isVisible(Q.target))return j.editDetail=!1,Q.clear(),void 0;if(Q.gatherSingleTarget(v,Q.target),sf.Icons.DrawIcon(j,y,sf.Icons.ShapeBgCurve,Q.screenInfo),Q._interactor.getStyle("curveElevationVisible")&&(Q.target instanceof L.Polyline||Q.target instanceof L.Edge&&Q._interactor.getStyle("edgeElevationEditable"))&&Q.activing){var b=Q.activing.getCurrentEditingPoint();b&&"string"!=typeof b.e&&sf.Icons.DrawIcon(j,y,sf.Icons.EdgeElevationGuide,b)}if(Q._drawHighlight(y),Q._drawCurrentPoint(y),Q._getRealPoint().forEach(function(S){sf.Icons.DrawIcon(j,y,sf.Icons.ShapePoint,S)}),Q._drawGuide(y),Q.tipInfo&&Q._interactor.getStyle("curveTipVisible")&&sf.Icons.DrawIcon(j,y,sf.Icons.TipHelper,Q.tipInfo),Q._edgeHostGuideInfo&&j._drawHostGuide(Q._edgeHostGuideInfo),Q.edgeEditResult&&Q._drawEdgeHostHighlight(y,Q.edgeEditResult.host,Q.edgeEditResult.anchor),Q._multiSelect&&Q._multiSelect.endPoint){var $=L.Default.unionPoint(sf.toScreenPosition(v,Q._multiSelect.startPoint),sf.toScreenPosition(v,Q._multiSelect.endPoint));$.color=v.getRectSelectBorderColor(),y.save(),y.setTransform(1,0,0,1,0,0);var d=T.devicePixelRatio,N=$.borderWidth=Math.round(d);N/=2,$.x=Math.round($.x*d)+N,$.y=Math.round($.y*d)+N,$.width=Math.round($.width*d),$.height=Math.round($.height*d),sf.Icons.DrawIcon(j,y,sf.Icons.SimpleRect,$),y.restore()}},vq.prototype._drawEdgeHostHighlight=function(U,v,Z){this.drawEdgeHostHighlight(U,v,Z),this._interactor.redraw()},vq.prototype.drawEdgeHostHighlight=function(s,p,a){if(Cg(p)){var W,b,l,F,B=this,q=B._interactor,T=q.gv,j=T.getDataUI(p),v=Tc(j),d=[];for(l=0,F=v.points.length;F>l;l++)b=sf.toScreenPosition(T,v.points.get(l)),d.push(b.x,b.y);v.segments&&(W=v.segments.toArray());var R=q.getStyle("edgeHostHighlighPeriod"),K=q.getStyle("edgeHostEdgeHighlighColor");sf.Icons.DrawIcon(q,s,sf.Icons.ShapeBgCurve,{P:d,S:W,color:K,dynamicVisible:a.index===H,dynamicPeriod:R}),K=q.getStyle("edgeHostPointHighlighColor");var m=Rh(j);for(l=0,F=m.length;F>l;l++){var _=m[l],O=sf.toScreenPosition(T,_);sf.Icons.DrawIcon(q,s,sf.Icons.ShapePoint,{point:{x:O.x,y:O.y},color:K,size:12,dynamicVisible:l===a.index,dynamicPeriod:R})}}},vq.prototype._getRealPoint=function(){var F,e=this.screenInfo,d=e.P,p=e.S,Q=-1,T=[],m=-1,R=p.length;return p.each(function(w){m++;var c=1;if(3===w)c=2;else if(4===w)c=3;else if(5===w)return;Q+=c,F=m+1>=R?!0:1===p.get(m+1)?!0:!1,T.push({point:{x:d[2*Q],y:d[2*Q+1]},segmentIndex:m,pointIndex:Q,isEnd:F})}),T},vq.prototype.getEditingPointsInfo=function(j){var X=this,Z=X.activing;if(!Z)return!1;var s=Z.point;if(!s)return!1;var E=this._getRealPoint(),F=[{screen:s}];Z.selections&&Z.selections.forEach(function(r){F.push({screen:r})});var m,C,c=E.length;return F.forEach(function(T){for(m=0;c>m;m++)if(C=E[m],T.screen.isNearEnough(C.point)){T.segmentIndex=C.segmentIndex,T.pointIndex=C.pointIndex,T.point=X.target.getPoints().get(C.pointIndex);break}}),j&&F.sort(function(O,H){return O.segmentIndex-H.segmentIndex}),F};var Re=sf.MoveHelper=function(c){var v=this;v.catalog="Move",v._interactor=c};Re.prototype={},Re.prototype.constructor=Re,Re.prototype.calcShift=function(E,g,s){var k,B,t=this,C=t._interactor.gv,V=C.lp(g);if("beginMove"===E&&t._gatherGridInfo(s._lastLogicalPoint||V),k=t._target){var X=k.downPosition;if(X){var K=t._interactor.getStyle("moveSensitivity")/C._zoom;if(X.distanceTo(V)<K)return{x:0,y:0};delete k.downPosition}var u;B=L.Default.isShiftDown(g),B&&(V=t._dealShiftDown(V),u=k.shiftGuide.dir);var y,H=k.rawPos={x:k.pos.x+V.x-k.lp.x,y:k.pos.y+V.y-k.lp.y};if(L.Default.isCtrlDown(g)){if(y=t._calcShiftByAddon(),t._target.node instanceof sf.Group){var A=t._target.node;A._position.x+=y.x,A._position.y+=y.y}return y}var r=t._interactor.rectGuide;if(k.node instanceof L.Data&&k.node.s("2d.attachable")){var _=t._calcAttachNodeShift(k.node,H);if(r.clear(),_)return _}for(var l,o=k.x+H.x,z=k.y+H.y,R={x:o,y:z},Z={x:o+k.w/2,y:z+k.h/2},e={x:o+k.w,y:z+k.h},T=t._interactor.gridGuide,F=[r.findClosest(R,u),r.findClosest(Z,u),r.findClosest(e,u),T.findClosest(R,u),T.findClosest(Z,u),T.findClosest(e,u)],P=1/0,i=1/0,p=0,q=F.length;q>p;p++)l=F[p],l&&(o=l.x,z=l.y,isFinite(o)&&Math.abs(o)<Math.abs(P)&&(P=o),isFinite(z)&&Math.abs(z)<Math.abs(i)&&(i=z));if(isFinite(P)||(P=0),isFinite(i)||(i=0),y=t._calcShiftByAddon(P,i),t._target.node instanceof sf.Group){var A=t._target.node;A._position.x+=y.x,A._position.y+=y.y}var N=k.node;if(!dj(N,C)){var O=H.x+P,m=H.y+i;t._interactor.rectGuide.gatherLines({node:N,x:k.x+O,y:k.y+m,w:k.w,h:k.h},u)}return y}},Re.prototype._calcShiftByAddon=function(G,H){var b=this._target,v=b.rawPos,k=b.node.getPosition();return G=G||0,H=H||0,{x:v.x-k.x+G,y:v.y-k.y+H}},Re.prototype._dealShiftDown=function(h){var H=this,N=H._target.shiftGuide,F=H._target.lp,B=Math.abs(h.x-F.x),S=Math.abs(h.y-F.y);B>S&&B>N.limit&&"y"===N.dir&&(N.dir="x"),S>B&&S>N.limit&&"x"===N.dir&&(N.dir="y");var m=N.dir;return"x"===m?(h.y=F.y,N.limit=Math.max(N.limit,B)):"y"===m&&(h.x=F.x,N.limit=Math.max(N.limit,S)),h},Re.prototype._isAttachableLineShape=function(p){if(!p.getSegments)return!1;var u=p.getSegments();if(!u)return!0;u instanceof L.List&&(u=u.getArray());for(var A=1,i=u.length;i>A;A++)if(2!==u[A])return!1;return!0},Re.prototype._calcAttachNodeShift=function(){var V=new Sf,p=new Sf,B=new Sf,h=new Sf;return function(c,S){var y=this._interactor.gv,s=c.getHost(),M=y.getDataAt(S,function(G){return G.s("2d.hostable")?!0:!1});if(M&&s!==M&&c.setHost(M),!M)return this._edgeHostGuideInfo=null,c.setHost(null);var z=this._edgeHostGuideInfo={corners:sf.getTargetCornersOnScreen(y,M),host:M,attach:-1};if(this._isAttachableLineShape(M)){for(var R,$,I,f,l,_,K=M.getPoints(),Y=K.size(),G=M.getPointsMatrix2d(),t=1/0,U=0;Y>U&&(U!==Y-1||M.isClosePath());U++)0!==U?p.copy(B):G.apply(K.get(U),p),G.apply(U===Y-1?K.get(0):K.get(U+1),B),V.copy(S).sub(p),h.copy(B).sub(p),R=h.length(),h.divideScalar(R),$=V.dot(h),0>$?$=0:$>R&&($=R),h.multiplyScalar($).add(p),I=V.copy(S).sub(h).lengthSq(),t>I&&(t=I,_=U,f=$,l=R);return Math.sqrt(t)*y.getZoom()>this._interactor.getStyle("attachThreshold")?(c.s({"attach.index":-1}),c.setHost(null),void 0):(c.s("attach.offset.opposite")&&(f=l-f),c.s({"attach.index":_,"attach.offset":c.s("attach.offset.relative")?f/l:f}),{x:0,y:0})}var j=y.calculateAttachPoint(M,S);if(j){var d=j.point;return z.attach=j.index,this._calcShiftByAddon(d.x-S.x,d.y-S.y)}}}(),Re.prototype._gatherGridInfo=function(d){var V,k=this,A=k._interactor,c=A._getValidSelection();if(c.length){if(1===c.length){if(V=c[0],!V.getRect)return k._target=null,void 0}else if(V=sf.Group.findOrCreateGroup(c,A._uuid),!V)return k._target=null,void 0}else{var c=A.gv.sm().getSelection();if(c.length&&(V=c.get(0),!V.getRect))return k._target=null,void 0}if(V){var $=V.getPosition(),r=V.getRect();k._target={node:V,x:r.x-$.x,y:r.y-$.y,w:r.width,h:r.height,lp:{x:d.x,y:d.y},pos:{x:$.x,y:$.y},shiftGuide:{dir:"x",limit:0},downPosition:new sf.Math.Vector2(d)},A.rectGuide.gatherRects()}},Re.prototype.clear=function(){var e=this;e._edgeHostGuideInfo=null,e._interactor.rectGuide.clear(),e._interactor._42()},Re.prototype._42=function(){var r=this._edgeHostGuideInfo;r&&this._interactor._drawHostGuide(r)};var Db=L.WebGLConstants=b.freeze({DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,HALF_FLOAT_OES:36193,DOUBLE:5130,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,COLOR:6144,DEPTH:6145,STENCIL:6146,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,MAX_3D_TEXTURE_SIZE:32883,UNSIGNED_INT_2_10_10_10_REV:33640,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,MAX_TEXTURE_LOD_BIAS:34045,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,VERTEX_ATTRIB_ARRAY_INTEGER:35069,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,UNSIGNED_INT_10F_11F_11F_REV:35899,RGB9_E5:35901,UNSIGNED_INT_5_9_9_9_REV:35902,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,RASTERIZER_DISCARD:35977,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,UNSIGNED_INT_24_8:34042,DEPTH24_STENCIL8:35056,UNSIGNED_NORMALIZED:35863,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,MAX_SAMPLES:36183,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,VERTEX_ARRAY_BINDING:34229,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,SIGNED_NORMALIZED:36764,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,INVALID_INDEX:4294967295,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,SAMPLER_BINDING:35097,RGB10_A2UI:36975,INT_2_10_10_10_REV:36255,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_SRGB8_ETC2:37493,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37494,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37495,COMPRESSED_RGBA8_ETC2_EAC:37496,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37497,TEXTURE_IMMUTABLE_FORMAT:37167,MAX_ELEMENT_INDEX:36203,TEXTURE_IMMUTABLE_LEVELS:33503,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047}),hc=function(){function B(x,t){var e=H;return function(){return e||(e=x.getExtension(t)),e}}function g(L,$){$==H&&($={}),$.version=s&&(L instanceof WebGL2RenderingContext||b.prototype.toString.call(L)===K)?2:1,$.extensions=function(){for(var f={},F=L.getSupportedExtensions(),d=F.length;d--;)f[F[d]]=B(L,F[d]);return f}();for(var D=b.keys(o),j=0,c=D.length;c>j;++j){var A=D[j];$[A]=L.getParameter(o[A])}if($.version>1){D=b.keys(n);for(var j=0,c=D.length;c>j;++j){var A=D[j];$[A]=L.getParameter(n[A])}}return $}var s="undefined"!=typeof WebGL2RenderingContext,K="[object WebGL2RenderingContext]",o={aliasedLineWidthRange:33902,aliasedPointSizeRange:33901,maxCombinedTextureImageUnits:35661,maxCubeMapTextureSize:34076,maxFragmentUniformVectors:36349,maxRenderBufferSize:34024,maxTextureImageUnits:34930,maxTextureSize:3379,maxVaryingVectors:36348,maxVertexAttribs:34921,maxVertexTextureImageUnits:35660,maxVertexUniformVectors:36347,maxViewportDIMs:3386},n={max3DTextureSize:32883,maxArrayTextureLayers:35071,maxColorAttachments:36063,maxCombinedFragmentUniformComponents:35379,maxCombinedUniformBlocks:35374,maxCombinedVertexUniformComponents:35377,maxDrawBuffers:34852,maxElementIndex:36203,maxElementsIndices:33001,maxElementsVertices:33e3,maxFragmentInpuComponents:37157,maxFragmentUniformBlocks:35373,maxFragmentUniformComponents:35657,maxProgramTexelOffset:35077,maxSamples:36183,maxTextureLODBias:34045,maxTransformFeedbackInterleavedComponents:35978,maxTransformFeedbackSeparateAttribs:35979,maxTransformFeedbackSeparateComponents:35968,maxUniformBlockSize:35376,maxUniformBufferBindings:35375,maxVaryingComponents:35659,maxVertexOutputComponents:37154,maxVertexUniformBlocks:35371,maxVertexUniformComponents:35658,minProgramTexelOffset:35076};return{"for":function(N){var B=N._info;return B||(N._info=B=g(N,B)),B}}}(),se=function(){function N(e,s,w){return{def:e,getter:w?function(G){var Q=hc.for(G);return Q.version>1?G.getParameter(s):e}:function(P){return P.getParameter(s)},setter:w?function(N,M){var n=hc.for(N);n.version>1&&N.pixelStorei(s,M)}:function($,H){$.pixelStorei(s,H)}}}function Y(m){return"string"==typeof m?dh(m):m.r!==H?(s[0]=m.r,s[1]=m.g,s[2]=m.b,s[3]=m.a,s):m.red!==H?(s[0]=m.red,s[1]=m.green,s[2]=m.blue,s[3]=m.alpha,s):m}function h(v){return q(v)?Array.prototype.slice.call(v,0):v}function A(I,r,V){this.gl=r,this._record=V||{},this._branches={},this._leafSync={},this._struct=I;for(var c=I.children,Y=c.length;Y--;){var C=c[Y],x=C.name;C.isLeaf?(this._leafSync[x]=!1,this._record[x]=h(C.desc.def)):this._record[x]={}}}function S(u){function O(f,W){A.call(this,u,f,W);for(var c=C.length;c--;){var M=C[c];this._branches[M._name]=new M._type(f,this._record[M._name])}}function g(i,K){function z(g,X){for(var G=I,w=!1;G--;)g[G]!==X[G]&&(g[G]=X[G],w=!0);return w}var L=i.name,X=q(i.desc.def),I=X&&i.desc.def.length;if(i.isLeaf){var B=i.desc.setter,f=i.desc.parse;b.defineProperty(K,L,{configurable:!1,enumerable:!0,get:function(){return this._record[L]},set:X?function(v){f&&(v=f(v)),(z(this._record[L],v)||!this._leafSync[L])&&(B(this.gl,this._record[L]),this._leafSync[L]=!0)}:function(u){this._record[L]===u&&this._leafSync[L]||(B(this.gl,u),this._record[L]=u,this._leafSync[L]=!0)}})}else C.push({_name:L,_type:S(i)}),b.defineProperty(K,L,{configurable:!1,enumerable:!0,get:function(){return this._branches[L]},set:function(y){this._branches[L].apply(y)}})}var C=[];return d(O,A),u.forEach(g,O.prototype),O}var s="undefined"!=typeof Float32Array&&new Float32Array(4),$={viewport:{def:[0,0,0/0,0/0],getter:function(B){return B.getParameter(2978)},setter:function(y,V){var q=V[2]!==V[2]?y.drawingBufferWidth-V[0]:V[2],b=V[3]!==V[3]?y.drawingBufferHeight-V[1]:V[3];y.viewport(V[0],V[1],q,b)}},dither:{def:!1,getter:function(G){return G.isEnabled(3024)},setter:function(h,s){s?h.enable(3024):h.disable(3024)
}},rasterizerDiscard:{def:!1,getter:function(Z){var R=hc.for(Z);return R.version>1&&Z.isEnabled(35977)},setter:function(V,L){var Z=hc.for(V);1!==Z.version&&(L?V.enable(35977):V.disable(35977))}},lineWidth:{def:1,getter:function($){return $.lineWidth?$.getParameter(2849):1},setter:function(y,L){y.lineWidth&&y.lineWidth(L)}},color:{clear:{def:[0,0,0,0],getter:function(I){return I.getParameter(3106)},setter:function(n,L){n.clearColor(L[0],L[1],L[2],L[3])},parse:Y},mask:{def:[!0,!0,!0,!0],getter:function(M){return M.getParameter(3107)},setter:function(k,x){k.colorMask(x[0],x[1],x[2],x[3])}}},blend:{enabled:{def:!1,getter:function(V){return V.isEnabled(3042)},setter:function(f,d){d?f.enable(3042):f.disable(3042)}},color:{def:[0,0,0,0],getter:function(N){return N.getParameter(32773)},setter:function(E,m){E.blendColor(m[0],m[1],m[2],m[3])},parse:Y},equation:{def:[32774,32774],getter:function($){return[$.getParameter(32777),$.getParameter(34877)]},setter:function(u,q){u.blendEquationSeparate(q[0],q[1])},parse:function(v){var G=v.length;return G>1?v:1===G?(s[1]=s[0]=v[0],s):(s[1]=s[0]=v,s)}},func:{def:[1,Db.ZERO,1,Db.ZERO],getter:function(a){return[a.getParameter(32969),a.getParameter(32968),a.getParameter(32971),a.getParameter(32970)]},setter:function(c,N){c.blendFuncSeparate(N[0],N[1],N[2],N[3])},parse:function(I){var e=I.length;return e>3?I:(s[2]=s[0]=I[0],s[3]=s[1]=I[1],s)}}},cullFace:{enabled:{def:!1,getter:function(I){return I.isEnabled(2884)},setter:function(F,V){V?F.enable(2884):F.disable(2884)}},mode:{def:1029,getter:function(z){return z.getParameter(2885)},setter:function(N,l){N.cullFace(l)}},frontFace:{def:2305,getter:function(J){return J.getParameter(2886)},setter:function(C,v){C.frontFace(v)}}},scissor:{enabled:{def:!1,getter:function(w){return w.isEnabled(3089)},setter:function(S,x){x?S.enable(3089):S.disable(3089)}},box:{def:[0,0,0/0,0/0],getter:function(C){return C.getParameter(3088)},setter:function(M,A){var m=A[2]!==A[2]?M.drawingBufferWidth-A[0]:A[2],z=A[3]!==A[3]?M.drawingBufferHeight-A[1]:A[3];M.scissor(A[0],A[1],m,z)}}},depth:{enabled:{def:!1,getter:function(Z){return Z.isEnabled(2929)},setter:function($,p){p?$.enable(2929):$.disable(2929)}},clear:{def:1,getter:function(K){return K.getParameter(2931)},setter:function(E,G){E.clearDepth(G)}},mask:{def:!0,getter:function(o){return o.getParameter(2930)},setter:function(J,X){J.depthMask(X)}},range:{def:[-1,1],getter:function(Y){return Y.getParameter(2928)},setter:function(M,i){M.depthRange(i[0],i[1])}},func:{def:513,getter:function(_){return _.getParameter(2932)},setter:function(R,A){R.depthFunc(A)}}},stencil:{enabled:{def:!1,getter:function(T){return T.isEnabled(2960)},setter:function(B,P){P?B.enable(2960):B.disable(2960)}},clear:{def:0,getter:function(x){return x.getParameter(2961)},setter:function(N,T){N.clearStencil(T)}},frontMask:{def:255,getter:function(S){return S.getParameter(2968)},setter:function(X,U){X.stencilMaskSeparate(1028,U)}},frontOp:{def:[7680,7680,7680],getter:function(J){return[J.getParameter(2964),J.getParameter(2965),J.getParameter(2966)]},setter:function(f,F){f.stencilOpSeparate(1028,F[0],F[1],F[2])}},frontFunc:{def:[519,0,255],getter:function(g){return[g.getParameter(2962),g.getParameter(2967),g.getParameter(2963)]},setter:function(W,t){W.stencilFuncSeparate(1028,t[0],t[1],t[2])}},backMask:{def:255,getter:function(Y){return Y.getParameter(36005)},setter:function(D,p){D.stencilMaskSeparate(1029,p)}},backOp:{def:[7680,7680,7680],getter:function(P){return[P.getParameter(34817),P.getParameter(34818),P.getParameter(34819)]},setter:function(U,A){U.stencilOpSeparate(1029,A[0],A[1],A[2])}},backFunc:{def:[519,0,255],getter:function(x){return[x.getParameter(34816),x.getParameter(36003),x.getParameter(36004)]},setter:function(A,l){A.stencilFuncSeparate(1029,l[0],l[1],l[2])}}},hint:{generateMipmap:{def:4352,getter:function(S){return S.getParameter(33170)},setter:function(n,$){n.hint(33170,$)}},fragmentShaderDerivative:{def:4352,getter:function(d){var f=hc.for(d);return 1!==f.version||f.extensions.OES_standard_derivatives?d.getParameter(35723):4352},setter:function(G,Q){var a=hc.for(G);return a.version>1||a.extensions.OES_standard_derivatives?(G.hint(35723,Q),void 0):void 0}}},pixelStore:{packAlignment:N(4,3333,!1),unpackAlignment:N(4,3317,!1),unpackFlipY:N(!1,37440,!1),unpackPremultiplyAlpha:N(!1,37441,!1),unpackColorspaceConversion:N(37444,37443,!1),packRowLength:N(0,3330,!0),packSkipPixels:N(0,3332,!0),packSkipRows:N(0,3331,!0),unpackRowLength:N(0,3314,!0),unpackImageHeight:N(0,32878,!0),unpackSkipPixels:N(0,3316,!0),unpackSkipRows:N(0,3315,!0),unpackSkipImages:N(0,32877,!0)},polygonOffset:{enabled:{def:!1,getter:function(M){return M.isEnabled(32823)},setter:function(U,H){H?U.enable(32823):U.disable(32823)}},value:{def:[0,0],getter:function(m){return[m.getParameter(32824),m.getParameter(10752)]},setter:function(w,H){w.polygonOffset(H[0],H[1])}}},sampleCoverage:{enabled:{def:!1,getter:function(D){return D.isEnabled(32928)},setter:function(Z,g){g?Z.enable(32928):Z.disable(32928)}},alpha:{def:!1,getter:function(q){return q.isEnabled(32926)},setter:function(P,$){$?P.enable(32926):P.disable(32926)}},value:{def:[1,!1],getter:function(c){return[c.getParameter(32938),c.getParameter(32939)]},setter:function(R,y){R.sampleCoverage(y[0],y[1])}}}},u=nf.create($,function(f){return"def"in f});A.prototype.reset=function(){for(var G=this._struct.children,x=G.length;x--;){var K=G[x],o=K.name;K.isLeaf?this[o]=K.desc.def:this._branches[o].reset()}},A.prototype.save=function(S){S==H&&(S={});for(var j=this._struct.children,V=j.length;V--;){var o=j[V],r=o.name;if(o.isLeaf)S[r]=h(this._record[r]);else{var g=S[r];g==H&&(S[r]=g={}),this._branches[r].save(g)}}return S},A.prototype.sync=function(B,S){for(var G=this._struct.children,N=G.length;N--;){var m=G[N],v=m.name;m.isLeaf?(S||!this._leafSync[v])&&(B?(this._record[v]=m.desc.getter(this.gl),this._leafSync[v]=!0):(m.desc.setter(this.gl,this._record[v]),this._leafSync[v]=!0)):this._branches[v].sync(B,S)}},A.prototype.syncLoss=function(){for(var N=this._struct.children,n=N.length;n--;){var q=N[n];q.isLeaf?this._leafSync[q.name]=!1:this._branches[q.name].syncLoss()}},A.prototype.apply=function(M){for(var R=this._struct.children,p=R.length;p--;){var e=R[p],Y=e.name;Y in M&&(e.isLeaf?this[Y]=M[Y]:this._branches[Y].apply(M[Y]))}},A.prototype.append=function(k){var l=this._struct.childMap;for(var S in k){var z=l[S];z&&(z.isLeaf?this[S]=k[S]:this._branches[S].append(k[S]))}};var r=S(u);return function(z){var e=z._state;return e||(z._state=e=new r(z)),e}}(),ub=function(){function v(N,u,y,n){if(N){var R=N.length;if(R!=H)for(var c=0;n>c;++c)u[y+c]=N[c];else N.toArray&&N.toArray(u,y)}else for(var c=0;n>c;++c)u[y+c]=0}function I(x,y,h){var u=x[0];if(0>=u||u>0)return x;var c=y*h,q=U[c];if(q==H&&(U[c]=q=new Float32Array(c)),0!==y){v(u,q,0,h);for(var O=1,I=0;O!==y;++O)I+=h,v(x[O],q,I,h)}return q}function m(C,B){if(!C||!B)return!1;var x=C.length,Q=B.length;if(x!==Q)return!1;for(;--x>=0;)if(C[x]!==B[x])return!1;return!0}function h(M,J){var V=this.cache;V[0]!==J&&(M.uniform1f(this.addr,J),V[0]=J)}function J(w,J){var u=this.cache;m(u,J)||(w.uniform1fv(this.addr,J),u=J)}function A(O,$){var q,I;$.x!=H?(q=$.x,I=$.y):(q=$[0],I=$[1]);var n=this.cache;(n[0]!==q||n[1]!==I)&&(O.uniform2f(this.addr,q,I),n[0]=q,n[1]=I)}function g(j,u){var B=this.cache;u=I(u,this.size,2),m(B,u)||(j.uniform2fv(this.addr,u),B=u)}function $(v,V){"string"==typeof V&&(V=dh(V));var D,S,c;V.x!=H?(D=V.x,S=V.y,c=V.z):V.r!=H?(D=V.r,S=V.g,c=V.b):V.red!=H?(D=V.red,S=V.green,c=V.blue):(D=V[0],S=V[1],c=V[2]);var T=this.cache;(T[0]!==D||T[1]!==S||T[2]!==c)&&(v.uniform3f(this.addr,D,S,c),T[0]=D,T[1]=S,T[2]=c)}function k(e,N){var l=this.cache;N=I(N,this.size,3),m(l,N)||(e.uniform3fv(this.addr,N),l=N)}function e(k,g){"string"==typeof g&&(g=dh(g));var Z,R,r,V;g.x!=H?(Z=g.x,R=g.y,r=g.z,V=g.w):g.r!=H?(Z=g.r,R=g.g,r=g.b,V=g.a):g.red!=H?(Z=g.red,R=g.green,r=g.blue,V=g.alpha):(Z=g[0],R=g[1],r=g[2],V=g[3]==C?1:g[3]);var v=this.cache;(v[0]!==Z||v[1]!==R||v[2]!==r||v[3]!==V)&&(k.uniform4f(this.addr,Z,R,r,V),v[0]=Z,v[1]=R,v[2]=r,v[3]=V)}function w(B,D){var X=this.cache;D=I(D,this.size,4),m(X,D)||(B.uniform4fv(this.addr,D),X=D)}function _(L,d){var h=this.cache;h[0]!==d&&(L.uniform1i(this.addr,d),h[0]=d)}function z(y,p){var g=this.cache;m(g,p)||(y.uniform1iv(this.addr,p),g=p)}function T($,d){var K=this.cache;m(K,d)||($.uniform2iv(this.addr,d),K=d)}function L(N,z){var O=this.cache;m(O,z)||(N.uniform3iv(this.addr,z),O=z)}function Q(i,G){var f=this.cache;m(f,G)||(i.uniform4iv(this.addr,G),f=G)}function D(z,u){var o=this.cache;u=q[u?1:0],o[0]!==u&&(z.uniform1i(this.addr,u),o[0]=u)}function f(x,A){var j=U[4];j.set(A,0),x.uniformMatrix2fv(this.addr,!1,j)}function t(r,O){r.uniformMatrix2fv(this.addr,!1,I(O,this.size,4))}function u(j,h){var I=U[9];I.set(h,0),j.uniformMatrix3fv(this.addr,!1,I)}function s(p,b){p.uniformMatrix3fv(this.addr,!1,I(b,this.size,9))}function X(I,T){var f=U[16];f.set(T,0),I.uniformMatrix4fv(this.addr,!1,f)}function O(k,T){k.uniformMatrix4fv(this.addr,!1,I(T,this.size,16))}function E(B,P){B.uniform1i(this.addr,this.slots[0]),B.activeTexture(33984+this.slots[0]),B.bindTexture(3553,P||B._emptyTexture)}function P(T,V){T.uniform1iv(this.addr,this.slots);for(var d=this.slots.length;d--;)T.activeTexture(33984+this.slots[d]),T.bindTexture(3553,V[d]||T._emptyTexture)}function B(N,s){N.uniform1i(this.addr,this.slots[0]),N.activeTexture(33984+this.slots[0]),N.bindTexture(34067,s||N._emptyCubeTexture)}function o(d,t){d.uniform1iv(this.addr,this.slots);for(var v=this.slots.length;v--;)d.activeTexture(33984+this.slots[v]),d.bindTexture(34067,t[v]||d._emptyCubeTexture)}function S(z,I,f){r[z]=[I,f]}function N(N,b,I){switch(N.type){case 35678:case 35680:if("uSampler"===I)return[0];if("uBlendSampler"===I)return[1];for(var R=N.size,Z=new Int32Array(R),L=0;R>L;++L)Z[L]=b.usedTextureSlot++;return Z}return H}function Y(I,a,x,w,C){this.name=I,this.addr=a,this.cache=[],this.size=w?x.size:0,this.activeInfo=x,this.setter=r[x.type][w?1:0],this.slots=N(x,C,I),vr(this)}function c(Q,w,n,R){var S=Q.name,G=S.length;for(l.lastIndex=0;;){var t=l.exec(S),M=l.lastIndex,F=t[1],m="]"===t[2],b=t[3];if(m&&(F=0|F),b===H||"["===b&&M+2===G){n[F]=new Y(F,w,Q,b!==H,R);break}var U=n[F];U==H&&(n[F]=U={}),n=U}}function y(c,o,V){this.gl=o,this._program=V,this._leaves={},this._branches={},this._struct=c}function x(C){function e(v,F){y.call(this,C,v,F);for(var z=I.length;z--;){var f=I[z];this._branches[f._name]=new f._type(v,F)}this.uuid=Of.generateUUID()}function q(U,D){var M=U.name;if(U.isLeaf){var l=Z("d.setter(this.gl, v);",["v"],["d"],[U.desc]);b.defineProperty(D,M,{configurable:!1,enumerable:!0,get:function(){return l},set:l})}else I.push({_name:M,_type:x(U)}),b.defineProperty(D,M,{configurable:!1,enumerable:!0,get:function(){return this._branches[M]},set:function(d){this._branches[M].apply(d)}})}var I=[];return d(e,y),C.forEach(q,e.prototype),e}function V(i,P){for(var R=i.getProgramParameter(P,35718),o={},K={usedTextureSlot:2};R--;){var A=i.getActiveUniform(P,R),m=A.name,S=i.getUniformLocation(P,m);c(A,S,o,K)}var t=nf.create(o,function(O){return"addr"in O}),N=x(t);return b.defineProperty(N.prototype,"textureCount",{configurable:!1,enumerable:!1,writable:!1,value:K.usedTextureSlot}),new N(i,P)}var U=[];if("function"==typeof Float32Array)for(var F=1;17>F;++F)U[F]=new Float32Array(F);var q=[0,1],r=[];S(5126,h,J),S(35664,A,g),S(35665,$,k),S(35666,e,w),S(5124,_,z),S(35667,T,T),S(35668,L,L),S(35669,Q,Q),S(35670,D,z),S(35671,T,T),S(35672,L,L),S(35673,Q,Q),S(35674,f,t),S(35675,u,s),S(35676,X,O),S(35678,E,P),S(35680,B,o);var l=/([\w\d_]+)(\])?(\[|\.)?/g;return y.prototype.apply=function(W,y){for(var $=this._struct.children,L=$.length;L--;){var P,X=$[L],T=X.name,p=X.desc.activeInfo;if(y){if(P=y(W,T,p?p.type:null),P===H)continue}else{if(!(T in W))continue;P=W[T]}X.isLeaf?this[T]=P:this._branches[T].apply(P)}},y.prototype.append=function(J){var L=this._struct.childMap;for(var r in J){var S=L[r];S&&(S.isLeaf?this[r]=J[r]:this._branches[r].append(J[r]))}},function(S,w){var j=w._uniforms;return j||(w._uniforms=j=V(S,w)),j}}(),Fg=function(){function p(g,l,W){l.vertexAttrib1f(g.addr,W)}function M(X,m,a){if(a.x!=H)m.vertexAttrib2f(X.addr,a.x,a.y);else{var f=r[2];f.set(a,0),m.vertexAttrib2fv(X.addr,f)}}function q(l,k,w){if(w.x!=H)k.vertexAttrib3f(l.addr,w.x,w.y,w.z);else if(w.r!=H)k.vertexAttrib3f(l.addr,w.r,w.g,w.b);else if(w.red!=H)k.vertexAttrib3f(l.addr,w.red,w.green,w.blue);else{var J=r[3];J.set(w,0),k.vertexAttrib3fv(l.addr,J)}}function A(q,h,y){if("string"==typeof y&&(y=dh(y)),y.x!=H)h.vertexAttrib4f(q.addr,y.x,y.y,y.z,y.w);else if(y.r!=H)h.vertexAttrib4f(q.addr,y.r,y.g,y.b,y.a);else if(y.red!=H)h.vertexAttrib4f(q.addr,y.red,y.green,y.blue,y.alpha);else{var i=r[4];i.set(y,0),h.vertexAttrib4fv(q.addr,i)}}function i(d,o,M){M=M.el||M;for(var c=0,F=0;2>c;++c)o.vertexAttrib2f(d.addr,M[F++],M[F++])}function D(j,W,N){N=N.el||N;for(var H=0,X=0;3>H;++H)W.vertexAttrib3f(j.addr,N[X++],N[X++],N[X++])}function Q(z,T,E){E=E.el||E;for(var k=0,i=0;4>k;++k)T.vertexAttrib4f(z.addr,E[i++],E[i++],E[i++],E[i++])}function V(l,r,Q,G){for(var H,M=Q?1:0,D=r.addr,m=l._divisorState,Y=0;G>Y;Y++)H=m[D+Y]||0,H!==M&&(m[D+Y]=M,l.vertexAttribDivisor(D+Y,M))}function h(Z,d,e,O,n,v,X){d.bindBuffer(34962,e);var J=Z.addr;d.enableVertexAttribArray(J),V(d,Z,e.instanced,1),d.vertexAttribPointer(J,1,O||5126,!!n,v||0,X||0),d.bindBuffer(34962,null)}function v(H,R,C,m,y,O,p){R.bindBuffer(34962,C);var K=H.addr;R.enableVertexAttribArray(K),V(R,H,C.instanced,1),R.vertexAttribPointer(K,2,m||5126,!!y,O||0,p||0),R.bindBuffer(34962,null)}function l(h,N,T,v,M,F,s){N.bindBuffer(34962,T);var u=h.addr;N.enableVertexAttribArray(u),V(N,h,T.instanced,1),N.vertexAttribPointer(u,3,v||5126,!!M,F||0,s||0),N.bindBuffer(34962,null)}function J(g,b,N,O,i,J,K){b.bindBuffer(34962,N);var X=g.addr;b.enableVertexAttribArray(X),V(b,g,N.instanced,1),b.vertexAttribPointer(X,4,O||5126,!!i,J||0,K||0),b.bindBuffer(34962,null)}function I(T,g,h,C,i,M,J){var M=M||16,J=J||0,o=T.addr;g.bindBuffer(34962,h),g.enableVertexAttribArray(o),g.vertexAttribPointer(o,2,C||5126,!!i,M,J),g.enableVertexAttribArray(o+1),g.vertexAttribPointer(o+1,2,C||5126,!!i,M,J+8),V(g,T,h.instanced,2),g.bindBuffer(34962,null)}function G(b,w,p,R,t,Y,H){var Y=Y||36,H=H||0,s=b.addr;w.bindBuffer(34962,p);for(var y=0;3>y;y++)w.enableVertexAttribArray(s+y),w.vertexAttribPointer(s+y,3,R||5126,!!t,Y,H+12*y);V(w,b,p.instanced,3),w.bindBuffer(34962,null)}function K(e,k,R,b,r,P,c){var P=P||64,c=c||0,i=e.addr;k.bindBuffer(34962,R);for(var U=0;4>U;U++)k.enableVertexAttribArray(i+U),k.vertexAttribPointer(i+U,4,b||5126,!!r,P,c+16*U);V(k,e,R.instanced,4),k.bindBuffer(34962,null)}function U(N,u,P,r){n[N]=function(v,w,F,c,j,V){this.addr==H||this.addr<0||(w==H||w===!1?r(v,this.addr):ve(w)===C?P(this,v,w,w.glType,c,j,V):(r(v,this.addr),u(this,v,w)))}}function R(y,$){y.disableVertexAttribArray($)}function _(H,p){H.disableVertexAttribArray(p),H.disableVertexAttribArray(p+1)}function P(n,A){n.disableVertexAttribArray(A),n.disableVertexAttribArray(A+1),n.disableVertexAttribArray(A+2)}function m(l,u){l.disableVertexAttribArray(u),l.disableVertexAttribArray(u+1),l.disableVertexAttribArray(u+2),l.disableVertexAttribArray(u+3)}function $(f,F,S){this.name=f,this.addr=F,this.activeInfo=S,this.setter=n[S.type],vr(this)}function j(c,D,$){this.gl=D,this.program=$,this._branches={},this._struct=c}function L(m){function y(N,E){j.call(this,m,N,E);for(var x=h.length;x--;){var F=h[x];this._branches[F._name]=new F._type(N,E)}}function I(v,p){var s=v.name;if(v.isLeaf){var d=Z("d.setter(this.gl, v);",["v"],["d"],[v.desc]);b.defineProperty(p,s,{configurable:!1,enumerable:!0,get:function(){return d},set:d})}else h.push({_name:s,_type:L(v)}),b.defineProperty(p,s,{configurable:!1,enumerable:!0,get:function(){return this._branches[s]},set:function(Y){this._branches[s].apply(Y)}})}var h=[];return d(y,j),m.forEach(I,y.prototype),y}function t(_,o){for(var U=_.getProgramParameter(o,35721),B={};U--;){var Z=_.getActiveAttrib(o,U),P=Z.name,y=_.getAttribLocation(o,P);y>=0&&(B[P]=new $(P,y,Z))}var b=nf.create(B,function(t){return"addr"in t}),Y=L(b);return new Y(_,o)}for(var r=[],o=1;17>o;++o)r[o]=new $n(o);var n=[],C="undefined"!=typeof WebGLBuffer&&WebGLBuffer.prototype;return U(5126,p,h,R),U(35664,M,v,R),U(35665,q,l,R),U(35666,A,J,R),U(35674,i,I,_),U(35675,D,G,P),U(35676,Q,K,m),j.prototype.disable=function(){for(var P=this._struct.children,z=P.length;z--;){var F=P[z],r=F.name;F.isLeaf?this[r]=H:this._branches[r].disable()}},j.prototype.apply=function(Z,b){for(var p=this._struct.children,h=p.length;h--;){var x,f=p[h],q=f.name;if(b){if(x=b(Z,q,f),x===H)continue}else{if(!(q in Z))continue;x=Z[q]}f.isLeaf?this[q]=x:this._branches[q].apply(x)}},j.prototype.append=function(l){var R=this._struct.childMap;for(var y in l){var O=R[y];O&&(O.isLeaf?this[y]=l[y]:this._branches[y].append(l[y]))}},function(G,W){var c=W._attribs;return c||(W._attribs=c=t(G,W)),c}}(),ie=function(l){var T=this;b.defineProperties(this,{gl:{configurable:!1,enumerable:!1,value:l,writable:!1},glState:{configurable:!1,enumerable:!1,value:se(l),writable:!1}}),T._currProgram=H,T._currUniforms=H,T._currAttribs=H,T._sync=!0};b.defineProperties(ie.prototype,{program:{configurable:!1,enumerable:!1,get:function(){return this._currProgram},set:function(n){var S=this;S._sync&&n===S._currProgram||(S.gl.useProgram(n),S._currProgram=n,S._currUniforms=ub(S.gl,n),S._currAttribs=Fg(S.gl,n),S._sync=!0)}},uniforms:{configurable:!1,enumerable:!1,get:function(){var q=this;return q._currProgram&&!q._sync&&(q.gl.useProgram(q._currProgram),q._sync=!0),q._currUniforms},set:function(C){var X=this;X._currUniforms&&(X._currProgram&&!X._sync&&(X.gl.useProgram(X._currProgram),this._sync=!0),X._currUniforms.apply(C))}},attribs:{configurable:!1,enumerable:!1,get:function(){var w=this;return w._currProgram&&!w._sync&&(w.gl.useProgram(w._currProgram),w._sync=!0),w._currAttribs},set:function(o){var i=this;i._currUniforms&&(i._currProgram&&!i._sync&&(i.gl.useProgram(i._currProgram),this._sync=!0),i._currAttribs.apply(o))}}}),ie.prototype.useProgram=function(_){var e=this;e._sync&&_===e._currProgram||(e.gl.useProgram(_),e._currProgram=_,e._currUniforms=ub(e.gl,_),e._currAttribs=Fg(e.gl,_),e._sync=!0)},ie.prototype.directState=function(){return this.glState},ie.prototype.directUniforms=function(){return this._currUniforms},ie.prototype.directAttribs=function(){return this._currAttribs},ie.prototype.syncLoss=function(){this._sync=!1,this.glState.syncLoss()},ie.for=function(E){var $=E._renderState;return $||(E._renderState=$=new ie(E)),$};var sj="directional",Ql="point",jk="spot",wr="light.color",nh=4294967295,Ie=0,Hm={},Ek={},Br=function(L,X){jm(X)&&nb.test(X)?um(L,X):oc(X)&&X.modelType?fo(L,X):X===H?delete gj[L]:gj[L]=X},nd=function(L){return L},Uf=function(Z){Z=T.convertShape3dModelName(Z);var q;if(oc(Z)){if(Z.modelType){if(Z.uuid){if(q=gj[Z.uuid])return q}else Z.uuid=L.Math.generateUUID();return q===H&&(Pl&&Pl[Z.uuid]||fo(Z.uuid,Z)),H}return Z}return q=gj[Z],Z&&q===H&&nb.test(Z)&&(Pl&&Pl[Z]||um(Z,Z)),q},xp="undefined"!=typeof WebGLTexture&&WebGLTexture.prototype,Dl=function(j){return j&&ve(j)===xp},Hg=function(I,n){I.frameStack?I.frameStack.push(n):I.frameStack=[n],I.bindFramebuffer(36160,n)},ko=function(y){var W=y.frameStack;if(W){if(W.pop(),W.length)return y.bindFramebuffer(36160,W[W.length-1]),void 0;y.frameStack=null}y.bindFramebuffer(36160,null)};yd(T,{graph3dViewAttributes:C,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:kl/60,graph3dViewSortable:!1,graph3dViewBlockSelectable:!0,graph3dViewEditHelperDisabled:!1,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:Rb,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewRotateMaxPhi:kl,graph3dViewRotateMinPhi:0,graph3dViewShadowDisabled:!0,graph3dViewShadowQuality:"high",graph3dViewShadowIntensity:.3,graph3dViewShadowBias:-.005,graph3dViewShadowRadius:.1,graph3dViewShadowType:"hard",graph3dViewShadowDegreeX:30,graph3dViewShadowDegreeZ:-10,graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewSyncEyeWithOrthoWidth:!1,graph3dViewFovy:kl/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewDataNumWarningLine:1e4,graph3dViewHeadlightDirection:"camera",graph3dViewHeadlightRange:0,graph3dViewHeadlightGroup:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewHeadlightAmbientIntensity:.7,graph3dViewHeadlightRatioForPhysicalMaterial:.5,graph3dViewFogDisabled:!0,graph3dViewFogMode:"linear",graph3dViewFogDensity:5e-4,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewPickerResolution:.5,graph3dViewDashDisabled:!0,graph3dViewUvClipEnabled:!1,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,graph3dViewBatchInstancedDisabled:!0,graph3dViewFlowBlendMode:"addRGB",graph3dViewEnvmapType:"legacy",graph3dMaxVectorCacheTime:50,graph3dEnvmapCapabilityRequire:8,setShape3dModel:Br,getShape3dModel:Uf,convertShape3dModelName:nd,getShape3dModelMap:function(){return gj},getCachedShape3dModelMap:function(){return pf},createMatrix:function(D,S){Tl(D)||(D=[D]);for(var t=D.length-1;t>=0;t--){var I=D[t];S=sd(I.mat,I.s3,I.r3,I.rotationMode,I.t3,S)}return S},transformVec:function(C,c){return Zg(C,c)},glBindFrame:Hg,glUnbindFrame:ko,createBoxModel:function(){return{vs:Md,ns:pm,uv:bc,is:Xn}},createRoundRectModel:function(i,g){return Dh.roundRect(i,g)},createStarModel:function(M,s){return Dh.star(M,s)},createRectModel:function(Q,M){return Dh.rect(Q,M)},createTriangleModel:function(Y,e){return Dh.triangle(Y,e)},createRightTriangleModel:function(N,x){return Dh.rightTriangle(N,x)},createParallelogramModel:function(S,D){return Dh.parallelogram(S,D)},createTrapezoidModel:function(H,M){return Dh.trapezoid(H,M)},createSmoothSphereModel:function(o,f,S,Z,W,p,k){return Zn(new ps(o,f,S,Z,W,p,k))},createSphereModel:function(I,C,u,O,S,o,z){return I?Vb(I,C,u,O,S,o,z):T.createSmoothSphereModel()},createSmoothConeModel:function(w,l,U,O,H){return Kf(w,l,U,O,H)},createConeModel:function(w,j,T,V,y,S,e,z){return w?De(w,j,T,V,y,S,e,z):Kf(S)},createSmoothCylinderModel:function(p,f,i,s,V,S,Y,u){return Zn(new Yk(p,f,i,s,V,S,Y,u))},createCylinderModel:function(r,H,$,y,q,A,k,u){return r?lq(r,H,$,y,q,A,k,u):Xm(A,k)},createSmoothTorusModel:function(M,b,n,t,e,s){return Zn(new zk(M,b,n,t,e,s))},createTorusModel:function(V,a,R,p,U,N,x,w){return V?Gc(V,a,R,p,U,N,x,w):Zk(N,x)},createExtrusionModel:function($,p,i,T,u,l,o,g){return Tg($,p,i,T,u,l,o,g)},createSmoothRingModel:function(K,a,I,l,M,e){for(var p=[],V=0;V<K.length-1;V+=2)p.push({x:K[V],y:K[V+1]});for(K=Pk(p,a,I)[0],p=[],V=0;V<K.length;V++){var n=K[V];p.push(new dk(n.x,0,n.y))}return Zn(new Mi(p,e,l,M))},createTextGeometry:function(j,p){var U=Zn(new ob(j,p));if(p.cube)for(var i=An(U),v=i.min,x=i.max,G=v.x,k=v.y,W=v.z,S=x.x-G||1,u=x.y-k||1,C=x.z-W||1,K=["vs","top_vs","bottom_vs"],m=0,y=K.length;y>m;m++){var o=U[K[m]];if(o)for(var a=0,f=o.length;f>a;a+=3)o[a]=(o[a]-G)/S-.5,o[a+1]=(o[a+1]-k)/u-.5,o[a+2]=(o[a+2]-W)/C-.5}return U},loadFontFace:function($,Z){T.xhrLoad($,function(n){if(!n)return Z();var O;try{O=JSON.parse(n)}catch(r){O=JSON.parse(n.substring(65,n.length-2))}Wn.loadFace(O),Z&&Z(O.familyName.toLowerCase())},Z?null:{sync:!0})},createRingModel:function(w,s,U,v,S,l,y,x,A,o){for(var f=[],B=0;B<w.length-1;B+=2)f.push({x:w[B],y:w[B+1]});l=l||T.shapeSide,y=y||0,x=x||l;var g,Z,k,c,i,e,a,I,G,H,B,h,Q,P,n,m,X,O,K=[],p=[],J=A?[]:C,N=A?[]:C,r=o?[]:C,E=o?[]:C,D=v?[]:C,W=v?[]:C,$=S?[]:C,q=S?[]:C,w=Pk(f,s,U),b=Mc(w),V=0,u=2*Math.PI/l;return w.forEach(function(w){if(k=w.length,k>1){if(c=w[0],v)for(e=c.x,I=c.y,B=y;x>B;B++)h=B+1,Q=B*u,P=h*u,n=t(Q),m=_(Q),X=t(P),O=_(P),D.push(n*e,I,-m*e,X*e,I,-O*e,0,I,0),W.push(.5-.5*n,.5-.5*m,.5-.5*X,.5-.5*O,.5,.5);for(H=0;k>H;H++){for(i=w[H],e=c.x,a=i.x,I=c.y,G=i.y,g=V/b,V+=mp(c,i),Z=V/b,B=y;x>B;B++)h=B+1,Q=B*u,P=h*u,n=t(Q),m=_(Q),X=t(P),O=_(P),K.push(n*a,G,-m*a,X*a,G,-O*a,n*e,I,-m*e,X*a,G,-O*a,X*e,I,-O*e,n*e,I,-m*e),p.push(B/l,Z,h/l,Z,B/l,g,h/l,Z,h/l,g,B/l,g),A&&B===y&&(J.push(0,I,0,0,G,0,n*a,G,-m*a,n*a,G,-m*a,n*e,I,-m*e,0,I,0),N.push(0,.5-I,0,.5-G,2*a,.5-G,2*a,.5-G,2*e,.5-I,0,.5-I)),o&&h===x&&(r.push(0,I,0,X*a,G,-O*a,0,G,0,X*a,G,-O*a,0,I,0,X*e,I,-O*e),E.push(1,.5-I,1-2*a,.5-G,1,.5-G,1-2*a,.5-G,1,.5-I,1-2*e,.5-I));c=i}if(S)for(e=c.x,I=c.y,B=y;x>B;B++)h=B+1,Q=B*u,P=h*u,n=t(Q),m=_(Q),X=t(P),O=_(P),$.push(X*e,I,-O*e,n*e,I,-m*e,0,I,0),q.push(.5-.5*X,.5+.5*O,.5-.5*n,.5+.5*m,.5,.5)}}),{vs:K,uv:p,bottom_vs:$,bottom_uv:q,top_vs:D,top_uv:W,from_vs:J,from_uv:N,to_vs:r,to_uv:E}}},!0),yd(i,{"3d.move.mode":H,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"3d.clip.direction":null,"3d.clip.percentage":1,"3d.reflectable":!0,"shape.border.gradient.color":H,"edge.gradient.color":H,"edge.source.t3":H,"edge.target.t3":H,"light.type":Ql,"light.group":0,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":kl/4,"light.range":0,"light.exponent":1,"light.intensity":1,"light.rotation.enable":!1,"light.size":[100,100],"light.specular.disable":!1,"light.mask":nh,"headlight.ambientIntensity":H,"wf.visible":!1,"wf.width":1,"wf.fog":!0,"wf.color":yn,"wf.short":!1,"wf.mat":H,"wf.boundingBox":!1,"wf.material":null,"wf.geometry":!1,"wf.loadQuadWireframe":!1,"wf.combineTriangle":!0,batch:H,"static":H,"static.group":0,"transparent.mask":!1,brightness:H,"select.brightness":.7,"repeat.uv.length":H,"shadow.cast":!0,"shadow.receive":!0,"3d.clipbox":H,"3d.clipbox.mask":nh,"3d.clipbox.group":0,"3d.clipbox.shape":"cube","effect.flow":!1,"effect.flow.gradient":"spread.horizontal","effect.flow.uvshape":"rect","effect.flow.size":512,"effect.flow.group":0,"effect.flow.intensity":1,"effect.flow.blend":H,"effect.flow.mask":nh,bloom:!1,envmap:0,"envmap.probe":0,roughness:0,renderTextureSamples:4,alphaTest:.4,autorotate:!1,fixSizeOnScreen:!1,"texture.cache":!1,"hide.overlapping.group":H,"vector.dynamic":!1,"vector.dynamic.maxsize":2048,"texture.scale":1,"geometry.cache":!1,"highlight.mode":!1,"highlight.type":"hard","highlight.visible":!0,"highlight.width":.8,"highlight.color":"rgba(190, 210, 250, 1)","highlight.glow":.8,"highlight.strength":2,"color.empty":[0,0,0,0],"label.face":Rl,"label.t3":H,"label.r3":H,"label.texture.scale":2,"label.rotationMode":zh,"label.light":!1,"label.blend":H,"label.reverse.flip":!1,"label.reverse.color":Ec,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":Rl,"label2.t3":H,"label2.r3":H,"label2.texture.scale":2,"label2.rotationMode":zh,"label2.light":!1,"label2.blend":H,"label2.reverse.flip":!1,"label2.reverse.color":Ec,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":Rl,"note.t3":H,"note.r3":H,"note.texture.scale":2,"note.rotationMode":zh,"note.light":!1,"note.blend":H,"note.reverse.flip":!1,"note.reverse.color":Ec,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":Rl,"note2.t3":H,"note2.r3":H,"note2.texture.scale":2,"note2.rotationMode":zh,"note2.light":!1,"note2.blend":H,"note2.reverse.flip":!1,"note2.reverse.color":Ec,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,"part.boundingBox":!1,shape3d:H,"shape3d.color":ol,"shape3d.top.color":H,"shape3d.bottom.color":H,"shape3d.from.color":H,"shape3d.to.color":H,"shape3d.image":H,"shape3d.image.projection":H,"shape3d.top.image":H,"shape3d.bottom.image":H,"shape3d.from.image":H,"shape3d.to.image":H,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":H,"shape3d.side.to":H,"shape3d.smooth":H,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":H,"shape3d.opacity":H,"shape3d.reverse.flip":!1,"shape3d.reverse.color":Ec,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":H,"shape3d.uv.scale":H,"shape3d.uv.rotation":H,"shape3d.uv.anchor":H,"shape3d.uv.union":H,"shape3d.top.uv.offset":H,"shape3d.top.uv.scale":H,"shape3d.top.uv.rotation":H,"shape3d.top.uv.anchor":H,"shape3d.bottom.uv.offset":H,"shape3d.bottom.uv.scale":H,"shape3d.bottom.uv.rotation":H,"shape3d.bottom.uv.anchor":H,"shape3d.from.uv.offset":H,"shape3d.from.uv.scale":H,"shape3d.from.uv.rotation":H,"shape3d.from.uv.anchor":H,"shape3d.to.uv.offset":H,"shape3d.to.uv.scale":H,"shape3d.to.uv.rotation":H,"shape3d.to.uv.anchor":H,"shape3d.top.cap":H,"shape3d.bottom.cap":H,"shape3d.start.angle":0,"shape3d.sweep.angle":ok,"shape3d.point.epsilon":1e-6,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"shape3d.reflector":!1,"shape3d.reflector.color":"rgb(128,128,128)","shape3d.reflector.blur":0,"shape3d.reflector.blur.iterations":1,"shape3d.reflector.background":null,"shape3d.reflector.clip":.003,"shape3d.reflector.shadow":"scene","camera.type":"perspective","camera.aspect":1,"camera.fovy":H,"camera.ortho.width":H,"camera.near":H,"camera.far":H,"camera.background":0,"camera.renderSky":!0,"camera.renderShadowMap":!0,"camera.renderAxis":!1,"camera.renderGrid":!1,"camera.renderEdit":!1,"camera.onlySky":!1,"camera.skybox.blur":H,"skybox.blur.size":0,"skybox.blur.resolution":0,"texture.mipmap.max":H,"texture.filter":H,"texture.filter.min":H,"texture.filter.mag":H,"texture.wrap":H,"texture.flipY":!1,"points.image":"rect","points.color":"white","points.transparent":!1,"points.size":20,"points.opacity":1,"points.uv.scale":[1,1],"points.uv.offset":[0,0],"points.discard.selectable":!1,"all.light":!0,"all.visible":!0,"all.color":ol,"all.image":H,"all.blend":H,"all.opacity":H,"all.reverse.flip":!1,"all.reverse.color":Ec,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":H,"all.uv.offset":H,"all.uv.scale":H,"all.uv.rotation":H,"all.uv.anchor":H,"all.uv.union":H,"all.discard.selectable":!0,"all.material":H,mat:H,"left.mat":H,"right.mat":H,"top.mat":H,"bottom.mat":H,"front.mat":H,"back.mat":H,"edge.source.anchor.elevation":H,"edge.target.anchor.elevation":H,"edge.source.offset.elevation":0,"edge.target.offset.elevation":0,"3d.bone.visible":!1},!0);var _q,Cn=[0,0,0,0],of=function(a){return a instanceof Gs},zr=function(Z){return[Z.x,Z.e||0,Z.y]},Yr=function(i,I,X){for(var I=dh(I||0),p=I[0],A=I[1],V=I[2];X--;)i.push(p,A,V)},on=function(d,r,Z){for(var r=dh(r||0),G=r[0],i=r[1],o=r[2],g=r[3];Z--;)d.push(G,i,o,g)},ge=function(A,T,E){if(T)for(var i,N,k,s=T[0],O=T[1],u=T[2],G=T[4],q=T[5],h=T[6],w=T[8],v=T[9],j=T[10],r=T[12],F=T[13],n=T[14],D=E.length,d=0,d=0;D>d;d+=3)i=E[d],N=E[d+1],k=E[d+2],A.push(s*i+G*N+w*k+r,O*i+q*N+v*k+F,u*i+h*N+j*k+n);else Uh(A,E);return A},Yc=function(P,F,L){var Z=F.s("light.intensity"),J=dh(F.s(wr)),p=J[0],m=J[1],X=J[2];1!==Z&&(p*=Z,m*=Z,X*=Z);var U=F.s("light.disabled");P.push(p,m,X,U?1:0),L.c.push(p,m,X),L.g.push(U?-1:F.s("light.group")),L.e.push(U?1:0)},Bp=function(){var U=new ng,J=new re;return function(c,F){return U.copy(c).applyEuler(F.getEuler(J)),[U.x,U.y,U.z]}}(),vp=function(p,w){var v,U=ie.for(w),E=U.directUniforms(),W=p._lastLightUploadInfo={c:[],g:[],e:[]},D=p._headlightDirection;D&&3===D.length?v=D:"shadow"===D&&(v=p.shadowMap.getDirection()),v=v?ng.normalizeArray(p._transformDirectionToViewSpace(null,v)):[0,0,0],E.uHeadlightDirection=v,E.uHeadlightRange=p._headlightRange;var e=E.uHeadlightAmbientIntensity=p._headlightAmbientIntensity,o=p._headlightIntensity,C=dh(p._headlightColor);
1!==o&&(C=[C[0]*o,C[1]*o,C[2]*o]);var n;E.uHeadlightColor=W.headlightColor=[C[0],C[1],C[2],(n=p._headlightDisabled)?1:0],W.c.push(C[0],C[1],C[2]),W.g.push(n?-1:p._headlightGroup),W.e.push(n?1:0);var V=p._59O,R=p._spots,k=p._dirs,g=p._87I;if(V.length){var z=[],i=[],l=[];V.forEach(function(f){Yc(z,f,W),Uh(i,p._transformPointToViewSpace(f.p3())),l.push(f.s("light.range"))}),E.uPointColor=z,E.uPointRange=l,E.uPointPosition=i}if(R.length){var Y=[],Z=[],N=[],h=[],c=[],A=[];R.forEach(function(b){Yc(Y,b,W),Uh(Z,p._transformPointToViewSpace(b.p3())),b.s("light.rotation.enable")?Uh(c,p._transformDirectionToViewSpace(null,Bp([0,0,1],b))):Uh(c,p._transformDirectionToViewSpace(b.p3(),b.s("light.center"))),N.push(b.s("light.range")),h.push(t(b.s("light.angle")/2)),A.push(b.s("light.exponent"))}),E.uSpotColor=Y,E.uSpotRange=N,E.uSpotAngle=h,E.uSpotExponent=A,E.uSpotPosition=Z,E.uSpotDirection=c}if(k.length){var f=[],S=[];k.forEach(function(r){Yc(f,r,W),r.s("light.rotation.enable")?Uh(S,p._transformDirectionToViewSpace(null,Bp([0,0,1],r))):Uh(S,p._transformDirectionToViewSpace(r.p3()))}),E.uDirColor=f,E.uDirDirection=S}g.length&&g.forEach(function(z){Yc([],z,W)}),E._lastLightMask=nh,E._lastHeadlightAmbientIntensity=e},xc=function(n,Z,q,r){if(r===H&&(r=n._headlightAmbientIntensity),r!==Z._lastHeadlightAmbientIntensity&&(Z.uHeadlightAmbientIntensity=Z._lastHeadlightAmbientIntensity=r),q!==Z._lastLightMask){Z._lastLightMask=q;var E=n._lastLightUploadInfo;if(E){var o,S,P,$=E.g,O=E.e,p=$.length,K=new Array(p),e=!1;for(S=0;p>S;S++)o=$[S],P=0>o||o>=32?1:q&1<<o?0:1,K[S]=P,P!==O[S]&&(e=!0);if(e){E.e=O=K;var c=E.c;Z.uHeadlightColor=[c[0],c[1],c[2],O[0]];var t,T=n._59O,w=n._spots,d=n._dirs,V=3,f=1;if(p=T.length){for(S=0,t=[];p>S;S++)t.push(c[V++],c[V++],c[V++],O[f++]);Z.uPointColor=t}if(p=w.length){for(S=0,t=[];p>S;S++)t.push(c[V++],c[V++],c[V++],O[f++]);Z.uSpotColor=t}if(p=d.length){for(S=0,t=[];p>S;S++)t.push(c[V++],c[V++],c[V++],O[f++]);Z.uDirColor=t}}}}},Yg=function(f,I){return Math.max(f.getRotateMinPhi()+no,Math.min(f.getRotateMaxPhi()-no,I))},ec=function(){return.05+co()/2},Vc=function(T,R,Q,h){var B,b=T.getEye();return T.isOrtho()?(B=Go(T.getCenter(),b),B[0]+=h[0],B[1]+=h[1],B[2]+=h[2]):B=b,Qp(R,Q,h,B)},Qp=function(R,z,s,F){var _=he(R,z),L=Go(F,s,!0),N=he(L,z);if(A(N)<no)return C;var G=(_-he(s,z))/N;return[s[0]+L[0]*G,s[1]+L[1]*G,s[2]+L[2]*G]},Cc=function(F,u){return{x:2*F.x-u.x,y:2*F.y-u.y}},lm=function(V,y,Z,A){var e,E;if(!V)return e=Nn(y.y-Z.y,Z.x-y.x),{x:y.x+A*_(e),y:y.y+A*t(e)};if(!Z)return e=Nn(V.y-y.y,y.x-V.x),{x:y.x+A*_(e),y:y.y+A*t(e)};var w=Go([V.x,V.y,0],[y.x,y.y,0],!0),l=Go([Z.x,Z.y,0],[y.x,y.y,0],!0),S=-(w[0]+l[0])/2,x=-(w[1]+l[1])/2,T=Q(S*S+x*x);if(no>T)return e=Nn(V.y-y.y,y.x-V.x),{x:y.x+A*_(e),y:y.y+A*t(e)};var m=V.x-y.x,H=V.y-y.y,R=Z.x-y.x,n=Z.y-y.y,K=Q(m*m+H*H),W=Q(R*R+n*n);e=X(he(w,l))/2,E=w[1]*l[0]-w[0]*l[1]>0?-1:1,S/=T,x/=T;var p=A/_(e),i=h(K,W)/t(e);T=Math.min(p,i);var P={x:y.x+E*T*S,y:y.y+E*T*x};return Z.b&&p>W/t(e)&&(P.adjust=!0),P},zs=function(k){var d=k[1],u=k[2],g=k[3],R=k[6],X=k[7],U=k[11];k[1]=k[4],k[2]=k[8],k[3]=k[12],k[4]=d,k[6]=k[9],k[7]=k[13],k[8]=u,k[9]=R,k[11]=k[14],k[12]=g,k[13]=X,k[14]=U},_n=function(_){var S=_[0],K=_[1],D=_[2],w=_[3],g=_[4],f=_[5],F=_[6],y=_[7],G=_[8],H=_[9],P=_[10],M=_[11],W=_[12],E=_[13],J=_[14],d=_[15],Q=S*f-K*g,X=S*F-D*g,r=S*y-w*g,V=K*F-D*f,q=K*y-w*f,Z=D*y-w*F,h=G*E-H*W,j=G*J-P*W,b=G*d-M*W,p=H*J-P*E,A=H*d-M*E,I=P*d-M*J,v=Q*I-X*A+r*p+V*b-q*j+Z*h;return v?(v=1/v,_[0]=(f*I-F*A+y*p)*v,_[1]=(D*A-K*I-w*p)*v,_[2]=(E*Z-J*q+d*V)*v,_[3]=(P*q-H*Z-M*V)*v,_[4]=(F*b-g*I-y*j)*v,_[5]=(S*I-D*b+w*j)*v,_[6]=(J*r-W*Z-d*X)*v,_[7]=(G*Z-P*r+M*X)*v,_[8]=(g*A-f*b+y*h)*v,_[9]=(K*b-S*A-w*h)*v,_[10]=(W*q-E*r+d*Q)*v,_[11]=(H*r-G*q-M*Q)*v,_[12]=(f*j-g*p-F*h)*v,_[13]=(S*p-K*j+D*h)*v,_[14]=(E*X-W*V-J*Q)*v,_[15]=(G*V-H*X+P*Q)*v,void 0):C},Zm=function(l,V){if(V){var E=V[0],a=V[1],N=V[2];l[12]=l[0]*E+l[4]*a+l[8]*N+l[12],l[13]=l[1]*E+l[5]*a+l[9]*N+l[13],l[14]=l[2]*E+l[6]*a+l[10]*N+l[14],l[15]=l[3]*E+l[7]*a+l[11]*N+l[15]}},ag=function(s,E){if(E){var R=E[0],j=E[1],L=E[2];s[0]=s[0]*R,s[1]=s[1]*R,s[2]=s[2]*R,s[3]=s[3]*R,s[4]=s[4]*j,s[5]=s[5]*j,s[6]=s[6]*j,s[7]=s[7]*j,s[8]=s[8]*L,s[9]=s[9]*L,s[10]=s[10]*L,s[11]=s[11]*L}},Wo=function(s,b,C){var g=b[0],u=b[1],N=b[2],c=b[3],n=b[4],i=b[5],X=b[6],o=b[7],p=b[8],P=b[9],k=b[10],r=b[11],q=b[12],Q=b[13],y=b[14],v=b[15],W=C[0],I=C[1],K=C[2],J=C[3];return s[0]=W*g+I*n+K*p+J*q,s[1]=W*u+I*i+K*P+J*Q,s[2]=W*N+I*X+K*k+J*y,s[3]=W*c+I*o+K*r+J*v,W=C[4],I=C[5],K=C[6],J=C[7],s[4]=W*g+I*n+K*p+J*q,s[5]=W*u+I*i+K*P+J*Q,s[6]=W*N+I*X+K*k+J*y,s[7]=W*c+I*o+K*r+J*v,W=C[8],I=C[9],K=C[10],J=C[11],s[8]=W*g+I*n+K*p+J*q,s[9]=W*u+I*i+K*P+J*Q,s[10]=W*N+I*X+K*k+J*y,s[11]=W*c+I*o+K*r+J*v,W=C[12],I=C[13],K=C[14],J=C[15],s[12]=W*g+I*n+K*p+J*q,s[13]=W*u+I*i+K*P+J*Q,s[14]=W*N+I*X+K*k+J*y,s[15]=W*c+I*o+K*r+J*v,s},Qj=function(K,h,n,F){var s,Y,G,M,p,w,Z,g,O,b,z=h[0],y=h[1],v=h[2],q=F[0],L=F[1],T=F[2],I=n[0],S=n[1],N=n[2];return A(z-I)<no&&A(y-S)<no&&A(v-N)<no?dn(K):(Z=z-I,g=y-S,O=v-N,b=1/Q(Z*Z+g*g+O*O),Z*=b,g*=b,O*=b,s=L*O-T*g,Y=T*Z-q*O,G=q*g-L*Z,b=Q(s*s+Y*Y+G*G),b?(b=1/b,s*=b,Y*=b,G*=b):(s=0,Y=0,G=0),M=g*G-O*Y,p=O*s-Z*G,w=Z*Y-g*s,b=Q(M*M+p*p+w*w),b?(b=1/b,M*=b,p*=b,w*=b):(M=0,p=0,w=0),K[0]=s,K[1]=M,K[2]=Z,K[3]=0,K[4]=Y,K[5]=p,K[6]=g,K[7]=0,K[8]=G,K[9]=w,K[10]=O,K[11]=0,K[12]=-(s*z+Y*y+G*v),K[13]=-(M*z+p*y+w*v),K[14]=-(Z*z+g*y+O*v),K[15]=1,K)},cs=function(R,Q,x,b,A){var r=1/Ui(Q/2),U=1/(b-A);return R[0]=r/x,R[1]=0,R[2]=0,R[3]=0,R[4]=0,R[5]=r,R[6]=0,R[7]=0,R[8]=0,R[9]=0,R[10]=(A+b)*U,R[11]=-1,R[12]=0,R[13]=0,R[14]=2*A*b*U,R[15]=0,R},fm=function(x,b,m,F,X,K,N){var v=1/(b-m),M=1/(F-X),e=1/(K-N);return x[0]=-2*v,x[1]=0,x[2]=0,x[3]=0,x[4]=0,x[5]=-2*M,x[6]=0,x[7]=0,x[8]=0,x[9]=0,x[10]=2*e,x[11]=0,x[12]=(b+m)*v,x[13]=(X+F)*M,x[14]=(N+K)*e,x[15]=1,x},Cq=function(i,G){var j=G[0],O=G[1],U=G[2],Q=G[3],t=j*j+O*O+U*U+Q*Q,h=t?1/t:0;return i[0]=-j*h,i[1]=-O*h,i[2]=-U*h,i[3]=Q*h,i},oj=function(h,P){var S=P[0]+P[5]+P[10],W=0;return S>0?(W=2*Math.sqrt(S+1),h[3]=.25*W,h[0]=(P[6]-P[9])/W,h[1]=(P[8]-P[2])/W,h[2]=(P[1]-P[4])/W):P[0]>P[5]&P[0]>P[10]?(W=2*Math.sqrt(1+P[0]-P[5]-P[10]),h[3]=(P[6]-P[9])/W,h[0]=.25*W,h[1]=(P[1]+P[4])/W,h[2]=(P[8]+P[2])/W):P[5]>P[10]?(W=2*Math.sqrt(1+P[5]-P[0]-P[10]),h[3]=(P[8]-P[2])/W,h[0]=(P[1]+P[4])/W,h[1]=.25*W,h[2]=(P[6]+P[9])/W):(W=2*Math.sqrt(1+P[10]-P[0]-P[5]),h[3]=(P[1]-P[4])/W,h[0]=(P[8]+P[2])/W,h[1]=(P[6]+P[9])/W,h[2]=.25*W),h},Yq=function(g,w,W){var O=w[0],Z=w[1],P=w[2],h=w[3],f=O+O,D=Z+Z,G=P+P,k=O*f,d=O*D,n=O*G,l=Z*D,Q=Z*G,N=P*G,T=h*f,J=h*D,r=h*G;return g[0]=1-(l+N),g[1]=d+r,g[2]=n-J,g[3]=0,g[4]=d-r,g[5]=1-(k+N),g[6]=Q+T,g[7]=0,g[8]=n+J,g[9]=Q-T,g[10]=1-(k+l),g[11]=0,g[12]=W[0],g[13]=W[1],g[14]=W[2],g[15]=1,g},ph=function(I,i){if(I.isVREnabled()){var P=I.vr.getViewMatrix(i);if(P)return P}return I._camera?I._camera.getViewMatrix(i):Qj(i?i:Wp(),I._eye,I._center,I._up)},al=function(D,h){if(D.isVREnabled()){var w=D.vr.getProjectMatrix();if(w)return w}if(D._camera)return D._camera.getProjectMatrix();if(!h&&D._computedProjectMatrix)return Lc(D._computedProjectMatrix);var v=D.getAspect(),L=D._near,Y=D._far,n=Wp();if(D._ortho){var c=D._orthoWidth/2,E=c/v;fm(n,-c,c,-E,E,L,Y)}else cs(n,D._fovy,v,L,Y);return n},bs=function(S,i){if(!S)return C;var D=0,K=1,w=2,c=[],G=0,O=S.length,m=O/3;if(i){for(;O>G;G++)c[G]=0;for(G=0;G<i.length;G+=3){var Z=[],q=[],M=[];Z[D]=S[3*i[G+1]+D]-S[3*i[G]+D],Z[K]=S[3*i[G+1]+K]-S[3*i[G]+K],Z[w]=S[3*i[G+1]+w]-S[3*i[G]+w],q[D]=S[3*i[G+2]+D]-S[3*i[G+1]+D],q[K]=S[3*i[G+2]+K]-S[3*i[G+1]+K],q[w]=S[3*i[G+2]+w]-S[3*i[G+1]+w],M[D]=Z[K]*q[w]-Z[w]*q[K],M[K]=Z[w]*q[D]-Z[D]*q[w],M[w]=Z[D]*q[K]-Z[K]*q[D];for(var J=0;3>J;J++)c[3*i[G+J]+D]+=M[D],c[3*i[G+J]+K]+=M[K],c[3*i[G+J]+w]+=M[w]}}else for(G=0;m>G;G+=3){var Z=[],q=[],M=[];Z[D]=S[3*(G+1)+D]-S[3*G+D],Z[K]=S[3*(G+1)+K]-S[3*G+K],Z[w]=S[3*(G+1)+w]-S[3*G+w],q[D]=S[3*(G+2)+D]-S[3*(G+1)+D],q[K]=S[3*(G+2)+K]-S[3*(G+1)+K],q[w]=S[3*(G+2)+w]-S[3*(G+1)+w],M[D]=Z[K]*q[w]-Z[w]*q[K],M[K]=Z[w]*q[D]-Z[D]*q[w],M[w]=Z[D]*q[K]-Z[K]*q[D];for(var J=0;3>J;J++)c[3*(G+J)+D]=M[D],c[3*(G+J)+K]=M[K],c[3*(G+J)+w]=M[w]}for(G=0;O>G;G+=3){var E=[];E[D]=c[G+D],E[K]=c[G+K],E[w]=c[G+w];var g=Q(E[D]*E[D]+E[K]*E[K]+E[w]*E[w]);0===g&&(g=no),E[D]=E[D]/g,E[K]=E[K]/g,E[w]=E[w]/g,c[G+D]=E[D],c[G+K]=E[K],c[G+w]=E[w]}return new $n(c)},fj=function(s,M,_,Q,T){return Q||(Q=M.createTexture()),_&&(T?(T.image=_,s.createTexture(T,Q)):s.createTexture({image:_},Q)),Q},As=function(U,K,n){var t=new Uint8Array(n||4);return K=K||U.createTexture(),U.activeTexture(33984),io(U,K),vb(U,10241,9729),U.texImage2D(3553,0,6408,1,1,0,6408,5121,t),K},Ji=function(Z,j,H){var r=new Uint8Array(H||4);return j=j||Z.createTexture(),Z.activeTexture(33984),Z.bindTexture(34067,j),Z.texParameteri(34067,10240,9729),Z.texParameteri(34067,10241,9729),Z.texImage2D(34069,0,6408,1,1,0,6408,5121,r),Z.texImage2D(34070,0,6408,1,1,0,6408,5121,r),Z.texImage2D(34071,0,6408,1,1,0,6408,5121,r),Z.texImage2D(34072,0,6408,1,1,0,6408,5121,r),Z.texImage2D(34073,0,6408,1,1,0,6408,5121,r),Z.texImage2D(34074,0,6408,1,1,0,6408,5121,r),j},hk=function(w){return w.createBuffer()},io=function($,O){$.bindTexture(3553,O||$._emptyTexture)},vb=function(O,S,x){O.texParameteri(3553,S,x)},Wh=function(U,X){var W=ie.for(U).directState();W.polygonOffset.enabled=!0,W.polygonOffset.value=X},kr=function(l){var B=ie.for(l).directState();B.polygonOffset.enabled=!1},pk=function(X,y){if(y){var $=ie.for(X).directState();$.color.clear=dh(y)}},yk=function(C,z,M){if(M!==z._lastClipboxEnabled){var $=C._boxClipperGroups,f=C._boxClipperShape,N=$?$.length:0,A=new Array(N);if(M)for(var B=0;N>B;B++)A[B]=M&1<<$[B]?f[B]:0;z._lastClipboxEnabled=M,z.uClipperShape=A}},ch=yk,gs=function(i){var o=ie.for(i),$=o.directUniforms(),n=o.directAttribs();$.uFix=!0,n.aNormal=!1},In=function(Z){var c=ie.for(Z),X=c.directUniforms();X.uFix=!1},dq=function(I,Q,n,f,Y,u,W){var b=ie.for(I),t=b.directState(),A=b.directUniforms();I._picking||(Q?(A.uBlend=!0,A.uBlendColor=Q):A.uBlend=!1,A.uLight=A.uFog=n==C?!0:n,ah(f)&&1!==f&&(A.uPartOpacity=f),A.uReverseFlip=Y==C?!1:Y,A.uFixPickReverseColor=u||Ec),t.cullFace.enabled=W?!0:!1},zf=function(X){if(!X._picking){var y=ie.for(X),n=y.directUniforms();n.uPartOpacity=1}},Vr=function(){var r=new L.Math.Matrix2d,b=[1,0,0,0,1,0,0,0,0];return function(l,I,q,u,W,s,H,V,O,J){var h=ie.for(l),Q=h.directUniforms(),_=h.directAttribs();return I?(Q.uTexture=!0,Q.uDiscardSelectable=nn(q)?q:!0,_.aUv=Tr(l,u,W,C,2),J?(Q.uBlendTexture=!0,Q.uBlendSampler=J):(Q.uBlendTexture=!1,Q.uBlendSampler=l._emptyBlendTexture),Q.uSampler=I,Q.uUvMatrix=s||H||V||O?gl(V,s,H,O,r).toArray9():b,void 0):(Q.uSampler=l._emptyTexture,Q.uBlendSampler=l._emptyBlendTexture,void 0)}}(),nq=function(V,P){var f=ie.for(V),R=f.directUniforms(),s=f.directAttribs();V.activeTexture(33984),io(V,C),V.activeTexture(33985),io(V,C),P&&(s.aUv=!1,R.uTexture=!1,R.uSampler=V._emptyTexture,R.uBlendTexture=!1,R.uBlendSampler=V._emptyBlendTexture)},pi=function(J,g,l,e){var f=g.getBrightness(l),$=l.s("alphaTest"),j=ie.for(J),Q=j.directUniforms(),x=g._picking,K=!0;f!=C&&1!==f&&(Q.uBrightness=f),Q.uAlphaTest=$,Q.shadowReceive=!x&&l.s("shadow.receive"),Q.shadowCull=!x&&!!l.s("shadow.cull"),ch(g,Q,l.s("3d.clipbox")?Ie:l.s("3d.clipbox.mask"));var c=l.s("3d.clip.direction");if(c){var N=l.s("3d.clip.percentage");0===N&&(K=!1);var s=g.getData3dUI(l)._formatClipUniforms(c,N,l);Q.uClipPercent=s[1],Q.uClipDirection=s[0]}else Q.uClipDirection=0;if(J._blooming&&!l.s("bloom")&&(Q.blackout=!0),!x){if(g._flowObjects.length&&g.flowMap.resetDataFlowEnabld(l,Q),!e){var F=l.s("envmap");Q.uUseEnvMap=F?!0:!1,Q.roughness=l.s("roughness"),g._setEnvmapByProbeId(Q,l.s("envmap.probe"),F||.01),xc(g,Q,l.s("light.mask"),l.s("headlight.ambientIntensity")),l._flipSide&&(j.directState().cullFace.frontFace=2304)}Q.uFog=l.s("shape3d.light")!=C}return K},ar=function(J,s,Y,r){var m=ie.for(J),P=m.directUniforms(),E=Y.alphaTest;P.uAlphaTest=E===H?i.alphaTest:E;var f=s._picking;return P.shadowReceive=!f&&Y.shadowReceive!==!1,ch(s,P,Y.clipboxMask===H?nh:Y.clipboxMask),P.blackout=J._blooming&&!Y.bloom?!0:!1,f||(s._flowObjects.length&&s.flowMap.resetFlowUniform(Y.effectFlowMask===H?nh:Y.effectFlowMask,P),r||(Y.envmap!==H?(P.uUseEnvMap=!0,P.roughness=Y.roughness||0,s._setEnvmapByProbeId(P,Y.envmapProbe||0,Y.envmap)):(P.uUseEnvMap=!1,P.envMapIntensity=0),xc(s,P,Y.lightMask===H?nh:Y.lightMask,Y.headlightAmbientIntensity)),P.uFog=!0),!0},Bn=function(L,H,K,v,r){var Q=ie.for(L),k=Q.directUniforms(),j=Q.directAttribs();!H||bq||vg||L.lineWidth(H),K&&!L._picking&&(k.uFixPickReverseColor=K),v&&(j.aPosition=Tr(L,v,r,C))},qd=function(T,d,F,s){T&&(s&&(F*=s),T.calls++,T.vertices+=F,d==C||4===d?T.faces+=F/3:1===d?T.lines+=F/2:d===Db.POINTS?T.points+=F:5===d||6===d?T.faces+=F-2:3===d?T.lines+=F-1:2===d&&(T.lines+=F))},Uq=function(M,_,c,z,w){_q&&(z=M[_q]),w?M.drawArraysInstanced(z==C?4:z,_,c,w):M.drawArrays(z==C?4:z,_,c),qd(M._renderInfo,z,c,w)},Ij=function(z,D,d,e,J,E){_q&&(e=z[_q]),E?z.drawElementsInstanced(e==C?4:e,d,J==C?5123:J,D==C?0:2*D,E):z.drawElements(e==C?4:e,d,J==C?5123:J,D==C?0:2*D),qd(z._renderInfo,e,d,E)},Eo=function(H,r,h){var M=34962;return H.bindBuffer(M,r),h&&H.bufferData(M,h,35044),r},ai=function(Y,I,L,b,S){var I=Tr(Y,I,L,b,S);return I.instanced=!0,I},Tr=function(W,B,x,H,P){return x?Kl(W,34962,B,x):Eo(W,B,x,H,P)},ke=function(l,d,u){var X=34963;l.bindBuffer(X,d),u&&l.bufferData(X,u,35044)},mi=function(M,L,V){Kl(M,34963,L,V)},Kl=function(G,N,q,h){var $=h._bufId;$||($=h._bufId=L.Math.generateIncreasingID());var q,U=G._bufPool;if((q=U[$])&&q._buf)G.bindBuffer(N,q._buf);else{var k=hk(G);q=U[$]={_buf:k},G.bindBuffer(N,k),G.bufferData(N,h,35044);var w=5126;h instanceof Uint16Array?w=5123:h instanceof Int16Array?w=5122:h instanceof Uint32Array?w=5125:h instanceof Int32Array?w=5124:h instanceof Int8Array?w=5120:(h instanceof Uint8Array||h instanceof Uint8ClampedArray)&&(w=5121),k.glType=w}return q._fid=G._renderInfo.frame,q._buf},hp=function(S,z){z!=C&&z>=0&&S.enableVertexAttribArray(z)},mj=function(D,u){u!=C&&u>=0&&D.disableVertexAttribArray(u)},bf=function(C,x){var g=C.getGL(),q=ie.for(g),i=q.directUniforms();C._7O=C._8O.pop(),C._modelMatrix=C._modelMatrixStack.pop(),x&&(i.uModelViewMatrix=C._7O,C._6O=x,i.uNormalMatrix=x)},Vg=function(B,g){return g||(g=Wp()),Qc(g,B),_n(g),zs(g),g},Bh=function(T,F){var $=T.getGL(),R=T._7O,q=ie.for($),s=q.directUniforms();F?(T._8O.push(Lc(R)),T._modelMatrixStack.push(Lc(T._modelMatrix)),s.uModelMatrix=Wo(T._modelMatrix,T._modelMatrix,F),T._7O=Wo(R,R,F)):s.uModelMatrix=T._modelMatrix=Lc(ab),s.uModelViewMatrix=R,s.uNormalMatrix=Vg(R,T._6O)},rn={body:0,label:1,label2:2,note:3,note2:4,symbol:5},$h=10,ln=function(t,d,K,V,I,W){var G;if(K){var M=V._pickId;M||(M=V._pickId=d._pickIdUsed,d._pickIdUsed+=$h);var y,x=rn[I];if(null!=x)y=M+x;else{var p=V._pickExtraPartMap;p||(p=V._pickExtraPartMap={}),(y=p[I])||(y=p[I]=d._pickIdUsed++)}d[y]||(d[y]={data:V.data,part:I}),G=$s(y)}else G=Cn;if(!W){var m=ie.for(t),j=m.directUniforms();j.uFixPickReverseColor=G}return G},td=ln,hj=function(u,t,D){"target"!==D&&(D="source");var z="target"===D?t.getTargetAgent():t.getSourceAgent(),h="edge."+D+".";if(Tk(z)){var x=t.s(h+"anchor.x"),k=t.s(h+"anchor.elevation"),r=t.s(h+"anchor.y"),I=Pn(z,u.getMat(z)),Y=z.getAnchor3d(),m=Zg([(x===H?.5:x)-Y.x,(k===H?.5:k)-Y.y,(r===H?.5:r)-Y.z],I);return m[1]+=t.s(h+"offset.elevation"),m}var _=t.s(h+"index"),C=u.getData3dUI(z);if(!C.info||!C.info.list)return!1;if(_>=0){var P,O,b,B,a,M=C.info._lastPointsSegments,l=M.points,U=M.segments,T=-1,E=-1;for(b=0,B=U?U.length:l.length;B>b;b++){if(O=U?U.get(b):1,3===O)a=2;else if(4===O)a=3;else{if(5===O)continue;a=1}if(T+=a,E++,E===_){P=l.get(T);break}}return P||(P=l.get(l.length-1)),[P.x,(P.e||0)+t.s(h+"offset.elevation"),P.y]}var d=t.s(h+"percent")||.5;if(d=Math.max(0,Math.min(d,1)),!C||!C.getCache)return!1;var $=C.getCache(),B=$[$.length-1].length,M=u.getLineOffset(z,d*B),m=M.point;return[m.x,m.y+t.s(h+"offset.elevation"),m.z]},Mk=function(){var Q={center:function(E,V,u,Y,p){var k=-V[1]/2,W={x:-V[0]/2,y:k,width:V[0],height:V[1]},O=Zh(E,W,u);return[O.x+Y,-O.y-p,T.getPosition3dGap()]},front:function(d,e,n,$,u){var i=-e[1]/2,v={x:-e[0]/2,y:i,width:e[0],height:e[1]},j=Zh(d,v,n);return[j.x+$,-j.y-u,e[2]/2+T.getPosition3dGap()]},back:function(t,Q,f,C,Z){var F=-Q[0]/2,s=-Q[1]/2,o={x:F,y:s,width:Q[0],height:Q[1]},g=Zh(t,o,f);return[-g.x-C,-g.y-Z,-Q[2]/2-T.getPosition3dGap()]},left:function(p,X,O,l,j){var m=-X[1]/2,k={x:-X[2]/2,y:m,width:X[2],height:X[1]},f=Zh(p,k,O);return[-X[0]/2-T.getPosition3dGap(),-f.y-j,f.x+l]},right:function(G,Z,K,Q,u){var x=-Z[2]/2,V=-Z[1]/2,M={x:x,y:V,width:Z[2],height:Z[1]},b=Zh(G,M,K);return[Z[0]/2+T.getPosition3dGap(),-b.y-u,-b.x-Q]},top:function(i,R,c,x,V){var W={x:-R[0]/2,y:-R[2]/2,width:R[0],height:R[2]},L=Zh(i,W,c);return[L.x+x,R[1]/2+T.getPosition3dGap(),L.y+V]},bottom:function(e,N,p,B,f){var h=-N[2]/2,Z={x:-N[0]/2,y:h,width:N[0],height:N[2]},k=Zh(e,Z,p);return[k.x+B,-N[1]/2-T.getPosition3dGap(),-k.y-f]}};return function(F,W,I,$,B,l){return Q[$](F,W,I,B||0,l||0)}}(),zn=function(S,n,o,$,J,K,w,g,p,h){if(J&&(n[0]+=J[0],n[1]+=J[1],n[2]+=J[2]),Zm(S,o),g){var L=Wp();if(Ap(L,p,h),Zg(n,L),Zm(S,n),S.auto=g,S.pos=Zg([0,0,0],S),K){var u=S.mat2=Wp();Ap(u,K,w)}}else Ap(S,p,h),Zm(S,n),$===Ob?ki(S,-Qo):$===zb?ki(S,Qo):$===pc?Gf(S,-Qo):$===rq?Gf(S,Qo):$===cm&&ki(S,kl),Ap(S,K,w);return S},_d=function(Q,p){var h=p.auto,v=p.mat2,x=Q.gv;if(h){var j,o=Wp(),n=[0,0,0,0];j="string"==typeof h?[h.indexOf("x")<0?x._eye[0]:x._center[0],h.indexOf("y")<0?x._eye[1]:x._center[1],h.indexOf("z")<0?x._eye[2]:x._center[2]]:x._eye,oj(n,Qj(Wp(),j,x._center,x._up)),Yq(o,Cq(n,n),p.pos),v&&Wo(o,o,v),Bh(x,o)}else Bh(x,p)},Cs=function(X,Y,S,z,_){var L=X.s,n=X.gv,m=n.getGL(),h=n._buffer,c=n._1O,J=ie.for(m),E=J.directAttribs();fj(n,m,_f,c),_d(X,S),dq(m,L(Y+".blend"),L(Y+".light"),L(Y+".opacity"),L(Y+".reverse.flip"),L(Y+".reverse.color"),L(Y+".reverse.cull")),Vr(m,c,_,h.uv,Bm),E.aPosition=Tr(m,h.vs,z,C),E.aNormal=Tr(m,h.ns,ck,C),mi(m,h.is,Mp),Ij(m,0,Mp.length),nq(m,c),zf(m),bf(n)},Be=function(J,l,x){var s=J.gv,g=J.data,j=J[l]={blend:s.getBodyColor(g)||s.getFaceBlend(g,l),light:s.getFaceLight(g,l),color:s.getFaceColor(g,l),opacity:s.getFaceOpacity(g,l),transparent:s.getFaceTransparent(g,l),reverseFlip:s.getFaceReverseFlip(g,l),reverseColor:s.getFaceReverseColor(g,l),reverseCull:s.getFaceReverseCull(g,l),texture:s.getFaceImage(g,l),blendTexture:s.getFaceBlendImage(g,l),discardSelectable:s.getFaceDiscardSelectable(g,l),material:s.getFaceMaterial(g,l)};if("csg"!==l){j.uv=s.getFaceUv(g,l)||x&&x[l+"Uv"],j.uvScale=s.getFaceUvScale(g,l)||x&&x[l+"UvScale"],j.uvOffset=s.getFaceUvOffset(g,l)||x&&x[l+"UvOffset"],j.uvRotation=s.getFaceUvRotation(g,l)||x&&x[l+"uvRotation"],j.uvAnchor=s.getFaceUvAnchor(g,l)||x&&x[l+"uvAnchor"];var o=s.getFaceMat(g,l);if(o){var Y=Pn(g,o);g.appendAnchorMatrix3d(Y),j.mat=Y}}return j},eq=function(e,I,x,$,S){var A=e[$];if(A){var L=e.data,s=e.gv;if(!s._picking&&A.material){var O={mesh:{vs:A.vs,ns:A.ns,uv:A.tuv},mat:A.material};s._prefabRenderer.render(I,O,L)}else{if(!S(A.transparent))return;var B=s._buffer,V=s.getTexture(A.texture,L,$),r=s.getTexture(A.blendTexture,L),Q=ie.for(I),u=Q.directUniforms(),Z=Q.directAttribs();Vr(I,V,A.discardSelectable,B.uv,A.tuv,A.uvOffset,A.uvScale,A.uvRotation,A.uvAnchor,r),dq(I,A.blend,A.light,A.opacity,A.reverseFlip,A.reverseColor,A.reverseCull),A.cs&&!s._batchColorDisabled?(u.uBatchColor=!0,Z.aBatchColor=Tr(I,B.batchColor,A.cs,x.aBatchColor,4)):u.uDiffuse=A.color||i["color.empty"],Z.aPosition=Tr(I,B.vs,A.vs,C),Z.aNormal=Tr(I,B.ns,A.ns,C),Uq(I,0,A.vs.length/3),A.cs&&!s._batchColorDisabled&&(u.uBatchColor=!1,mj(I,x.aBatchColor)),zf(I),nq(I,V)}}},vf=function(B,H,L){if(Tl(B))B.forEach(function(k){vf(k,H,L)});else if(jm(B))vf(ir(H,B),H,L);else if(oc(B))if(B.model3d){var U,K,v,X;T.traverse(B,function(J,S){U=J.position,K=J.scale,v=J.quaternion,v||(v=J.euler,v&&(X||(X=[0,0,0]),v=Of.eulerArrayToQuaternionArray(v,X)));var o=J._matrixWorld;o||(o=J._matrixWorld=new kc),o.composeFromArray(U,v,K),S&&o.premultiply(S._matrixWorld),J.mesh&&L.push({matrix:o,mesh:J.mesh})},null,"comps")}else B.shape3d?vf(B.shape3d,H,L):L.push({mesh:B});else L.push({mesh:B})},gl=function(){var b=new Of.Matrix2d;return function(h,y,Y,E,p){return p||(p=b),p.identity(),E&&p.translate(-E[0],-E[1]),Y&&p.scale(Y[0],Y[1]),h&&p.rotate(h),E&&p.translate(E[0],E[1]),y&&p.translate(y[0],y[1]),p}}(),_e=function(x,w,t,T,P,K){var o,Y,N,m,e,L,b,p,O,H,u,z=[T-w,P-t],v=x?x.length:0;for(N=0;v>N;N++){for(m=2,o=x[N],e=o[0],L=o[1];m+1<o.length;){if(b=o[m],p=o[m+1],Y=Wl(w,t,T,P,e,L,b,p,!0)){O=[b-e,p-L],H=mp(O),O[0]/=H,O[1]/=H,H=he(z,O),H=H>0?K:-K,u=[O[0]*H,O[1]*H];break}e=b,L=p,m+=2}if(u)break}if(u)for(T=w+u[0],P=t+u[1],N=0;v>N;N++)for(m=2,o=x[N],e=o[0],L=o[1];m+1<o.length;){if(b=o[m],p=o[m+1],Y=Wl(w,t,T,P,e,L,b,p,!0))return[0,0];e=b,L=p,m+=2}return u?u:[T-w,P-t]},yp=function(O){return"nearest"===O?9728:"linear"===O?9729:O},jg=L.graph3d={WebGLConstants:Db},Bb=function(k,R,I){Po(s+".graph3d."+k,R,I)},en="~!<yfusfw!+!yjsubNudfkpsQv!>!opjujtpQ`mh!?zepc/tw/qbNxpmg=!fevmdoj$!?zepc/tw/qbNxpebit=!fevmdoj$!gjeof$!~!<fdobutjEfojMb!>!fdobutjEfojMw!|!*itbEv)!gj!ITBE!gfegj$!gjeof$!~!<ttfouihjsCidubCb!>!ttfouihjsCidubCw!|!*ttfouihjsCidubCv)!gj!TTFOUIHJSCIDUBC!gfegj$!gjeof$!~!<eofmCidubCb!>!eofmCidubCw!|!*eofmCidubCv)!gj!EOFMCIDUBC!gfegj$!gjeof$!~!<spmpDidubCb!>!spmpDidubCw!|!*spmpDidubCv)!gj!SPMPDIDUBC!gfegj$!gjeof$!~!<**1/2!-wVb)4dfw!+!yjsubNwVv)3dfw!>!wVw!|!*fsvuyfUv)!gj!ftmf$!<*y/wVb!-**1/2!-wVb)4dfw!+!yjsubNwVv)3dfw)4dfw!>!wVw!QJMD`WV!gfegj$!<*efnspgtobsu!+!yjsubNmfepNv)4dfw!>!opjujtpQemspXw!<*yfusfw)4dfw!>!opjujtpQwNw!gjeof$!<**1/2!-mbnspOudfkcp)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!ftmf$!<**1/2!-mbnspOudfkcp)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!ftmf!~!<**1/2!-mbnspOw!+!n)5dfw!+!yjsubNmbnspOv)4dfw!>!mbnspOw!<**^3]n!-^3]n)upe!-*^2]n!-^2]n)upe!-*^1]n!-^1]n)upe)4dfw!0!mbnspOudfkcp!>!mbnspOw!<*!efdobutoJyjsubNb!)4ubn!>!n!4ubn!|!*fdobutoJftVv)!gj!FDOBUTOJIDUBC!gfegj$!<efnspgtobsu!+!yjsubNxfjWmfepNv!>!yfusfw!5dfw!gjeof$!~!<efnspgtobsu!+!efdobutoJyjsubNb!>!efnspgtobsu!|!*fdobutoJftVv)!gj!FDOBUTOJIDUBC!gfegj$!<*mbnspOb)4dfw!>!mbnspOudfkcp!4dfw!<*opjujtpQb)4dfw!>!opjujtpQmbdpMw!<*1/2!-opjujtpQb)5dfw!>!efnspgtobsu!5dfw!|!*ejpw)ojbn!ejpw!?ebfi/tw/qbNxpmg=!fevmdoj$!?ebfi/tw/qbNxpebit=!fevmdoj$!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw!<fdobutjEfojMb!ubpmg!fuvcjsuub!<itbEv!mppc!nspgjov!ITBE!gfegj$!gjeof$!<^TUIHJM`UPQT`NVO]opjudfsjEupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]opjujtpQupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]spmpDupqTv!5dfw!nspgjov!1!?!TUIHJM`UPQT`NVO!gj$!gjeof$!<^TUIHJM`UOJPQ`NVO]opjujtpQuojpQv!4dfw!nspgjov!<^TUIHJM`UOJPQ`NVO]spmpDuojpQv!5dfw!nspgjov!1!?!TUIHJM`UOJPQ`NVO!gj$!gjeof$!<^TUIHJM`SJE`NVO]opjudfsjEsjEv!4dfw!nspgjov!<^TUIHJM`SJE`NVO]spmpDsjEv!5dfw!nspgjov!1!?!TUIHJM`SJE`NVO!gj$!<opjujtpQmbdpMw!4dfw!hojzsbw!<opjujtpQemspXw!4dfw!hojzsbw!<opjujtpQwNw!4dfw!hojzsbw!<mbnspOw!4dfw!hojzsbw!<yjGv!mppc!nspgjov!gjeof$!?ebfi/tw/hojdobutoj=!fevmdoj$!HOJDOBUTOJ`FTV!fojgfe$!<fdobutoJftVv!mppc!nspgjov!FDOBUTOJIDUBC!gfegj$!gjeof$!<wVw!3dfw!hojzsbw!ftmf$!<wVw!4dfw!hojzsbw!QJMD`WV!gfegj$!gjeof$!<eofmCidubCw!4dfw!hojzsbw!<eofmCidubCb!4dfw!fuvcjsuub!<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw!<ttfouihjsCidubCb!ubpmg!fuvcjsuub!<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!gjeof$!<spmpDidubCw!5dfw!hojzsbw!<spmpDidubCb!5dfw!fuvcjsuub!<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<wVb!3dfw!fuvcjsuub!<opjujtpQb!4dfw!fuvcjsuub!<mbnspOb!4dfw!fuvcjsuub!<yjsubNmbnspOv!5ubn!nspgjov!<yjsubNxfjWmfepNv!5ubn!nspgjov!<yjsubNmfepNv!5ubn!nspgjov!<yjsubNxfjWv!5ubn!nspgjov!<yjsubNudfkpsQv!5ubn!nspgjov!<yjsubNwVv!4ubn!nspgjov!<fsvuyfUeofmCv!mppc!nspgjov!<fsvuyfUv!mppc!nspgjov!YJGFSQ$!00^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",er="~!<*1/2!;!x/eJ!@!uofsbqtobsUv!-{zy/eJ)5dfw!>!spmpDhbsG`mh!~!<spmpDsfmqnbTwv!>+!eJ!<*zy/wVw!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw!|!*fsvuyfUeofmCv)!gj!gjeof$!~!<ttfouihjsCidubCw!>+!chs/eJ!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~!<ttfouihjsCv!>+!chs/eJ!|*1/2!>a!ttfouihjsCv)gj!?zepc/tg/hpg=!fevmdoj$!~!~!<zujdbqPusbQv!>+!b/eJ!|*1/2!>a!zujdbqPusbQv)gj!~!gjeof$!~!<zujtofuoJqbNwof!+!{zy/spmpDwof!>,!chs/eJ!gjeof$!<*spmpDwof)sbfojMpUmfyfUqbNwof!>!spmpDwof!<**{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv)fcvDfsvuyfu!>!spmpDwof!5dfw!ftmf$!<**ttfoihvps!-*{z/dfWudfmgfs!-y/dfWudfmgfs)4dfw!-qbNwoFv)WVfcvDfsvuyfu)CHStpUsbfojM!>!spmpDwof!5dfw!WV`FCVD`FQZU`QBNWOF!gfegj$!gjeof$!<*mbnspOemspx!-yfusfWpUbsfnbd)udfmgfs!>!dfWudfmgfs!4dfw!ftmf$!<***mbnspOemspx!-yfusfWpUbsfnbd)udfmgfs!-ubvRqbnwoFv)spudfWfubups)f{jmbnspo!>!dfWudfmgfs!4dfw!FUBUPS`QBNWOF!gfegj$!<*yjsubNxfjWv!-O)opjudfsjEnspgtobsUftsfwoj!>!mbnspOemspx!4dfw!<*opjujtpQbsfnbDv!.!opjujtpQemspXw)f{jmbnspo!>!yfusfWpUbsfnbd!4dfw!|*qbNwoFftVv)!gj!QBNWOF`FTV!gfegj$!gjeof$!~!~!~!~!<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ!<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt!|*^j]fmhoBupqTv!?!udfggFupqt)gj!<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg!<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw!|*1/1!?!fhobSm)!gj!~!<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm!|*1/1!?!^j]fhobSupqTv)!gj!<1/2!>!fhobSm!ubpmg!<^j]opjujtpQupqTv!.!opjujtpQwNw!>!spudfWm!4dfw!|*1/1!>>!x/^j]spmpDupqTv)gj!|!*,,j!<TUIHJM`UPQT`NVO!=!j!<1>j!uoj)spg!1!?!TUIHJM`UPQT`NVO!gj$!gjeof$!~!~!~!<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ!|*1/1!?!fhobSm)!gj!~!<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm!|*1/1!?!^j]fhobSuojpQv)!gj!<1/2!>!fhobSm!ubpmg!<^j]opjujtpQuojpQv!.!opjujtpQwNw!>!spudfWm!4dfw!|*1/1!>>!x/^j]spmpDuojpQv)gj!|!*,,j!<TUIHJM`UOJPQ`NVO!=!j!<1>j!uoj)spg!1!?!TUIHJM`UOJPQ`NVO!gj$!gjeof$!~!~!<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ!|*1/1!>>!x/^j]spmpDsjEv)gj!|!*,,j!<TUIHJM`SJE`NVO!=!j!<1>j!uoj)spg!1!?!TUIHJM`SJE`NVO!gj$!~!<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ!gjeof$!~!<fvmbWxpebit!+!zujtofuoJxpebit!.!1/2!>+!nsfUusfcnbm!~!<osvufs!<esbdtje!|!*1/1!>>!fvmbWxpebit!%%!mmvDxpebit)!gj!<*esppDxpebit!-tvjebSxpebit!-tbjCxpebit!-f{jTxpebit!-qbNxpebit)xpebiTufh!.!1/2!>!fvmbWxpebit!ubpmg!|!*fwjfdfSxpebit)!gj!QBNXPEBIT`FTV!gfegj$!~!<*1/2!-fhobSuihjmebfIv0*opjujtpQwNw)iuhofm)ojn!.!1/2!>+!nsfUusfcnbm!|*1/1!?!fhobSuihjmebfIv)gj!<*1/1!-zujtofuoJuofjcnBuihjmebfIv!,!*zujtofuoJuofjcnBuihjmebfIv!.!1/2)!+!nsfUusfcnbm)ybn!>!nsfUusfcnbm!<*opjudfsjEuihjmebfIv.!-O)upe!>!nsfUusfcnbm!ftmf!<*M.!-O)upe!>!nsfUusfcnbm!*1/1!>>!{/opjudfsjEuihjmebfIv!%%!1/1!>>!z/opjudfsjEuihjmebfIv!%%!1/1!>>!y/opjudfsjEuihjmebfIv)!gj!<nsfUusfcnbm!ubpmg!|*1/1!>>!x/spmpDuihjmebfIv)gj!?zepc/tg/qbNxpmg=!fevmdoj$!|!*uihjMv)!gj!~!gjeof$!~!<spmpDeofmCv!>+!eJ!|*eofmCv)gj!ftmf$!~!<spmpDeofmCv!>+!eJ!|*eofmCv)gj!ftmf!~!<eofmCidubCw!>+!chs/eJ!|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~!~!<esbdtje!|*1/1!>>!x/eJ)gj!gjeof$!<ftvggjEv!>!eJ!ftmf$!~!<ftvggjEv!>!eJ!|ftmf~!<spmpDidubCw!>!eJ!|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|!ftmf!~!<spmpDwv!>!eJ!|*fsvuyfUv)gj!|!ftmf!~!<spmpDftsfwfSldjQyjGv!>!eJ!|*qjmGftsfwfSva!%%!ldbCtj)gj!~!<O.!>!O!|*ldbCtj)gj!<fvsu!;!ftmbg!@!hojdbGuopsG`mh!>!ldbCtj!mppc!<F.!>!M!4dfw!<*opjujtpQwNw.)f{jmbnspo!>!F!4dfw!<*mbnspOw)f{jmbnspo!>!O!4dfw!|!ftmf!~!gjeof$!~!~!<ftvggjEv!>!eJ!|ftmf!~!<esbdtje!|*1/1!>>!x/ftvggjEv)gj!|!*fdobutjEitbEv!?!*fdobutjEqbHitbEv!-fdobutjEfojMw)epn!%%!itbEv)!gj!ITBE!gfegj$!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~!<spmpDftsfwfSldjQyjGv!>!eJ!|!ftmf!~!<spmpDidubCw!>!eJ!|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|!*yjGv)!gj!<eJ!5dfw!~!<osvufs!<*1/2!-1/1!-1/1!-1/1)5dfw!>!spmpDhbsG`mh!|!*uvpldbmc)!gj!?zepc/tg/ypcqjmd=!fevmdoj$!?zepc/tg/opjudfsjEqjmd=!fevmdoj$!~!~!~!<esbdtje!|!*utfUbiqmBv!>=!b/spmpDwv)!gj!|!ftmf!~!~!<esbdtje!|!*1/1!>>!b/spmpDwv)!gj!|!*uofsbqtobsUv)!gj!gjeof$!<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv!ftmf$!<*zy/wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv!QJMD`WV!gfegj$!|!*fsvuyfUv)!gj!<spmpDwv!5dfw!|!*ejpw)ojbn!ejpw!<uvpldbmc!mppc!nspgjov!?ebfi/tg/qbNxpmg=!fevmdoj$!gjeof$!?TGopjudfmgfSwoFfcvd=!fevmdoj$!~!<*{zy/*yjsubn!+!*1/1!-sje)5dfw))f{jmbnspo!osvufs!|!*yjsubn!5ubn!oj!-sje!4dfw!oj)opjudfsjEnspgtobsUftsfwoj!4dfw!gjeof$!~!<*x/fvmbw!-**SPUDBG`BNNBH)4dfw!-{zy/fvmbw)xpq)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!ftmf$!~<*!b/fvmbw!-*!*!*!*!9142411/1!)4dfw!-chs/fvmbw!)mbvrFobiUttfm!)4dfw!-3:/32!+!chs/fvmbw!-*!661/1!)4dfw!.!661/2!+!*!*!77725/1!)4dfw!-chs/fvmbw!)xpq!)yjn!)5dfw!osvufs!|!*!fvmbw!5dfw!oj!)CHStpUsbfojM!5dfw!~!<*b/fvmbw!-****65151/1)4dfw!-chs/fvmbw)mbvrFobiUttfm)4dfw!-9194::4881/1!+!chs/fvmbw!-**5/3)4dfw!-*5218342361/1)4dfw!,!79:387985:/1!+!chs/fvmbw)xpq)yjn)5dfw!osvufs!|!*fvmbw!5dfw)sbfojMpUmfyfUqbNwof!5dfw!WV`FCVD`FQZU`QBNWOF!gfegj$!gjeof$!~!<{zy/*!*x/ubvr!-{/ubvr.!-z/ubvr.!-y/ubvr.)5dfw!-wr!)ubvRumvn!osvufs!<*!*1/1!-dfw)5dfw!-ubvr!)ubvRumvn!>!wr!5dfw!|!*!dfw!4dfw!-ubvr!5dfw!)spudfWfubups!4dfw!~!<*!{/3r!+!{/2r!.!z/3r!+!z/2r!.!y/3r!+!y/2r!.!x/3r!+!x/2r!-z/3r!+!y/2r!.!y/3r!+!z/2r!,!x/3r!+!{/2r!,!{/3r!+!x/2r!-y/3r!+!{/2r!.!{/3r!+!y/2r!,!x/3r!+!z/2r!,!z/3r!+!x/2r!-{/3r!+!z/2r!.!z/3r!+!{/2r!,!x/3r!+!y/2r!,!y/3r!+!x/2r)5dfw!osvufs!|!*3r!5dfw!-2r!5dfw)ubvRumvn!5dfw!<ubvRqbnwoFv!5dfw!nspgjov!FUBUPS`QBNWOF!gfegj$!<1/3!>!SPUDBG`BNNBH!ubpmg!utopd!QBNWOF`FTV!gfegj$!?ebfi/tg/qbNxpebit=!fevmdoj$!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw!<fdobutjEqbHitbEv!ubpmg!nspgjov!<fdobutjEitbEv!ubpmg!nspgjov!<itbEv!mppc!nspgjov!ITBE!gfegj$!?ebfi/tg/hpg=!fevmdoj$!?ebfi/tg/ypcqjmd=!fevmdoj$!?hojldbq=!fevmdoj$!gjeof$!<^TUIHJM`UPQT`NVO]opjudfsjEupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]opjujtpQupqTv!4dfw!nspgjov!<^TUIHJM`UPQT`NVO]fhobSupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]fmhoBupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]uofopqyFupqTv!ubpmg!nspgjov!<^TUIHJM`UPQT`NVO]spmpDupqTv!5dfw!nspgjov!1!?!TUIHJM`UPQT`NVO!gj$!gjeof$!<^TUIHJM`UOJPQ`NVO]opjujtpQuojpQv!4dfw!nspgjov!<^TUIHJM`UOJPQ`NVO]fhobSuojpQv!ubpmg!nspgjov!<^TUIHJM`UOJPQ`NVO]spmpDuojpQv!5dfw!nspgjov!1!?!TUIHJM`UOJPQ`NVO!gj$!gjeof$!<^TUIHJM`SJE`NVO]opjudfsjEsjEv!4dfw!nspgjov!<^TUIHJM`SJE`NVO]spmpDsjEv!5dfw!nspgjov!1!?!TUIHJM`SJE`NVO!gj$!gjeof$!<eofmCidubCw!4dfw!hojzsbw!<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw!<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!gjeof$!<spmpDidubCw!5dfw!hojzsbw!<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<opjudfsjEuihjmebfIv!4dfw!nspgjov!<spmpDuihjmebfIv!5dfw!nspgjov!<zujtofuoJuofjcnBuihjmebfIv!ubpmg!nspgjov!<fhobSuihjmebfIv!ubpmg!nspgjov!<opjujtpQemspXw!4dfw!hojzsbw!<opjujtpQbsfnbDv!4dfw!nspgjov!<yjsubNxfjWv!5ubn!nspgjov!gjeof$!gjeof$!<qbNwoFv!fcvDsfmqnbt!nspgjov!ftmf$!<ttfoihvps!ubpmg!nspgjov!<qbNwoFv!E3sfmqnbt!nspgjov!WV`FCVD`FQZU`QBNWOF!gfegj$!<zujtofuoJqbNwof!ubpmg!nspgjov!<qbNwoFftVv!mppc!nspgjov!QBNWOF`FTV!gfegj$!<opjujtpQmbdpMw!4dfw!hojzsbw!<opjujtpQwNw!4dfw!hojzsbw!<mbnspOw!4dfw!hojzsbw!<ftvggjEv!5dfw!nspgjov!<zujdbqPusbQv!ubpmg!nspgjov!<ttfouihjsCv!ubpmg!nspgjov!<uihjMv!mppc!nspgjov!<spmpDeofmCv!5dfw!nspgjov!<eofmCv!mppc!nspgjov!?ebfi/tg/opjudfsjEqjmd=!fevmdoj$!OPJUDFSJE`QJMD!fojgfe$!<sfmqnbTeofmCv!E3sfmqnbt!nspgjov!<sfmqnbTv!E3sfmqnbt!nspgjov!gjeof$!<wVw!3dfw!hojzsbw!ftmf$!<wVw!4dfw!hojzsbw!QJMD`WV!gfegj$!<fsvuyfUeofmCv!mppc!nspgjov!<fsvuyfUv!mppc!nspgjov!<uofsbqtobsUv!mppc!nspgjov!<utfUbiqmBv!ubpmg!nspgjov!<spmpDftsfwfSldjQyjGv!5dfw!nspgjov!<qjmGftsfwfSv!mppc!nspgjov!<yjGv!mppc!nspgjov!<fmcbudfmfTesbdtjEv!mppc!nspgjov!YJGFSQ$!00";yd(T,{setBatchInfo:function(b,B){Hn[b]=B},getBatchInfo:function(G){return Hn[G]},getBatchInfoMap:function(){return Hn},setBatchInfoMap:function(w){Hn=w}},!0);var Ig=[1,1,1],Fi=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],So=[1,0,0,0,0,1,0,1,1,1,1,0],wm=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],el=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],Mh=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Xh=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],$g=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],op=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],ll=function(j,E){var t=j._40Q;
t.each(function(I){I.ivBatch(E)})},gp=function(w,V,A,H){var Y=A._id,B=V[Y];if(B){var W=B.batch,I=w[W],a=I.ds,E=B.index;if(I.invalidate=!0,delete V[Y],a.splice(E,1),Wf(a)){var j=H.getBatchInfo(W)||gc;return j.keepData!==!1&&I.ms&&I.ms.length?(I.ms=[],I.ics&&(I.ics=[]),I.ps&&(I.ps=[]),void 0):(delete w[W],void 0)}for(var L=E,K=B.begin,G=B.size;E<a.length;E++)B=V[a[E]._id],B.index--,B.begin-=G;if(I.ms&&I.ms.length)return I.ms.splice(16*L,16),I.ics&&I.ics.splice(4*L,4),I.ps&&I.ps.splice(4*L,4),void 0;var T=3*K,y=3*G,C=4*K,z=4*G,s=I.vs,k=I.ps,l=I.uv,f=I.cs,q=I.bs,Z=I.rs,_=I.ns,F=I.ls;s.splice(T,y),k.splice(C,z),l&&l.splice(2*K,2*G),f&&f.splice(C,z),q&&q.splice(T,y),Z&&Z.splice(K,G),_&&_.splice(T,y),F&&F.splice(K,G)}},sr=function(E,I,$,q,v){if(!q)return C;var H=I[q];if(!H){var x=v.getBatchInfo(q)||gc,W=x.image||x.material?[]:C;H=I[q]={vs:[],ns:[],uv:W,cs:W?C:x.color?C:[],bs:x.blend?[]:C,ps:[],rs:x.brightness?[]:C,ds:[],ms:x.instanced?[]:C,ics:W?C:x.color||!x.instanced?C:[]}}return H.invalidate=!0,E[$._id]={index:H.ds.length,begin:H.vs.length/3,batch:q},H.ds.push($),H},Yd=function(Q,s){return s!=C&&1!==s?[Q[0]*s,Q[1]*s,Q[2]*s,Q[3]]:Q},$o=function(_){var C=_.shapeModel;C||(C=ir(_)),C&&(C._ctlineModel=[],C._lineModel=H)},wb=function(){var s;return function(y,E,P){var m=y.getData3dUI(E),n=m.shapeModel;if(n||(n=ir(m)),n||!m.shapeName){var I,C=E.s("wf.combineTriangle");if(P.geometry){if(!n&&(E instanceof L.Node&&!(E instanceof L.Shape)?(s||(s={vs:Md,is:Xn,uv:bc}),n=s):n=[m.left,m.front,m.right,m.back,m.top,m.bottom],!n))return H;if(C){var A=E.s("wf.normEpsilon");isNaN(A)&&(A=2),C=0|Math.min(3,Math.max(1,isNaN(C)?1:C)),I=ug[C-1](n,m,180/(Math.PI*A))}else I=Ln(n,m);if(!I||0===I.length)return}else if(I=P.short?sb:kd,E.s("wf.boundingBox")){var h=m.getBoundingBox(!0);if(h){var c=(new kc).scale(h.max.clone().sub(h.min)).setPosition(h.max.clone().add(h.min).divideScalar(2)).toArray();I=ge([],c,I)}}var g,V,o,K=y.getBrightness(E),r=E.s("bloom"),N=E.s("3d.reflectable"),W=dh(P.color||"white"),J=W[3]<1,F=Math.ceil(P.width)||1,S=E.s("3d.clipbox")?Ie:E.s("3d.clipbox.mask"),B=E.s("wf.fog"),G=E.getRenderLayer(),p=y._40Q.get(G),j=E.s("wf.material"),Q=p.wireframeIndexMap,k=p.wireframeModelMap,$=E.s("batch"),q=E.s("3d.clip.direction");if(j||q){if(q){if(V=E.s("3d.clip.percentage"),0===V)return;o=m._formatClipUniforms(q,V,E)}g="_"+E._id}else g=$?(J?"T":"O")+$:(J?"T":"O")+(r?"_1":"_0")+(N?"1_":"0_")+S+"_"+F+(B?"1_":"0_");var x=k[g];x||(x=k[g]={vs:[],cs:[],ps:[],ds:[],T:J,B:r,clipboxMask:S,reflectable:!!N,W:F,batch:$,fog:B}),j&&(x.material=j),x.invalidate=!0;var i=x.vs,w=x.cs,l=x.ds,O=Q[E._id]={index:l.length,begin:i.length/3,batch:g};l.push(E);var Y,D=m.mat;P.geometry&&E instanceof L.Shape&&(T.extractShapeTranslation||T.extractPolylineTranslation||T.extractVerticesTranslation)&&(Y=m._vsTranslation)&&D&&(D=(new Of.Matrix4).fromArray(D).multiply(Y).toArray()),E instanceof L.Edge||!(!D||!P.geometry&&E instanceof L.Shape)||(D=Pn(E,P.mat),E.appendAnchorMatrix3d(D)),o?(x.mat=Lc(D),x.clipDirection=o[0],x.clipPercent=o[1],ge(i,null,I)):ge(i,D,I);var u=O.size=i.length/3-O.begin;on(w,Yd(W,K),u)}}}(),wp=function(k,i,h,W,c,q,N,u,e){var x=k.getBrightness(i);x==C&&(x=1);var M=Yd(dh(W),x),Y=M[3]<1;q=Math.ceil(q)||1;var T=i.s("3d.clipbox")?Ie:i.s("3d.clipbox.mask"),X=(Y?"T":"O")+q+"_"+T;if(N){var A=N[0],z=(N[1]||A)+A;X+="-"+A+"-"+z,e&&(X+="-"+Nm(e)+"-"+x,e=Yd(dh(e),x))}var d=i.getRenderLayer(),f=k._40Q.get(d),_=f.polylineIndexMap,Z=f.polylineModelMap,o=Z[X];o||(o=Z[X]={vs:[],cs:[],ps:[],ds:[],ls:N?[]:C,T:Y,clipboxMask:T,W:q},N&&(o.D=A,o.G=z,o.A=e)),o.invalidate=!0;var v,Q=o.vs,D=o.cs,g=o.ds,B=o.ls,U=_[i._id]={index:g.length,begin:Q.length/3,batch:X};g.push(i);var E;!(E=k.getData3dUI(i).mat)&&i instanceof L.Polyline&&(E=Pn(i),i.appendAnchorMatrix3d(E)),ge(Q,E,h);var b,p=U.size=Q.length/3-U.begin,G=h.length,l=0,J=[];if(N||c)for(v=0;G>v;v+=6)b=mp([h[v],h[v+1],h[v+2]],[h[v+3],h[v+4],h[v+5]]),J.push(b),l+=b;if(l&&c){var F,K=Yd(dh(c),x),S=[K[0]-M[0],K[1]-M[1],K[2]-M[2],K[3]-M[3]],m=0;for(v=0;G>v;v+=6)F=m/l,on(D,[M[0]+S[0]*F,M[1]+S[1]*F,M[2]+S[2]*F,M[3]+S[3]*F],1),m+=J[v/6],F=m/l,on(D,[M[0]+S[0]*F,M[1]+S[1]*F,M[2]+S[2]*F,M[3]+S[3]*F],1)}else on(D,M,p);if(N)for(m=u||0,v=0;G>v;v+=6)B.push(m),m+=J[v/6],B.push(m)},Oe=function(M,R,k){if(R){var h=k[R.batch],r=h.ps,_=h.ms&&h.ms.length,d=_?4*R.index:4*R.begin,e=_?1:R.size;if(r[d]!==M[0]||r[d+1]!==M[1]||r[d+2]!==M[2]||r[d+3]!==M[3]){for(var o=0;e>o;o++)r[d++]=M[0],r[d++]=M[1],r[d++]=M[2],r[d++]=M[3];r._invalidateThisFrame=!0}}},vj=function(){var X=new L.Math.Vector3,u=new L.Math.Vector3;return function(f,c){var D=c+["32"],C=f[c],G=f[D];if(C){if(T.extractBatchTranslation||T.extractVerticesTranslation)if("vs"!==c||f.ms&&f.ms.length){if("ms"===c&&f.ms&&f.ms.length){u.set(0,0,0);for(var b=C.length,s=12;b>s;s+=16)u.add(X.fromArray(C,s));u.divideScalar(b/16);for(var H=u.x,U=u.y,h=u.z,r=new Array(b),s=0;b>s;s+=16){for(var S=0;12>S;S++)r[s+S]=C[s+S];r[s+12]=C[s+12]-H,r[s+13]=C[s+13]-U,r[s+14]=C[s+14]-h,r[s+15]=C[s+15]}C=r,f.translate=[H,U,h]}}else{u.set(0,0,0);for(var b=C.length,s=0;b>s;s+=3)u.add(X.fromArray(C,s));u.divideScalar(b/3);for(var H=u.x,U=u.y,h=u.z,r=new Array(b),s=0;b>s;s+=3)r[s]=C[s]-H,r[s+1]=C[s+1]-U,r[s+2]=C[s+2]-h;C=r,f.translate=[H,U,h]}G&&G.length===C.length?(G.set(C),G._bufId=null):f[D]=new $n(C)}else delete f[D]}}(),os=function(u,I,U,B,K,$,O,w){var H=I instanceof L.Shape,c=$[0],l=$.length;if(l>1){c=Lc(c);for(var C=1;l>C;C++)Wo(c,c,$[C])}if(H){var d=I.p3();Zm(c,d)}if(Uh(O.ms,c),O.ics&&on(O.ics,I.s("shape3d.color")||ol,1),!O.vs.length){var e=Lc(Fi);H&&Zm(e,nc(d)),fq(u,I,U,B,K,[e],O,w)}},fq=function(l,Q,$,t,f,n,q,y){if(Tl($))$.forEach(function($){fq(l,Q,$,t,f,n,q,y)});else if(jm($))fq(l,Q,ir(t,$),t,f,n,q,y);else if(oc($)){var F,L=hg($.mat,Q,l),Y=hg($.s3,Q,l),E=hg($.t3,Q,l),Z=hg($.r3,Q,l);if((Y||Z||E||L)&&(F=sd(L,Y,Z,hg($.rotationMode,Q,l),E),n.push(F)),$.shape3d)fq(l,Q,$.shape3d,t,f,n,q,$);else{var j=t.s;y=y||gc;var P=n[0],z=n.length,v=j("shape3d.color",$.color,y.color);if(f||(f=j("shape3d.blend",$.blend,y.blend)),z>1){P=Lc(P);for(var R=1;z>R;R++)Wo(P,P,n[R])}var D=P?Vg(P):C;$.vs&&j(id,$.visible,y.visible)&&wj(P,q,$.vs,$.uv,$.is,$.ns,D,f,v),$.top_vs&&j(sn,$.topVisible,y.topVisible)&&wj(P,q,$.top_vs,$.top_uv,$.top_is,$.top_ns,D,f,j("shape3d.top.color",$.topColor,y.topColor)||v),$.bottom_vs&&j(Bk,$.bottomVisible,y.bottomVisible)&&wj(P,q,$.bottom_vs,$.bottom_uv,$.bottom_is,$.bottom_ns,D,f,j("shape3d.bottom.color",$.bottomColor,y.bottomColor)||v),$.from_vs&&j(Kr,$.fromVisible,y.fromVisible)&&wj(P,q,$.from_vs,$.from_uv,$.from_is,$.from_ns,D,f,j("shape3d.from.color",$.fromColor,y.fromColor)||v),$.to_vs&&j(yb,$.toVisible,y.toVisible)&&wj(P,q,$.to_vs,$.to_uv,$.to_is,$.to_ns,D,f,j("shape3d.to.color",$.toColor,y.toColor)||v)}F&&n.pop()}},wj=function(W,_,m,K,Q,h,U,M,S){var F,q=_.cs,N=_.uv,I=_.bs,x=_.ns,L=_.vs;h&&0!==h.length||(h=bs(m,Q));var z=kc.determinantOfArray(W)<0;if(Q||z){var F=Q?Q.length:m.length/3;_o(Q?Q:F,z,function(d){var B=3*d;ge(L,W,[m[B],m[B+1],m[B+2]]),ge(x,U,[h[B],h[B+1],h[B+2]]),N&&Uh(N,[K[2*d],K[2*d+1]])})}else F=m.length/3,ge(L,W,m),ge(x,U,h),N&&Uh(N,K);q&&on(q,S,F),I&&(M?Yr(I,M,F):Uh(I,Ig,F))},ul=function(R,G,H){var F=R.data.p3();if(G=Lc(G),Zm(G,F),Uh(H.ms,G),H.ics&&on(H.ics,R.data.s("shape3d.color")||ol,1),!H.vs.length){var b=Lc(Fi);Zm(b,nc(F)),Gi(R,b,H)}},Gi=function(j,y,I){Wm(j,Ob,y,I),Wm(j,zb,y,I),Wm(j,Rl,y,I),Wm(j,cm,y,I),Wm(j,pc,y,I),Wm(j,rq,y,I),Wm(j,"csg",y,I)},Ge=function(j,k,E,z,I,V){Uh(E.ms,I),E.ics&&on(E.ics,k.s("all.color")||ol,1),E.vs.length||Bq(j,k,E,z,Lc(Fi),V)},Bq=function(l,r,R,Z,T,J){Nb(l,r,R,Z,T,J,Ob,wm),Nb(l,r,R,Z,T,J,zb,el),Nb(l,r,R,Z,T,J,pc,Mh),Nb(l,r,R,Z,T,J,rq,Xh),Nb(l,r,R,Z,T,J,Rl,$g),Nb(l,r,R,Z,T,J,cm,op)},Mg=function(M,d,D,c,q){c?q.instanced?M.gv.batchInstancedModel(M.data,c,M,M.getBodyColor(),[d],D):fq(M.gv,M.data,c,M,M.getBodyColor(),[d],D):q.instanced?M.gv.batchInstancedShapeFace(M,d,D):Gi(M,d,D)},Wm=function(k,J,o,Z){var B=k[J];if(B){var Q=B.tuv;if(Q){var s=B.uvScale,t=B.uvOffset,h=B.uvRotation,S=B.uvAnchor;if(s||t||h){var q,d,i,V=gl(h,t,s,S),u=V.a,j=V.b,p=V.c,n=V.d,l=V.tx,W=V.ty,A=Q.length;for(i=0;A>i;i+=2)q=Q[i],d=Q[i+1],Q[i]=u*q+p*d+l,Q[i+1]=j*q+n*d+W}}wj(o,Z,B.vs,Q,C,C,o?Vg(o):C,B.blend,B.color)}},Nb=function(g,W,_,B,H,q,c,r){var o,D=_.cs,G=_.uv,M=_.bs,T=_.vs,b=_.ns,Y=bs(r);if(g.getFaceVisible(W,c)){var U=g.getFaceMat(W,c);U&&(H=Pn(W,U),q=Vg(H));var F=kc.determinantOfArray(H)<0;if(F){var I=r.length/3;_o(I,!0,function(Q){var a=3*Q;ge(T,H,[r[a],r[a+1],r[a+2]]),ge(b,q,[Y[a],Y[a+1],Y[a+2]])})}else ge(T,H,r),ge(b,q,Y);if(D&&on(D,g.getFaceColor(W,c),6),G){var p=g.getFaceUv(W,c)||B[c+"Uv"],u=g.getFaceUvScale(W,c)||B[c+"UvScale"],C=g.getFaceUvOffset(W,c)||B[c+"UvOffset"],w=g.getFaceUvRotation(W,c)||B[c+"UvRotation"],N=g.getFaceUvAnchor(W,c)||B[c+"UvAnchor"];p=p?[p[6],p[7],p[0],p[1],p[2],p[3],p[2],p[3],p[4],p[5],p[6],p[7]]:So;var i=p[0],z=p[1],Z=p[2],O=p[3],l=p[4],t=p[5],K=p[6],m=p[7],J=p[8],s=p[9],Q=p[10],A=p[11];if(u||C||w||N){var a=gl(w,C,u,N),f=a.a,S=a.b,e=a.c,P=a.d,n=a.tx,j=a.ty;i=f*i+e*z+n,z=S*i+P*z+j,Z=f*Z+e*O+n,O=S*Z+P*O+j,l=f*l+e*t+n,t=S*l+P*t+j,K=f*K+e*m+n,m=S*K+P*m+j,J=f*J+e*s+n,s=S*J+P*s+j,Q=f*Q+e*A+n,A=S*Q+P*A+j}G.push(i,z,Z,O,l,t,K,m,J,s,Q,A)}M&&(o=g.getBodyColor(W)||g.getFaceBlend(W,c),o?Yr(M,o,6):Uh(M,Ig,6))}},Te=function(M,R,Q,G){var Q=M._picking?M.pickColorMap:null,B=M.getGL(),t=M._buffer;if(!ss(R)){Bh(M,Fi),gs(B);var L,y,A,T;for(var W in R){var V,X,h,Y,u=R[W];if(u.batch){var F=M.getBatchInfo(u.batch)||gc;V=F.wfBloom===H?F.bloom:F.wfBloom,X=F.wfReflectable===H?F.reflectable:F.wfReflectable,h=F.wfClipboxMask===H?F.clipboxMask:F.wfClipboxMask,Y=F.width}else V=u.B,X=u.reflectable,h=u.clipboxMask,Y=u.W;var g=!Q&&u.material;if(g||!(G&&!u.T||!G&&u.T||M.isReflecting(B)&&X===!1)){var q=Q&&!M.drawFilter;if(u.invalidate?(u.invalidate=!1,vj(u,"vs"),vj(u,"cs"),vj(u,"ls"),q&&vj(u,"ps")):q&&u.ps&&u.ps._invalidateThisFrame&&(u.ps._invalidateThisFrame=!1,vj(u,"ps")),L=u.translate,y=u.clipDirection,g){var a=u.material,l=a.renderMode;"lines"!==l?a.renderMode="lines":l=null,M._prefabRenderer.render(B,{position:L,mesh:{vs:u.vs32,aLineDistance:u.ls32,aBatchColor:u.cs32,_complete_:!0},mat:a},u),l&&(a.renderMode=l)}else{L||y?(A=y?Lc(u.mat):[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L&&Zm(A,L),T=Lc(M._6O),Bh(M,A)):A=null;var p=u.vs32,o=Q?u.ps32:u.cs32;Bn(B,Y,C,t.vs,p);var m=ie.for(B),N=m.directUniforms(),$=m.directAttribs(),J=u.D,x=!M._dashDisabled&&J;N.uAlphaTest=i.alphaTest,B._blooming&&!V&&(N.blackout=!0),y&&(N.uClipPercent=u.clipPercent,N.uClipDirection=y),ch(M,N,h===H?nh:h),x&&(N.uDash=!0,N.uDashDistance=J,N.uDashGapDistance=u.G,N.uDiffuse=u.A||i["color.empty"],$.aLineDistance=Tr(B,t.lineDistance,u.ls32,C,1));var K=!M._batchColorDisabled;K&&o&&o.length?(N.uBatchColor=!0,$.aBatchColor=Tr(B,t.batchColor,o,C,4)):(N.uBatchColor=!1,$.aBatchColor=!1);var d=u.fog!==!1;d||(N.uFog=!1),Vr(B),Uq(B,0,p.length/3,1),nq(B),d||(N.uFog=!0),K&&(N.uBatchColor=!1,$.aBatchColor=!1),x&&(N.uDash=!1,$.aLineDistance=!1),B._blooming&&!V&&(N.blackout=!1),A&&(y&&(N.uClipDirection=0),bf(M,T),N.uModelMatrix=ab)}}}In(B),bf(M)}},mo=function(T,j){T.invalidate=!1,vj(T,"vs"),vj(T,"ns"),vj(T,"cs"),vj(T,"rs"),j&&vj(T,"ps"),vj(T,"bs"),vj(T,"uv"),vj(T,"ms"),vj(T,"ics")},Oo=function(O,u,M,A,P,a){var x,v,z,R,s,w,g,G,J,e,L,W,n,A=O._picking?O.pickColorMap:null,_=O.getGL(),d=ie.for(_),y=d.directUniforms(),T=d.directAttribs(),r=O._buffer;if(!ss(u)){var U,K,S=O._flowObjects.length?O.flowMap:null,F=O.drawFilter;Bh(O,Fi);for(v in u)if(z=O.getBatchInfo(v)||gc,z.visible!==!1){var I=!A&&z.material;if(I||!(P&&!z.transparent||!P&&z.transparent||O.isReflecting(_)&&z.reflectable===!1)){var V=z.renderLayerMask;if(V==C&&(V=Sn),a==C&&(a=Sn),Ph(a,V)&&(R=u[v],A||!z.transparentMask)){if(K=!1,F){if(z.highlight===!1)continue;if(U=R.ds){for(var k=0,Y=U.length;Y>k;k++)if(!F(U[k])){K=!0;break}if(!K)continue}}var E=P&&z.autoSort===!0&&(O._33Q||R.invalidate)&&!K,q=A&&!K;R.invalidate?mo(R,q):q&&R.ps&&R.ps._invalidateThisFrame&&(R.ps._invalidateThisFrame=!1,vj(R,"ps"));var N=R.ms32,m=N&&N.length;if(w=R.vs32,g=A?R.ps32:m?R.ics32:R.cs32,e=R.uv32,G=R.bs32,J=R.rs32,W=w.length/3,E){var c=Uj(w,O.getEye(),O);c?(R.is=c.is,R.elementTypeUint=c.useUint32):(R.is=null,R.elementTypeUint=null)}if(W){if(x=z.polygonOffset,x&&Wh(_,x),I&&!K){var l={vs:w,uv:e,ns:R.ns32,is:R.is,_complete_:!0},$={position:R.translate,mesh:l,mat:z.material};m&&($.instances={aMatrixInstanced:R.ms32}),O._prefabRenderer.render(_,$,z)}else{n=R.translate,n&&Bh(O,[1,0,0,0,0,1,0,0,0,0,1,0,n[0],n[1],n[2],1]),s=z.light,L=O.getTexture(z.image),dq(_,C,z.light,z.opacity,z.reverseFlip,z.reverseColor,z.reverseCull),g?O._batchColorDisabled?(y.uBatchColor=!1,T.aBatchColor=!1):(y.uBatchColor=!0,T.aBatchColor=K?[0,1,1,1]:m?ai(_,r.instancedBatchColor,g,C,4):Tr(_,r.batchColor,g,C,4)):(y.uBatchColor=!1,y.uDiffuse=z.color||i["color.empty"]);var D=z.alphaTest;y.uAlphaTest=D===H?i.alphaTest:D,y.shadowReceive=!A&&z.shadowReceive!==!1,ch(O,y,z.clipboxMask===H?nh:z.clipboxMask),xc(O,y,z.lightMask===H?nh:z.lightMask,z.headlightAmbientIntensity),S&&S.resetFlowUniform(z.effectFlowMask===H?nh:z.effectFlowMask,y),_._blooming&&!z.bloom&&(y.blackout=!0),z.envmap!==H?(y.uUseEnvMap=!0,y.roughness=z.roughness||0,O._setEnvmapByProbeId(y,z.envmapProbe||0,z.envmap)):(y.uUseEnvMap=!1,y.envMapIntensity=0);var h=G&&!O._batchBlendDisabled;h&&(y.uBatchBlend=!0,T.aBatchBlend=Tr(_,r.batchBlend,G,C));var Z=J&&!O._batchBrightnessDisabled;if(Z&&(y.uBatchBrightness=!0,T.aBatchBrightness=Tr(_,r.batchBrightness,J,C,1)),e?Vr(_,L,z.discardSelectable,r.uv,e,z.uvOffset,z.uvScale,z.uvRotation,z.uvAnchor):Vr(_),T.aPosition=Tr(_,r.vs,w,C),T.aNormal=Tr(_,r.ns,R.ns32,C),m&&(y.uUseInstance=!0),K){if(m){var p,B;(p=O._highlightInstancedFloatArray)||(p=O._highlightInstancedFloatArray=new $n(16))}for(var k=0,Y=U.length;Y>k;k++)if(!F(U[k])){var Q=M[U[k]._id];if(m){for(var j=0;16>j;j++)p[j]=N[16*Q.index+j];B=ai(_,r.ms,p,C),_.bufferSubData(34962,0,p),T.aMatrixInstanced=B,Uq(_,0,W,null,1)}else{var f=Q.begin,o=Q.size;Uq(_,f,o)}}}else m&&(T.aMatrixInstanced=ai(_,r.ms,N,C)),R.is?(ke(_,r.is,R.is),Ij(_,0,W,null,R.elementTypeUint?5125:null,null,m?R.ms32.length/16:0)):Uq(_,0,W,null,m?R.ms32.length/16:0);e?nq(_,L):nq(_),g&&!O._batchColorDisabled&&(y.uBatchColor=!1,T.aBatchColor=!1),h&&(y.uBatchBlend=!1,T.aBatchBlend=!1),Z&&(y.uBatchBrightness=!1,T.aBatchBrightness=!1),_._blooming&&!z.bloom&&(y.blackout=!1),m&&(y.uUseInstance=!1,T.aMatrixInstanced=H),zf(_),n&&(bf(O),y.uModelMatrix=ab)}x&&kr(_)}}}}bf(O)}},Uj=function(e,z,t){var b=e.length/3,I=b>65535,U=t._glCapabilities.elementTypeUint&&I;if(!U&&I)return null;for(var C=new Array(b),B=b/3,G=new Array(B),u=0;B>u;u++)G[u]=u;G.sort(function(p,u){var R=9*p,q=[(e[R]+e[R+3]+2*e[R+6])/4,(e[R+1]+e[R+4]+2*e[R+7])/4,(e[R+2]+e[R+5]+2*e[R+8])/4];R=9*u;var B=[(e[R]+e[R+3]+2*e[R+6])/4,(e[R+1]+e[R+4]+2*e[R+7])/4,(e[R+2]+e[R+5]+2*e[R+8])/4],v=mp(z,q)-mp(z,B);return v>0?-1:0>v?1:0});for(var u=0;B>u;u++){var w=3*u,v=3*G[u];C[w]=v,C[w+1]=v+1,C[w+2]=v+2}return{useUint32:U,is:U?new Uint32Array(C):new Nq(C)}},bp={obj:function(z,E){var K={mat:z.mat,s3:z.s3,r3:z.r3,rotationMode:z.rotationMode,t3:z.t3,cube:z.cube==C?!0:z.cube,center:z.center==C?!0:z.center,ignoreMtls:z.ignoreMtls,ignoreTransparent:z.ignoreTransparent,ignoreColor:z.ignoreColor,ignoreImage:z.ignoreImage,ignoreNormal:z.ignoreNormal,prefix:z.prefix,flipY:z.flipY,flipFace:z.flipFace,reverseFlipMtls:z.reverseFlipMtls,finishFunc:function(C,w){if(C){var w=[];for(var P in C){var t=C[P];w.rawS3=t.rawS3,t.center&&(w.center=t.center),w.push(t),z.eachModel&&z.eachModel(P,t)}w.json=z,E(w)}else E()}};T.loadObj(z.obj,z.mtl,K)},bin:function(H,x){var y={finishFunc:function(S){S?x(S):x()}};T.loadBin(H.url,y)},fbx:function(f,j){var r={matDef:f.matDef,flipY:f.flipY,cube:f.cube,center:f.center,animation:f.animation!==!1,finishFunc:function(M){M?(M.json=f,j(M)):j()}};T.loadFbx(f.url,r)},gltf:function(O,P){var y={matDef:O.matDef,flipY:O.flipY,cube:O.cube,center:O.center,finishFunc:function(Q){Q?(Q.json=O,P(Q)):P()}};T.loadGltf(O.url,y)}};T.getModelTypeHandlers=function(){return bp},T.setModelTypeHandler=function(Q,o){bp[Q]=o},T.getModelTypeHandler=function(u){return bp[u]},T.handleModelLoaded=function(){},T.handleUnfoundModel=function(){};var Pl=C,Pd=C,Hc=function(V){Pl&&!V._loadingModelView_&&(Pd||(Pd={}),Pd[V._loadingModelView_=Eb()]=V)},um=function(I,t){Pl||(Pl={});var A=Pl[I];if(A){if(A.url===t)return;A.request.onload=zj,A.request.onerror=zj}if(t.indexOf(".bin")===t.length-4)return fo(I,{modelType:"bin",url:t},t);if(t.indexOf(".fbx")===t.length-4)return fo(I,{modelType:"fbx",url:t},t);if(t.indexOf(".gltf")===t.length-5||t.indexOf(".glb")===t.length-4)return fo(I,{modelType:"gltf",url:t},t);if(t=T.beforeLoadURL(t),t.data){var l=T.parse(t.data);fo(I,l,t)}else{var Z=new qg;Pl[I]={request:Z,url:t},Z.onload=function(){if(200===this.status||0===this.status){delete Pl[I];var U=T.parse(Z.getResponseText());fo(I,U,t)}else Xb(I,T.handleUnfoundModel(I,t)||C)},Z.onerror=function(){Xb(I,T.handleUnfoundModel(I,t)||C)};var b={};b.url=encodeURI(t),b.sync=!1,Z.send(b)}},fo=function(U,J,K){var H=J.modelType;if(!H)return Xb(U,J),T.handleModelLoaded(U,J),void 0;var W=T.getModelTypeHandler(H);if(W){if(Pl||(Pl={}),Pl[U])return;Pl[U]=!0;var g=function(t){t?(Xb(U,t),T.handleModelLoaded(U,t)):Xb(U,T.handleUnfoundModel(U,K,J)||C)};W(J,g)}else Xb(U,T.handleUnfoundModel(U,K,J)||C)},Xb=function(r,A){if(delete Pl[r],jm(A)&&nb.test(A))return um(r,A),void 0;if(gj[r]=A,ss(Pl)&&(Pl=C,Pd)){for(var M in Pd){var y=Pd[M];y.invalidateAll&&y.invalidateAll(H,"modelLoaded",r),y.redraw&&y.redraw(),y.iv(),delete y._loadingModelView_}Pd=C}if(A&&Pd)for(var M in Pd){var y=Pd[M];y.invalidateAll&&y.invalidateAll(H,"modelLoading",r),y.redraw&&y.redraw(),y.iv()}},Bm=new $n([0,0,0,1,1,1,1,0]),ck=new $n([0,0,1,0,0,1,0,0,1,0,0,1]),Mp=new Nq([0,1,2,2,3,0]),Md=new $n([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),Xn=new Nq([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),bc=new $n([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),pm=bs(Md,Xn),Up=(new $n([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new Nq([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[Ob,Rl,zb,cm,pc,rq]),kd=[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5],sb=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Vb=function(E,i,c,S,p,M,O){M=M||16,E=E||16,i=i||0,c=c||E;var D,b,L,k,l,X,Z,$,V,J=.5,e=[],I=[],n=ok/E,T=kl/M;for(D=0;M>D;D++)for(X=D+1,k=D*T,V=X*T,b=i;c>b;b++)Z=b+1,L=b*n,$=Z*n,e.push(J*_(k)*t(L),J*t(k),-J*_(k)*_(L),J*_(V)*t($),J*t(V),-J*_(V)*_($),J*_(k)*t($),J*t(k),-J*_(k)*_($),J*_(k)*t(L),J*t(k),-J*_(k)*_(L),J*_(V)*t(L),J*t(V),-J*_(V)*_(L),J*_(V)*t($),J*t(V),-J*_(V)*_($)),I.push(b/E,D/M,Z/E,X/M,Z/E,D/M,b/E,D/M,b/E,X/M,Z/E,X/M);if(O){var h=[];for(D=0,l=e.length;l>D;D+=3)h.push(2*e[D],2*e[D+1],2*e[D+2])}if(S){var o=[],f=[];for(L=i*n,D=0;M>D;D++)X=D+1,k=D*T,V=X*T,o.push(0,0,0,J*_(V)*t(L),J*t(V),-J*_(V)*_(L),J*_(k)*t(L),J*t(k),-J*_(k)*_(L)),f.push(0,.5,i/E,X/M,i/E,D/M)}if(p){var u=[],P=[];for(L=c*n,D=0;M>D;D++)X=D+1,k=D*T,V=X*T,u.push(0,0,0,J*_(k)*t(L),J*t(k),-J*_(k)*_(L),J*_(V)*t(L),J*t(V),-J*_(V)*_(L)),P.push(1,.5,c/E,D/M,c/E,X/M)}var G={vs:e,uv:I,from_vs:o,from_uv:f,to_vs:u,to_uv:P};return O&&(G.ns=h),G},Zk=function(X,o,p){X=X||.17,o=o||12,p=p||18,0>X?X=0:X>.25&&(X=.25);var u,j,n,y,C,g,b,N=.5,m=[],l=[],D=[],w=ok/p,T=ok/o,f=N-X;for(j=0;o>=j;j++)for(y=-kl+j*T,g=t(y),C=_(y),u=0;p>=u;u++)n=u*w,b=f+X*g,m.push(t(n)*b,C*X,-_(n)*b),l.push(u/p,1-j/o);for(j=0;o>j;j++){var R=j*(p+1),U=(j+1)*(p+1);for(u=0;p>u;u++)D.push(R+u,U+u+1,U+u,R+u,R+u+1,U+u+1)}return{vs:m,uv:l,is:D}},Gc=function(u,h,w,r,J,n,A,W){A=A||12,u=u||18,h=h||0,w=w||u,n=n||.17,0>n?n=0:n>.25&&(n=.25);var G,I,d,R,V,y,L,T,S,m,k=.5,P=[],q=[],C=ok/u,f=ok/A,l=k-n,v=W?[]:H;for(d=0;A>d;d++)for(R=d+1,L=-kl+d*f,T=-kl+R*f,G=h;w>G;G++)I=G+1,V=G*C,y=I*C,S=l+n*t(L),m=l+n*t(T),P.push(t(V)*S,_(L)*n,-_(V)*S,t(y)*S,_(L)*n,-_(y)*S,t(y)*m,_(T)*n,-_(y)*m,t(V)*S,_(L)*n,-_(V)*S,t(y)*m,_(T)*n,-_(y)*m,t(V)*m,_(T)*n,-_(V)*m),q.push(G/u,1-d/A,I/u,1-d/A,I/u,1-R/A,G/u,1-d/A,I/u,1-R/A,G/u,1-R/A),W&&v.push(t(V)*t(L),_(L),-_(V)*t(L),t(y)*t(L),_(L),-_(y)*t(L),t(y)*t(T),_(T),-_(y)*t(T),t(V)*t(L),_(L),-_(V)*t(L),t(y)*t(T),_(T),-_(y)*t(T),t(V)*t(T),_(T),-_(V)*t(T));if(r){var N=[],D=[];for(d=0;A>d;d++)R=d+1,L=-kl+d*f,T=-kl+R*f,V=h*C,S=l+n*t(L),m=l+n*t(T),N.push(t(V)*S,_(L)*n,-_(V)*S,t(V)*m,_(T)*n,-_(V)*m,t(V)*l,0,-_(V)*l),D.push(.5+.5*t(L),.5-.5*_(L),.5+.5*t(T),.5-.5*_(T),.5,.5)}if(J){var e=[],b=[];for(d=0;A>d;d++)R=d+1,L=-kl+d*f,T=-kl+R*f,V=w*C,S=l+n*t(L),m=l+n*t(T),e.push(t(V)*S,_(L)*n,-_(V)*S,t(V)*l,0,-_(V)*l,t(V)*m,_(T)*n,-_(V)*m),b.push(.5-.5*t(L),.5-.5*_(L),.5,.5,.5-.5*t(T),.5-.5*_(T))}var Q={vs:P,uv:q,from_vs:N,from_uv:D,to_vs:e,to_uv:b};return W&&(Q.ns=v),Q},Xm=function(Q,J){for(var y,W,O,R,G,T=.5,o=16,w=[],M=[],p=[],D=[],U=ok/o,f=0;o>=f;f++)y=f*U,W=t(y),R=W*T,O=_(y),G=O*T,w.push(R,-T,G,R,T,G),p.push(W,0,O,W,0,O),M.push(1-f/o,1,1-f/o,0);for(f=0;o>f;f++)D.push(2*f,2*f+1,2*f+3,2*f,2*f+3,2*f+2);if(J){var A=[],Z=[],K=[];for(A.push(0,-T,0),Z.push(.5,.5),f=0;o>=f;f++)y=f*U,W=t(y),O=_(y),A.push(W*T,-T,-O*T),Z.push(.5+.5*W,.5+.5*O);for(f=0;o>f;f++)K.push(0,f+2,f+1)}if(Q){var F=[],j=[],h=[];for(F.push(0,T,0),j.push(.5,.5),f=0;o>=f;f++)y=f*U,W=t(y),O=_(y),F.push(W*T,T,-O*T),j.push(.5+.5*W,.5-.5*O);for(f=0;o>f;f++)h.push(0,f+1,f+2)}return{vs:w,uv:M,is:D,ns:p,bottom_vs:A,bottom_uv:Z,bottom_is:K,top_vs:F,top_uv:j,top_is:h}},lq=function(s,v,x,T,F,u,E,w){s=s||12,v=v||0,x=x||s;for(var I,Q,c,H,o,W,g,N,J,i=.5,X=[],d=[],R=ok/s,j=v;x>j;j++)I=j+1,Q=j*R,c=I*R,H=t(Q)*i,o=_(Q)*i,W=t(c)*i,g=_(c)*i,X.push(H,-i,-o,W,-i,-g,H,i,-o,W,-i,-g,W,i,-g,H,i,-o),d.push(j/s,1,I/s,1,j/s,0,I/s,1,I/s,0,j/s,0);if(w){var q=[];for(j=0,J=X.length;J>j;j+=3)q.push(2*X[j],0,2*X[j+2])}if(E){var y=[],r=[];for(j=v;x>j;j++)Q=R*j,c=R*(j+1),H=t(Q),o=_(Q),W=t(c),g=_(c),y.push(H*i,-i,-o*i,0,-i,0,W*i,-i,-g*i),r.push(.5+.5*H,.5+.5*o,.5,.5,.5+.5*W,.5+.5*g)}if(u){var U=[],L=[];for(j=v;x>j;j++)Q=R*j,c=R*(j+1),H=t(Q),o=_(Q),W=t(c),g=_(c),U.push(H*i,i,-o*i,W*i,i,-g*i,0,i,0),L.push(.5+.5*H,.5-.5*o,.5+.5*W,.5-.5*g,.5,.5)}if(T){var V=[],D=[];Q=R*v,H=t(Q)*i,o=_(Q)*i,N=v/s,V.push(0,i,0,0,-i,0,H,-i,-o,H,-i,-o,H,i,-o,0,i,0),D.push(0,0,0,1,N,1,N,1,N,0,0,0)}if(F){var b=[],O=[];Q=R*x,H=t(Q)*i,o=_(Q)*i,N=x/s,b.push(0,-i,0,0,i,0,H,i,-o,H,i,-o,H,-i,-o,0,-i,0),O.push(1,1,1,0,N,0,N,0,N,1,1,1)}var n={vs:X,uv:d,bottom_vs:y,bottom_uv:r,top_vs:U,top_uv:L,from_vs:V,from_uv:D,to_vs:b,to_uv:O};return w&&(n.ns=q),n},Kf=function(Z,T,D,q,c){T=T||18,D=D||0,q=q==C?ok:q,c=c==C?.5:c;for(var i,Q,F,I,b,U,v=[0,.5,.75,.875,.9375],A=[],K=[],L=[],P=q/T,m=0;m<v.length;m++){var Y=0===m%2?0:.5;for(i=0;T>=i;i++)Q=(i+Y)*P+D,F=1-v[m],A.push(t(Q)*c*F,-c+2*v[m]*c,-_(Q)*c*F),K.push((i+Y)/T,F)}for(m=0;m<v.length-1;m++){var s=m*(T+1),l=(m+1)*(T+1);for(i=0;T>i;i++)L.push(s+i,l+i+1,l+i,s+i,s+i+1,l+i+1)}for(U=A.length/3-(T+1),i=0;T>i;i++)A.push(0,c,0),K.push((i+.5)/T,0);for(i=0;T>i;i++)L.push(U+i,U+i+1,U+(T+1)+i);if(Z){var G=[],n=[],a=[];for(G.push(0,-c,0),n.push(.5,.5),i=0;T>=i;i++)Q=i*P+D,I=t(Q),b=_(Q),G.push(I*c,-c,-b*c),n.push(.5+.5*I,.5+.5*b);for(i=0;T>i;i++)a.push(0,i+2,i+1)}return{vs:A,uv:K,is:L,bottom_vs:G,bottom_uv:n,bottom_is:a}},De=function(R,X,I,w,n,E,G,F){R=R||16,X=X||0,I=I||R,G=G||1;var Z,S,L,V,l,h,b,k=.5,m=[],z=[],g=ok/R,P=X,K=1/G,S=new ng,L=new ng,W=new ng,x=new ng,u=new ng,U=new ng,Q=new ng;for(F&&(Z=[],l=new ng,h=new ng,b=new ng);I>P;P++){var r=P+1,D=g*P,e=g*r;for(S.set(t(D)*k,-k,-_(D)*k),L.set(t(e)*k,-k,-_(e)*k),W.set(0,k,0),F&&(l.set(t(D),.5,-_(D)).normalize(),h.set(t(e),.5,-_(e)).normalize(),b.copy(l).add(h).normalize()),x.lerpVectors(W,S,K),u.lerpVectors(W,L,K),m.push(x.x,x.y,x.z,u.x,u.y,u.z,W.x,W.y,W.z),z.push(P/R,K,r/R,K,(P+r)/2/R,0),F&&Z.push(l.x,l.y,l.z,h.x,h.y,h.z,b.x,b.y,b.z),V=1;G>V;V++)x.lerpVectors(W,S,K*(V+1)),u.lerpVectors(W,L,K*(V+1)),U.lerpVectors(W,S,K*V),Q.lerpVectors(W,L,K*V),m.push(x.x,x.y,x.z,u.x,u.y,u.z,U.x,U.y,U.z,U.x,U.y,U.z,u.x,u.y,u.z,Q.x,Q.y,Q.z),z.push(P/R,K*(V+1),r/R,K*(V+1),P/R,K*V,P/R,K*V,r/R,K*(V+1),r/R,K*V),F&&Z.push(l.x,l.y,l.z,h.x,h.y,h.z,l.x,l.y,l.z,l.x,l.y,l.z,h.x,h.y,h.z,h.x,h.y,h.z)}if(E){var d=[],T=[];for(P=X;I>P;P++){D=g*P,e=g*(P+1);var C=t(D),J=_(D),j=t(e),B=_(e);d.push(C*k,-k,-J*k,0,-k,0,j*k,-k,-B*k),T.push(.5+.5*C,.5+.5*J,.5,.5,.5+.5*j,.5+.5*B)}}if(w){var s=[],f=[];D=g*X,s.push(0,k,0,0,-k,0,t(D)*k,-k,-_(D)*k),f.push(0,0,0,1,X/R,1)}if(n){var Y=[],a=[];D=g*I,Y.push(0,-k,0,0,k,0,t(D)*k,-k,-_(D)*k),a.push(1,1,1,0,I/R,1)}var i={vs:m,uv:z,bottom_vs:d,bottom_uv:T,from_vs:s,from_uv:f,to_vs:Y,to_uv:a};return F&&(i.ns=Z),i},Tg=function(x,L,e,I,$,f,u,v){for(var N=[],q=0;q<x.length-1;q+=2)N.push({x:x[q],y:x[q+1]});return Oc(N,L,e,I,$,f,u,v,!1)},Dh={roundRect:function(E,s){return Tg([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],E,s,3)},star:function(d,g){return Tg([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],d,g)},rect:function(b,v){return Tg([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],b,v)},billboard:function(){return{vs:[-.5,.5,0,-.5,-.5,0,.5,.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]}},plane:function(){return{vs:[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,-.5,-.5,0,.5,.5,0,.5],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]}},triangle:function(C,r){return Tg([0,-.5,.5,.5,-.5,.5],[1,2,2,5],C,r)},rightTriangle:function(F,e){return Tg([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],F,e)},parallelogram:function(A,c){return Tg([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],A,c)},trapezoid:function(D,U){return Tg([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],D,U)}},em={sphere:1,cylinder:1,cone:1,torus:1},ep={torus:1,sphere:1,cone:1},Vn=yd(ho(Dh),{cylinder:1}),Vf=yd(ho(Dh),{cylinder:1,cone:1}),Mm=function(p,e,z){var H,D=hg(p.anchor3d,z,e),G=hg(p.mat,z,e),k=hg(p.s3,z,e),u=hg(p.t3,z,e),P=hg(p.r3,z,e),C=k||P||u||G;if(D||C){H=Lc(e._6O);var F=C?sd(G,k,P,hg(p.rotationMode,z,e),u):Wp();D&&Zm(F,[.5-D[0],.5-D[1],.5-D[2]]),Bh(e,F)}return H},tj=function(b,f,K,i,S,l,Y){if(Tl(K))K.forEach(function(n){tj(b,f,n,i,S,l,Y)});else if(jm(K))tj(b,f,ir(i,K),i,S,l,Y);else if(oc(K))if(K.shape3d){var h=Mm(K,b,f);tj(b,f,K.shape3d,i,S,l,K),h&&bf(b,h)}else Em(b,f,K,i.s,S,l,Y)},Em=function(I,F,r,T,J,e,u){u=u||gc;var Z=e&&!e(T("shape3d.transparent",r.transparent,u.transparent)),z=I._picking,x=r.vs&&T(id,r.visible,u.visible),k=!z&&x?T("shape3d.material",r.material,u.material):null,R=r.top_vs&&T(sn,r.topVisible,u.topVisible),l=!z&&R?T("shape3d.top.material",r.topMaterial,u.topMaterial):null,y=r.bottom_vs&&T(Bk,r.bottomVisible,u.bottomVisible),M=!z&&y?T("shape3d.bottom.material",r.bottomMaterial,u.bottomMaterial):null,L=r.from_vs&&T(Kr,r.fromVisible,u.fromVisible),t=!z&&L?T("shape3d.from.material",r.fromMaterial,u.fromMaterial):null,S=r.to_vs&&T(yb,r.toVisible,u.toVisible),f=!z&&S?T("shape3d.to.material",r.toMaterial,u.toMaterial):null;if(!Z||k||f||l||M||t){var X=Mm(r,I,F);if(ff(r)){var N=I.getData3dUI(F);N.dispatchBoundingBoxChanged()}var V=I._26I,g=T("polygonOffset",r.polygonOffset,u.polygonOffset);if(g&&Wh(V,g),k&&Jh(V,I,F,k,[r.vs,r.uv,r.ns,r.is]),l&&Jh(V,I,F,l,[r.top_vs,r.top_uv,r.top_ns,r.top_is]),M&&Jh(V,I,F,M,[r.bottom_vs,r.bottom_uv,r.bottom_ns,r.bottom_is]),t&&Jh(V,I,F,t,[r.from_vs,r.from_uv,r.from_ns,r.from_is]),f&&Jh(V,I,F,f,[r.to_vs,r.to_uv,r.to_ns,r.to_is]),!Z){var U=I._buffer,o=T("shape3d.color",r.color,u.color);J||(J=T("shape3d.blend",r.blend,u.blend));var h,w=r.opacity==C?u.opacity:r.opacity,s=T("shape3d.opacity");h=s!=C&&w!=C?w*s:w!=C?w:s,dq(V,J,T("shape3d.light",r.light,u.light),h,T("shape3d.reverse.flip",r.reverseFlip,u.reverseFlip),T("shape3d.reverse.color",r.reverseColor,u.reverseColor),T("shape3d.reverse.cull",r.reverseCull,u.reverseCull)),x&&!k&&wi(V,U,o,I.getTexture(T("shape3d.image",r.image,u.image),F),T("shape3d.discard.selectable",r.discardSelectable,u.discardSelectable),r.vs,r.uv,r.ns,r.is,T("shape3d.uv.offset",r.uvOffset,u.uvOffset),T("shape3d.uv.scale",r.uvScale,u.uvScale),T("shape3d.uv.rotation",r.uvRotation,u.uvRotation),T("shape3d.uv.anchor",r.uvAnchor,u.uvAnchor)),R&&!l&&wi(V,U,T("shape3d.top.color",r.topColor,u.topColor)||o,I.getTexture(T("shape3d.top.image",r.topImage,u.topImage),F,"top"),T("shape3d.top.discard.selectable",r.topDiscardSelectable,u.topDiscardSelectable),r.top_vs,r.top_uv,r.top_ns,r.top_is,T("shape3d.top.uv.offset",r.topUvOffset,u.topUvOffset),T("shape3d.top.uv.scale",r.topUvScale,u.topUvScale),T("shape3d.top.uv.rotation",r.topUvRotation,u.topUvRotation),T("shape3d.top.uv.anchor",r.topUvAnchor,u.topUvAnchor)),y&&!M&&wi(V,U,T("shape3d.bottom.color",r.bottomColor,u.bottomColor)||o,I.getTexture(T("shape3d.bottom.image",r.bottomImage,u.bottomImage),F,"bottom"),T("shape3d.bottom.discard.selectable",r.bottomDiscardSelectable,u.bottomDiscardSelectable),r.bottom_vs,r.bottom_uv,r.bottom_ns,r.bottom_is,T("shape3d.bottom.uv.offset",r.bottomUvOffset,u.bottomUvOffset),T("shape3d.bottom.uv.scale",r.bottomUvScale,u.bottomUvScale),T("shape3d.bottom.uv.rotation",r.bottomUvRotation,u.bottomUvRotation),T("shape3d.bottom.uv.anchor",r.bottomUvAnchor,u.bottomUvAnchor)),L&&!t&&wi(V,U,T("shape3d.from.color",r.fromColor,u.fromColor)||o,I.getTexture(T("shape3d.from.image",r.fromImage,u.fromImage),F,"from"),T("shape3d.from.discard.selectable",r.fromDiscardSelectable,u.fromDiscardSelectable),r.from_vs,r.from_uv,r.from_ns,r.from_is,T("shape3d.from.uv.offset",r.fromUvOffset,u.fromUvOffset),T("shape3d.from.uv.scale",r.fromUvScale,u.fromUvScale),T("shape3d.from.uv.rotation",r.fromUvRotation,u.fromUvRotation),T("shape3d.from.uv.anchor",r.fromUvAnchor,u.fromUvAnchor)),S&&!f&&wi(V,U,T("shape3d.to.color",r.toColor,u.toColor)||o,I.getTexture(T("shape3d.to.image",r.toImage,u.toImage),F,"to"),T("shape3d.to.discard.selectable",r.toDiscardSelectable,u.toDiscardSelectable),r.to_vs,r.to_uv,r.to_ns,r.to_is,T("shape3d.to.uv.offset",r.toUvOffset,u.toUvOffset),T("shape3d.to.uv.scale",r.toUvScale,u.toUvScale),T("shape3d.to.uv.rotation",r.toUvRotation,u.toUvRotation),T("shape3d.to.uv.anchor",r.toUvAnchor,u.toUvAnchor)),zf(V)}g&&kr(V),X&&bf(I,X)}},Jh=function(D,R,S,u,L){R._prefabRenderer.render(D,{mesh:{vs:L[0],uv:L[1],ns:L[2],is:L[3],_complete_:!0},mat:u},S)},wi=function(M,m,R,Z,E,w,V,N,p,b,n,t,u){var g=ie.for(M),J=g.directUniforms(),y=g.directAttribs();J.uDiffuse=R||i["color.empty"],V?Vr(M,Z,E,m.uv,V,b,n,t,u):Vr(M),y.aPosition=Tr(M,m.vs,w,C),y.aNormal=Tr(M,m.ns,N,C),p?(mi(M,m.is,p),Ij(M,0,p.length,null,p instanceof Uint32Array?5125:null)):Uq(M,0,w.length/3),V?nq(M,Z):nq(M)},ir=function(L,m){var _=L.s;if(m||(m=_(qb)),!m)return C;var N=Uf(m);if(N)return N;if("text"===m){var X={amount:_("shape3d.text.amount"),size:_("shape3d.text.size"),font:_("shape3d.text.font"),style:_("shape3d.text.style"),weight:_("shape3d.text.weight"),fill:_("shape3d.text.fill"),curveSegments:_("shape3d.text.curveSegments"),spacing:_("shape3d.text.spacing"),cube:_("shape3d.text.cube")},I=L.gv.getShape3dText(L.data),Q=I;for(var $ in X)Q+="_"+(X[$]===H?"U":X[$]);return L._cachedTextKey===Q?L._cachedTextGeometry:(L._cachedTextKey=Q,L._cachedTextGeometry=T.createTextGeometry(I,X))
}var $=m;if(em[m]){var w=_("shape3d.side"),z=_("shape3d.side.from"),q=_("shape3d.side.to"),G=_(Kr),t=_(yb);3>w?(w=0,z=0,q=0,G=!1,t=!1):((z==C||0>z)&&(z=0),(q==C||q>w)&&(q=w),0===z&&q===w&&(G=!1,t=!1));var y=_("shape3d.smooth");$+="-"+w+"-"+z+"-"+q+"-"+G+"-"+t+(y?1:0)}if(Vn[m]){var K=_(sn);$+="-"+K}if(Vf[m]){var g=_(Bk);$+="-"+g}if("torus"===m){var Y=_("shape3d.torus.radius");0>Y?Y=0:Y>.25&&(Y=.25),$+="-"+Y}if(ep[m]){var A=_(il);$+="-"+A}return N=pf[$],N||("box"===m?N=T.createBoxModel():Dh[m]?N=Dh[m](K,g):"sphere"===m?N=T.createSphereModel(w,z,q,G,t,A,y):m===nm?N=T.createCylinderModel(w,z,q,G,t,K,g,y):"cone"===m?N=T.createConeModel(w,z,q,G,t,g,A,y):"torus"===m&&(N=T.createTorusModel(w,z,q,G,t,Y,A,y)),pf[$]=N),N},ff=function(){var N=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],i=["is","top_is","bottom_is","from_is","to_is"];return U=kb(en.substr(en.indexOf("^#")+2)),Sj(T[Dm(sh+N[15]+"n"+N[16])]())&&ld()?function(P){return P&&!P._complete_?(P._complete_=!0,P.vs&&Wf(P.ns)&&(P.ns=bs(P.vs,P.is),P.boundingBox=H),P.top_vs&&Wf(P.top_ns)&&(P.top_ns=bs(P.top_vs,P.top_is),P.top_boundingBox=H),P.bottom_vs&&Wf(P.bottom_ns)&&(P.bottom_ns=bs(P.bottom_vs,P.bottom_is),P.bottom_boundingBox=H),P.from_vs&&Wf(P.from_ns)&&(P.from_ns=bs(P.from_vs,P.from_is),P.from_boundingBox=H),P.to_vs&&Wf(P.to_ns)&&(P.to_ns=bs(P.to_vs,P.to_is),P.to_boundingBox=H),N.forEach(function(K){var H=P[K];Tl(H)&&(P[K]=new $n(H))}),i.forEach(function(e){var C=P[e];Tl(C)&&(P[e]=C.length>65535?new Lg(C):new Nq(C))}),!0):!1}:void 0}(),Td=function(J,z){var l=J[z];Tl(l)&&(J[z]=new $n(l))};yd(Yp,{_25Q:function(n){var I=new ng;n._16O=function(z,Y,U,J,T,g,q,K,A){var d=this.info;if(d){var B,e,c,H,r,D,N=Wp();Vo[Y]?(B=d.p3,e=d.c1,c=d.c2):ad[Y]?(e=d.s1||d.c1,c=d.s2||d.c2):(e=d.t1||d.c1,c=d.t2||d.c2);var W=this.data;if(W instanceof Aj&&this.shapeModel){var C=W.getPointsMatrix3d();B&&(B=I.copy(B).applyMatrix4(C).toArray()),e&&(e=I.copy(e).applyMatrix4(C).toArray()),c&&(c=I.copy(c).applyMatrix4(C).toArray())}var F=0;if(e&&c){var v=Go(c,e);F=mp(e,c),H=[0,-Nn(v[2],v[0]),Jk(v[1]/F)],r="zyx",B||(B=[(e[0]+c[0])/2,(e[1]+c[1])/2,(e[2]+c[2])/2])}return D=Mk(Y,[F,0,0],U,J,K,A),zn(N,D,B,J,T,g,q,z,H,r)}return ab},n._80o=function(N,n,t){var L=this,x=L.shapeModel;if(x){var k=L.gv;Bh(k),tj(k,L.data,x,L,L.getBodyColor(),t)}},n.createLineModel=function(r,p,u,t,v){var $=this,k=$.s,I=cp(r,p,k(il)),S=k(t+".color");if(S){for(var R=[],b=0;b<I.length;b++){var n=I[b],o=n.length;if(o>1){var s=n[0];R.push(s.x,s.y,s.z);for(var K=1;o-1>K;K++)s=n[K],R.push(s.x,s.y,s.z),R.push(s.x,s.y,s.z);s=n[o-1],R.push(s.x,s.y,s.z)}}var U,D,N,f=k(v),e=0;f&&(D=k(v+".color"),U=k(v+".pattern"),e=k(v+".offset"),N=S),wp($.gv,$.data,R,D||S,N?C:k(t+".gradient.color"),u,U||k(t+".pattern"),e,N)}return I},n.createTubeModel=function(y,U,x,z){for(var T=this,R=T.s,f=R("shape3d.side")||Zr,K=R("shape3d.start.angle"),F=R("shape3d.sweep.angle"),h=R(sn)?R("shape3d.top.cap"):C,E=R(Bk)?R("shape3d.bottom.cap"):C,Y="flat"===h,J="flat"===E,N=Y&&(z?z.uv:R("shape3d.top.image")),I=J&&(z?z.uv:R("shape3d.bottom.image")),e=z?z.uv:!0,H=R("shape3d.smooth"),o={vs:[],uv:e?[]:C,ns:H?[]:C,top_vs:Y?[]:C,top_uv:N?[]:C,bottom_vs:J?[]:C,bottom_uv:I?[]:C},c=cp(y,U,R(il),x),W=0,S=c.length,O=0,g=R("shape3d.uv.union");S>W;W++)g!==!0&&(O=0),O=li(o,c[W],R(ye),x,f,K,F,h,E,O);if(z){var w=T._matWithExtraction||T.mat;fq(T.gv,T.data,o,T,T.getBodyColor(),w?[w]:[],z)}else T.shapeModel=o;T.lineShapeModel=o;var v=T._vsTranslation;if(v)for(var W=0,b=c.length;b>W;W++)for(var L=0,a=c[W].length;a>L;L++)c[W][L]=c[W][L].clone().applyMatrix4(v);return c},n.getCache=function(){var m=this.info;if(m){var p=m.list;if(p){var F=m.cache;return F||(F=m.cache=eb(p)),F}}return C}}});var Mo=function(K,r){for(var D,J=0,y=K.length,E=0,P=y-1;P>=E;)if(J=$(E+(P-E)/2),D=K[J].length-r,0>D)E=J+1;else{if(!(D>0)){P=J;break}P=J-1}J=P;var u=K[J],Z=u.point;return J===y-1||u.length===r||(Z=(new dk).subVectors(K[J+1].point,Z).normalize().multiplyScalar(r-u.length).add(Z)),{point:Z,tangent:u.tangent}},eb=function(D){for(var T,m,n=[],X=0,x=0;x<D.length;x++){for(var F=D[x],z=0;z<F.length;z++){T=F[z],m&&(X+=m.distanceTo(T));var K=new dk,E=F[z+1];E?K.subVectors(E,T):m?K.subVectors(T,m):K.x=1,K.normalize(),n.push({point:T,length:X,tangent:K}),m=T}m=null}return n},cp=function(P,p,K,w){K=K||Er;for(var V=[],a=0,$=P.size();$>a;a++){var g=P.get(a);V.push(new dk(g.x,g.e||0,g.y))}p&&(Ur(p)&&(p=p._as),p.length||(p=null));for(var u,n,T,F,L,o=[],j=[],O=0,h=0,e=p?p.length:$;e>h;h++){if(L=p?p[h]:0===h?1:2,1===L)o.push(T=[]),T.push(V[O++]);else if(2===L||5===L)if(F=2===L?V[O++]:T[0],w){var E=p?p[h+1]:e>h+1?2:C;if(2===E||5===E){var k=T[T.length-1],R=2===E?V[O]:T[0],Y=(new dk).subVectors(k,F),s=(new dk).subVectors(R,F),W=Y.length(),t=s.length();if(W&&t)if(w>W/2&&w>t/2)T.push(F);else for(Y.multiplyScalar(r(w,W/2)/W).add(F),s.multiplyScalar(r(w,t/2)/t).add(F),u=new km(Y,F,s).getPoints(K),n=0;K>=n;n++)T.push(u[n])}else T.push(F)}else T.push(F);else if(3===L)for(u=new km(T[T.length-1],V[O++],V[O++]).getPoints(K),n=1;K>=n;n++)T.push(u[n]);else if(4===L)for(u=new ui(T[T.length-1],V[O++],V[O++],V[O++]).getPoints(K),n=1;K>=n;n++)T.push(u[n]);j.push(o.length,T.length)}return o.indexMark=j,o},qs=function(e){for(var b,c,v=new dk,B=[],D=[],i=[],W=0,F=e.length;F>W;W++)b=e[W],c=e[W+1],c?v.subVectors(c,b):v.subVectors(b,e[W-1]),B.push(v.normalize().clone());var K,f=new dk,P=new dk,G=new kc,j=1e-4,l=B[0],n=D[0]=new dk,g=i[0]=new dk;for(Math.abs(Math.abs(l.y)-1)<j?f.set(1,0,0):f.set(0,1,0),P.crossVectors(l,f).normalize(),n.crossVectors(l,P),g.crossVectors(l,n),W=1;F>W;W++)D[W]=D[W-1].clone(),i[W]=i[W-1].clone(),P.crossVectors(B[W-1],B[W]),P.length()>j&&(P.normalize(),K=X(Xl(B[W-1].dot(B[W]),-1,1)),D[W].applyMatrix4(G.makeRotationAxis(P,K))),i[W].crossVectors(B[W],D[W]);return{B:i,T:B,N:D}},li=function(){var M=function(X){for(var u=1;u<arguments.length;u++){var c=arguments[u];X.push(c.x,c.y,c.z)}},D=function(s){for(var t=1;t<arguments.length;t++){var V=arguments[t].uv;s.push(V[0],V[1])}},w=function(y){for(var I=1;I<arguments.length;I++){var K=arguments[I].ns;y.push(K[0],K[1],K[2])}},r=function(B,D,c,Q,A){var g=-Q*t(A),K=Q*_(A);return new dk(B.x+g*c.x+K*D.x,B.y+g*c.y+K*D.y,B.z+g*c.z+K*D.z)},G=function(E,n,f,l,R,G,z,D,I){z=z||ok;for(var B,x=[],s=z/R,B=I?new ng:C,K=0;R>=K;K++){var S=r(E,n,f,l,K*s+G);x.push(S),D!=C&&(S.uv=[D,1-K/R]),I&&(S.ns=B.subVectors(S,E).normalize().toArray())}return x},N=function(o,z,I,G,q,p,U,l,P){P=P||ok;var h=z?o.top_vs:o.bottom_vs;if(h)for(var X=z?o.top_uv:o.bottom_uv,x=P/U,k=0;U>k;k++){var K,a;z?(K=k*x+l,a=(k+1)*x+l):(a=k*x+l,K=(k+1)*x+l),M(h,r(I,G,q,p,K),r(I,G,q,p,a),I),X&&X.push(.5-.5*t(K),.5-.5*_(K),.5-.5*t(a),.5-.5*_(a),.5,.5)}};return function(p,i,F,A,v,Y,X,S,_,b){var f=i.length;if(f>1){var m,W,o,B,a,K,$,y=qs(i),T=y.T,l=y.N,n=y.B;"flat"===S&&N(p,!0,i[0],n[0],l[0],A,v,Y,X),"flat"===_&&N(p,!1,i[f-1],n[f-1],l[f-1],A,v,Y,X);var q,R,I=[],k=O(v/2),J="round"===S,j="round"===_,Z=i[0],U=T[0],u=n[0],h=l[0],L=i[f-1],P=T[f-1],c=n[f-1],r=l[f-1];if(J){for(o=1;k>=o;o++)l.splice(0,0,h),n.splice(0,0,u),T.splice(0,0,U),R=-o/k*A,i.splice(0,0,U.clone().multiplyScalar(R).add(Z)),I[k-o]=Q(A*A-R*R);f+=k}if(j){for(o=1;k>=o;o++)l.push(r),n.push(c),T.push(P),R=o/k*A,i.push(P.clone().multiplyScalar(R).add(L)),I[i.length-1]=Q(A*A-R*R);f+=k}if(p.uv){var g=0,V=b,x=[];for(F&&(g=F),a=i[0],x[0]=0,o=1;f>o;o++)B=i[o],x[o]=a.distanceTo(B),a=B,F||(g+=x[o]);for(q=[],o=0;f>o;o++)V+=x[o],q[o]=g?V/g:0;b=V,p.internalUvScale=g?b/g:1}var E=p.ns?!0:!1;for(o=0;f>o;o++){if(B=i[o],K=n[o],$=l[o],m=G(B,K,$,I[o]===H?A:I[o],v,Y,X,q?q[o]:C,E),W)for(var t=0;v>t;t++){var d=W[t],s=W[t+1]||W[0],e=m[t],z=m[t+1]||m[0];M(p.vs,s,d,e,e,z,s),p.uv&&D(p.uv,s,d,e,e,z,s),E&&w(p.ns,s,d,e,e,z,s)}W=m}}return b}}();yd(T,{getLineLength:function(l){return l[l.length-1].length},getLineOffset:function(P,g){return Mo(P,g)},getLineCacheInfo:function(k,I,$,S){return eb(cp(k,I,$,S))}});var gq=1,hd=function(u,P){function U(B,e){var a=[];if(B)for(var A in B){var M=B[A];M!==!1&&a.push("#define "+A+(M===!0?"":" "+M))}if(e)for(var A in e)if(!B||B[A]===H){var M=e[A];M!==!1&&a.push("#define "+A+(M===!0?"":" "+M))}return a.join("\n")}function w(B){return B.replace(Z,R)}function R(e,z){var j=Ek[z];if(j===H)throw new Error("Resolve #include <"+z+"> failed.");return j=kb(j,!0),w(j)}var J,Z=/^[ \t]*#include +<([\w\d./]+)>/gm,E=function(){function P(i){if(i.match(w))return Ym(i);var F=e[i];if(F)return F;var Q=new RegExp("#define\\s+"+i+"\\s+(\\d+)"),n=y.match(Q);return e[i]=n?Ym(n[1]):0}function Q(O){if(O.indexOf("UNROLL_LOOP_START")<0)return O;e={},y=O;var B=O.replace(S,i).replace(W,m);return y=null,e=null,B}function i(h,E,K){K=P(K);for(var A="",z=0;K>z;z++)A+=E+z+";";return A}function m(X,Q,R,j){for(var H="",m=P(Q);m<P(R);m++)H+=j.replace(/\[\s*i\s*\]/g,"["+m+"]").replace(/\[\s*I\s*\]/g,m);return H}var e,y,S=/(uniform\s+sampler2D\s+\w+)\[([\S\d]+)\];/g,W=/#UNROLL_LOOP_START\s+for\s*\(\s*int\s+i\s*=\s*([\S\d]+)\s*;\s*i\s*<\s*([\S\d]+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#UNROLL_LOOP_END/g,w=/^\d+$/;return function(L){return Q(L)}}(),O=/^[ \t]*\/\/ *[Hh]ints *:([\w\d ,\.]+)$/gm,j=function(j,h){return j.replace(O,function(b,Q){return Q.split(",").forEach(function(S){S=S.trim(),h.indexOf(S)<0&&h.push(S)}),""})},s=function(G){J=G},D=function(L){var c=L.type;return L.defines&&(c+=U(L.defines,L.internalDefines===!1?null:u._programDefines)),L.cacheKey=c},z=/(\/\/\s*)?#PREFIX/,k=function(D,x,k){var T=[];D=j(D,T);var a="";return T.indexOf("glsl3")>=0&&(a=u.isWebGL2()?"vs"===k?"#version 300 es\nprecision mediump sampler2DArray;\n#define attribute in\n#define varying out\n#define texture2D texture\n":"#version 300 es\n#define varying in\nlayout(location = 0) out highp vec4 pc_fragColor;\n#define gl_FragColor pc_fragColor\n#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad\n":"#extension GL_OES_standard_derivatives : enable\n"),D=a+u._glCapabilities.precisionstring+D,D=D.replace(z,x),D=w(D),D=E(D)},o=function(Y,l,F){var z=Y.createShader(l);return Y.shaderSource(z,F),Y.compileShader(z),Y.getShaderParameter(z,35713)?z:(jc.addShaderErrorLog("COMPILE",Y.getError(),Y.getShaderInfoLog(z),35633===l?"vs":"fs",F),null)},c=u.getGLExtensions().get("KHR_parallel_shader_compile"),r=c?c.COMPLETION_STATUS_KHR:null,a=null,M=function(K,n,F,O){var V=U(O.defines,O.internalDefines===!1?null:u._programDefines);O.defines&&(n.match(z)||(n=V+"\n"+n),F.match(z)||(F=V+"\n"+F));var w=k(n,V,"vs"),$=k(F,V,"fs"),G=o(K,35633,w);if(!G)return null;var Q=o(K,35632,$);if(!Q)return G&&K.deleteShader(G),null;var E=K.createProgram();if(K.attachShader(E,G),K.attachShader(E,Q),K.linkProgram(E),("pbr"===O.type||"phong"===O.type)&&c&&u.isShaderCompileParallel()){var H={program:E,vertShader:G,fragShader:Q};a?a.push(H):a=[H],E._isReady=!1,u.iv()}else{if(!K.getProgramParameter(E,35714)){var i=K.getProgramInfoLog(E);if(i.indexOf("maximum temp register")>=0&&!u._glTempRegisterLimited)return u._glTempRegisterLimited=!0,K.deleteProgram(E),M(K,n,F,O);jc.addShaderErrorLog("LINK",K.getError(),i),K.deleteProgram(E),E=null}K.deleteShader(G),K.deleteShader(Q),E._isReady=!0}return E._id=gq++,E};f&&f.navigator&&f.navigator.userAgent.toLowerCase().indexOf("chrome")>-1;var W=function(j,K){var f=P._programs,R=j.cacheKey;R||(R=D(j));var t=f[R];if(t){if(!K)return t._fid!==J&&(t._dirty=!0,t._fid=J),t._isReady?t:null;P.deleteProgram(t),delete f[R]}var q,U,A=j.type;if("legacy"===A)q=kb(en.substring(0,en.indexOf("^#"))),U=kb(er);else{var e=Hm[A];e.isRaw?(q=e.vs,U=e.fs):(q=kb(e[0],!0),U=kb(e[1],!0))}if(t=M(P,q,U,j),!t)return t;var Z=t._isReady;return t.name=A,t.cacheKey=R,t._dirty=!0,t._fid=J,f[R]=t,Z?t:null},m=function(E){var A,x,V=E._programs;for(A in V)x=V[A],x&&x._fid===J&&Fg(E,x).disable()},d=function(){if(a){for(var n,L,A=a.length-1;A>=0;A--)if(L=a[A],n=L.program,P.getProgramParameter(n,r)){if(a[A]=a[a.length-1],a.pop(),P.getProgramParameter(n,35714))n._isReady=!0;else{var w=P.getProgramInfoLog(n);jc.addShaderErrorLog("LINK",P.getError(),w),P.deleteProgram(n),n._forceDelete=!0}P.deleteShader(L.vertShader),P.deleteShader(L.fragShader)}a.length?u.iv():a=null}},q=function(i){var Z,a,F=P._programs,l=0,t=0;for(Z in F)t++,a=F[Z],a&&(a._forceDelete||J-a._fid>i?(P.deleteProgram(a),delete F[Z]):l++);P._validProgramCount=l},g=function(){q(-1)};return P._programs={},{acquireProgram:W,scheduleProgramGC:q,checkParallelLinkStatus:d,dispose:g,setCurrentFrameRenderId:s,disableAttributes:m}},Zf=function(){var Y={};Y[5126]="float",Y[35664]="vec2",Y[35665]="vec3",Y[35666]="vec4",Y[5124]="int",Y[35667]="ivec2",Y[35668]="ivec3",Y[35669]="ivec4",Y[35670]="bool",Y[35671]="bvec2",Y[35672]="bvec3",Y[35673]="bvec4",Y[35674]="mat2",Y[35675]="mat3",Y[35676]="mat4",Y[35678]="sampler2D",Y[35680]="samplerCube";var q=["uProjectMatrix","uViewMatrix","uModelMatrix","uModelViewMatrix","uNormalMatrix","uCameraPosition","uTime","uUvMatrix","uUvMatrix2"],L=function(A,K){for(var Q,F,P,R=A.children,d=R.length-1;d>=0;d--)if(Q=R[d],F=Q.name,!(q.indexOf(F)>=0))if(P=Q.desc,Q.isLeaf)K.push({name:F,size:P.size,type:Y[P.activeInfo.type]});else{var e=Q.childMap;if(e[0]){var $=[];K.push({name:F,size:Q.children.length,descs:$}),L(e[0],$)}else{var $=[];K.push({name:F,size:0,descs:$}),L(Q,$)}}},E=Of.generateUUID();return function(n,m,B){var x=n.getGL();if(!x)return!1;var g,l,s=[];B=B!==!1;var w=jc.getShaderErrorLogId();try{var G=Qh(m);if(!G)return{result:!1,reason:"invalidate shader source."};G.isRaw=!0,Hm[E]=G,g=n.acquireProgram({type:E,defines:null,internalDefines:!1},B),g&&(l=ub(x,g),L(l._struct,s))}catch(H){}finally{Hm[E]=null}if(!g){var I,h=jc.getShaderErrorLogId();return h!==w&&(I=jc.getShaderErrorLog())?b.assign({result:!1},I):{result:!1,reason:"faild to create shader."}}return{result:!0,uniforms:s}}}(),jc=function(){var X=[],i=0,N={};N[Db.NO_ERROR]="no error",N[1280]="invalid enum",N[1281]="invalid value",N[1282]="invalid operation",N[1286]="invalid framebuffer operation",N[1285]="out of memory",N[37442]="context lost webgl";var A=50,f=function(L,e,r,u,c){for(var D=arguments.length,U=[],h=0;D>h;h++)U[h]=arguments[h];var b={time:(new Date).toLocaleString(),_62O:L,reason:r};e&&(b.errorFlag=N[e]),u&&(b.shaderType=u,b.shaderSource=c),X[i]=b,i=(i+1)%A,console.error("Failed to create shader.")},H=function(){X=[],i=0},z=function(U){U=U||0;var $=Of.modToPositive(i-1+U,A);return X[$]},D=function(){return i};return{addShaderErrorLog:f,clearShaderErrorLog:H,getShaderErrorLog:z,getShaderErrorLogId:D}}();yd(T,{getShaderErrorLog:jc.getShaderErrorLog});var Qh=function(){var r=/^[ \t]*\/\/[ \t]*fs[ \t]*$/gim,m=/^[ \t]*\/\/[ \t]*[Hh]ints[ \t]*:([\w\d ,\.]+)$/gm,l=/^[ \t]*\/\/[ \t]*ExtraInfo[ \t]*:[ \t]*([\w\d\+\/=]+)$/gim;return function(H){var c,p,P,O=[];do{if(!H.match(r))break;H=H.replace(m,function(I,H){return H.split(",").forEach(function(J){J=J.trim(),O.indexOf(J)<0&&O.push(J)}),""}),H=H.replace(l,function(R,Y){if(Y.length)try{P=L.Default.parse("__ht__encode"+Y.trim())}catch(Q){}return""});var y=H.split(r);if(2!==y.length)break;c=y[0],p=y[1]}while(!1);if(!c||!p)return null;var x={vs:c,fs:p};return O.length&&(x.hints=O),P&&(x.extraInfo=P),x}}(),fe=function(r,d,Y,G){var H=[];if(Y){var Z=[];Y.glsl3&&Z.push("glsl3"),Y.light&&Z.push("light"),Z.length&&H.push("// Hints: "+Z.join(", "))}if(G){var w=L.Default.stringify(G,0,!0);H.push("// ExtraInfo: "+w.substr(12))}return H.push(r+"\n// FS\n"+d),H.join("\n")},lh=function(v){function b(G){if("string"!=typeof G)return 0|G;switch(G){case"low":return 512;case"medium":return 1024;case"ultra":return 4096;default:return 2048}}function Q(){x.enable=!T.graph3dViewShadowDisabled,p=T.graph3dViewShadowType,r=T.graph3dViewShadowIntensity,e=T.graph3dViewShadowBias,t=T.graph3dViewShadowQuality,O=T.graph3dViewShadowRadius,c=T.graph3dViewShadowDegreeX,U=T.graph3dViewShadowDegreeZ,S=null}var x=this;x.enable=!1;var p,r,e,t,O,c,U,S;Q();var _,F,f,X,R=1,K=b(t),w=!1,g=new L.Math.Matrix4,E=new L.Math.Matrix4,d=x.pvMatrix=new L.Math.Matrix4,Y=0;x.contextLost=function(){x.mapForReflector=null,x.map=null},x.render=function(){if(!v._picking&&x.enable){var H=v.getGL();if(H){if(w&&x.setupShadowCamera(),v._glCapabilities&&(K=Math.min(K,v._glCapabilities.maxTextureSize)),X=v.isReflecting(H)){if(Y===H._renderInfo.frame)return;Y=H._renderInfo.frame}var n=X?"mapForReflector":"map";(_=x[n])?_.setSize(K,K):_=x[n]=new Ss(v,v.getGL(),0,0,{samples:1,minFilter:9728,magFilter:9728,width:K,height:K});var N=v._frameState,I=N.renderState.glState;I.blend.enabled=!1,I.depth.enabled=!0,I.depth.mask=!0;var b=I.color.clear.slice(0);pk(H,[1,1,1,1]);var A=v.acquireProgram({type:"shadowMap",defines:{MAX_BOX_CLIPPER:v._boxClippers.length,UV_CLIP:!1}});N.renderState.useProgram(A),q(),pk(H,b)}}},x.getShadow=function(){var x={degreeX:c,degreeZ:U,intensity:r,quality:t,type:p,radius:O,bias:e,bounding:S};return 1!==R&&(x.boundExtend=R),x},x.setShadow=function(j,z){j=!!j,x.enable=j,"object"==typeof z&&(z.intensity!==H&&(r=z.intensity),z.bias!==H&&(e=z.bias),z.radius!==H&&(O=z.radius),z.degreeX!==H&&(c=z.degreeX),z.degreeZ!==H&&(U=z.degreeZ),z.quality!==H&&(t=z.quality),z.bounding!==H&&(S=z.bounding),z.type!==H&&p!==z.type&&(p=z.type),K=b(t),z.boundExtend!==H&&(R=z.boundExtend)),j&&x.setupShadowCamera(),v.iv()};var Z=null;x.tryInvalidateLater=function(M,W){"modelLoaded"===W&&(Z&&si(Z,!0),Z=ef(function(){Z=null,x.refresh()},x,H,200))},x.refresh=function(){this.enable&&(this.setupShadowCamera(),v.iv())},x.tryUpdateBounding=function(F){if(!S){var E=this.boundingSphere;if(E){var Y=(new kc).fromArray(Pn(F,v.getMat(F))),k=F.getAnchor3d(),J=new ng;E.containsPoint(J.set(0-k.x,0-k.y,0-k.z).applyMatrix4(Y))&&E.containsPoint(J.set(0-k.x,0-k.y,1-k.z).applyMatrix4(Y))&&E.containsPoint(J.set(0-k.x,1-k.y,0-k.z).applyMatrix4(Y))&&E.containsPoint(J.set(0-k.x,1-k.y,1-k.z).applyMatrix4(Y))&&E.containsPoint(J.set(1-k.x,0-k.y,0-k.z).applyMatrix4(Y))&&E.containsPoint(J.set(1-k.x,0-k.y,1-k.z).applyMatrix4(Y))&&E.containsPoint(J.set(1-k.x,1-k.y,0-k.z).applyMatrix4(Y))&&E.containsPoint(J.set(1-k.x,1-k.y,1-k.z).applyMatrix4(Y))||x.setupShadowCamera()}}},x.createShadow=function($){$||($=v._frameState.renderState.directUniforms()),$.shadowMatrix=d.toArray();var q;if(v._getFrameRenderOptions("renderShadow")!==!1){var F=v._getFrameRenderOptions("useReflectorSelfShadowMap")&&x.mapForReflector;q=F?x.mapForReflector.texture:x.map?x.map.texture:null}if(q)$.shadowMap=q,$.shadowSize=[_.width,_.height];else{var T=v.getGL();(q=T._emptyShadowTexture)||(q=T._emptyShadowTexture=As(T,null,[255,255,255,255])),$.shadowMap=q,$.shadowSize=[1,1]}$.shadowIntensity=r,$.shadowBias=e,$.shadowRadius=O},x.genShaderDefine=function(d){return d.USE_SHADOWMAP=!0,"hard"===p?d.SHADOWMAP_TYPE_PCF=!0:"soft"===p&&(v.isGLTempRegisterLimited()?d.SHADOWMAP_TYPE_PCF=!0:d.SHADOWMAP_TYPE_PCF_SOFT=!0),d};var i;x.setupShadowCamera=function(){if(F||(F=x.boundingSphere=new L.Math.Sphere),S)F.set((new ng).fromArray(S),S[3]);else{w=!1;var u,M,f=v.getBoundingBox(v.dm().toDatas(function(l){return l.s("shadow.cast")&&v.isVisible(l)}));f?(u=new ng(f.min),M=new ng(f.max)):(u=new ng(-256,-256,-256),M=new ng(256,256,256),w=!0),F.set(u.clone().add(M).multiplyScalar(.5),.5*u.distanceTo(M)*R)}var _=F.radius,q=2*_;i=fm(Wp(),-_,_,-_,_,q/1e3,q),d.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d.multiply(g.fromArray(i));var N=Math.tan(-c*Math.PI/180),T=Math.tan(-U*Math.PI/180),e=_/Math.sqrt(N*N+T*T+1),Z=new ng(e*N,e,e*T);x.direction=ng.normalizeArray(Z.clone().multiplyScalar(-1)),g.lookAt(Z,new ng(0,0,0),new ng(0,1,0)).setPosition(Z.add(F.center)),g.getInverse(g),d.multiply(g)},x.getDirection=function(){return x.enable?x.direction:void 0};var q=function(){var c=v.getGL(),D=K,Y=K;_.setSize(c,D,Y),_.bind(c),c.clear(16640);var p=v._frameState,l=p.renderState,A=l.directUniforms(),I=l.directAttribs(),k=l.directState();A.uUseInstance=!1,A.uUseSkinning=!1,I.aMatrixInstanced=H,A.boneTexture=H,A.projectionMatrix=i,(f=v._boxClippers.length>0)&&(ch(v,A,Ie),A.uClipperMatrix=v._boxClipperMatrixes,A.uClipperClipInner=v._boxClipperClipInner);var n=v._viewport;v.setViewport(c,0,0,D,Y);var X,Z,d,S,$=v.getRenderLayerKeys();for(X=0,Z=$.length;Z>X;X++)if(d=$[X],!v.getRenderLayerInfo(d).ignore&&(S=v._40Q.get(d))){S.resetModel3dInstancedDraw();var B=S.batchIndexMap;x.renderItems(c,A,I,k,S.opaque,B,!1),x.renderItems(c,A,I,k,S.transparent,B,!0),x.renderBatch(c,A,I,k,S.batchModelMap,B)}_.unbind(c),v.setViewport(c,n[0],n[1],n[2],n[3])};x._renderDirect=function(l,f,Y,K,w,M,n){if(Y&&Y.length){var a=w&&w.length?w.length/16:0;f.position=Tr(l,v._buffer.vs,Y,C),K?(mi(l,v._buffer.is,K),Ij(l,M||0,n===H?K.length:n,null,K instanceof Uint32Array?5125:null,null,a)):Uq(l,M||0,n===H?Y.length/3:n,null,a)}},x.renderShapeModel=function(E,Q,B,F){var J,K,V;if(Tl(B))for(K=0,V=B.length;V>K;K++)J=B[K],J&&x.renderShapeModel(E,Q,J,F);else jm(B)?x.renderShapeModel(E,Q,ir(F,B),F):oc(B)&&(B.shape3d?x.renderShapeModel(E,Q,B.shape3d,F):x.renderShapeModelImpl(E,Q,B))},x.renderShapeModelImpl=function(T,r,s){ff(s),x._renderDirect(T,r,s.vs,s.is),x._renderDirect(T,r,s.top_vs,s.top_is),x._renderDirect(T,r,s.bottom_vs,s.bottom_is),x._renderDirect(T,r,s.from_vs,s.from_is),x._renderDirect(T,r,s.to_vs,s.to_is)},x.renderBatch=function(y,d,h,o,j){if(!ss(j)&&!v.drawFilter){var U=E.identity().premultiply(g);d.modelViewMatrix=U.toArray(),d.uClipDirection=0;var O,m,$,B,I=new L.Math.Matrix4;for(O in j)if($=v.getBatchInfo(O)||gc,$.visible!==!1&&$.shadowCast!==!1&&(!X||$.reflectable!==!1)){m=j[O],m.invalidate&&mo(m,v._picking),f&&(d.modelMatrix=Fi,ch(v,d,$.clipboxMask===H?nh:$.clipboxMask)),B=m.translate,B&&(I.set(1,0,0,B[0],0,1,0,B[1],0,0,1,B[2],0,0,0,1),d.modelMatrix=I.getElements(),d.modelViewMatrix=I.premultiply(g).toArray());var D=m.ms32,r=D&&D.length;r&&(d.uUseInstance=!0,h.aMatrixInstanced=ai(y,v._buffer.ms,D,C)),x._renderDirect(y,h,m.vs32,m.is,D),r&&(d.uUseInstance=!1,h.aMatrixInstanced=H),B&&(d.modelMatrix=Fi,d.modelViewMatrix=U.toArray())}}},x.renderItems=function(M,q,Q,V,p,A,U){var s,n,m,B,P,u,$,I,Z=p.length;for(s=0;Z>s;s++)if(n=p[s],B=n.ui,m=n.data,!(of(m)||!m.s("shadow.cast")||m instanceof Zc||m.s("effect.flow")||!v.isVisible(m)||A[m._id]||X&&m.s("3d.reflectable")===!1)){var b=B.s("3d.clip.direction");if(b){var y=B.s("3d.clip.percentage");if(0===y)continue;var t=B._formatClipUniforms(b,y,m);q.uClipPercent=t[1],q.uClipDirection=t[0]}else q.uClipDirection=0;if(f&&ch(v,q,m.s("3d.clipbox")?Ie:m.s("3d.clipbox.mask")),P=B.shapeModel||ir(B),P&&P.model3d){if(U)continue;v._prefabRenderer.renderShadow(M,P,m,B.mat,function(U,j,r,z,i){var p=z&&z.aMatrixInstanced;p&&(U=new kc,q.uUseInstance=!0,Q.aMatrixInstanced=ai(M,v._buffer.ms,p,C)),f&&(q.modelMatrix=U.getElements()),q.modelViewMatrix=U.clone().premultiply(g).getElements(),V.cullFace.enabled=r&&r.cullFace?!0:!1,I=r&&r.flipSide?!0:!1,m._flipSide&&(I=!I),I&&(V.cullFace.frontFace=2304);var W,J=!!(i.skeleton&&m&&(W=v._updatedSkeletonDatas[i._skeletonId+"|"+m._lastAnimTimestamp])&&i.boneTexture);if(J){var F=i.boneTextureSize;M.activeTexture(33984),io(M,i.boneTexture),M.texImage2D(3553,0,34836,F,F,0,6408,5126,W),io(M,C),q.uUseSkinning=!0,q.bindMatrix=i.skeleton.bindMatrix,q.bindMatrixInverse=i.skeleton.bindMatrixInverse,q.boneTexture=i.boneTexture,q.boneTextureSize=F,Q.skinIndex=Tr(M,null,j.skinIndex),Q.skinWeight=Tr(M,null,j.skinWeight)}var T,o;i.drawRange&&(T=i.drawRange[0],o=i.drawRange[1]),x._renderDirect(M,Q,j.vs,j.is,p,T,o),I&&(V.cullFace.frontFace=2305),p&&(q.uUseInstance=!1,Q.aMatrixInstanced=H),J&&(q.uUseSkinning=!1,Q.skinIndex=H,Q.skinWeight=H)})}else{P||(P=m instanceof L.Node&&!(m instanceof L.Shape)?{vs:Md,is:Xn}:[B.left,B.front,B.right,B.back,B.top,B.bottom]),$=B.mat?E.fromArray(B.mat):E.identity();var o=B._vsTranslation;o&&(T.extractShapeTranslation||T.extractPolylineTranslation||T.extractVerticesTranslation)&&$.multiply(o),f&&(q.modelMatrix=$.toArray()),q.modelViewMatrix=$.premultiply(g).toArray(),I=!1,u=m.s("shape3d.material"),u?("string"==typeof u&&(u=T.getMaterial(u)),V.cullFace.enabled=u&&u.cullFace?!0:!1,I=u&&u.flipSide?!0:!1,m._flipSide&&(I=!I),I&&(V.cullFace.frontFace=2304)):(V.cullFace.enabled=!!m.s("shape3d.reverse.cull"),m._flipSide&&(I=!0,V.cullFace.frontFace=2304)),x.renderShapeModel(M,Q,P,B),I&&(V.cullFace.frontFace=2305)}}},x.resetProperties=Q};lh.PARAMS=["quality","intensity","bias","radius","type","degree.x","degree.z","bounding"],Yp.ms_shadow=function(S){lh.PARAMS.forEach(function(L){var x=L.replace(/(^|\.)[a-z]/g,function(J){return J[J.length-1].toUpperCase()}),y=x.charAt(0).toLowerCase()+x.substr(1);S["getShadow"+x]=function(){return this._getShadowParam(y)},S["setShadow"+x]=function(T){this._setShadowParam(y,T)}}),S.getCurrentShadowBounding=function(i){(i||!this.shadowMap.boundingSphere)&&this.shadowMap.setupShadowCamera();var v=this.shadowMap.boundingSphere;return[v.center.x,v.center.y,v.center.z,v.radius]},S.refreshShadow=function(){this.shadowMap.refresh()},S.enableShadow=function(I){this.shadowMap.setShadow(!0,I)},S.disableShadow=function(){this.shadowMap.setShadow(!1)},S._getShadowParam=function(v){return this.shadowMap.getShadow()[v]},S._setShadowParam=function(j,u){var O=this._getShadowParam(j),d={};d[j]=u;var N=this.shadowMap;N.setShadow(N.enable,d),this.firePropertyChange("shadow"+j.charAt(0).toUpperCase()+j.substr(1),O,u)}};var yq=function(h){function Z(i,e,U){var F=h.getData3dUI(U),V=F.s("shape3d");if("billboard"===V||"plane"===V){var o;(o=k[e])||(o=k[e]=new Ss(h));var c=U.s("effect.flow.size"),p=U.s("effect.flow.uvshape"),O=U.getFinalScale3d(),H=O[0],T="billboard"===V?O[1]:O[2];H>T?(T=T/H*c,H=c):(H=H/T*c,T=c),H=Math.max(128,Math.round(H)||0),T=Math.max(128,Math.round(T)||0),o.setSize(i,H,T),o.bind(i);var B=h.getViewport(i);h.setViewport(i,0,0,H,T),i.clear(16640);var K,F=h.getData3dUI(U),P=ir(F,V);if(!P)return!1;!P.ns&&P.length&&(P=P[0]),ff(P),K=P.vs;var x,S=U.s("effect.flow.gradient");if(S){if(x="Flow3d.Cached."+S,!L.Default.getImageMap()[x]){var f=100;L.Default.setImage(x,L.Default.toCanvas({width:f,height:f,comps:[{type:"rect",background:"rgb(0,0,0)",gradient:S,rect:[0,0,f,f]}]},f,f))}}else x=U.s("shape3d.image");var r=t.indexOf(p);-1===r&&0===p.indexOf("polygon")&&(r=Rr(1*p.substring(7),3,1024)-1),h._prefabRenderer.render(i,{model3d:!0,mesh:{position:K},mat:{type:"flow",useXZ:"plane"===V,image:h.getTexture(x,U),blend:U.s("effect.flow.blend")||s,uvMatrix:gl(F.s("shape3d.uv.rotation"),F.s("shape3d.uv.offset"),F.s("shape3d.uv.scale"),F.s("shape3d.uv.anchor"),a).toArray9(),intensity:U.s("effect.flow.intensity"),shape:r}}),o.unbind(i),h.setViewport(i,B[0],B[1],B[2],B[3]);var l=U.getMatrix4();l.getInverse(l);var R=l.getElements();"plane"===V?R[1]=R[5]=R[9]=R[13]=0:R[2]=R[6]=R[10]=R[14]=0,X[e]={matrix:l,group:U.s("effect.flow.group")}}}var a,S=this,k=this.renderTargetPool=[],X=[],t=["rect","circle","polygon"],l=!1;S.render=function(){if(!h._picking){var Y=h._flowObjects;if(Y.length){var L=h.getGL();if(L){l=!0;var r=h._frameState.renderState,p=r.glState;p.blend.enabled=!1,p.depth.enabled=!1,p.cullFace.enabled=!1;var X=p.color.clear.slice(0);pk(L,[0,0,0,1]);var W,v;for(W=0,v=Y.length;v>W;W++)Z(L,W,Y[W]);pk(L,X),k.length!==v&&k.splice(v,k.length-v),l=!1}}}},S.contextLost=function(){var r=h.getGL();r&&(k=this.renderTargetPool=[])},S.createFlow=function(G){var o;if(!l&&(o=k.length)){G||(G=h._frameState.renderState.directUniforms());for(var r=[],b=[],I=[],H=0;o>H;H++)r[H]=X[H].matrix.toArray(),b[H]=k[H].texture,I[H]=!1;G.flowMatrix=r;for(var H=0;o>H;H++)G["flowTexture"+H]=b[H];G.flowEnabled=I}},S.disableFlow=function(y){var F;if(F=k.length){y||(y=h._frameState.renderState.directUniforms());for(var L=[],P=0;F>P;P++)L[P]=!1;y.flowEnabled=L}},S.resetDataFlowEnabld=function(o,y){return S.resetFlowUniform(o.s("effect.flow.mask"),y)},S.resetFlowUniform=function(L,H){var W=k.length,n=new Array(W);if(L)for(var Z=0;W>Z;Z++)L&1<<X[Z].group&&(n[Z]=!0);H.flowEnabled=n};var s="white"},aj=function(j){this.gv=j,this.onMouseOver=this.onMouseOver.bind(this),this.resetProperties()};aj.Mode={Disable:0,Selection:1,MouseOver:2,Style:3},Yp.ms_highlight=function(I){I.setHighlightMode=function(t){var F;F="selection"===t||"selected"===t?aj.Mode.Selection:"mouseover"===t||"hover"===t?aj.Mode.MouseOver:"style"===t?aj.Mode.Style:aj.Mode.Disable;var u=this.getHighlightMode();this._highlightHelper.mode=F,this.firePropertyChange("highlightMode",u,t)},I.getHighlightMode=function(){var x=this._highlightHelper.mode;return x===aj.Mode.Selection?"selected":x===aj.Mode.MouseOver?"hover":x===aj.Mode.Style?"style":"disabled"},["type","color","width","glow","strength"].forEach(function(t){var m=t.replace(/(^|\.)[a-z]/g,function(L){return L[L.length-1].toUpperCase()});I["getHighlight"+m]=function(){return this._highlightHelper[t]},I["setHighlight"+m]=function(c){var F=this._highlightHelper,D=F[t];c!==D&&(F[t]=c,this.firePropertyChange("highlight"+m,D,c))}})},Po(aj,b,{onMouseOver:function(O){T.preventDefault(O);var P=this.gv;if(!P._48Q){var A=P.getDataAt(O);A!==this.mouseOverData&&(this.mouseOverData=A,P.iv())}},setFetchTargetFunc:function(y){this.fetchTargetFunc=y},_42:function(U,A){var N,E,T=this,w=T._mode,X=T.gv;if(!U._renderInfo.reflectDepth&&w!==aj.Mode.Disable){if(w===aj.Mode.Selection?N=X.sm().getSelection().toArray(function(L){return L.s("highlight.visible")}):w===aj.Mode.MouseOver&&T.mouseOverData&&T.mouseOverData.s("highlight.visible")&&(N=[T.mouseOverData]),T.fetchTargetFunc&&(N=T.fetchTargetFunc(N)),w===aj.Mode.Style)N=N||[],E=function(i){if(N.indexOf(i)>=0)return!1;var P=X.getDataHighlightMode(i);return P===!1?!0:P===!0?!1:"selected"===P?X.isSelected(i)?!1:!0:"hover"===P?i===T.mouseOverData?!1:!0:!0};else{if(!N||!N.length)return;E=function(s){return N.indexOf(s)<0?!0:void 0}}var Z,L,M=X.isVRPresenting();if(X._camera){var F=X._camera.getSize(X);Z=F[0],L=F[1]}else if(Z=X.getWidth(),L=X.getHeight(),M){var g=X.getWidth;Z/=2,X.getWidth=function(){return Z};var H=X.getViewport()}var R,Q=X.getDevicePixelRatio(),K=Math.floor(Z*Q),B=Math.floor(L*Q);(R=T._renderTarget)?R.setSize(U,K,B):T._renderTarget=R=new jg.RenderTarget(X,U,K,B);var J="soft"===T.type;if(R.bind(U),J){var f=U.getParameter(3106);pk(U,[1,1,1,1]),U.clear(16384),pk(U,f)}else U.clear(16384);X.setViewport(U,0,0,K,B),X.drawFilter=function(b){return b.s("static")?!1:E(b)},ln=function(k,l,_,z,N,P){if(P)return td(k,l,_,z,N,P);var e=[0,1,1,1];return ie.for(k).directUniforms().uFixPickReverseColor=e,e},X.getRenderLists().each(function(Z){Z.beginFillHighlightMaskColor(E)});var C=U._blooming;C&&(U._blooming=!1),X.renderPickScene(),C&&(U._blooming=!0),ln=td,X.drawFilter=null,X.getRenderLists().each(function(N){N.endFillHighlightMaskColor()}),R.unbind(U);var A=X._prg;bq&&mj(U,A.aPosition),mj(U,A.aNormal),M&&(X.getWidth=g,X.setViewport(U,H[0],H[1],H[2],H[3]));var S=X.getHighlightColor();if(T._lastHighlightColor!==S){var n=Nm(T._lastHighlightColor=S);T._highlightColorData=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]}return J?T.renderSoftOutline(U,K,B):T.renderHardOutline(U,K,B),ie.for(U).useProgram(A=X._prg=X.acquireProgram({type:"legacy",defines:{}})),bq&&hp(U,A.aPosition),!0}},renderHardOutline:function(J,S,t){var o=this,N=o.gv,B=N._postProcessing,E=ie.for(J),$=E.directState();$.blend.enabled=!0,$.depth.enabled=!1,B.blitScreen({type:"highlightHard",image:o._renderTarget.texture,textureSize:[S,t],edgeWidth:N.getHighlightWidth(),edgeColor:o._highlightColorData},{clear:!1}),$.blend.enabled=!1,$.depth.enabled=!0},renderSoftOutline:function(y,f,o){var p,H,B,s,Y,v=this,A=v.gv,X=A._postProcessing,m=Math.floor(f/2),j=Math.floor(o/2),r=Math.floor(f/4),T=Math.floor(o/4),Q=v._downSampleRenderTarget;Q?(p=v._edgeDetectionRenderTarget,H=v._blurV2,B=v._blurH2,s=v._blurV4,Y=v._blurH4,(Q.width!==m||Q.height!==j)&&(Q.setSize(m,j),p.setSize(m,j),H.setSize(m,j),B.setSize(m,j),s.setSize(r,T),Y.setSize(r,T))):(Q=v._downSampleRenderTarget=new jg.RenderTarget(A,y,m,j),p=v._edgeDetectionRenderTarget=new jg.RenderTarget(A,y,m,j),H=v._blurV2=new jg.RenderTarget(A,y,m,j),B=v._blurH2=new jg.RenderTarget(A,y,m,j),s=v._blurV4=new jg.RenderTarget(A,y,r,T),Y=v._blurH4=new jg.RenderTarget(A,y,r,T));
var e=y.getParameter(3106),J=A.getViewport(),x=v.width,t=v.strength,n=v.glow,q=ie.for(y).glState,E=q.depth,L=q.blend,Z=E.enabled;pk(y,[1,1,1,1]),E.enabled=!1,L.apply({func:[770,1]}),X.blitScreen(Q,{type:"blitScreen",image:v._renderTarget.texture}),X.blitScreen(p,{type:"highlightEdgeDetection",image:Q.texture,texSize:[m,j],color:v._highlightColorData}),X.blitScreen(B,{type:"highlightBlur",image:p.texture,direction:[1,0],texSize:[m,j],radius:x}),X.blitScreen(H,{type:"highlightBlur",image:B.texture,direction:[0,1],texSize:[m,j],radius:x}),X.blitScreen(Y,{type:"highlightBlur",image:H.texture,direction:[1,0],texSize:[r,T],radius:x}),X.blitScreen(s,{type:"highlightBlur",image:Y.texture,direction:[0,1],texSize:[r,T],radius:x}),L.apply({enabled:!0}),A.setViewport(y,J[0],J[1],J[2],J[3]),X.blitScreen({type:"highlightFinalBlend",image:v._renderTarget.texture,edgeTexture1:H.texture,edgeTexture2:s.texture,edgeStrength:t*x,edgeGlow:n},{clear:!1}),L.apply({func:[770,771,1,771]}),E.enabled=Z,pk(y,e)},resetProperties:function(){this.mode=aj.Mode.Style,this.type=i["highlight.type"],this.color=i["highlight.color"],this.width=i["highlight.width"],this.glow=i["highlight.glow"],this.strength=i["highlight.strength"]},contextLost:function(){this._renderTarget=null}}),b.defineProperties(aj.prototype,{mode:{get:function(){return this._mode},set:function(X){var n=this._mode;if(X!==n){this._mode=X;var y=n===aj.Mode.MouseOver||n===aj.Mode.Style,a=X===aj.Mode.MouseOver||X===aj.Mode.Style;a&&y||(y&&J(this.gv.getView(),"mousemove",this.onMouseOver),a&&g(this.gv.getView(),"mousemove",this.onMouseOver))}}}});var Ds=T.meshTypeMap={box:function(){return T.createBoxModel()},sphere:function(B){return T.createSphereModel(B.side,B.sideFrom,B.sideTo,B.from,B.to,B.resolution,B.smooth)},cylinder:function(){return T.createCylinderModel(side,sideFrom,sideTo,from,to,top,bottom,smooth)},cone:function(){return T.createConeModel(side,sideFrom,sideTo,from,to,bottom,resolution,smooth)},torus:function(){return T.createTorusModel(side,sideFrom,sideTo,from,to,radius,resolution,smooth)}};!function(){for(var h in Dh)Ds[h]=Dh[h]}(),Ds.bone=function(){var u=5,O=new Array(u);return function(P){for(var s=P.ratio||.1,R=P.resolution||8,Y=null,I=0;u>I;I++){if(O[I])return O[I].ratio==s&&O[I].resolution==R&&(O[I].active=Date.now()),O[I].mesh;Y=I}if(!Y)for(var C=1/0,I=0;u>I;I++)O[I].active<C&&(C=O[I].active,Y=I);var S=[],K=[];s*=.5,S.push(0,0,0,0,0,.5);for(var I=0;R>I;I++){var X=2*I/R*Math.PI;S.push(Math.cos(X)*s,Math.sin(X)*s,s),I>0&&(K.push(0,I+2,I+1),K.push(I+1,I+2,1))}return K.push(0,2,R+1),K.push(R+1,2,1),O[I]={active:Date.now(),resolution:R,ratio:s,mesh:{vs:S,is:K}},O[I].mesh}}();var Es={};yd(Es,{pbr:{diffuse:[1,1,1],emissive:[0,0,0],roughness:1,metalness:0,opacity:1,map:null,alphaMap:null,alphaChannel:"A",alphaTest:H,roughnessMap:null,roughnessChannel:"R",metalnessMap:null,metalnessChannel:"G",emissiveMap:null,aoMap:null,aoMapIntensity:1,aoChannel:"B",aoUvChannel:1,normalMap:null,normalScale:[1,1],lightMap:null,lightMapIntensity:1,envMap:null,envMapIntensity:1,displacementMap:null,displacementScale:1,displacementBias:0,rimColor:[0,0,0],rimPower:0,fresnelIntensity:1},phong:{diffuse:[1,1,1],emissive:[0,0,0],specular:[17/255,17/255,17/255],shininess:30,opacity:1,map:null,alphaMap:null,alphaChannel:"A",alphaTest:H,specularMap:null,emissiveMap:null,aoMap:null,aoMapIntensity:1,aoChannel:"B",aoUvChannel:1,normalMap:null,normalScale:[1,1],lightMap:null,lightMapIntensity:1,envMap:null,envMapCombine:"add",envMapIntensity:1,refractionRatio:.98,displacementMap:null,displacementScale:1,displacementBias:0,fresnelIntensity:1}},!0),L.Default.getMaterialDefaultStyle=function(){return Es};var Fs=jg.PrefabRenderer=function(V){this.gv=V};Fs.prototype={},Fs.prototype.constructor=Fs,mn("model"),mn("mesh"),mn("material"),mn("shader"),function(){function z(){return j.length?j.pop():new kc}function G(l){j.push(l)}function S(b,O,k){var _,E=!1;if(b.prefix&&V){var u=V.a(w+O);u!==H&&(E=!0,_=u)}return _===H&&(_=b[O]),_&&_.func&&(E=!0,_=h(_,V,view)),k&&(_=k(_),E||(b[O]=_)),_}function h(g,f,i){if(!g||!g.func)return g;var r,d=g.func,M=g.value;return r=mq(d)?d(f,i):f?Ac.test(d)?f.a(w+d.slice(5)):gm.test(d)?f.s(w+d.slice(6)):Bg.test(d)?f[d.slice(6)]:f[d]?f[d](i):M:M,M!==H&&r==C?M:r}function y(C,B){if(C){var y=C.s("matDef");return y&&y[B]}}function Z(b,h){var V=z(),_=S(b,"composedMatrix");if(_)return V.copy(_),V;var C,i,D,Q,N,Z=!1;if(h&&(Q=b.name)&&(N=h._animationId)){var q,Y=xt.getAnimationMap()[N];if(Y&&(q=Y.clip)){var F,O,f=xt.getAnimationTracks()[Y.animation][0];if(F=f[Q]){var J=q.datas;Z=!0,(O=F[0])!==H&&(C=J[O]),(O=F[1])!==H&&(D=J[O]),(O=F[2])!==H&&(i=J[O])}}}var W=S(b,"transformData");if(Z&&W){V.identity();var y=W.rotationOffset,w=W.rotationPivot,r=W.scalingOffset,u=W.scalingPivot;return U.fromArray(C||W.translation),y&&U.add(d.fromArray(y)),w&&U.add(d.fromArray(w)),V.makeRotationFromQuaternion(M.fromArray(D||W.rotation)).setPosition(U),U.set(0,0,0),w&&U.sub(d.fromArray(w)),r&&U.add(d.fromArray(r)),u&&U.add(d.fromArray(u)),(0!==U.x||0!==U.y||0!==U.z)&&V.translate(U),i=i||W.scale,(1!==i.x||1!==i.y||1!==i.z)&&V.scale(e.fromArray(i)),u&&V.translate(d.multiplyScalar(-1)),V}return C=C||S(b,"position"),i=i||S(b,"scale"),D=D||S(b,"quaternion"),D||(D=S(b,"euler"),D&&(D=Of.eulerArrayToQuaternionArray(D,x))),V.composeFromArray(C,D,i),V}function I(n,W,H){return P=n,W instanceof L.Data?(V=W,O=null):(V=null,O=W),[P,V,O,H]}function k($){P=$[0],V=$[1],O=$[2],w=$[3]}function n(i){if(i){"string"==typeof i&&(i={type:i});var l,N=i.type;if(N&&"raw"!==N){var t=T.meshTypeMap[N];if(l=t?t(i):T.getMesh(N),!l)return!1}else l=i;return l.func&&(l=l.func(l)),l}}function N($,c,O){var K=n(c);if(!K)return 0;if(ff(K)||!K._4HQ){K._4HQ=!0;for(var U in K)"is"!==U&&Tl(K[U])&&(K[U]=new $n(K[U]))}if(O&&!O._complete_){O._complete_=!0;for(var U in O)Tl(O[U])&&(O[U]=new $n(O[U]))}var w=ie.for(P),s=w.directAttribs();s.disable();var X,B=K.index||K.is,i=!B,R=0;return s.apply(K,function(j,D,$){var J,L=u[D]||D;if(O&&(J=O[L])!==H){if(!J.length)return null;var m=F[$.desc.activeInfo.type];return R||(R=J.length/m),ai(P,null,J,null,m)}return J=j[L],J!=H&&J.length?(i&&(i=!1,X=J.length/F[$.desc.activeInfo.type]),Tr(P,null,J)):null}),B?(mi(P,$._buffer.is,B),{length:B.length,instances:R,uint32:B instanceof Uint32Array,is:!0}):{length:X||K.vs.length/3,instances:R,is:!1}}function _(H,z){return[H[0]*z,H[1]*z,H[2]*z]}function Y(A,Z,q){var Q=Z[A];return Q!==H?Q:q?q[A]:null}function p(S,V){S.uUseSkinning=!0,S.bindMatrix=V.skeleton.bindMatrix,S.bindMatrixInverse=V.skeleton.bindMatrixInverse,S.boneTexture=V.boneTexture,S.boneTextureSize=V.boneTextureSize}function c(O){var m=O.s("light.intensity");m=(m==C?1:m)*Math.PI;var N=dh(O.s(wr)),z=N[0],R=N[1],o=N[2];return[z*m,R*m,o*m]}function l(f,m){var N,R=f._headlightDirection;N=R&&3===R.length?R:"shadow"===R?f.shadowMap.getDirection():Go(f.getCenter(),f.getEye());var A=f._lastLightUploadInfo,V=A.headlightColor;W.color=_(V,Math.PI*f._headlightRatioForPhysicalMaterial),m.hemisphereLight.direction=ng.normalizeArray(f._transformDirectionToViewSpace(N)),m.hemisphereLight.groundColor=W.groundColor,m._lastLightMask=H,m._lastHeadlightAmbientIntensity=H;var s,C,e,g;if(e=f._59O){for(s=0,C=e.length,g=[];C>s;s++)g.push({position:f._transformPointToViewSpace(e[s].p3()),color:c(e[s]),distance:e[s].s("light.range"),decay:1,enable:!1});m.pointLights=g}if(e=f._spots){for(s=0,C=e.length,g=[];C>s;s++){var F=e[s].s("light.angle");g.push({position:f._transformPointToViewSpace(e[s].p3()),color:c(e[s]),direction:e[s].s("light.rotation.enable")?f._transformDirectionToViewSpace(Bp([0,0,1],e[s])):f._transformDirectionToViewSpace(e[s].s("light.center"),e[s].p3()),decay:1,enable:!1,distance:e[s].s("light.range"),coneCos:t(F/2),penumbraCos:t(F/2*(1-e[s].s("light.exponent")))})}m.spotLights=g}if(e=f._dirs){for(s=0,C=e.length,g=[];C>s;s++)g.push({direction:e[s].s("light.rotation.enable")?f._transformDirectionToViewSpace(Bp([0,0,1],e[s])):f._transformDirectionToViewSpace(null,e[s].p3()),color:c(e[s]),enable:!1});m.directionalLights=g}if(e=f._87I){var Z,Q,D=new ng;for(s=0,C=e.length,g=[];C>s;s++)qc.fromArray(Pn(e[s])),qc.premultiply(Sk.fromArray(f._viewMatrix)),Sk.identity().extractRotation(qc),Z=D.set(.5*-e[s].s("light.size")[0],0,0).applyMatrix4(Sk).toArray(),Q=D.set(0,.5*e[s].s("light.size")[1],0).applyMatrix4(Sk).toArray(),g.push({position:f._transformPointToViewSpace(e[s].p3()),color:c(e[s]),halfWidth:Z,halfHeight:Q,enable:!1,disableSpecular:e[s].s("light.specular.disable")});if(m.rectAreaLights=g,T.LTC_FLOAT_1){var u=f.getGL();u._LTC_1||(u._LTC_1=f.createTexture(T.LTC_FLOAT_1)),u._LTC_2||(u._LTC_2=f.createTexture(T.LTC_FLOAT_2)),m.ltc_1=u._LTC_1,m.ltc_2=u._LTC_2}}}function f(s,x,c,b){if(b!==s._lastHeadlightAmbientIntensity&&(s.hemisphereLight.skyColor=_(W.color,1-b),s.ambientLightColor=_(W.color,b),s._lastHeadlightAmbientIntensity=b),c!==s._lastLightMask){s._lastLightMask=c;var N=x._lastLightUploadInfo;if(N){var $,u,F,a=N.g,r=a.length,w=new Array(r);for(u=0;r>u;u++)$=a[u],F=0>$||$>=32?!1:!!(c&1<<$),w[u]=F;s.hemisphereLight.enabled=w[0];var y=x._59O,X=x._spots,o=x._dirs,D=x._87I,L=1;if(r=y.length)for(u=0;r>u;u++)s.pointLights[u].enabled=w[L++];if(r=X.length)for(u=0;r>u;u++)s.spotLights[u].enabled=w[L++];if(r=o.length)for(u=0;r>u;u++)s.directionalLights[u].enabled=w[L++];if(r=D.length)for(u=0;r>u;u++)s.rectAreaLights[u].enabled=w[L++]}}}function o(c){var N=c.blend,m=c.image;return{uDiffuse:c.color||i["color.empty"],uTexture:!!m,uSampler:m,uDiscardSelectable:c.discardSelectable===!1,uBlend:!!N,uBlendColor:N,uLight:c.light!==!1,uPartOpacity:c.opacity,uReverseFlip:c.reverseFlip,uFixPickReverseColor:c.reverseColor||Ec}}var V,O,P,K,w="",J={},j=[],E=new kc,U=new ng,d=new ng,e=new ng,M=new $d,x=[0,0,0],u={aPosition:"vs",aUv:"uv",aUv2:"uv2",aNormal:"ns"},D={color:"gray"},v={type:"fixColor",color:"black"},F={};F[5126]=1,F[35664]=2,F[35665]=3,F[35666]=4,F[35674]=4,F[35675]=9,F[35676]=16;var Q={linear:"UseLinearToneMapping",reinhard:"UseReinhardToneMapping",cineon:"UseCineonToneMapping",aces:"UseACESFilmicToneMapping"},A=function(T,e){var a=Q[e];return a?T[a]=!0:void 0},R={triangles:4,triangleStrip:5,triangleFan:6,lines:1,lineLoop:2,lineStrip:3,points:Db.POINTS},W={groundColor:[0,0,0]},$=new Of.Matrix2d,b=function(Q){var V=Q.cachePick;if(V.length!==Q.length||V.version!==Q.csVersion){V.buffer=new $n(4*Q.length);for(var I=0,J=V.buffer,B=Q.cs,k=4*Q.length;k>I;I+=4)J[I]=B[I],J[I+1]=B[I+1],J[I+2]=B[I+2],J[I+3]=B[I+3];V.length=Q.length,V.version=Q.csVersion}return V.buffer},q=new kc,X=new kc,s=function(l,G,x,t,m){var e=m?t.cacheShadow:t.cache;if(e.length===t.length&&e.version===(m?t.shadowVersion:t.msVersion)&&e.id===G._id&&x.equals(e.matrix))return e.buffer;var W=t.ms,Y=m?t.shadow:null;q.fromArray(l.getData3dUI(G).mat),X.copy(x).premultiply(q.getInverse(q));var r,n,$,c,B,f,E,U,g,h,M,C,o,T,v,p,L,S=X.getElements(),V=S[0],y=S[4],J=S[8],j=S[12],Z=S[1],F=S[5],w=S[9],i=S[13],Q=S[2],D=S[6],A=S[10],P=S[14],H=S[3],O=S[7],z=S[11],k=S[15],d=16*t.length;e.buffer&&e.buffer.length===d?(L=e.buffer,delete L._bufId):L=new $n(d);for(var N=0,I=d;I>N;N+=16)Y&&!Y[N>>4]?L[N+0]=L[N+1]=L[N+2]=L[N+3]=L[N+4]=L[N+5]=L[N+6]=L[N+7]=L[N+8]=L[N+9]=L[N+10]=L[N+11]=L[N+12]=L[N+13]=L[N+14]=L[N+15]=0:(r=W[N+0],n=W[N+4],$=W[N+8],c=W[N+12],B=W[N+1],f=W[N+5],E=W[N+9],U=W[N+13],g=W[N+2],h=W[N+6],M=W[N+10],C=W[N+14],o=W[N+3],T=W[N+7],v=W[N+11],p=W[N+15],L[N+0]=r*V+n*Z+$*Q+c*H,L[N+4]=r*y+n*F+$*D+c*O,L[N+8]=r*J+n*w+$*A+c*z,L[N+12]=r*j+n*i+$*P+c*k,L[N+1]=B*V+f*Z+E*Q+U*H,L[N+5]=B*y+f*F+E*D+U*O,L[N+9]=B*J+f*w+E*A+U*z,L[N+13]=B*j+f*i+E*P+U*k,L[N+2]=g*V+h*Z+M*Q+C*H,L[N+6]=g*y+h*F+M*D+C*O,L[N+10]=g*J+h*w+M*A+C*z,L[N+14]=g*j+h*i+M*P+C*k,L[N+3]=o*V+T*Z+v*Q+p*H,L[N+7]=o*y+T*F+v*D+p*O,L[N+11]=o*J+T*w+v*A+p*z,L[N+15]=o*j+T*i+v*P+p*k);e.length=t.length,e.version=m?t.shadowVersion:t.msVersion,e.id=G._id,e.buffer=L;var _;return(_=e.matrix)||(_=e.matrix=new kc),_.fromArray(x.getElements()),L},g=function(u,i,e,q){var Q=this;if(S(i,"visible")!==!1){var x=Q.gv,c=I(u,e,w),U=i.prefix;U&&(w=w+i.prefix+".");var h;if(h=i.matDef)for(var B in h)J[B]=h[B];var M=z().copy(E);q&&E.fromArray(q);var g=Z(i,V,E);E.multiply(g),G(g);var a=!1,W=!1,X=!1;do{var d=S(i,"model");if(d){d=T.getModel(d),d&&Q.render(P,d,e);break}var n=S(i,"mesh");if(!n)break;var m,_,F=x._picking;if(V&&V.s("static")){var j=x.getRenderLists().get(V.getRenderLayer()).getModel3dInstancedBatchMap();if(j&&(j=j[x.getStaticInstancingKey(V)])&&j.length){if(j.rendered&&j.rendered!==V._id)break;m=s(x,V,E,j,!1),F&&(_=b(j)),j.rendered=V._id}}var L,r,t=null,kf=S(i,"mat");if(kf){if("string"==typeof kf){var Md=y(V,kf)||J[kf];if(Md){if(jm(Md)&&(Md=T.getMaterial(Md),!Md))break}else if(Md=T.getMaterial(kf),!Md)break;kf=Md}}else kf=D;var ns=S(kf,"transparent")===!0;if(!!x._45Q!==ns)break;K=Es[kf.type];var Hf,Fd=!!(i.skeleton&&V&&(Hf=x._updatedSkeletonDatas[i._skeletonId+"|"+V._lastAnimTimestamp]));if(Fd){var rd;i.boneTexture?(rd=i.boneTextureSize,P.activeTexture(33984),io(P,i.boneTexture),P.texImage2D(3553,0,34836,rd,rd,0,6408,5126,Hf),io(P,C)):(rd=i.boneTextureSize=Math.round(Math.sqrt(Hf.length/4)),i.boneTexture=x.createTexture({data:Hf,width:rd,height:rd,type:5126,filter:9728,clampToEdge:!0}))}if(!F||kf.renderPickMap){var nd=ie.for(P);if(kf.type){var Jb,Wn,Jm=kf.type;if(!(Wn=Hm[Jm])||Wn.isRaw)if(Wn)Jb=x.acquireProgram({type:Jm,cacheKey:Jm});else{if(Wn=T.getShader(Jm),!Wn)break;var zl=Qh(Wn);if(!zl){Hm[Jm]=Hm.fixColor;break}zl.isRaw=!0,Hm[Jm]=zl,Jb=x.acquireProgram({type:Jm,cacheKey:Jm},!0)}else{var Ud=V?V.s("3d.clip.direction"):0,hh=!(!i.instances&&!m);switch(V&&P._blooming&&!V.s("bloom")&&(Jm="fixColor",v.cullFace=kf.cullFace,v.flipSide=kf.flipSide,kf=v),Jm){case"fixColor":Jb=x.acquireProgram({type:"fixColor",defines:{CLIP_DIRECTION:!!Ud,USE_INSTANCING:hh}});break;case"pbr":case"phong":var t,Ai,Qc=1;if(V||O){var Pp=V?V.s("envmap.probe"):O.envmapProbe||0;if(-1!==Pp){Ai=!0;var Qc=V?V.s("envmap"):O.envmap||0;Qc&&(Qc*=x._envmapRenderer._envmapIntensity[Pp],t=Pp)}}if(!Ai&&(t=kf.envmap||kf.envMap)){var Jp=x.getTexture(t);Jp&&Jp!==P._emptyTexture||(t=null)}var Nl=!!kf.displacementMap&&x._glCapabilities.vertexTextures,Uf=Y("aoUvChannel",kf,K)||1,ji={DOUBLE_SIDED:!kf.cullFace,CLIP_DIRECTION:!!Ud,USE_UV:!!kf.map||!!kf.alphaMap||!!kf.emissiveMap||!!kf.normalMap||Nl||1==Uf&&!!kf.aoMap,USE_MAP:!!kf.map,USE_ALPHAMAP:!!kf.alphaMap,USE_AOMAP:!!kf.aoMap,USE_LIGHTMAP:!!kf.lightMap,USE_EMISSIVEMAP:!!kf.emissiveMap,USE_NORMALMAP:!!kf.normalMap,USE_ALPHATEST:Y("alphaTest",kf,K)!=C,TANGENTSPACE_NORMALMAP:!!kf.normalMap,USE_DISPLACEMENTMAP:Nl,USE_ENVMAP:t!=C,ENVMAP_TYPE_CUBE_UV:!0,UV_CLIP:!(!x._uvClipEnabled||7!=Ud&&8!=Ud),USE_INSTANCING:hh,USE_SKINNING:Fd,BONE_TEXTURE:!0};ji["ALPHAMAP_CHANNEL_"+Y("alphaChannel",kf,K)]=!0,V&&V.s("effect.flow.mask")!==Ie||(ji.MAX_FLOW_OBJECT=0),ji["AOMAP_"+Y("aoChannel",kf,K)+"_"+Uf]=!0;var sp=!1;if("pbr"===Jm)kf.roughnessMap&&(ji.USE_ROUGHNESSMAP=!0,ji["ROUGHNESSMAP_CHANNEL_"+Y("roughnessChannel",kf,K)]=!0,sp=!0),kf.metalnessMap&&(ji.USE_METALNESSMAP=!0,ji["METALNESSMAP_CHANNEL_"+Y("metalnessChannel",kf,K)]=!0,sp=!0),ji.NUM_RECT_AREA_LIGHTS=x._87I.length;else if("phong"===Jm){var xc=Y("envMapCombine",kf,K);xc="mix"===xc?"ENVMAP_BLENDING_MIX":"add"===xc?"ENVMAP_BLENDING_ADD":"ENVMAP_BLENDING_MULTIPLY",ji[xc]=!0,kf.specularMap&&(ji.USE_SPECULARMAP=!0,sp=!0),ji.NUM_RECT_AREA_LIGHTS=0}sp&&(ji.USE_UV=!0),ns||(ji.OPAQUE=!0),A(ji,x.getToneMapping()),Jb=x.acquireProgram({type:Jm,defines:ji});break;default:Jb=x.acquireProgram(kf)}}if(!Jb)break;X=!0,nd.useProgram(Jb),L=nd.directUniforms(),r=nd.directState(),r.cullFace.enabled=!!kf.cullFace;var Dr=!!kf.flipSide;V&&V._flipSide&&(Dr=!Dr),r.cullFace.frontFace=Dr?2304:2305,L.uProjectMatrix=x._projectMatrix,L.uViewMatrix=x._viewMatrix,L.uTime=x.__uptime,Jb._dirty&&(Jb._dirty=H,("pbr"===Jb.name||"phong"===Jb.name)&&l(x,L),L.uClipperMatrix=x._boxClipperMatrixes,L.uClipperClipInner=x._boxClipperClipInner,x._fogDisabled||(L.uFogColor=x._fogColor,L.uFogDensity=x._fogDensity,L.uFogNear=x._fogNear,L.uFogFar=x._fogFar),L.toneMappingExposure=x.getToneMappingExposure()),L.uCameraPosition=x.getEye(),x.shadowMap.enable&&x.shadowMap.createShadow(L),x.flowMap.createFlow(L),x._87I&&T.LTC_FLOAT_1&&(L.ltc_1=P._LTC_1,L.ltc_2=P._LTC_2)}else kf=o(kf);kf.uUvMatrix=gl(kf.uvRotation,kf.uvOffset,kf.uvScale,kf.uvAnchor,$).toArray9(),kf.uUv2Matrix=gl(kf.uv2Rotation,kf.uv2Offset,kf.uv2Scale,kf.uv2Anchor,$).toArray9()}var $j;$j=m?{aMatrixInstanced:m,aBatchColor:_}:S(i,"instances");var Lf=N(x,n,$j);if(!Lf)break;if(Lf.instances&&(L||(L=ie.for(P).directUniforms()),_&&(L.uBatchColor=!0),L.uUseInstance=!0,W=!0),m?Bh(x):(a=!0,Bh(x,E.toArray())),!F||kf.renderPickMap){var yj=w;w+="mat.",L||(L=nd.directUniforms());var di=Jb&&("pbr"===Jb.name||"phong"===Jb.name);if(V?pi(P,x,V,di):O&&ar(P,x,O,di),di){if(V?f(L,x,V.s("shape3d.light")?V.s("light.mask"):0,V.s("headlight.ambientIntensity")||x._headlightAmbientIntensity):O?f(L,x,O.light==C?O.lightMask===H?nh:O.lightMask:0,O.headlightAmbientIntensity||x._headlightAmbientIntensity):f(L,x,0,0),t!=C){if(Ai){var Ue=x._envmapRenderer._envmaps[t];L.envmap=Ue?Ue.texture:P._emptyTexture}else L.envmap=x._envmapRenderer.assureEnvmapFromEquirectangular(t);L.envMapIntensity=Qc*Y("envMapIntensity",kf,K)}Fd&&p(L,i)}L.apply(kf,function(a,E,R){if("envmap"!==E&&"envMapIntensity"!==E){var j=S(a,E);if(j===H&&K&&(j=K[E]),!(!j||35678!==R&&35680!==R||j instanceof WebGLTexture))if(Tl(j)){var k=j,q=k.length;j=new Array(q);for(var N=0;N<k.length;N++)j[N]=x.getTexture(k[N],V)}else j=x.getTexture(j,V);return j}}),w=yj}else Fd&&(L=L||ie.for(P).directUniforms(),p(L,i));var Hq,Zh,Gg=R[kf.renderMode];i.drawRange?(Hq=i.drawRange[0],Zh=i.drawRange[1]):(Hq=0,Zh=Lf.length),V&&x.onPreRenderData(V,P),Lf.is?Ij(P,Hq,Zh,Gg,Lf.uint32?5125:null,Lf.instances):Uq(P,Hq,Zh,Gg,Lf.instances),V&&x.onPostRenderData(V,P),Fd&&(L.uUseSkinning=!1)}while(!1);a&&bf(x),W&&(L.uUseInstance=!1,L.uBatchColor=!1),X&&x._prg&&(nd.useProgram(x._prg),nd.directAttribs().disable(),r.cullFace.frontFace=2305,x.shadowMap.enable&&x.shadowMap.createShadow(),x._envmapRenderer.resetUniformCache(),x.flowMap.createFlow());var _i=i.comps;if(_i&&_i.length)for(var Qn=0,ke=_i.length;ke>Qn;Qn++)Q.render(P,_i[Qn],V);if(G(E),E=M,h=i.matDef)for(var B in h)J[B]=H;k(c)}},B=function(d,f,m,r,X){var i=this;if(S(f,"visible")!==!1){var h=I(d,m,w),o=f.prefix;o&&(w=w+f.prefix+".");var B=z().copy(E);r&&E.fromArray(r);var O;if(O=f.matDef)for(var Q in O)J[Q]=O[Q];var _=Z(f,V,E);E.multiply(_),G(_);do{var g=S(f,"model");if(g){g=T.getModel(g),g&&i.renderShadow(P,g,m,null,X);break}var v=n(S(f,"mesh"));if(!v)break;var R;if(V&&V.s("static")){var F=i.gv,u=F.getRenderLists().get(V.getRenderLayer()).getModel3dInstancedBatchMap();if(u&&(u=u[F.getStaticInstancingKey(V)])&&u.length){if(u.rendered&&u.rendered!==V._id)break;R=s(F,V,E,u,!0),u.rendered=V._id}}ff(v);var e=S(f,"mat");if(e){if("string"==typeof e){var K=y(V,e)||J[e];if(K){if(jm(K)&&(K=T.getMaterial(K),!K))break}else if(K=T.getMaterial(e),!K)break;e=K}}else e=D;var b=R?{aMatrixInstanced:R}:S(f,"instances");X(E,v,e,b,f)}while(!1);var Y=f.comps;if(Y&&Y.length)for(var U=0,W=Y.length;W>U;U++)i.renderShadow(P,Y[U],V,null,X);if(G(E),E=B,O=f.matDef)for(var Q in O)J[Q]=H;k(h)}};Fs.prototype.render=g,Fs.prototype.renderShadow=B}();var Gs=L.Light=function(){Ei(Gs,this),this.s(wr,i[wr]),this.s(qb,"sphere"),this.s("shape3d.reverse.cull",!0),this.s3(20,20,20)};ik("Light",cj,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(c,G,v){Gs.superClass.onStyleChanged.apply(this,arguments),c===wr&&this.s("shape3d.color",v)}});var Hs=jg.FrameState=function(o,x){this.renderState=ie.for(x),this.picking=!1,this.envmapReflectivity=.5,this.cameraPosition=H,this.projectMatrix=H,this.viewMatrix=H,this.view=o,this.defaultProgram=H,this.pickColorMap=H,this._pvStack=[],this._renderStateStack=[]};Hs.prototype.savePV=function(){var J=this.view;this._pvStack.push([Lc(this.projectMatrix),Lc(this.viewMatrix),J._18Q,Lc(J._7O)])},Hs.prototype.restorePV=function(){var l=this._pvStack.pop();if(l){var Q=this.view;this.projectMatrix=Q._projectMatrix=l[0],this.viewMatrix=Q._viewMatrix=l[1],Q._18Q=l[2],Q._7O=l[3]}},Hs.prototype.setPV=function(k,O){var Y=this.view,M=!1;if(k&&(this.projectMatrix=Y._projectMatrix=k,M=!0),O&&(this.viewMatrix=Y._viewMatrix=O,Y._7O=Lc(O),M=!0),M){var H=Y.getWidth(),w=Y.getHeight(),r=Lc(this.projectMatrix);Y._18Q=Wo(r,r,O),Y._18Q._wh=H/w}},Hs.prototype.syncEnv=function(A){var F=this,l=F.view;F.envmapReflectivity=l._envmapReflectivity||.5,F.cameraPosition=l.getEye(),F.projectMatrix=l._projectMatrix,F.viewMatrix=l._viewMatrix,F.pickColorMap=A,F.picking=l.getGL()._picking},Hs.prototype.setGLState=function(){var w=[0,0,0,0],u=[!0,!0,!0,!0],Z=[-1,1],M=[32774,32774],v=[770,771,1,771];return function(l,X){var t=this;t.renderState.gl;var E=t.renderState.glState;E.dither=!1,X?E.color.mask=u:E.color.reset(),E.pixelStore.reset(),E.blend.color=w,E.blend.equation=M,E.blend.func=v,E.cullFace.enabled=!1,E.scissor.enabled=!1,E.depth.enabled=!0,E.depth.clear=1,E.depth.func=515,E.depth.range=Z,E.stencil.enabled=!1,E.polygonOffset.enabled=!1,l?(E.depth.mask=!1,E.blend.enabled=!0):(E.depth.mask=!0,E.blend.enabled=!1)}}(),Hs.prototype.setUniforms=function(K){var f=this,p=f.view,P=f.renderState,X=P.gl,$=P.uniforms;$.uBrightness=1,$.uOpacity=1,$.uPartOpacity=1,$.uUseSkinning=!1,$.uUseInstance=!1,$.uTexture=!1,$.uBlendTexture=!1,$.uAlphaTest=i.alphaTest,$.uTransparent=!!K,$.uFix=!1,$.uBatchColor=!1,$.uBatchBlend=!1,$.uBatchBrightness=!1,$.envMapIntensity=f.envmapReflectivity||.5,$.uCameraPosition=f.cameraPosition,$.uProjectMatrix=f.projectMatrix,$.uViewMatrix=f.viewMatrix,$.uEnvMap=null,ch(p,$,Ie),$.uClipperMatrix=p._boxClipperMatrixes,$.uClipperClipInner=p._boxClipperClipInner,$.uEnvmapQuat=p._envmapExtraQuaternion,p._envmapRenderer.resetUniformCache(),f.picking||(vp(p,X,H),p._fogDisabled||($.uFogColor=p._fogColor,$.uFogDensity=p._fogDensity,$.uFogNear=p._fogNear,$.uFogFar=p._fogFar))},Hs.prototype.drawLayer=function(i){return this.view.renderLayers(i,!0)},Hs.prototype.drawData=function(M,U,B){var P=this.view;if(P.isVisible(M)){var q=this.renderState,b=q.uniforms,h=P.getData3dUI(M);if(h){var G=q.gl,Z=G._picking,Q=P._picking,t=h._pickId;B&&(h._pickId=B),G._picking=P._picking=!!B,b.uTransparent=!!U,h._42(q.gl,q.program,U?V:w),G._picking=Z,P._picking=Q,h._pickId=t}}};var Is=jg.Graph3dView=function(i,I){var r=this;r.resetHeadlightProperties(),r.resetFogProperties(),r._webGLVersion=1,r._attributes=I||T.graph3dViewAttributes,r._25I={},r._view=eh(1,r);var h;r._attributes&&(h=r._attributes.canvas)||(h=uc(r._view)),r._canvas=h,r.__startTime=Date.now(),r.__uptime=0,g(h,"webglcontextlost",function(a){a.preventDefault(),r._26I&&(r._doBufferGC(r._26I,!0),Eh(r._canvas,0,0),["_highlightHelper","shadowMap","flowMap","_envmapRenderer","_postProcessing"].forEach(function(P){r[P].contextLost()}),r.dm().each(function(E){var m=r.getData3dUI(E);m.contextLost()})),r._26I=C,r._1o.onContextLost(),r._35O=!0}),g(h,"webglcontextrestored",function(){r._35O=!1,r.iv()}),r._40Q=new Rs(r),r._43Q={},r._44Q=-1,r._boneViewMatrices=[],r._batchIndexMap={},r._batchModelMap={},r._wireframeIndexMap={},r._wireframeModelMap={},r._wireframeIndexMapSwap={},r._wireframeModelMapSwap={},r._polylineIndexMap={},r._polylineIndexMap={},r._polylineIndexMapSwap={},r._polylineIndexMapSwap={},r._8O=[],r._modelMatrixStack=[],r._7O=Wp(),r._6O=Wp(),r._modelMatrix=Wp(),r._1o=new _s(r),r._30O=new ct(r),r._31O=new at(r),r._32O=new bt(r),r._raycaster=new nt(r),r._highlightHelper=new aj(r),r._postProcessing=new At(r),r._41Q=[],r._42Q=0,r._frameRenderOptionStack=[],jg.VR?(r.vr=new jg.VR(r),r.isVREnabled=function(){return this.vr.enable},r.isVRPresenting=function(){return this.vr.isPresenting()}):(r.vr={enable:!1,isPresenting:y},r.isVREnabled=y,r.isVRPresenting=y),r.shadowMap=new lh(r),r.flowMap=new yq(r),r._33Q=!0,r._eye=ho(T.graph3dViewEye),r._center=ho(T.graph3dViewCenter),r._up=ho(T.graph3dViewUp),r._lightChanged=!1,r._59O=[],r._spots=[],r._dirs=[],r._87I=[],r._boxClippers=[],r._flowObjects=[],r._frameId=0,r._renderId=0,r._picking=!1,r._batchInfoMap={},r._updatedSkeletonDatas={},r._renderLayerInfoMap={},r._renderLayerSettingsVersion=0,r._gatherRenderLayersByPriority(!0),r.overlappingBox=new Xf(r),r._envmapRenderer=new jg.EnvmapRenderer(this),r._prefabRenderer=new jg.PrefabRenderer(this),r.dm(i?i:new cr),r._coreInteractor=new Jc(this),r.setInteractors([new Us(r)]),r._initView(),r._genBatchInstancedArrayFunc()},Js={box:1,sphere:2},Ks={addRGB:"FLOW_BLEND_MODE_ADD_RGB",addRGBA:"FLOW_BLEND_MODE_ADD_RGBA",overrideRGBA:"FLOW_BLEND_MODE_OVERRIDE_RGBA",overrideRGB:"FLOW_BLEND_MODE_OVERRIDE_RGB",overrideA:"FLOW_BLEND_MODE_OVERRIDE_A",multiplyRGB:"FLOW_BLEND_MODE_MULTIPLY_RGB",multiplyRGBA:"FLOW_BLEND_MODE_MULTIPLY_RGBA"},Ls=0;Bb("Graph3dView",b,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_shadow:1,ms_highlight:1,ms_quickVisible:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","editHelperDisabled","blockSelectable","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable","zoomToCenter",an,tp,"firstPersonMode",mh,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightDirection","headlightColor","headlightIntensity","headlightAmbientIntensity","headlightRatioForPhysicalMaterial","headlightDisabled","headlightGroup","ortho","orthoWidth","syncEyeWithOrthoWidth","fovy","near","far",Gp,Vk,"up","aspect","fogDisabled","fogMode","fogDensity","fogColor","fogNear","fogFar","pickerResolution","dashDisabled","uvClipEnabled","batchColorDisabled","batchInstancedDisabled","batchBlendDisabled","batchBrightnessDisabled","flowBlendMode","hoverDelay","batchInfoMap","renderLayerInfoMap","rotateMinPhi","rotateMaxPhi","sortable","sortFunc","toneMapping","toneMappingExposure"],_editable:!1,_sortable:T.graph3dViewSortable,_editHelperDisabled:T.graph3dViewEditHelperDisabled,_blockSelectable:T.graph3dViewBlockSelectable,_devicePixelRatio:H,_boundaries:H,_parallelShaderCompile:!1,_moveStep:T.graph3dViewMoveStep,_rotateStep:T.graph3dViewRotateStep,_toneMapping:H,_toneMappingExposure:1,_rotateMinPhi:T.graph3dViewMinPhi===H?T.graph3dViewRotateMinPhi:T.graph3dViewMinPhi,_rotateMaxPhi:T.graph3dViewMaxPhi===H?T.graph3dViewRotateMaxPhi:T.graph3dViewMaxPhi,_pannable:T.graph3dViewPannable,_rotatable:T.graph3dViewRotatable,_walkable:T.graph3dViewWalkable,_resettable:T.graph3dViewResettable,_zoomable:T.graph3dViewZoomable,_zoomToCenter:!0,_firstPersonMode:T.graph3dViewFirstPersonMode,_mouseRoamable:T.graph3dViewMouseRoamable,_gridVisible:T.graph3dViewGridVisible,_gridSize:T.graph3dViewGridSize,_gridGap:T.graph3dViewGridGap,_gridColor:T.graph3dViewGridColor,_originAxisVisible:T.graph3dViewOriginAxisVisible,_centerAxisVisible:T.graph3dViewCenterAxisVisible,_axisXColor:T.graph3dViewAxisXColor,_axisYColor:T.graph3dViewAxisYColor,_axisZColor:T.graph3dViewAxisZColor,_ortho:T.graph3dViewOrtho,_orthoWidth:T.graph3dViewOrthoWidth,_syncEyeWithOrthoWidth:T.graph3dViewSyncEyeWithOrthoWidth,_fovy:T.graph3dViewFovy,_near:T.graph3dViewNear,_far:T.graph3dViewFar,_rectSelectable:T.graph3dViewRectSelectable,_rectSelectBackground:T.graph3dViewRectSelectBackground,_editSizeColor:T.graph3dViewEditSizeColor,_autoMakeVisible:Ck,_pickerResolution:T.graph3dViewPickerResolution,_dashDisabled:T.graph3dViewDashDisabled,_uvClipEnabled:T.graph3dViewUvClipEnabled,_batchColorDisabled:T.graph3dViewBatchColorDisabled,_batchInstancedDisabled:T.graph3dViewBatchInstancedDisabled,_batchBlendDisabled:T.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:T.graph3dViewBatchBrightnessDisabled,_flowBlendMode:T.graph3dViewFlowBlendMode,addCamera:function(D){var Q=this,F=b.freeze({id:Q._42Q++,priority:D.priority||0,ignoreInPick:!!D.ignoreInPick,render:D.render});D.switch3DStatus&&(Q._43Q[F.id]=!0),Q._41Q.push(F),Q._41Q.sort(function(F,M){return F.priority!==M.priority?F.priority-M.priority:F.id-M.id})},setEye:function(X,m,f){1===arguments.length&&(m=X[1],f=X[2],X=X[0]);var v=this._eye;v[0]=X,v[1]=m,v[2]=f,this.fp(Gp,C,v)},setCenter:function(k,t,G){1===arguments.length&&(t=k[1],G=k[2],k=k[0]);var j=this._center;j[0]=k,j[1]=t,j[2]=G,this.fp(Vk,C,j)},setUp:function(j,v,A){1===arguments.length&&(v=j[1],A=j[2],j=j[0]);var J=this._up;J[0]=j,J[1]=v,J[2]=A,this.fp("up",C,J)},getDevicePixelRatio:function(){return this._picking?this._1o._resolution:this._devicePixelRatio||un},isTransparentMask:function(H){return H.s("transparent.mask")},getCoreInteractor:function(){return this._coreInteractor},getHighlightHelper:function(){return this._highlightHelper},getRaycaster:function(){return this._raycaster},getAspect:function(){var J=this,P=J._aspect;return P?P:(P=J.getWidth()/J.getHeight(),P||1.2)},getCanvas:function(){return this._canvas},setDataModel:function(A){var Q=this,d=Q._dataModel,_=Q._selectionModel;d!==A&&(d&&(d.ump(Q.handleDataModelPropertyChange,Q),d.umm(Q.handleDataModelChange,Q),d.umd(Q.handleDataPropertyChange,Q),_||d.sm().ums(Q.handleSelectionChange,Q)),Q._dataModel=A,A.mp(Q.handleDataModelPropertyChange,Q),A.mm(Q.handleDataModelChange,Q),A.md(Q.handleDataPropertyChange,Q),_?_._21I(A):A.sm().ms(Q.handleSelectionChange,Q),Q._postProcessing.handleDataModleChange(d,A),Q._tryInvalidateEnvmap(),Q.invalidateAll(!0),Q.invalidateLight(),Q.invalidateboxClipper(),Q.invalidateFlowObjects(),Q._49Q(),Q.fp(Ir,d,A),Q._canvas.style.background=A.getBackground()||"")},handleDataModelPropertyChange:function(y){var A=y.property;if("background"===A){var N=this._canvas.style.background,j=y.newValue||"";this._canvas.style.background=j,this.fp("canvasBackground",N,j)}else"envmapType"===A?this._tryInvalidateEnvmap():("envmap"===A||"invalidateView"===A)&&this.iv()},handleDataPropertyChange:function(t){var N=t.data;this.invalidateData(N);var h=t.property;of(N)&&"s:light.type"===h?this.invalidateLight():"s:3d.clipbox"===h?this.invalidateboxClipper(N,!0):"s:effect.flow"===h?this.invalidateFlowObjects(N,!0):"s:shadow.cast"===h?this.shadowMap.tryUpdateBounding(N):"s:3d.visible"===h&&this.invalidateQuickVisible(N)},invalidateboxClipper:function(h,F){var w=this._boxClippers,l=w.length;if(h){var n=!!h.s("3d.clipbox");if(F=!!F,n===F)w.indexOf(h)<0&&w.push(h);else{var q=w.indexOf(h);q>=0&&w.splice(q,1)}}else w=this._boxClippers=[],this.dm().each(function(b){b.s("3d.clipbox")&&w.push(b)});var o=w.length;l!==o&&(this._updateBoxClipperMatrix(),ch=o?yk:zj),this.iv()},_updateBoxClipperMatrix:function(){for(var f,X,s=this._boxClippers,I=this._boxClipperMatrixes=[],L=this._boxClipperClipInner=[],G=this._boxClipperGroups=[],p=this._boxClipperShape=[],m=new kc,U=0,Z=s.length;Z>U;U++)f=s[U],f.appendAnchorMatrix3d(X=Pn(f,this.getMat(f))),I.push(m.getInverse(m.fromArray(X)).toArray()),L.push("inner"===f.s("3d.clipbox")),G.push(f.s("3d.clipbox.group")),p.push(Js[f.s("3d.clipbox.shape")]||1)},_49Q:function(){this._4AQ||this._48Q||this.dm().size()<T.graph3dViewDataNumWarningLine||(this._48Q=!0,console.log("Too many datas so than disable some feature to speed up.\nYou can set global Default.graph3dViewDataNumWarningLine to largeEnoughNum to avoid this, or call graph3dView.quitDataNumWarning() to quit.\n"),this.enableQuickVisibleMode(),this.getHighlightHelper().mouseOverData=null)},quitDataNumWarning:function(){this.disableQuickVisibleMode(),this._48Q=!1,this._4AQ=!0},invalidateFlowObjects:function(G,Q){var c=this._flowObjects;if(G){var E=!!G.s("effect.flow");if(Q=!!Q,E===Q)c.indexOf(G)<0&&c.push(G);else{var H=c.indexOf(G);H>=0&&c.splice(H,1)}}else c=this._flowObjects=[],this.dm().each(function(I){I.s("effect.flow")&&c.push(I)});this.iv()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(J){var P=this,O=J.property;if(P.iv(),P._18Q=C,"eye"===O)P._33Q=!0;else if("devicePixelRatio"===O)P._42(P.getDevicePixelRatio());else if("batchInstancedDisabled"===O){P._genBatchInstancedArrayFunc();
var k,N=T.getBatchInfoMap();for(k in N)N[k]&&N[k].instanced&&P.invalidateBatch(k);N=P._batchInfoMap;for(k in N)N[k]&&N[k].instanced&&P.invalidateBatch(k)}},_5O:function(u){var R=u._22Q();return R?new R(this,u):C},getData3dUI:function(A){var K=this._25I[A._id];return K===H&&(K=this._5O(A),this._25I[A._id]=K),K},invalidateAll:function(J,e){var R=this;if(J){for(var k in R._25I){var U=R._25I[k];U&&U.dispose()}R._25I={},R.iv(),ll(R)}else ll(R),R.dm().each(function(L){R.invalidateData(L)});R.shadowMap.tryInvalidateLater(J,e)},invalidateSelection:function(){var Y=this;Y.sm().each(function(E){Y.invalidateData(E)})},invalidateData:function(l){var c=this,k=c.getData3dUI(l);k&&(k.iv(),c.iv()),ll(c,l)},getShape3dText:function(h){return h.getStyle("shape3d.text")||this.getLabel(h)},invalidateBatch:function(D){var E=this,B=E._40Q;B.each(function(I){E._invalidateBatch(D,I.batchModelMap,I.batchIndexMap),E._invalidateBatch("T"+D,I.wireframeModelMap,I.wireframeIndexMap),E._invalidateBatch("O"+D,I.wireframeModelMap,I.wireframeIndexMap),I.markBatchInvalid()}),E.iv()},_invalidateBatch:function(u,a,e){var D=this,C=a[u];if(C){C.ds.forEach(function(_){var C=D.getData3dUI(_);C&&C.iv(),delete e[_._id]});var U=D.getBatchInfo(u)||gc;return U.keepData!==!1&&C.ms&&C.ms.length?(C.ds=[],C.ms=[],C.ics&&(C.ics=[]),C.ps&&(C.ps=[]),void 0):(delete a[u],void 0)}},handleDataModelChange:function(i){var y=this,J=i.kind,M=i.data;if("add"===J)y.invalidateData(M),Cg(M)&&M.getEdgeGroup()&&M.getEdgeGroup().eachSiblingEdge(y.invalidateData,y),of(M)&&y.invalidateLight(),M.s("3d.clipbox")&&y.invalidateboxClipper(M,!0),M.s("effect.flow")&&y.invalidateFlowObjects(M,!0),y._49Q();else if(J===vc){var _=M._id,H=y._25I[_];H&&(H.dispose(),delete y._25I[_],y.iv()),M===y._currentSubGraph&&y.setCurrentSubGraph(C),ll(y,M),of(M)&&y.invalidateLight(),M.s("3d.clipbox")&&y.invalidateboxClipper(M,!1),M.s("effect.flow")&&y.invalidateFlowObjects(M,!1),M.isAnimationPlaying()&&M.stopAnimation()}else J===Hi&&(y.invalidateAll(!0),y.setCurrentSubGraph(C),ll(y),y.invalidateLight(),y.invalidateboxClipper(),y.invalidateFlowObjects())},toCanvas:function(A,W,d){var M=this,L=M.getGL();if(M.validate(),A){var h=L.getParameter(3106);pk(L,A)}M._42(1,{renderAxis:!1,renderEdit:!1,renderGrid:!1});var r=M.getWidth()||1,q=M.getHeight()||1,Z=new Uint8Array(4*r*q),z=uc(),y=z.getContext("2d");L.readPixels(0,0,r,q,6408,5121,Z),Eh(z,r,q,1);for(var E=y.getImageData(0,0,r,q),V=E.data,J=0;J<V.length;J+=4){var X=J/4,I=$(X/r),u=X-I*r;X=4*((q-1-I)*r+u),V[X]=Z[J],V[X+1]=Z[J+1],V[X+2]=Z[J+2],V[X+3]=Z[J+3]}if(y.putImageData(E,0,0),A&&pk(L,h),M._42(M.getDevicePixelRatio()),W&&d){var Q=uc(),O=Q.getContext("2d");return Eh(Q,W,d,1),T.drawImage(O,z,0,0,W,d),Q}return z},toDataURL:function(b,j){var u=this,k=u.getGL();if(u.validate(),b){var W=k.getParameter(3106);pk(k,b)}u._42(1,{renderAxis:!1,renderEdit:!1,renderGrid:!1});var C=u._canvas.toDataURL(j||"image/png",1);return b&&pk(k,W),u._42(u.getDevicePixelRatio()),C},isWebGL2:function(){return 2===this._webGLVersion},getGL:function(){var r=this._26I;if(r)return r;if(!this._35O){var x=this,V=x._canvas,G=x._attributes;if(!G||G.requestWebGL2!==!1)try{r=V.getContext("webgl2",G)||V.getContext("experimental-webgl2",G),r&&(x._webGLVersion=2,x._26I=r)}catch(j){}if(!r)try{r=V.getContext("webgl",G)||V.getContext("experimental-webgl",G)}catch(j){throw new Error("WebGL not supported")}if(!r)throw new Error("WebGL not supported");x._26I=r;var S=x._frameState=new Hs(this,r);x._glExtensions=new K(r),x._glCapabilities=new N(r,x._glExtensions),x._glPrograms=new hd(x,r),x._2O={},r._emptyCubeTexture=Ji(r),r._compiledShader={},r._emptyTexture=As(r),r._emptyBlendTexture=As(r),r._bufPool={},r._id=++Ls,r._divisorState=[],S.setGLState(),x._buffer={vs:hk(r),ns:hk(r),is:hk(r),uv:hk(r),batchColor:hk(r),batchBlend:hk(r),batchBrightness:hk(r),lineDistance:hk(r)},x._1O=fj(x,r);var p=x._cube={vs:hk(r),ns:hk(r),is:hk(r),uv:hk(r)};return Eo(r,p.vs,Md),Eo(r,p.ns,pm),Eo(r,p.uv,bc),ke(r,p.is,Xn),x._genBatchInstancedArrayFunc(),r._renderInfo={calls:0,vertices:0,faces:0,lines:0,points:0,textureCache:{time:0,count:0,pixels:0},frame:0,cacheTimeCost:0,reflectDepth:0},r._dynamicTexturePool={},r}},getGLCapabilities:function(){var F=this.getGL();return F?this._glCapabilities:void 0},getGLExtensions:function(){var A=this.getGL();return A?this._glExtensions:void 0},getShadowMap:function(){return this.shadowMap},invalidateShape3dAttribute:function(T,O){delete T._complete_;var C=T[O];C&&C._bufId&&delete C._bufId},getEnvmap:function(){return this._glCapabilities&&this._glCapabilities.maxVertexTextures<T.graph3dEnvmapCapabilityRequire?null:this.dm().getEnvmap()},getEnvmapType:function(){var N,B=this.dm();return B&&(N=B.getEnvmapType()),N||"legacy"},setEnvmapExtraQuaternion:function(t){this._envmapExtraQuaternion=t instanceof Of.Quaternion?t.clone().inverse().toArray():null},invalidateEnvmap:function(G){return this._envmapRenderer.invalidateEnvmap(G)},invalidateEnvmapUsedByMaterial:function(i){return this._envmapRenderer.invalidateEnvmapUsedByMaterial(i)},isEnvmapUsedByMaterialReady:function(e){return this._envmapRenderer.isEnvmapUsedByMaterialReady(e)},_setEnvmapByProbeId:function(D,X,Z){return this._envmapRenderer.setEnvmapByProbeId(D,X,Z)},_tryInvalidateEnvmap:function(){var r=this.getEnvmapType();r!==this._lastProgramEnvmapType&&(this._envmapRenderer.changeEnvmapType(this._lastProgramEnvmapType=r),this.iv())},acquireProgram:function(c,J){return this._glPrograms.acquireProgram(c,J)},renderModel:function(M,v,E,q,J){var B;J&&J.restoreViewport===!1||E&&E.restoreViewport===!1||v&&v.restoreViewport===!1||(B=this.getViewport(),B&&(B=ho(B)));var W=this._postProcessing.blitScreen(M,v,E,q,J);return B&&this.setViewport(this.getGL(),B[0],B[1],B[2],B[3]),W},renderPrefab:function(){return this.renderModel.apply(this,arguments)},isGLTempRegisterLimited:function(){return this._glTempRegisterLimited},getBrightness:function(z){var t=z.s("brightness"),Q=this.isSelected(z)?z.s("select.brightness"):C;return t==C?Q:Q==C?t:t*Q},getDataHighlightMode:function(u){return u.s("highlight.mode")},getWireframe:function(t){var x=t.s("wf.visible"),h=t.s("wf.width");return x===!0||h>0&&"selected"===x&&this.isSelected(t)?{color:t.s("wf.color"),width:h,"short":t.s("wf.short"),mat:t.s("wf.mat")}:void 0},getPartPosition:function(H,X,R,o){o=o||gc;var D=this.getData3dUI(H),P=D._16O(o.autoRotate,X,C,R||Rl,o.t3,o.r3,o.rotationMode);return[P[12],P[13],P[14]]},_transformPointToViewSpace:function(K){var X=[K[0],K[1],K[2]];return Zg(X,this._viewMatrix),X},_transformDirectionToViewSpace:function($,I){var y=$?[$[0],$[1],$[2]]:[0,0,0];Zg(y,this._viewMatrix);var d=I?[I[0],I[1],I[2]]:[0,0,0];Zg(d,this._viewMatrix);var v=d[0]-y[0],L=d[1]-y[1],R=d[2]-y[2],s=Math.sqrt(v*v+L*L+R*R);return s?[v/s,L/s,R/s]:[v,L,R]},getWireframeGeometry:function(f){return f.s("wf.geometry")?{color:f.s("wf.color"),width:f.s("wf.width"),mat:f.s("wf.mat"),geometry:!0}:void 0},getBodyColor:function($){return $.s("body.color")},getMat:function(x){return x.getMat?x.getMat():x.s("mat")},getFaceMat:function(C,n){return C.getFaceMat?C.getFaceMat(n):C.s(n+".mat")},getFaceBlend:function(w,p){return w.s(p+".blend")||w.s("all.blend")},getFaceColor:function(I,i){return I.s(i+".color")||I.s("all.color")},getFaceImage:function(y,R){return y.s(R+".image")||y.s("all.image")},getFaceBlendImage:function(u,g){return u.s(g+".blend.image")||u.s("all.blend.image")},getFaceDiscardSelectable:function(Q,F){var z=Q.s(F+".discard.selectable");return z==C?Q.s("all.discard.selectable"):z},getFaceUv:function(w,F){return w.s(F+".uv")||w.s("all.uv")},getFaceUvOffset:function(F,v){return F.s(v+".uv.offset")||F.s("all.uv.offset")},getFaceUvScale:function(c,A){return c.s(A+".uv.scale")||c.s("all.uv.scale")},getFaceUvRotation:function(R,Y){return R.s(Y+".uv.rotation")||R.s("all.uv.rotation")},getFaceUvAnchor:function(a,h){return a.s(h+".uv.anchor")||a.s("all.uv.anchor")},getFaceLight:function(m,T){var V=m.s(T+".light");return V==C?m.s("all.light"):V},getFaceVisible:function(f,Z){var R=f.s(Z+".visible");return R==C?f.s("all.visible"):R},getFaceOpacity:function(Q,X){var F=Q.s(X+".opacity");return F==C?Q.s("all.opacity"):F},getFaceTransparent:function(E,L){var M=E.s(L+".transparent");return M==C?E.s("all.transparent"):M},getFaceReverseColor:function(O,M){return O.s(M+".reverse.color")||O.s("all.reverse.color")},getFaceReverseFlip:function(k,o){var A=k.s(o+".reverse.flip");return A==C?k.s("all.reverse.flip"):A},getFaceReverseCull:function(L,N){var v=L.s(N+".reverse.cull");return v==C?L.s("all.reverse.cull"):v},getFaceMaterial:function(B,_){var P=B.s(_+".material");return P==C?B.s("all.material"):P},isPicking:function(){return this._picking},renderPickScene:function(){var Q=this.getGL();this.syncRenderState(),this._picking=Q._picking=!0,this.renderScene(),this._picking=Q._picking=!1},invalidateCachedGeometry:function(q){var i=this.getData3dUI(q);i.invalidateCachedGeometry(),this.invalidateData(q)},isInteractive:function(O){return O.s("interactive")},redraw:function(){this.iv()},validateImpl:function(){var W=this;if(W._lightChanged){W._lightChanged=!1;var N=[],L=[],Z=[],V=[];W.dm().each(function(R){if(of(R)){var Q=R.s("light.type");Q===Ql?N.push(R):Q===jk?L.push(R):Q===sj?Z.push(R):"rect"===Q&&V.push(R)}}),W._59O=N,W._spots=L,W._dirs=Z,W._87I=V}var v=W.getAspect();v!==W.__cachedAspect__&&(W._updateSkybox({property:"asceptChanged"}),W.__cachedAspect__=v),W._42(),W._1o.iv()},getRenderInfo:function(){var R=this.getGL();return R?R._renderInfo:void 0},getDebugTip:function(){var h=this,c=h.getRenderInfo();if(c){var K=h.getGL(),j=K._validBufCount||0,x="Draw Calls: "+c.calls+"<br/>"+"Vertices: "+c.vertices+"<br/>"+"Faces: "+c.faces+"<br/>"+"Lines: "+c.lines+"<br/>"+(c.points?"Points: "+c.points+"<br/>":"")+"Buffers: "+j+"<br/>"+"Programs: "+(K._validProgramCount||0)+"<br/>"+"Cache Models: "+b.keys(pf).length+"<br/>"+"Shape3d Models: "+b.keys(gj).length;if(h.isVRPresenting()&&(x+="<br/>VR fps: "+h.vr.getFps()),c.textureCache){var E=c.textureCache.count;if(x+="<br/>2D Dynamic Textures: "+c.textureCache.count,E>0){var N,e=c.textureCache.pixels;N=e>1e6?Math.round(e/1e6)+"M":e>1e3?Math.round(e/1e3)+"K":Math.round(e),x+="<br/>2D Dynamic pixels: "+N}}return x}},getFrameState:function(){return this._frameState},isBoundingBoxInView:function(){var q=new L.Math.Box3,U=new L.Math.Matrix4;return function($){var R=$;if(R instanceof L.Data&&(R=this.getData3dUI(R)),!R.mat)return!0;var G=R.getBoundingBox(!0);q.copy(G).applyMatrix4(U.fromArray(R.mat));var u=this.getFrustum();return u.intersectsBox(q)}}(),updateScene:function(){var w=this;w.onPreUpdate(),w._81O=C,w.overlappingBox.clear(),w.initSkeletonDatas();var X=w._40Q;X.init();var p=w.getGL(),B=w.dm();if(B.isHierarchicalRendering())B.eachByHierarchical(function(J){var F=w.getData3dUI(J);F&&F.update(w,p,X)});else{var c,o,h,D=B.getDatas().getArray(),g=D.length;for(c=0;g>c;c++)o=D[c],h=w.getData3dUI(o),h&&h.update(w,p,X)}this._updateBoxClipperMatrix(),X.onUpdated(),w.onPostUpdate()},_pushFrameRenderOptions:function(U){this._frameRenderOptionStack.push(this._currentFrameRenderOptions),this._currentFrameRenderOptions=U},_popFrameRenderOptions:function(){this._currentFrameRenderOptions=this._frameRenderOptionStack.pop()},_getFrameRenderOptions:function(e){var O=this._currentFrameRenderOptions;return O&&O[e]},getRenderLists:function(){return this._40Q},renderScene:function(F){function m(G,j){i.setGLState(G,j),i.setUniforms(G),i.renderState.attribs.disable(),L=g.directUniforms(),R=g.directAttribs(),R.disable()}function G(J){for(var l=!1;A>X;X++){var N=w[X];if(!s||!N.ignoreInPick){if(N.priority>=J)break;(!t._43Q[t._44Q=N.id]||pe[Dd.length])&&(N.render(Q,t,i),m(),l=!0)}}return l}var t=this,Q=t.getGL(),s=t._picking;s||t.onPreRender(),t._glPrograms.setCurrentFrameRenderId(Q._renderInfo.renderId=t._renderId++),t.genProgramDefines();var i=t._frameState,Z={};s&&(Z.BATCHINSTANCE=!t._batchInstancedDisabled||t._picking&&t._model3dInstancedBatchCount>0),t._prg=i.defaultProgram=t.acquireProgram({type:s?"pick":"legacy",defines:Z}),t._pushFrameRenderOptions(F),t._getFrameRenderOptions("renderShadowMap")!==!1&&t.shadowMap.render(),t.flowMap.render(),t._envmapRenderer.onBeforeRender(Q),t._44Q=-1;var L,R,g=i.renderState,U=g.glState,M=t._prg;t._projectMatrix=al(t),ph(t,t._7O),t._viewMatrix=Lc(t._7O),t.isReflecting(Q)||Wo(t._projScreenMatrix=Wp(),t._projectMatrix,t._viewMatrix),i.syncEnv(s?this.pickColorMap:H),g.useProgram(M),m(!1,!0),Q.clear(256);var w=this._41Q,X=0,A=w.length;if(G(T.cameraPriority.skybox),s){var B=U.color.clear.slice(0);pk(Q,[0,0,0,0])}else pk(Q,[0,0,0,0]),U.blend.enabled=!1,U.depth.enabled=!1,U.depth.mask=!1,t._camera&&t._camera.s("camera.renderSky")===!1||t.drawSky(Q,M),t._getFrameRenderOptions("renderReflector")!==!1&&t.drawReflectors(Q)&&(t._projectMatrix=al(t),ph(t,t._7O),t._viewMatrix=Lc(t._7O),i.syncEnv(),m(),t._glPrograms.setCurrentFrameRenderId(Q._renderInfo.renderId=t._renderId++)),U.blend.enabled=!1,U.depth.enabled=!0,U.depth.mask=!0,L.uTransparent=!1,t._getFrameRenderOptions("renderGrid")!==!1&&t._31O._42(Q);if(!Q.textureBatch||pe[(ONE_FRAME_TIME-6)/2]){s||(t.shadowMap.enable&&t.shadowMap.createShadow(L),t.flowMap.createFlow(L));for(var f=t._sortedRenderLayers,c=0,y=f.length;y>c;c++){var u=f[c],$=t.getRenderLayerInfo(u);if((t._camera||!$.ignore||$.renderForBloom&&Q._blooming)&&(!t._camera||t._camera.isLayerVisible(u))){var q=$.priority;G(q)&&(s||(t.shadowMap.enable&&t.shadowMap.createShadow(L),t.flowMap.createFlow(L))),this.renderLayer(u)}}G(T.cameraPriority.infinity),s||(t._renderBonesForDebug(Q,U),t.flowMap.disableFlow(L)),xc(t,L,0,T.graph3dViewHeadlightAmbientIntensity),L.uHeadlightColor=[1,1,1,0],L.uUseEnvMap=!1,L.uHeadlightDirection=[0,0,0],L.uHeadlightRange=0,U.depth.enabled=!1,L.uTransparent=!1,L.shadowReceive=!1,ch(t,L,Ie),s?t.drawFilter||t._30O._42(Q):(t._highlightHelper._42(Q),this._renderAxisAndEditHelper(t._getFrameRenderOptions("renderAxis")!==!1,t._getFrameRenderOptions("renderEdit")!==!1),U.blend.enabled=!1,U.depth.mask=!0),U.depth.enabled=!0,s&&pk(Q,B),Eo(Q,C),ke(Q,C),t._44Q=-1,t._popFrameRenderOptions(null),t._glPrograms.disableAttributes(Q),s||t.onPostRender()}},_renderAxisAndEditHelper:function(F,z){if(F||z){var M=this,E=M.getGL(),o=M._frameState,P=o.renderState,w=P.glState,N=P.directUniforms();o.renderState.attribs.disable(),w.depth.enabled=!1,N.uTransparent=!1,N.shadowReceive=!1,w.blend.enabled=!1,w.depth.mask=!0;var R=!M._fogDisabled;R&&(N.uFog=!1),F&&M._32O._42(E),z&&M._30O._42(E),R&&(N.uFog=!0),Eo(E,C),ke(E,C)}},renderLayers:function(L,A){A&&(L=Ol(L));for(var D=0,w=L.length;w>D;D++)this.renderLayer(L[D])},renderSky:function(){var R=this,s=R._frameState,E=s.renderState,V=E.glState,b=R.getGL(),n=R._prg;R._projectMatrix=al(R),ph(R,R._7O),R._viewMatrix=Lc(R._7O),Wo(R._projScreenMatrix=Wp(),R._projectMatrix,R._viewMatrix),s.syncEnv(),E.useProgram(n),s.setGLState(!1,!0),s.setUniforms(!1),s.renderState.attribs.disable(),b.clear(256),pk(b,[0,0,0,0]),V.blend.enabled=!1,V.depth.enabled=!1,V.depth.mask=!1,R.drawSky(b,n),V.depth.mask=!0,V.depth.enabled=!0,Eo(b,C),ke(b,C)},addRenderLayerListener:function(Y,G,u){var n=this;n._renderLayerNotifier||(n._renderLayerNotifier=new _m),n._renderLayerNotifier.add(Y,G,u)},removeRenderLayerListener:function(s,U){this._renderLayerNotifier&&this._renderLayerNotifier.remove(s,U)},fireRenderLayerEvent:function(R,V){var y=this._renderLayerNotifier;y&&y.fire({layer:R,phase:V})},renderLayer:function(X){var u=this,R=u._picking,z=u._40Q.get(X);if(z){u.fireRenderLayerEvent(X,"prepare");var T=u.getGL(),y=u.getRenderLayerInfo(X),B=u._frameState,g=B.renderState,d=g.glState,F=g.directUniforms();!R&&u.isSortable()&&z.sort(u._sortFunc,u._projScreenMatrix),z.resetModel3dInstancedDraw();var i,m,b,Q=z.opaque,Y=z.transparent,K=z.batchModelMap,x=z.batchIndexMap,W=z.polylineModelMap,e=z.wireframeModelMap,T=u.getGL(),j=u._prg;R||(d.blend.enabled=!1,d.depth.enabled=!0,d.depth.mask=!0),F.uTransparent=!1,y.clearDepth!==!1&&T.clear(256);var S=this.drawFilter;if(S){for(b=Q,i=0,m=b.length;m>i;i++)S(b[i].data)!==!0&&b[i].ui._42(T,j,w);if(R)for(b=Y,i=0,m=b.length;m>i;i++)b[i].ui._46Q(T);Oo(u,K,x)}else{for(b=Q,i=0,m=b.length;m>i;i++)b[i].ui._42(T,j,w);if(R)for(b=Y,i=0,m=b.length;m>i;i++)b[i].ui._46Q(T);Oo(u,K,x),Te(u,W),Te(u,e)}if(R||(d.blend.enabled=!0,d.depth.mask=!1),u._45Q=F.uTransparent=!0,S){for(b=Y,i=0,m=b.length;m>i;i++)S(b[i].data)!==!0&&b[i].ui._42(T,j,V);Oo(u,K,x,null,!0)}else{for(b=Y,i=0,m=b.length;m>i;i++)b[i].ui._42(T,j,V);Oo(u,K,x,null,!0),Te(u,W,null,!0),Te(u,e,null,!0)}u._45Q=null,u.fireRenderLayerEvent(X,"post")}},onPreFrame:zj,onPostFrame:zj,onPreUpdate:zj,onPostUpdate:zj,onPreRender:zj,onPostRender:zj,onPreRenderData:zj,onPostRenderData:zj,_42:function(I,c){var h=this;if(!h._35O&&(!js||pe(js))){var L=h.getWidth(),Q=h.getHeight();if(L&&Q){var B=h.getGL();if(B){var t,Z=h._canvas;if(I?t=!0:I=h.getDevicePixelRatio(),!h._picking&&(t||L!==Z.clientWidth||Q!==Z.clientHeight)){Eh(Z,L,Q,I);var a=I;L&&Math.abs(B.drawingBufferWidth-L*I)>1&&(a=Math.min(a,B.drawingBufferWidth/L)),Q&&Math.abs(B.drawingBufferHeight-Q*I)>1&&(a=Math.min(a,B.drawingBufferHeight/Q)),a!==I&&(h.setDevicePixelRatio(I=a),Eh(Z,L,Q,I)),h._18Q=null}B.clear(16384);var E=B._renderInfo;E.calls=0,E.vertices=0,E.faces=0,E.lines=0,E.points=0,E.textureCache={time:0,count:0,pixels:0},E.frame=++h._frameId,E.cacheTimeCost=0,E.reflectDepth=0,h.__uptime=(Date.now()-h.__startTime)/1e3,L*=I,Q*=I,h._gatherRenderLayersByPriority(),h.onPreFrame(),h.syncRenderState(),h._glPrograms.checkParallelLinkStatus();do{if(h.isVREnabled()&&h.vr.render(B,L,Q,c))break;h.updateScene();var o=h._4JQ;if(!o&&h._postProcessing.render(B,L,Q,c))break;h.setViewport(B,0,0,L,Q),o?h.renderPickScene(c):h.renderScene(c)}while(!1);h._33Q=!1,h.countFrame(),h.onPostFrame(),h._doBufferGC(B),h._glPrograms.scheduleProgramGC(h._shaderGCInterval||500)}}}},_4IQ:function(m){this._4JQ=m,this.iv()},syncRenderState:function(){var h,n;(h=this._frameState)&&(n=h.renderState)&&n.syncLoss()},drawReflectors:function(K){K._renderInfo.reflectDepth++;var M,p,Z,S=this,$=S._dataModel.getReflectors(),q=!1;for(M in $)p=$[M],S.isVisible(p)&&(Z=S.getData3dUI(p),Z&&Z.drawReflector&&Z.drawReflector(K)&&(q=!0));return K._renderInfo.reflectDepth--,q},isReflecting:function(M){return M._renderInfo.reflectDepth},isRenderSceneForBloom:function(){var r=this.getGL();return r?!!r._blooming:!1},getPostProcessing:function(){return this._postProcessing},enablePostProcessing:function(N,g){return this._postProcessing.enableModule(N,g)},getPostProcessingModule:function(Q){return this._postProcessing.getModule(Q)},getPostProcessingValue:function(N,X){var A=this._postProcessing.getModule(N);return A?A[X]:H},setPostProcessingValue:function(o,U,l){var z=this.getPostProcessingValue(o,U),y=this._postProcessing.getModule(o);y&&z!==l&&("enable"===U?this.enablePostProcessing(o,l):y[U]=l,this.firePropertyChange("postProcessing."+o+"."+U,z,l))},setDofImageFromGraphView:function(C,z,Y){return this._postProcessing.getModule("Dof").setImageFromGraphView(C,z,Y)},setViewport:function(Z,o,G,f,y){this._viewport=[o,G,f,y],ie.for(Z).directState().viewport=this._viewport},getRenderState:function(){return ie.for(this._26I)},genProgramDefines:function(){var p=this,Z=p.getEnvmap(),e=Z&&Z.length,H={NUM_DIR_LIGHTS:p._dirs.length,NUM_SPOT_LIGHTS:p._spots.length,NUM_POINT_LIGHTS:p._59O.length,MAX_BOX_CLIPPER:p._boxClippers.length,MAX_FLOW_OBJECT:p._flowObjects.length,FOG:!p._fogDisabled,FOG_EXP2:"exp2"===p.getFogMode(),DASH:!p._dashDisabled,UV_CLIP:!!p._uvClipEnabled,ENVMAP_ROTATE:null!=p._envmapExtraQuaternion,USE_ENVMAP:!!e,ENVMAP_TYPE_CUBE_UV:"legacy"!==p.getEnvmapType(),BATCHCOLOR:!p._batchColorDisabled,BATCHINSTANCE:!p._batchInstancedDisabled,BATCHBLEND:!p._batchBlendDisabled,BATCHBRIGHTNESS:!p._batchBrightnessDisabled},q=Ks[p.getFlowBlendMode()]||Ks[T.graph3dViewFlowBlendMode];return H[q]=!0,p.shadowMap.enable&&p.shadowMap.genShaderDefine(H),p._programDefines=H},getViewport:function(){return this._viewport},setBufferGCInterval:function(b){this._bufferGCInterval=b},setShaderGCInterval:function(T){this._shaderGCInterval=T},_doBufferGC:function(R,i){var Z,N,v=R._bufPool,_=0,z=0,b=R._renderInfo.frame,y=this._bufferGCInterval||10;for(Z in v)_++,N=v[Z],N&&(i||b-N._fid>y?(R.deleteBuffer(N._buf),N._buf=null,v[Z]=null):z++);if(_/2>z&&_>128){var c={};for(Z in v)v[Z]&&(c[Z]=v[Z]);R._bufPool=c}R._validBufCount=z},_swapLineMap:function(){var i=this;Xg=i._polylineModelMap,i._polylineModelMap=i._polylineModelMapSwap,i._polylineModelMapSwap=Xg,Xg=i._wireframeModelMap,i._wireframeModelMap=i._wireframeModelMapSwap,i._wireframeModelMapSwap=Xg,Xg=i._polylineIndexMap,i._polylineIndexMap=i._polylineIndexMapSwap,i._polylineIndexMapSwap=Xg,Xg=i._wireframeIndexMap,i._wireframeIndexMap=i._wireframeIndexMapSwap,i._wireframeIndexMapSwap=Xg},_updateSkybox:function(m){if(this._skybox&&m){var n=m.property,M=!1,t=this._skybox;if("eye"===n||"forceUpdate"===n){var z=this._eye;t.p3(z[0],z[1],z[2]),M=!0}if("near"===n||"far"===n||"forceUpdate"===n||"asceptChanged"===n){var W=t.__cachedS3__;W||(W=t.__cachedS3__=t.getFinalScale3d());var C=Math.sqrt(3),x=1/0,V=-1/0;W.forEach(function(K){K/=2,x=r(K,x),V=h(K,V)}),V*=C;var H=this._near,A=this._far,o=Math.tan(this.getFovy()/2)*H,p=this.getAspect()*o,y=1.1*Math.sqrt(p*p+o*o+H*H),J=1;if(y>x)J=y/x;else if(V>=A){var l=A*A/(H+A);J=l/V}if(1!==J){t.__updatingSkybox__=!0;var F=W.map(function(i){return J*i});t.s3(F),t.setScale3d(1,1,1),M=!0,delete t.__updatingSkybox__}}M&&this.invalidateData(t)}},getSkyBox:function(){return this.getSkybox()},setSkyBox:function(z){return this.setSkybox(z)},getSkybox:function(){return this._skybox},setSkybox:function(i){var d=this._skybox;if(d===i)return i&&this._updateSkybox({property:"forceUpdate"}),void 0;if(d&&(this._skyboxStyleMap&&d.setStyleMap(this._skyboxStyleMap),this._skyboxStyleMap=null,this._skyboxAnchor3d&&d.setAnchor3d(this._skyboxAnchor3d),this._skyboxAnchor3d=null,this._skyboxP3&&d.p3(this._skyboxP3),this._skyboxP3=null,this.handleDataModelChange({kind:vc,data:d})),this._skybox=i,this.ump(this._updateSkybox,this),i){i.removeFromDataModel(),this._skyboxStyleMap=L.Default.clone(i.getStyleMap()),this._skyboxAnchor3d=i.getAnchor3d(),i.setAnchor3d(.5,.5,.5),this._skyboxP3=i.p3().slice(0),i.s({"shape3d.reverse.flip":!0,"shape3d.reverse.cull":!1,"all.reverse.flip":!0,"all.reverse.cull":!1,"front.reverse.flip":!0,"front.reverse.cull":!1,"back.reverse.flip":!0,"back.reverse.cull":!1,"left.reverse.flip":!0,"left.reverse.cull":!1,"right.reverse.flip":!0,"right.reverse.cull":!1,"top.reverse.flip":!0,"top.reverse.cull":!1,"bottom.reverse.flip":!0,"bottom.reverse.cull":!1});var I=i.onPropertyChanged;i.onPropertyChanged=function(y){I.call(i,y),!i.__updatingSkybox__&&["width","height","tall","scale","scaleTall"].indexOf(y.property)>=0&&(i.__cachedS3__=H)},this.mp(this._updateSkybox,this),this._updateSkybox({property:"forceUpdate"})}this.fp("skybox",d,i)},drawSky:function(O,L){var W=this,E=W._skybox;if(E){var $=0,H=0;if((!W._camera||W._camera.s("camera.skybox.blur")!==!1)&&($=E.s("skybox.blur.size"),H=E.s("skybox.blur.resolution"),0!==$||0!==H)){var N=H||W.getDevicePixelRatio();W._blurRTT||(W._blurRTT=new jg.RenderTarget(W,null,null,{}));var K=W.getWidth()*N,J=W.getHeight()*N;W._blurRTT.setSize(O,K,J);var q=ho(W._viewport);W.setViewport(O,0,0,K,J),W._blurRTT.bind(O)}var m=ie.for(O).directUniforms(),C=W._headlightIntensity,s=dh(W._headlightColor),L=W._prg;1!==C&&(s=[s[0]*C,s[1]*C,s[2]*C]),m.uHeadlightColor=[s[0],s[1],s[2],1];var d=W.getData3dUI(E);if(d){var X=W.isOrtho(),R=X||this._computedProjectMatrix;if(R){var F=W._projectMatrix;X&&(W._ortho=!1),m.uProjectMatrix=W._projectMatrix=al(W,!0)}var P=E.p3(),A=this.getEye();(P[0]!==A[0]||P[1]!==A[1]||P[2]!==A[2])&&(E._position.x=A[0],E._54O=A[1],E._position.y=A[2]),d.validate(),d._42(O,L,M),R&&(X&&(W._ortho=!0),m.uProjectMatrix=W._projectMatrix=F)}if(O.clear(256),m.uHeadlightColor=[s[0],s[1],s[2],W._headlightDisabled?1:0],0!==$||0!==H){if(W._blurRTT.unbind(O),0!==$){var B=W.getPostProcessingModule("Blur");B&&B.drawImpl(O,W._blurRTT,$,!1,$>4?4:$>2?3:$>1?2:1)}W.setViewport(O,q[0],q[1],q[2],q[3]),W.renderModel(null,{type:"blitScreen",image:W._blurRTT.texture,defines:{DITHERING:!!f.wudm}},{clear:!1})}}},getLogicalPoint:function(D){return Dc(D,this._canvas)},isRectOverlapping:function(Y){var A=this.getData3dUI(Y);return A._rectOverlapping},getHitFaceInfo:function($){$.target&&($=this.lp($));var S=this.getDataInfoAt($);if(S){var U=this.intersectObject($,S.data);if(U)return{data:S.data,face:U.part}}return C},unproject:function(d,G){var I=this,y=I.getWidth(),l=I.getHeight(),X=d.target?I.lp(d):d,z=X.x-y/2,L=X.y-l/2,J=2*(z/y),O=2*(-1*L/l);G=G||0;var w=Wp(),t=al(I),K=ph(I);Wo(w,t,K),_n(w);var i=Jq([J,O,G,1],w);return[i[0]/i[3],i[1]/i[3],i[2]/i[3]]},getDataAt:function(B){var U=this.getDataInfoAt(B);return U?U.data:C},getDataInfoAt:function(Q,E,t){return Q.target&&(Q=this.lp(Q)),this._1o.get(Zd(Q.x,Q.y,E),!0,t)},getDatasInRect:function(c,n){return this._1o.get(c,!1,n)},setEditable:function(I){var H=this,t=H._editable;H._editable=I,this.fp(Gh,t,I)},isEditable:function(f){var E=this;return f?E._editable?Tk(f)?f.s("3d.editable")?E._editableFunc?E._editableFunc(f):!0:!1:!1:!1:E._editable},isSelectable:function(q){return q.s("3d.selectable")&&this.sm().isSelectable(q)},isMovable:function(P){var q=this;return Cg(P)&&P.getStyle(xo)!==Qr?!1:P.s("3d.movable")?q._movableFunc?q._movableFunc(P):!0:!1},isSizeEditable:function(Y){return Tk(Y)?this._sizeEditableFunc?this._sizeEditableFunc(Y):!0:!1},isRotationEditable:function(g){return Tk(g)&&g.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(g):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(V){this.setZoom(Ok,V)},zoomOut:function(o){this.setZoom(1/Ok,o)},setZoom:function(){var R=new ng,p=new ng,h=new ng,F=new ng;return function(l,Q){if(1!==l){var d=this;d._14o&&d._14o.stop(!0);var Y,X=1/l;R.copy(d.getCenter()),p.copy(d.getEye());var B=d._ortho;if(B){if(Y=d._orthoWidth,Y<d._moveStep&&l>1)return}else if(R.distanceTo(p)<d._moveStep&&1>X)return;var s=!1;return d._zoomToCenter===!1&&d._lastZoomLP&&(h.copy(p).sub(R).normalize(),d._81O=null,F.copy(d.getHitPosition(d._lastZoomLP,R.toArray(),h.toArray())),s=!0,d._lastZoomHit=F),(Q=cf(Q))?(Q.action=function(J){d.fi({kind:d._zooming?"betweenZoom":"beginZoom"}),d._zooming=1;var v=(X-1)*J+1;B&&d.setOrthoWidth(Y*v),s?(d.setEye(h.lerpVectors(F,p,v).toArray()),d.setCenter(h.lerpVectors(F,R,v).toArray())):B||d.setEye(h.lerpVectors(R,p,v).toArray())},Q._37o=function(){delete d._14o,delete d._zooming,d.fi({kind:"endZoom"}),d.onZoomEnded()},d._14o=$m(Q)):(B&&d.setOrthoWidth(Y*X),s?(d.setEye(h.lerpVectors(F,p,X).toArray()),d.setCenter(h.lerpVectors(F,R,X).toArray())):B||d.setEye(h.lerpVectors(R,p,X).toArray()),void 0)}}}(),setOrthoZoom:function(H,x){return this.setZoom(H,x)},getPositionInfo:function(t){var o=this,P=o._eye,p=o._center,N=o.getAspect(),_=t?he(Go(p,P,!0),Go(t,P)):mp(P,p);if(o._ortho){var m=o._orthoWidth;return{length:_,height:m/N,width:m}}var q=2*Ui(o._fovy/2)*_;return{length:_,height:q,width:q*N}},getCenterInfo:function(){var R=this;return R._81O||(R._81O=R.getPositionInfo()),ho(R._81O)},rotate:function(c,W,r,p){var $=this;if(c||W){p==C&&(p=$._firstPersonMode),$._88O&&$._88O.stop(!0);var i=$._center,U=$._eye,T=$.getCenterInfo().length,q=p?i:U,L=p?U:i,w=Go(q,L),h=Nn(w[0],w[2]),A=Nn(Q(w[0]*w[0]+w[2]*w[2]),w[1]),E=p?Vk:Gp;return p&&(W=-W),(r=cf(r))?(r.action=function(i){$.fi({kind:$._rotating?"betweenRotate":"beginRotate"}),$._rotating=1;var z=h+c*i,l=A+W*i;l=p?kl-Yg($,kl-l):Yg($,l),w[0]=T*_(l)*_(z),w[1]=T*t(l),w[2]=T*_(l)*t(z),q[0]=L[0]+w[0],q[1]=L[1]+w[1],q[2]=L[2]+w[2],$.fp(E,C,q)},r._37o=function(){delete $._88O,delete $._rotating,$.fi({kind:"endRotate"}),$.onRotateEnded()},$._88O=$m(r)):(h+=c,A+=W,A=p?kl-Yg($,kl-A):Yg($,A),w[0]=T*_(A)*_(h),w[1]=T*t(A),w[2]=T*_(A)*t(h),q[0]=L[0]+w[0],q[1]=L[1]+w[1],q[2]=L[2]+w[2],$.fp(E,C,q),void 0)}},pan:function(y,A,$,z){if(y||A){var w=this;z==C&&(z=w._firstPersonMode),w._89O&&w._89O.stop(!0);var I=ph(w),D=[I[0]*y,I[4]*y,I[8]*y],L=[I[1]*A,I[5]*A,I[9]*A],W=D[0]+L[0],i=D[1]+L[1],V=D[2]+L[2],s=w._center,f=w._eye;if(z){var S=_e(w.getBoundaries(),f[0],f[2],f[0]+W,f[2]+V,Q(W*W+V*V));W=S[0],V=S[1]}if($=cf($)){var Z=ho(f),N=ho(s);return $.action=function(c){w.fi({kind:w._panning?"betweenPan":"beginPan"}),w._panning=1,s[0]=N[0]+W*c,s[1]=N[1]+i*c,s[2]=N[2]+V*c,f[0]=Z[0]+W*c,f[1]=Z[1]+i*c,f[2]=Z[2]+V*c,w.fp(Gp,C,f),w.fp(Vk,C,s)},$._37o=function(){delete w._89O,delete w._panning,w.fi({kind:"endPan"}),w.onPanEnded()},w._89O=$m($)}s[0]+=W,s[1]+=i,s[2]+=V,f[0]+=W,f[1]+=i,f[2]+=V,w.fp(Gp,C,f),w.fp(Vk,C,s)}},walk:function(n,I,f){if(n){var d=this;f==C&&(f=d._firstPersonMode),d._90O&&d._90O.stop(!0);var i=d._center,w=d._eye,q=Go(i,w,!0);if(f){var c=_e(d.getBoundaries(),w[0],w[2],w[0]+q[0]*n,w[2]+q[2]*n,A(n));if(n=mp(c),!n)return;q=[c[0]/n,0,c[1]/n]}if(I=cf(I)){var m=ho(w),N=ho(i);return I.action=function(O){d.fi({kind:d._walking?"betweenWalk":"beginWalk"}),d._walking=1;var f=n*O;w[0]=m[0]+q[0]*f,w[1]=m[1]+q[1]*f,w[2]=m[2]+q[2]*f,i[0]=N[0]+q[0]*f,i[1]=N[1]+q[1]*f,i[2]=N[2]+q[2]*f,d.fp(Gp,C,w),d.fp(Vk,C,i)},I._37o=function(){delete d._90O,delete d._walking,d.fi({kind:"endWalk"}),d.onWalkEnded()},d._90O=$m(I)}w[0]+=q[0]*n,w[1]+=q[1]*n,w[2]+=q[2]*n,i[0]+=q[0]*n,i[1]+=q[1]*n,i[2]+=q[2]*n,d.fp(Gp,C,w),d.fp(Vk,C,i)}},handleScroll:function(S,q){Ne(S);var f=this,D=f._moveStep,a=f.getDataInfoAt(S);if(a){var v=a.data;if(v&&f.isInteractive(v)){var K=f.intersectObject(S,v);if(K){var d=K.part,P=$p(v.s(d+".image")||v.s("shape3d."+d+".image")||v.s("all.image")||v.s("shape3d.image"));if(P&&hg(P.scrollable,v,f))return}}}return f.isFirstPersonMode()?(f.isPannable()&&f.pan(0,q>0?D:-D),void 0):(f.isZoomable()&&(f._lastZoomLP=f.lp(S),f.setZoom(0>q?1/Bf:Bf),f._lastZoomLP=f._lastZoomHit=null),void 0)},handlePinch:function(a,Y){if(this.isZoomable()){if(Math.abs(a-Y)<T.pinchZoomThreshold)return;this.setZoom(Y>a?1/yr:yr)}},reset:function(S){this.setUp(T.graph3dViewUp),this.moveCamera(T.graph3dViewEye,T.graph3dViewCenter,S)},moveSelection:function(g,f,X){var O=this;O.dm().beginTransaction(),_k(this.sm().toSelection(this.isMovable,this),g,f,X),O.dm().endTransaction()},getMoveMode:function(M,N){var e=N.s("3d.move.mode");if(e)return e;var z="88",r="89",X="90";return ee(M)||Zo[z]&&Zo[r]&&Zo[X]?"xyz":Zo[z]&&Zo[r]?"xy":Zo[z]&&Zo[X]?"xz":Zo[r]&&Zo[X]?"yz":Zo[z]?"x":Zo[r]?"y":Zo[X]?"z":"xz"},handleTick:function(){var T=this,m=!1,Y=T._moveStep,M=Y,d=!1,c=!0,a=T._rotateStep*(c?-1:1);if(T.isWalkable()||(M=0),T.isPannable()||(Y=0),T.isRotatable()||(a=0),T._32Q){var n=(cl()-T._32Q)/50;M*=n,Y*=n,a*=n}T._31Q&&(si(T._31Q),delete T._31Q,delete T._32Q),Kd()&&(m=!0,T.pan(-Y,0,d,c)),dc()&&(m=!0,T.pan(Y,0,d,c)),vs()&&(m=!0,ee()?T.pan(0,Y,d,c):T.walk(M,d,c)),Vd()&&(m=!0,ee()?T.pan(0,-Y,d,c):T.walk(-M,d,c)),Qi()&&(m=!0,T.rotate(-a,0,d,c)),nk()&&(m=!0,T.rotate(a,0,d,c)),Al()&&(m=!0,T.rotate(0,-a/2,d,c)),xh()&&(m=!0,T.rotate(0,a/2,d,c)),m&&(T._32Q=cl(),T._31Q=ef(T.handleTick,T))},handleKeyDown:function(_){var C=this;!cq(_)&&pp[_.keyCode]?C.handleTick():jd(_)?C.selectAll():$i(_)?C.handleDelete(_):rj(_)&&this.isResettable()&&C.reset()},checkDoubleClickOnNote:function(p,V,i){var z=this;if(i===Hp){if(V.s("note.toggleable"))return V.s(sm,!V.s(sm)),z.fi({kind:"toggleNote",event:p,data:V,part:i}),!0}else if(i===Fd&&V.s("note2.toggleable"))return V.s(Gk,!V.s(Gk)),z.fi({kind:"toggleNote2",event:p,data:V,part:i}),!0;return!1},checkDoubleClickOnRotation:function(z,F,R){return R===gt?(F.setRotationX(0),!0):R===ht?(F.setRotationY(0),!0):R===it?(F.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},getViewRatio:function(T){var e=this;if(e.isOrtho())return e.getWidth()/e.getOrthoWidth();var Y=e.getCenter(),y=e.getHeight(),V=e.getEye(),R=[Y[0]-V[0],Y[1]-V[1],Y[2]-V[2]],m=[T[0]-V[0],T[1]-V[1],T[2]-V[2]],C=Math.sqrt(R[0]*R[0]+R[1]*R[1]+R[2]*R[2]),q=1/Math.tan(e.getFovy()/2);return y*C*q/(m[0]*R[0]+m[1]*R[1]+m[2]*R[2])
},inViewSpace:function(e){var n,X=this,B=X._transformPointToViewSpace(e),c=X.getAspect(),_=X.getNear(),l=X.getFar();return-B[2]<_||-B[2]>l?!1:X.isOrtho()?(n=X.getOrthoWidth()/2,Math.abs(B[0])<=n&&Math.abs(B[1]*c)<=n):(n=Math.sqrt(B[0]*B[0]+B[1]*B[1]+B[2]*B[2])*Math.tan(X.getFovy()/2),Math.abs(B[1]<=n)&&Math.abs(B[0])<=n*c)},getPVMatrix:function(){var j,W=this;return(j=W._18Q)||(j=al(W),W._18Q=Wo(j,j,ph(W)),W._18Q._wh=W.getWidth()/2/W.getHeight()),j},getFrustum:function(){var f=new kc,T=new hq,I=new Array(16);return function(){for(var O=this.getPVMatrix(),C=!1,j=0;16>j;j++)O[j]!==I[j]&&(C=!0,I[j]=O[j]);return C&&T.setFromMatrix(f.fromArray(O)),T}}(),toViewPosition:function(B){var i=this,k=i.getWidth()/2,t=i.getHeight()/2,I=i.getPVMatrix();return B=Jq([B[0],B[1],B[2],1],I),{x:k+k*B[0]/B[3],y:t-t*B[1]/B[3],z:B[2]/B[3]}},getHitPosition:function(D,q,O){var r=this,B=r.getWidth(),J=r.getHeight(),U=D.target?r.lp(D):D,L=U.x-B/2,M=U.y-J/2,g=r.getCenterInfo(),$=ph(r);q=q?q:[0,0,0],O=O?O:[0,1,0],L=L/B*g.width,M=-1*M/J*g.height;var Z=[$[0]*L,$[4]*L,$[8]*L],x=[$[1]*M,$[5]*M,$[9]*M],o=[Z[0]+x[0],Z[1]+x[1],Z[2]+x[2]],G=r.getCenter(),K=Vc(r,q,O,[o[0]+G[0],o[1]+G[1],o[2]+G[2]]);return K?K:[0,0,0]},intersectObject:function(_,U){return this._raycaster.intersectObject(_,U)},intersectObjects:function(Y,n,X){return this._raycaster.intersectObjects(Y,n,X)},getLineLength:function(E){this.validate();var C=this.getData3dUI(E);if(C&&C.getCache){var o=C.getCache();if(o)return o[o.length-1].length}return 0},getLineOffset:function(Y,z){var I=this.getData3dUI(Y);if(I&&I.getCache){var j=I.getCache();if(j){var A=Mo(j,z);if(Y.s("shape3d")!==nm)return A;var t,H;if(Y.getScale3d&&(t=Y.getScale3d(),1===t[0]&&1===t[1]&&1===t[2]&&(t=null)),Y.r3&&(H=Y.r3(),0===H[0]&&0===H[1]&&0===H[2]&&(H=null)),!H&&!t)return A;var c=new ng(Y.p3()),R=new ng(A.point).sub(c),s=new ng(A.tangent).add(R);if(t&&(t=new ng(t),R.multiply(t),s.multiply(t)),H){var O=(new $d).setFromEuler(new re(H,Y.getRotationMode(),!0));R.applyQuaternion(O),s.applyQuaternion(O)}return{point:R.clone().add(c),tangent:s.sub(R).normalize()}}}return C},_genBatchInstancedArrayFunc:function(){var j=this._glCapabilities&&this._glCapabilities.instancedArray&&!this._batchInstancedDisabled,h=j?os:fq;this.batchInstancedModel=function(z,$,L,d,s,B,C){h(this,z,$,L,d,s,B,C)};var i=j?ul:Gi;this.batchInstancedShapeFace=function(r,p,c){i(r,p,c)};var y=j?Ge:Bq;this.batchInstancedFace=function(t,k,u,V,h){y(this,t,k,u,V,h)}},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0},moveCamera:function(q,T,y){var J=this,I=J.getEye();I=[I[0],I[1],I[2]];var p=J.getCenter();if(p=[p[0],p[1],p[2]],q||(q=I),T||(T=p),J._flyAnim&&J._flyAnim.stop(!0),y=cf(y),!y)return J.setEye(q[0],q[1],q[2]),J.setCenter(T[0],T[1],T[2]),delete J._flyAnim,!0;var H=[q[0]-I[0],q[1]-I[1],q[2]-I[2]],f=[T[0]-p[0],T[1]-p[1],T[2]-p[2]];return y.action=function(v){J.setCenter(p[0]+f[0]*v,p[1]+f[1]*v,p[2]+f[2]*v),J.setEye(I[0]+H[0]*v,I[1]+H[1]*v,I[2]+H[2]*v)},y._37o=function(){delete J._flyAnim},J._flyAnim=$m(y)},flyTo:function(){function b(T,Q,j){if(j instanceof L.Node){t.fromArray(Pn(j,Q.getMat(j)));var g=j.getAnchor3d();T.push((new ng).set(0-g.x,0-g.y,0-g.z).applyMatrix4(t)),T.push((new ng).set(0-g.x,0-g.y,1-g.z).applyMatrix4(t)),T.push((new ng).set(0-g.x,1-g.y,0-g.z).applyMatrix4(t)),T.push((new ng).set(0-g.x,1-g.y,1-g.z).applyMatrix4(t)),T.push((new ng).set(1-g.x,0-g.y,0-g.z).applyMatrix4(t)),T.push((new ng).set(1-g.x,0-g.y,1-g.z).applyMatrix4(t)),T.push((new ng).set(1-g.x,1-g.y,0-g.z).applyMatrix4(t)),T.push((new ng).set(1-g.x,1-g.y,1-g.z).applyMatrix4(t))}}var E=new ng,A=new ng,g=new ng,v=new ng,h=new ng,t=new kc,G=new L.Math.Quaternion,W=new re,i=new qr;return function(C,O,X){var f=this;"boolean"==typeof O&&(O={animation:O}),O=O||{};var $=O.center,J=O.distance,K=O.direction,k=O.worldDirection,j=X||O.ratio||.8,M=O.xRatio||j,Z=O.yRatio||j;(X!==H||O.duration||O.frames)&&(O={animation:O});var r,w,q=[],o=J===H;if($&&g.fromArray($),!$||o)if(C||(C=f.dm().getDatas()),1===C.length&&(C=Ur(C)?C.get(0):C[0]),C instanceof L.Node)$||g.fromArray(C.p3()),o&&(b(q,f,C),r=q.length);else{if(!C.length)return;if((o||!$)&&(q=[],C.forEach(function(p){b(q,f,p)}),r=q.length,!r))return;$||(i.setFromPoints(q),g.copy(i.min).add(i.max).multiplyScalar(.5))}if(f._flyAnim&&f._flyAnim.stop(!0),E.fromArray(f.getEye()),A.fromArray(f.getCenter()),f.setCenter(g.x,g.y,g.z),v.subVectors(E,A),K||k){!k&&C instanceof L.Node?G.setFromEuler(W.set(C.r3(),C.getRotationMode(),!0)):G.set(0,0,0,1);var F=v.length();v.fromArray(k||K).applyQuaternion(G).setLength(F)}var D=new ng(f.getUp()),V=Of.fequal(D.x,0,1e-5)&&Of.fequal(D.z,0,1e-5);if(V&&0===v.x&&0===v.z){var R=.001,B=v.y;v.y=B*(1-R),v.z=Math.sign(B)*R}var u=0;if(o){var Q,p,I,P=M,e=Z;if(h.copy(v),f.isOrtho()){var s=-1/0;for(f._eye[0]=v.x+g.x,f._eye[1]=v.y+g.y,f._eye[2]=v.z+g.z,Q=al(f),Wo(Q,Q,ph(f)),w=0;r>w;w++)I=q[w],p=Jq([I.x,I.y,I.z,1],Q),s=Math.max(s,Math.max(Math.abs(p[0])/P,Math.abs(p[1])/e));u=f.getOrthoWidth()*s}else{for(var N,t,U=f.getNear(),y=10;y--;){for(f._eye[0]=v.x+g.x,f._eye[1]=v.y+g.y,f._eye[2]=v.z+g.z,Q=al(f),Wo(Q,Q,ph(f)),N=!0,t=-1/0,w=0;r>w;w++){if(I=q[w],p=Jq([I.x,I.y,I.z,1],Q),p[3]<U&&y){v.multiplyScalar(2),N=!1;break}t=Math.max(t,Math.max(Math.abs(p[0])/P,Math.abs(p[1])/e)-p[3])}if(N)break}v.setLength(t+v.length())}v.manhattanLength()<1e-6&&v.copy(h)}else v.setLength(J);var c=v.add(g),m=cf(O.animation);if(m){f.setEye(E.x,E.y,E.z),f.setCenter(A.x,A.y,A.z);var l=c.clone().sub(g),x=l.length();x&&l.multiplyScalar(1/x);var n=E.clone().sub(A),Y=n.length();Y&&n.multiplyScalar(1/Y);var a=(new kc).lookAtDirection(n,D),z=(new kc).lookAtDirection(l,D),d=(new $d).setFromRotationMatrix(a),S=(new $d).setFromRotationMatrix(z),_=(new ng).subVectors(g,A);if(u)var Or=f.getOrthoWidth();var Ii=new ng,cp=new ng,Xm=new ng,Cf=m.action,_n=m._37o,Wm=A.clone();return m.action=function(J,X){cp.copy(Wm).addScaledVector(_,J);var p=d.clone().slerp(S,J);Ii.set(0,0,1).applyQuaternion(p).setLength(Y+(x-Y)*J).add(cp),Xm.set(0,1,0).applyQuaternion(p),f.setCenter(cp.x,cp.y,cp.z),f.setEye(Ii.x,Ii.y,Ii.z),f.setUp(Xm.x,Xm.y,Xm.z),u&&f.setOrthoWidth((u-Or)*J+Or),Cf&&Cf(J,X)},m._37o=function(){delete f._flyAnim;var X=f.getUp(),v=V?T.graph3dViewUp:D.toArray();(X[0]!==v[0]||X[1]!==v[1]||X[2]!==v[2])&&f.setUp(v),_n&&_n()},{lastEye:E,lastCenter:A,eye:c,center:g,orthoWidth:u,animation:f._flyAnim=$m(m)}}return f.setEye(c.x,c.y,c.z),f.setCenter(g.x,g.y,g.z),u&&f.setOrthoWidth(u),delete f._flyAnim,{lastEye:E,lastCenter:A,eye:c,center:g,orthoWidth:u}}}(),getBoundingBox:function(){function S(Y,g,R){x.fromArray(Pn(R,g.getMat(R)));var I=R.getAnchor3d();Y.push((new ng).set(0-I.x,0-I.y,0-I.z).applyMatrix4(x)),Y.push((new ng).set(0-I.x,0-I.y,1-I.z).applyMatrix4(x)),Y.push((new ng).set(0-I.x,1-I.y,0-I.z).applyMatrix4(x)),Y.push((new ng).set(0-I.x,1-I.y,1-I.z).applyMatrix4(x)),Y.push((new ng).set(1-I.x,0-I.y,0-I.z).applyMatrix4(x)),Y.push((new ng).set(1-I.x,0-I.y,1-I.z).applyMatrix4(x)),Y.push((new ng).set(1-I.x,1-I.y,0-I.z).applyMatrix4(x)),Y.push((new ng).set(1-I.x,1-I.y,1-I.z).applyMatrix4(x))}var x=new kc;return function(Y){if(Y=Y||this.sm().getSelection(),Y instanceof L.Node&&(Y=[Y]),0===Y.length)return C;var d=[];Y.forEach(function(m){Tk(m)&&S(d,this,m)},this);var K=[1/0,1/0,1/0],b=[-1/0,-1/0,-1/0];return d.forEach(function(V){K[0]=Math.min(V.x,K[0]),K[1]=Math.min(V.y,K[1]),K[2]=Math.min(V.z,K[2]),b[0]=Math.max(V.x,b[0]),b[1]=Math.max(V.y,b[1]),b[2]=Math.max(V.z,b[2])}),{min:K,max:b}}}(),isShaderCompileParallel:function(){return!!this._parallelShaderCompile},enableShaderCompileParallel:function(){var c=this.getGLExtensions();if(!c)return!1;var Z=c.get("KHR_parallel_shader_compile");return Z?(this._parallelShaderCompile=!0,void 0):!1},disableShaderCompileParallel:function(){this._parallelShaderCompile=!1},setBatchInfo:function(G,n){var Q=this._batchInfoMap[G];this._batchInfoMap[G]=n,this.fp("batchInfo",Q,n)},getBatchInfo:function(D){return this._batchInfoMap[D]||Hn[D]},getStaticInstancingKey:function(L,W){var $;if(!W&&($=L._lastInstancingKey))return $;var A=L.s("shape3d");if(oc(A)){var m;(m=A.uuid)||(m=A.uuid=Of.generateUUID()),$=m}else $=A;return $+="_"+L.s("static.group"),L._lastInstancingKey=$},setOrthoWidth:function(X){var M=this._orthoWidth;if(this._orthoWidth=X,this._syncEyeWithOrthoWidth){var E=X/this.getAspect(),r=E/2/Ui(this.getFovy()/2),_=(new ng).fromArray(this.getEye()),V=(new ng).fromArray(this.getCenter());_.sub(V).setLength(r).add(V),this.setEye(_.toArray())}this.fp("orthoWidth",M,X)},getCamera:function($){var d=this;$||($=d._mainCamera,$||($=d._mainCamera=new L.Camera)),$.s({"camera.type":d.isOrtho()?"ortho":"perspective","camera.aspect":d.getAspect(),"camera.fovy":d.getFovy(),"camera.ortho.width":d.getOrthoWidth(),"camera.near":d.getNear(),"camera.far":d.getFar()});var n=d.getEye();return $.p3(n.slice()),$.lookAt(d.getCenter(),d.getUp()),$},syncFromCamera:function(k){var N=this,O=new ng(N.getEye()),Q=new ng(N.getCenter()),Y=new ng,X=Q.sub(O).length();N.setEye(k.p3());var s=k.getEuler();return Y.set(0,0,-1).applyEuler(s),O.copy(Y).setLength(X).add(Q.copy(k.p3())),N.setCenter(O.toArray()),O.set(0,1,0).applyEuler(s),Q.set(0,1,0),Math.abs(Y.cross(O).dot(Q))<1e-5?N.setUp(Q.toArray()):N.setUp(O.toArray()),N.setOrtho("ortho"===k.s("camera.type")),N.setAspect(k.s("camera.aspect")),N.setFovy(k.s("camera.fovy")),N.setOrthoWidth(k.s("camera.ortho.width")),N.setNear(k.s("camera.near")),N.setFar(k.s("camera.far")),!0},resetHeadlightProperties:function(){this._headlightColor=T.graph3dViewHeadlightColor,this._headlightIntensity=T.graph3dViewHeadlightIntensity,this._headlightRange=T.graph3dViewHeadlightRange,this._headlightDirection=T.graph3dViewHeadlightDirection,this._headlightGroup=T.graph3dViewHeadlightGroup,this._headlightAmbientIntensity=T.graph3dViewHeadlightAmbientIntensity,this._headlightDisabled=T.graph3dViewHeadlightDisabled,this._headlightRatioForPhysicalMaterial=T.graph3dViewHeadlightRatioForPhysicalMaterial},resetFogProperties:function(){this._fogDisabled=T.graph3dViewFogDisabled,this._fogMode=T.graph3dViewFogMode,this._fogDensity=T.graph3dViewFogDensity,this._fogColor=T.graph3dViewFogColor,this._fogNear=T.graph3dViewFogNear,this._fogFar=T.graph3dViewFogFar},_gatherRenderLayersByPriority:function(T){if(T||!(this._renderLayerSettingsVersion>=Fk)){var h=this;h._renderLayerSettingsVersion=Fk;var x=h._sortedRenderLayers=b.keys(h._renderLayerInfoMap);for(var K in oh)x.indexOf(K)>=0||x.push(K);x.sort(function(E,B){return h.getRenderLayerInfo(E).priority-h.getRenderLayerInfo(B).priority})}},setRenderLayerInfo:function(n,f){Dp(0,n,this._renderLayerInfoMap);var p=this.getRenderLayerInfo(n),A=ho(p);for(var j in f)"mask"!==j&&(p[j]=f[j]);this._gatherRenderLayersByPriority(!0),this.fp("renderLayerInfo",A,p)},getRenderLayerInfo:function(A){return this._renderLayerInfoMap[A]||oh[A]},setRenderLayerInfoMap:function(Y){var D=this._renderLayerInfoMap;this._renderLayerInfoMap={};for(var O in Y)this.setRenderLayerInfo(O,Y[O]);this.fp("renderLayerInfoMap",D,this._renderLayerInfoMap)},getRenderLayerInfoMap:function(){return this._renderLayerInfoMap},getRenderLayerKeys:function(){return this._sortedRenderLayers}});var Ms;T.registerTextureLoader=function(q){Ms?Ms.push(q):Ms=[q]},T.unregisterTextureLoader=function(q){if(Ms){var p=Ms.indexOf(q);return p>=0?(Ms.splice(p,1),0===Ms.length&&(Ms=null),!0):!1}};var Ns=function(C,S){if(5131===S){var M=C.isWebGL2();if(!M){var T=C._glExtensions.get("OES_texture_half_float");S=null!==T?T.HALF_FLOAT_OES:null}}return S||5121},Os=function(b,O,q){if(!b.isWebGL2())return O;var z=O;return 6403===O&&(5126===q&&(z=33326),5131===q&&(z=33325),5121===q&&(z=33321)),6407===O&&(5126===q&&(z=34837),5131===q&&(z=34843),5121===q&&(z=32849)),6408===O&&(5126===q&&(z=34836),5131===q&&(z=34842),5121===q&&(z=32856)),(33325===z||33326===z||34842===z||34836===z)&&b._glExtensions.get("EXT_color_buffer_float"),z};b.assign(jg.Graph3dView.prototype,{getTextureMap:function(){return this._2O},setTexture:function(o,_,w){w=w||"";var l;(l=this._2O[o])||(l=this._2O[o]={}),l[w]=_},deleteTexture:function(X){var o=this;if(o._2O){var a=o._2O[X];if(a){delete o._2O[X];var I=o.getGL();for(var C in a)I.deleteTexture(a[C])}}},invalidateCachedTexture:function(N){var T=this.getData3dUI(N);T.invalidateCachedTexture(this.getGL()),this.invalidateData(N)},invalidateShape3dCachedImage:function(V){this.invalidateCachedTexture(V)},getTextureFromLoader:function(i){if(Ms)for(var u,r=0,v=Ms.length;v>r;r++)if(u=Ms[r],u.checkType(i))return u.getTexture(this,i)},getGLTextureFromLoader:function(V){var U=this.getTextureFromLoader(V);if(!U)return U;var $=this.createTexture(U);return this.setTexture(V,$),$},textureToCanvas:function(){var Y={type:"blitScreen",defines:{USE_LINEAR:!0}},k={type:"blitScreen"};return function(p,d,K,t){var O;if(O=Dl(p)?p:this.getTextureFromLoader(p)){var K=K||O.width,t=t||O.height;if(K&&t){d===H&&(d="linear"===O.colorSpace);var I=d?Y:k;I.image=p;var $=new Ss(this,K,t);return this.renderModel($,I),$.releaseTexture(),I.image=null,$.toCanvas()}}}}(),createTexture:function(J,O){var w,L,h,Y,b,U=this.getGL(),s=Db,c=Ns(this,J.type),o=J.format||s.RGBA,f=Os(this,o,c);if(J.image?(h=J.image,w=h.naturalWidth||h.width,L=h.naturalHeight||h.height,b=!h||"VIDEO"!==h.tagName&&(!w||!L)):(Y=!0,h=J.data,w=J.width,L=J.height,b=!h||!w||!L),b)return U._emptyTexture;var X=J.minFilter||J.filter||s.LINEAR,t=J.magFilter||J.filter||s.LINEAR;return O=O||U.createTexture(),U.activeTexture(33984),io(U,O),U.pixelStorei(37440,J.flipY===!0),U.pixelStorei(37441,!1),Y?U.texImage2D(s.TEXTURE_2D,0,f,w,L,0,o,c,h):U.texImage2D(s.TEXTURE_2D,0,f,o,c,h),vb(U,10240,t),Of.isPOT(w)&&Of.isPOT(L)&&!J.clampToEdge&&!h.clampToEdge?(vb(U,10242,s.REPEAT),vb(U,10243,s.REPEAT),vb(U,s.TEXTURE_MIN_FILTER,9728===X?9984:9987),J.mipmapMaxLevel!==H&&vb(U,33085,J.mipmapMaxLevel),U.generateMipmap(s.TEXTURE_2D)):(vb(U,10242,s.CLAMP_TO_EDGE),vb(U,10243,s.CLAMP_TO_EDGE),vb(U,s.TEXTURE_MIN_FILTER,X)),io(U,C),O},getTexture:function(u,e,K,f){if(!u)return C;var b,p,y=this,V=y.getGL(),n=y._2O[u];if(n&&(e&&(p=e.s("texture.mipmap.max")),b=n[p||""]||n.default),!b&&(b=y.getGLTextureFromLoader(u),null===b))return V._emptyTexture;if(!b){var v=$p(u);if(!v)return V._emptyTexture;if(f||(f={}),e){f.mipmapMaxLevel=p=e.s("texture.mipmap.max");var F=e.s("texture.wrap");f.clampToEdge="clampToEdge"===F?!0:"repeat"===F?!1:H,f.flipY=e.s("texture.flipY")}if(v.uuid||(v.uuid=L.Math.generateUUID()),v.tagName){if(v.dynamic){var a;return(a=V._dynamicTexturePool[v.uuid])||(a=V._dynamicTexturePool[v.uuid]=V.createTexture()),fj(y,V,v,a,f)}b=fj(y,V,v,H,f),y.setTexture(u,b,p)}else{var r,P=e&&(e.s("texture.cache")||e.s("shape3d.image.cache")||v.textureCache),I=y.isVRPresenting();if(I&&e&&(e._textureUpdateFrame===V._renderInfo.frame?P=!0:e._textureUpdateFrame=V._renderInfo.frame),P&&(r=y.getData3dUI(e),b=r.getCachedTexture(K),b&&r.interactiveInfo&&b.interactiveInfo&&(r.interactiveInfo[b.interactiveInfo.key]=b.interactiveInfo.info)),!b){var z=V._renderInfo.textureCache;if(P){if(z.time>T.graph3dMaxVectorCacheTime)return y.redraw(),V._emptyTexture;if(!ci(v,e))return V._emptyTexture}var l;e&&(1!==e.s("texture.scale")?l=e.s("texture.scale"):1!==e.s("shape3d.texture.scale")&&(l=e.s("shape3d.texture.scale"))),l||(l=1);var S=e&&(e.s("fixSizeOnScreen")||e.s("shape3d.fixSizeOnScreen")),j=S?9728:9729;S?"number"==typeof S&&(l*=0>S?1:S):e&&(e.s("vector.dynamic")||e.s("shape3d.vector.dynamic"))&&(r||(r=y.getData3dUI(e)),S=r.getVectorDynamicSize());var $,W,x,Z=e&&e.s("shape3d");"billboard"===Z?x=e.getTall()/e.getWidth():"plane"===Z&&(x=e.getHeight()/e.getWidth());var q=wc(v,e);if(S){var i;i=P?y._devicePixelRatio||un:y.getDevicePixelRatio(),$=S[0]>0?S[0]*i:l*q*i,W=S[1]>0?S[1]*i:l*(x?sl(v,e,y,Math.min(4096,q*x)):sl(v,e))*i}else $=l*q,W=l*(x?sl(v,e,y,Math.min(4096,q*x)):sl(v,e));if($>=1&&W>=1){var _=0;(P||I)&&(_=Date.now());var c=y._glCapabilities.maxTextureSize;$=Math.min($,c),W=Math.min(W,c);var R=Df($,W);if(!r&&e&&(r=y.getData3dUI(e)),r&&r.interactiveInfo){var D=u;"object"==typeof D&&(D=D.uuid||(D.uuid=L.Math.generateUUID()));var Q=r.interactiveInfo[D]={};R.interactiveInfo=Q.bodyInfo={compInfos:[],matrix:new vi,rect:{x:0,y:0,width:$,height:W}}}Ae(R,v,0,0,$,W,e,y),R.interactiveInfo&&(R.interactiveInfo=null),R.restore(),z.count++,z.pixels+=$*W,e?(f.minFilter=yp(e.s("texture.filter.min")||e.s("texture.filter"))||j,f.magFilter=yp(e.s("texture.filter.mag")||e.s("texture.filter"))||j):f.minFilter=f.magFilter=j,P||I?(b=fj(y,V,_f,null,f),r&&r.setCachedTexture(b,K),z.time+=Date.now()-_,Q&&(b.interactiveInfo={key:D,info:Q}),_f=null):b=fj(y,V,_f,y._1O,f)}}}}return b}}),function(){function d(Q,r,n){var q=Q[r];q&&q.releaseTexture(),n?Q[r]=n:delete Q[r]}var B=jg.EnvmapRenderer=function(D){this.gv=D,this._envmaps={},this._envmapHash={},this._probeCaptureTime={},this._envmapPoolCachedByImage=[],this._pingPongRenderTarget=null,this._equirectMaterial=null,this._blurMaterial=null,this._lastCaptureFrame=0,this._cubemapMaterial=null,this._envmapIntensity={}};B.prototype={},B.prototype.constructor=B,B.prototype.changeEnvmapType=function(w){"legacy"===w?(this.setEnvmapByProbeId=this.setEnvmapLegacy,this.onBeforeRender=this.onBeforeRenderLegacy):(this.setEnvmapByProbeId=this.setEnvmap,this.onBeforeRender=this.onBeforeRenderNew)},B.prototype.invalidateEnvmap=function(f){var Y=this.gv;if("legacy"!==Y.getEnvmapType()){var u=Y.getGL();u&&(f?(delete this._envmapHash[f],delete this._probeCaptureTime[f]):(this._envmapHash={},this._probeCaptureTime={}),Y.iv())}},B.prototype.contextLost=function(){var n=this;n._envmaps={},n._envmapPoolCachedByImage=[],n._envmapHash={},n._pingPongRenderTarget=null,n._equirectMaterial=n._cubemapMaterial=n._blurMaterial=null,n._hdrDynamicComposeRTT=null,n._envmapLegacy=null,n._lastLegacyImage=null},B.prototype.onBeforeRenderLegacy=function(j){this.gv._picking||(this.assureTextureLegacy(j),this.assureEnvmapPoolForImage())},B.prototype.assureTextureLegacy=function(v){var G=this,E=G.gv,Y=E.getEnvmap();if(Y!==G._lastLegacyImage){if(G._envmapLegacy&&(v.deleteTexture(G._envmapLegacy),G._envmapLegacy=null),!Y)return G._lastLegacyImage=Y,void 0;var A=T.getImage(Y);if(A&&A.tagName){A=T.resizeImagePOT(A,!0);var o=G._envmapLegacy=v.createTexture();v.activeTexture(33984),v.bindTexture(34067,o),v.texParameteri(34067,10240,9729),v.texParameteri(34067,10241,9729),v.texImage2D(34069,0,6408,6408,5121,A),v.texImage2D(34070,0,6408,6408,5121,A),v.texImage2D(34071,0,6408,6408,5121,A),v.texImage2D(34072,0,6408,6408,5121,A),v.texImage2D(34073,0,6408,6408,5121,A),v.texImage2D(34074,0,6408,6408,5121,A),v.bindTexture(34067,v._emptyCubeTexture),G._lastLegacyImage=Y}}},B.prototype.setEnvmapLegacy=function(Q,g,C){Q.uEnvMap=this._envmapLegacy,Q.envMapIntensity=C},B.prototype.onBeforeRenderNew=function(Q){this.gv._picking||(this.assureTextureNew(Q),this.resetUniformCache(),this.assureEnvmapPoolForImage())},B.prototype.isHDR=function(f){return"string"==typeof f&&(f.indexOf(".hdr")===f.length-4||f.indexOf(".HDR")===f.length-4)},B.prototype.isDynamicImage=function(d){return d&&d.comps&&d.comps[0]&&"__ht_envmap_bg__"===d.comps[0].type},B.prototype.isImageReady=function(z){var X;if(this.isHDR(z))X=T.getHdrTexture(z);else if(X=T.getImage(z),this.isDynamicImage(X)&&!this.isImageReady(X.comps[0].image))return!1;return X},B.prototype.assureTextureNew=function(N){var B,w,f=this,L=f.gv,Y=L.getEnvmap(),O=f._envmapHash,p=f._envmaps,D=f._envmapIntensity,S=N._renderInfo.frame;if(this._lastCaptureFrame>=S||L._picking)for(B in Y)w=Y[B].intensity,D[B]=w==C?1:w;else{for(var B in Y){var A=Y[B];w=A.intensity,D[B]=w==C?1:w;var F,U=A.type;switch(U){case"sphere":F=A.image,F!==O[B]&&(F?f.isImageReady(F)&&(O[B]=F,d(p,B,f.fromEquirectangular(F))):(O[B]=F,d(p,B,null)));break;case"cube":var u=A.images;if(u&&6===u.length&&(F=u.join(","),F!==O[B])){for(var P=!0,c=!1,$=0;6>$;$++){if(!u[$]){c=!0;break}if(!T.getImage(u[$])){P=!1;break}}c?(O[B]=F,d(p,B,null)):P&&(O[B]=F,d(p,B,f.fromCubemap(u)))}break;case"skybox":var Z=L.getSkybox();if(Z){var I=Z.s("shape3d");if(F="sphere"===I?Z._id+"_"+Z.s("shape3d.image"):Z._id+"_"+Z.s("front.image"),F!==O[B]){var P;if("sphere"===I)P=f.isImageReady(Z.s("shape3d.image"));else{P=!0;for(var g=["front","back","left","right","top","bottom"],$=0;6>$;$++)if(!T.getImage(Z.s(g[$]+".image"))){P=!1;break}}P&&(O[B]=F,d(p,B,f.fromSkybox()))}}break;case"probe":var R=A.pos,k=A.size;if(F=R[0]+"_"+R[1]+"_"+R[2]+"_"+k,F!==O[B]){var h=this._probeCaptureTime[F],a=Date.now();h||(this._probeCaptureTime[F]=h=a),a-h>T.envmapProbeMinWaitTime&&!kh&&!Pl||a-h>T.envmapProbeMaxWaitTime?(delete this._probeCaptureTime[F],O[B]=F,d(p,B,f.fromSceneProbe(R,k,A.filter))):L.iv()}}}var j=b.keys(p);j.forEach(function(D){Y[D]===H&&(delete O[D],d(p,D,null))})}},B.prototype.resetUniformCache=function(){this._frameUniformCache={}},B.prototype.setEnvmap=function(s,G,S){var P=s.uuid,W=this._frameUniformCache,r=this._envmaps[G];r&&(r=r.texture),W[P]!==r&&(W[P]=r,s.uEnvMap=r),S&&(S*=this._envmapIntensity[G]||0),s.envMapIntensity=S},B.prototype.assureEnvmapPoolForImage=function(){for(var z=this._envmapPoolCachedByImage,K=0,l=z.length;l>K;K++)z[K][0]&&!z[K][1]&&this.isImageReady(z[K][0])&&(z[K][1]=this.fromEquirectangular(z[K][0]))},B.prototype.assureEnvmapFromEquirectangular=function(A){for(var $=this._envmapPoolCachedByImage,u=0,p=$.length;p>u;u++)if($[u][0]===A){var v=$[u][1];return v?v.texture:null}return $.push([A,null]),this.gv.iv(),null},B.prototype.invalidateEnvmapUsedByMaterial=function(P){if(P)for(var N=this._envmapPoolCachedByImage,u=0,e=N.length;e>u;u++)N[u][0]===P&&(N[u][1]=null);else this._envmapPoolCachedByImage=[];this.gv.iv()},B.prototype.isEnvmapUsedByMaterialReady=function(i){for(var c=this._envmapPoolCachedByImage,B=i==C,x=0,M=c.length;M>x;x++)if(B){if(!c[x][1])return!1}else if(c[x][0]===i)return!!c[x][1];return B},B.prototype.fromEquirectangular=function(r){var j,w,I;if(this.isHDR(r))j=L.Default.getHdrTexture(r),w="linear";else if(this.isDynamicImage(r)&&this.isHDR(r.comps[0].image)){var e=r.comps[0],f=e.image;e.image=null;var u=this.gv.getTexture(r);e.image=f;var P=this.gv.getTexture(f);I=this._hdrDynamicComposeRTT,I||(I=this._hdrDynamicComposeRTT=this._allocateTargets());var W=r.width,M=this.gv;M.renderModel(I,W,r.height,{type:"envmapDynamicCompose",offset:e.offset?(e.offset%1+1)%1:0,texture1:P,texture2:u}),I=I.texture,j=r,w="linear"}else j=L.Default.getImage(r),w="sRGB";return j?(this.rectSize=[1/j.width,1/j.height],r=I||this.gv.getTexture(r),this.fromTexture(r,null,w)):null},B.prototype.fromCubemap=function(Z){var e=this.gv.getGL(),d=e.createTexture();e.activeTexture(33984),e.bindTexture(34067,d),e.texParameteri(34067,10240,9729),e.texParameteri(34067,10241,9729);for(var b=[],P=r/3,U=0;6>U;U++)b[U]=T.resizeImage(L.Default.getImage(Z[U]),P);return e.texImage2D(34069,0,6408,6408,5121,b[0]),e.texImage2D(34070,0,6408,6408,5121,b[1]),e.texImage2D(34071,0,6408,6408,5121,b[2]),e.texImage2D(34072,0,6408,6408,5121,b[3]),e.texImage2D(34073,0,6408,6408,5121,b[4]),e.texImage2D(34074,0,6408,6408,5121,b[5]),e.bindTexture(34067,e._emptyCubeTexture),this.fromTexture(d,!0,"sRGB")},B.prototype.fromTexture=function(U,I,k){var d=this._allocateTargets();this._pingPongRenderTarget||(this._pingPongRenderTarget=this._allocateTargets());var f=this.gv,t=f.getGL(),R=ie.for(t).directState(),G=R.depth.enabled;R.scissor.enabled=!0,R.depth.enabled=!1;var w=f.getViewport(t);return this._textureToCubeUV(U,d,I,k),this._applyPMREM(d),f.setViewport(t,w[0],w[1],w[2],w[3]),R.depth.enabled=G,R.scissor.enabled=!1,d},B.prototype.fromSkybox=function(){return this._fromCamera(function(I){I.s({"camera.onlySky":!0,"camera.skybox.blur":!1})})},B.prototype.fromScene=function(I){return this._fromCamera(function(N){N.s({"camera.onlySky":!1}),I&&I(N)})},B.prototype.fromNode=function(G){var P=this.gv.getData3dUI(G),c=P._42;P._42=zj;var A=this.gv.getSkybox(),w=G.p3();if(A){var x=A.p3();A.p3(w)}var B=this.fromScene(function(W){W.p3(w)});return P._42=c,A&&A.p3(x),B},B.prototype.fromSceneProbe=function(M,v,d){var e=this.gv,Z=e.getSkybox();if(Z){var z=Z.p3();Z.p3(M)}if(d){var K=e.isVisible;e.isVisible=function(C){var W=d(C);return W!==H?W:K.call(e,C)}}var c=this.fromScene(function(O){O.p3(M),O.s("camera.near",v)});return d&&(e.isVisible=K),Z&&Z.p3(z),c},B.prototype._fromCamera=function(B){var x=this.gv,o=x.getCamera();B&&B(o);var p=new Ss(x,r,r,{cube:!0}),J=x.getGL(),j=x.getViewport(J),H=this.setEnvmapByProbeId,h=this.onBeforeRender;this.setEnvmapByProbeId=function(a){a.envMap=J._emptyTexture},this.onBeforeRender=zj,o.attachRenderTarget(p),o.render(x),o.detachRenderTarget(),this.setEnvmapByProbeId=H,this.onBeforeRender=h,x.setViewport(J,j[0],j[1],j[2],j[3]);var Z=this.fromTexture(p.texture,!0,"sRGB");return p.releaseTexture(),Z},B.prototype._allocateTargets=function(){return new Ss(this.gv,3*S,3*S,{textureType:5131})},B.prototype._textureToCubeUV=function(a,w,L,i){var J,$,Z=this,V=Z.gv,x="sRGB"===i?"USE_SRGB":"USE_LINEAR";L?(null==Z._cubemapMaterial&&(Z._cubemapMaterial={}),null==(J=Z._cubemapMaterial[x])&&($={},$[x]=!0,Z._cubemapMaterial[x]=J={type:"envmapCubemap",defines:$})):(null==Z._equirectMaterial&&(Z._equirectMaterial={}),null==(J=Z._equirectMaterial[x])&&($={},$[x]=!0,Z._equirectMaterial[x]=J={type:"envmapEquirect",defines:$})),J.envMap=a,L||(J.texelSize=Z.rectSize);var j=s[0];V.renderModel(w,{model3d:!0,mesh:j,mat:J,encoding:"linear"===i?1:0},{restoreViewport:!1,preRender:function(){Z._setViewport(w,0,0,3*S,2*S)}})},B.prototype._applyPMREM=function(I){for(var n,l,A,n=1;D>n;n++)l=Math.sqrt(E[n]*E[n]-E[n-1]*E[n-1]),A=y[(n-1)%y.length],this._blur(I,n-1,n,l,A)},B.prototype._setViewport=function(A,k,X,v,M){var g=this.gv;g.setViewport(g.getGL(),k,X,v,M),g.getRenderState().directState().scissor.box=[k,X,v,M]},B.prototype._blur=function(s,y,e,J,a){var D=this._pingPongRenderTarget;this._halfBlur(s,D,y,e,J,"latitudinal",a),this._halfBlur(D,s,e,e,J,"longitudinal",a)},B.prototype._halfBlur=function(u,d,y,g,I,w,z){var Z=this,c=Z.gv,T=Z._blurMaterial;if("latitudinal"===w||"longitudinal"===w){T||(Z._blurMaterial=T={type:"envmapBlur",defines:{n:Q}});var F,h,L,D=3,M=V[y]-1,x=isFinite(I)?Math.PI/(2*M):2*Math.PI/(2*Q-1),v=I/x,q=isFinite(I)?1+Math.floor(D*v):Q,n=[],X=0;for(F=0;Q>F;++F)h=F/v,L=Math.exp(-h*h/2),n.push(L),0==F?X+=L:q>F&&(X+=2*L);for(F=0;F<n.length;F++)n[F]=n[F]/X;T.envMap=u.texture,T.samples=q,T.weights=n,T.latitudinal="latitudinal"===w,z&&(T.poleAxis=z),T.dTheta=x,T.mipInt=R-y;var H=V[g],h=3*Math.max(0,S-2*H),e=(0===g?0:2*S)+2*H*(g>R-$?g-R+$:0),m=s[g];c.renderModel(d,{model3d:!0,mesh:m,mat:T},{restoreViewport:!1,preRender:function(){Z._setViewport(d,h,e,3*H,2*H)}})}};var $=4,R=8,S=Math.pow(2,R),g=[.125,.215,.35,.446,.526,.582],D=R-$+1+g.length,Q=20,o=(1+Math.sqrt(5))/2,m=1/o,y=[new ng(1,1,1),new ng(-1,1,1),new ng(1,1,-1),new ng(-1,1,-1),new ng(0,o,m),new ng(0,o,-m),new ng(m,0,o),new ng(-m,0,o),new ng(o,m,0),new ng(-o,m,0)],I=function(){for(var t=[],Y=[],M=[],B=R,A=0;D>A;A++){var u=Math.pow(2,B);Y.push(u);var o=1/u;A>R-$?o=g[A-R+$-1]:0==A&&(o=0),M.push(o);for(var Q=1/(u-1),i=-Q/2,H=1+Q/2,n=6,m=[],T=[],J=[],k=0;n>k;k++){var K=2*(k%3)/3-1,N=k>2?0:-1;m.push(K,N,0,K+2/3,N,0,K+2/3,N+1,0,K,N,0,K+2/3,N+1,0,K,N+1,0),T.push(i,i,H,i,H,H,i,i,H,H,i,H),J.push(k,k,k,k,k,k)}t.push({position:new $n(m),uv:new $n(T),faceIndex:new $n(J)}),B>$&&B--}return{_lodPlanes:t,_sizeLods:Y,_sigmas:M}}(),s=I._lodPlanes,V=I._sizeLods,E=I._sigmas,r=T.EnvmapTextureSize}(),T.setCompType("__ht_envmap_bg__",function(G,y,X,U,B){var n=X.image;if(n&&(n=T.getImage(n))){var p=y.x,z=y.y,L=y.width,V=y.height,O=X.offset||0;O=0|(O%1+1)%1*L,0!==O&&(G.save(),G.beginPath(),G.rect(p,z,L,V),G.clip(),G.translate(O,0),T.drawImage(G,n,p-L,z,L,V,U,B)),T.drawImage(G,n,p,z,L,V,U,B),0!==O&&G.restore()}});var Ps=["left","front","right","back","top","bottom"],Qs=jg._RenderList=function(d){function f(){b.length=0,K.length=0,B={};for(var Z in r)r[Z].length=0}function U(){for(var B in r)r[B].rendered=null}function m(O){return O?("string"==typeof O&&(O=T.getMaterial(O)),O&&O.transparent?!0:!1):!1}function X(L){var k,c,x,P,w,B=L.gv,X=L.data,b=L.shapeModel;if(b)if(X.s("static")&&(w=!0),b.model3d)c=!0,k=!0;else{var z;(z=X.s("shape3d.top.material"))&&(m(z)?c=!0:k=!0),(z=X.s("shape3d.bottom.material"))&&(m(z)?c=!0:k=!0),(z=X.s("shape3d.from.material"))&&(m(z)?c=!0:k=!0),(z=X.s("shape3d.to.material"))&&(m(z)?c=!0:k=!0),(z=X.s("shape3d.material"))&&(m(z)?c=!0:k=!0);var g,u,S,N=X.s("shape3d.transparent")||X.s("points.transparent");for(Tl(b)||(g=hg(b.transparent,X,B),b=[b]),x=0,P=b.length;P>x;x++)S=b[x],u=hg(S.transparent,X,B),u===H&&(u=g),u===H&&(u=N),u?c=!0:k=!0}for(x=0,P=Ps.length;P>x;x++){var J=L[Ps[x]];if(J){var z=B.getFaceMaterial(X,Ps[x]);z?m(z)?c=!0:k=!0:J.transparent?c=!0:k=!0}}B.isLabelVisible(X)&&(L.labelInfo&&(X.s(Fb+".transparent")?c=!0:k=!0),L.label2Info&&(X.s(Io+".transparent")?c=!0:k=!0)),B.isNoteVisible(X)&&(L.noteInfo&&(X.s(Hp+".transparent")?c=!0:k=!0),L.note2Info&&(X.s(Fd+".transparent")?c=!0:k=!0)),L._38o&&(c=k=!0),c||(k=!0),L._renderParams={opaque:k,transparent:c,staticModel3d:w}}function v(Q,T){T&&X(Q);var i=Q.data,y=i._id;if(!B[y]){B[y]=!0;var A=Q._renderParams;if(A&&A.visible!==!1){if(i.isAnimationPlaying()&&(Q.shapeModel&&d.updateSkeleton(i,Q.shapeModel),i.isAnimationPaused()||d.iv()),Q={ui:Q,data:i,z:0,id:y},d._glCapabilities&&d._glCapabilities.instancedArray&&A.staticModel3d&&Q.ui.mat&&i.s("3d.visible")&&i.s(id)){var s=d.shadowMap.enable,J=d.getStaticInstancingKey(i,!0),o=r[J];o||(o=r[J]={ms:[],ds:[],cs:[],highlightColors:[],length:0,msVersion:0,shadowVersion:0,csVersion:0,highlightVersion:0,shadow:[],cache:{version:-1,length:-1,id:-1,buffer:null},cacheShadow:{version:-1,length:-1,id:-1,buffer:null},cachePick:{version:-1,length:-1,buffer:null},cacheHighlight:{version:-1,length:-1,buffer:null}});for(var W=o.length,e=0!==W,u=!1,N=16*W,j=0,p=o.ms,S=Q.ui.mat;16>j;j++)p[N+j]!=S[j]&&(u=!0,p[N+j]=S[j]);if(u&&(o.msVersion=o.msVersion+1),o.ds[W]=y,s){var L=i.s("shadow.cast");(u||o.shadow[W]!==L)&&(o.shadow[W]=L,o.shadowVersion=o.shadowVersion+1)}var Z=ln(null,d.pickColorMap,d.isSelectable(i),Q.ui,rh,!0);u=!1;for(var m=4*W,j=0,Y=o.cs;4>j;j++)Y[m+j]!==Z[j]&&(u=!0,Y[m+j]=Z[j]);if(u&&(o.csVersion=o.csVersion+1),o.length++,d._model3dInstancedBatchCount++,e)return}A.opaque&&b.push(Q),A.transparent&&K.push(Q)}}}function w(i){var x=d.dm();for(var c in r){var G=r[c],_=G.ds;if(_&&G.length){for(var V=G.highlightColors,E=!1,D=0,k=G.length;k>D;D++)for(var M=x.getDataById(_[D]),m=i(M,!0)?[0,0,0,0]:[0,1,1,1],e=4*D,X=0;4>X;X++)V[e+X]!==m[X]&&(E=!0,V[e+X]=m[X]);E&&(G.highlightVersion=G.highlightVersion+1),G._csBackup=[G.cs,G.csVersion,G.cachePick],G.cs=G.highlightColors,G.csVersion=G.highlightVersion,G.cachePick=G.cacheHighlight}}}function u(){for(var C in r){var n=r[C],M=n._csBackup;M&&(n.cachePick=M[2],n.csVersion=M[1],n.cs=M[0],n._csBackup=H)}}function q(L,N){if(K.length>1){for(var h,_,l=[0,0,0,0],m=0,B=K.length;B>m;m++)h=K[m].data,(_=h._position)?(l[0]=_.x,l[1]=h._54O,l[2]=_.y,l[3]=1,Jq(l,N),K[m].z=l[2]/l[3]):K[m].z=0;K.sort(L||k)}}function g(w){w?(gp(n,Z,w,d),gp(l,_,w,d),gp(I,O,w,d)):(n=this.batchModelMap={},Z=this.batchIndexMap={},l=this.polylineModelMap={},_=this.polylineIndexMap={},I=this.wireframeModelMap={},O=this.wireframeIndexMap={}),this.markBatchInvalid()}function h(B){B?gp(n,Z,B,d):(n=this.batchModelMap={},Z=this.batchIndexMap={}),this.markBatchInvalid()}function A(a){a?gp(l,_,a,d):(l=this.polylineModelMap={},_=this.polylineIndexMap={}),this.markBatchInvalid()}function y(N){N?gp(I,O,N,d):(I=this.wireframeModelMap={},O=this.wireframeIndexMap={}),this.markBatchInvalid()}function e(){return this._batchInvalid}function S(){this._batchInvalid=!0}function z(){this._batchInvalid=null}function P(){return r}var b=[],K=[],n={},Z={},l={},_={},I={},O={},B={},r={};return{opaque:b,transparent:K,init:f,push:v,getModel3dInstancedBatchMap:P,resetModel3dInstancedDraw:U,batchModelMap:n,batchIndexMap:Z,polylineModelMap:l,polylineIndexMap:_,wireframeModelMap:I,wireframeIndexMap:O,beginFillHighlightMaskColor:w,endFillHighlightMaskColor:u,ivBatch:g,ivModelBatch:h,ivPolylineBatch:A,ivWireframeBatch:y,markBatchInvalid:S,isBatchInvalid:e,onUpdated:z,sort:q}
},Rs=jg._RenderLists=function(a){function G(){for(var F in _)_[F].init();a._model3dInstancedBatchCount=0}function c(){for(var y in _)_[y].onUpdated()}function f(x,P){x=x||"main";var r=_[x];return!r&&P&&(r=_[x]=new Qs(a)),r}function y(Z,T){var A=Z.data.getRenderLayer(),V=f(A,!0);V.push(Z,T)}function $(z){for(var l in _)z(_[l])}var _={};return{init:G,onUpdated:c,get:f,push:y,each:$,lists:_}},Ss=jg.RenderTarget=function(f,E,p,e){var m,U=this;null!=E&&E.canvas?(m=E,E=p,p=e,e=arguments[4]):m=f.getGL(),e=e||{},e.cube===!!e.cube,e.samples=e.cube?0:Math.min(f._glCapabilities.maxSamples,e.samples&&e.samples>1&&2===f._webGLVersion?e.samples:0),U.options=e,U.uuid=L.Math.generateUUID(),U.gv=f,U.init(f,m,e),U.format=e.format||6408,U.textureType=Ns(f,e.textureType),U.generateMipmaps=!!e.generateMipmaps,U.depthInternalFormat=e.depthFormat||33189,e.samples&&!f._glCapabilities._maxSamplesChecked?U.setSize(m,E||1,p||1):U.setSize(m,E,p)};b.assign(jg.RenderTarget.prototype,{bind:function(b,m){var Z=this.options;if(Z.autoSize){var v=this.gv,n=v.getDevicePixelRatio(),D=v.getWidth()*n,Y=v.getHeight()*n;this.setSize(b,D,Y)}Z.cube?Hg(b,this.frame[m]):Hg(b,this.options.samples?this._MSAAFbo:this.frame)},unbind:function(J){ko(J),this.options.samples&&(J.bindFramebuffer(36008,this._MSAAFbo),J.bindFramebuffer(36009,this.frame),J.blitFramebuffer(0,0,this.width,this.height,0,0,this.width,this.height,16384,9728),J.bindFramebuffer(36008,null),J.bindFramebuffer(36009,null))},isCube:function(){return this.options.cube},init:function(l,x,N){var y=this,S=N.samples,Y=N.cube,c=y.texture=x.createTexture(),f=Y?34067:3553;x.activeTexture(33984),x.bindTexture(f,c),x.texParameteri(f,10242,N.wrapS||33071),x.texParameteri(f,10243,N.wrapT||33071);var U=S?9728:9729;if(x.texParameteri(f,10241,N.minFilter||U),x.texParameteri(f,10240,N.magFilter||U),x.bindTexture(f,null),Y){y.depth=[],y.frame=[];for(var R=0;6>R;R++)y.depth[R]=x.createRenderbuffer(),y.frame[R]=x.createFramebuffer()}else y.depth=x.createRenderbuffer(),y.frame=x.createFramebuffer();y.assureTexture()},assureTexture:function(){var u=this;u.gv.setTexture(u.uuid,u.texture,"default"),L.Default.setImage(u.uuid,null)},releaseTexture:function(){this.gv.deleteTexture(this.uuid)},setSize:function(a,z,k){var r=this;if(z=Math.round(z),k=Math.round(k),z&&k&&(r.width!==z||r.height!==k)){r.width=z,r.height=k;var d=36161,V=36160,S=r.options.samples,W=r.options.cube,u=W?34067:3553;if(S){var K=r.gv._glCapabilities;if(!K._maxSamplesChecked){for(a.bindRenderbuffer(d,r.depth),a.getError();S>1&&(a.renderbufferStorageMultisample(d,S,r.depthInternalFormat,z,k),a.getError());)S=Math.floor(S>>1);1>=S&&(S=0,a.texParameteri(u,10241,r.options.minFilter||9729),a.texParameteri(u,10240,r.options.magFilter||9729),a.renderbufferStorage(d,r.depthInternalFormat,z,k)),K._maxSamplesChecked=!0,K.maxSamples=r.options.samples=S,a.bindRenderbuffer(d,C)}}if(S&&(r._MSAAFbo||(r._MSAAFbo=a.createFramebuffer(),r._MSAARbO=a.createRenderbuffer()),a.bindRenderbuffer(d,r._MSAARbO),a.renderbufferStorageMultisample(36161,S,32856,z,k),Hg(a,r._MSAAFbo),a.framebufferRenderbuffer(V,36064,d,r._MSAARbO),a.framebufferRenderbuffer(V,36096,d,r.depth),ko(a),a.bindRenderbuffer(d,null)),a.activeTexture(33984),a.bindTexture(u,r.texture),W)for(var o=34069,q=0;6>q;q++)r.setupFrameBufferTextureAndDepth(a,r.frame[q],r.depth[q],o+q);else r.setupFrameBufferTextureAndDepth(a,r.frame,r.depth,3553);if(r.generateMipmaps&&(2===gv._webGLVersion||Of.isPOT(z)&&Of.isPOT(k))){a.generateMipmap(u);var s=r.options.minFilter||(S?9728:9729);a.texParameteri(u,10241,9728===s?9984:9987)}a.bindTexture(u,null)}},setupFrameBufferTextureAndDepth:function(c,F,J,g){var y,a=this,n=a.format,D=a.textureType;(y=a.options.data)&&(a.options.data=null),c.texImage2D(g,0,Os(a.gv,n,D),this.width,this.height,0,n,D,y||null),Hg(c,F),c.framebufferTexture2D(36160,36064,g,a.texture,0),this.setupRenderBufferStorage(c,J),ko(c)},setupRenderBufferStorage:function(S,f){var w=this,K=36161;S.bindRenderbuffer(K,f);var J=w.options.samples;J?S.renderbufferStorageMultisample(K,J,w.depthInternalFormat,w.width,w.height):(S.renderbufferStorage(K,w.depthInternalFormat,w.width,w.height),S.framebufferRenderbuffer(36160,36096,K,f)),S.bindRenderbuffer(36161,null)},readPixels:function($,U,V,P,o){var L=this,k=L.gv.getGL();Hg(k,L.frame);var Q;5121===L.textureType?(o||(o=new Uint8Array(4*V*P)),Q=5121):(o||(o=new Float32Array(4*V*P)),Q=5126);try{k.readPixels($,U,V,P,6408,Q,o)}finally{ko(k)}return o},readPixelsAsync:function(){var C=function(s,$,C,X,z){var R=function(){var h=s.clientWaitSync($,C,0);return 37149==h?(z(!1),void 0):37147==h?(Yi(R,X),void 0):(z(!0),void 0)};R()};return function(a,Z,I,o,y,O){var V=this;if(!V.gv.isWebGL2())throw new Error("readPixelsAsync only work on WebGL2");var Y=V.gv.getGL();Hg(Y,V.frame);var N;5121===V.textureType?(y||(y=new Uint8Array(4*I*o)),N=5121):(y||(y=new Float32Array(4*I*o)),N=5126);try{var i=hk(Y);Y.bindBuffer(35051,i),Y.bufferData(35051,y.byteLength,35041),Y.readPixels(a,Z,I,o,6408,N,0),Y.bindBuffer(35051,null);var K=Y.fenceSync(37143,0);Y.flush()}finally{ko(Y)}C(Y,K,0,10,function(a){return Y.deleteSync(K),a&&(Y.bindBuffer(35051,i),Y.getBufferSubData(35051,0,y),Y.bindBuffer(35051,null)),Y.deleteBuffer(i),a?O(y):O(null)})}}(),toCanvas:function(){var x;return function(W,q){var M=this,B=M.width,J=M.height,f=M.readPixels(0,0,B,J);q=q||I.createElement("canvas"),q.width!==B&&(q.width=B),q.height!==J&&(q.height=J);var F;W?(x||(x=I.createElement("canvas")),x.width!==B&&(x.width=B),x.height!==J&&(x.height=J),F=x.getContext("2d")):F=q.getContext("2d");var w=F.createImageData(B,J);if(f instanceof Float32Array){for(var g=f.byteLength/f.BYTES_PER_ELEMENT,p=new Uint8Array(g);--g>=0;){var c=f[g];0>c?c=0:c>1&&(c=1),p[g]=255*c}f=p}return w.data.set(f),F.putImageData(w,0,0),W&&(F=q.getContext("2d"),Oq(F,{width:B,height:J,comps:[{scaleY:-1,type:"image",name:x,rect:[0,0,B,J]}]},H,0,0,B,J)),q}}()});var Ts=jg.Interactor=function(k){this.gv=this.g3d=k};Bb("Interactor",b,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()},fi:function(o){this.gv.fi(o)},startDragging:function(J){Jl(this,J)}});var Us=jg.DefaultInteractor=function(G){Ei(Us,this,[G])};Bb("DefaultInteractor",Ts,{getState:function(){return this._62O},setState:function(O){this._62O=O},getDataInfoAt:function(D,e){var z=this.gv,M=z.getDataInfoAt(D);if(!z.isBlockSelectable()||!M||!M.data)return M;if(!e&&z.isSelected(M.data))return M;for(var t=M.data;(t=t.getParent())&&t instanceof L.Block&&z.isSelectable(t);){var i=z.isSelected(t);if(i&&e)break;if(M={data:t,part:M.part},i&&!e)break}return M},handle_contextmenu:function(Q){Ne(Q)},handle_mousewheel:function(f){this.gv.handleScroll(f,f.wheelDelta/40)},handle_DOMMouseScroll:function(p){2===p.axis&&this.gv.handleScroll(p,-p.detail)},handle_keydown:function(S){this.gv.handleKeyDown(S)},handle_mousedown:function(F){this.handle_touchstart(F)},handle_touchstart:function(s){Ne(s);var R=this,V=R.gv,p=Rj(s),z=R.getDataInfoAt(s),U=z?z.data:C,m=z?z.part:C,I=V.sm(),q=Qm(s),A=cg(s);V.setFocus(s)&&(R._62O=C,R._57I=C,R.pendingClickThrough=C,R.__lastClientPoint__=oo(s),U?cq(s)?I.co(U)?I.rs(U):I.as(U):I.co(U)?U instanceof _i&&U.isClickThroughEnabled()&&Rj(s)&&(R.pendingClickThrough=oo(s)):I.ss(U):p&&(cq(s)?V.isRectSelectable()&&(R._62O=ed):R._57I=oo(s)),R._31Q&&(si(R._31Q),delete R._31Q,delete R._32Q),R._62O||(V.isFirstPersonMode()&&(ee(s)||jr(s)||A>2?R._62O="pan":V.isMouseRoamable()||To(s)?(R._62O="roaming",R.foward=q&&Rj(s),R._32Q=cl(),R._31Q=ef(R.tick,R)):p||(R._62O="roaming")),R._62O||(p&&q&&mt[m]?(R._62O=m,R.p3=U.p3()):p&&q&&Tk(U)&&V.isSelected(U)?V.isMovable(U)?(R._62O="move",R.p3=U.p3(),R.movedata=U):V._39Q(U)&&(R._62O="none"):To(s)&&(A>2?R._62O="pan":2===A&&(R.dist=Rc(s),R._62O="pinch")))),R.point=V.lp(s),Jl(R,s),jb(s)?V.handleDoubleClick(s,U,m):V.handleClick(s,U,m))},tick:function(){var V=this,H=V.gv,N=H._moveStep;V.point&&H.isWalkable()&&(V._32Q&&(N*=(cl()-V._32Q)/50),H.walk(V.foward?N:-N),V._32Q=cl(),V._31Q=ef(V.tick,V))},handle_mouseup:function(C){this.handle_touchend(C)},handle_touchend:function(E){var Q=this._57I;if(Q&&(mp(Q,oo(E))<=1&&this.gv.sm().cs(),this._57I=C),Q=this.pendingClickThrough){if(mp(Q,oo(E))<=1){var N=this.getDataInfoAt(E);N&&N.data instanceof _i&&N.data.isClickThroughEnabled()&&(N=this.getDataInfoAt(E,!0),N&&(E.clickThrough=!0,this.gv.sm().ss(N.data)))}this.pendingClickThrough=null}},handleWindowMouseMove:function(g){this.handleWindowTouchMove(g)},handleWindowTouchMove:function(b){var c,$,q=this,j=q.gv,u=q._62O,S=q.point,I=j.dm(),P=j.lp(b),x=P.x-S.x,i=P.y-S.y,h=j.getWidth(),F=j.getHeight();if(h&&F){var C=oo(b),z=Gj(j,C,q.__lastClientPoint__),G=mp({x:0,y:0},z),t=-ok*x/h,R=-ok*i/F;if("roaming"===u)q.rotate(b,t/2,R/2);else if(u===gt||u===ht||u===it)j._86O||I.beginTransaction(),j.fi({kind:j._86O?"betweenEditRotation":"beginEditRotation",event:b}),j._86O=1,j.sm().each(function(F){if(Tk(F)&&j.isRotationEditable(F)){var _=A(t)>A(R)?t:R;u===gt?F.setRotationX(F.getRotationX()+_):u===ht?F.setRotationY(F.getRotationY()+_):u===it&&F.setRotationZ(F.getRotationZ()+_)}});else if("move"===u||mt[u]){if(u===jt||u===kt||u===lt)j._87O||I.beginTransaction(),j.fi({kind:j._87O?"betweenEditScale":"beginEditScale",event:b}),j._87O=1;else{if(!j._moving){if(G<T.touchMoveThreshold)return;I.beginTransaction()}j.fi({kind:j._moving?"betweenMove":"beginMove",event:b}),j._moving=1}var J,w=q.p3,E=j.getPositionInfo(w),d=ph(j);J=u===dt?"x":u===et?"y":u===ft?"z":u===jt?"sx":u===kt?"sy":u===lt?"sz":j.getMoveMode(b,q.movedata),x=x/h*E.width,i=-1*i/F*E.height;var D,p,s=[d[0]*x,d[4]*x,d[8]*x],H=[d[1]*i,d[5]*i,d[9]*i],f=s[0]+H[0],Y=s[1]+H[1],v=s[2]+H[2],a=[w[0]+f,w[1]+Y,w[2]+v],l=Go(j.getEye(),a,!0);if("xyz"===J?(D=a,j.moveSelection(f,Y,v)):"xz"===J?(D=Vc(j,w,[0,1,0],a),D&&j.moveSelection(D[0]-w[0],0,D[2]-w[2])):"xy"===J?(D=Vc(j,w,[0,0,1],a),D&&j.moveSelection(D[0]-w[0],D[1]-w[1],0)):"yz"===J?(D=Vc(j,w,[1,0,0],a),D&&j.moveSelection(0,D[1]-w[1],D[2]-w[2])):"x"===J||"sx"===J?(l[0]=0,D=Vc(j,w,l,a),D&&(p=D[0]-w[0],"x"===J?j.moveSelection(p,0,0):j.sm().each(function(L){Tk(L)&&j.isSizeEditable(L)&&(c=L.getScaleX()+p/100,$=c/L.getScaleX(),L.setScaleX(c),ee(b)&&(L.setScaleY(L.getScaleY()*$),L.setScaleTall(L.getScaleTall()*$)))}))):"y"===J||"sy"===J?(l[1]=0,D=Vc(j,w,l,a),D&&(p=D[1]-w[1],"y"===J?j.moveSelection(0,p,0):j.sm().each(function(x){Tk(x)&&j.isSizeEditable(x)&&(c=x.getScaleTall()+p/100,$=c/x.getScaleTall(),x.setScaleTall(c),ee(b)&&(x.setScaleY(x.getScaleY()*$),x.setScaleX(x.getScaleX()*$)))}))):("z"===J||"sz"===J)&&(l[2]=0,D=Vc(j,w,l,a),D&&(p=D[2]-w[2],"z"===J?j.moveSelection(0,0,p):j.sm().each(function(n){Tk(n)&&j.isSizeEditable(n)&&(c=n.getScaleY()+p/100,$=c/n.getScaleY(),n.setScaleY(c),ee(b)&&(n.setScaleX(n.getScaleX()*$),n.setScaleTall(n.getScaleTall()*$)))}))),!D)return;q.p3=D}else if(u===ed){var X=q.div;X||(X=q.div=vh(),Nh(q.getView(),X),X.op=S,X.style.background=j.getRectSelectBackground()),j.fi({kind:j._rectSelecting?"betweenRectSelect":"beginRectSelect",event:b}),j._rectSelecting=1,X.rect=Jm(X.op,P),mb(X,X.rect)}else if("pinch"===u&&2===cg(b)){j.fi({kind:j._pinching?"betweenPinch":"beginPinch",event:b}),j._pinching=1;var p=Rc(b);j._lastZoomLP||(j._lastZoomLP=lp(b)),j.handlePinch(p,q.dist),q.dist=p}else"pan"===u||ee(b)||jr(b)?q.pan(b,x,i):"none"===u||j.isFirstPersonMode()||q.rotate(b,t,R);q.point=P}},pan:function(l,i,q){var R=this.gv;if(R.isPannable()){var o=R.getWidth(),T=R.getHeight();if(!o||!T)return;var r=R.getCenterInfo(),W=i/o*r.width,e=-1*q/T*r.height;R.fi({kind:R._panning?"betweenPan":"beginPan",event:l}),R._panning=1,R.pan(-W,-e)}},rotate:function(W,c,A){var J=this.gv;J.isRotatable()&&(J.fi({kind:J._rotating?"betweenRotate":"beginRotate",event:W}),J._rotating=1,J.rotate(c,A))},handleWindowMouseUp:function(p){this.handleWindowTouchEnd(p)},handleWindowTouchEnd:function(u){var T=this,z=T.gv,f=z.dm(),J=T.div;if(J){var V=z.getDatasInRect(J.rect);if(!V.isEmpty()){var r=z.sm(),l=r.toSelection(),n=ee(u),A=u.altKey;V.each(function(K){r.co(K)?(!n||n&&A)&&l.remove(K):(!A||n&&A)&&l.add(K)}),r.ss(l)}me(J)}z._moving&&(delete z._moving,z.fi({kind:"endMove",event:u}),z.onMoveEnded(),f.endTransaction()),z._panning&&(delete z._panning,z.fi({kind:"endPan",event:u}),z.onPanEnded()),z._rotating&&(delete z._rotating,z.fi({kind:"endRotate",event:u}),z.onRotateEnded()),z._86O&&(delete z._86O,z.fi({kind:"endEditRotation",event:u}),f.endTransaction()),z._87O&&(delete z._87O,z.fi({kind:"endEditScale",event:u}),f.endTransaction()),z._pinching&&(delete z._pinching,z.fi({kind:"endPinch",event:u}),z.onPinchEnded()),z._rectSelecting&&(delete z._rectSelecting,z.fi({kind:"endRectSelect",event:u}),z.onRectSelectEnded()),z._walking&&(delete z._walking,z.fi({kind:"endWalk",event:u}),z.onWalkEnded()),z._lastZoomLP=z._lastZoomHit=null,T.dist=T.point=T._62O=T.p3=T.movedata=T.div=T._57I=T.pendingClickThrough=T._32Q=T._31Q=T.foward=C,T.__lastClientPoint__=C}});var Vs=jg.MapInteractor=function(u){Ei(Vs,this,[u]),this._keepHorizon=!0,this._threshold=2,this._touchScaleThreshold=.05,this._touchRotateThreshold=.03,this._touchScaleCheckAccuracy=.01,this._panButton="right",this._minPhi=0,this._maxPhi=5*Math.PI/12};Bb("MapInteractor",Ts,{setUp:function(){Vs.superClass.setUp.call(this);var T=this.gv;this.__oldMinPhi__=T.getRotateMinPhi(),this.__oldMaxPhi__=T.getRotateMaxPhi(),T.setRotateMinPhi(this._minPhi),T.setRotateMaxPhi(this._maxPhi)},tearDown:function(){Vs.superClass.tearDown.call(this);var E=this.gv;E.setRotateMinPhi(this.__oldMinPhi__),E.setRotateMaxPhi(this.__oldMaxPhi__),delete this.__oldMinPhi__,delete this.__oldMaxPhi__},handle_contextmenu:function(o){Ne(o)},handle_mousewheel:function(r){this.gv.handleScroll(r,r.wheelDelta/40)},handle_DOMMouseScroll:function(X){2===X.axis&&this.gv.handleScroll(X,-X.detail)},handle_keydown:function(A){this.gv.handleKeyDown(A)},handle_mousedown:function(C){this.handle_touchstart(C)},handle_touchstart:function(Z){Ne(Z);var V=this,v=V.gv;if(v.setFocus(Z)){var r=v.getDataInfoAt(Z),M=r?r.data:C,Y=r?r.part:C;V.__lastClientPoint__=oo(Z);var w=V.editing={point:v.lp(Z),data:M,part:Y};To(Z)?w.touch=!0:(w.touch=!1,w.clickLeft=Rj(Z),w.pan=jr(Z)?!0:"left"===this.panButton===w.clickLeft),M&&v._39Q(M)&&(w.preventDefault=!0),Jl(V,Z),jb(Z)?v.handleDoubleClick(Z,M,Y):v.handleClick(Z,M,Y)}},handle_mouseup:function(a){this.handle_touchend(a)},handle_touchend:function(){},handleWindowMouseMove:function(k){this.handleWindowTouchMove(k)},handleWindowTouchMove:function(O){var N=this,l=N.gv,e=N.editing;if(e){var Z=l.lp(O),i=e.point,a=Z.x-i.x,o=Z.y-i.y;if(!e.moved){if(Math.abs(a)<N.threshold&&Math.abs(o)<N.threshold&&!(O.touches&&O.touches.length>1))return;e.moved=!0}if(!e.preventDefault){e.point=Z;var Y=e.part;if(mt[Y]){var u=e.data,X=l.dm(),P=l.getWidth(),H=l.getHeight(),z=-ok*a/P,R=-ok*o/H;if(Y===gt||Y===ht||Y===it){l._86O||X.beginTransaction(),l.fi({kind:l._86O?"betweenEditRotation":"beginEditRotation",event:O}),l._86O=1;var n=A(z)>A(R)?z:R;l.sm().each(function(C){Tk(C)&&l.isRotationEditable(C)&&(Y===gt?C.setRotationX(C.getRotationX()+n):Y===ht?C.setRotationY(C.getRotationY()+n):Y===it&&C.setRotationZ(C.getRotationZ()+n))})}else{var M=u.p3(),f=l.getPositionInfo(M);a=a/P*f.width,o=-1*o/H*f.height;var B,I=ph(l),w=[I[0]*a,I[4]*a,I[8]*a],$=[I[1]*o,I[5]*o,I[9]*o],d=w[0]+$[0],k=w[1]+$[1],K=w[2]+$[2],L=[M[0]+d,M[1]+k,M[2]+K],v=Go(l.getEye(),L,!0);if(Y===jt||Y===kt||Y===lt){if(l._87O||X.beginTransaction(),l.fi({kind:l._87O?"betweenEditScale":"beginEditScale",event:O}),l._87O=1,B=Vc(l,M,v,L)){var G,V=0,D=["X","Y","Tall"];Y===jt?G="X":Y===kt?(G="Tall",V=1):Y===lt&&(G="Y",V=2),D.splice(D.indexOf(G),1);var W=ee(O),r=(B[V]-M[V])/100;l.sm().each(function(U){if(Tk(U)&&l.isSizeEditable(U)){var z=U["getScale"+G](),J=z+r;if(U["setScale"+G](J),W){var b=J/z;D.forEach(function(V){U["setScale"+V](U["getScale"+V]()*b)})}}})}}else if(Y===dt||Y===et||Y===ft){if(!l._moving){var q=oo(O),_=Gj(l,q,N.__lastClientPoint__),x=mp({x:0,y:0},_);if(x<T.touchMoveThreshold)return;X.beginTransaction()}l.fi({kind:l._moving?"betweenMove":"beginMove",event:O}),l._moving=1;var V=0;if(Y===dt?V=0:Y===et?V=1:Y===ft&&(V=2),v[V]=0,B=Vc(l,M,v,L)){var r=B[V]-M[V],F=[0,0,0];F[V]=r,l.moveSelection.apply(l,F)}}}}else if(e.touch){var b=O.touches.length;if(2!==b)N.pan(O,a,o);else{if(1>=b)return;var s=O.touches,m={x:s[0].clientX,y:s[0].clientY},c={x:s[1].clientX,y:s[1].clientY},J={x:c.x-m.x,y:c.y-m.y},S=e.lastCenter,y=Math.atan2(J.y,J.x),E=e.theta,h=0;E==C?E=e.theta=y:(h=y-E,e.thetaStarted||Math.abs(h)>N.touchRotateThreshold?(e.thetaStarted=!0,e.theta=y):h=0);var p=kl*(m.y+c.y)/2/l.getHeight(),t=e.phi,U=0;t==C?t=e.phi=p:(U=p-t,e.phiStarted||Math.abs(U)>N.touchRotateThreshold?(e.phiStarted=!0,e.phi=p):U=0);var j,Q=Math.sqrt(J.x*J.x+J.y*J.y),g=e.vlen;if(g){var _r=m.x-S.x,jr=m.y-S.y,Af=c.x-S.x,Qk=c.y-S.y,Fm=Math.sqrt(_r*_r+jr*jr),_c=Math.sqrt(Af*Af+Qk*Qk),Fg=g/2,Tj=N._sign2(Fm-Fg),ll=N._sign2(_c-Fg);0>Tj*ll||0===Tj&&0===ll?(j=1,e.vlen=Q):(j||(j=Q/g),e.scaleStarted||Math.abs(j-1)>N.touchScaleThreshold?(e.vlen=Q,e.scaleStarted=!0):j=1)}else g=e.vlen=Q,j=1;1!==j&&l.setZoom(j),(U||h)&&N.rotate(O,h,-U),e.lastCenter={x:(c.x+m.x)/2,y:(c.y+m.y)/2}}}else if(e.pan)N.pan(O,a,o);else{var P=l.getWidth(),H=l.getHeight();if(!P||!H)return;var z=-ok*a/P,R=-ok*o/H;N.rotate(O,z,R)}}}},_sign2:function(g){return Math.abs(g)<this._touchScaleCheckAccuracy?0:g>0?1:-1},handleWindowMouseUp:function(I){this.handleWindowTouchEnd(I)},getDataInfoAt:function(U,J){var c=this.gv,a=c.getDataInfoAt(U);if(!c.isBlockSelectable()||!a||!a.data)return a;if(!J&&c.isSelected(a.data))return a;for(var C=a.data,f=a.part;(C=C.getParent())&&C instanceof L.Block&&c.isSelectable(C);){var $=c.isSelected(C);if($&&J)break;if(a={data:C,part:f},$&&!J)break}return a},handleWindowTouchEnd:function(A){var S=this,W=S.editing;if(S.editing=null,W){var g=S.gv;if(W.moved||!W.clickLeft&&!W.touch)g._panning=null,g._rotating=null,g.fi({kind:W.pan?"endPan":"endRotate",event:A});else{var p=S.getDataInfoAt(A),K=p&&p.data;K instanceof _i&&K.isClickThroughEnabled()&&(p=S.getDataInfoAt(A,!0),p&&(K=p.data)),K?g.sm().setSelection([K]):g.sm().clearSelection()}var N=g.dm();g._moving&&(delete g._moving,g.fi({kind:"endMove",event:A}),g.onMoveEnded(),N.endTransaction()),g._86O&&(delete g._86O,g.fi({kind:"endEditRotation",event:A}),N.endTransaction()),g._87O&&(delete g._87O,g.fi({kind:"endEditScale",event:A}),N.endTransaction())}},pan:function(p,b,a){var s=this,X=s.gv;if(X.isPannable()){var Z=X.getWidth(),c=X.getHeight();if(Z&&c){var g=X.getCenterInfo(),J=-b/Z*g.width,G=1*a/c*g.height;X.fi({kind:X._panning?"betweenPan":"beginPan",event:p}),X._panning=1;var V=s.keepHorizon,l=s.editing.touch;if((l&&p.touches&&p.touches.length>1||!l&&ee(p))&&(V=!V),!V)return X.pan(J,G);if(J||G){var U=ph(X),M=[U[0]*J,U[4]*J,U[8]*J],m=[U[1],0,U[9]],o=Math.sqrt(m[0]*m[0]+m[2]*m[2]);o&&(m=[m[0]/o*G,0,m[2]/o*G]);var L=M[0]+m[0],j=M[1]+m[1],S=M[2]+m[2],e=X._center,T=X._eye;e[0]+=L,e[1]+=j,e[2]+=S,T[0]+=L,T[1]+=j,T[2]+=S,X.fp(Gp,C,T),X.fp(Vk,C,e)}}}},rotate:function(L,O,g){var R=this,H=R.gv;if(H.isRotatable()){var y=H._center,i=H._eye,K=Go(i,y),F=Nn(Q(K[0]*K[0]+K[2]*K[2]),K[1]),l=Yg(H,F+g);g=l-F,H.fi({kind:H._rotating?"betweenRotate":"beginRotate",event:L}),H._rotating=1,H.rotate(O,g)}}}),b.defineProperties(Vs.prototype,{panButton:{get:function(){return this._panButton},set:function(l){this._panButton=l}},minPhi:{get:function(){return this._minPhi},set:function(u){this.gv.setRotateMinPhi(this._minPhi=u)}},maxPhi:{get:function(){return this._maxPhi},set:function(X){this.gv.setRotateMaxPhi(this._maxPhi=X)}},keepHorizon:{get:function(){return this._keepHorizon},set:function(b){this._keepHorizon=b}},threshold:{get:function(){return this._threshold},set:function(X){this._threshold=X}},touchScaleThreshold:{get:function(){return this._touchScaleThreshold},set:function(B){this._touchScaleThreshold=B}},touchRotateThreshold:{get:function(){return this._touchRotateThreshold},set:function(Y){this._touchRotateThreshold=Y}}});var Ws,Xs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEyUlEQVRYR62XW0xcVRSG/58cmIG2HmstE9N4SX2xtVqBCISoFS/RmDSpKQSvTWNixUStQSqVyBQYJUGttrQVtYkPatuQPmhivMUHqbUBZ2itl1qjTzZpImNUZhDLsUeWWXgOOd2cgcGyk3mYs/de69trr70uxP8YIlJKMi0i9wIgyf0iEiM5PFdxzGeDiBQAuB7AjQBuALCN5NcGQDmANgBfeL8UyYnZ5M8KICJ3AXgAwAlfOMl/VHAQwPtveYAKuQLA2yQ/ngliRgAR2QogA2AvSdcUZAIE50VEYR4BsIDkC7kgQgFE5GIAuwDsJnkk1+aZAPw9IqLX1gjgcZK/m7KmAXjK4wBaSf4ZplxEIgCuA3Cz3gSAfgDHSf6dY/0FAJ4D0G5ChAEcAPBwmHIRqXNd90nLsiocx/k+k8n8oK/Atu2rIpHIStd1v7QsawfJd0Ouywawh6T609Q4B8C788NhZnddt29sbGxBd3f39q6urtNhJ43H48uam5u3lJSUjFiWdV8IxE0Aqki+6M9NAXjefjnJXsOZogBGBgYGttbU1Hw427PS+cHBwbVVVVUJAItJOoa8xwD8RPIT/T4J4L3zfQAeNL1dRMZra2ur+/v7/8pHub+mvr7+wr6+vs8KCgoWGABFAN4EsEHjhA9QBeA2ks8HF6vZk8nkQL4nNwGTyeTa8vLycsuy7jcg1Mk/IpnyAZoBaOQ6FHg+ddlsdqNt201zObm5NpvN7ly0aNHrJN8LyL4FwGqSr/gAOrnej3C60HXdw/F4PJ7L4fKFSiQSl7W0tLQVFRWtCQDoNRwguZ6aWABcorE9sEDf+QjJ1fkqmmmdiHwHoCToXyKiceR0rkhY5TjOq9FoVLPdeY/x8fG+SCSySe/cFKYWCFOyPJ1Or4zFYh3nrR3A8PBwe2lp6TcAfg4DmBYwAFyRTqdXxWKx9nkE+DYUIEyBiFQ6jvNaNBq9Zz4AZruCGIBlJI8ZXpolee18AORwwgoAp/xnqMmjPuilZ8+ePZRIJNo7OztD436+YB0dHZe2trY+W1hYWGsccD/JOh/gKQBHSWpanRwicnc2m91k2/bmfJWFrRsdHd29cOHCXSTfD8i+FcA1JHcEQ/HtJDVnTw3XdfcPDQ0dra6unto8F5hUKrWurKxslWVZG4L7RGQbgA9IDgWT0VsANprJaGJi4kxDQ8OagwcPjsxFeWNj49Le3l6N91qMTA2vmNnr6fovGXkmvxPAlST3hGz4LZVKbausrMzLEnryioqKNpJLzCpJRJ4AcJLkp6rHLEieBjBA8rB5Wtd1942NjS3p6el5qa2t7VSYNdThmpqaWoqLi38xze4dUku4CpLb/f1hJZnWBY+SzJpKRGSdV5LVOI5zIpPJnNQ1tm2viEQiV7uue8SyrJeDDhew8GIAO0me4w9hABdp8ahNBkktyacNr+Qu84pSndfX81VY6e6dXJV3AoiT/CMoMFcyUogeAG+Q/DyX8+VZlqvZHwKw2VQ+zQdCTL4FwBkPZFrJPUtjoildG5PC4J2bOvJpze7QWhHAj4HWbBImpDXTQsPvH5cDeMf39lxWnBXAU6TNqcZu7fn0lyB53GhOdf6ZQHN6bF6a0xxOuJTkrwbA5LdcJ831/V8SOUYQxYGhRwAAAABJRU5ErkJggg==",Ys=32,Zs=jg.GlobeInteractor=function(h,b){Ei(Zs,this,[h]);var G,f=b.radius||6378137,Q=this,v=null;Ws||(Ws=vh(),Ws.style.border="",Ws.style.backgroundImage="url("+Xs+")");var X=new $d,Y=new ng,V=new ng,a=new ng,M=new Aq,c="number"==typeof f?{x:f,y:f,z:f}:f,L={center:new ng(0,0,0),radius:c},D=function(g){h._81O=null;var x=h.getHitPosition(g,h.getCenter(),Y.copy(h.getEye()).sub(V.copy(h.getCenter())).toArray());return M.origin.copy(h.getEye()),M.direction.copy(x).sub(M.origin).normalize(),M.intersectEllipsoid(L)},i=function(z,e){h._81O=null,M.origin.copy(h.getEye());for(var E,g,s=h.getCenter(),Q=Y.copy(h.getEye()).sub(V.copy(h.getCenter())).toArray(),o=1,U=16,C=0,_=1,B={x:0,y:0};U--;){if(B.x=e.x+(z.x-e.x)*o,B.y=e.y+(z.y-e.y)*o,E=h.getHitPosition(B,s,Q),M.direction.copy(E).sub(M.origin).normalize(),g=M.intersectEllipsoid(L),g&&1===o)return{hit:g};g?C=o:_=o,o=(C+_)/2}return{hit:g,out:1>o}},p=function(c,R){if(v){var Q=Date.now();v.deltaTime=v.lastTime?Q-v.lastTime:1e3,v.lastTime=Q,v.lastAxis=c,v.lastAngle=R}R&&(X.setFromAxisAngle(c,R),h.setEye(Y.copy(h.getEye()).applyQuaternion(X).toArray()),h.setCenter(Y.copy(h.getCenter()).applyQuaternion(X).toArray()),h.setUp(Y.copy(h.getUp()).applyQuaternion(X).toArray()))};Q._showCrossIcon=function(I){Nh(Q.getView(),Ws),mb(Ws,{x:I.clientX-Ys/2,y:I.clientY-Ys/2,width:Ys,height:Ys})},Q._hideCrossIcon=function(){me(Ws)},Q._scrollImpl=function(Y,b){v={point:h.lp(Y),screen:oo(Y),hit:D(Y),type:"right"},v.hitNormalize=v.hit?v.hit.clone().normalize():new ng;var M={clientX:v.screen.x,clientY:v.screen.y+10*b};Q._handleMoveImpl(M),Q._endMoveImpl(M)},Q._startMoveImpl=function(y){G&&(G.stop(!0),G=null),v={point:h.lp(y),screen:oo(y),hit:D(y)},v.hitNormalize=v.hit?v.hit.clone().normalize():new ng,To(y)?1===y.touches.length?v.hit&&(v.type="left"):2===y.touches.length&&(v.type="touch2"):(Rj(y)?v.hit&&(v.type="left"):hl(y)?v.type="right":jr(y)&&v.hit&&(v.type="middle"),!v.hit||"right"!==v.type&&"middle"!==v.type||Q._showCrossIcon(y)),v.type&&Jl(Q,y)},Q._handleMoveImpl=function(m){if(v)switch(v.type){case"left":return Q._handleLeft(m);case"right":return Q._handleRight(m);case"middle":return Q._handleMiddle(m);case"touch2":return Q._handleTouch2(m)}},Q._endMoveImpl=function(){if(v){if(this._hideCrossIcon(),"left"===v.type||"middle"===v.type){var s=1e3*(v.lastAngle/(v.deltaTime||30)),T=v.lastAxis,R=v.lastTime,a=function(){var v=Date.now(),D=(v-R)/1e3;return R=v,s*=Math.pow(Math.abs(Q.decelerationRate),3*D),Math.abs(s)<.01?(s=0,G&&G.stop(),void 0):(p(T,s*D),void 0)};G=$m({action:function(){a(arguments)},duration:5e3})}v=null}},Q._handleLeft=function(y){if(!v.finished){var g=oo(y),E=i(g,v.lastScreen||v.screen);if(v.lastScreen=g,!E.hit)return v.finished=!0,Q._endMoveImpl(y),void 0;var C=E.hit;C.normalize();var L=v.hitNormalize,n=Math.acos(C.dot(L)),M=C.cross(L).normalize();p(M,n),E.out&&(v.finished=!0,Q._endMoveImpl(y))}},Q._handleRight=function(d){var $=v.lastScreen||v.screen,G=$.y;$=v.lastScreen=oo(d);var U=$.y,E=U-G;if(E){var f=Math.min(.5,E*Q.scaleSpeed);Y.copy(h.getEye());var S=v.hit;S||(S=Y.clone().divide(c).normalize().multiply(c)),V.copy(Y).lerp(S,f),h.setEye(V.toArray()),Y.copy(h.getUp()),V.normalize();var t=Y.clone().cross(V).normalize();if(a.copy(h.getCenter()),a.sub(t.multiplyScalar(a.dot(t))),h.setCenter(a.toArray()),v.hit){var H=D(v.screen),y=v.hitNormalize;if(H){H.normalize();var I=Math.acos(H.dot(y)),z=H.cross(y).normalize();I&&p(z,I)}}}};var j=function(p){return Math.abs(p)<.01?0:p>0?1:-1};Q._handleTouch2=function(a){var $=a.touches.length;if(2===$){var N=a.touches,o={x:N[0].clientX,y:N[0].clientY},k={x:N[1].clientX,y:N[1].clientY},F={x:k.x-o.x,y:k.y-o.y},d=v.lastCenter,M=Math.atan2(F.y,F.x),K=v.theta,w=0;K==C?K=v.theta=M:(w=M-K,v.thetaStarted||Math.abs(w)>.03?(v.thetaStarted=!0,v.theta=M):w=0);var E,c=Math.sqrt(F.x*F.x+F.y*F.y),P=v.vlen;if(P){var s=o.x-d.x,G=o.y-d.y,r=k.x-d.x,D=k.y-d.y,Z=Math.sqrt(s*s+G*G),T=Math.sqrt(r*r+D*D),W=P/2,B=j(Z-W),n=j(T-W);0>B*n||0===B&&0===n?(E=1,v.vlen=c):(E||(E=c/P),v.scaleStarted||Math.abs(E-1)>.05?(v.vlen=c,v.scaleStarted=!0):E=1)}else P=v.vlen=c,E=1;var F=V.copy(h.getEye()).clone();1!==E&&h.setEye(F.setLength((F.length()-f)/E+f).toArray()),w&&p(F.normalize(),w),v.lastCenter={x:(k.x+o.x)/2,y:(k.y+o.y)/2}}},Q._handleMiddle=function(I){var N=oo(I),B=v.screen;v.screen=N;var m=(N.y-B.y)/180*Math.PI*Q.rollSpeed;V.copy(h.getCenter()).sub(Y.copy(h.getEye())).normalize(),Y.copy(h.getUp()).cross(V).normalize(),V.copy(h.getEye()).sub(v.hit).applyAxisAngle(Y,m).add(v.hit);var G=V.clone();V.copy(h.getCenter()).sub(v.hit).applyAxisAngle(Y,m).add(v.hit);var z=V.clone(),S=V.copy(h.getUp()).applyAxisAngle(Y,m).clone(),E=!1;m>0&&(a.copy(S),V.copy(z).sub(G).normalize(),Y.copy(G).multiplyScalar(-1).normalize(),Y.dot(a)-V.dot(a)>0&&(E=!0)),E||a.copy(v.hit).sub(G).dot(v.hitNormalize)>=0&&(E=!0),E||(h.setEye(G.toArray()),h.setCenter(z.toArray()),h.setUp(S.toArray()));var n=-(N.x-B.x)/180*Math.PI*Q.rotateSpeed;p(v.hitNormalize,n)}};Bb("GlobeInteractor",Ts,{handle_contextmenu:function(G){Ne(G)},handle_mousewheel:function(n){this._scrollImpl(n,n.wheelDelta/40)},handle_DOMMouseScroll:function(l){2===l.axis&&this._scrollImpl(l,-l.detail)},handle_keydown:function(t){this.gv.handleKeyDown(t)},handle_mousedown:function(D){this.handle_touchstart(D)},handle_touchstart:function(y){Ne(y);var O=this.gv;if(O.setFocus(y)){var B=O.getDataInfoAt(y),V=B?B.data:C;V&&O.isInteractive(V)||this._startMoveImpl(y);var d=B?B.part:C;jb(y)?O.handleDoubleClick(y,V,d):O.handleClick(y,V,d)}},handle_mouseup:function(F){this.handle_touchend(F)},handle_touchend:function(){},handleWindowMouseMove:function(E){this.handleWindowTouchMove(E)},handleWindowTouchMove:function($){this._handleMoveImpl($)},handleWindowMouseUp:function(S){this.handleWindowTouchEnd(S)},handleWindowTouchEnd:function(F){this._endMoveImpl(F)}}),b.defineProperties(Zs.prototype,{rotateSpeed:{get:function(){return this._rotateSpeed||.3},set:function(P){this._rotateSpeed=P}},rollSpeed:{get:function(){return this._rollSpeed||.1},set:function(Q){this._rollSpeed=Q}},scaleSpeed:{get:function(){return this._scaleSpeed||.002},set:function(G){this._scaleSpeed=G}},decelerationRate:{get:function(){return this._decelerationRate||.04},set:function(o){this._decelerationRate=o}}});var $s=function(A){var c=2147483648|A;return[(255&c>>16)/255,(255&c>>8)/255,(255&c)/255,(255&c>>24)/255]},_s=function(M){this.gv=M,this.gv.pickColorMap={_pickIdUsed:2e3}};Po(_s,b,{_iv:!0,iv:function(){this._iv=!0},get:function(_,E,T){this.validate();var D=this,x=D.gv.getGL();if(!x)return C;var N,W,i=D._resolution,p=Math.round(_.x*i),o=Math.ceil(_.width*i),d=Math.ceil(_.height*i),M=D.height-Math.round(_.y*i)-d,L=$(o/2),a=new Uint8Array(4*o*d),q=0,r=a.length,G=E?C:new Dg,n=E?C:{};if(Hg(x,D.frame),x.readPixels(p,M,o,d,6408,5121,a),ko(x),E){for(;L>=q;q++)for(var l=L-q,Z=L+q,I=l;Z>=I;I++)for(var t=l;Z>=t;t++)if((I===l||I===Z||t===l||t===Z)&&(N=D.info(a,4*(I*o+t)))){if(T&&T(N)===!1)continue;return N}}else for(;r>q;q+=4)if(N=D.info(a,q)){if(T&&T(N)===!1)continue;W=N.data,n[W._id]||(G.add(W),n[W._id]=W)}return G},info:function(Y,z){return this.gv.pickColorMap[(Y[z]<<16)+(Y[z+1]<<8)+Y[z+2]+((127&Y[z+3])<<24)]},getResolution:function(){return this._resolution},onContextLost:function(){this.texture=null,this.width=this.height=-1},validate:function(){var e=this,Z=e.gv,U=Z.getGL();if(U){var Y=e._resolution=Z._pickerResolution*Z.getDevicePixelRatio(),p=Math.round(Y*Z.getWidth()),i=Math.round(Y*Z.getHeight()),l=6408,v=3553,u=36161,x=36160;if(e.texture||(e.texture=fj(Z,U),e.render=U.createRenderbuffer(),e.frame=U.createFramebuffer()),(e.width!==p||e.height!==i)&&(U.activeTexture(33984),io(U,e.texture),U.texImage2D(v,0,l,p,i,0,l,5121,C),vb(U,10241,9729),U.bindRenderbuffer(u,e.render),U.renderbufferStorage(u,33189,p,i),Hg(U,e.frame),U.framebufferTexture2D(x,36064,v,e.texture,0),U.framebufferRenderbuffer(x,36096,u,e.render),io(U,C),U.bindRenderbuffer(u,C),ko(U),e.width=p,e.height=i),e._iv){e._iv=!1;var X=!1;Z._40Q.each(function(R){!X&&R.isBatchInvalid()&&(X=!0)}),X&&Z.updateScene(),Hg(U,e.frame),U.clear(16384),Z.overlappingBox.clear(),Z.setViewport(U,0,0,p,i),Z.renderPickScene(),ko(U)}}}});var at=function(w){this.gv=w};Po(at,b,{gap:0,size:0,_42:function(Z){var c=this,L=c.gv,N=L._gridGap,l=L._gridSize;if(L._gridVisible){if(c.gap!==N||c.size!==l){for(var o=[],u=L._gridSize/2,d=N*u,f=0;2*u+1>f;f++){var w=6*f,X=6*(2*u+1)+w;o[w]=-d,o[w+1]=0,o[w+2]=-d+f*N,o[w+3]=d,o[w+4]=0,o[w+5]=-d+f*N,o[X]=-d+f*N,o[X+1]=0,o[X+2]=-d,o[X+3]=-d+f*N,o[X+4]=0,o[X+5]=d}c.vs=new $n(o),c.gap=N,c.size=l}Bh(L),gs(Z),Vr(Z);var O=!L._fogDisabled;if(O){var n=ie.for(Z).directUniforms();n.uFog=!1}Bn(Z,1,L._gridColor,L._buffer.vs,c.vs),Uq(Z,0,c.vs.length/3,1),O&&(n.uFog=!0),nq(Z),In(Z)}else c.vs=c.gap=c.size=C}});var bt=function(I){this.gv=I};Po(bt,b,{_42:function(b){var t=this.gv,y=t._buffer.vs,x=t._axisXColor,D=t._axisYColor,N=t._axisZColor,B=t._originAxisVisible,e=t._centerAxisVisible;if(B||e){var v=bq?4:6,M=1;if(Bh(t),gs(b),Vr(b),B){var Q=t.getCenterInfo(),p=r(Q.width,Q.height)/5,R=.8*p,q=.05*p;Bn(b,1.5,x,y,new $n([0,0,0,p,0,0,R,q,0,R,0,q,R,-q,0,R,0,-q,R,q,0,0,0,0,0,p,0,q,R,0,0,R,q,-q,R,0,0,R,-q,q,R,0,0,0,0,0,0,p,q,0,R,0,q,R,-q,0,R,0,-q,R,q,0,R])),Uq(b,0,2,M),Uq(b,1,6,v),Bn(b,C,D),Uq(b,7,2,M),Uq(b,8,6,v),Bn(b,C,N),Uq(b,14,2,M),Uq(b,15,6,v)}if(e){var z=t._center,s=z[0],j=z[1],I=z[2],Q=t.getPositionInfo(z);p=r(Q.width,Q.height)/20,Bn(b,1.5,x,y,new $n([s,j,I,s+p,j,I,s,j,I,s,j+p,I,s,j,I,s,j,I+p])),Uq(b,0,2,M),Bn(b,C,D),Uq(b,2,2,M),Bn(b,C,N),Uq(b,4,2,M)}nq(b),In(b)}}});var ct=function(p){this.gv=p},dt="edit_tx",et="edit_ty",ft="edit_tz",gt="edit_rx",ht="edit_ry",it="edit_rz",jt="edit_sx",kt="edit_sy",lt="edit_sz",mt={};mt[dt]=101,mt[et]=102,mt[ft]=103,mt[gt]=104,mt[ht]=105,mt[it]=106,mt[jt]=107,mt[kt]=108,mt[lt]=109,Po(ct,b,{_42:function(V){var H=this,y=H.gv,t=y.sm().ld();if(t&&y.isEditable(t)&&!y.isEditHelperDisabled()&&Tk(t)&&(!y.isFirstPersonMode()||!y.isMouseRoamable()&&!Cd)){Bh(y);var u,A=y.isMovable(t),P=y.isRotationEditable(t),g=y.isSizeEditable(t),l=y._axisXColor,C=y._axisYColor,q=y._axisZColor,v=y._editSizeColor,b=t.p3();if(y.isOrtho()){var j=y.getCenterInfo();u=r(j.width,j.height)/8}else u=mp(y.getEye(),b)/10;var Z,o,D=u/(y.isPicking()?5:10),i=.7*u,O=.4*i,_=b[0],N=b[1],m=b[2];Z=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],A&&H._17O(V,t,dt,l,Z,[_,N-D,m,_+i,N-D,m,_+i,N,m,_+i,N,m,_,N,m,_,N-D,m,_,N-D,m+D,_+i,N-D,m+D,_+i,N-D,m,_+i,N-D,m,_,N-D,m,_,N-D,m+D]),o=_+i,g&&H._17O(V,t,jt,v,Z,[o,N-D,m,o+O,N-D,m,o+O,N,m,o+O,N,m,o,N,m,o,N-D,m,o,N-D,m+D,o+O,N-D,m+D,o+O,N-D,m,o+O,N-D,m,o,N-D,m,o,N-D,m+D]),o+=O,P&&H._17O(V,t,gt,l,Z,[o,N-D,m,o+O,N-D,m,o+O,N,m,o+O,N,m,o,N,m,o,N-D,m,o,N-D,m+D,o+O,N-D,m+D,o+O,N-D,m,o+O,N-D,m,o,N-D,m,o,N-D,m+D]),Z=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],A&&H._17O(V,t,et,C,Z,[_,N,m,_,N+i,m,_-D,N+i,m,_-D,N+i,m,_-D,N,m,_,N,m,_,N,m,_,N,m-D,_,N+i,m-D,_,N+i,m-D,_,N+i,m,_,N,m]),o=N+i,g&&H._17O(V,t,kt,v,Z,[_,o,m,_,o+O,m,_-D,o+O,m,_-D,o+O,m,_-D,o,m,_,o,m,_,o,m,_,o,m-D,_,o+O,m-D,_,o+O,m-D,_,o+O,m,_,o,m]),o+=O,P&&H._17O(V,t,ht,C,Z,[_,o,m,_,o+O,m,_-D,o+O,m,_-D,o+O,m,_-D,o,m,_,o,m,_,o,m,_,o,m-D,_,o+O,m-D,_,o+O,m-D,_,o+O,m,_,o,m]),Z=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],A&&H._17O(V,t,ft,q,Z,[_,N,m,_,N,m+i,_,N-D,m+i,_,N-D,m+i,_,N-D,m,_,N,m,_,N-D,m,_-D,N-D,m,_-D,N-D,m+i,_-D,N-D,m+i,_,N-D,m+i,_,N-D,m]),o=m+i,g&&H._17O(V,t,lt,v,Z,[_,N,o,_,N,o+O,_,N-D,o+O,_,N-D,o+O,_,N-D,o,_,N,o,_,N-D,o,_-D,N-D,o,_-D,N-D,o+O,_-D,N-D,o+O,_,N-D,o+O,_,N-D,o]),o+=O,P&&H._17O(V,t,it,q,Z,[_,N,o,_,N,o+O,_,N-D,o+O,_,N-D,o+O,_,N-D,o,_,N,o,_,N-D,o,_-D,N-D,o,_-D,N-D,o+O,_-D,N-D,o+O,_,N-D,o+O,_,N-D,o])
}},_17O:function(W,F,Y,P,m,l){var s=this.gv,Q=s._buffer,Z=ie.for(W),n=Z.directUniforms(),E=Z.directAttribs();if(s._picking){var K=s.pickColorMap,$=mt[Y];K[$]={data:F,part:Y},n.uFixPickReverseColor=$s($)}dq(W,C,!0,C,!0,C,!1),n.uDiffuse=P,E.aPosition=Eo(W,Q.vs,new $n(l),C),E.aNormal=Eo(W,Q.ns,new $n(m),C),Vr(W),Uq(W,0,12),nq(W),zf(W)}});var nt=L.Raycaster=function(Q){this.gv=Q,this.maxTriangleTest=1/0,this.backfaceCulling=!0,this.triangleTestEpsilon=1e-9};ik("Raycaster",b,{getTriangleTestEpsilon:function(){return this.triangleTestEpsilon},setTriangleTestEpsilon:function(L){return this.triangleTestEpsilon=L,this},getBackfaceCulling:function(){return this.backfaceCulling},setBackfaceCulling:function(j){return this.backfaceCulling=j,this},intersect:function(y){var s=this,J=s.gv,$=J.getDataAt(y);return $?s.intersectObject(y,$):null},intersectObjects:function(Q,I,M){var t,i,x,V,N=this,s=1/0,B=Q.origin||(new ng).fromArray(N.gv.getEye()),Z=N.maxTriangleTest,J=[];I.forEach(function(j){M&&M(j)===!1||j.s("intersect")!==!1&&J.push(j)});var q=B.distanceToSquared2([0,0,0]);return J.sort(function(L,c){return(L.p3?B.distanceToSquared2(L.p3()):q)-(c.p3?B.distanceToSquared2(c.p3()):q)}),N.countTriangles=0,J.forEach(function(R){N.countTriangles>Z||(t=N.intersectObject(Q,R),t&&(i=B.distanceToSquared(t.world),s>i&&(x=R,V=t,s=i)))}),N.countTriangles=0,{data:x,intersect:V}},intersectObjectAndRecordTriangle:function(U,T){this._4GQ=!0;var F=this.intersectObject(U,T);return this._4GQ=!1,F},intersectLastTriangle:function(O,K){var g=this.getRay(O);g.applyMatrix4(K.inverseMatrix);var u=g.intersectPlane(K.plane);if(!u)return null;var Y=Ep.uvIntersection(u,K.p1,K.p2,K.p3,K.uv1.clone(),K.uv2.clone(),K.uv3.clone());return{world:u.clone().applyMatrix4(K.matrixWorld),local:u.clone(),uv:Y}},getRay:function(v){if(v instanceof Aq)return v;var O=this,U=O.gv,Q=U.unproject(v),I=new ng,x=U.getEye(),e=new ng;if(U.isOrtho()){var r=new ng(x);e.copy(U.getCenter()).sub(r).normalize();var K=I.copy(Q).sub(r).dot(e);I.copy(e).setLength(-K).add(r.copy(Q))}else I.copy(x),e.copy(Q).sub(I).normalize();return new L.Math.Ray(I,e)},intersectObject:function(r,I){return this._intersectObjectImpl(this.getRay(r),I)},_intersectObjectImpl:function(){function X(){var d=new ng;return d.subVectors(U,A),N.subVectors(e,A),d.cross(N).normalize(),d}var b=new kc,d=new kc,v=new Aq,z=new ng,n=new ng,Z=new ng,t=new ng,Q=new ng,e=new ng,A=new ng,U=new ng,k=new Sf,E=new Sf,T=new Sf,N=new ng,u={vs:Md,is:Xn,uv:bc},K=Up.slice(0);return K.push("csg"),function(C,N){var w=this.gv.getData3dUI(N),l=N.mat||w.mat;l?b.fromArray(l):b.identity(),d.getInverse(b),v.copy(C).applyMatrix4(d);var q,f,P,j="body",B=w.shapeModel;if(!B&&(N instanceof L.Polyline||N instanceof L.Edge)&&w.lineShapeModel&&(B=w.lineShapeModel),B||(B=ir(w)),B||(L.CSGNode&&N instanceof L.CSGNode||L.CSGShape&&N instanceof L.CSGShape?(P=!0,B=[w.left,w.front,w.right,w.back,w.top,w.bottom,w.csg]):N instanceof L.Node&&!(N instanceof L.Shape)?(q=!0,B=u):(f=!0,B=[w.left,w.front,w.right,w.back,w.top,w.bottom])),!B)return console.log("Can not find shape model."),null;Tl(B)||(B=[B]);var W,O,y,Y,h,M,$,F,I,R,o,g,i,m,D,S,J=1/0,x=["","top_","bottom_"],c=!1,p=this.backfaceCulling,V=this.triangleTestEpsilon,G=[];for(vf(B,w,G),W=0,O=G.length;O>W;W++)if(i=G[W],i&&(i=i.mesh))for(y=0,Y=x.length;Y>y;y++)if(m=x[y],$=i[m+"vs"],F=i[m+"is"],I=i[m+"uv"]||i[m+"tuv"],$){if(D=i[m+"boundingBox"]){var o=v.intersectBox(D);if(!o)continue;if(v.origin.distanceTo(o)>J)continue;S=!1}else i[m+"boundingBox"]=D=new L.Math.Box3,S=!0;for(h=0,M=F?F.length:$.length/3;M>h;h+=3)this.countTriangles++,F?(n.fromArray($,3*F[h]),Z.fromArray($,3*F[h+1]),t.fromArray($,3*F[h+2])):(n.fromArray($,3*h),Z.fromArray($,3*(h+1)),t.fromArray($,3*(h+2))),S&&(D.expandByPoint(n),D.expandByPoint(Z),D.expandByPoint(t)),R=v.intersectTriangle(n,Z,t,p,V,z),R&&(g=v.origin.distanceTo(R),J>g&&(J=g,Q.copy(R),e.copy(n),A.copy(Z),U.copy(t),""!==m?j=m.slice(0,-1):q?j=Up[Math.floor(h/6)]:f?j=Up[W]:P&&(j=K[W]),I&&(c=!0,F?(k.fromArray(I,2*F[h]),E.fromArray(I,2*F[h+1]),T.fromArray(I,2*F[h+2])):(k.fromArray(I,2*h),E.fromArray(I,2*(h+1)),T.fromArray(I,2*(h+2))))))}if(!isFinite(J))return null;var r,s,a=Q.clone().applyMatrix4(b),H=this._4GQ;c&&(H&&(s={inverseMatrix:d.clone(),matrixWorld:b.clone(),p1:e.clone(),p2:A.clone(),p3:U.clone(),uv1:k.clone(),uv2:E.clone(),uv3:T.clone(),plane:(new L.Math.Plane).setFromCoplanarPoints(e,A,U)}),r=Ep.uvIntersection(Q,e,A,U,k,E,T));var _=X(e,A,U),Lk=X(e.applyMatrix4(b),A.applyMatrix4(b),U.applyMatrix4(b)),le=v.direction.dot(_)>0;le&&(_.multiplyScalar(-1),Lk.multiplyScalar(-1));var Hb={world:a,local:Q.clone(),worldNormal:Lk,normal:_,uv:r,part:j,backface:le};return s&&(Hb.triangleInfo=s),Hb}}()});var ot=function(d,v){this.gv=d,this.s=function(U,n,K){return n==C&&(n=K),n==C?v.getStyle(U):hg(n,v,d)},this.data=v};Po(ot,b,{I3d:!0,ms_icons:1,_iv:!0,_cacheBoundingBox:H,iv:function(){this._iv=!0},update:function(U,b,p){var _=this,l=_.data;if(U||(U=_.gv,b=U.getGL(),p=U._40Q),!_.needValidate(b)||!U.isVisible(l))return p.push(this,!1),void 0;var P,J,m,R,g,c=l._id,E=l._47Q?null:_.s("batch"),H=l.getRenderLayer(),v=p.get(H,!0),F=v.batchIndexMap,r=v.batchModelMap,I=U.getBrightness(l),j=I!=C&&1!==I;P=sr(F,r,l,E,U);var w=E?U.getBatchInfo(E)||gc:C,y=_.validate(P,w);if(P&&(!w.ms||!w.ms.length)&&(J=F[c],m=J.size=P.vs.length/3-J.begin,g=P.rs))for(I=j?I:1,R=0;m>R;R++)g.push(I);var z=U.getWireframeGeometry(l);if(z)wb(U,l,z);else if(Tk(l)){var u=U.getWireframe(l);u&&wb(U,l,u)}_.labelInfo=_.label2Info=_.noteInfo=_.note2Info=_._38o=C,_._24O(Fb,"getLabel"),_._24O(Io,"getLabel2"),_._26O(Hp,"getNote"),_._26O(Fd,"getNote2"),_._15O(),_.interactiveInfo=U.isInteractive(l)?{}:C,v.push(this,!0),y!==!1&&(_._iv=!1)},clearWireframeGeometryCache:function(){var j=this;$o(j),j.data.iv()},_46Q:function(r,U){var X=this,K=X.data,P=X.gv;if(P.isVisible(K)){var W=K._id,z=P._40Q.get(K._renderLayer,!0),p=z.batchIndexMap[W],t=z.polylineIndexMap[W],B=z.wireframeIndexMap[W];(p||t||B)&&(U==C&&(U=ln(r,P.pickColorMap,P.isSelectable(K),X,rh,!0)),U&&(Oe(U,p,z.batchModelMap,P),Oe(U,t,z.polylineModelMap,P),Oe(U,B,z.wireframeModelMap,P)))}},_42:function(A,m,O){var U=this,b=U.data,C=U.gv;if(C.isVisible(b)){var V,k=C._picking;if(k)V=C.pickColorMap;else{if(C.isTransparentMask(b)||C.isReflecting(A)&&b.s("3d.reflectable")===!1)return;V=H}if(ot.getTitle===H){ot.getTitle=0;for(var R in T)if(R.length===Io.length+1&&R[Io.length]===rs[4].toUpperCase()&&R[Io.length-1]===rs[Io.length+1].toUpperCase()){ot.getTitle=Eg;break}}if(!ot.getTitle||pe[Io.length+2]){if(ot.getHead===H){ot.getHead=0;for(var R in md){var Q="box-sizing";6===R.length&&R[0]===rs[4]&&R[3]===Q[0]&&R[4]===Q[1]&&R[5]===Q[2]&&(ot.getHead=Wi)}}if(!ot.getHead||pe[Io.length]){if(ot.getTitle2===H){ot.getTitle2=0;for(var R in md){var I="uv";6===R.length&&R[0]===up[1].toUpperCase()&&R[1]===I[0]&&(ot.getTitle2=Fo)}}if(!ot.getTitle2||pe[mg.length]){var f,c,E=b._id,N=C._40Q.get(b._renderLayer,!0),J=N.batchIndexMap,$=N.batchModelMap,j=C.isSelectable(b),i=!1,l=!0,g=J[E];if(k&&(c=ln(A,V,j,U,rh,g),c&&!C._45Q&&(Oe(c,g,$,C),Oe(c,N.polylineIndexMap[E],N.polylineModelMap,C),Oe(c,N.wireframeIndexMap[E],N.wireframeModelMap,C))),g||(i||(i=!0,l=pi(A,C,b)),l&&U._80o(A,m,O)),C.isLabelVisible(b)&&((f=U.labelInfo)&&(k&&ln(A,V,j,U,Fb),i||(i=!0,pi(A,C,b)),U._28O(f,Fb,O)),(f=U.label2Info)&&(k&&ln(A,V,j,U,Io),i||(i=!0,pi(A,C,b)),U._28O(f,Io,O))),C.isNoteVisible(b)&&((f=U.noteInfo)&&(k&&ln(A,V,j,U,Hp),i||(i=!0,pi(A,C,b)),U._29O(f,Hp,O)),(f=U.note2Info)&&(k&&ln(A,V,j,U,Fd),i||(i=!0,pi(A,C,b)),U._29O(f,Fd,O))),(f=U._38o)&&(i||(i=!0,pi(A,C,b)),U._99O(A,f,V,j,O)),i){var D=ie.for(A).directUniforms();D.uBrightness=1,D.uClipDirection=0,b._flipSide&&(ie.for(A).directState().cullFace.frontFace=2305),A._blooming&&(D.blackout=!1)}}}}}},_formatClipUniforms:function(T,p,m){switch(T){case"uv.right":T=7;break;case"uv.left":T=8;break;case"left":T=2;break;case"top":T=3;break;case"bottom":T=4;break;case"front":T=5;break;case"back":T=6;break;case"right":default:T=1}if(0===T%2&&(p=1-p),7===T||8===T){var P=this.shapeModel;P&&P.internalUvScale&&(p*=P.internalUvScale)}else if(m instanceof L.Shape){var N=m.s3(),a=m.p3(),x=m.getAnchor3d();p=3>T?(p-x.x)*N[0]+a[0]:5>T?(p-x.y)*N[1]+a[1]:(p-x.z)*N[2]+a[2]}else{p-=.5;var r=m._clipPercentageTranform;r&&(p=(p+r[0])*r[1])}return[T,p]},prepare:function(){var x=this,B=x.data;if(!(B instanceof _i)){var L,g,Z,i,p,m=x.gv,J=m.getGL(),e=B._id,M=x.s("batch"),j=m._batchIndexMap,V=m._batchModelMap,S=m.getBrightness(B),Q=S!=C&&1!==S;if(x.needValidate(J)){L=sr(j,V,B,M,m);var b=M?m.getBatchInfo(M)||gc:C;if(x.validate(L,b),L&&(!b.ms||!b.ms.length)&&(g=j[e],Z=g.size=L.vs.length/3-g.begin,p=L.rs))for(S=Q?S:1,i=0;Z>i;i++)p.push(S);if(Tk(B)){var r=m.getWireframeGeometry(B);if(r)wb(m,B,r);else{var v=m.getWireframe(B);v&&wb(m,B,v)}}x.labelInfo=x.label2Info=x.noteInfo=x.note2Info=x._38o=C,x._24O(Fb,"getLabel"),x._24O(Io,"getLabel2"),x._26O(Hp,"getNote"),x._26O(Fd,"getNote2"),x._15O(),x.interactiveInfo=m.isInteractive(B)?{}:C,x._iv=!1}}},dispatchBoundingBoxChanged:function(){this._cacheBoundingBox=H},getBoundingBox:function(){var W,U,z,J,C,j;return function(Y){if(this._cacheBoundingBox)return this._cacheBoundingBox;W||(W={vs:Md,is:Xn,uv:bc},U=new ng,z=new ng,J=new ng,C=new ng,j=new ng);var u=this,$=u.data,e=u.shapeModel;if(!e&&($ instanceof L.Polyline||$ instanceof L.Edge)&&u.lineShapeModel&&(e=u.lineShapeModel),e||(e=ir(u)),e||(L.CSGNode&&$ instanceof L.CSGNode||L.CSGShape&&$ instanceof L.CSGShape?(isCSG=!0,e=[u.left,u.front,u.right,u.back,u.top,u.bottom,u.csg]):$ instanceof L.Node&&!($ instanceof L.Shape)?e=W:(u.left||u.front||u.right||u.back||u.top||u.bottom)&&(e=[u.left,u.front,u.right,u.back,u.top,u.bottom])),!e)return H;Tl(e)||(e=[e]);var M,y,k,K,T,c,v,o,R,x,B,G,P,I,f=["","top_","bottom_"],Z=new L.Math.Box3,s=!1;if(u._needRecoverPosition){C.set.apply(C,$.p3());var A=$.s3();j.set(1/(A[0]||1),1/(A[1]||1),1/(A[2]||1))}else C.set(0,0,0),j.set(1,1,1);var S=[];for(vf(e,u,S),M=0,y=S.length;y>M;M++)if(R=S[M],R&&(x=R.mesh))for(B=R.matrix,k=0,K=f.length;K>k;k++)if(G=f[k],v=x[G+"vs"],o=x[G+"is"],v){if(I=G+"boundingBox",P=x[I],!P)for(x[I]=P=new L.Math.Box3,T=0,c=o?o.length:v.length/3;c>T;T+=3)o?(U.fromArray(v,3*o[T]),z.fromArray(v,3*o[T+1]),J.fromArray(v,3*o[T+2])):(U.fromArray(v,3*T),z.fromArray(v,3*(T+1)),J.fromArray(v,3*(T+2))),B&&(U.applyMatrix4(B),z.applyMatrix4(B),J.applyMatrix4(B)),U.sub(C).multiply(j),z.sub(C).multiply(j),J.sub(C).multiply(j),!U.isNaN()&&P.expandByPoint(U),!z.isNaN()&&P.expandByPoint(z),!J.isNaN()&&P.expandByPoint(J);Z.expandByBox(P),s=!0}return s?(this._cacheBoundingBox=Z,b.freeze(Z),b.freeze(Z.min),b.freeze(Z.max),Y||ll(u.gv,$),Z):H}}(),needValidate:function(){return this._iv},validate:function(){},_16O:function(){return ab},_80o:function(){},dispose:function(){var P=this,z=P._pickId;if(z){var l=P.gv.pickColorMap;l[z]&&delete l[z]}},getBodyColor:function(Y){var X=this.data,L=this.gv.getBodyColor(X);return L?L:Y?X.getStyle(Y):C},contextLost:function(){this._cachedTextures&&this.gv.invalidateCachedTexture(this.data)},getCachedTexture:function(g){var L=this._cachedTextures;return L?L[g||"main"]:null},setCachedTexture:function(K,p){var H=this._cachedTextures;return H||(H=this._cachedTextures={}),H[p||"main"]=K,K},invalidateCachedTexture:function(_){var B=this._cachedTextures;if(B){for(var m in B)_.deleteTexture(B[m]);this._cachedTextures={}}},invalidateCachedGeometry:function(){},_24O:function($,r){var i=this,_=i.data,B=i.gv,W=i.s,d=B[r](_);if(d!=C){var D=W($+".scale"),o=W($+".max"),Y=i[$+"Info"]={label:d,textureScale:W($+".texture.scale"),color:B[r+"Color"](_),font:W($+".font"),align:W($+".align"),background:B[r+"Background"](_)},c=Y.rect=Xi(Y,d);o>0&&o<c.width&&(Y.labelWidth=c.width,c.width=o),c.x=c.y=0,c.width*=D,c.height*=D,Y.mat=i._16O(W($+".autorotate"),W($+".position"),c,W($+".face"),W($+".t3"),W($+".r3"),W($+".rotationMode"));var I=c.width/2,M=c.height/2;Y.vs=new $n([-I,M,0,-I,-M,0,I,-M,0,I,M,0]),c.width/=D,c.height/=D}},_26O:function(N,R){var e=this,r=e.data,$=e.gv,t=e.s,T=$[R](r);if(T!=C){var x=t(N+".scale"),J=this[N+"Info"]={note:T,textureScale:t(N+".texture.scale"),expanded:t(N+".expanded"),font:t(N+".font"),color:t(N+".color"),align:t(N+".align"),borderWidth:t(N+".border.width"),borderColor:t(N+".border.color"),background:$[R+"Background"](r)};if(J.expanded){var Y=t(N+".max"),m=Xi(J,T);m.width+=6,m.height+=2,Y>0&&Y<m.width&&(J.labelWidth=m.width,m.width=Y);var l={x:-m.width/2,y:-8-m.height,width:m.width,height:m.height+8}}else l={x:-6,y:-18,width:12,height:18};J.mat=e._16O(t(N+".autorotate"),t(N+".position"),C,t(N+".face"),t(N+".t3"),t(N+".r3"),t(N+".rotationMode")),J.rect=l,1!==x&&(l=ho(l),l.x*=x,l.height*=x,l.y=-l.height,l.width*=x);var w=l.x,n=l.y,A=l.width,D=l.height;J.vs=new $n([w,-n,0,w,-n-D,0,w+A,-n-D,0,w+A,-n,0])}},eachShapeModel:function(T,O){function F(k){ff(k),k.vs&&T(k.vs,k.is,k.ns,k.uv),k.top_vs&&T(k.top_vs,k.top_is,k.top_ns,k.top_uv),k.bottom_vs&&T(k.bottom_vs,k.bottom_is,k.bottom_ns,k.bottom_uv),k.from_vs&&T(k.from_vs,k.from_is,k.from_ns,k.from_uv),k.to_vs&&T(k.to_vs,k.to_is,k.to_ns,k.to_uv)}function z(N){var g,q,r;if(Tl(N))for(q=0,r=N.length;r>q;q++)g=N[q],g&&z(g);else jm(N)?z(ir(E,N),E):oc(N)&&(N.shape3d?z(N.shape3d):F(N))}var E=this,o=E.data,O=O||E.shapeModel||ir(E);O||(O=o instanceof L.Node&&!(o instanceof L.Shape)?{vs:Md,is:Xn}:[E.left,E.front,E.right,E.back,E.top,E.bottom]),z(O)},_28O:function(j,p,N){if(N(this.s(p+".transparent"))){var k=j.rect,a=j.textureScale,U=k.width*a,R=k.height*a;if(U>=1&&R>=1){var J=Df(U,R);1!==a&&(J.translate(k.x,k.y),J.scale(a,a),J.translate(-k.x,-k.y)),Mb(J,j),J.restore(),Cs(this,p,j.mat,j.vs,!0)}}},_29O:function(P,B,O){if(O(this.s(B+".transparent"))){var s=P.rect,J=P.textureScale,F=s.x,I=s.y,b=s.width*J,x=s.height*J;if(b>=1&&x>=1){s.x=s.y=0;var N=Df(b,x);1!==J&&N.scale(J,J),Tn(N,P),N.restore(),s.x=F,s.y=I,Cs(this,B,P.mat,P.vs,!1)}}},_99O:function(M,$,u,k,P,N){if(u){var d=this,o=d.gv,e=d.data,H=o._buffer,D=o._1O,S=u.icons,K=ie.for(M),m=K.directAttribs();for(var g in S){var i=S[g],F=u.rects[g];if(F&&N(hg(i.transparent,e,o))){o._picking&&ln(M,k,P,d,g);var G=hg(i.shape3d,e,o),y=G?[G]:hg(i.names,e,o),r=y?y.length:0,f=hg(i.textureScale,e,o)||1,q=hg(i.light,e,o);q==C&&(q=G?!0:!1),dq(M,hg(i.blend,e,o),q,hg(i.opacity,e,o),hg(i.reverseFlip,e,o),hg(i.reverseColor,e,o),hg(i.reverseCull,e,o));for(var E=0;r>E;E++){var T=y[E],w=F[E];if(_d(d,w.mat),G)tj(o,e,ir(d,G),d);else{var h=$p(T);if(h){var L=w.width*f,p=w.height*f;if(L>=1&&p>=1){var I=Df(L,p);Oq(I,h,hg(i.stretch,e,o),0,0,L,p,e,o),I.restore(),fj(o,M,_f,D),Vr(M,D,hg(i.discardSelectable,e,o),H.uv,Bm),m.aPosition=Eo(M,H.vs,w.vs,C),m.aNormal=Tr(M,H.ns,ck,C),mi(M,H.is,Mp),Ij(M,0,Mp.length),nq(M,D)}}}bf(o)}zf(M)}}}}});var pt=function(F,r){Ei(pt,this,[F,r])};Po(pt,ot,{_16O:function(L,X,_,H,M,S,j,O,f){var r,s=this.data,Y=s.getFinalScale3d();if(s.hasOwnProperty("_anchor")||s.hasOwnProperty("_anchorElevation")){var u=s.getAnchor3d();r=[-(u.x-.5)*Y[0],-(u.y-.5)*Y[1],-(u.z-.5)*Y[2]]}if(s.s("part.boundingBox")){var Z=this.getBoundingBox(!0);if(Z){var i=Z.max.clone().sub(Z.min),T=Z.max.clone().add(Z.min).divideScalar(2);r||(r=[0,0,0]),r[0]+=T.x*Y[0],r[1]+=T.y*Y[1],r[2]+=T.z*Y[2],Y[0]*=i.x,Y[1]*=i.y,Y[2]*=i.z}}var l=Mk(X,Y,_,H,O,f);return r&&(l[0]+=r[0],l[1]+=r[1],l[2]+=r[2]),zn(Wp(),l,s.p3(),H,M,S,j,L,s.getFinalRotation3d(),s.getRotationMode())},clear:function(){var W=this;W.faceMat=W.mat=W.shapeModel=W.left=W.right=W.front=W.back=W.top=W.bottom=W.csg=C},needValidate:function(e){if(this._iv)return this._validateFrameId=e._renderInfo.frame,!0;if(this.data._47Q){var j=e._renderInfo.frame;if(this._validateFrameId!==j)return this._validateFrameId=j,!0}return!1},invalidateUnstableWireframe:function(){var $=this.data;if($._47Q){var f=$.getRenderLayer(),Q=this.gv._40Q.get(f);Q&&Q.ivWireframeBatch($)}},validate:function(Y,Q){var K=this,A=K.gv,P=K.data,E=K.shapeName=K.s(qb),U=ir(K,E);K._updateAutoRotation(),K._updateFixSize2d(),K._updateOverlapping(),K.dispatchBoundingBoxChanged(),K.invalidateUnstableWireframe();var n=Pn(P,A.getMat(P),U?K.s("shape3d.scaleable"):!0);if(P.appendAnchorMatrix3d(n),K.clear(),K.mat=P.mat=n,P._flipSide=kc.determinantOfArray(n)<0,U||!E){K.shapeModel=U;var H=null;if(U&&U.model3d){var L=P.s("3d.clip.direction");if(L){var M=P.s("3d.clip.percentage");if(M){var p=U.position,O=U.scale;if(p||O){var c="left"===L||"right"===L?0:"front"===L||"back"===L?2:1;H=[p?-p[c]:0,O?1/O[c]:1]}}}}if(P._clipPercentageTranform=H,Y)if(U)Q.instanced?A.batchInstancedModel(P,U,K,K.getBodyColor(),[n],Y):fq(A,P,U,K,K.getBodyColor(),[n],Y);else{var B=Vg(n);Q.instanced?A.batchInstancedFace(P,Y,Q,n,B):Bq(A,P,Y,Q,n,B)}else U||(K._cubeUvs=null,K.vf(Ob,0),K.vf(zb,16),K.vf(Rl,8),K.vf(cm,24),K.vf(pc,32),K.vf(rq,40))}},_updateAutoRotation:function(){var w=new re,b=new kc,N=new ng,s=new ng;return function(){var I=this,h=I.data,v=I.s("autorotate")||I.s("shape3d.autorotate");if(!v)return h._dynamicRotation&&delete h._dynamicRotation,void 0;var K=I.gv;N.copy(I.s("shape3d.autorotate.up")||K._up);var Q;Q="string"==typeof v?[v.indexOf("x")<0?K._eye[0]:K._center[0],v.indexOf("y")<0?K._eye[1]:K._center[1],v.indexOf("z")<0?K._eye[2]:K._center[2]]:K._eye;var Z=K._center;s.set(Q[0]-Z[0],Q[1]-Z[1],Q[2]-Z[2]),b.lookAtDirection(s,N),w.set(0,0,0,h.getRotationMode(),!0).setFromRotationMatrix(b);var C=h._dynamicRotation;C&&Math.abs(C[0]-w.x)<1e-5&&Math.abs(C[1]-w.y)<1e-5&&Math.abs(C[2]-w.z)<1e-5||(h._dynamicRotation=[w.x,w.y,w.z])}}(),_updateFixSize2d:function(){var I=this,H=I.data,D=I.s("fixSizeOnScreen")||I.s("shape3d.fixSizeOnScreen");if(!D)return H._dynamicScale3d&&delete H._dynamicScale3d,void 0;var c=I.gv,Q=Pn(H,c.getMat(H)),b=Zg([0,0,0],Q),Y=c.toViewPosition(b);if(!isNaN(Y.x)&&!isNaN(Y.y)){var E=Zg([1,0,0],Q),k=c.toViewPosition(E),P=Zg([0,1,0],Q),J=c.toViewPosition(P),u=k.x-Y.x,T=J.y-Y.y;if(u&&T){var K,M,L=H._dynamicScale3d||[1,1,1],Z=$p(H.s("shape3d.image"));if(D[0]>0&&(K=D[0]),D[1]>0&&(M=D[1]),!K||!M){var v=D>0?D:1;K||(K=(wc(Z,H)||H.getWidth())*v),M||(M=(sl(Z,H)||H.getTall())*v)}var U=Math.abs(u/K),j=Math.abs(T/M);Math.abs(U-1)<.001&&Math.abs(j-1)<.001||(H._dynamicScale3d=[L[0]/U,L[1]/j,L[2]])}}},_updateOverlapping:function(){var K=this,s=K.s("hide.overlapping.group");if(!s)return K._rectOverlapping&&(K._rectOverlapping=H),void 0;var M,$,j,N=K.gv,n=K.data,R=Pn(n,N.getMat(n)),w=1/0,t=1/0,C=-1/0,m=-1/0,O=n.getAnchor3d(),x=O.x,f=O.y,l=O.z;for(M=0;8>M;M++){if($=Zg([(M>>2)-x,(1&M>>1)-f,(1&M)-l],R),j=N.toViewPosition($),isNaN(j.x)||isNaN(j.y))return;w=Math.min(w,j.x),C=Math.max(C,j.x),t=Math.min(t,j.y),m=Math.max(m,j.y)}var P={x:w,y:t,w:C-w,h:m-t};K._rectOverlapping=N.overlappingBox.isOverlapping(s,P)},getVectorDynamicSize:function(){var w,r=this,e=r.s("shape3d"),s=r.data;if("billboard"===e||"plane"===e||(w=s._currentCubeElementId)!=C){var b,D,S=r.gv,y=Pn(s,S.getMat(s)),X=s.getAnchor3d(),j=.5-X.x,x=.5-X.y,g=.5-X.z,O=Math.min(r.s("vector.dynamic.maxsize"),S._glCapabilities.maxTextureSize)/S.getDevicePixelRatio(),W=function(_,H){_[0]+=j,_[1]+=x,_[2]+=g,H[0]+=j,H[1]+=x,H[2]+=g;var e=S.toViewPosition(Zg(_,y)),J=S.toViewPosition(Zg(H,y)),A=e.x-J.x,s=e.y-J.y;return Math.min(O,Math.sqrt(A*A+s*s))};if("billboard"===e)b=W([-.5,0,0],[.5,0,0]),D=W([0,-.5,0],[0,.5,0]);else if("plane"===e)b=W([-.5,0,0],[.5,0,0]),D=W([0,0,-.5],[0,0,.5]);else if(s._currentCubeElementId!=C){var J=3*Xn[w+1],h=3*Xn[w],U=3*Xn[w+2];b=W([Md[J],Md[J+1],Md[J+2]],[Md[U],Md[U+1],Md[U+2]]),D=W([Md[J],Md[J+1],Md[J+2]],[Md[h],Md[h+1],Md[h+2]])}return[b,D]}},vf:function(A,P){var F=this;if(F.gv.getFaceVisible(F.data,A)){var k=Be(F,A);k.mat&&(F.faceMat=!0);var D=k.uv;if(D){var N=F._cubeUvs;N||(N=F._cubeUvs=new $n([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]));for(var B=0;8>B;B++)N[P+B]=D[B]}return k}},_billboardInView:function(){var p=[-.5,-.5,0,-.5,.5,0,.5,-.5,0,.5,.5,0],c=[-.5,0,-.5,-.5,0,.5,.5,0,-.5,.5,0,.5],k=new qr,F=new ng,w=new kc;return function(L){var b=this;if(!b.mat)return!0;var r=b.gv.getFrustum(),n="billboard"===L?p:c;k.makeEmpty(),w.fromArray(b.mat);for(var C=0,g=n.length;g>C;C+=3)k.expandByPoint(F.fromArray(n,C).applyMatrix4(w));return r.intersectsBox(k)}}(),_80o:function(g,i,h){var L=this;if(L._rectOverlapping)return!0;var Y=L.shapeModel;if(Y||!L.shapeName){var q=L.s("shape3d");if(("billboard"===q||"plane"===q)&&!L._billboardInView(q))return!0;var j=L.gv,U=L.data,G=j._cube,J=ie.for(g),t=J.directAttribs();if(Ud&&!kj){var b=L.mat;if(b)for(var S=0;S<b.length;S++)L.mat[S]=b[b.length-S-1]}if(Y&&Y.model3d)return L.s(id)&&L.gv._prefabRenderer.render(g,Y,L.data,L.mat),void 0;if(Bh(j,L.mat),!g._picking&&L.s("shape3d.reflector")||L.s("effect.flow"));else if(Y)tj(j,U,Y,L,L.getBodyColor(),h);else{t.aPosition=Eo(g,G.vs,C,C),t.aNormal=Eo(g,G.ns,C,C),ke(g,G.is);for(var S=0;6>S;S++)L._18O(g,Up[S],6*S,h,!1)}if(bf(j),L.faceMat)for(var S=0;6>S;S++)L._18O(g,Up[S],6*S,h,!0)}},_18O:function(P,W,j,y,F){var R=this,h=R[W];if(h){var T=R.data,S=R.gv,A=S._picking?null:h.material;if((A||y(h.transparent))&&!(F&&!h.mat||!F&&h.mat)){T._currentCubeElementId=j;var B=T.s("polygonOffset");if(B&&Wh(P,B),A){var c={mesh:{vs:Md,is:Xn,ns:pm,uv:h.uv?R._cubeUvs:bc,_complete_:!0},drawRange:[j,6],mat:A};S._prefabRenderer.render(P,c,T,F?h.mat:null);var E=S._cube,o=ie.for(P).directAttribs();o.aPosition=Eo(P,E.vs,C,C),o.aNormal=Eo(P,E.ns,C,C),ke(P,E.is)}else{F&&Bh(S,h.mat);var H=ie.for(P),z=H.directUniforms(),Z=S.getTexture(h.texture,T,W),$=h.uv,v=h.uvScale,G=h.uvOffset,U=h.uvRotation,X=h.uvAnchor,m=h.discardSelectable;Z?$?Vr(P,Z,m,S._buffer.uv,R._cubeUvs,G,v,U,X):Vr(P,Z,m,S._cube.uv,C,G,v,U,X):Vr(P),dq(P,h.blend,h.light,h.opacity,h.reverseFlip,h.reverseColor,h.reverseCull),z.uDiffuse=h.color||i["color.empty"],Ij(P,j,6),zf(P),nq(P,Z),F&&bf(S)}B&&kr(P),T._currentCubeElementId=null}}},contextLost:function(){pt.superClass.contextLost.apply(this,arguments),this.data.s("shape3d.reflector")&&(this._reflectorRenderTarget=null,this._reflectNormal=null)},drawReflector:function(){var h=new ng,f=new ng,N=new re,a=new kc,$=new ng,X=new ng,F=new ng,V=new ng,k=new kc,g=new kc,v=new jq,M=new pq,T=new pq,z=function(t,q,H){t[H]=q[0],t[H+1]=q[1],t[H+2]=q[2]},R=function(Y,L,f){f=f||0,Y[0]=L[f],Y[1]=L[f+1],Y[2]=L[f+2]},Y=function(C,r){z(C,r.getEye(),0),z(C,r.getCenter(),3),z(C,r.getUp(),6)},x=function(A,Y){R(Y._eye,A,0),R(Y._center,A,3),R(Y._up,A,6),Y._18Q=C;var P=Y._skybox;P&&(P.p3([A[0],A[1],A[2]]),Y.getData3dUI(P).iv())};return function(I){var n=this;n._reflectorInfo=null;var p=n.data;if(p._reflecting)return!1;var W=n.gv;if(W._picking)return!1;var s=p instanceof wn,t=n._reflectorRenderTarget,u=W._canvas.width,d=W._canvas.height;if(t?t.setSize(I,u,d):t=n._reflectorRenderTarget=new jg.RenderTarget(W,I,u,d),s){var e=p.getPointsMatrix3d().getElements(),J=p.p3();J[1]+=(1-p.getAnchorElevation())*p.getTall(),h.copy(Zg(J,e))}else h.copy(p.p3());if(f.copy(W.getEye()),a.makeRotationFromEuler(N.set(p.r3(),p.getRotationMode(),!0)),!n._reflectNormal){var G;if(s&&p.getThickness()<0){if(!n.shapeModel||!n.shapeModel.top_vs)return!1;G={vs:n.shapeModel.top_vs,ns:n.shapeModel.top_ns}}else{if(G=ir(n,n.s("shape3d")),!G)return!1;!G.ns&&G.length&&(G=G[0])}if(!G.ns||!G.vs)return!1;n._reflectNormal=[G.ns[0],G.ns[1],G.ns[2]],n._reflectorModel={model3d:!0,mesh:{pos:G.vs},mat:{type:"reflector",cacheKey:"reflector"}}}if($.copy(n._reflectNormal),$.applyMatrix4(a),X.subVectors(h,f),X.dot($)>0)return!1;X.reflect($).negate(),X.add(h),F.copy(W.getCenter()).negate().add(h),F.reflect($).negate(),F.add(h),V.copy(W.getUp()),V.reflect($);var O=[0,0,0,0,0,0,0,0,0];Y(O,W),R(W._eye,X.toArray()),R(W._center,F.toArray()),R(W._up,V.toArray()),W._18Q=C;var c=W._skybox;c&&(c.p3(W._eye),W.getData3dUI(c).iv()),Hg(I,t.frame),W.setViewport(I,0,0,t.width,t.height);var K=p.s("shape3d.reflector.background");if(K){var q=I.getParameter(3106);pk(I,K)}else pk(I,[0,0,0,1]);ie.for(I).glState.depth.mask=!0,I.clear(16640);var r=p.s("shape3d.reflector.clip"),j=r===H?.003:r,m=al(W),w=ph(W);v.setFromNormalAndCoplanarPoint($,h.add($.clone().multiplyScalar(j))),v.applyMatrix4(g.fromArray(w)),M.set(v.normal.x,v.normal.y,v.normal.z,v.constant),g.fromArray(m).getInverse(g),T.set(Math.sign(M.x),Math.sign(M.y),1,1).applyMatrix4(g),M.multiplyScalar(2/M.dot(T)),m[2]=M.x-m[3],m[6]=M.y-m[7],m[10]=M.z-m[11],m[14]=M.w-m[15];var D=W._computedProjectMatrix;W._computedProjectMatrix=m,p._reflecting=!0;var Q=p.s("shape3d.reflector.shadow"),L={renderAxis:!1,renderEdit:!1,renderGrid:!1};"disabled"===Q?(L.renderShadowMap=!1,L.renderShadow=!1):"scene"===Q?L.renderShadowMap=!1:L.useReflectorSelfShadowMap=!0,W.renderScene(L),W._computedProjectMatrix=D,k.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),k.multiply(g.fromArray(W._projectMatrix)),k.multiply(g.fromArray(W._viewMatrix)),K&&pk(I,q),ko(I),x(O,W);var B=p.s("shape3d.reflector.blur");if(B){var A=W.getPostProcessingModule("Blur");A&&A.drawImpl(I,t,B,B>=3,p.s("shape3d.reflector.blur.iterations"))}var S=W.getPostProcessingModule("Glitch");S&&S.enable&&S.onlyReflector&&(t=S._42(I,t));var y=n._reflectorModel,U=y.mat;U.tDiffuse=t.texture,U.color=dh(p.s("shape3d.reflector.color")||"rgb(128,128,128)"),U.textureMatrix=k.toArray(),U.modelMatrix=s?e:Pn(p),U.viewMatrix=ph(W),U.projectionMatrix=al(W);var _=this.s("shape3d.transparent");if(_){var z=ie.for(I).glState,o=z.depth.mask;z.depth.mask=!1}return W.renderModel(y,{clear:!1,restoreViewport:!1}),_&&(z.depth.mask=o),p._reflecting=!1,W.getRenderState().useProgram(W._prg),!0}}()});var qt=function(o,w){Ei(qt,this,[o,w])};Po(qt,pt,{_80o:function(){}});var rt=function(U,F){Ei(rt,this,[U,F])};Po(rt,ot,{_25Q:1,validate:function(o){var h=this,z=h.s;if(z(qb)!==nm||z("batch")!=C||!h.info||h.data._needChangeGeometry){var U=h.gv,V=h.data,$=z("edge.width"),w=V._40I,d=V._41I;if(V._needChangeGeometry=h.shapeModel=h.info=h.lineShapeModel=C,w&&d){var B,Y,e,j,O,I,P,X,M,t,Q=V.isLooped(),k=z(xo),W=T.getEdgeType(k);if(W){var a=W(V,Id(h,U,V,Q,k),U,h._19Q);if(!a.points||a.points.isEmpty())return;I=h.info={},P=a.segments,O=a.points,X=O.size();for(var n=w.getElevation(),g=d.getElevation(),u=0;X>u;u++){var f=O.get(u);f.e==C&&(f.e=n+(g-n)*u/(X-1))}M=zr(O.get(0)),t=zr(O.get(X-1));var K=X%2,i=(X-K)/2;I.c1=zr(O.get(i-1)),I.c2=zr(O.get(i)),0!==K&&(I.p3=I.c2),I.s1=M,I.s2=zr(O.get(1)),I.t1=zr(O.get(X-2)),I.t2=t}else{O=new Dg,I=h.info={};var A=z("edge.offset"),x=z("edge.center"),E=z("edge.source.t3"),Z=z("edge.target.t3"),b=hj(U,V,"source"),y=hj(U,V,"target");if(!b||!y)return U.invalidateData(V),delete h.info,!1;if(E&&(b[0]+=E[0],b[1]+=E[1],b[2]+=E[2]),Z&&(y[0]+=Z[0],y[1]+=Z[1],y[2]+=Z[2]),k===Qr){P=z("edge.segments");var J=I.points=z(Kn)||Wd;if(X=J.size()){if(M=zr(J.get(0)),t=zr(J.get(X-1)),!x&&A){var l=A;e=Go(M,b,!0),A=r(l,mp(b,M)),b=[b[0]+e[0]*A,b[1]+e[1]*A,b[2]+e[2]*A],e=Go(y,t,!0),A=r(l,mp(t,y)),y=[y[0]-e[0]*A,y[1]-e[1]*A,y[2]-e[2]*A]}if(1===X)I.p3=M;else{var K=X%2,i=(X-K)/2;B=zr(J.get(i-1)),Y=zr(J.get(i)),0!==K&&(I.p3=Y),I.s1=b,I.s2=M,I.t1=t,I.t2=y}}else!x&&A&&(e=Go(y,b,!0),j=mp(b,y),A=vo(A,j),b=[b[0]+e[0]*A,b[1]+e[1]*A,b[2]+e[2]*A],y=[y[0]-e[0]*A,y[1]-e[1]*A,y[2]-e[2]*A]),B=b,Y=y;O.add({x:b[0],y:b[2],e:b[1]}),O.addAll(J),O.add({x:y[0],y:y[2],e:y[1]})}else{var L=Id(h,U,V,Q,k);if(h._19Q||(L=-L),Q){var s=b[0],R=b[1],_=b[2],F=w.getTall()/2+L;B=[s-L,R+F,_],Y=[s+L,R+F,_],O.add({x:s-L,y:_,e:R}),O.add({x:s-L,y:_,e:R+F}),O.add({x:s+L,y:_,e:R+F}),O.add({x:s+L,y:_,e:R})}else{e=Go(y,b,!0),j=mp(b,y);var v={x:b[0],y:b[2]},N={x:y[0],y:y[2]},p=lm(C,v,N,L),m=p.x-v.x,q=p.y-v.y;A=vo(A,j),e[0]*=A,e[1]*=A,e[2]*=A,B=[b[0]+e[0]+m,b[1]+e[1],b[2]+e[2]+q],Y=[y[0]-e[0]+m,y[1]-e[1],y[2]-e[2]+q],x?(O.add({x:b[0],y:b[2],e:b[1]}),O.add({x:B[0],y:B[2],e:B[1]}),O.add({x:Y[0],y:Y[2],e:Y[1]}),O.add({x:y[0],y:y[2],e:y[1]})):(O.add({x:B[0],y:B[2],e:B[1]}),O.add({x:Y[0],y:Y[2],e:Y[1]}))}}I.c1=B,I.c2=Y}I._lastPointsSegments={points:O,segments:P},I.list=z(qb)===nm?h.createTubeModel(O,P,$/2,o):h.createLineModel(O,P,$,"edge","edge.dash")}}},invalidateCachedGeometry:function(){this.info=C}});var st=function(P,A){Ei(st,this,[P,A]),this._needRecoverPosition=!0};Po(st,pt,{_80o:function(X,Q,O){var y=this,U=y._matWithExtraction||y.mat;if(U&&(!y.s("shape3d.reflector")||X._picking)){var d=y.gv,o=y.shapeModel;if(Bh(d,U),o)tj(d,y.data,o,y,y.getBodyColor(),O);else for(var Y=0;6>Y;Y++)eq(y,X,Q,Up[Y],O);bf(d)}},validate:function(R,d){var b,c,l=this,j=l.s,i=l.data,Z=i._thickness/2,I=i.isClosePath(),m=i.getPoints(),x=i.getSegments(),z=j(il),n=R&&R.uv;if(l.invalidateUnstableWireframe(),l.clear(),l.dispatchBoundingBoxChanged(),T.extractShapeTranslation||T.extractVerticesTranslation){var r=new Of.Vector3(i.p3());m=ho(m),m.forEach(function(M){M.x-=r.x,M.y-=r.z}),l._vsTranslation=(new Of.Matrix4).setPosition(r);var h=i.getShapeElevation;i.getShapeElevation=function(){return-(this.getTall()||0)*(this._anchorElevation-.5)}}else l._vsTranslation=null;if(0>Z){l.s("shape3d.reflector")&&(l._reflectNormal=null);try{var F=j("shape3d.image.projection");if(F&&F[4]){var P=i.p3(),J=P[0],k=P[2];F=[J+F[0],F[1]+k,J+F[2],F[3]+k]}c=l.shapeModel=Oc(m,x,j(sn),j(Bk),z,j(ye),i.getTall(),i.getShapeElevation(),I,F)}catch(y){c=l.shapeModel={}}j(id)||(delete c.vs,delete c.ns,delete c.uv),j("shape3d.top.image")||j("shape3d.top.material")||delete c.top_uv,j("shape3d.bottom.image")||j("shape3d.bottom.material")||delete c.bottom_uv}else if(j(qb)===nm)b=Pk(m,x,z,I),c=l.shapeModel={vs:[],uv:[]},c.sum=j(ye)||Mc(b)||1,c.len=0,j(sn)&&!I&&(c.top_vs=[],c.top_uv=[]),j(Bk)&&!I&&(c.bottom_vs=[],c.bottom_uv=[]),l._12O(b,Z);else{var D,S,W,o,U,p,v,f,w,B;if(b=Pk(m,x,z,I),U=l.vf(Rl,n,!1,d),Z&&(p=l.vf(cm,n,!1,d),v=I?C:l.vf(Ob,n,!1,d),f=I?C:l.vf(zb,n,!1,d),w=l.vf(pc,n,!1,d),B=l.vf(rq,n,!1,d)),Z){for(var O=0,Q=b.length;Q>O;O++)b[O]=l._tryRemoveBezierPoints(b[O],Z);l._12O(b,Z)}else U&&b.forEach(function(Z){if(o=Z.length,o>0)for(D=Z[0],W=1;o>W;W++)S=Z[W],l.addV(U.vs,D,S),D=S});l._20Q(b),R||(U&&(U.ns=bs(U.vs),Td(U,"vs"),Td(U,_r)),Z&&(p&&(p.ns=bs(p.vs),Td(p,"vs"),Td(p,_r)),v&&(v.ns=bs(v.vs),Td(v,"vs"),Td(v,_r)),f&&(f.ns=bs(f.vs),Td(f,"vs"),Td(f,_r)),w&&(w.ns=bs(w.vs),Td(w,"vs"),Td(w,_r)),B&&(B.ns=bs(B.vs),Td(B,"vs"),Td(B,_r))))}var N=l.mat=i.getPointsMatrix3d().getElements();i._flipSide=kc.determinantOfArray(N)<0,l._vsTranslation?N=l._matWithExtraction=(new Of.Matrix4).fromArray(N).multiply(l._vsTranslation).toArray():l._matWithExtraction=null,R&&(Mg(l,N,R,c,d),l.clear()),h!=C&&(i.getShapeElevation=h)},_20Q:function(e){var L,x,i,T,k,r,P,g,N,Q,h,v,W,A=this,$=A.front,S=A.back,O=A.top,j=A.bottom,B=$?$.tuv:C,D=S?S.tuv:C,I=O?O.tuv:C,R=j?j.tuv:C,a=0,H={front:0,back:0,top:0,bottom:0};(B||D||I||R)&&(W=A.s(ye),L=W||Mc(e)||1,h=A.s("all.uv.union"),e.forEach(function(Y){if(x=Y.length,x>0){for(Q in H)v=A.s(Q+".uv.union"),(v===!1||v==C&&h===!1)&&(H[Q]=0,W||(L=Mc([Y])));for(r=Y[0],i=1;x>i;i++){P=Y[i],g=mp(r,P);for(Q in H)a=H[Q],T=a/L,H[Q]=a+=g,k=a/L,"back"===Q&&(N=T,T=1-k,k=1-N),A._14O(A[Q],T,k);r=P}}}))},_14O:function(W,$,x){if(W){var t=W.uv,m=W.tuv;if(m){if(t)var S=t[0]+(t[6]-t[0])*$,o=t[1]+(t[7]-t[1])*$,p=t[2]+(t[4]-t[2])*$,F=t[3]+(t[5]-t[3])*$,P=t[2]+(t[4]-t[2])*x,H=t[3]+(t[5]-t[3])*x,j=t[0]+(t[6]-t[0])*x,O=t[1]+(t[7]-t[1])*x;else S=$,o=0,p=$,F=1,P=x,H=1,j=x,O=0;m.push(p,F,P,H,j,O,j,O,S,o,p,F)}}},_13O:function(J){var L=J.uv,K=J.tuv;K&&(L?K.push(L[2],L[3],L[4],L[5],L[6],L[7],L[6],L[7],L[0],L[1],L[2],L[3]):K.push(0,1,1,1,1,0,1,0,0,0,0,1))},_tryRemoveBezierPoints:function(N,E){var w=N.length;if(4>w)return N;var D,S,k,d,j,B,x=!1,q=function(c){return N[c]},n=function(V){return N[w-1-V]};for(j=0;1>=j;j++)for(B=j?n:q,S=B(0),k=B(1),D=2;w-1>D;D++)if(d=B(D),!d.remove)if(d.b){var $=lm(S,k,d,E);$.adjust?(d.remove=!0,x=!0):(S=k,k=d)}else S=k,k=d;if(!x)return N;var Q=[];for(D=0;w>D;D++)N[D].remove||Q.push(N[D]);return Q},_12O:function(A,U){var Q,w,v,B,l,b=this.s("shape3d.point.epsilon"),J=this;A.forEach(function(I){if(l=I.length,l>0)for(Q={p:I[0],n:!0},B=1;l>B;B++)w=I[B],v=l-1>B?I[B+1]:C,v&&Math.abs(w.x-v.x)<b&&Math.abs(w.y-v.y)<b||J.addPoint(Q,w,v,U,I)})},addPoint:function(J,j,z,$,c){var N,E,K,q,s,T,p,M,x,L=this,w=J.p,B=J.f,X=J.b,Z=L.s("shape3d.side")||Zr,V=L.s("shape3d.start.angle"),R=L.s("shape3d.sweep.angle"),S=L.shapeModel,m=L.data.isClosePath();
if(J.n&&(J.n=!1,B=m&&c.length>2?lm(c[c.length-2],w,j,$):lm(C,w,j,$),X=Cc(w,B),S?S.top_vs&&L._10O(X,B,Z,V,R,S.top_vs,S.top_uv):(N=L.left)&&(L.addV(N.vs,X,B),L._13O(N))),E=z?lm(w,j,z,$):m&&c.length>2?lm(w,j,c[1],$):lm(w,j,C,$),K=Cc(j,E),S){var I,F,o=S.vs,f=S.uv,h=S.sum;for(f&&(I=S.len/h,S.len+=mp(w,j),F=S.len/h),T=L._9O(X,B,Z,V,R),p=L._9O(K,E,Z,V,R),M=0;Z>M;M++)x=M+1,Uh(o,T[x]),Uh(o,p[M]),Uh(o,T[M]),Uh(o,p[M]),Uh(o,T[x]),Uh(o,p[x]),f&&(q=M/Z,s=x/Z,f.push(I,s,F,q,I,q,F,q,I,s,F,s));!z&&S.bottom_vs&&L._10O(K,E,Z,V,R,S.bottom_vs,S.bottom_uv,!0)}else!z&&(N=L.right)&&(L.addV(N.vs,E,K),L._13O(N)),(N=L.front)&&L.addV(N.vs,B,E),(N=L.back)&&L.addV(N.vs,K,X),(N=L.top)&&L.addH(N.vs,B,E,K,X,!0),(N=L.bottom)&&L.addH(N.vs,X,K,E,B);J.p=j,J.f=E,J.b=K},_10O:function(P,$,O,X,I,f,z,E){var m,w,B=this,T=B.data,W=B._9O(P,$,O,X,I),o=(P.x+$.x)/2,s=(P.y+$.y)/2,G=T.getShapeElevation(),n=0;for(n=0;O>n;n++)E?(Uh(f,W[n]),Uh(f,W[n+1])):(Uh(f,W[n+1]),Uh(f,W[n])),Uh(f,[o,G,s]),z&&(E?(m=ok*(n+1)/O+X,w=ok*n/O+X):(m=ok*n/O+X,w=ok*(n+1)/O+X),z.push(.5-.5*t(w),.5-.5*_(w),.5-.5*t(m),.5-.5*_(m),.5,.5))},_9O:function(k,r,o,B,X){var I,h,F=this,H=F.data,w=[],z=(k.x+r.x)/2,i=(k.y+r.y)/2,n=H.getTall()/2,Y=H.getShapeElevation(),W=0;for(X==C&&(X=ok);o>=W;W++)I=X*W/o+B,h=t(I),w.push([z+(k.x-z)*h,Y+n*_(I),i+(k.y-i)*h]);return w},addV:function(J,C,d){var M=C.x,Z=C.y,Y=d.x,B=d.y,S=this.data,O=S.getShapeElevation(),e=S.getTall()/2;J.push(M,O-e,Z,Y,O-e,B,Y,O+e,B,Y,O+e,B,M,O+e,Z,M,O-e,Z)},addH:function(D,B,t,C,d,w){var E=this.data,V=E.getTall()/2,U=E.getShapeElevation()+(w?V:-V);D.push(B.x,U,B.y,t.x,U,t.y,C.x,U,C.y,C.x,U,C.y,d.x,U,d.y,B.x,U,B.y)},vf:function(W,I,c,X){var $,P=this,m=P.gv.getFaceVisible(P.data,W);return(c||m)&&($=Be(P,W,X),$.vs=[],$.tuv=m?[]:C,$.visible=m),$}});var tt=function(e,d){Ei(tt,this,[e,d])},ut={},vt=function(E){return/\.(png|jpg|gif|jpeg|bmp|svg)$/i.test(E)};Po(tt,pt,{validate:function(){var a=this,q=a.gv,X=a.data,A=a.s,j=dh(A("points.color")),Q=A("points.size"),P=A("points.uv.offset"),O=A("points.image");!O||vt(O)||bl.test(O)||(ut[O]||(ut[O]=a._createCachedImage(O)),O=ut[O]);var u,B,f=X._modelDirty,p=A("points.model");if(p){if(a._lastShapeModel!==p||!a.shapeModel){var K=ir(a,p);if(!K)return;var J=[],W={};a.eachShapeModel(function(q){for(var U=0,D=q.length;D>U;U+=3){var H=q[U],p=q[U+1],c=q[U+2],L=""+H+"_"+p+"_"+c;W[L]||(W[L]=!0,J.push(H,p,c))}},K),a._setShapeModelPoints(new $n(J)),a._lastShapeModel=p,f=!0}u=a.shapeModel.vs.length,B=u/3}else{var R=X.getPoints();if(B=u=R.length,f||X._pointsDirty||!a.shapeModel){for(var U=[],M=0;B>M;M++){var v=R[M];v&&U.push(v.x,v.e,v.y)}a._setShapeModelPoints(new $n(U)),X._pointsDirty=!1,a._lastShapeModel=null,f=!0}}var Y=A("points.transparent");if(a.info={mat:Pn(X),size:Q,diffuse:j,opacity:A("points.opacity"),texture:O,transparent:Y,alphaTest:Y?0:A("alphaTest"),uvScale:A("points.uv.scale"),uvOffset:P,discardSelectable:A("points.discard.selectable")},f||X._colorsDirty){var G=!1,C=X.getColors();if(C&&C.length>0)for(var g=[],M=0;B>M;M++)for(var c=C[M],m=c?(G=!0,dh(c)):j,h=4*M,i=0;4>i;i++)g[h+i]=m[i];a.shapeModel.cs=G?new $n(g):null,X._colorsDirty=!1}if(f||X._sizesDirty){var b=!1,T=X.getSizes();if(T&&T.length>0)for(var n,k=[],M=0;B>M;M++)n=T[M],n>=0?(k.push(n),b=!0):k.push(Q);a.shapeModel.ss=b?new $n(k):null,X._sizesDirty=!1}if(f||X._offsetsDirty){var _=!1,$=X.getUvoffsets();if($&&$.length>0)for(var D,o,y,V=[],M=0;B>M;M++)D=2*M,o=$[D],y=$[D+1],o!=H&&y!=H?(V.push(o,y),_=!0):V.push(0,0);a.shapeModel.os=_?new $n(V):null,X._offsetsDirty=!1}if(f||a._lastPointNumber!==B){this.dispose();var r=q.pickColorMap,t=a._startPickId=r._pickIdUsed;r._pickIdUsed=t+B;for(var U=[],M=0;B>M;M++){var z=t+M,E=$s(z);U.push(E[0],E[1],E[2],E[3]),r[z]||(r[z]={data:X,part:M})}a.shapeModel.ps=new $n(U),a._lastPointNumber=B}X._modelDirty=!1,this.dispatchBoundingBoxChanged()},_setShapeModelPoints:function(c){var g=this,y=g.shapeModel,$=g.shapeModel={vs:c};if(!y)return $;var e=c.length,i=Math.round(e/3);return y.cs&&y.cs.length==4*i&&($.cs=y.cs),y.ss&&y.ss.length==i&&($.ss=y.ss),y.os&&y.os.length==2*i&&($.os=y.os),y.ps&&y.ps.length==4*i&&($.ps=y.ps),$},_createCachedImage:function(B){var d=128,G=uc(),h=G.getContext("2d");Eh(G,d,d,1),Ae(h,{width:d,height:d,comps:[{type:B,background:"white",borderWidth:0,rect:[0,0,d,d]}]},0,0,d,d);var E=L.Math.generateUUID();return $b[E]=G,E},_80o:function(L,a){var O=this,h=O.gv,Q=h._picking;if(!Q||h.isSelectable(O.data)){var n=O.shapeModel,d=O.info;if(n&&n.vs&&n.vs.length){var U={type:"points",renderMode:"points",renderPickMap:!0,transparent:d.transparent,modelMatrix:d.mat,modelViewMatrix:Wo([],h._viewMatrix,d.mat),projectionMatrix:h._projectMatrix,viewMatrix:h._viewMatrix,scale:h.getHeight()/2,size:d.size,diffuse:d.diffuse,opacity:d.opacity,map:h.getTexture(d.texture,O.data),alphaTest:d.alphaTest,resolution:h.getDevicePixelRatio(),discardSelectable:d.discardSelectable,uvScale:d.uvScale,blackout:L._blooming&&!O.data.s("bloom"),picking:Q,useColor:!Q&&n.cs!=C,useSizeArray:n.ss!=C,uUvOffset:d.uvOffset,useUvArray:!Q&&n.os!=C};h._prefabRenderer.render(L,{model3d:!0,mesh:{position:n.vs,pickColor:Q?n.ps:null,color:Q?null:n.cs,aUvOffset:!Q&&n.os?n.os:null,sizeArray:n.ss},mat:U});var F=ie.for(L);F.useProgram(a),F.directAttribs().disable(),h.shadowMap.enable&&h.shadowMap.createShadow(),h.flowMap.createFlow()}}},dispose:function(){tt.superClass.dispose.call(this);var z=this._startPickId,y=this._lastPointNumber;if(z&&y){for(var E=this.gv.pickColorMap,s=0;y>s;s++){var N=z+s;E[N]&&delete E[N]}delete this._startPickId,delete this._lastPointNumber}}});var wt=function(i,H){Ei(wt,this,[i,H]),this._needRecoverPosition=!0};Po(wt,ot,{_25Q:1,validate:function(U){var W=this,H=W.data,u=W.s,f=H.getPoints(),l=f.size();W.dispatchBoundingBoxChanged();var t=H.p3(),K=W.mat=Wp();Zm(K,t),Ap(K,H.getFinalRotation3d(),H.getRotationMode());var v=H.getScale3d(),r=H._dynamicScale3d;if(r&&(v[0]*=r[0],v[1]*=r[1],v[2]*=r[2]),ag(K,v),Zm(K,nc(t)),H._flipSide=kc.determinantOfArray(K)<0,(u(qb)!==nm||u("batch")!=C||!W.shapeModel||H._needChangeGeometry)&&(H._needChangeGeometry=W.shapeModel=W.info=W.lineShapeModel=C,l>1)){var Q=W.info={},d=H.getSegments(),c=H.getThickness(),p=zr(f.get(0)),L=zr(f.get(l-1)),k=l%2,$=(l-k)/2;if(Q.c1=zr(f.get($-1)),Q.c2=zr(f.get($)),0!==k&&(Q.p3=Q.c2),Q.s1=p,Q.s2=zr(f.get(1)),Q.t1=zr(f.get(l-2)),Q.t2=L,u(qb)===nm){if(T.extractPolylineTranslation||T.extractVerticesTranslation){var t=new Of.Vector3(H.p3());f=ho(f),f.forEach(function(J){J.x-=t.x,J.e-=t.y,J.y-=t.z}),W._vsTranslation=(new Of.Matrix4).setPosition(t),W._matWithExtraction=(new Of.Matrix4).fromArray(K).multiply(W._vsTranslation).toArray()}else W._vsTranslation=null,W._matWithExtraction=null;Q.list=W.createTubeModel(f,d,c/2,U)}else Q.list=W.createLineModel(f,d,c,"shape.border","shape.dash")}},invalidateCachedGeometry:function(){this.shapeModel=this.info=this.lineShapeModel=C},_80o:function(c,z,i){var W=this,I=W.shapeModel;if(I){var Y=W.mat;(T.extractPolylineTranslation||T.extractVerticesTranslation)&&W._matWithExtraction&&(Y=W._matWithExtraction);var G=W.gv;Bh(G,Y);var A,b=W.s("3d.clip.direction");if(G._uvClipEnabled&&("uv.left"===b||"uv.right"===b)&&(A=W.s("3d.clip.percentage"))<1){var U=!0,E=!0;ff(I);var v=I.top_vs,w=I.bottom_vs,Z=I.vs,F=ie.for(c),h=F.directUniforms(),s=F.directAttribs();"uv.left"==b?(1>A&&(U=!1),0>=A&&(E=!1)):(1>A&&(E=!1),0>=A&&(U=!1)),I.top_vs=I.bottom_vs=H,s.aUv=Tr(c,G._buffer.uv,I.uv,C,2),tj(G,W.data,I,W,W.getBodyColor(),i),s.aUv=!1,h.uClipDirection=0,I.vs=H,U&&(I.top_vs=v),E&&(I.bottom_vs=w),tj(G,W.data,I,W,W.getBodyColor(),i),I.vs=Z,I.top_vs=v,I.bottom_vs=w}else tj(G,W.data,I,W,W.getBodyColor(),i);bf(G)}}});var xt=function(){var u,l=1,T=!1,x={},w={},R={},s=function(){ef(s);var z=Date.now(),Y=z-u;u=z;try{J(Y/1e3)}catch(v){}},J=function(D){var Q,y,d,S,w,a,m={};for(Q in x){if(y=x[Q],w=y.speed,a=y.time,y.paused)E=y.time;else{var E=y.time+D*w;y.time=E}var k=y.duration,e=y.loop;"once"===e?0>w&&E<y.end||w>0&&E>y.end?(E=y.end,y.iteration=1):E=Of.modToPositive(E,k):(Math.floor(E/k)!==Math.floor(a/k)&&y.iteration++,"pingpong"===e?(E=Of.modToPositive(E,2*k),E>k&&(E=2*k-E)):E=Of.modToPositive(E,k)),d=y.animation;var Y=y.displayTime=Of.roundFloat(E,3);(S=m[d])?S.push(Q,Y):m[d]=[Q,Y]}for(d in m)p(d,m[d])},p=function(K,Q){var E=w[K][1];if(E){var g,C,Y,o,T,Z,B,y,c={},n=Q.length/2,v={},L=R[K];if(L){var b=L.clips;for(g=0,T=b.length;T>g;g++)c[b[g].time]=g;for(g=0;n>g;g++)Z=Q[2*g+1],B=c[Z],B!==H&&(v[B]=!0)}else L=R[K]={clips:[]};T=E.length;var t=-1;for(y=0;n>y;y++)if(C=Q[2*y],Z=Q[2*y+1],B=c[Z],B===H){do t++;while(v[t]);(Y=L.clips[t])?Y.time=Z:Y=L.clips[t]={time:Z,datas:[]},o=Y.datas;for(var g=0;T>g;g++){var e=E[g],U=e.evaluate(Z),P=o[g];P||(P=o[g]=[]);for(var l=0,N=U.length;N>l;l++)P[l]=U[l]}c[Z]=t,x[C].clip=Y}else x[C].clip=L.clips[B]}},z=function(S){for(var a,d,F=S.tracks,G=F.length,r=new Array(G),X={},f=0;G>f;f++){var H=F[f],g=H.type,v=H.name,e=v.split(".");switch((d=X[e[0]])||(d=X[e[0]]=[]),e[1]){case"scale":d[2]=f;break;case"quaternion":d[1]=f;break;case"position":default:d[0]=f}switch(g){case"vector":a=new n(H.times,H.values);break;case"quaternion":a=new Y(H.times,H.values);break;case"cubic":a=new P(H.times,H.values);break;default:a=new c(H.times,H.values)}r[f]=a}return[X,r]},o=Of.newIdGenerator(),A=function(t,R){if(R=Of.roundFloat(R,3),t.speed=R,"once"===t.loop){var v=t.duration,h=t.start;t.end=(0>R?Math.floor((h-1e-8)/v):Math.ceil((h+1e-8)/v))*v}},S=function(h,a,D,f,H){var F;(F=h.tag)||(F=h.tag=o.next()),w[F]||(w[F]=z(h));var R=l++,p=h.duration;return x[R]={time:D||0,start:D||0,loop:f||"repeat",duration:p,animation:F,animationName:h.name,clip:H,iteration:0},A(x[R],a),T||(T=!0,u=Date.now(),s()),R},h=function(B){var s=x[B];return s?(delete x[B],s):!1},I=function(c,F,C){var Z=x[c];return Z?"speed"===F?(A(Z,C),!0):"forwardTime"===F?(Z.time+=C,!0):!1:!1};return{add:S,stop:h,changeAnimationInfo:I,getAnimation:function(q){return x[q]},getAnimationMap:function(){return x},getAnimationTracks:function(){return w},getFrameAnimationData:function(){return R}}}();yd(cj,{playAnimation:function(q,O,$,h){var P=this.getAnimation(q);if(!P)return!1;var G;this._animationPlaying&&(G=xt.stop(this._animationId));var A=this._animationId=xt.add(P,O,$,h,G?G.clip:null);return this._animationPlaying=!0,this._animationPaused=!1,this._lastAnimIteration=0,this.fp("animationStart",null,!0),A},changeCurrentAnimationSpeed:function(k){return xt.changeAnimationInfo(this._animationId,"speed",k)},forwardAnimation:function(W){return this.invalidateView(),xt.changeAnimationInfo(this._animationId,"forwardTime",W)},backwardAnimation:function(O){return this.forwardAnimation(-O)},stopAnimation:function(){var f=this._animationId;return f&&xt.stop(f),this._animationPlaying=!1,this._animationPaused=!1,this._animationId=H,this._lastAnimIteration=0,this.fp("animationStop",null,!0),f},pauseAnimation:function(){if(this._animationPaused)return!1;var A=this._animationId;if(!A)return!1;var $=xt.getAnimation(A);return $?($.paused=!0,this._animationPaused=!0,this.fp("animationPause",null,!0),!0):!1},resumeAnimation:function(){if(this._animationPaused){var n=this._animationId;if(!n)return!1;var Z=xt.getAnimation(n);return Z?(Z.paused=!1,this._animationPaused=!1,this.fp("animationResume",null,!0),!0):!1}return!1},isAnimationPlaying:function(){return this._animationPlaying},isAnimationPaused:function(){return this._animationPaused},getAnimationNames:function(){return T.getShapeModelAnimationNameList(this.s("shape3d"))},getAnimation:function(o){return T.getShapeModelAnimation(this.s("shape3d"),o)},getAnimations:function(){return T.getShapeModelAnimations(this.s("shape3d"))},getCurrentAnimationState:function(E){var X=this._animationId;if(!X)return null;var U=xt.getAnimation(X);if(!U)return null;switch(E){case"time":return U.displayTime||0;case"name":return U.animationName;case"loop":return U.loop;case"speed":return U.speed;case"duration":return U.duration;default:return{time:U.displayTime||0,name:U.animationName,loop:U.loop,speed:U.speed,duration:U.duration}}}}),yd(Wr,{isAnimationPlaying:y}),yd(T,{getShapeModelAnimations:function(x){var A,X;return x&&(A=Uf(x))&&A.model3d&&(X=A.animations)?X:null},getShapeModelAnimation:function(B,w){var $=T.getShapeModelAnimations(B);if($)for(var A=0,U=$.length;U>A;A++)if($[A].name===w)return $[A];return null},getShapeModelAnimationNameList:function(L){var c=T.getShapeModelAnimations(L);if(!c)return null;for(var P=c.length,r=new Array(P),b=0;P>b;b++)r[b]=c[b].name;return r}});var yt=function(){var u={},F=function(N){var x;return(x=u[N])?x.length?x.pop():new Float32Array(N):(u[N]=[],new Float32Array(N))},R=function(s){var g,i=s.length;(g=u[i])?g.push(s):u[i]=[s]};return{request:F,release:R}}(),zt=Of.newIdGenerator();b.assign(jg.Graph3dView.prototype,{initSkeletonDatas:function(){var J=this,y=J._updatedSkeletonDatas;for(var A in y)yt.release(y[A]);J._updatedSkeletonDatas={},J._isSkeletonUpdated={},J._boneViewMatrices.length=0,J._boneViewMatrices._bufId=null},_renderBonesForDebug:function(E,D){var b=this;b._boneViewMatrices.length>0&&(D.depth.enabled=!1,D.depth.mask=!1,b._prefabRenderer.render(E,{mesh:{type:"bone"},instances:{aMatrixInstanced:new Float32Array(b._boneViewMatrices)},mat:{type:"fixColor",color:"red",cullFace:!0}}))},updateSkeleton:function(Z,m){var V=this;if(m||(m=Uf(Z.s("shape3d")),m&&m.model3d)){var b=Z._animationId,P=xt.getAnimationMap()[b];if(P){var w=P.clip;if(w){var x=P.iteration,F=Z._lastAnimIteration||0;x!==F&&(Z._lastAnimIteration=x,Z.fp("animationIteration",F,x));var p=Z._lastAnimTimestamp=P.time,J=P.animation+"|"+p;if(!this._isSkeletonUpdated[J]){this._isSkeletonUpdated[J]=!0;var N=Z.s("3d.bone.visible");if(N){var B,$=Of.requestVector3(),E=Of.requestVector3(),_=Of.requestMatrix4().fromArray(Z.mat),U=Of.requestMatrix4();U.composeFromArray(m.position,m.quaternion,m.scale),_.multiply(U)}var Q=w.datas,c=xt.getAnimationTracks()[P.animation][0],e=[],v={};T.traverse(m,function(W,T){if(W.skeleton)return e.push(W),void 0;if(W.isBone){var t,I,g=W.name;(I=c[g])&&((t=I[0])!==H&&(W.position=Q[t]),(t=I[1])!==H&&(W.quaternion=Q[t]),(t=I[2])!==H&&(W.scale=Q[t]));var Z,s;if((Z=W.matrixWorld)||(Z=W.matrixWorld=new kc),Z.composeFromArray(W.position,W.quaternion,W.scale),T&&(s=T.matrixWorld)&&(Z.premultiply(s),N)){var n=V._boneViewMatrices;s.getPosition($),$.applyMatrix4(_),Z.getPosition(E),E.applyMatrix4(_),B=2*$.distanceTo(E),U.lookAt(E,$).setPosition(E.set(0,0,0)).scale(E.set(B,B,B)).setPosition($),n.push.apply(n,U.getElements())}v[g]=Z}},null,"comps"),N&&(Of.releaseVector3($),Of.releaseVector3(E),Of.releaseMatrix4(U),Of.releaseMatrix4(_));var t,j,G,d,I,r,o,M,K,i=V._updatedSkeletonDatas;for(o=0,M=e.length;M>o;o++){if(j=e[o],t=j.skeleton.bones,d=t.length,(r=j._skeletonId)||(r=j._skeletonId=zt.next()),!(G=i[r+"|"+p])){var L=Math.sqrt(4*d),R=Of.nearestPOT(L);L>R&&(R<<=1),R=Math.max(R,4),G=i[r+"|"+p]=yt.request(4*R*R)}for(I=j.skeleton.boneMatrixInverses,K=0;d>K;K++)kc.multiplyMatrixArray(G,v[t[K]],I,16*K,0,16*K)}}}}}}}),Hm.pbr=["?0t0w!/Imjbodujtt;z!ihqm=t!mf4e-v!mmdjohji$u!!S0C0Q!!$fQoSjFgGfJeY$!","~0!0<!eIJj!o>u!ts;p!mhpmDthmb4s-G!`mmjhh!iu?z!ep0c0/!t$gQ/ShFpGgJ=Y!f!ev$medfogjj$of!!Q?CzSep!c/$tegf/gqjboNfx!pTmUgB=O!EfBeSvEmd!oj$$jo!d<m*veeJf)!m=fdypfnUnupvoq?uv!Pp$Ujsobdfmovjemf!!>=!qebJd!lj?ozhe?pc!/vtogj/ghposjnq!qwbfNdf4o!peuj=g!gfvetvfm<d!ovjo$jg!ps?nz!ewpfcd/4t!gf/nujvtqtujvwpf=<!!fveovjmgdposjn$!g!mpgbjue!osfp$vh!i<oufbtptd<s!bvfomjdg/pmsbnj!sgfmupbbnu!!+n!fsubbmmvodfftqtT<u!bvpodjsgbpfsmnd!!g,m!p*bdud!Gp!q+b!dujbupzd<s!bf$mjdg/emfbgj!sVfTuFb`nV!W.!!1w/b2s)z!j+o!hu!iwhfjdM3h!owjVpwh<u!vp$!f>o!eujighj!Mh$ojjgp!heufvgpj!o<f*ed)dVWTOFu`pMeJ!H-I1U:NGBuQb*p!d}s}b!femfdg/jmobfjes)fVuTbFn`!B-P1NGBuQb*pd!swbbfsmzdj/omhb!jwsffdu3b!nw)Vlwd3j<m!id$Tf`oGe!j>g!d!dG$!j4gdeffwg!!<V*T*Fs`jNEBxQfj!wv/ozjsgupfsnnp!fthb!n-qmmbfnss3pEO!unbbpqd<s!bf$mfdo/ezjsguf!np$fjhg)eufpge!)VfTuFb`sBvMuQbItB!N>B!Qdd!WvOoujpgep!sunb!ptmbgn!qmUfBsP3DES!BbFmMqDi`bFNTbVq!<g!fe$gfjo$ej!gg!je$ojfg$ef!g<!sVbTmFv`dBfMqQTIoBfUfFiTtU!,!!vqonjpgDpzshns!fgomFpobfuf!ibtm!q+i!buUifhtjuM<h!oj$pfhouevjpg!>!!u$ijhgjeMfhgo!jVpThFu`vBpP!N<B*Qsp!mvpoDjogfpfsint!/tmbbnjqsmffusb3nE)!4bypbNnb!q+<!!8v6o2j/g1p!s.n!!1g/m2p!b>u!!qbnppNDbzqhJsofuofFootfjfuizt<!!ub$pfmoge!jgOF!FI$Tj`gFeTfVg!!gVfTeFg`jM$JH!I<UfNdBoQbj!evboSjfgwpjstnt!jtnbFnmqbmufpsu3!E,!!msjbhmivudNfbqqT<m!bvuopjug!p,s!nf!tgvmgpgbjuE!mmbjuhpiuu!N>b!quJiohujfMohtojjupzh<u!vp$!f4odefjwg!<!sb$mjvgdeffqgT!uVdTfFs`jFeNoJjT/TuJiWhFjNMBeQfu!dvfomjggfpss!n,!!tsbbnmqvmdffsq3TEu!dffnsjjtet/juwifhNjbMqe<f!ud$ffmogefjsg!>!!s$bjmovddmfvqeTfm!b=ucptue!g4td?fw!!<$fjtgvegfggj!EVuTdFf`sOjPeSoNjB/MuNiBhQjM!evfoujdgfpmsgnf!st!b,n!qfmtfvsg3gEj!EoupdsfnsbjmeN/buqi<h!jvMoejfgupdsfnm!gwffsd!3>!!ofptsvngbgmjTEdmbbmufp<u!!4$dffowe!jg?z!ep$cj/gt!ga/eqfbgNjpobf=e!)fVeTvFm`dUoBjO$HF!O<U**s!f%x%p!Q)nejfsg!j-onfjes))UxBpOqH!F+O!UsTpQmBpDDFn`jOsP!S>N,B!MfNdBoQb*j!e}b}S!fewfjgtjtojfneF!m)bVuTpFu`!D<M*F*BsSjDEPxBfUj`wO/PzSsNuBfMnNpBfQh*!*-m!bwnfsdp4o!/qzfssuufvnspcfOhp)sunpbem)3tBcsbc!).w!f1d/42!!f>znfj`sq!putb-p!mwgf!d4?!ztevpscg/`togp/sonp-n!nwpfDdt4u!inhbjqmO=-!!fgemvpmbduo!jg$bd!fE?jzsefpdcu/jtpgo/*S!C|Q!twufidh4j!mr=1!!f>e!vwmfddo4j)$eG!eyg)jfezoff`$qp!t</cyh*s-/!sepGmepyD)ffwzjft`tqjpntf/!z>*+-!!fedGoebyj)efbzSff`wqjpttt/j{n*F*m<b!uwpfud!4<!{rz2y!/>*!swpfmdp4D)fewGjetzt)jfnzff)`sqbpfto/jyM*p-U!CeHGSetz!)>f!zcfh`sq/pstp/mzp*D-f!wejGtetzj)nffz!f<`*qwpVtw/!{-*q*b<N!fwwfjdt3t!jtnuf1)!E>3!fesGveuyy)fwuV!w>/!tsup*m<p!Dwffwdj3t!ttjun2f!!>5!defGwe!z)QwBVNwF/WtJuT*T<J!NwFf`dF4T!VO!!g>f!etgvjs$g`!opgsjne<o!fw$fd!4<!*ro2pqjfusdqf!s>j!Edfsdpbtgt!)-rO2q-b!nO!*-<m!bwnfsdp4o!!r-1oqpfjsuqj!t>p!QdxsfpjtWtw)!O.-)!crs1B*3<m!bwnfsdp4O!cUs!v>u!srf2qq!f>s!qm!b+n!stpuo1!/<yf!m,b!drT1mqbfnssqp!o+!!>t+u!2z/yy/<O!qwbfnd!4<!1C/!2>!!.r!21q/f3s!q+!!+{!ztyu/1*/wzV!w,!!-rq1bqNfmsbqn!s+p!ot)uE23/fzs<v!ugymfpub!u>!!eOfqub!n>!!4ndbfyw)!epQuB)NUM-B!NUS*P-O!`eFpTuV)!Cg-f!eCg*j*$<!!g<moppbjuu!jttdpbQmwfN!w>.!!)>e!foup!j>u>j!t1p/Q1x*f!j@W!w1!/41d!f;w!!g<bmdbfnEsjpsof!d>u!jmpbon!s+p!Ojzoswuffsntpffthr!s4ud)fewf!u*g<j!esoffu$vs!o<!ooppjsundbfmsjj{Eff)dUb!g+!!+)!nmbbqnOs/pyo!!+>!!tmdbbnmsfp*o!!,!ECF!E+J!T)`nFbMqCOV/PzE!!+g!ftedgbjm$f*!!<,*!mOb!n+s!pnObwq)Of/{{j*m<b!n~s!po$!f>o!emjbgns!po$!j4gdeffwg!!<V1T/F2`!S.P!V;H!I1O/F2T!T@N!BhQoj!dvboGjugoppssnG!`tmbhn!q>m!fosp3jEu!dsfpsvjhEifodfbtgt!Nubbqp<m!g!$fgojeejogf$!!$jggjeefogf!$VT!F<`cN/FtUtBfMoOmFbTuTfNNBmQfy!fvuo!j>g+p!ssnp!utdbbnGqtmtffso3mEb!unffnu!bm*oCf`tMtFNObOqB<I!D`$QfBoNeTjTgFO!MwBbUsFzNj)oehf!owjfgdf4e!!wgOjpmsfn$bm!<<!hw/btstzfjoomhb!uwffNdm4f!ywfNuw!Q>p+t!jsupjupdob<G!tt$fjogm!beuffgnj!of*eH)`VMTFFO`OFBOIWDN`BQQB*N!T}T}F!ONMBBYU`FCNP)Ye`fDoMjJgQfQeF!Sg!j?m!f1$!!w<bss/ztjtofho!mwbfudf4N!mwfXypfsum!e>Q+p!tsjpuujdpboG<t!tf$ofmobeujfgn!!*$Sj`gM!FeOfOgBjIoDf`eQ)BDNMTJTQF`OEMJBSUFFDNU)JePfOo*jg!fweb!sgzjj$oh!!<w*fwdV4w!!w-MqpbdNbtmtQfpotmjbuujfpno)<E!3f$sfvoueyjfgu!!>v!otjtgfposmnb!unfbNum5f!yvfWuj!f5xdNfbwu!sjQyB<N!TT$FjOoMdBmUvFeNf`!F=TdVm!jgqfEejgsjf$du!j<ptot/fgotm/biuffbne!?>!!sp$ujdobdGmtvteffo!m=bdumfjnq!cupbyp/mggt!/igfjbeeo?f$!!$jgojdemovfe$f!!=<gcp/ht/tgfto/iihfvbpeS?mf!yf$uj!o>d+m!vsepfu!d=btGitbtefpoxiNhbvqp/sg!t/*iCf`bMeF?OO!BI$Dj`oQdBmNvTeTfF!O=IgHmVpPxSN)beqf/ogjtg/fief!bgej?mf!$$!j<ohd/mtvteffo!i=hfvopdSpmefjyofhu?!>!+!$sjpouddmbvGetft!f=odivhcvfpFso!wS*fHg`mMfFdOuOjBpIoDG`TQ?BN!TT$FjOoIdHmVvPeSf)!e=ffoojwgnfbeq!Qgijzmtfj$db!m</sg/tt/tiffobieh?vp!Sm$fjyofdum!v>e+f!!s=pmujdhbiGutttDfponinhpvop/sg!t/*iSf`bMeF?OO!BI$Dj`oQdBmNvTeTfF!O=ImHjVhPiSu)teQfCoSj/ggfte/!igfjb$e?!<!*w$Vjwo!d-mqvbeNft!t=fuopiohfvNpbsq)qEj3ofhs/vguty/fiuf!b>e!?tt!fvooijhgvppsSnm!fwyffdu4!!5sdjfnwD!pmQpBsN<T!TvFoOjIgHpVsPnS!`gFmTpVb!ug!fsejgnjQ$px!f<st<t!fwopijhev!pnsb!j>o!)swppujdeb*G!t|t!fo$ijhovdpmsv!eufb!p=mdgm!jqgEjjesoffd$uj!p<oe/sgbtd/tcjpee!z*?ut!fU$bjioqdmmbv!e=f!!b=/dsmpjmqpcDpfyt/vggtg/jcep)e!zg?j!!wUfTdF5U!BeIjQgMgBv`tFfTDVp!mgpfse!g>j!$wf!d5g)jeejogfg$vt!f-g!jpeqobfd$ju!z<*c</!*SwfVgwm!f-dqubfNebMijqhmibu)!Es3ffgsmvfudyuffue!M>j+h!ibu/!s>p!mSpfDgfmtfvdgugfjeeM!jh*iCu`)MwFfOdO4B)I1D/`1Q*B-N!BwIfQdM4B))1e/f1o*j-g!fwef!dg4j)m1f/$1*!-<!hw/f*dw4V)w1!/-1q*b*N<b!iwqfmdb4)!Eu3pfusbvmuFynfjut!t>j+w!fbS/bsepjmbpoDdfft!v>g!gfjnej!tt*jHw`fM<F!OO$BjIgDe`fQgB!NVBTIFQ`MNBB)Qef!owjfgdf5e!!ugfjymffm$Dp!m<pss/!*>w!Vuwf!y-uqvbsNfb3iEq)mnbb)qE-3!fwsVvwu*y<f!uu!f>y+f!mbD/psmppmsp!D>f!ttvSgHgCjUep!Mj*oSf`bMsF)OuOfByIfDm`DQpBmNpBsI*Q<M!Be)jegfgovjtgffDep!mgpjsm!f+$>!!u<fby/f*mwDVpwm!p-sq<b!Nb$ifqomebj)gE3!fs$vjugyeffug!!>V+T!Fb`/BsMpQmIpBDNfBtQvg!gj$ej!g!*eBf`gMjFoOfOeB)IBDM`QQIBBN"],Hm.phong=["?0t0w!/Imjbodujtt;z!ihqm=t!mf4e-v!mmdjohji$u!!H0O0P!I$QQ!SfFoGjJgYfe!$","~0!0<!eIJj!o>u!ts;p!mhpmDthmb4s-G!`mmjhh!iu?z!ep0c0/!t$gQ/ShFpGgJ=Y!f!ev$medfogjj$of!!Q?IzPeOpHc/!tg$/jqobdNmxvpemfg!==!dfpenvnmpdoo?j$!!$<j*oedJm)vmeffy!f=UqubvdqlujvoPhp?Us!bvfoojjgmp!s>n!!ewJf!d4?!zeejpgcg/vttgf/<h!ovjoqjqgbpNsfno!pwuf=d!4f!efvnmjdtotjj$wf!<!?vzoejpgcp/stng!/wufvdq4u!vtpq=f!dfvemvbmsd<o!jv$oj!gp?szne!pgcm/ptbgu/!htoipjioQjqobfntwto<f!=v!ofjegvpmsdno!jg$mp!b<uf!dpoqbbjdejbuSzf<w!jt$tjjgneFfmgb!uVpTuF!`,V!Wsb!mwvbdsfzqjTouhd!fwsfjde3o!jw/Vuwi<h!jM$effouedjfgmg!fs$!j,g!!sebfmgvjdoffqeT)uVdTfFs`jMeJ/HuIiUhNjBMQe*f!u}d}f!megffgsj!o,f!ef)tVvTgFg`jBEPuNdBfQs*je!owjb/suzijhojhM!ewffudd3f!mwgVfws3!<,!!f$tfvogegjjgEu!df$sjjgee/fugi!hVjTMFe`fNuBdQfm!gvfosj!g>p!suni!htjbMnhqomjfpsh3uEv!pn!b4qd<f!w!$f?ozeejpgc/!tg$/jqgbeNfpgb!=V!TfFe`vBmMdQoIjB$NB!Q?!zveopjcg/ptsgn/!otpbnnnqpmDftsu3iEh!jbmm=q!ifbeNvbmqd<o!j$$f!oe?jzgep!c/$tjgg/ehfogp!iVQTtFu`iBhMjQmI=B!UfFeTvUmd!ovjo$jg!psgnj!egomfp$bu!!<bcmhqsi/bsUpfmtpuD<f!wj$tftojenjfg!>!+!$fjdgoebfjge!bVSTfFw`jBtPtNjBnQFm!bvuopjug!p<s{nz!yt/b*nsqpmmfpsD3fEw!jbtptNjbnqf<)!svbofjogjpMspnU!CgHmSptb!u>!!bcphNsb/qsJpomupfDoftwjjutzt<j!nf$!f<o*ewjVgw!!-q$bjNgfewfjgt!tVjTnFf`)MEJ3HfIsUvNuByQfu!!v>o!jsgppmspnD!ftwbjntqtmjfnsf3!E5!dmfjwh!iuQNBbNqF<W!JvToTjJgNpFs`nF!TgVm!pgbfue!gmjj$hi!uNgbjqeJoofu$fo!t<j*uozp<j!ud$ffsojeEjfgdb!g!$-jOgqebfng!!-VmTbFn`sFpNoJ!T-ToJpWjFuNjBtQpQ!xvfojjWgwp!s.n)!ctsbBn3qmmbfnss3pEO!cfsnvjutstfjqw!f>N!bmqb<n!sp$of!o<efjmgbd!Tm$bjnosdpmov!e>f+!!=zcyt/eOgqtb?n!!<1$/j2g!e.f!g1!/V3T!F+`!O{PzSyN/B*MwNVBwQ!-!qvboNjmgbpnssnp!ot)bEn3qfmsfvsu3yEf!uo!p>s!nObqmbNnb!q4<d!fvwo!jgQpBsNnM!BwNfSdP3O!`oFpTsVn!bgmfTedgbjm$f<!!<o$pfjouejjtgpQ!wN$wj.g!!>a!eofpgjjuojftep)QVxTfFj`WUwB!O4HdFfOwU!*<!m%b%n!s)peof!g>j!omfben)sUpBOOzHsFuOfUnTpQfBhD!F4`dOfPwS!NBgMjNeBoQf*$!}!}<!oepfjgujdoffsej!E)fVdTbFg`!D+M!FmBbSnDsPpBoU!`>O!PmSbNnBsMpNoB!Q*E*FE!JwTf`dF4M!CqVfPsEu!vgsfceOgpjs$nb!m<3*Bmsbcn)swpfOdw4)!ff{zjfm`bqnpstp-o!!w>f!dm4b!ntsvpsog!`4odpfswn!-<!1w/f2d!4.!!n;b!q1O/-2!!g@m!phbouj!dgbbGdufoEpjssGf`dmuhj!p>o!*o!p|j!uwdffds4j!Erf1d!b>g!!wufbdp4m)ge!Gegyj)efozff$`q!p<t1//y2*!->!!eiGuehyo)ffszufT`sqbpmtv/dzf*q-t!!eGfetym)ff$zf!`<qsp/ts/b{m*v*d<f!qwTfmdf4y!fru2!!>>!!iwufhdo4f)seuGTeszb)mfvzdff`qqtp!t</*yw*V-w!!e-GqebzN)sfbzmfv`dqfpqtt/)zE*3-f!sevGueyzf)uf!z>f!`sqbpmtv/d{f*q*T<m!fwyffdu3!!5tduf1w!!>!QeBGNeSyB)MwVVDwF/QtTu`*F<T!Vw!fgdf3e!gtju$2!!><!ieuGheozf)swuVTws/btmuv*d<f!qwtf!du4b!pOm!g>!!tgvjsego`fo$ps!n<<e!swbfddt4j!er!2*quftsfqU!b>i!qdmsbp!t=t!)br/2s-p!mOp*D<f!twvfgdg4j!er)1!qgfjs!q!U>T!FdUsBpItQtM)BO`-F!TrV1!*g<f!ewgfjd$4!!U!g>j!ero2fq$fs!q!g+j!etouf1$/y!!<,c!/r*1wqVfws!q-!q+b!Ntbui2q/myb<)!Ew3ffds4v!uCy!f>u!!r>2+q!fbs/qs!p+m!ptDuf1t/vzg!g,j!er!1q*fCs`qM!F+O!OtBuI2D/`zQ<B!NgBmIpQbMuB!)eeffuo!j>g!fneb!yg)jempfu$)U!-<!hU/**-w!Vewp!u-)qCb-N!bCi*q*m<b!)gEm3pfbsuv!utydfbum!f>!+>!!b)/esfpum!p>D>f!t1v/g1g*j!e@!!1*/H1`!M;F!OgObBdIfDE`jQsBfNdBuIjQpMoB!)+e!fjoojwgffset!fgtjrmsfu$)e!f<us*/<*!wsVfwu!v-sqob!Nobpisqnmbbm)jE{3ff)sUv!u+y!f)un!b>q+O!/by/!s+p!mtpdDbfmtfv*g!g,j!eC!!+*!S)`nMbFqOOO/BzI!D+`!QtBdNbBmIfQ*M!B,)!eOf!o+j!gnfbeq!Og/j{m*f<$!~!!<b$/f*oweVjwg!-!qwbbNsbzijqomhb!)wEf3df4s!vwuOypfsun!b>m+<!!bw/bsspzmjpoDhf!twvfgdg4j!ew!Nw*QBp`tMjFuOjOpBoI<D!`vQoBjNgBpIsQnM!Bw)fedf4o!jvgDfben!fgsjb$Qp!tjQuBjNpBoI<Q!MB$`eFfTgVj!ogff!eFgOjW$NB!Q`gNjPeEoFf`$SF!G<MsFpDmUpJDPmOfy!fu$!j>g+!!esfpgmjpoDffet)vVgTgFj`eF!O<W*NsBpQm*p!D}m}f!yNfBuY)`sCbPfYo`jDMMpJUQCQHFSSt!!?>!!1sp!mwpbDsmzfjyofhu!!w<f*dw4V!ww!X-pqsbmne)QEp3tfjsuvjupyof<u!!>$!fsopemjpgDm!fy$fjug!!5edffgwj!ofQeB)NV`TFFT`VF!OgWfNeBgQj*$!!v<ofjwgjptstnj!ngfm!p>b!uf!dfoobwjNebbqSJfowujftottjjnuFzm<b!uvpouj!g4pdsfnw!!g<m*p*b1u/!1g)m4jdqfFwo!w-N*b1q/<1!)4$djfgwe!f-g*!1F/O1W)N4BdQf`wU!Z-Q*F1`/D1V)C4Fdf!wv)oujighpjsMne!ftubdnfqmmgffsSD!v>c!fu!ifhojwMnebfqu<d!fm$gffmst!fui!hvjoMjegfpusdnf!mtgbfnSq!m<f*sz3uEj!dfboqwpn!b-qf<t!vg$gfjoee)j5gdf!wv!o>j!gsppsmnp!Dgfmtpvbgug!jsef!g5sdbfdwu!jp?ozSebpucj/pt<g!/y$pfcoqejjmgd=!!f$ejvgm!deofjg$jo!fe?)zDeMpJcQ/`tEgJ/SoFpDjUuJdPfOs*jE!qwjbmsdz=j!ofhe!vwmfddo4j!$wM!p|d!b*meQjpptwj)uojjpbon<!!ej$pfwo!ej?geb!fvio/jtggp/shno!jnqbqub5N!fvoWpjuf=x!Nfbeuvsmjdyo<j!$$!jo?dTmGvoepfj!u=ddfmmjgqfESjwsofFdfucjvpdo=/!gfte/vimfdboej?$!!$gjjoedomfv$ef!!<=qdbmNjsqbcmpvyd/fgqtt/!iEf3bsef?mq!nb$tj!ondsmpvgejfo!v=!gpQhB/NgStB/MiVfDbFeQ?T`!FT$Vj!ogdfmevgejf$!=!ti?beebpfxiN/btqg//ghto/piifQbteu?ih!jm$=j!ofdemvvmedfo!j=$gm!px?Nebbqf/ig/tt/gi/fobpen?np!Dt$ujiohdjmmv=e!ff!e=vfmoddopje$jo!h?"],Hm.hueSaturation=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gxp/ssnp!mtpbdn!q-m*fmst3iE)!cjhnsb3hmft<i!)w5bdsfzwj!o>h!!swpfmdp3D!hwbVswG<`!mh$!e<f*g!j*offh!oNbBSYt`tSfBoOuHiFh!j8m!!-^$1e]ftgtjfoofu!iShBjOmH!F-`{B/MmMt!i1)t!tvfoojugiphsjnm!`gqmbpnb!u-!*ifvhfo]bNSBoYp`jSuBbOsHvFu^b<t!!v-o^j1g]pospnj!ugbmspvbuub!tt!b-uzv/smbtuij)poop]jNuBbYs`vSuBbOtH`Fq^b<n!!v-o*jfghposbnS!fgvmip!b-u^!1m]jfhviiu!o-fyt/tm]tNiB)Yf`vSiB`OqHbFn^!<)!4gdmfpwb!u>!!nmbtqi`!i~v!f~)!g<mlpbbfus!cj!o<W^bsmfvufo-v!pgdm`pfbvui!]itvtffBomumi-h!jgmm!p>b!uf!hiovbfSStbtofhofu*i!h|j!mg!m<p^bsuf!uwobvmpvdf`!f>v!ij]ooWpbjmuvbfs!v,u!b)ti!v>f!Bfmhmo!b,S!oipvjfuSbbsovhufb*t!!0<!^3s/f1u<o!vjpgd!`)fwvbim]vffv!i=!!>1!/f1h*o!bsSffuvvis!o|!!w*bfmhvofb!s,!!>2>/!1s<f!ufomvtpfd!`jfgv!i))w!bgmjv!f|!!?*!,2,/s1f*u!osvfpudv`sfov!iw!b<mFvHfO!B.S!`2Y/B1N<!!=f!mstffu!osvfpudv`sfov!iw!b<m1v!f><!!s~f!ugomvppbdu`!fnvbiq!`utobju)v!ssbpugj!p<o2)!g,m!pfbhuo!bjso!W>b!mfvhfo-b!sg!m<p1b!u>!!tfbhuovbssb!u*j7p!o>B?m!mf-h!ogbmsp)b!ug!jt!b~u!v~s!b<uljbpfosScb!o<hsff*u!o|v!pgdm`pfbvui!!w>b!mfvhfo!b>s!!j|o!W*b6m/v1f!!,+!!*)s2f/u1o!v,p!dt`bfuvvis)buubjppmogB!m=m!!i,)!!tgbju!v|s!b*u,j,psofSuboovhpfd*`<f!vsif!u<vFsHoO!BdSm`bYnBqN)!w=b!msvffu-o!v1p/d1`-f!v2i/!1<*1<!!>~!!sgfmupobvup!dn`bfqv`im!juhoiju)o!fstptg)!g<mfphboub!SjtotWfbomuvifh-j!mg!m-pfbhuo!bmSjohpijuuobfstvtuBbmtm!--!fghmopbbSuf!vmij!huibupomfgt!t<S1b!o>h!ff*h!o|b!sg!mupobju!!<we!m>p!imtjfhsiiuuo`fftvtiB!mumb!p,m!gm!j<h1i/u7o!f+t!tyS/bmothif!<>!!jig!!u)bwp!m=g!!1</*1{*z!ys/fsupvmspod!)jmotWib3mcvhfs!!+>!!)mwt!i,!!42d/f1w*!<<!*fwmVtwf!!-sffhubvnsjo)!Ej3ofWsbvmuvyff!u,!!>)!ws!p+m!p)d2!/51d!f.w!!j|o!W*b)movjfb*n*!<e!j~p!wg!m~p!b<u*!mi!v-ft3!s-hic))4gdmfpwb!uo!sgv2u-f!sg!m~p!b<u1!/g73!-0!!gim!p>b!ui!!i~v!f<*1!/|7!!j>g,!!)ii!v|f!!*=1!/11/!1=*!!ii)v!fg!j,!>~!!2</b1u<m!ffEmdt!f0!!j*gh!!).i!vsf)!!?,!!21//15*!!>i!vif!!|.!>f!t2m/f1!<~!!g<mbpubmuf!Esdf!t0<!!*jsg!!.)!)c7)/!1,!!+1!/i3v!f>*!!i=!!|2!/*1y*b!Nsdf!t>!>>!!hg)2!!g,j!!)fgt3m!f.!!~g!2<*b!u+m!f7E/d1!!0+!!*icv!f.<!!hf)m!t>f!!ij!g|!!)*)y3b/N1d!!+>!>i!vsf)*!!g=j!!2</*1**o!jsNfdt!!,>!!ygb3N<d!)f!m.t!f1!/j3g)!!)0)!4b/u1m!f+E!di!v;f!**!o=j!N3d/!1,*!!ysbfNtd!)>!!0g!2b!u,m!f)Egd3!!@.!!6g/21*!!=+!!m)!)>3!/t1!!<0o!j4N/d1!*.!!.y!biNvdf!*>!!+b!u7m/f1E<d!!fumbtpfm!gs!f|t!!*>o!jgN2d<!!?s!fyubvNsdo)!!sgfjt!<<!1~/!3w!f0d!4*!oijtNmd3!s,h!cy)bwNfdd)4!!>i!tmm!*<!*|*!cw!f-dh4)!ysbhnc!<-!sj)gy!b)ni!t>m!/yzb!N>d>!!u1b/p1m*g!!|<!*s*hcc!!->h!)wofjdn4!)-ist)mo/j{n*!<>!!~o!jfNmdt!fu!b|p!mggm!p<bcu/!dg!3><!!cj!gu!b)pimtgm!/<{h!/=d!!1>/!6h*!!ugb3p!m>g!!i<tsm//d{!!>+!!s)!2u/b1p!m,g!!i<t1m//1z!*><!!mf!mutbfp!mgg3!!<>1!/i1t!m>/!{t!!,u!biptmmg/!z<!1./!2i.t!m>/!zi!!+u!biptmmg/!{|<!!*gdm!p4bduf!wg)2m!t>i!33c/h1s!!+4!diftwm!/~{!!<.c!hgs3!<o!ssvhucf/ss!!~>!!<i*v*f13/s4h0c1)/g22)-!!.g!3y-/!mittim!/-y3!g,!!-)22g/)1c0h4s/31f*v*i<!!>s!hcc//chh!s>!!<i*vyf/3msthic!)-g32g-!"],Hm.blitScreen=["?$TjWoodfmfvsedfT!u=jcm","~v!ojggjpesonf!$tb!n<q*mcfhss3/Es!pjmnpbDhhfb<s!Gw`bmshz)jhoohj!swffidu3j!ew!V>w!<c!hs$/jsgpemfpgD!hVbTsFG``MmJhO!FBHSOJ!SF$IjUoJdEm!vgeffe!g=jf$od!pegjjoeho?f$!!$<f*oweVjwg!-!fh$bjngje)fEg3!fEsJvUuIyFfSuJ!O>H!s!pm$pjDohdbmsvGe`fm!h=!dpfntnmpfo$?!!<w*f*dw4V!we!j-ufihfbsnjjo)hE)3wffsdv4u!ydfpum)pCsH*S!t|p!Ugsmbpfbouj!Mh!s>j!es`pqmpptDjhubjspGo`!m>h!!sbSoBeF)OhJmM``GFsTbVh!Dgpfpesgej/$yz!*|<!!*w)fodj4b!ne!jeujipfws!`tgijjegouf`$SH!C~!!><!CwHfSd`4u)g1j/i3t6`!s0f!i3u6j6e/!1,-!!s.p1m/p3d6!!o0s!v3u6f6s/!1<-*!o1p/j3u6j!t0p!q3`6e6j/s1h*!<-!CeHjSu`iufgsj`itti`jsgfui`uSjHeC!!+>!!1n/j3y.)!3-/C1H!S+`!uegjjuiitf`s"],Hm.pick=["~0!0<!e$fQnSsFpGgJtYob!svuo!j+g!pysjns!ucbpNpxmf!jvWUmffyeupvNsvf!<+!!vyojjsgupbsNnu!dnfbkup4s!QvvV!w>N!boupsjjuyj<t!pvQo`jmghp!sng!jnebouf5$!v!Q~s!p<ksfpdmupNDbiudsujbyC<b!!v>o!jsgppmspnD!indbuub5C!wv!N|p!e*fsmpNmbpuDsijdyu<b!Cvvo)j!ggpjs!n!SnPbMuP5D!IvDNUpBeCf!mgWfjefgxjN$bu!sjgyj<e!obfu$us!j~c!v<u*f*!1w/f2d!4-!wbVObp)s4ndbfmw<!!+b!uyujssjucbvNuwfV!vw)f3dd4f!wb!Q>p!twjVuwj!p|o!<*!fbsuvuusyjfcUvvu)f!!gwjf!d3f!tbmVfw$<!!<$*jyg/ewfVgb!!C-B*U*D1I/D2P!M-PwSVb!)v4odjfgwp!s+n!!ycjpspumb!NvwCVbvu)d3idDfpwm)p4sd<f!wb!u>u!swjVcwv!ufQ!JwMfDd`5W!Vb!CgbfuedgijD$pm!psg<j!ewobfs$zj!o<h*!ewffnds5p!gwtCobbusdui!D+p!mypjss<u!bN$mffoeepjNgv)!4d$fjwg!e>f!go!pVjWu`jDtMpJQQem!swpbXswz!jo1h!!>waf!dS4F!QwQVJwM<D!`Y$PfCm`tYfBN!!wgbjs$zj!ohg!jwefodf3$!w!V~w!<<!ef$nfsopegjtgob!su$!j+g!eeffgd!oCbBuUtDoIJJyOjTsUuBbONDbF!>!!veofjngsppsgnt!ocbpspum!!|v!V*tffdJoobtuutbooJdfft<V!v)$!egfjg!joFfD!OVBTUFT`OJJOITDUUBBOCD!JgOfHeg!j$$j!o~d!mv?ezfe!p=cj/ottwu/bhoodjjooohj/lwtt=/!iffebvem?do!j$$f!o|e!j*gho!jwobosjzljTofht!Vwvf)d!4g!jw!X<p*smmbenQspptOjbu)j4pdof<w!!w>b!smzbjnoshp!Owufddf4k!cwpM!p4ddbfmwQ!p<t*joupjjpuoj<t!pQ$be)f4gdjfowf!!>V!ToFp`jTuLjJtOpOQJmObHdp!Mw$!e<f*g1j/o2f!!-CoPpOjFu`jUtFpYQUbV)S5Fdf!wv!o>j!gepfsnns!pcgptpomb!svuV!t5fdTflwj!o|o!j*oehj<p!w)$ojjobdnm!veejfp!w=!tl?jeobofjio/ht/w","~0!0~!!$<QeSsFbGdJtYje!!v|o!j*g1p/s1n!!>c>p!pbm/!svpEmjptDdhbbsseGT`fmmhf)d!ugbjc!mfg<j!evoofj$gp!s<ns!pwmfpdD5f!tvsGfjwyfQSjlddljSQfywjfGsvt!f>D!psmppmsp<D!hvbosjGg`pmshn!!gfmtpmbfu$!v!B~m!q<isbpUmfptDuf<t!svfowjfgSplsdnj!QcypjpGmv!!v>U!ssbpomtpqDbhsbfsoGu`<m!hv!o|j!gfptsmnf!!c~p!p<ms!pvmUpfDyiudvusbfC<w!!>$!jsgpemfpgD!hVbWs`GD`MmJhQ!|!!w*bsspzmjpoDhi!dwufbdC4v!)w!Vgwj<!!S$PfMmPtDfID!UwBbCs!zgjfoehg!jw$fd!3!?wzVewp<c!/t$gf/oyepjcgqj!mvdo=j!gfpesvnm!dtobjn$qm!fs?3zEe!pvcT/btngq/mofpsj<u!df$sejfEgqjjomfd!=D!MfJeQv`mEdJoSjF$DU!J~P!O~!!~!$<jeosdbmdvtejfe!!=|d!m*juqtEfjUsbfidqumjBpvo!/>g=t!/bi/fsbpem?pD!wwvb)s!zgjjo!h|!!wfftdm4f!!w~M!p~d!b<meQspbtdjtujjep!o|<!!*w1b/s1z!j>o>h!!bw/fsdp4m!pwDXwpvs)m!egQjp!t|j!u*jupoof<s!bq$tjogbesfUgv!)C!BgUjD!IDgPjMePoSf$!v!o<j*gwpVswn!!-cspfpmmq!nvbCTbvu)dEi3Dfpsmvpusy<f!uw!b>s!zsjpomhp!Dwwfvd!5!fwtCmbfu$di!D<p*mzpys/<w!Vw$!f-osefjmgqn!bT$vj)oEd3mfvsevfu!y=fdum!j>q!csppym/pgDtw/vi!fbQeJ?MD!`wWpVj!eg!fnebgjjo$)w!p|j!e**f!m|c!bwufddf5m!fvTweDspbmdptsj<E!vjag!!%)%v!Uffsyvu"],Hm.envmapDynamicCompose=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*g1p/s2n!!-tcbhnsq/m*fbsi3qEm!bu!f-ycuhvss/f32s<p!mvpodj!g-pcshns!/t2bsnpqmmpfds)3yEj!nu)f5ydufvws!f>3!<s!pvmopjDghpbssnG!`gmmhp!b<ub!/p3gsgptmfpud<!!>w!bbsizqjmobh!!uwbfpdm3g!!w<V*w*<w!Vw$!j-o3dfmsvveufy!f=uf)oEd3pfesjvouhy?fu!)wspbjfeo!jnMbpjUoC)H*S!t|!!>w!f3ds5p!mdppdm!p5sd2f!w>!!<u*f*yzu/vwsVfw3!E-)uufftygugvps!f.2!-y!/wwfVdw3)"],Hm.blurH=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jngvpts!n>!!tsbpnmqpmDfhsb3sEG!`jmnhb!h<f2<6!1w/b1s!z+j!o*h*!zw/fwdV3w!!w-Vfwv<m!bvwo!j+g!p1s/n5!!g,m!pyb/uw!Vwwb)m3vdff<w!!w-pfjheb!nnjb)jEo3)f*s!v|u!ywffud!5>!,t!vnnv!t>!!<w9f2d:51)/11/!1+*!<*!*tzv/nw!V,w>!!-uffvymubvws!f+3!E1)/j4n!b,h!fy-/!wwVfwd)33)dwfVww!/-yf!h.b!n5j/)1E!3+f!swvbumyvffu-!!>w,V!wn/vzt*!*<!6+5!313/21/612!<+!!t*v*nz!/,w>V!wu!f-yfuvvmsbfw3!E+)!j1n/b3h!f,-!!yw/fwdV3w))w3Vdwf/wy!!-.f!h4b/n1j!)+E!3wfbsmvvufy-f!uw!V>w,/!zn*v*t!!+<!214/612:/219!<+!!t*v*nz!/,w>V!wu!f-yfuvvmsbfw3!E+)!j1n/b2h!f,-!!yw/fwdV3w))w3Vdwf/wy!!-.f!h3b/n1j!)+E!3wfbsmvvufy-f!uw!V>w,/!zn*v*t!!+<!414/7223/315!6+<!!*t*vzn/!w,V>w!!u-fyy/uwvVswf)33Ed)fjwn!b-hffh-b!nwjf)dE33)fwsVvwu/yyf!u.!!>2,/!1n!v+t!!w<b2m4v6f2-/!1w!V+w!/*z*"],Hm.blurV=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jngvpts!n>!!tsbpnmqpmDfhsb3sEG!`jmnhb!h<f2<6!1w/b1s!z+j!o*h*!fwvfmdb3w!!w+V!w1</!5v!o,j!gzp/swnV!wg!m-pyb/uw!Vwwb)m3vdff<w!!w-pfjheb!nnjb)jEo3)f*s!v|u!ywffud!5>!,t!vnnv!t>!!<w9f2d:51)/11/!1+*!<*!*tfvvnm!b,w>!!+u!f1y/u4v!s,f!3zE/)wjVnwb!h-fy-/!wwVfwd)33)dwfVww!/-yf-h!bwnVjw)/Ez3!f.s!v5u/y1f!u+!!>w,b!mnvvft*!*<!6+5!313/21/612!<+!!t*v*nf!v,m>b!wu!f+y!u1v/s3f!3,E!)zj/nwbVhwf!--!yw/fwdV3w))w3Vdwf/wy!--!fwhVbwn/jz)!E.3!f4s/v1u!y+f!uw!b>m,v!fn*v*t!!+<!214/612:/219!<+!!t*v*nf!v,m>b!wu!f+y!u1v/s2f!3,E!)zj/nwbVhwf!--!yw/fwdV3w))w3Vdwf/wy!--!fwhVbwn/jz)!E.3!f3s/v1u!y+f!uw!b>m,v!fn*v*t!!+<!414/7223/315!6+<!!*t*vzn/!w,V>w!!u-fyy/uwvVswf)33Ed)fjwn!b-hffh-b!nwjf)dE33)fwsVvwu/yyf-u!!w>V,w!/nzv!t.!!<22/416!2+/!1w!b+m!v*f*"],Hm.blurDownSample=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j1g/p5s!n0!!t*b*n*q1m/f2s!3-E1!/j1n)b3hdff<w!!w+b!sfz{jjoThm!fwyffdu3!!,w!VwwV<w!!v-ofjhgbpnsjn)!Ew3ffds3v!uuyffyuf!m,T!j*{*f1</!2w.p!j-e1!/n1b)j3od)f*w!!|+!!hfm{`jGTsmbfhyDfpum!p,s!!w>V!w)!u-ffyhubvnsjf)3EE3)fjsnvbuhyff-u!!w,V!w*!*,1!/u1f!y-f1m/T2j.{)f3!d+f!ww!f+d!3f){2j/T1m-f!y1f/u1!*,*!!w,V!wu!f-yfuhvbsnfj3)E"],Hm.flow=["~v!o<j*g1p/s2n!!-c1p/p1m!!-v1t/f3Y![+<!!wbVuwu)s5jdcfvwu!f>!!wofpdj4u!jqtpptQj`umjhp!o<<*!zw/bospzjjuojht!pwqf!d-3y!/woVpwj<u!jwtppjqe)!3ndbfjwo!)>*!!w|V!wj!gf!t)mvft!f<Y*[{*/!owpVjwu!j>t!pwqf!d-3y)/qopptjju","~d!p<oztuuj!tgomfpubouj!!q+j!3b!/>s!p7m/p3d9!4+2!9s6p4m<p!dv!o>j!gsppsmnp!DthbbnsqGm`fmsh3!E<!ejonfbmhcf!<+!!v*o*jzgyp/s*n*!1n/b2u!4-!wvvw)N4bdufswj!y+<!!yvjosjugbpNswnv!)j)o3ud!ftwi!b-qffh<b!nvjo)jEg3pfssnv!uwyffdu5!!>c!msfpomep<d!!v5odjfgwp!s~n!!<g*mfpmbhuo!bj!o-u!f*o3tjjqu!z+<!!fwmbhsozBjeophn!)wtfpdd3!!+w!V1w/<3!!w+p!j*ew!Vnwb)jiou)h*o!f|m!)w3fddf3w!!v>w!<w!vg!m<p6b/u1!!b+o!hqmffu!t>!!.b!u*bqof)uwtV!w-/fzm-h!owbV)we/pyn*!!>0!!fqmjh3o!B,e!p1n/!6u<b!pjmgg!!)<t*i2b!q,f!!f>q>b!i1t*)!u|b!pvmwg!!>0!!w1V/w2!!,>!!1q/f6u<t!!~u!bfpmmtgf!!|j!gf!t)mtfi!b~q!f<!*>f>m!h2o*b!!|-!1v/w3!!>+!!w*fwdV3w))mifuoh"],Hm.fxaa=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jbg/p*swnV!wt!b-nfqhmbfnsj3)EE!3jfnsbvhufy<f!uv!o>j!gbp/ssnp!mwpfDdh3b!ssGf`tmphm!v<u*j!p*o1</!1w)b5sdzfjwo!h-!1w/f1d!3-!1w/V1w!<-!1/$1e!f-g4j4o9f1!/G1Y!B-B7`7R2V/B1M!J-U6Z8`/Q11!!-2*/11/1!)5$deffwg!j-o*f1!/G1Y)B5Bd`fRwV!B-M*J1U/Z1`)Q52d!f2w/!6-o!pj$uevfmgpjtoffs!!G-YfBhBb`nRjV!B-MfJhUbZn`jQ!3-!f3h/b1nj!!-$*e1f/g1j)o5fd!fGwY!B-Bw`VRwV!B)MsJfUeZb`iQT4m!f5y/j1Qb!by$Ge!f>g!jsopfm!pGDYhBbBs`GR`VmBhM!J|U!Z*`)Qo5j!b2n3!/e1jp!w!$~e!f<g*jNobfn!vGmy!b-b{Czpyp/m*!Nctpppqm!-!yf$ue)fqgpjUoyff!UGbybbybGG)m5pubbup!mgGmbpbbyuG!!os$veuffgsj!o<fo!hGjyTbibuGhmopfbmu!3+!!wyfjdq3cv!Tu$fetfgggjPomff!yGjyqb!b>G,m!pzb/uN4t!pwqf!d*4ob!qT${esfpgij)ogfj!!G<yobhbjGTmipubhuo5f!mw!f+d!5yj!qc$veTfugfjtogfg!PGmyfbybjTqb!u>),y!*y!/dNmtbpnqq!)*yo-b!q1T/{1s-p!i2a/)1g*j!!<*$Ieyfjgqjcovft!!G-yebpbpUHfuyf!ttgbgnPqmmffysj3qE)y!bn$!e>f!gyjjoqfc!vGTyubfbtUgfgyPUmpfqy)juq-!!uqb*p!muGfbybuyvGs!f<31E/)1u!-;!!qu-f!t1g/g1P*mf!yj$qe!f@g!joobfq!TGeypbpbhU!f>y!Pegpgp)Huu-f!tqg-g!Ppm-f!ysj*q!!uufbypumvGsbfb3yEG)!u<-y!jqq!c,v!T)zpu!j+m!bsv*R-b!b1y/g1!*+!!HGyyjbqbcGvmtp!b>u!!IGyyjbqbcMvvtn!bu)bGpymbGbbGbmypGb!u<56!/s1h!c,b!**!*|q!dsSfiuuvhsoof!Msohbcqbt/.z)<!!+~!!uGtyeb)b!G>m!pubfut5g!gGPymbfbyQjjqy!fumbTpimbGebfbsy)G!!G<yGbybjGqmcpvbtu!3+!!qGpytj-q!cGvytb!b>G!mHpybjuq5c!vgty!bubbDppmoGtbpbmyfGQ!p<tQQopbtq-T!eGpypbhb!U;f!yO!oubfqyT-e!pGpyhb!b@U!fOyo!pgjyubdbfDspjoet!p>m!fo4b7q1TUefpypFhy!qmCpjpbCtbObfyhGP!o<f*-Q!uGtyeb!b-UOfuyt!eg)yobjbnD!p>o!tuptmef!4u7b1pUmfGybFbyyqGC!j<bQtuOtfeh!U=x!pO-u!tGey!b>b!GOmoppbjuu3d!fgsyjbeb!RmvpbpmCjbubzySGd!q<Gisubhnoff-M!oGbyqbtb0G1m/p2b!u>5!!qgdySbibuDhpooftMpombfqStd!quGbspbmnGfbPbqyuG-!!<Gpysbfb[GUmMpNbbun5v!mg!y>bab!D*p1o/t1p!m=f!SQdeqoGFsbbnnvfmP)q!u>3!-Q!oGbyqbTbeGpmpphb!um5p!pgCybbbbyDGp!o<t*pOmuft4e7!1,S!dQquGtseb)n!f>P!qiuu3h-o!fGMyobbbqGtm!pubbup!mgGybbbbyRGv!b<mpjsufz[TUvMcNqbjnyv-m!!G>yab!b*G1m/p1b!u=!!gOyebobFRbvnbvmmj)u!z>F!eOhofbUqiTsefptpihp!mmep-p!CGbybbybGG!m<pzb/uN!tgpyqb!b.R!vzb/mQjtupzqF!e>h!fQUuitsef!t*iopbmqeTN{jsop-i!aG)ygbjb!G<mzp/bOut!pgqy!b.b!Dzp/oNttppmqf!F>e!hOfuTtieb!s*qoobfqtTt{-s!pGiyab)bgGjm!p<byu/!Ngtypbqb!D.p!oyt/pQmtfpFqe!h>f!UQiustfet!iupbmpem-G!bGbyybGb!G<myp/bOut!pgqy!b.b!Dyp/oNttppmqf!F>e!hOfuUties!futbippmmGebNbjyoG-!!~G!y~b!b~G!m<p5bQu`5Z!UgJyMbBbVDRp`oBtBpYmGf!4+7!1zD/pQoOtgugEpj!s>!,*!!z|/!QGtypbqb!G*mQpfboup3e!aq)pgtjN!<<!5qQp`tZNU/JyM!B>V!Rq`pBtB/YyG<!!+q!pyt/NQ/Ozg!g>p!!q>p,t!/yz/<Q!tGpyqb!b*GQmfpobpue5a!)sghjc!z<N*!Q>f!oGpyebab)U!f}y}U!p*qO)fuofpye-a!)q!p>t!NQ*O<f!op$ee!f<g5jQo`fZ!UmJvMnBbVNR!`sBhBcYzGN!/+z!z!/GQyObgbgGpm!p>b.u!!zm/vOntbpTq!!>*!OGfyobpbeMav)ngbj)!G<y5bQb`UZfUyJPMgBgV)Ru`fByB-Y!Gq!p+t!Ny-/!QGOygbgbpG!m>p.b!uy3/)O1t/p1q-!!*2O/f1o*p-e!ag)ygbjb!R<vebfmmjbudzTSudoqfGjsebbnsfh/!y>z?*!**<Q!eGoyFbbbnGvmmp)btuc!bm!v>n!bQFf!o>p!eG!y<bebfMmvbndbT)uGoyfbjbeUbfsyhP!g>g?)!u*fOye-o!FqbpntvNm-)!tGcybb!b>G!mOpfboup3e)!2</61/-1!!1+/!1O*O-b!ngvymb!b.R!vQbemojFubznSvdmq!G>s!bQnefo/Fybzn*v*m<!!*GQyfbobpGemap)bguj!!m<v6n/b1O!!+>!!OGOybbnbvMmv!n.b!)OGeyobFbbUnfvymP!g>g!)OuefoyF-b!nqvpmt!N*-O!fGoypbebaG)mgpjb!u<3*)*1z/y1/-Q.t2p/q1!*--y!fguy)bqbpRUvybfmUjbubzySGd)qbGnsvbMnbfb/yyGz!*>*!<Q!eGoyFbbbnGvmmp!b*uQ!fmovpnebaX)!g>j!!G<y*b*bzMyv/nObt)pGqy!b-byUffuy)PqgpgU)yuffUyb-b!yqGp)tbNn-v!MGbybbybGG!m>p!bOue3o)F.b2n/v1m-!!*1O/f1o*p-e!ag)ygbjb!R|v!b*mQjOufzoSpdeq)Ggsjb!n<f4/Qy`zZ*U*J<M!BGVyRb`bBGBmYpGb!u+!!nzb/yQTONg!g>p!!n>b,y!)zm/vQntbpTq-!!*mQvfnobpNe*a<)!gGjy!b<b4GQm`pZbUuJ!MnBjVoRT`NB!B>Y!Gn!j+o!)ym/vQnObgTg-p!!m>v,n!byN/*Q<t!pGqy!b*bQGfmoppbeua!)ngbjy!F<T*NQ!f>o!pnebay))!m}v}n!b*FO-f!onpbeyaT)N!*><!!QGOyfbobpGem!p<b4uQ!`nZjUoJFMTBNV!R>`!BnBjYoG)!m+v!nzb/FQ-O!gngjpo!T>N.*!<z!/GOytbpbqG!m*pObfuo!pnebay)XgOj!!><!4nQb`yZ)UmJvMnBbVOR-`!BmBvYnGb!X+*!<y!/GQyObgbgGpm!p>b.u!!yn/jOotXpOq!!>*!Onfjoop)emav)ngbjO!-<!emfvmnbbdXT*u<o!fGjyebbbsGhm!p>b?u!!*sQbeoohFfbNnbvym!)>t!cnbb!y>)!nQbfyoXpOe-!!<nebfymFbTdNT*u<o!fGjyebbbsGhm!p>b?u!!*sObeoohFfbNnjvom!)>t!cnbj!o>)!nOjfooXpOe-!!<n6j/o1F!T+N!*O<O!bGnyvbmb!G.m!pQbeuo!Fsbbnovhmf!N>b!yQTedobFmbfnev!m>!!*sQbfoohpfeNab)yg!j+!!<g6y/b1b!R+v!bOmOjbunzvFme!h.f!UOiesofFtbinpvmme!<>!!GOyebobFGbmnpvbmu!!*sObfoohpfe!a>)!gsjb!o<h*f*Nzbyy/!Q.t!psqb!o-hyffNuj)oq<p!UGyyfbUbbGbmypGb)ub!nsvbMobhbfyNGb!y>D!mQbenoqFfben!v>m!!n*bQyf)ogpyebab)Rgvjb!m<j*u*zzFye/hOftUpiqs!f-tyifpum)eqNpjUoy-f!UsbbboyhGf)NbbnyvTMdbbbmyfGe!*><!!OGeyobFbbCnpvpmm!!*fObfsompzeFay)jguj!!>|!!s*bQoOhffo!p=e!)sgbjo!h<f3NQb`yZDUmJbMnBqVfRe`<B!BjYgG)!f+b!szm/zQFOygjgup*!!>s,f!uzv/sQot!psqh!c*zQNf<o!pGeyab)bgGjm!p<b3uQ!`mZvUnJbMOBXV!R>`!BGByYbGb!M+v!nyb/)QGOygbgbpU!f>y,P!gyg/)Qutfpyq-!!*qQpftoNp-e!aG)ygbjb!G<m*pQbfuo3p)e.a2)/!1}-}.!2*/O1f*o-p!egay)b!b>R!vQbOmfjoupzeS!d<q3GQs`bZnUfJ/MyBzV*R*`<B!BGYyGb!b+G!mzp/bQuO!gmgvpn!b>T.F!!z>/!OGtypbqb!M*vOnfbo)pGeyab)bgUjf!y<P3gQg`)ZuUfJyM-B!VqRp`tBNB-Y!GG!y+b!byG/mQpObgug3p)!2>/.1!-y!/2O/t1p*q-!!*gOyfbobpRevab)mgjju!z<SedfqmGbsdbTnufo/fyjze*b*s<h!!G>y?b!b*GQmepobFub!nmvvmn)btOcFb!!>>!!GQyfbobpMev!n<be)fGmybbdbTUufoyfPjgegb)suhf!y>-?!!q*pOteNo-F!bGnyvbmb)Gtmcpbb!u>3!)O2f/o1p-e.!2</61/*1-!!+g!yObObbRnvvbmm!j.u!zQSedoqFGbsnbvnmf!/>y!zQ*e*o<F!bGnyvbmb!G*mQpfboup!emav)ngbjT!X<!6>/!1G!y+b!bOMOvbnnbv)mG!y.b!bOUefoyFPbgngv)mu!f>y!-O!eqopFtbNn-v!mG!y*bObfGomppebau)3g)j.!2</*1*-z!y2//Q1t*p-q!!g-yybfbuR)vqbpmUjyufzUSbdbqyGGs)bbnnfv/Mybzb*y*G<!!>G!yQbeboGFmbpnbvum!!m*vQnfboOpTe!a>)!gmjv!n<b*O*!z,y!/mOvtnpbqT!<-!yGfyub)bqGpmUpybfuU!bmbvynGb)XbFn!v>M!bmbvynGb!X>!!,O!emovFnbbnFv<m!!G*yObfboGpmepab)ug!jt!v|c!q*jQyOSfdoqpSeb)oghjf!!<>2!Q2`/Z1U0JsMbBoVhRf`<B!BGYyGb!b+G!mzp/bQuO!gtgvpc!q>j,y!OzT/XQFt!p>q!!m*vQnfboOpTe!a,)!gmjv!n<b2XQF`<Z!UGJyMbBbVGRm`pBbBuY!Gf!e+h!fyI/pQsO{g2g!p>!!>),.!3y//1Q!t+p!qm!v*nQbfNo*p!e,a!)mgvjn!b<O*TQ<f!oGpyebab)G!m}p}b!u*!OffeohpfeWaf)s!u>2!!Q>O!f)o.p3e/!1m!p+p!CmbvbnybGN!*<!2,Q!`mZvUnJbMXBFV<R!`GByBbYbGG!m+p!bzu/!QmOvgngbpO!F>T.F!!z>/!Omtvpnqb!O*FO!f,o!pmevan)bgTjF!<<!2GQy`bZbUGJmMpBbVuR!`mBvBnYbGO!X+O!Fy!/>Q!Omgvgnpb!O>X.!!,y!/mOvtnpbqO!F*<O!fGoypbebaG)mgpjb!u<!effemhbfdITpuso{f3j!e>b!s)h.!3>/?1!!*+Q!emovFnbbnFv*m!),t!cmbv!n>b!OQFfToFp<e!!GmypbpbCGbmbpybGu!!<feefhmfbWdfTsuuo3f!j>e!b)s.h3!/>1?!!+*!OmevonFbbOn*v!m,)!tmcvbn!b>O!XOOfFo<p!eG!ymbpbpGCmbpbbyuG!!m<v6n/b1O!X+T!XO!O>b!nmvvmn!b>O.X!!Q,e!omFvbnnbvTmX!<<!6G/y1b!b+G!mOpObbun!vmmv!n>b.T!XOTeFo!F>b!nmvvmn!b<T1X/!1,!!=m!vNnNbbTnFv<m!!G>y!bpbsGfm[pUbMuN!bfnevhmf!Imppsp{C5b!b>y!G)!b<cFty)jfqechvftI!p+s!{E2y*j!q+c!v3t/!1>*!!G,y!jbqcctv)tf!euhbfpImpGsb{b3y*G<!!<G6y/b1b!G+m!pObOub!nfvemh!f.W!fNsbun5v!m>!!>)!bNcNtb)nfvemh!fuWbfpsmuG2b*b!y+G!!3</11/*5!0,1!/b2c!t+)!fueohffjWefbssuh3!*><!!eGfymbbbdGTmupobfuj!efbeshhf!Iupbsp{m4G!b>b!y)G.!3</T1T!b+n!vmmv!n>b!XO*O!b,n!vmmv!n*bOOsXjTbXq<a!)Ggyjb!b<G*m*pQbtup!qf!e-hyffWuf)squp4U!y>f!U)b.b3y/G1)!b+n!vmMvbnbbyTG*!!>,!!QmevonFbbTnXvTmF!<u!bGpymbGbbGbmypGb!u<!DfyejhqfcIvpts!{+!!>D!ybjcqtc)vfte!h>f!IFpysj{q4c*v!t,!!ufbephmfGIbpbsy{G5!<<!*G*yObtbpGqm!p-byuf!uf)eqhpfUWyffsUub!b>y!Gb)cbtn)vfMebhbfyWGf!s>u!4O*e!o,F!bfnevhmf!Wufbspum5G<b!bGyyGb!b<G1m/p4b!u,!!t*vDcyqjjqycOvXtT+X*O1F/T3F.!)>)!!m>v!nEbyOjXqTcXv!t,!!umbvpnmbGObFbTyFG<!!<G1yQb`bZGUmJpMbBuV!Rm`fBoBhYuGi!T+j!hzo/!Q>O!gggypb!b,R!vzb/mCjtupzqS!d>q!Gzs/bQntfp/qy!<<!1GQy`bZbUCJpMpBmV!Ri`pBsB{YTGq!b+o!!y>/!QfOeghgfpI!p,s!{y!/?C>t!pfqe!h>f!Wyf/sQut<p!qG!y<bQbtGpmqp!b3uu!btpvmcGqbjbyyBG!!><!1tQv`cZqUjJyMOBTVXRF`!B+B!Y3G/!1+!!,z!/tQvOcgqgjpy!O.X!TzX/OCFtTpFq<!!>j!gz)/aOitppsq{!T<q1bQo`*Z!UmJvMnBbVOR!`>B!BmYvGn!b+X!<y!/jQgO)gagipp!s.{!Tyq/bCot*p!qm!v>n!byT/!O>t!pmqv!n<bOFt<p!qj!g3)uibppsm{GTbqbbyoG*!!<m6f/o1h!u+i!TojhhjoT!i>u!hgoyfbmb!R>v,b!mzj/uCztSpdqq!G*sobbnqfT/{zs<p!iG)ygbjb!G<m6p/b1u!!+t!vochqjjTyiCu!h>o!f)mt!v>c,q!jyy/BC!t+p!q)!2*/o1b0q2T3{/s1p*i*a!).g!jm!v<nzb/Nf<n!bGsyGbqbdGSmzpubjum!bhvsRbbebjyfgo!u;O!!1>/!1m!v@n!b*Oo!b.q!Tm{vsnpbiN)<!!>G!yzb/bQGOmgpgbpu!!<hys/bfenjbfsoGuqTd!S>z!umjvmnbbvTR!b.b!ymgv!n;b!N1</!1G!y@b!b*GombpqbTu{!smpvinab)O!O>!!>y!/mQvOngbgOp!!,<!QmOvgngbpN!<3!uGbypbmbGGbmbpybGu!!<mzv/nNbtTpTq!!>>!!mzv/nCbtTp!q,!!<myv/nNbtNp<q!!G>y!byb/CCptppmq!!q<bCjtspOq!!>3!ubbcptm)GhbsbbyeGj!f<o*ufOh*o!b?S>q!dbScytj)qhcsvbte!j+f!o*uCTy*j<q!cGvytb)btGcmbp)buub!ThbsbbyeGj!f>o!uD!y>j!qncbvyt)!bucbtp)mhGsbbbeyjGf!o<uoOh*j-T!ibuchto)fhms.b!e>j!foohujTT*i*u<h!ojfgm)!q*bOjs"],Hm.points=["~v!o<j*g{p/sonp!jnubjut5p!Qnwpne!f.m!N0b!ufsmjbyd<t!)v!o>j+g!pfs{nj!Tnubouj5p!Qn`pmehf!m*WfjwfjxuNdbfuqstjsyf<Q!tvjo)j!ggpjs!n<!*n1b/u25!!.q!s>p>k!f^d!u4j!p]o^N!b3u!s]jyyj<s!uvboNjogppjsund!fnkbpus5q!)w!j>f!xfNwbjuusdjfyq<t!svfoQjtgjp!smnp!pgcm!p~b!u<!otpdjbumvfm<p!tvfosj!g+p!sfn{!jwtf!d>3!!fv{VjwTPugogjtpfQu`<m!hv!o|j!gfptsmnf!!c~p!p<mo!pvjtufvVmwpBtsfssb!z+<!!zbbusussBjfc{vjutf!!>w!ffd{4j!TqupotjjpuQj`pmoh<!!|v!o*jzgbpsssnB!fc{pjpTmf!tvvt)f!Dgpjm!p<so<p!jbuujutspjQcwvnu!f+!!wyfjds5u!bdNpomppjsu<d!fwkbpsszqj!o>h!!owpfjdu5j!twpDQp`mmphs!<<!obpujuusjjtcpvQuwfn!!w+f!dy3j!sbuVbwNPxgfgjtWfmuf<e!pwnb!s>z!joophj!uwjftdp3Q!wwnP!g<g*t1f/u2<!!-veofjngsppsgnt!ocbpspum)!5qdjfdwl!j>o!ho<p!jbuujutspjQcwvnu!f5!dwffwd!5<!*qojpdjluDjptmppqs)<4!dvfowj!g>p!senf!ngsmppgbtuo!btsju{!f4<d!fvwo!j~g!p<s*nu!fgtmgpgbPuw!Vsbf)t3pdmfvwu!j>p,o!<u!fvtogjggPpws!n|!!c*pzpbms!svBtwfVTfjt{vf)B!sgsjb!z<<*!ubfutugsgjPcwvVuvf)!3gdmfpwb!u>!!tujf{tfgBgsPswb!z~<!!<cspppmmp!dj!t>Q!fssptmqpfDdwu!j|w!f*NsbpumspjDyf)tnvb)u!5g!jn!*f!t|m!fs!f~u!v<ssop!mnp]D!l3d!j^q]!!>4!!s^p!m>p>D!w.!!|2!/*1h<o!j~l!dwjpqj)e!!gnjb!j|o!)*","~$!e~f!g<jsopfm!pVDTfFt`vNgBgQje!!v>o!jsgppmspnD!hwbfsdG5`!mehj!g|g!vfttfm<f!!v~o!j<gsppsmnp!Dgwm!p>b!us!ppmqpbDdhjbuszG<`!mvho!j<gepssbnd!tgjmep!b*u1!/b1m!q>i>b!Ubf/tsup<m!pvDofjtgvpgsgnj!ec)p!pgmj!!v|t!f*Dhpomjplsd<j!qw)b!sgzjj!o<he!swbfddt5j!ew!D*pumtpfsU<b!ivqomjbg!p=s!nb!/cspppmmp!Dqfjtdvlgjgojhe<)!!vgojj!gpgsjne!ocfp$pm!!~e!j<t*dwbvs!e-Tqfbmnf)dEu3bfcsmvfu<y!fvuo!j>g+p!ssnp!mcppDpfmt!vcgmgbjdel!p<vuuf<t!gvgoPjwg!p>s,n!!wwvf!d<3f!mvbwdTTdwbvm!f+<!!ewsbpspzDjuoohj!pwQf`dm3h!!w>P!gwgvt!f3ud<f!w!$|j!g*!femfcgbjuodffem)fVTTeFs`bNdBtQj*ea!!v}o}j!ghposjnl!dtjbqnaq)m!fgsj3!E!*nQbBqN<`!FT$Vf)oeefjogjg!fwep!jgej!$nb!j~o!)<**!z|u!jjdgb!q)pc!m+b!dbl/pfvtuv*g!g|j!eh!m-`{Gzsyb/hfDtpvmgpgsj!e>)!5wdffdw5!)>1!/s1p-m!p1D/f1t-v!g1g/j1e-!!|2!/f1t*m<f!!s~f!u<v*szou<j!d~b!qwpf!d+5!!be/jsgpgmvptDfwD!p-m{pzsy</!sjpgm!p)Dawq)j5ddlfjwo!h>!!%s%p!mvptDffDtpvmgpgsj*e!!|"],Hm.bokeh=["?$TjWoodfmfvsedfT!u=jcm","~w!b<s1z/j2o!h>!!wbf/ds3p!mwpVDwh<b!svGo`jmghp!s<n1!/c2p5p!m0!!vmtpfdE!f>q!usip<m!pvDohjbgspGs`nm!ht!b<n*q5msfvsm3cEg!pueD!p+m!p*su<d!fvsosjpgdpusdnf!qttbbn!q+m!f*s53/E1!!u-E1f/q1u)i3<d!fvwo)j!g,p!szny!/cwpVpwm!!-vstpfmHp3Deu<)!Ev3ofjsgvpusynf!ug!m>p,b!um!pudi!s<f*t5ispvmmec<g!pveo!j+g!p*sund!fgsmsppbduu!dnfbqytcbm!v+s!<*!:v3o/j1g.p!s-n:!3g/m1p.b)u3!dbfqwf)s!u,v!szfy</!wvVowj!g-psspnm!pgDmup)bEu3!fosfvbusyDfmuj!q><,!!vmopjdg!p<s*n5!sgvmmpcbgup!eg!b+s!D*mujdqf<s!svpodjugdpfsqnt!bg!m+p!b*u1!/g1p!d-v5t/<1!.v)o3jdgfpws)n!!,g!mzpyb/uw!Vbwt!q-fsdpum<p!Ddup)oEt3uf!sgvmupybfuu!!V>o,q!bmdpldE!p<x*o5tsdvbmmcfg!p>e!!3+6!6*/u!d0f!s3s6p7d/u<d!fdqptobt!u+!!w*f:d34/!1Q!b-d:l3G/b1d.u)p3sdtf!w>)!!w,f!dz4y)/3w6V7w/!!-+s!p3m6p7D/u!)+E!33f6s7v/u-y!f3u6!7>/,!!+m!p3d6!7</*-5!s3v6m7c/g*p<e!!d+p!o*tuud!fwsfsdp5d!uVdofqqbtdbl!G+b!d*u5p/s1t.!!>-!1V/o1q)b3ddlfEwp)x!o,t!dzbym/fw!V0w!!w-fsdp5m)pQDbud)lEG3bfdsuvpusytf-u!!2>/,*!<m!pgdm!p<b*u5!svvomqcbgdpleS!H+C!B*UupdEffsqsupid)uddpfoqttub!!j+o!!*w:f3d/51!.w!*-!:|3!/s1f)u3vdsfow!)e!p,u!)zwy-/!wVVowq!b-dslpGmbpdDuup)sEt3*f<s!v~u!ygfmup!b>u,!!hmfpudE!f<q*u5is)vdmpcogtpue!!j+o!!*wufddf3s!stpddsufdffoqQtpbt!j+u!j*p1o/*1!!|-!5s/f1u)v3sdof!wv)o!q,b!dzlyS/HwCVBwU!p-EsfpqmupiD)uu)fEy3ufvssvfu3yEf)uu!E>f,q!umip-d!!t<d*s5fsfvomQcpgtpjeu!j+p!o**u*d<f!s~s!pgdmupdbfuq!tqbf!s+t!q*f:d3u/j1w!f-E:f3q/u1i)U3pdWfjwf)x![,)!dzpyo/twuV!wj!o-!sgpmmppbDuu!)jEo3wfDsmvjuqy[f-u!!d>p,o!tmup!dj!o<!*g8mspvbmuc!gopfeb!s+-!!*dupdoftsus!pjdou!dgfmqptbbu!!+g!b*s5*/!1|!!-s1f/u1v)s3od!f)wo)f!b,s!!z+y!/gwbVsw*!!-0s!p)m)pgDbus)!E.3!fosfvbusy*f!u+!!>j,o!wmDpmdj!q<[*!8.s!vgmbcsg*p<e!!~+!!g*mupdbfus!shpfduuWdjffqxt[b)!d+p!o*t:u3!/j1o.!!g-m:p3b/u1!.e)f3qdufiw*)!!|,!!szfyu/vwsVow!!q-fssptmqpfDduu)jEw3ffEsfvquuyifUup!W>j,f!xm[p)de!f<q*u8is-v!mocfgbpseD!m+j!q*-u!dgfbsssDpmdjuqd*f<q!t~b!!w+p!j*e1!/n1b!j-o5)/*1!.|)!3wdffdw3)!!e,p!gzcym/vwsV<w!!w-fsdp3m!pbDtuq)fEd3ufdspvsusyffduu!!>>,!!wmfpdd3!)<2*/81s-v!mbctgqpfed!u+*!<*!ujdgf!s)svptdfuEdffqqutib*!!+|!!*g:m3p/b1u!!-w:j3f/x1[.!)>3!dhffwu)W!j,f!xz[y)/hwfVuwE!f-qsupim)pwDVuw)*E*3<f!sgvmupybfuu!!g>b,d!umppsd!!><!*)8gspvdmvctg!p,e!!w+j!f*xu[d*f<s!seppdgucdmfvqst!b>!!+w!f*d53/!1).d!m-b1n/q1))g3bddfuwp)s!!,+!!zbyq/fwsVuwv!s-fs-p!m.pnDbuy)cEm3vfss-v!unybfyuc!m>v,s!*m*p<d!!~<!*f8mstvfm!c|g!pwef!d+5!!*uufdyffsms!p>d!uudffyqutvbs!f+3!E*):u3E/f1q.u!i--:!3w/f1d)33)dwfVww)/!y,-!!z2y//1w!V.w!!w-Vswp/mzp*D*u<)!Eg3mfpsbvuu!ybfmuq!i>b,<!!mjpgd!!)<v*t8fsHv3mec*g!p|e!!b+m!q*iubd!f>s!stpndpupdufiqttubf!q+)!u*i1s/f1t!i-p1m5e/-1!)u3idsffwt)i!p,m!ez!y,/!w1V/w1!2--s!pumfpyDfum)/Eb3*f<s!v~u!yffmut!f>!,|!!mbpmdq!i<b*!8>s!vumfcygfpme/!b+<!!*~u!defpsgscpmdvusd!f>q!twbf!d+3!!*):d3m/b1n!q-):b3m/q1i)b3!d+f!wb)q!f,s!uzvys/fw-V!w.!n-bsypcmmpvDsu-)!En3bfyscvmuvysf*u*!<>!,~!!mwpfdd!3<!*e:psgvcmmcvgsp:e!!>+!!e*pugdcfmsvssp!d+u!d1f/q:t<b!!w+f!d*38!4e/p1g.c!m-v6s28/!1>)!3edpfgwc)m!v,s!!z+y!/1w/V8w<!!-wsfpdm3p!Deup)gEc3mfvssv5u!y>f!ue!p>g,c!mmvpsd!!+<!*1:/s5v<m!cwgfpde5!!+d!p*mu!d>f!swsfpdd5u)d1f/q1t*b<!!+d!p*m6!2,/>1!.u!f-y8u4v/s1f.3)E3)dufDwp)m!p,s!-z!yw/VwwV/wy!z-*s<p!mdppDmu!),E>3!fusfvyuuyvfsuf!3>E,)!umDppdm!p<s*-:!swvVmwc/gypze!!,+!!)*wufddf3s)s1p/d1u-d!f1q/t5b*!!++!!*b6t2q/f1d!u-d8p4s/s1f)d3ud*f!w+)!!e,p!gzcym/vwsV*w<!!-dsppmm!p,D>u!)uEf3yfusvvsufy3fEu)!u>D,p!mmppsd-!!<w*V:ws/vymzc!g,p!e)!w+f!d*3u)d1f/s2s6p-d!u1d/f4q8t*b!!++!!b*t8q4f/d1u!d-p6s2s/f1d.u)*3!d+f!we)p!g,c!mzvys/*w<V!wd!p-ms!p,m>p!Duuf)yEu3vfssfv3uEy)fuuD!p>m,p!sm-p!dw!V<w*/:yszv!m,c!g)pwef!d+3!)*1u/d3f:s-s!p1d/u3d:f*q!t+b!!b+t!q*f8d4u/d1p.s!s-f6d2u/*1!.+)!3edpfgwc)m!v,s!*z<y!/dwpVmw!!,->s!pumfpyDuuv)sEf33fEs)vuuDypfmup!s>-,!!wmVpwd/!y<z*!:,s!v)mwcfgdp3e)!.+1!/*4u8d-f!s1s/p2d6u*d!f+q!tbbt!q+f!d*u6d2p/s1s.f!d-u8*4!/+1!)e3pdgfcwm)v!s,*!<z!yd/pwmV!w,!>-!supfmypuDvus)fE33Ef)suvDupymfpus!->!,w!Vmwp/dy!z<!*,:!s)vwmfcdg3p)e1!/+5!1*-u!d1f/s1s*p!d+u!dbftqqtfbd!u+d!p*s6s2f/d1u!*-!8+4!/e1p.g)c3mdvfsw*)<!!,d!pzmy!/,w>V!wu!f-ysupvmspfD3uE))Eu3Dfpsmvpusy-f!uw!V>w,/!ymzp!d,!!<)*w:fsdv3m)c1g/p4e8!-+!!.*1u/d2f6s*s!p+d!ubdtfqqftdbu!d+p!s*s8f4d/u1*!!-+6!2e/p1g)c3mdvfsw*)<!!,d!pzmy!/,w>V!wu!f-ysupvmspfD3uE))Eu3Dfpsmvpusy-f!uw!V>w,/!ymzp!d,!!<)*wsfvdm3c)g1p/e3!:+-!!*.u1d/f3s:s*p!d+u!dbftqqtfbd!u+d!p*s8s4f/d1u.*!!-+6!2e/p1g)c3mdvfsw*)<!!,d!pzmy!/,w>V!wu!f-ysupvmspfD3uE))Eu3Dfpsmvpusy-f!uw!V>w,/!ymzp!d,!!<)*wsfvdm3c)g.p1e/!2+6!-*!u.d1f/s4s8p*d!u+d!fbqttqbf!d+u!d*p:s3s/f1d.u!*-!:+3!/e1p.g)c3mdvfsw*)<!!,d!pzmy!/,w>V!wu!f-ysupvmspfD3uE))Eu3Dfpsmvpusy-f!uw!V>w,/!ymzp!d,!!<)*wsfvdm3c)g1p/e1!-+!!.*1u/d5f*s!s+p!dbutdqffqdtubd!p+s!s*f6d2u/*1!.+!!-e8p4g/c1m.v)s3*d<f!wd)p!m,!!,z>y!/uwfVywu!v-ssfp3mEp)DuuD)pEm3pfss-v!uwyVfwu/!y>z,!!,m!p)dw!f<d*3s)v.m1c/g2p6e-!!+1!/*4u8d*f!s+s!pbdtuqdffdqutdbp!s+s!f*d1u/*1!!+-!5e/p1g.c)m3vdsf*w<)!!d,p!mz!y,/>w!Vuwf!y-usvpsmfp3DEu))uED3pfmspvsu-y!fwuV!w>/,y!zm!p,d!!)<w*fsdv3m)c.g1p/e3!:+-!!*1u/d3f:s*s!p+d!ubdtfqqftdbu!d+p!s*s6f2d/u1*!!-+8!4e/p1g)c3mdvfsw*)<!!,d!pzmy!/,w>V!wu!f-ysupvmspfD3uE)"],Hm.glitch=["?$TjWoodfmfvsedfT!u=jcm","~v!o~j!g<p*swnV!wj!o-uf!hcbznqj<)!!vEo3jfgspvsuny!ftub>nsqpmmfpsD3hEb!sjGn`bmhhf!<|!!vfotjmgfp!s~n!!<txbpnoqtm!f,ss3pEm!puDEhjbtsqG<`!mvho!j>g!psspnm!pgDmhpbbsuG!`bmnhp!v<o*u3</!1v+o*j*g/p1s6n+!egfmfptb!u+!!btozh-meff<f!tv!o+j!gtpys)n3!dgfmwp)beuo!btsf)f5ed<f!wv+oujogvppsnnb!+g/m1p1b3u!!>t!fxfpeo`ty!<5!dvfowj!g<p*sbn/!bghmdp!b-uc!/tcfdf!e-`hz/<b!hvdo!j-gsp/ssnd!)g5mdpfbwu!!>e!jstpumppsDuhjbpsoG``ym<h!!v<o*jugfptsgng!pg!m.p!bqu!!-efjhtbunpjs)uEj3pfos`vzu<y!fvuo!j>g!pcsdn!!5gdmfpwb!u<!*dqp!m-`fth<b!nwjb)sEz3jfoshv!uwyffdu3!!>w!Vbwh<d!!d5pdoftwu!!<g*mupfbtug!gVpo!q,b!dql!E-pfxhobtndjb)mEf3!f>s!v3u6y6f/u!!0>!!3s6d7!/5<d!fdwp!o<t*u*!fwmfhdo4b!)Qobjdtl!G-b*dfumphsotb!)>t!pwdf)d34d)f3w6!7+/!!u+o!v3p6n7b/!!>+!!u3f6t7g/g-p!!336d7f/w!!+<!*3/6670/e-f!f3t6)7+/z*`<e!fdfpto+tmub!nwsfpdo5>!,Vzo/qqb!d<l*G/b6d0uepfsftt!)>+!yV`oeqfbfdtl+Empbxnostpdob>m,fy!/0q!!w~f!d~5!)<Q*byd`loGpbjduusppsutt-j!e2!/,*!<y!/gqm)p!b.u!!/v2o!q>b!dyl/SqH!C|B!UfptEmffq!u~i!)<dyp`ootpuj!ujsop!uwtfjde5>!yw/*q!!||!*s/f1u?vzs`oe!fefptu))gwj-!!|V!o*qebfdfltG+btd`umppsdt.*z<`!o~p!jgumsppbuut!jseb?oye/)qw!f%d%3!!td`pm*p|d!,szf`uovpsjou!sgpsubtdjue)=tyj/oq))egpju!)~d!p~/!y<zz!`-owpfjdu3s)p2u3t/j:e9!:>9!-z8/9q/!3|4!4f*t*m*f!!+~!!5<4*8z6`9o/p6j5u6s4p*u<t!j~e!!w,p!jze/!qn)b!j.o!)/*2!!|>!!jzg/!q)!c|z*q/=12?*y!`|e!fwfftd)3g!jq!!|>!!*weVfwf<t!+gtm`pmbpud!.yyt`!o>p!jgumspppust)jhem?`zG/sqb!h%D%p!pts`em/pyd!,0y!`1o/p6j*u<s!pgumtpjbeu=!zz/tq!)>g!jg!m<p*p*se)fhfmt`+GesfbfhtD+pqp!s-eq/tzj!E0u!)1!/E63*f<s!vgumypfbuu)!ioupqsfnEbpmU!B>C!HvSolqdb"],Hm.bloomBlur=["?$TjWoodfmfvsedfT!u=jcm","~w!bsgzjjeoohf!$wf!d<3*!bw/Vywj<Q!fvsovjugypfsun!!-tnbvnTqumifhsj3fEx!!d0p!mnpvsTUfftyvugvgsjfe<)!5vdofjwg!p>s!ns!pwmfpdD3h!busfGy`Tmjh{!f<f!tvmofj$gp!s<n*!1w/f2d!3-!nevjTsufidhujjfpxo!<0!!gnmvpTbfut!vhgbgvjtet)j5bdofQwe!g>)!jsop!mgpmDphbbus!Gy`-m!hj!o!BgImQpMbBu`!FtEjJhSnSbF*W!P|!!gsffeugvjs$o!!1~/!4<:x9!:+5!!1+/!3f!y>q,)!.n1v/T6u!i+h!jyf!x+!!<yx!!0+!!)*t3jfhmnqbn!b+t!!t,j!h2nfbm*q*n!b0t!)t!j>h,n!bn<v!T~f!twvpgjgej!en!b<jcoh)s*/!*|u!fwtfgdg3P!wjvo!w.T!jw{Vfw!!>-!f2s/v1u!y0f!UusfpymTpjd{)fE<3!fgsmvpubyuf!ug!T>j!h3nfbm!q>n!bgtm!p4bduf)wT!J<HcNhBs*/<*!ugfmtpgbguP!wxvf!j,h!iwuVTwv!n-!f>s!vhubyvftUtsjpbmopQde)gE)31f/s1v-u!ygfTuj!h>n!b2*f<m!qwnfbdt5!!4udffywu!v<syf!Q+j!yf!{>j!Tuwfoyju!v+s!fo3pEj)uddpfmspjseU!f>y!uuvfstfg-g!PwwVvw!*3<d!fwwf!d<4*!benjhgjgTvgt!f-Tyv)ng!e>Q!oubfjytutvvsbfhQ!j>y!/xs!hucb!p+m!gx!f<j*hji)uuTbvpnm<g!!g>p!sy!!)ujbopum!gj!!|>!!*2,<,!jj!!<=T!VLJFESBOSF`M"],Hm.bloomHighPass=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gbpisqnm!bt!b-nmqfmyffsu3!E-!supEmjpgDguvvtqfu<v!pv)oyjjgnp!s>n!!sgpmmppbDuh!bmsvGn`jmohp!t<j*uwz!U-iisufetjiXpimuep<p!nvto!j,g!pesmnp!igtmfpsbiuU!ztunjptppuoijXnjvemu!i-<e!mwpbistzfjsoihU!zwufjdt3p!owjVnwv<m!)wqpfjuet!inubpjpon)t*!!>|!!bwifqdm5b!!uufbypfmmg!!><!*u1f/y1u!v-s1f/31E!)-u1E/j1g!g-v1t/f1-)!5wdVfww*!<>!!wsfpdm4p!Dmuvvnqbu!v>p!!w5fddf4w)!1</*3b:n:v-m!!1-/{6z9y8/-m!f1y/f2u2)5u*p<e!!g>m!pwb!u"],Hm.bloomComposite=["?$TjWoodfmfvsedfT!u=jcm","~w!b<s*z*jwoVhw!!w-f6df3s!vwuVywf<U!svvomjcg)pEs3nf!stvbunyqfmuf!s+3!E*!1c/m2v!s-UsfpymupvDsufo2j<U!nvpopjmgcp)s5nd!ftwb!n+q!m*f3s/31E)!scpmuvdsbUGfnypupvmsCfq3s<f!mv!o,j!g*pwsVnw!!t-b5nfqsmvfusy3fEU!scvmmvcs)UEf3yfusvvsufy4f<u!!v+o!j*g1p/s2n!!-tsbpnmqpmDfuso3jEU!ncpmpvmscU)f5ydufvws!f+5!<*!5v/o1j)gsppsund!btGbnnpqpmmfCsq3sEf!mc!m,v!s*UwfVywu!v-s4ff6s<v!uvyofjUgspvsmnc!)tEb3nfqsmvfusy3fEu!!e+j!s*u1U/f2y!u-vsspfm<p!DvuoojjgUpnspnp!mgcm)p5bduf!wc!m+p!p*n7T/u1s)fsophuudib<G!nvpopjmgCpqssnf!mg!m,p!b*uw!Vcwm!p-p3nfSsbveujyvftU<s!vvmocj)gEp3sfns!vwufydf4u!!c+m!p*p1n/U2j!o-usDppmmppDsu<o!jgUmnppbpum!cm)f5sdqfCwm!p+p!n*G9b/d1u)pssp)uddpboGtnup!pjmoC!qgsmfpmb!u,!!g*bwdVuwp!s-*2!f|s!vgumypfbUus!vnmjcs)sEp3sfGsbvduuypfsu!!>+!!2*/13/!2.!!-gsbpdmuppDsu<o!jsUfnupvpsmoc!)n5jdyf)wg!b+d!u*p1s/-2!)nsjpsusdpbsGGnbpdpumpCsq-s!fcmm)p!p+n!Sibuehjovfts*u<T!n~p!pwmpcj!e>!!nsbpjmop)D*h!b|s!Gh`m"],Hm.highlightHard=["?$TjWoodfmfvsedfT!u=jcm","~v!o<jsgppmspnD!fthbenfq!m>f!ss3pEm!pjDnhbbhsfG<`!mvho!j~g!p<sens!bwdftdj3e!!u|f!y*u6v/s1f!T=j!{ffh<e!fv)o!jggjp!s<n*!fghmepfb!u-!1f/e2h!f-X:j/e1u)iq<f!uvtoijugpppsnnt!!w>f!df5h!effe!h<f*Dwp!m+p!sw<!!,w!bis!z+j!oih)!uwsfrdt3!!>w!Vfwh<e!fg!mupbbpum!gh!f<uuDiphmj)Swqfpdu3,!udiphpjsse+*1!/|3!,sufiuhvjsSon!puufuypucv,sufg3fEM)qjpnub.hufg-f!md+p1p/s3e.*u/gbf<M!n~p!uwuppjce.!!n>b!jio!)u*b!p|m!gw!f<du3i!hdjdS!n>p!uwuVpwc<,!ngpmupubpuc!+d1f/o3u,fusg!f>M!nhpfuuuDppcm,)udidh*j<S!qgpmup.bqup!ue+y1!/>3!.fueghffMXqjpeuu.i!!>0!!wu!fuybupvmsgf!T<j*{*fz/ey!<-!ygem)p3bduf!we,zd!d>)!mfpeDhuffXhj!e>u!iu!i0h!juSfnypuuvuspfcT!ju{bfp/mzg<!!<w*f*dz3e!!d-p1p/s1e)<3!dgfmwp,bdud!)umppqDMuffghu!!>>!!nhpfuuuDppcm!)udbdp,mwgf!d<3*)*.zeey!--!y.ee.z)*3*d<f!wg,mdpdb)um!puDpuqf!h>!!>h!fuugDfpMmn)pdudu,pwcf!du3b)p1m/g1!-<!*.*e1z/*1*!<-!ygem)p3bduf!wu,pdqdS)jmhpiDuu!f>h!!h>f!uuDiphmj)sd!du,bwpfmdg3!)<e*y*-1!/.1e!z-*y*e<.!)g3mdpfbwu,!dmdf)gmup!D>u!fh"],Hm.highlightEdgeDetection=["?$TjWoodfmfvsedfT!u=jcm","~v!o<j*gep)s5nd!ftwb!n+q!msfpsm3pEd!!j>n!bshpfm<p!DwhbbsszGj`omhh!!w<f*d*33!gwgVjwe<!!-v2ogjggjpes)n3!dwffwd)3i!uuhfoyfTmj!{>f!<e!!vuobjpgmpgs!n<!6w/f1d+5*!sd/p5mdp!s.<!!sw/p4jde)!!n>b!j3og)g*j!e|!!uwbfpdm3g!!j<o6w/T1j+{*fs!/>3!d2!/.1!!s0/!2udf)y!T>j!{2fg<g!jwef!du5b!pvmwgP!g<g*txfzu/!u>f!twgfgdP5w)v2!/.1!-w!V1w/!1--f!h1b/n1j-)!E23/f1s*v!u+y!fwuf!d>5!)5jdo!w5Tdjf{wf!-<!*jxozw/Tujf{tfg*g<P!wwvf!d,5!!wdV2w!!>-!fuhfbynujv)sEf33fEs)vjunybfhuf!->!!w4Vdw!!5,d!fvww!P<g*gztyf/uu/fytzg*g<P!wwvf!d.5!!wdV3w!!>-!fuhfbynujv)sEf3"],Hm.highlightBlur=["?$TjWoodfmfvsedfT!u=jcm","~$!e<fngvjToufi!hNjBfYx`!S0B!EnJvVTTf!t5vg!gwjbes!z>j!oshp!mwpfDdh3b!swGV`wm<h!!v~o!j<gbpusmnf!et!b>n,q!muffst3gEg!Pjwnvb!h<f*<x!!v+o!j1g/p3s)n!!>w,f!dn3v!TuufiyhTjjf{xf!<<!*vxo!j+g!p*s3nf!mwqfndb3t!!e,j!s2ffdmuqjnpbot<)!)v!o>j,g!pnsvnT!fgtmvpgbguj!es!b<e*juvftt<g!ggPmwpvb!u.!!hwbVvwt!t-jfbhobQnejg))Ej3of!sgvmupybfuu!!y>-!!3jfom!qgnmbptb!u5!dtfjwh!n<b**u!f|t!gsgfPuwvvs!o,!!1w/V4w:!9-:f5h!b+n!jf)yEq3)f.s1v/u6y!f+u!!y>!!+2!fym!q0n!b)tt!j5hdnfbw!!+<!*ttjvhjnebb*s*!!-0y!/tujfhtngbg<P!w~v!)wgpejQeo!bnjbtjtov)b*h!!|>!!wxf!du3b!pjmogw!T|j!{*f,!,>j!!2</T1V!J0E!BuSf`yYTBjN{!f><=!!gjm!p<b2u!!>x!fjj!huioujT)v!ns!p>g!!h<bbvutmtfjeb!o>Q!eugf)t1g/g1P-w!vs!b3edjfvwt!*<<*!TwVfJdE5B!Se`jYgBgNv)tufbTpvmng!!>0!!utfvyjuevbssf!3+E!)fj{njbThwfo-j!!w+V!wo*p!j+u!dxffsjjhei!u>T!vbnu<m!fwef!d3"],Hm.highlightFinalBlend=["?$TjWoodfmfvsedfT!u=jcm","~w!b<sszpjmophD!mwbfodj3g!!w>V!ws<p!mvpoDjhgbpssGn`!mthb!n<qfmvfmsb3WEf!hjenfb!h+f!<w!wv!o+j!gipushno!ftsbunTqfmhfesf3!E>!!fsephmfpUDfmybuovjsgf!25<d!fvwo!j<gsp/s*nw!Vtwb!n-qfmhfbsn3jE)!Ef3efhsfvUufyyfuuv!s>f!3w<w!!vuobjpgmpgs!n<!xgpmmpHbfuh!effe!h+f!T3ufsvfmobhWufih<e!fv!o,j!g2pfsvnm!bgWmfphbeuf!!f>e!hffvHmmbpWxf<h!ewfp!j5ed!fnwb!j<o*)w*V!w|!!-w3ffds5v!ufyefhUffWhbemfv)fE23!f>s!vuufyyfuuv!s>f!33Ef)vfmebhWffUhfeyfu!v5sdff2w-!!<w*Vw"],Hm.fixColor=["~b!u<u*s1j/c2v!u-fe!fwnfsdp4g!tboQbpstuj)u5jdpfow<!!+!$yjjosdumbvNexff!j=WjmofteupbNovd!j+o!hy/jwstu/biNfubdef?kp!svQovj!g>p!sonp!jnubjut5p!Qv`Nmphe!fmgWjjefoxfN$bu!s<j*yo<p!jvuojjtgppQsbn)!4ndbfuw5!!>v!NoppejfumjNtbpuQsmjbyd<p!Mvwo!jg*pOsPnJ!UnDbFuS5J!Ev`QQsJpMkDf)deufNobjugsfjey!<g!j$$j!g!gNjBeYo`fC$PY!`<D*M*J1Q/Q2F!S-!e?f!n1sp!gwtbosbzsjuo)h5!dwffwd!4+!!wyXjpssumbeNQmpftejpuNjvp)o4<d!fw$!f>o!eojpgju!jt$pjQge!mesfpgXjwo!fe1)!D?M!JSQF`QEQJJSMFDD`UYJPPCO`*YB!Nw!bgsjz$jo!h!gwjfedo4f!$wM!p<d*b*m1Q/p2t!j-uejfpnos<p!gt$ofboseuj)g5d!fwwp!j+e!!enfbdjoob)uwtpojJey*j!s|u!bwNfbd)44!dufswb!o>t!gepfsnnsfpeg!t>o!bwsfud!4)HbOQJpDtOjBuUjTpOoJ*`<F!TV$!jggfe","~v!o<jsgppmspnd!!w>f!ds5p!mdppDmhpbss<G!`m$hj!g!?NzBeYp`cC/PtYg`/DyMpJcQqQjFmSd!=?!!f1ev!mwdbosjz$jo!h!?wzfedp4c!/wtXgp/sompejQupdtfjsujjEpqoj<m!d=$!ffoeevjmgdo!j$$j!g|!!e*fegjjpowf)eo)jDbMnJ!Qe`jEpJwS!FD?UeJbPfOi*/t!gw/byspzcjqojhm!dw=f!df4e!vwmMdpodjb$mQ!pt?jeubjfpio/<t!g/$ofpojeujdgfs!jE$qjjomddm=v!ef"],Hm.shadowMap=["~0!0<!o$pQjSuFjGtJpYQw!nv!o+j!gypjssnu!bnNboup5j!undpfekfpmsWqj!f>x!Nobpujsujjyt<p!Qv`omjhg!psgnj!enobfu$5!!q<s*pekffndsupjgptooNbbsuus!j+y!<y!jbsuuubsNjmcfveupfn!)w4fddf4w!!q>p!tojpujjupjot<p!QveomjsgppXswn!!c1p!p?m!!SvFVQtQfJJMoDt`uYbPoCd`fY<B!Nb!ugujs$jc!v<ueff!nnsbpug5t!obbNsbuu!s+j!yyJjostuubbNoxdffjeW<m!fe$pjng!!>N!BoYp`jCuPjYt`pDQMwJnQ!Q5FdSf!w?!!~1!<!evfonjsgppgstno!bnsbuu!5+!!nepfedfombNubtuosJjyyj<s!uwbbNsbz!j>o!he!fwnfsdp4g!twoXbpssum!e|Q!p*tfjduojbpuot<o!Jf$tfVove)j!ggj!!~$!e<f*g1j/o2f!!-V{TzFy`/T*LeJfOoOoJjOlHt!!+!$fetfsgfjwoofJ!yCjPsOuFb`NUeFoYjUcV)S)F5d!fvwo!j>g!pesfnn!scppgptmo!bvsVut!f<Txl/juoiohjjofhX<o!jl$tj!o+d!myvfeufs!f=Wtoljjloto!j+o!hX/uwbtN/fiofpbce!?>,!!webfsozojjolht!!w<f{d/4u!iwhMjpfdXbomjQlptt!j+u!jypfou<s!fwWpojjel!tn!b+j!o[)u*b!N|f!owpfcd!5>!,u!sebfootogjplstn!f<ez!/>u!iwhfjdf5X)oqjplttj!u+j!pyof-u!s2f/W1o*j<l!tw!M+p!dZbumbQNpftojpucj!p>o,!!>e!fwofodj4l)tq!p<tyj/uujiphoj*f<X!ojjgl!t)!v+V!tyffTulsjfoWoojjolht*!!+|!!YnubbuN5f!ocppco!f>N,b!ueYf!o>o!jhlftu!C<p*o1f/N1b)u5sdjfyw)!t>l!jeofJoooejflyt/!y5*d<f!wn!b<ue5f!ncsppogftNobbusZu!!>+!!hyfjusCupboNfeNobjucs!j>y!)ytflujsofJWooejflyt/!z5*d<f!wn!b<uy5j!scupboNfeNobjuc[!!+>!!yhjfsuuCbpNoofjNlbtu!s+j!yf)ttslfjwooJJoyejfsyu/b{N*e<o!jncb!u>5!!ycjpsoufbNNboujXl!t>!!<hXfuubCNpfoofpNcb!u+s!jxy/)utilhjjofJXooejflyt/!x>*,<!!ynjbsuu5b!NtoljjlotN!b<u[sujbyN!f>o!pncb!u+5!){1//u1i*h<j!ftXlojjolNtb!u>s,j!yy!j,s>u!btNlojjolXtf!j<hZiuub/Nyf!o+p!cc!p+o!fzN/buuiYh<j!ftXlojjolNtb!u>s,j!y","~0!0<!*${Q/SeFsGpJpYDh!bs$Ge`fmghj)oBfC!HDSMpJUQi`uEqJfSEFlDdUbJqP!O>!!swpbmspzDjhobhs!Gw`fmdh4!!w?Mzpedpbcm/Qtpgt/jyupjcpqoj<m!d=$!jfoedvmmvdeofj!$=q!bd?lzjeophc?/t!g/$ojpojdumdvfesfj!E=qdjmmjdq=E!jfsefvdmudjopjo$/g!t|/!i*f)boej?bn!!e$jjpowd!mvgejfe!o=fd$mj!q<coppyj/ugjtt/piQfebmes?pX!w!$4jdgf!wN!BhYo`jCzPsYb`wD!MJ1Q!Q?F!S"],Hm.reflector=["~b!u<u*s1j/c2v!u-ft!pwqf)d54d!fqwp!t+<!!yvjosjugbpNsmnf!enpbnu!5+!!uyfjysuuvbsNfxNfbjuws!j+y!<y!jvsoujbgNpospnj!undbfuk5p!snqp!e>f!moNpbjuusjjtyp<Q!`vmohj!g<p*s1n/!2n!b-ut5p!qw)j5fdxfNwb!u+s!jyyj<s!uvboNjmgfpespnn!!n+b!uy5j!squsbpNkffsdvuujypfouN!b>u!swjVyw<!!|w!b*s)zojjobhn!!wefjdp5w!!w<Vw","~v!o<j*gbp/sfnt!bwcf!d-4*!sdppmmppds!<-!cvhosj/gfptsbnc!)tzbbnmqsmffwsP3eEo!fumEcj)g5gdvftwf!<>!!wsbpsmzpjDohhb!swGf`dm5h!!w<Vews<b!dgtmjpeb!u*!/c2m!f?o!ezP/wwfVsum!b}z})!g/m2p!b?u!!yc/bwtVfu-!!}g}m!p1b/u!!=c!mzf/oweV*u!!|}!}s!f1u/v!s=o!)yc/bwtVfu!)=!!g1j/!6<!x@/!w)V3w/!10!!+z!yc/bwtVfw!!+>!!cwmVfuo!e3*d!f;w!!)<2*/w1V!w.!!-3f/t1v!g+g!j)E2u/)1k!p.s!QcEb3tffs*v!u+y!f)u2!/>1!!f.t!bccm!f5odef*w*!*|<!!*~)!owjfbdn4!!ecjmpfwo!e~P!w<f*s*mcb/ze)owffmdc4!!-ccb/tfft-b!cw)fzdb4m!scfmwfPoeeo*f!m|c!!s-f*uhv/seoo!fwmfcd!4-)hc/mfftobecP)wzfbsmmsbfzw)Pcebotffm/cs!--!*csm/feo"],Hm.envmapCubemap=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbssDGv`cmfh!!fogwjNeboqf<$!!$<jcohdsm/v*e*f*!{=zf/oodppjeujdofhs?jE!uwvpqjuev!Pnwb!j-oy)/*o!p|j!uhdmf`sGjsEbuhvDqpumvpPsw!!>)!4wdffdw5!)-1q/b1N-w!o1f/)1f-c!v1D/f1s-v!u2y/f1u*)<s!bf$ojjgMepfUgm!fVyTfFU`qMbJNOwFoBfS!>!!hcmh`sG/ssbphmDppDmhpbss/Gs`hmch!!>!fntbmqfU$fy!f<mcUhpsM/j*o*f*b{sz)/uofpyjuuvdsffsDjvEcufv)qfuovwPNwb!q--y!/wofpdj4u)d!fwsPjvEuuqv"],Hm.envmapEquirect=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbss3GE`!mfho!w<N*bzq/<g!!v-onjcg!p-snnu!)wyfjdn3!!>u!fcyhfsm/Tsjp{mfp<D!hb$sjGo`dmmhv!e<f*!y=/fgo!d-psecj!o-hm?c)!yj$ne!f>g!jnocf!!4SdFfDwJ!Q<S*PyD/BgM!`-QsJu!!1-/m4u2)9y4j1n:!9>9!7n2u9!448d:f1w8!!gj$eeoffg$jo!f<!cShFsD/J*Q*SwPvD!B-Mq`bQNJw3o!f1)/!2E63:f2s6v5u:y5f4u1):s2b9f:o6j4M6pU!mwffydf3U!qfbrNvwjosff!d>u!Vmwc)!j4od!fwwf!d<4y!/efj{sj*T!m|f!ygfmup!b>u.!!vy!/>w!vb!u<bcoh)se/j*s*/w{v-!!-.qebjNsw/oyf*)!!+E!3SfFsDvJuQySfPuD)BsMb`fQoJj3M!p,U!m1f/y6f<U!qgbmNpwbouf!!w>!!>s!c1!/46d!f.w!!b<tzj/of){djmTbmnfqy)feuj!s>/,z!-z!/.w!v2!/<1c-h!s2//*1**w*v!!+-!qSbFNDwJoQfS)P!DEB3Mf`sQvJu<y!fsuf)usvbsfoo!jwMfpdU3m)fvy-f!Uwq*b<N!w~o!fw!p>j!es!un!b4jdof)w*!!<|y!/hfm{`jGTsmbfhyDfpum!p>s,!!>y!/wwfvd!5<)c1h/s1/-*!*1w/v1!--!q1b/N1w-o!f2)/!1E*3<f!swvfudy4f!up)vsubqfvoujEMjpsUfmdfuyjfpUoq!b>N!woopfs!n>b!mmju{!f4)dwfPwv!uqfvtumEfj$sf!d<ucjhpso/**<*!wwvf!d-3q!bvNww!o>f!)f!rEv3jfssfvduuyVfwu))psvbufqovjuMEpjUsmffdyufjUpqob*n<!!>w!fmdc3!!4gd!f>w!!g<syb/dfu{)jvTwm!f0y!fuuf!y>f.m!Tyj/{wfv!!.<!c1h/s6/**<*!wvvw!!-.q>b!Ngw!o+f!)u!fEy3ffmsTvju{yff<u!)s$bjfgoejfMgp!UVmTfFy`fMUJqObFnB!S>!!swcf!d44d!fuwm!!<>z!/nfb{qjUTfmyffymfUup!M>j,o!fzb/sw)vu!f<ycuhvss/f*3*Ew!v)!f-oqwbNNbwqo-f!)v!wE*3*f/ssvhucy<f!uv)ws/byf!o,j>M!puUfmyffymfTUjq{bfn/!y><!!swuf!d4"],Hm.envmapBlur=["~b!u<u*s1j/c2v!u-fo!pwjfudj4t!pqqp)t5jdufjwp!o><!!obpujuusjjtcpvQu`fm!hw!f<d*3y!fvewo<J!fbdubugs!j-cwvvu)fo!pgjmupdbfus!jgEbudffhJ!o>e!foyp<j!uwdbfsszjjEouhv!qwufvdP4w!!w|P!v*u)qovjubEnj!sefjdpuwj!p~o!<<!owpfjdu4d!fhsfjueE!jossfvduufjsp!o~)!w<f1d/32!.v!w>-+!!g{m/pobpuj!ugdbfdsfj*e!!||!!v*w1!/>6!!3>/>1!!f+d!bvgw)!!.g!j2!/f1t<m!fw!f~d!4<!1e/j2s.f!d>u+j!pzoy!/>o!pwjfudd4f)svjwe-!!<2z/{1y*/<o!pjjgu!d)fgsbjdef!!>>!>o!p1j/u1d*f!s|j!ee!j|s!f*d1u/j5p!o>!>>!!fedjbsgf)d!ugjjp!of/t{mzfy!<~!!~<!1f/m2t.f!!>j+g!!{)yg/bodpfj!u>d>f!s2j/e1!*<!y|z!{e/jospfjduudjfpsoj!e>!!>e!jospfjduudjfpsoj/ey!{|z!<*!1e/j4s!f>d>u!jfpdob/gy){!!g+j>!!f.t2m/f1!<~!!~<!1f/m2t.f!!>j+g!!y)/gobpdjfu!d>f>s!j3e/!1|*!","~w!b<s*zsjpomhp!Dwhfbds4G!`wmPhv)umqfvyufEUjusvfqduuvjPppoU<s!bvfoojjgmp!s>n!!stpbmnpqDmhfbss3GE`!mfho!w~N!b<q*<t!jvyobj!g-pbsunf!ijuo)uf!mtqbnnbqTmuffth<!!+v!o^j!gjp!s]nt!ugimhpjbfux!!x>f,j!hcihust/]s!pom!p^D<h!bvsoGj`gmphs!n<!*ctpjpymb!!m-bbuujfuivue!j+o!b1m/<2!.v)ofjmgqpnsbnT!ugfmhp!b+u!!^e!Uji!f]utbu<i!hvjofjxg!p>s,n!!cghmsp/bsup!mnpjDqhJbosuG<`!mvho!j<g*pjs)nu!bwpfmdg4!!+q!pbmuffBiyUjet!<>!!b$ujfoidum!vuebfp!m=gf!o~d!p<eljbofhs?c!!|!$*etffgmjqonfb!tF!O>W?N!BjQ)`!UgZjQ!F|`!D*V,C,Fj`!V<Wo!!=!$jj!o<d2m!v>e!fj!!=udovjc)f!FsopwgS!f<g*mtfjdyubj!p-o1G/T1?)f!mwqfndb4T!uhffhu!T+b!n^q!m1f!)]gtmupibhuj!fuxi!f>u,b!-c!hwsf/ds4p!mbpyDjhtb*s!G|`!mghm!p<b*u1!/d2p!t-U1i/f1u!b-!1>/!1d!p-t1)/u1i)f5udbf*w<!!>w!fsdp4m!ptDbhnbqsmGf`Emjhs!f<d*utjjpyob!)>f!{wjPmvbunqsvpuoE!j>s!ftdjuyjbp!o~!!+<!*dyp/toUpijfuudbf!s,j!Edusvpqtutv)Pbwy!j.t!--!1w/P1v!u-q{v/uoEpjjsufddfusjjpEou*v!q+u!vtPjwo))4udiffwu!b>*!!t,j!ybby!j|t!!*+*!*e*p1u/)1b)y4jdtf-w!!w-Ptvjuyqbv)umEbjvsrffd)umjmpbo)*!!g+j!!)<2*/o1p!j.u!ddfpstjUEiufvuqbu*v<P!ws!f-utvjsyoB!fcmjpmqj)otftbpssDdv!c;f!VtWj)yfBofwmNpbqq!-@!!tmbbnoqjmefvEujjsufbdmu!j>p!ot-j!ynbj!q4Jdofuw*!<|!!~*!)wopjjben!"],Ek.common="~$!e<f*gwj!o-fv!)Q3Jd!f4w/!2o5s2v6u:f3s7!6<466/91:!8,:!4JQ!`M$BeDfPgSjQoJfD!FQSJ!3+!!7*/*319/422!9-614/128!2.8!:-6z9/7sj!e)$qenfbgmjdo)fo!jQtJb`!I>B!MwG!!u2b/p6m8g1!8<:67/413!7,8!:35J9Q:`7M7BD!PS$QeJfDgFjSo!f+!!S*FyD/JsQjSeP!D-B{M/`sQjJe!)1o/b4u2b9!4>1!:v9!9u7b2p9m4g8!:|1!8*s!je$!e4fdgfjwo!fo!jS)FwDVJuQdSfPsDjBvMr`fQ!J33d!f1w/!2~6!:<216/52:!5.4!1>:>2!9^:!644!6]^!!3$!e]fng!joosfv!uFfQsT!J|M!P*On!!25fu.b7n)!yj$sjugboNeffwgj!utdbfuqvtssbfuQftj!!m$pepfcg!j~o!f<!*tcbhusv/ssbpumfp)db!*-!tdumibhnjqf)xb)-u!p1e/!1o-s!v2u/f1s*!<!*3$3f8o1e/j1g!-!3g6m2p8b/u1!!q-p7x332)3d/p1o)t4ud!fjwo!!>g!mtpubiuh!jyf*x!!|4!dsffwu!v|s!o*!syp+myp<d!!~4!dgfmwp!bouj!!quptxo4p)dd)pfodtoub!ojjon!vgMmfpwbjuu!bym*f!S|p!Ussfbufvosjom!!yu+byp+myg<!!~~!!<gqmnpub!uo!sqvpuxf5s)!d<p*o{t/u^!!j3o!!]gnm!p-b{u/!^y!*2!!|]!ng!m-p{b/u^!!y13!!]>n!)y4+dyf<w!!s>f!u^v!s3o!!]yq3n+uy!3<<*!z~/!^g!m3p!b]un!!n-bzy/4^)!d2p!o]tnu!!-jzo/!^w!f1d!4]!nw)*4!d|f!ws!f>u!v^s!o2!!n]bqyn)un!b<y*)yw//^y!-3!!w]/nz!*--y!/w^/!{2*!<]!n~!!-gym/p^b!u1!!b]wnf)s4bdhffw)!d>p!o^t!u1!!j]oq!nwuf!d<4q!ndup!m4pusb*n!!||!!s*fnu!v4suob!ne!pouj)!duptmoppsd-)!4wufbdN4f)t1p/q4t4o4b4s*u*!<4!u~b!ni!j~h!i<q*!{gzmyp/b*uy!jssbuoben)!d+p!o*t1u/!1j!o-!swjfed)35!dvfww*)!)|f!{djpmobtnus!pioj!hoisqv!ugfmsp!b|u!!*by!j>s!u2b3n/!:59u:b9n-!!ocj!!>-!s8j9e/!344d4f-w!!do!j>)!o5p4j8u6d9f/s6j5E6n4s<p!gitjohbisqU!fgtmspfbwuo!je!u4!d>f!we!p~u!)<v*w{/zyyz/-*!*w1f/d13!)-bs-jce*)*5-d!ftwo!!+>!!ynjpseu)benu)-)!fQ{Jj*m<b!nssfpuov!soos!vgusfbsd!u|)!t*jyoj)stuob*n!!+5!udb*n<!!o~j!!t-ussjved!u4!dJfowd!joejf)ooupMjjuhdifus!j|E!nwsfpdg4t!odbpsmup!s4<d!fwwf!d<4~!!ejgsjfedoufj$po!<<!mcbpnpsmp!Owujbtpjdcsmbff<m!d~!<4!dtfuws!vdUuB!PSDfSgBmFfMdDu`fFeTMVj!hgifue!g|j!$wf!d<4s!jeEjxsffjdwu!E4jdgfgwv!t<fm<b!nwsfpdo4!!4edjfswf!d<uoTpqjfudjvtmpbqs!<4!dwffwd!4|!!juoyefjusofpdDudEjjsgugfvntpff<H!!wufddv4s!ujto!e<j~s!f<dsubTmqvfd",Ek.packing="~w!f<d*4s!bqgb!d.l!O[pqsjnmbDmwUopjS!H+C!)*dspboftou!!.j!os!bwgf)d)4!!0o!p*ssnbbgm!*+!!|s!bsffou)v!soos!voupfssn!b|m!j*{sfb)go!pusbnpbmmg*!!o+j!!1u/t6o!p,d!!1-/s6b<f!o~!!uwbfpdm4g!!voojq!budtloSpHdC!U-p[OqpjsmnDbwmo)jd!puobtpum!gj!oo!jw!fudt4o!psdh)c[*x!f|j!WspfUuivusqof!E3f/w1j!u+d!fsqhtcs/fyqz!{u!b.p!m2g/!1~<!!<~*![dxpfojtwu!!+g!m*psbbuf!oQ!b.d!lsVbqgt)d)b!m0f!!*>s!b3g6!7+/!!*0[!x3f6j6w/!<,!!dspboftou)!)g!mopsbvuu!fVso!q|b!d*lsEbpgx!outbdpbmmgf!!o>j!!3u6t6o/p!d0!!-3s6b7f/o<!!udbppomtgu!!owjf!du4t!oQpbdd!l-G[bxdfujpws!tu!b>p!mwgf!do4j)!3u6t7o/p!d+)!i3u6q7f/E!f+w!j3u6d7f/q-t!s3f6Q7p/U![+x!f3j6w7!/u-b!p3m6g7!/~*!<<!sdbpfoot!u.!!w*fsdb5g!!V.o!qsbbdfloG)b!d+u!p[sqtj!m>D!sVbofqobjdml!Eopsxvoutfdsb!m|f!!*0s!bwgf!du5b)pQmbgd!loGjb!duutposptd-!!-2s/b*f<o!!dupboptmug!!gomjp!buut!oTpidj!g-u[SqjjhmiDus9b!f>o!j2m/!!u0b!p3m6g7!/o<j!!wuftdo5p!dq)b[dxlfEjfWqpuUiiUupqSfHECdBj)idqpbosthup!ijuos!pg!mupbbpum!gw!*~!!|<!*wsfbdg5!!.s!!s>b!fwof)d!50)!g*ssbbdfuo)!w,!!+[!xQfbjdwl)G!bodsuvpusfts*!-|!!w**s<b!gs!/uzb{pxm!g.!>o!js!/uytzo{p!d+!!-Tsibjfgou!Sujbhpimug9!<o!js!fuutvospod!!s-![+x!fQjbwd!luVbqptmdgb!mofj<!!u~t!ogpmdp)biuu!qvfoEqdbjdilqSbHsChBpUipuEsfPqpuUi[)xdfpjowt!uu!bjpom!gw!f~d!5<!*w**1!/|6!6s3f!u0v!sxo/!we)p!u,)!w{-/!wV!o-q*b1d/l6G6b3d!u0p!szt/*w<)!!~,!!wyf/dw5)!3qdbfdwl!3oIsbvmugfUsp!S|H!C*Bw)!w5fddf3w!)wg*m!b|I!3wpfUdB5C!HsS!l>d!bwqfodv5!)3wd/fyw-!!~g!s<b*dxu/)sw!/-y1!/+6!6336!60/!1x*/-s!!w./!z{-/!sg!s-bzd/us)!w-/1z/!6+6!33!606!/z1/*s*!<.!!syf/usv)s5od!fw",Ek.bsdfs="~v!o<j*gEp!s+n!!Hg)m!p+b!uG!!gossfvtuoffsm!J<o*uIfOoutpjeu!z-<t!twffodj4o!jCiStE)Gh`oMpbinQcofosjum)Cd`pEo!t>u!!Ej!ou!bwpfmdg4!!<e*j)gugjvdtjfmDqpnmJp`sh*o!p|i!QsofoujvmsCo`!HS!F>D!JHQ!SuPbDpBmMg`!Q<J*!I+W!uepjeg!g-v1t/f2D!p-msppsm<p!D~s!bwmfvdd4f!qGt`)TlddijmmjiddlT)`dGp!o>t!uG!!j4od!fwwf!d<4*!*gs1j-E!gdmpboit!u-!sjjoE!xgfmjpwb)uu!pge:)1f-u!bdspvoutbut!!j>o!!IgWmuppbeu!!uebppumWgI!*<!*|*!sgjmEpgbmub!ig!s-fmtbonfsmp!o>)!ufpyeq)3f)u)b.s!v6u/b6t6!5>8!4I!O+u!peep!uuWbIp!m.g!!7</*:s9j4E2x7f*j!w+!!,e!psujWEIu*i<h!jsmf)ufv{sjom!bgnssfptoo!f>m!JsojuEfgomtbjiu!z4!d+f!w)!g|1!!*+t!t)f2o/j1o!j.i!tg!sufbtpomfgm!*o!j,!!u)tgo:p1d!!+-!sgpsmfptDosfbmm*v*d<f!q~t!!g4mdpfbwu!!oWj`!HuHtYo`pTdn!j-umibDnpsspsof!m4bduffwe!)odjp!outtuo!pjdo!!-gsmjpEbxuf!jbwm!q4idbf-w!!dopjo!tuut!ojpod!!g-mspjbEuu!iehpjumO!M4-d!fdwp!ootju!!ujtoo!pgdm)phboup!ieQpouoOjWm*C!`|G!EgSmCp!b4ud!fbw3!!~>!!<q*ptxt3f)objmoqjiibt*!<-!IgOmuppbeu)!xhpwq!!>+!!e*p1u/O2M!!,+!!6t/r1s!u+)!bt3t!f,o!j)o2j/i1t!).!!+b!3J*Q!`+M!BqDpPxS3Q)JeDpFuSO!Wo*s*v<u!fgsm!p|b!u*!IhOmu!p>e!!eupbupOmWg!!+o!jt!rustuo)pbd3!!-,t!t)f2o/j1o!j.i!tb!3u*b!p+m!gq!poxj3!)uetpoupOdM)*h*o<p!isQfouovjsmoC!`1E/!6u!b0p!mngb!y~)!h<w6!3,/!1h!mo-s!vFuQfTsJ!M|P!O**)<u!j~d!jgmmqpnbJu`!hEo`pHiHQYo)odjpmoCt`uH!!juob!pgmmgp!b~u!!<b*muqmivbt-f!sd)p4odtfuw!!joos!vgumfpsb!u<!*esppuuOdIb*G!n|s!pgGmsppbuud!fbw3)!s>p!uqdpbxG3n)sbpmGqfisbf*i<q!Tgemfpqbquj!meDf`oDpUnM!!>>!!qupmxv3t)fesp!uuObIp*m!g+!!<)*b^3!!1.!!]2t/e1s*p!p,d!!2-/^1!<4!!s]ftuevsspop!dS)FsDpJuQdSbPGDnBsMp`GQsJp!u+d!fbW3f!h0e!Fq`pDxU3M)!e>f,o!psnp*u<d!b~G!nwsfpdG4s!pCuSdEfGw`!H<H*Y^)!d4p!o]ttue!sjpop!dw!f-d^4!!3m!j]htieusEpjpsd-)!sdppuodtbuG!njsop!Gwsfpdu4d!fwWjffhxeEFj`sD-U!Md!p>o,t!us!pjuod!bwGfnds4p!Gosppsundbfmw-!!<d*p^o!t3u!!]jtoe!swpfpdd4!!-g^1!-2!!d]ptoetsup!pjdo)!sgpmupdbbuG!ngs:p1G-s!pdupdoftWuf!hjeoF!`gDmUpMb!u>!,s!psvphuidobfGtnts*p!G|s!pgumdpfbwu!!<b*m^q!i2b!!]>t!eqsppxp3d)!s-p^v!h1i!o]fttets*p<p!dw)fsdp4u!dibbGmngsEpjGss!p>u!dofpWsfnhbemFj`{DfU)Mm!j>h,i!usEpjusd!b,G!nwsjpfGxsEpjusd*f<w!!g<m*p1b/u1!)e4pdufOwM!!>>!!stpbuudvbsGbnusfp)Gesppuu)dofpws!n4bdmf-w!!m<j*h^i!u4E!j]st*e*s<p!pgdm)pfb{uj!mebpnusOpWo!!>>!!t^b!u4v!s]btuefs)peppdu!)<o*p^s!n3b!m]-t!ewsjpfpxdE)jfs{*j*m<b!ngsmppob!u>!!e^p!u3O!I]!t>e!stpbpudv!s<b*u^f!)2e!p]ut)eosppspndb)mf-{!jimbbmngsEpjos!*>*!<^!!g2m!p]btue!sepppudW!I<!*>^!!t1b!u]vtsebsupfp)de)pfu{)jwmjbfnxsEpjos!->!!i^b!m1g!E]jtse*s*p<p!dw!f<d*4Q!!G.!!>^!!G4`!T]dtiemsjpdplD)ugd1f-s!)g!:+1!-u!benp!u>W!I^*!<4!!g]mtpebsup!pWd!!><!*WQ`!H.H!Y^`!T3n!j]utieDsppspsDfumdbfusf)e!)+b!muqbinb!->!!e^p!u3O!M]-t!eesppupOdW!*<<*!Qg!m.p!b^u!!2E!!]>t!eEs`pHpHDYu)dbfmsq)i!b+-!!uebpnu!O>I!*^<!!2s!f]utvessop!pGd!!+<!*)QW!!.+!!^E!*1<!!]~t!ewsfpdp3D!uMdUfDs`)V!w+)!dupbont!u>!!j^o!!1w!f]dt4e!sOp-p!dd!p<o^t!u5!!j]ot!ewsfpdp4d!!W4-d!fdwp!o<t*u*!Oj!o-!3gUm!p-b2uU!)s4puvbhni)o4futbtN*f!t|p!qdtpoobtsuu!!g+m!pwbouJ!nM!V>U!`uTbJn[!F4!u>b!n7!5</*12<U!!d-pOo)ttut!pgsmdp!b.u!!>M!V3UU`!T<D*B*MOF!!->W!))uMpVeU!`+T!JO[!F.!!.W!)2f/{1j*m!b0n!sMpVoU!`>T!J2[UF!<<!3dUp!o-t2uU!!g4mdpfbwu!!<M*V1U/`1C)J4BdTf!w>!!o1s/v6u!f0s!!M*V1U/`1T!J=[!F*<^!!g1m!p]btue!sepppuDOuWd!f>s!!t.b!uQv!s-bmubfn)seppOuu)iOh-j!mW)*u*p<e!)wgfjd!3<!*v3ww!!>-!2wwf)dt3t)psspdv!h>i!omfbtnts-p!Oturishuj)m2!/41d!f.w!!e<p^u!O1W!*]*t<e!svpwp!D>u!dvfws!!+.!!M^V!U4`!T]DtBeMsFp!p,D!uMdVfUs`!C>J!B3Tw<!!4sdffuwv!s<o^!!v1w!<]!t~e!sgpmppDbuud!fMsU!D.`!D^m!j2q!q]fteeTsqpipfDsufdGfpss!n>G!b2dwu!p4sd)fdwp!o|t!u*!^j!o5!!w]ftde4s!pgp*D!u|d!fgsm!p4bduf!wm!!o>j!!muftoohpudi!)-gw*o<J!ns!f4uuvbsno!!onjb!yu)t)omp!d+!!-mQ!!,4!dgf/w{!*o!j0!!u)tmo!p,d!!2-/W1!*4-d!f1w/!1o*j<!!u~t!owpfdd!4-!OM!U4Dd`fFwe!hofjW!fudtuoppsdG)pfsunbGvbmdbuwpFs`)DdUpMo!t4ud!fjwo!!~w!f<db4u!fwi2u-o!jdtp`obtuuf!ijuo!!+w!f*d34w!!w-32*w!)|t!tgpmspdb!uo!syv!u>f!se!p<uw)!w.2!-*!*w83.*f<2!!g-myp!b+u!!yz!!.>!!1b/c2t))yyb*n<)!ugsmrptbfut!sbf!w>o!j1!/+9!665/41:!9;6!!w,!!@)!1*/15/:17!6?2!6y6)!!,>!!1b/u1f2i5u6o3j1t7`!b+u!fzi*u!!+u!bzp<m!gg!m<pcb!u0!!cb!!>>!!4w/!5u2b8p6m:g5!1<!z,!!+)!5*/z2!7,2!7583",Ek["physical.vs"]="~b!u<uysfjucsvfuwf!!+w!fydj4s!ubbQNputdjfukjppsoQ<v!!b>u!uospjjcuvjutfp!Qw`fmdh4!!b?Ozpespncb/mt<w!/q$bjNgxepfmgg!=V!TfFe`vVmWdo!jb$uu!sj?czveupfc!/wtfwd/3q!bbNVxwp<e!bwibts=z!jfoehv!mwdfodj3$!w!Vwg<j!evoofj$gp!s<n*!onpbjuu4j!tvpVQwbN)b4udsfjwy!<>!!o$pfjouejjtgpQ!mb$djpgM!we!fg*jOoPfJeU)DVFTSFJ`EM`JQHJIMUDN)BeQf*o!j}g}f!ee!fggjj$of!e<)*VyTfFu`sBfPwN)B4Qd*fw!!b>u!uospjjcuvjutfp!QwwfNdw3!!<byVfwu3s<f!ww!b+s!zyjjoshu!bwNfxdf3j!WwmVfwe3p<N!vv!o>j!gypfsuns!fnwb!u4g!jveVowf3$Nb!u<s*jyyf<u!sf$wf!o+e!jygjs!ub$NjmofdempvNevf)!4=djfowt!u>b!oodpjjouhj/twptQ/eimfsbpeX?w!!v1o!j?g!pSsFnQ!QnJbMuD5`!YvPNCp`eYfBmNW!j}f}x!N*bQuBsNjWyO!F<`!FvToVj)gepfsonj!gnfbeu!5g!jv$Np!e<f*m1N/b2u!s-jeyf<n!svpogjtgopbssnu!)n5bduf5w!!v>Q!sypfkufsdfuwN!b5udsfjwy!<!gvjoejogfp$sn!!<nmbbun5s!pvOOwp!s.n!b>m!NmbbunssjpyO<w!!wbEsFzEjJoTh`!QwJfMdG4!!gwfOepgsjn$bm!<!gwjbesozfj$oh!!<w*f*d*41!/w2N!w-QmpbtnjsupjOpuod<f!kc$pj)g5!deffwg!j+o!fyej)sVuTbFN`mFbOnWsNpBOQv*)!4}d}f!wN)BfY{`jCmPbYn`sDpMoJ!Q>Q!FmSb!n?s!p1Ow!!wbfstzmjfo$h!!w<f*d*41!/w2X!p-smmbenQspptOjwu!j+p!on<)!5d$ffwo!e+j!gyj!su$bjNgm!benfsgpjOovf)e4)dDfMwJ!Q>`!EmJbSnFsDpUOJwP!O<***!^w3b]snz!j-o^h3!]wnf)du4p!ew!M-p*d^b2m]Qnp!t-j^u2j]pno)<u!pe$!f-o*e^j1g]n!!-$^j1o]dnm)vuepfe!)=4edjftwq!m0b!dmfbnnfsopuONubdqf/kwctp/!i>f!bmeb?ns!pO$wj!o<d*mevfedfo!b=uttlojJoyojjsouhb/Nwbt)/4iufbbne!?>!!n!$4juobdnm!v<e*f*!1=/t2i!b-eepfxnNsbpqg/twotb/siuf)b5ed?fw!!+$!jeofddmovbeuft!o=JgymjpsxuNbbNqb/)w4td/fiwf!b>e!?ef!nwsppjget!onbbsjuo!)wHpOjJeD*O!B|U!TO$Jj`gFeTfVg!!gVfTeFg`jV$W!!w?Vzwe!p>c!/)tvwV/wqNbbNuusojfyn!f+d!bwmfqdt4j)eb=V!wf-e!v2m/d1o*j*$/y!z<?!ze$pfco/etjwg/h!oj$ojogj!letf=g!jfoefvem)dVoTjF$`M!J<H*ImUbNnBsQp*O!b})}4!deffwg!j>o!fmeb)nVsTpFO`uBdPfNkBcQp*!4!dwfVww!3<!*>o!p)jvuVjwt3pNQbbu)s4jdyf!w+!!>w!fedf4n)sbpVgwt3o-b!s2u*!*4/dyfzw<!!g$jfeo",Ek["lightsCommon.fs.head"]="~v!o<jfgdposbnj!ewbfsds4j!!bonscvjuffosu!M<j*huiiuhDjpfmXpfst<v!gvgojjEgjpnsfni!!w-fsdp4m!pmDjzhlitu/QusiphcjfM]j:n^f<i!!w-fsdp4m!ptDieHofvupJsshs/bueijhbjoMdjfnBfui))jyoj!nw!f>d!4f!doopbsjnebbms-s!jj!o4!dwffwd!4<!6t/i1D!p,f!gMgOjudpjef!o+u!t6]/:1^!*>!!|u!ighmjpfbXuf!tyv!g>g!joEpjsnnfbim!/uyb-p!mzg!!><!*ooppsjnubdmf/szj-e!/{u!i>h!joMpjsnnfbim!/-{m<b!nwsfpdo4)!uspfet!v>m!uM!O>u!ptei!Dupbfpgmggj!d|j!f*omubtn]s1p^o!!+4!d1f/w9!9o7j3!3u8t<o!psdf!t-vumiuh!j,M>j!ntfiiD!pufighgjjMdfjsffoiuqtt]j2n^f!I+!!o3j/!1u!t+o!p1d/)6f2d2o7b7j5e!b+s!szJ<u!ishfjtMvfmsuf!i,q>t!jtnifDIpuffghg!j4ddjffwo!u<tu]i3h^j!M+f!s3f/i1q!t+j!n1f/i6!2u2i7h7j5M!f+s!f{i<q!tsjfntfvIm!un!s,p>g!jtoivD!p<f~g!g<jedfjmfcobuotf]!4m^p!p+c!!3</s1p!m+p!D1e/o6v2p2s7h7!54!d+f!wy!<<!sspfmtpvDmzul!t,!>4!dtfiwD!p<fogpgjjuddjffsojuet!]45d^f!w+!!|3!/u1i!h+j!M1f/s5f3i:q1t5j4n!f+I!!yu!d+v!szu<t!!sfgtjvemouf!$,>!!<t^iTDUpIfHgJgMj`dBjFfSoBu`tU]D6F^S!`+N!V3O/]1t!u+i!h1j/M5b3f:s1B5u4d!f+s!!zu!i+h!j{M<b!fssfBtuvdmfuS!!,n>s!ptgijDopvf!g<g3j`ddjufmo!uEt3]s7f^m!q+n!b)t1!/n8s5p4g2j3o6v!!+<!2{`!d+u!m{!!E.3!s1f/m3q5n8b8t1!9n*s<p!gsjfotvv!m<u~!!,<>s!btmivDdpffqgTgfjmdcjbftojuet!]m8p^p!c+!!<3e/f1m!c+b!o1f/!5m3p:p1c5!4<!u+i!hyj!f+I!g{m<b!is!f4tdvfmwu!!<,i>u!etjiXDgpmfbgig!j4ddjffwo!u<to]p9j^u!j+t!p1q/!543d:f1w5!4<!s+p!m)pyd!!+4!dyf!w.!!|z!!u+i!hzj*M<b!fssfBuuvdsfoS!!sufdtvvsmuut<!!~1!!w?f!dT4U!IhHfJuMM`jBhFiSuBQ`sUpDcFfSJ`sNsVbOe!jgbjo$df!)dgpjoetouf!$jo!!~w!f~d!4<!fmtjmhbigu!Q>s!pfcmfc]j:t^j-w!/dupiohtjum!!j<o*!1w/f1d)44!dofpws!n>b!ms*p!m|p!dw/fudi4h!jxmp!s|m!efOtpmsfn!b~m!!<>*!*j1o/w1f)s4tdffUws!b>oat!gsppsmnpEdj/sufidhujjmp)o!)>o!pfsmncbjmt-j!wv/WujifhxjNmb!u<s*jzyb*d<f!ew/fudi4h!jjMsuspbqetj!b-ofddfo!b>u!ttjieH/fuuiJhsjsMbuepjqbto!d-ffBduo)bxuptsjmEeuOiphsjnmb)mo-p!jmujbhvioufQusupBcffd*o<b!ustfjuEvusfoh!!j>s+s!bsepjmbpodd/fu<i!h~j!mw!f<do4p!jhufbuvBonfcujufBouupMqjth!i+u!Jsspsmbpedj/buoidhfj)Mduppoqttu!!>j!os!pwmfpdd4/!ubinhcjjmf!o<u*MsjphuidufDWpmm)pisu*h!o|f!mw!f>d!4f!djosbsubtejjEbuoidhfj!m>!!ubbnpcmjgf!o|u!M*j1h/i1u!D?p!moppsj<u!bsvfoufvusuoB!ujpsqstb)e!jgbjo!d<f*<t!p~D!fgmmhpobbu!!-htfpuDEbjstcunbvoodffqB/uuuifhojvMbuupjqpto!)-dtppoDtfuo!pjdo/!ugimhpjbMuu!pmqjth)ioupEjjutbuvboofdufu-B!udppqoTtuuf!hj!o>!!gomppjbuub!vdovfuupugBguEpjqttu!buobdpfm-g!!d<p*ootpuj!ujdof!sgjmep/buui!hejfMdubpzqFty!q-poopfjouud*f!s|j!ej/gu!i)hdjvmu)pugpgeE!j>t!utbpoDdffm!h?o!b1!/u1b!p%m%g!!e<f*dsbpzuFdyfqWpmo)ffo{uj!m?b!n1s/p1o*!!>|!!ospfjuuvdsfos!jqep/xu)ithbjumv!s<boupfj)u.j!tmpjqh/izusEujftnupbfohd!f.!!0o!pdjvuujptgpgqE/jutiuhbjoMdufp!q,t!!2>/!1s*p-u!deffWdmb!z4Fdyfqwp!o|f!o*uu*i<h!j~m!!sufiuhvjsMou!o2f/e1j<d!o~J!!gumvppb!u-!zhsfuufTnqppfuhB!uuuyffouvobpuDjdpjos)udfpnoptfuH!!jooj!!gumtpobpud!!d-puoifhDjpMtujpoqft-!!udiphojtMuu!pjqoT!!gomjp!buut!oqpfdo)vpngcosJbuDiphtjjMoufp-q!Tdupfoht!ue!jjpow!!g<m^pTbUuI!HbJoMh`mUfPDQpTt`jNoVfO*]!t|u!ishfjuMvuspoq!tt!nupiphujiMtuupfqqT)!dnpsopfgDjpotvj!o<f~-!!<qeffomvcnbcosfb!Dmpptpjco!f<-t!pbDobhsmcfnDvpotfjqo!fu*b<p!m~g!!<$tjpgD!fOoVpNd`!EuJbSp`mMgJ!H<IzUbTd!f?e!!1ub!ptmugs!v<dfud!oEbjustfjdeu!jupbopbmmgM!j<hsipum!p|d!!w4fddf4w!!e<jospfjduudjfpsoj<e!!w4fddf4w!!d<pomppjsu<j!tcppqp!m4!dffowb!c|m!fuei<h!j~M<u!pvqoTj!gupdsvns!uEtj!sf1d!u?j!pToUbImHMJjMh`iUuP!QeTj`sNfVdOu!jgpjo$bm!Mjghjieuotf]$OV!N~`!E<J*S*`1M/J1H)I4UdTf^w<!!>wap!jsep!mhpfdu/Eujishfjdmu)j!p>o!bfmmMcjjhtijuwJ/ougiph)jdmp!o<t*uz!bjdof!eE/jusifhdjuMjupoojbpmqM!j-hfiduo!beujtsjfed/uujiphojbMmuMojjhpiqu!--!fddpoobtuut!jjEou!iHhfjpmn)foupsjjudbDvpoofuufuyBuf!dhofbpuntfjuEsuzf-h!!p>v+u!!sJpomdpjde/fuoiuhMjjmh!i<us!pmmjphdi/uu*i!h|j!Mmujohjipuq/!d>p!msppsm!p>d!/eujishfjdmu!j<p*osbpmuMdjfhWimu)/iduphmopfsm<!!>m!jfhdioub/uetjjsEfudiuhjjpmo!!u>b!pemjgs!f<d*usjppuodbfmWMmj)hfi{uj/mebjnssfpdou!j>p!oo<p!jmujdhfisuj/ew/jutijhcjmmf!!<>o!pujsuvjft<p!q~/!zs$uffonepjfgh!!.!$ojpgj!uOjVtNp`qQ/PuJiOhUj`MMuJoHjIpUqT!!>?!!s1pu!dtfuWsmv!d4ud!fQwp!j|o!u*Mujihhijum!!|u!iwhfjdM4u!oqfpetjjduojJp!ou<v!pw!f-dz4s!udfpnmppfsh<!!ugymfpuboup!Dedjjtsuubfondpff<H!!gomjp!buut!oepfdd!b-zu<i!hcjpMpumo!jfpoqb!cumifhej<M!u~o<j!pvQo!jogjp!sunt!oQppdj)opugMojJhuiiuh!jqMpujoojupMQjuhfihu!te]jOpVwN!`<Q^PTJUOIUH`JM",Ek["lightsCommon.fs.body"]="gHjfeponff$us!j<d*DupiohujfMyeuf!uhdffpmngffuss!z-<m!bhjfspfnufbuns!z-/zqsputfjnupjfpho!!->f!d.o!bwjWejbfSxuQbpptdjsubjfpmod<!!-hffdponbfjuesbzs/soJpmscnjb!m-!f>d!oobpjsenbbsm)<s!bhmfvpdnffquTsuzd/fwsjjfexoEJj`sF!S>!!o*pssbnmbvmdjf{qfT)uwdWfjsfjxeQopJt`jFuSj)peof*o<j!gf$ej!ggejf$g!!VTgFj`eDoMfF$BS!D<P*BuUih!jhMfepfnufdufsmzg/fdsm!f-bmsbdjpsbfuuObpns!n-bzms!u>f!ndpmffhb!s-dfpdboubOjpesbnsbsmj<)!ft$vfgogejjEgud!fJsojdejoeJf`oFuSM!jh*ifut!vegjgsjfEduudMfjshjieuo<J!`F$Se)fegfjoojfg!fOeV!Ng`jQ$PJ!OUg`jMeJoHfI$U`!TIgBjEePoXfT$!1!<!*t$teffogijhovfp!SOuVbNp`dTsQbPfUm`dM/JmHbIjUs`fTuIbBnE!P-XmTb!n1sp!Ou$bepfdgsjboffm!dO/VzNs`uEfJnSp`fMhJ!H-IsUj`ETxIfBjEwP/XzTs!u1fn!pf$hj)gf!d)oObVjNe`bQSPMJCOJUu`fMhJ!H>I,U!Tf!d?o!b1j*e!b%S%u!bepfdgsjboffmed)!SFU`BEPjDsSfBdFuM*D`!FQTpVj!ogufMejghji$u!!q<p*jtotufMojihhivup<s!/m$bjjgs!feufbgnj!o-fmeb)nVsTpFo`/TzIsBuEfPnXpNfBhQ!*-!s%j%E!xOfVjNw`/QzPsJuOfUn`pMfJhH)IfUd`oTbIjBeEbPSXMTC!J?u!f1h!!>Q,p!jfoduoMbjjheibusT!ib*espbxm!vqdpfjqoTuuMdjfhsijueToiJb`eFpSx)<e!fo$jfgofeej!g%%!!*$QVBONSWPOMFM``FMTPVP)Qe`fToUjBgSfUe!!ggjp$s!!)jgojue!ojf!$>!!1<g!jje!o=f!$OV!N<`*QmPbJnOsUp`oM/JzHsIuUfTn<p!fjh!),f,d*o!b|j!eqbpsjsoJuMMCjJhuifuh!!>>!,q!pfjdooubMjjehbisustJ]m!cjj!!^<*!WjVg`!F)CqVpDj`oFuQMZjUh`iQuB/NfWoObFc)meffeo*j!g|f!eh!f%u%Q!p*jEoSuBMEjOhBiUuTJ)oegfpo)jqgpfjeo!u%M%j!h*iQuB-N!WhOfFp`nFfTuVs)ze-f!oejjgsffed!ugMjj$hi!u*g<j!eo$fj$g!!e<ffgdjoobfjee)bVsTsFJ`qTbINBuEiPhXjNmB!Q>*,!!%f%d!o)b]jJe^b!s=s!jO!V<Nz`uQjPtJoOfUu`oMJJqHbINUu`iThIjBmE!P+X!Tc*hs!/q*pmjfoyufMUjqhbiNuuTiihbjemp)xs!b>f!oqjpMjpoUuCMHjShti!u>T!ifbdeopbxjte]b!sjs!J^q<b!Neujishfjdmu!M4jdhfiwu!/<d*p3mwpVsw!!+->q!bbNmumi)hcjwmf)dE33)fesjvsufydfuuM!j>h!imuf/ywfjUtqjbcNmufi-h!jsmf!d5fdjfwwf!TiQbBeNpUxI*H*J!M@`!FhTfVu!QgpfjeogujT$ib!ep*xf)tqvpgjgojuETuidbfespjxeNobJq`]F!Sj)!e^f-o!jqgpfjeo!ugMjj$hi!uTgijbeeopfx$/t!i<b*e1p/x1N)b4qdTfjw{!f>-!!fqdpojbojueMbjShuibupTdisbbefpmxd/!t4idbfewp!x<C*j1b/t1-)!4qdpfjwo!u>M!jfhdioubTjiebbesp!x4/dtfiwb!ep*xsSbbmevjdvftq-T!uwdQfpsjjoeuoTJi`bFeSp)xeDfpopjsgef]e!!jg!j^$-!!qpgjjoeuoMfj$hi!u~T!i<b*eupixh/jtMiebfeupdxfDmbgnffss!b-Omfbbjss-f!uqbpnj!o-uzMsjuhfinupTfihb!e-puxi/htjiMbuedpfxsDjben)fusdbfGsbjsE*`!F;S!!2/g1j<e!of$$fo!e~j!g<f!vSmFb`WExjpsefbdiut)!e+j!szfudjutMojfhuiouJ-x!phefbpintf!u.s!z1-/!2n!b>u+f!ssjpbmmp-d!/sufighmjfMduudffesMjjeh!i~u!*<<o!s~v!u~f!s!$<VeOsSbPdMtMj`eM!P|P!Q*`1F/O1E!>!>!$ffvomebjWgxp!eb$ijtg!!%)%O!VmNm`vTDQxPpUe`bMiJtH)I!UgTj!!?<!*1e*s!p%p%D!xepfegbjiotf!e-)tSvFj`eEbjSsxfpdeub*it!!T-qtpbujMCjxhpieub!ittq!p-ufM{jjhTixup<e!bi$tj!g-!qebfNgxjpoefbei)tV)TxFp`eTbIiBTEuPfXhN!B.Q!*1!/%2%!!>O!VfNv`mTbQWPxUp`eMbJiHtI!Uu`bTpImBgE!P|X!T*!f?w!j1fd!fTSqxppueMbjihti)u!Tgijb!epQxB!NtXqPpEuBMIjTh`iFuTTVi!bgefpexg<j!$$!f<ofevjsgu!!>!$fVmOcSjPtMjMw`/MuPiPhQj`MTuUdBfSsUje!!g<posp!j)ujdofus!jje!/>u!i1h<j!Mjf!s=f!iOqVtNj`nTfQiP!U>`!MoJpHjIuUdTf<s!jje!/,u,i*h!j|M!utdqfpsujMej!h<i<u*!m>b!ntsqppou/Mzjshuifuntp]f!hj!!-^u<i!hjjgM!f)stfqipqutMjjnhfiiu)/ffdoobbcjmefbes*s!J|u!ihhfjuMTfqspfuiMqjthjinufJIougfph)!t,q!psupMmjphDiuui-h!jhMfuponffjucsnzb-!!>e!jsspfmdpudM/juhiihuj*M<u!df$sjjge!!e|f!g*jeoffmec)bVoTfF/`uTiIhBjEMPfXsNfBiQq*t!j%n%f!i))]!Jg^j!!=!*OuVdNf`sTjQEP`UF`SM)JeHfIoUj`gTfIeB!EgPjX$T*!!gtjqepoufM$jh!i<u*Tmibbnesppxo!/>z!stuqfpnupMfjhh!i-ufTcipbseQpuxith]j!mj)!f^d<o!bejjesbfsdsuJMfjchpisuQ/udiphmjpMsu!f+h>!!>b,m!mf)dcowbfjde3b)sesjjs!f<d*u1M/j1h)i4ud/fwwj!t>j!cfmdfo-b!jsefbdsfsjjw!f4Tdifbwe!p<x**1*/!1@)!4hdffuwT!i>b!efpdxo)btjqepbusTsiJbmecpjx!N4bdqf]w!!j!*^f-t!vtgqgpjuEMujdhfisujTeiobJe`pFxS/)teifboejpgxfNeb!qgTjj${f!-!gtjqepoufM$jh!iuETOiFb`eQpPxP/Mt`iMbMePpSxOCVj$bt!-~!!t~q!p<u*MujihhijuMTeifbuedpfxm/gtfisb!e-pmxbSjbsefjuvbtn-!!-wzTsqupfunTpifbhe!p-xuDiphpjsMeb]f!sjB!u^d*f!s;)!b2f/s1B<u!df$Sf`ouedjfgsj!ES`FF`SE!j|s!f*deuf)mecjbsoffd/uuMijhhjiMub-f!shBfupdnffsu)s!zg-j!!n<b^ujf]stjubimh-j!MsbffgsmBfudduffse!M>j!huiiuh*j<M!b~f!s~B!ud$fVsO!S|P!M*M,`,MjP!P<QT`UFIOHEJM!`B$FfSoBe`jUgDF!S`$NjVgO!!)=O!VjN!`<E1J!S>`!MjJ!HuIoUjT)!!?s!p1g*!!%U%S!BeUfTg`jQoPfPeM)`SMFM`PESjOsVf$du!*<u!iEhjjsMfbdfusjBpuodbfmsM!juhiihuj!MebjfssfBduudjfpSo!bm*MbjfhsiBuu<d!fS$`jugd!fesfjgEj`oFfSe))eVfToFj`gTfIeB!E%P%X!N*B1Q!*?!!%T%U!IOHVJNM``EBJFSS`BM`JUHDIFUS``TNIVBOE)P!XgTj!$?!!1g!jEejosff$du!jpEoObFm`MQjPhPiMu`TMiMbPeSpOxV!$ej!s~f!d~u!j<p*oubimhMjjMheifuuTdifbmegpfxs<!!-m$bfjosefjugbn!!-$zVsOuSfPnMpMf`hM!P-PuQi`hTjUMBuSdUfs!jgep)su!d)fjsojuE!`jF!S>!!1g<j!ejo!f=$!O!V<N1`/E2J!S;`!M*J^H!IjU!T]<e!sjp!p,D,x*p!e|b!ieTjmsbfodpujjupdofbsmjMEjwh!i-ut!v>j!eebjSsxfpdeubjipto/bxmpMejbhiiTuuti]h!jjM!m^b<o!pjjgu!d)fesjjsef!d-utjbpjoCbxmpMejbhiitu//xfpoebbcimTfuei*h!j|M!mhbfoupEjjusdffdsujjep!o-bfm{MjjThqibuNJxopgepb)ietj/sxfpdeubjipToubimhMjjMhmibuo-p!jhufdpfnsfjues!z--^!!ejj!s]fqdbuNMxjpheibui*T<m!bo$pjjgu!deffsgjjeo)fxep)eVbTiFT`uTfIhB!E@P!X*N*BxQp*e!b%i%T!f)w]jJf^d!f=s!!O-VfNm`cEjJtSj`wM/JuHiIhUj`MTuIdBfEsPjXeT)*3d!fewjcs)fmdmubj!p>o+b!msMpjmhpidu/TuiibhejpMxu!d>f!sejjes!f<d^u!jjp!o]btmxMpjehbiiuT",Ek["lightsPBR.fs.head"]="~t!u<s*vodpuj!tQvimzdtdjPdubomfNjbcunfbs!j,b!m1!/|2!!w.f!d*4*!1e/j2g!g.v!ttftDfpomiphsv<p!sg!m+p!b1u/!7s2p!v.h)i3oqfytft!<-!owpfjdt4v!mtdqdfPduvomfbjscDnpbm!p,s!<W!Ogumppeb)ux!ptqq)ffduvbmsbvsuGb:t1!<o!sv$ujfgse!f|g!!*VtTtFf`oDiMhFvBpSsD!PuBbUpm!gg!mopjb!uu!tdompfdb!s-doppbjut<v!mgdmdpPbuuo!fdjmcfnbbs!dupbbpumSgp!vohji!oufttotp<d!!w-fWdO4u!pdem!fubbspdmpgb!uoGj1!<u!tgomppdb)uo!pdjmtfvbmsdddpPbsubGm:v1d<f!qT$ffuoveqjngpd!!u$bjpgmegf!g!mVbTdFj`tTzIiFQF`Osb!mwvfddf4q!TtuidfffsojDepomJp`sF<S!!gsmbpmbvud!ftqiTfufdofSspjvehoiJo`fFtSt!<f!oj$gffoee$jg!!m~b<d!jwtfzdi4Q!`dfmtfvbgsgdjpEbuudTfqsfjdevomJb`sF!S>!!fwtfvdg4g)j1E/u1d*f<s!jwefodJ4`!FtSi!fffoojTgqffed$vm!bsm!b>d!jwtfzdi4Q)`1b/f1s*B<u!dgfmSp`buud!fJsCjMET`iFfSf!obCfSsEBGu)ddfpSo`tuud!fjsoj!Ew`fFdS4!!foopjsgnfbem$-!!dpmobtduj!tjzoi!Qw`fudd4f!swjjEf`xFESj!su-d!fdspjoEt`uF!Sj!of!ogjmgpfbeu$!s!pvghjieoofft$t*!!~|!!<g*mtpebsup!peDpuudOfWs!!>-!*t1b/u2v)s4buubfn)!e-poup)joupjstnpbqm!--!swjjEfxxfEjjws!*-*m<b!ngsmppob)uf!usb3v!m>b!wsFp`vDhUiMo!f+t!ts!p+m!psDpfvthvigogfjtet/<m!bgjmspfbuub!nb!!+>!!ssppmvphDiuoifhtjtm!!=>!,1!/f3t6v!g@g!j.E4u4d:f/s3j!e+/!usi3h!j,M!e2f7u2d/f5m!g+f!ss!p~v!h<i*otfetstp!p.D!u3d6f/s:!!-;w!o.J9n/!5-9o!p+j!usj3t!p,q!!2-5s/j4E!x+f!jswp!v-hmibonfstpto!).f!u:b/v:m6b<w!Fg`mDpUbMu!!+c!!m>f!ostpfvshgi!o+f!tstp!m=p!D1u/i3h6j!m@!!>5,5!/s1b!m+v!dsf3q!T.u!d3f4s/j8e!/+u!ishpjvMheifoufdtftm!g,f!s4!/<3*7z!/;3!u2!/+:!8*!s+p!msp3D!s.b!m4v/d3f8q!t+/!msbpjvshfiuobfnt!t.!!,*!11//28)34<d!fgwm)p!b,u!!yE/H3!u>!!+f!ysqp)mbp!D+s!bempvudOfWq!t,/!mcb*j!s,f!u)bsnp)v!h>i!omfftott!f=s!g1!/43d6f!w@!!<1*/!1*!x;/!21u/!2-!1+!!-){s/p2vuh)i4odfftwt!!-.*!11!/-326!*-*1<!!)s4fdufvws!o-!*tzb/u2vus!b-u1f!)-EyH/!2+u!)S4FdDfJwQ!S)P4DuBbMn`!Q>J!*w<o!J~n!!w4fudb3n!!E<G*HwBvq!q-s3p`yd)udmp)oEt3uf!sjvou!ywffud!4>!!o3pus!n5bdmf-w!!d<p*owtvu!!-j2o`!dwufmd)4E!3wfjsfvxuEyjfsu-!!>d!p2out!u5!djfow!!g<m*ptbtuf!osiphvvhpiso/fmtbtj*s!f|u!bgnm!p-bsuj!EexpfujOwW!!->m!btnbsupvos)bwuVf`)DeUpMu!)>o!pwsvn!b3md-f!ww!j|f!x*Esjbsm*v*d<f!qdTpfomtcub!twjfed/5u!idh1j!M>b!fwsfBdu5d)f.s!a2)-!!g.j!!1</u1i3h8j6f-I!g.m!b1i/!6,8!3i-u!e1j/X1g3m3b*i<!!,d!ptoptQuu!iwhfjdm5!!>d!2^!!>4!!w]ftde5s)p2p-D!u1d/f1s5!3<6u-i!h2j/f1I5g-m!b.i!!1,/!1i5u*e<j!Xwgfmdb5i!!s.!!>t!psQpuvihhijomf!t>t!!^+!!3d!1]!t,e!sdp2p<D!ugdmfpsb!u<!ubi1h1j5f!I>g!mnbjio!).s!/iyu!e+j!Xsg/myb-i!!f.y!qt3p)Q.u!i:h/j3m9!!>+!!^e!p2u!O]Wt*e*s!p+p!Dsu/dyf!s,!!<su/izh<j!fwIfgdm3b!ig!b.c!!i>u!ewjfXdg3m)b.i!!2,/!1t5p-Q!u2i/h1j5m*!!>+!!^b!111!5]!t,e!ssp/p{Dxu<d!fssf!u<v^s!o5!!g]btce<s!p~p!Dwufddf4s!!F4odwfjws!p<osnpfmopudC/SuEiGh)jdMpboftsuB!ujdof!sw!f>d!4s!pomppsDnubimh-j!md!p4odtfuw!!j<ou!iwhfjdf4I!gwmjbfix/Eujish-j!MdbpfostBuu!djfos!!w>f!du4i!htjqffIdgvmmbbis!D4pdmfpws!-<!idupeojtXug!mjboi!/gumiphbjuM!btfqsfBduvdmfbss!G>:!1i-u!edjpXogtmub!ij!o4!dgfmwp!b<uo!psjpuvjhtipoqf/tuti*h!j|M!bwffsdB3u!dgfbsc!!>>!!tEpGQHuBiqhqjsmp!y4)dofpws!n<bomp-j!uwjjtfpxqE/jzss-u!fsnppvfhhi!o>f!totp*j<u!jstfpuqv!s4od!ftwq!f<dsvjmEbxsfDjpwm/pzss!u+f!ngpbfch/!y>!!,s!jtEqxffdjvwm!b4sdGf:w1!!<+m!bgnbscp/oz/<z!s~u!fwnppjfeh!!d>p!nmqbvnusfpNov!m4udjftwd!b|u!u*fusijhojhM)edfpuodtfum!gjfos!!wufidh4j!Moepfsundbfmm-g!fdSp!outvup!ojjo!!-wmfbdj4s!fwujbfnx!Emjbsj-s!fdupboNtmub!djjot!zwifQd!4o!jt!quftdovpmdb!s-Dzpsmupfsn-p!fdhp!outyuf!ujoop!Dgdmjpsbuuf!ntpqffHd!vomjb!suGt:o1p-d!!d-puoithuj!Mjbof!sgBmupdbfus!!supivhhjiMobfftstB-u!djfoSp!vouj!!wuftdo4p!dt)jmobhdmjftTzdibQu`ubffss-B!ujdofpSv`uu!dwffsdj4E!`nFvSm!uejjTpdwb!uu1f!s?*!!T|U!IwHfJdM3`!BgFbScB!`>U!DEFGSH`BNqVqOs!pgyj)$op!s~n!b<mf-d!owbjjfexbEsjssJ-e!fsupivhhjifoXfftotj*t<p!dw!f+d!4f!tGvtgtgFjtet!!>>,!!tfqtfvdgvgmjbEsuDdpfmspjse!o+j!/gubich/jyM!e,f!utdqffmdgvfmsb!s<Gf:d1o!b+j!egbbscs/Jze<f!ugimhpjbfuX!fFotjtt!p>d!!g+b!ch/oyj!s,f!ugubbcd/Tzj<u!mgvmnp!b>u,!!Fsnbtm!v>d!f2q/T1u!d.f!sFjteto<j!/wufidh4j!MGebfwuhd!f>m!gtfqsf!d<vhmobjssDfpumupbsd!T,f!m)h2o/j1t!!.+!!tfqdfodbvjmebbssD!p>m,p!ss*b!m+v!d1f/q1T5u8d7f2s:j<e!owjf/du4i!hGjnMte!f>u!dGftmtgFftst!!<+*!*Ghbowjhs!f0u!u)b2d/T1j!u.m!vFnn!t,!!+h!oGjbswfhu*u<b!dtTjfomhhmofjTtd)b!u.u!f1s/!2,)>!!+G!tstpFmtptD<f!tnvvgmgujjeT/dmbbujusffsu!b,n>!!>G!nftt!v+g!gFjnet!<4!d~f!ww!p<j*eh!oSjFs`fEujusbfddTuj`uQmivznt!j-dhbomj)sdfpuoutbud!Tjfom!hJoojdtj!e-ftotufMojihhivup!se/jmsbfjdsufMujbhni!u--1!:dGpsobtmuv!djfoq!tH/fmpbnjfsufsujbdnD!p-osupfmypuD!shbfmpvndffuqstz/-m!bdjpsoftuub!nj!o-!sQjiEzxtfjjdwb/mzNsbuuffnspjfbhm!!-nmbbunfsspjob/mz-s!ujfonppvfuh!)ShfogjmsffduuufbedMtjjhuimuv!Nsffugvmqfndpudf!e<MJjQh`iMuB*D!P|S!QgJmDpFbSu!!+e!pfudOoMb!j>e!btsbsujv!s>b!uffd)oebpjue)bhsfspJneffuusizh/jofpXsfnobjmt-p!de!j4sdffdwu!M<j*h1i/u1/)e4jdsffwd!u>j!phoo*j*s<f!uwufbdd4T!jjusmsvbne!j4bdofdwf!!<>*!1e/p1u)O4Md!f+w!!e>j!shfodjusMfjuhuibud/Tdfpmmhposj<t!!4$djfgwe!fgg!jVeToFf`$DM!F<B*StDtPfBoUih!vgpmSpobfuf!ietp/umObMjdsdf!u>b!nt!b-usvjsEbxuffj)we/pzus)uhffnppnffhu!s-zm/bdnmsfpbos/dzpsbuufOnppsfnhb)mG-E!SeCjosfffdiuTMMjChJi!u+/!esjpsmfpdDuojfpfoi*t*/<m!bwjfsdf4u!bdnd!J+s!sfbdeojbbjoedbfs!s>j!!e>p,u!OsMbdmdv!d+f!qeTjosfffdiutM!jhOiFuF/IdTp`mFpTsV<!!gdfmefgbjs$dp!bugTjqefodfv$mb!s<!*,t>t!fdodiJhsvspbSeujbbpoddsfb!f+m!dC/SmEbGj`sHfHuYb)ne!j-s1f:dGuuMbjphdisub/femjds/fmdbujjspfou-b!nh!f-p1nGfuubspzd/swbjffmxdE/jmsb-j!shffupbnnf!u-sszj/Edxmffjbws/dzpsbuufOnppsfnhb!m--m!bnnbsupfOsujbbpmd/sdbmffmbds/dzpsbuufGn1p-f!hn)bGuEfSsCjubomf/ndompfsbjswdopFb!u+G!:f1d-o!bnjbeubfSsujbbpmd/sdbmffmbds!d>p,b!usSbpmvvhdifoqfTtutb*p<d!sb$ffmode!jgUB!PD$SjBgFeMfDg`!FVTTVF!`gTfIeFgFjO$!!t|i!f*fuoiThqjfMdevfmubdsf!m,g>f!sj!susibhejjMbeofdufd!f+m!gCfSSE!Gu`vTpiofjf!o-)mebjjssffduubMnj!hmibuj/sefjusbfNdmubjdpjot-z!ihQf!ponjf!uustzo/pwdj!f-xzEsjusf-n!phffhp!nufyufsuzo/poDpdsjnsbumf-n!pnfbHu!fosjj!bumt/otpidf!f-ofDdpombpjse-b!Snubbupfdssjbbfmm/dt!i4fdffowS!povjh!iuotfotptd*!<-!fd$ofbojeejbgss!js!f4gdmffwd!uofje!Mujthoipud/!e-jfsdfodbujTeqbfsd!v4mdbfsw!!,o>j!!justsobpedj)bmobddfj!t+z!iCQS`EsGb`mHvHdYf)qeTjusdffdsujMejohJi`uF/Se!jesjfpdwu!j~p!o<-*!shpfmppnDffutsvzg/gwjjef/xmEbjjss-f!uhbfnp)nufsufsczn/boMp`sGnEbSmC-!!+n!bfudfosbjjbemb/stsqjf!d>v,m!bfstDvpgmgpjsE-u!dnfbsujfesojjb/mu/ithqjfMdevfmubdsfGm:g1f-s!!n|b!u*fusijhbjmM/esfpuvdhfimogfftst!*u<i!hsjfMgemffudduffmegMfjSh!iuuv/peojjs!f-dmubEjjsgfguvbtnf!!m,b>j!sjfsusbbNemjbbdojdtfz!i+Q!!CoSjE!Gu`tMobpndc!f-szus)unfbnupffshj!bumy/feujogpgDvdtjfsDupfmnppsf*H<!!o~j!!wuptjoep!dS!F-`fJdooebjjsefbdsusEjj!g4gdvftwf!`oQji!zuttjodpbdm)",Ek["lightsPBR.fs.body"]="gQjiezotfj$db!mNgbjuefosfj$bm!!<nbb/u*fwsVjwb!m-<q!bnNbtutffsojibhmv/peSjogfgfvittf)DEp3mfpssv!u>y!feuj!g>g+v!ttftDfpomiphsv/psShocf!f+i!t)/2m/b1j!s.f!unbfnu!bmQoBfNtTtTGFbOdIuHpVsP*S<O!FwFfIdT4`!FeTyVz!!g>f!engbjy$)b!c<t*)1e/G2e!y-)8h1f/p1n!f-utstzfOopishnvbpmS*o*f-f!ibtc)tq)nebGmedz!)>h!ftptnffouishzvOppSsonfbfmi*t*/*m<b!jgsmfpubbun!!hfgpjnefoufs$zS!p<vchhiso/f*t*tw!V>w!!n-bqyb)Nnsbpym)peDyozf/fyi-t!)eEy3zf/szv*u-y!feuy)zs/b{f*o<j!MnpbUumffsyjfbUmq/bsNpsvphmipoDfotftf!i>t!!n>b+y!)ssppmvphDiooffftittG/bmdbujpssf-u!b1n/!16Q3B6N*S<P!MnPbDuOfFsFjIbTm`/FsTpVv!hgifoefgtjt$!,!><!shpfmppnDfoufsfziStp!v>h!isopfmtptD<o!fnfbiutf/smjbbjms/fsupbvnh!ioOfFtFtI!T>`!FnTjVo!)gnfbeugfjs$jb!m/gsjpevohfi$of!t<t*-1!/22/!1-*t<t!fnobiuhfvspjSbumb/ptdqsfbdfvmmdb/smDbpjmspfsu!b>n!)nojjyn)!w>f!dt4t)f1o/i1h5v*p-S!uebjpgdgsvbtffmDdp/mmpbsj/ssfhucb-n!!n<ftutbfmooifhtvtpGSbzdsuupfsn*p<f!hn!b>u,f!stjtbfmo/ithqvfpdSvumbbpsdGs:b1f!m>d!/2m/b1j<s!fu$bjng!e<f*g6!3V6T1F/`1D!M-FtBtSfDoPiBhUvp!Snubbupfdssjbbfmm/dd/mmfbbjssdfpubbun!)>y!bdnm!f>b!stdtpfboui<h!vnpbSuufbspjdbsmb/fdmmdf/bmsbdjpsbfuuSbpnv!h<i*oufbtptd!s>b!fdmmdf/bmsbdjpsbfuuSbpnv)hfiuobfstvtu<b!tn!b>u!fusbjpbdms/bdfmmfdb/smdbpjbsufGu1b!n>!!wgfjde4o)f1$/1!5<*z</!*nwbVuwf!s-jqbbmN/tdtmffobishdvppbSuuGb:p1d!s>b!f2m/d1)<E!3f$sjvgueyffgu!!V>T+F!`tDtMfFoBiShDvPpBSUuNbBpQds!bnfbmudf/smjbbjms/fdumbfnb!sdQpBbNuT!T+F>O!IuHfVyPuSv`sUfB3PED)SdBmFfMbDs`dFpTbVu!Ngbfqe-g!jw$Vw!*/gyj<e!of$",Ek["toneMapping.fs.head"]="g$jjego!fe$fg!j~o!f<e*)sVptmfpMdj)offubbssUvpuobftN!boqsqvjuofhs*!!<}s}p!mepfdg!j+o!fueb)NVutvfqSufvjPoTiFbDsBe!U>p!osfpNmbpqdq!j<o*hs*p!m}p}d!)eufjgGjUoEfPee)oVBtUfSDSj!o>f!psopUmppodf!N<bsqpqmjpodh!*+!!}u}b!NeufvgqjooJfTeF)DVBt!f>B!DsFpTmGpjdm!n<j7d/U1p!o0f!Nfbsqvqtjpoqhy*Fh!ovjoqjqgbpNsfno!pgum!p>b+u!!suppmopfdN!b<q*q!j*o3h1F7y8q1p/t2v!s-f6<1!71$1f/o1e.j!g-8!74$8j1g/!1e.f)g4jdoffwe!)-V*t7f8M3j8o1f/b1s.U!p-o4f2N9b1q2q/j2o!h-*91!2w4f6d/41!.M)j4odffbws!U-p*o8f3N4b1q1q/j1o.h!)-w9f1d341!2d/p1m.p!s-*6!8|5!1s7f/u2v)s4od!fuwp!o)f4Nubbqnq!j>o!huFbyNqupvtqvusvfP!T+F!DdBp!m4pusb<n!!~u!to$pfdo!e<j*g!*!88$8j4g9!/e1f!g-j7o7f6e2)1V/t1f!S-f4j3o9i5b1s/e1U)p4odffNwb!q-q*j4o9h4*42!/w1f!d-45!4S9f1j:o/i1b!s-e9U6p5o6f4N/b1q)q4jdofhw)!w-f*d145!9d3p1m/p1s!*-!1|1!7d8p1m/p1s!!-+:>2!8u:p6o/f1N)b4qdqfjwo!h)F4yuqbpnt!v>s!fu<b!NsufvuqvosJoT!FtDbBu!v4subbunf!)udtpomppds!!|0!!*)swpfmdp4d)!24/d1f*w!),h!odjpqmqpbsN*f*o<p!U~d!jn$mfjoGeTjFgDB!!4$djfgw!!e~f!g<jco!f0e!)bV!tofsDvjuoffsp!o<U2p9o1f9N4b3q/q1j!o,h!**1!2w6f:d344!5P/q1u!j,n!jw{!f+e!D:j3o8f4p9o:U/p1o)f!N+b!qwq!j>o!hc)!w4fddf4w!!d<p8m4p6s1*:!1|1!1d1p/m1p!s.!!+*>7!9u8p6o5f3N1b/q1q!j,o!hwF)y!q+p!twv!s>f!<b!!d4pdmfpws!!|>!!*nwb!y4)dwffwd)4u)j1G/U1E*P-e!odBpUmSpSs!!4.d!f1w/!11*5h*o<j!qsqfbuNvfsoop!Uqdpjxn)m)jdGpTmFpDsB!f+t!V))7e/f3o!j+g!fdep!mgpjs$!,!!1g/j6e*o*f!$0!!)~d!p<m*p*s3!/+3!))47d/f3w!!+-!*d7p1m/p1s!!,,!!*28/",Ek["toneMapping.fs.body"]="g$jjego!fe$fg!j<o*fceh)sV/tefJM)jhoofjbqsqUbpNoffoNpbUqdqjjnomhj*GT!FJDeB/!s>h!cc!h>s!/MejJo!fb*shUopjoqfqNbbNqfqojpoUhd)jJnem/jsGhTcF*D<B!ft$Vf)mejfgo!jegffgej!ogfjem)fV$tf!S<f*jcohisb/seeJU)phoofjNqbqqbqNjfoohp*Uo!pJfeo/jsDhecf!{>j!nSjfujqoPi!b>s!ecUhpso/feNJb!qq*jhoohj)qJqeb/Nsfhocp*U<o!pf$ofjmDjfgt!Ve)fegfjo",Ek["output.fs.body"]="g$jjegoeff$g!!P<Q*BbR/VsFpm!pwDffdt5v!gJgej!e>!!-wufidh5j)MphvoujhpphjuovhpM)j5hdifuw-!!>2!/e1J*!<5!df$wf!mtf",Ek["instancing.vs.head"]="g$jjegoeff$g!!V~T!F<`*J{OzTyU/B*O*D1J/O1H!-!sbjueu)s5jdcfvwu!f+!!nybjus5u!bbnN)b)ufs{jjymJbontsupboo!dofsev<u!fwsf!d|4!!*uysjbsoutbgnp!s5nuEbjns!fodju!j-psoj)ej!o4!dwf",Ek["envmapPhong.fs.body"]="g$jjegoeff$g!!VTgFj`eFoOfW$NB!Q<z!uwjftdo4f!udobJnqfbsNbwUopfG!s+b!hi!u>h!oofpssunTbsmbjm{vfd)fwqXtp!s+m!e{Qzpyt/jsupjmppoD!w.o!fv!D>b,n!fusibhQjpMthjoujjpphou*v<p!!wf*dE4E!Bx`pHsOmJeEOOpFsMnCb`mQ!B>N!WjOoFw)fesftofjUgsfbeo!tggjpmsfn$Ej!s<f*dzuujjptoo)fouposJnqbbmN-w!ovfW!j+f!xiNubhuosfjsyu*T<s!bm$vjdgfeqftg!!-F{OzWyN/BsQp`mNpPDEwFo`fS!F-GuMiFhDjUMJhPoOjp!hwufvdp4)!ysjfng!m>f!duuiWhfjdM!h>o!jspfhgumvfpd!u)*dYbJnNf`sHbOUJpEGOsFbMhC-`!QxBpNsWmOeFO)pesfnobjmg*f<e!!g$jfmmft$f!!<w*fzdu4j!tsoffgumofJdqubWNfwdo!f>!!+s!figushbodfus)udTbsnbfmsvbdUfpqGts!b-h{-z!yx/psspmmepODpwsonfb!m+-!!usifhgjsMbhdoujjpphouSvbpu!j-pu*i<h!jM$hfoojepjhguv!p)$yjjgne!f>g!!uFiOhWjNMBhQo`jUpZhQuFv`pD!VCZFMQ!JwUfMdV5N!`fHoOwJDEpOmFpMsC!`>Q!BuNfWyOuFv!sgffDevgcjf$)f!owgnjbeqo-f!$wf!d<4*)1g/m1j)q5FdofwwN!b>q!!s+p!mspfDgwmoffd!u5Wdffdw/!y-f!tsmffg$mf!d<u*W1f/d1/!z-{d*f*W<u!df$mfgmfjsg!!-eqfbgnjwooffe))WFVOfWcNvBDQf`sUvZuQyFf`uD!V>C!Fs`pVmWp*Dw!owff!d5",Ek["lightsPhong.fs.head"]="htoupsivQdouo!jCmmCj`ofotQvigpgojhENubduffssjjebomJ!`|F!Sw!ffdt4v!gegjjgEguvdtffsDjpemopJs`<F!Sw!ffdo4j!gtfqef$dv!mbhsoDppimQposo<j!mgCm`pubduf!stjqEf`dFvSm!busdTfisjjoEj`oFfSt!tf<o!jggmfpeb$u!!t~q!f<d*vsmpbmspTDufstfvoghgujie</!m~b<j!swfpujben!)SuFs`fEcjnsbfMd`uG`ECSmCj!o+o!Qfidpoobhj)edbpsostju!!>j,o!!fJtovdgjgejfEouudMfjshjieuo!je/jusifhdjuMMejfhuiduf-m!gdfpso!t|u!!*juoi!hHjfMpenffuudsfjmdgDfpso!uufiyhuj!Mheffpundffumsgzf-S!!dupvoptouj!!j-om!bCjmsjfouobQni!pmobhjNsbfuufbsNjhbomp!inQbouofjsmjCb!mo-j!!juotpovpud!!S-fzgsmuffdnupffehM!juhyifuu!ospfDgdmjfsduuffnepMfjHh!iouj*!!u|t!ogpmdp!b-uf!deopbujOeMb!s>s!jt!b4udvfswb!uofj)!euptuo)phdf)phnofpuisQzo/oojpmsCn`bfmt-v!gegjjsEfuddufMsjjheiouJ/`eFjSs!fedjupjwp!o~*!*<<i!uwhfodf4s!ujTsssbbmevjdbfoqdtf/!m>b!jespfuuObMn!!++!!e*jtstffdoujMojjhiiTus/bdmpvmdpfsq<t!/smfbgjmsffduubfne!M-jshpimup/DesjbsmfvddufEqjtg/gmvbtjfs!f,u>b!nj!s-smbbenjsbpood/fz!s+u!fCnSpEfGh`!M-bsnjcEfxsfuj)wn/bzusfusfjnbpmf/he!j-gogpvjtufdDfpsmjpes/*u<i!hsjfMgumdffdsujfee)MhjohpiiuQ/oeojjsmfCd`uGTEqSfCd!v+m!bfsd!o,b>j!ejbss",Ek["lightsPhong.fs.body"]="<CimujhooofQsiupToshbNmbvudffsqjtb!m>!!nibuuhfosfjsbumT<s!bnmbvudffsqjtb/mm/bejjsgfguvbtnf!D<ptmtpfso!j>o!jeijtg!g>v!ttftDfpomjposj/isThscb<m!vndbfuqfts/jmbbmj/stfqufbdnv!m<bssbDmpvmdpfsq!t>!",Ek["aoMap.fs.body"]="g$jjegoeff$g!!VTgFj`eBoPfN$BQ!<!*t$tjfgo!iehfvgpjso/fmeb)jBsPfNuBbQn`!S-`o2p*jt!vgmmdpdbPuu!obfnjccjnfbo!u-PWdOdumpvet)joppoj!t>v!m)dudfPysubvmsvfd3fEq)TbfpuNvbqqn-p!dw!V>w+*!/ssb!m.v!d2f/q1T*u!d+f!sbjpeNobjq/JuoiuhfjoMtejfuuzd!f,m!g2f/s1!<<!**$sfjmEjxgf!jewf/gzjsouffen)pBfPhN!B-Qm`bSn`s3p*o/!zgsmupfbnup!fbhn)cujpfeo)ufPudbdsmvvutbjtp!o>!!>W!O)uupfey!uuvbspfm3gE!)b*pSNCbQq)-e!fwoVjwg3f*e/!s%!%.!!*2Q/B1N*W!O+F!`bFpTNVb)qeJfooujfgoftej!ugzj!$,!!2</o1p<j!tv$mfdmdjPgu!oeffjgcjnobf!e>)+B!PfNtBvQg`gHj`E2u*df!sgjmepobju/!ubinhcjjMfeofuuPddfdmmgvftsj!pog!j>e!o)fu$fy!u<v1s/f23!E,)!bzpuNjbtqo-f!uwoVJwq*b/Nhp!b.!!+2!/*11*/!2+!!.b!pcN/b*q3JwoVuwf!o-tqjbuNzp!b,)!E23/f1s<v!uy$ffum)j!g>!!eofpgjjtovfmed)dBPPuNoBfQj`cHn`b3!*ub!pgmmgp!bu*!3b`nCc`jQfBoNuPPBd)demfvotjjgpfoe!!>g!j)muff$yu!v<s1f/32E!),b!pzNubjqt-o!fwuVowJ3q*b/Nhp!b.!!+2!/*11*/!2+!!.b!pcN/b*qwJVowu!f-oqtbjNupzb!),E!32f/s1v<u!yf$uf)m!j>g!!oepfjgtjvomfded)PBuPoNfBjQc`nCb`!2u*bp!mg",Ek.blitScreenVS="~b!u<u*szj/ctvpuqf!!.w!f1d/32!!q-pyt/<t!pwqb)s3zdjfowh!!>w!fwdV3w!!w<V*w1</!2w!p-j1e/!1n!b-j1o/)2w!p,j!e1*/!3|!!+h!mz`/Qtpptqj.u!j-p1o/!2>!!.w!f1d/53)!q+p!ty/",Ek.encoding="~w!f<d*5s!pMmjpodf)bssbUfpoMjjMopfUbmsf)yjfoU!uwvfqdo5j!!wobsmvvuff*s!!||!!s*fsupvmspod!!w5bdmfvwf)<s!b~f!owjfMdp5U!mnfbyqfUUfqybfNmwUopfM!j5odffbws!)~w!f<d*5f!vwmbbmwv)fC*H!S|t!psUfsubvfsooj!MM!joosfvbusfUsp!M|j!o*ffbvsm)bwwb!m5vdff*w<)!m~f!ywffUdu5v!qtuSvHPCpUUpsMbjfoofjbms!)5jdof!ww!f~d!5<!*wfbvmmvbfw*)!s|b!fsofjuMvpsUoC!HwSftd!5o)snvjuyf)sq!p|x!)*wfbvmmvbfw/!s5hdcf!w+)!s1b/f:o5j8M9p7U8m3f:y9f7U!u,v!qwofjd!45)d1f/w1!6~3!2<4*3b8/1f2v5m*b-w!!w-f*d*4*)*39/154*2*4-1!1w/b1m)v4fd/fswh!c-!c+h!s1//f1v8m8b4w:):m4b9v1r9F-o!bwifUdt4t)fmmf)t4tdUfiwb!o-F3r:v/b3m2)!w+b!mcvhfs//sfhvcm-b!ww!f-d*46)611//115)145d6f*w*!*.*!-6!6w1b/m2v!f+/!b***<7!7~7!2w5f/d15)!4Mdjfowf!b-scUhpst/SfHvCm)bjwo)!xwpfqd)5y!jwnb)m5vdff*w!!|o!ssvfu",Ek.cubeEnvReflectionFS="g$jjegoeff$g!!F~O!W~N!B<Q*`1U/Z2Q!F-`*DGVqCjFn`!V-W2s!pm$pedf!g-j1osfp!mdpvdc)fyVjWn`)n5bdyfNwj!qoMsfvwuffms!!9</*11/!2!$,e!fugojJoqfj!nd!v-csfjVEWf`mnqjnobNtj!q-MqfbwNfwmo!f5)/W1Vf!cv$Desfbgfjoojfm!jdcv!c>f!V2Ws`pnmbpydU!j4mdffTwj!{|f!!f3t6m7f/!1~!!<*$1e/f2g!j-o1fs!pdmvpcdf)V5Wd`fnwj!ooUsjvmuffTsj!{|f!!*217//11!>!>g!mGpqbjun!)h!fgujG!b<d*fu)owJfqdj4n!!e-jssjfEdfumjqpnob*t!!|-!qwbfNdw4o!fb)cWtVEfjcsvfDdsubjfpooj!m>j!cb!c>t!)1esjpsmfpddu!j4pdof*w<!!<g*mqpjbnu)!sgpbpdmfg!!>>!!.u!o2J/q1j<n!!jugb!p)mbgc!t<E*jqsjfnd)uujdpbos/gy!!>?!!GbqcjtnE!jusbfpdmugj!p<o*/m{f*w!f|M!qjjgN!y)bbnc`tWEVjfscfvddu!j-p1on/!y-!*?t!tbfcotiEhjvspfsd)uqjjpNop/Uzt*t!fgobidhfv!p>s!)eqjnsbfmddu!j>p!oq/jyn!!?u!b1p/m1g!!@|!!1*/t1t!f;o!i4h/v1p<s!!fumbtpfm!gg!b-dsfj!E>f!meqjnsbftd!u4jdpfow/!z-!q?b!N1w/o1f!!@E!32s/f1m!q;n!b5t/)1W<V!f~c!vfDmftsfv!u|y!fjug!!5)dbfcwt!E~j!s<fqdjunj!poos/v{u!f?s!!b~c!t<E*jtstffdouijhpvop/sz!*+!!g7b2d/f2!)>3!hepjms!f+d!u1j/p3o!/.{!!>?!!q1j/n1!!|@!!f3t/m1f!!;~!!6</61n<!!,f!m*t7fs!!g.b!d6fs!)>!!0e!j*s6fnd!u.j!p7on/)z!!+?!!*1t/t1f!o@i!h2v/p1s!!;.!!56/s1)<!!>~!!qsjfnu!v|s!o*!7gsb!d>f?<!!t~t!fwofidh3v!phsf)u!VgWj)!wfftdm4f!!e~j!s<f5dnu!j,p!o*-6!sg!m.p!b5us!)g!b0d!f**5!n|!!.w!f6dn3)!!v+w!<*!tjtgf!o)ighbvdpfs!!>.>!!51s/)1!*>!!|q!jvnw!!|>!!*w6fsd!3>)?e!jtstffdouijhpvop/s{)-!!gejj!sfftdmufj!p~o!/<z2*n!!0,!!b*c5ts)!e.j!s2fsd)u!j0p!o*/2yn*!<.!!~5!nf)m!t+f!!*jtgt!f)ogibhdvfp!s>!>.!!22/s1)*!!>|!!qvjwn!!>|!!w*f5ds3!)>.?!!etjtsffodiuhjvppos/)y!-g!j.!!fetjmsff!d~u!j<p1on/!{,*!!*02!sb!c.t!)1esj)s!f0d!u*j1pno!/.z!*2<n!)~!!+f!m*ttft!fjogi!h)vgpbsd!f.!!>1>s!)3!/>1!*q!j|n!!v|w!!*>2!sw!f>d?3!)t.t!feojishfvdpusj)p!og/jy!-<!1e/j1s!f>d!uqjjpno!/uzb*p!m0g!!b|c!t*)tetjfsofidhuvjppso!/u{b*p<m!g~)!qfjmNtpfU!tjtgf!o)ighbvdpfs!!>u>b!p4m/g1!*!1|/!5v!w7!n>!!fwofjdg3f)e.$!e!js9f4d1u1j/p1o!/7{w-!!feojjsgffdeu$jp!o/2z3*/!10!!7bsc!tf)oejjgsffed$uj!po1//y4*!<6!n~!!ffomjtgff!ej$g!!)g7b2d1f/!1>!>6!w5!/f1o*j!g|f!ev$w!!>!6w1f4d/31)!.6!se!jfsofjdgufjep$o/!y-1!/e3j!s5fnd!ufjopjog/f{e*$!0!!b7c5t1)/e1j!s5fwd!ufjopjog/fze*$<!!~!5f/m1t!f5!s|!!fvowj!g>f!ew$fd!3)1e/j2s!f.d!u2jnp!of/oyj-g!feej$sf!du7j8p3o//1z!*2!w0!!fbocjtg)feej$sf!du9j/p1o!/2{s*!<f!o~j!gsffeu$vs!o!11//36!!.+!!1)nv!wf!o,j!g2f/e1$*<!!~:!4w4f/d14!!1cwj!mfjoojfgbfseD$vc!fV1W/)2t!b1nsq!mffosj3gEf!ef$ow!N~b!q-g!jwefodf4$!e!j<s*fzd/ugj!p-on-c!!g-mnpub)uy!jnnj!qoJsovuu*f!s|!!<g*myp/bgu!!-gsbcd!f-!m>c!)hyfjunG!b>d!fn)ce!j4sdffdwu!j<p*oy*/<g!!g-mspub!u-!mguj)myujfns!J>o!un!u>!!4ndbfyw)!d<vcchfsV/W*`*nwjvo!N-jqqbMNfwwoffm)!E.3!fnsjvquJyofuu-)!s1b/f1o*j<M!pnUjmqfJyofuU!q>b!Nnwboyf)!n>j!qmJco!u4-d!fdwv!c<ffV{Wj`TnmjfoyNfjuq!M>f.w!fym/*w<v!!g<mcphbsu/!*g*bwdvf!T-jq{bfN!w>o!ff)yEq33f)snvjuqyJfouu)*s<b!fgomjpMbpuU!muffyyffUmqTbjN{wfo!f>!!>2!/s1c!!04!d)f4w/!1<!f+{!jdTvmcffyVfWu`!n>b,y!Uzj/mwfvT!j<{cfh*s</!**$wjvg!e-fqgb!NQwCoSf`)FEO3WfNsBvQu`yGfBuM)TsFbf!owjfMdp3U!mvfwy!f>U!qhbfNuwVoWf)!e>j!ssfud!u4jdpfow-!!<gfb{djfT*m!f+y!f)ug!b>d,f!Tyj/{wfv!!.<!c2h/s1/**!*,w!v1!/-6q<b!Nw$offm)tEf3f!swvfudy3f!uv)ws!b>f!ohjfMupVUWm)feyjfsUfqdbuNjwpoof-!!>g!bmduf!*4!d+f!w)!gbfdtfmTfj${f!!<.c!h2s//1**w<v!!w-fqdb3N!wgo!f>)!Eg3sfbsdvuu)yvfwu*!<o!svvwu!f,s>!!1F/T6M!B.G!`gQ<B!NW$OfFo`eSjCgQ!!gjfge!g)jg$bd!f<!f?{!j3T/m1f*y!f|u!!v>w+/!zw!v,!><!*gfb{djfTTfjd{bfg<!!+g!b1d/f3!!..>!!f4{/j1T<f!m~j!Uvywb/ny`!W,V>f!cgvbdd!f-!1+/!1g)bydbfnT!j+{!f1</!4j!g>!,)!nyj/qwJvo!u<!f={!jdTvfcmfjVUWo`jnnb`yWNVjfqcMvfdw!f+m!*1!/|3!!v+w!/uzo!J,s>f!u3m/j1g!!+>!,d!vzc/fwVvW!`~n!b<yfU{jjmTf",Ek["clipDirection.fs.head"]="g$jjegoeff$g!!D<MuJoQf`dEsJfSQFqDjUmJDPvO!u!bvpomjgg!pnssnp!gjjoouv!!v<DompjjquEdjfs",Ek["clipDirection.fs.body"]="g$jjegoeff$g!!D~M!JQg`jEeJoSfF$DU!J~P!O<e!sjbgd!t)jveD!m|j!q*E*jssjfed!u-j*puoo!f?d!s1f*Q!q|j!mwDfvd)44!defjws)!u>p!ew!f?d!4*)o1p/j1u-j!t1p/Q1m-b!d1p/M1w*!<-!sj$ej)guepfeg)!!VgWj`!DMfJtQmf!$wf!d~4!!<demsjbqdQtpjtej!u|j!p*o*!s>j!ew!M-p*dubomfQdpstfjQuqjjpmoD<v!)4$dffowe)jugpe!!j?g!!*)ovpDjmujjqtEpjQsqfjdmudj!p-os!j=e!)3u*p!e|)!!egjjs!/~y!!<>*!12//11!<-!1~/!1f!m-t{f/!wjVgw!))4vdDfmwj!q>E!jospfjduujjtppoQ!q=j!m4d*!!<|1!/e2j.s!/>y!!y>/!s.j2e/!1|<!!*~:!!f=m!tofp!jjugd!f)svjDEmqjjqmEDjvs)f!dgujj!pfot!m=f!!5~*!!<|*!1e/j1s!/-z1!/>1!!2-/{1/<w!V~w!)f4mdtffw!!j>g!!o)pvjDumjjtqpEQjqsjfmddu!j<p1o/!2=!!>6!*y!/|s!jeej!s|/!z*!9>!!=.!2o/p1j<u!d~f!sfjmEtqfj!mjDgv!))!vgDjm!jfqtEmjfs!fdQuJjMpDo`!W=V!!7g*f!e|g!je$js!/~{!!<>1!/22/.1!<>!!~{!/fsmjtef!!|j!g*!8)!v=D!mojpqjEujdsf",Ek["clipbox.fs.head"]="g$jjego!fN$BY!`<C*P6Y/`1D!M-J6Q/Q1F!S-!6?/!11)4!dvfowj!g>p!synb!Njqojum!dv!D4mdjfqwq!fustToipbdq!f<]*N6B/Y1`.C!P-Y6`/D1M.J!Q-Q6F/S1^.<)!4vdofjwg!p>s!no!jcNpqpjmm!dv!D4mdjfqwq!fustDompjdq!J<o^oSfFsQ]QNJBMYD``CYPPYC``DYMBJNQ]QyFjSs^u<b!NvsofjqgqpjsmnD!vn!b5u",Ek["clipbox.fs.body"]="g$jjego!fN$BY!`~C!P~Y!`<DoMsJvQuQfFsS!!<?e!s1bd!twjfed!4|!!w*M*p6d/b1m!<=!!g*pmsb!d)pjMowu)!iju!h>o!f1m<)!!j>!a=!!^NjB]Ys`fCoPoYJ`qDjMmJDQsQfFqSq<j!mjD,v,!*%!%|!!3w!M>p>d!b^mj!]>f!qwbfidT4s)fvqDqmjjmqDqvf!s}N}b!u*s*j*yo]jjN^q!j+m!dw!f-dm5b)dwpXMpws)moebQipUtsjfuujbpfos-h!)2m/m1b*!*%<%!!j*g*!y)bvNDqmjjmqdq!f-smTbidbpqMfw])jo^b!i>U>t!t2f!m%)%m!mvbD)m!j>qaq!f^sjD]msjfqoJo",Ek["fog.fs.head"]="g$jjegoeff$g!!GPgHje!ovfo$jg!p<ssnb!GwhfpdG5v!!vuGbpphmDgp!mnpssp<g!jvoovj!g<pssbnf!OchpppGmv!!vuGbpphm<g!!n$sjpggejfogv!!GPfHt`mFfY$Q3!<!zvuojjtgopfsEnh!pgGmvp!bu",Ek["fog.fs.body"]="g$jjegoeff$g!!G~P!H<*!sjpgu!d)bvGGhpphg*!!-|*!xg/mepJb!u-!cehfsq/usip!m>p!D.hwpNGwvQ)p5tdjfuwj!p-oe/J{)<y!jn$!j>g!eefJg!!GgPjHe`oFfY$Q3!<!*gimupqbfue!!g-pshbGGbhdpuGpvs!!->s!b2f/O1h!p.G!vf)yqqf)u.t!ivuGppphnEtf!o>t!jsupzu!d+b!GvhGppgh!Eufboptmjgu!z!f+t!meff$qu!i<!*+i!ueqf",Ek["skinning.vs.head"]="g$jjegoeff$g!!VTgFj`eToLfJ$OO!J~O!H<f!ovpocj!gopssvnu!fnsb!u<5^!*cjj)oueoNjb]utsfjdyj<s!uvboNjfgoppscn!!>n!bfuo5p!cc!j5ouebNnb!u|s!j*yjJ!ouwbfpsmtgf!<o!jb!uuutsojpcdv)uyfj!swufbdN5f!otplCjuofJho!e5fuyb<n!!b<u^uTsFjOcPvCu`fY!BwNf]dt5f!dtjlsjuobXNffjohpicu!<5!ub$nj!gnesfpgg!jCoPvO!F`fUtFmYfU$VS!F~!!<vfoojpgcp!sons!viujfhsi!q<!*t5bwn!q-m4fws!3-E3!wc!p-o2fwU)f5yuubvns!f><!!fvoopjcg!p5sunb!nj!o<u*!*czp!o-f*U6f/y4u!v,s!fyT)j!{+f!<y!en)b3ud5f!wh!f-ufCspvoufyNfbUufsojpyc))dEp3oftsuv!ujyof!ug!m>p!b5uw!!j5*d!f|w!!g<m*p*bzu!!-k*!6>/!3j!!,+!!y5)/!1+<!!ygem)p3bduf!wy!!->f!snvpuey)fkU-f!ogpmcp)bEu3)fcspvoufyUffuy!u>v!s4fwT!j5{dff*w*!<<!*g*mzp!b-u*!6z/!2>!!,g!myp)p!s+)!ky!e0)!3gdmfpwb!u-)fcspvoufyUffUyfuovpscf)TEj3{ffs*v*u<y!fgum!p>b!u3!we!y5!d>f!w2!/<1*!*0z!!g-m*p6b/u1)!c,p!oyf)U!f+y!uyves)f3Tdjf{wf!*-<f!sgvmupybfuU!feozp!c>)!E23/f1s!v0u!ygfmup!b>u!)2cwp!o5fdUffwy!u<v*s6f/T1j!{,f!*z<)!!z+!!>z!e",Ek["skinning.vs.body"]="g$jjegoeff$g!!VTgFj`eToLfJ$OO!J<O*Hx/!enfbnus5p!gctpoobfsNub!u-Y{!z>y!/h*feufCopoojflNtb!u+s!jfyt)stflwjooJJyojesfuyb/Nye*o<j!cn)b)u55d!fcwp!o>f!NebfunZs!p>g!thofbusCup!offNtbmufs$jy!)<t{lzjyo/J*oeeffoyo/jzl*t<!!+n!bfut5s!fcwpooJfyNjbsuu[b!N>e!ohjfcu)C!p>o!feNfbnusspjgyt)otblsjuo!Jo*eSfCyQ/){e*f<o!jngbfue5!!}c}p!o*fHNObPuIXQ!)>e!fhofjugCfpeo!fgNjb$us!j<yx)/tulijhojJfoXeofjyl/tx!*+<!!ynfbuus5f!WtoljjlotN!b+u!sXjuyb!N>f!onpbcu!5>),1!/e1f*o<o!jtlltj!o<N{b/uusijhyj!f,X>o!jtlltj!o+X!fyjfhuisuf/Wyo!j+l!tc!p+o!f[NubbuNYf<o!ptcl!j>o,N!beufsojoyj!l,t>!!<tzl/juoiXhfjjfhXiouj/lzt!!++!!cypfoufsNfbWuoZj<l!tt!l+j!oZNubbuNsfjoyp!c,!>>!,t!lejfooXofjjlhti!u</y{/!u+i!hcjpfoXfoNjblut[!<+!!tylfjuosNfbWuosjjlyt!!,+>!!YtulbjNofXofpjch!i>u,/!xe!f+o!ocjplotf!N<b*u1X/<1!)t5ldjfowN!b>u!sejfyo!o>j!lctj!o5edNfbwu!s<j*y1J/o2w!f-s{tzfy!/+e!ftnlsjpogNtboubssjuy)!5+d!fcwj!o+e!NybjussujbyN<e!opjcck!f>d!uyOfpussnfbWmo!j>l!tw!f5dd5f)wt!ljgojNeboufs$jy!!<+{!zwyf/d*5*)1p/c1k!f-duuoOfphsonbbUmu-d!f1k/c1p*)*5/dyfzw{!<+!!y$jjsguebfNgo!jVlTtF)`5UdBfOwH!F>O!Uuo!fphcokbfUdu",Ek["shadowMap.vs.head"]="g$jjegoeff$g!!V<TeFs`pTpIDBxEpPeXbNiBtQ!5!dvfowj!ghposjnz!snbbwu!5<!ytjisbuebpNx",Ek["shadowMap.vs.body"]="g$jjegoeff$g!!V<T*F1`/T2I!B-E{PzXyN/BeQfn!stpigbteopbxsDup)p5sdef!w>!!+t!iybjespuxbNNbmufsejpyN!v+!",Ek["shadowMap.fs.head"]="g$jjegoeff$g!!V~T!F`gTjIeBoEfP$XN!B<Q*q!ev!o-j*gzp/sfn{!jcTpmpfmy!ftui!b-eEp4xeDcv)mWmV<p!Uvfocjvgdp!s-nq!btNbxnpqembfist3)Ef!stbiqbneppDxEN3bfqs<v!uvyofjug!possnv!uwffsd!3!fttimbfe$px!T<j*{1f/<:!!v0o!j1g/p2s)n!!+g!m*p!b*uq!et!i-b*ezp/xfJ{ojuTfmoftyjfuuz!<-!yvyozj/gupfstng!ggpm!p,b!uE!4teicb)eWpVxpCUjfbctv<d!!v-oqjbgNpxspne!bgimtp)bfus!btqinbpeDpEx3Sfbsevjuvytf<u!!v,o!j*gqpes!n-!*czp/pfm{!jtTimbfeypfxuS!f-dyfyjyw/fu<f!twgbgspz!j,o!hE!4wefcd)5W!VtpiUbfecpvxdD!p-pqsbeN<x!pgembpibtu)!fusfbyqunvpsDfE33EfDspvnuqybfsuf!),t!b*nqqem!f-s*3zE/!fe{fjqTumifty-f!uw!f-dz3y!zv/wu-f!tggmgppb!u,!!dEp4neqcb)sWfV*p!U|f!csvfdu!v-sqob!Ntxupfeqb)idtp)nfqsbbsqfn-p!DvEo3qfbsdvluSyHfCuB!U,p!E*fqqeu!i-)*uzf/yfu{vjsTfm3fEy)feuf!q-uziyty-/!uvfwt*g*g*p<!!,~!!Eg4mepcb)uW!VupfUyfucvvsdf!3-EqTbiNbxeppexbMifts)qf)stbbqnnqpmDfEs33fEs!veufyqfuui!t,-!!*wqfed!3-!*tzj/{ff{-j!Twmffdy3f!uv!w--E!4gemcp)bWuV!pdUpfncqvbds!f-*q!b|N!xdppeobtiut!)wffsdb3q!nppgDgEt3ffus!v>u!ywffud!3,)!1*/q1e-!!-2*/z1/*f<{!jwTfmdf3y!fuuf!y-fymzTzj/{uff!t>g!gwpf!d,3!)E24/e1c*)!W0V!ptUjf{cfv<d!!w-fqdb3N!xdpfeobuistp)jfesVbWq!n>p!DgEm3pfpssv)uvywf!u+!!,t!j*{qfe!!,-!*1z//6f*{!j0T!mtfjy{ffu<!!-gymzpyb/uu!fmtcg!g>p!!u,f!yEu4vescf)3WEVDppUnfqcbvsdf!)-eqfbqNuxipte-b!idtf)ofussbpqjnepVDWE!3,f!suvfuyyffmuT!j,{!f*!q+e!!p-g*gzt/ffu{/jyTym-f!ydfpun!q-bzszfz*/<u!fgtmgpgbpu!!,m!uE!4>e!cu)fWyVupvUsffc3vEdD!p-nqqbbNsxfp)eebfiqtu)ifts-b!qdnfpoDuEs3pfjsevVuWy!f,u!!u,f!y*fqmeT!j-{*fz!/+f!{pjgTgmtffyuf/uy!z--z!zdyp/nuqfbtsgfg*p<!!,g!mEp4beuc!)sWcV!p>U!fucfvydu!v-sqfb3NExDppenbqibts)ff)sebfqqnupiDtE-3!fdsfvouuysfpuj!e)V!Wo!s,v!uuffsy!f<mzT/jf{{fj!T+m!fpygfgut!f+u!/tzvyj-e!bdSpxnpqebbsift*!<+!!g*m2p!b-u2!!s.u)!3>d!fuwf!y>u!vusfft3gEgDpp!n3qdbfswf!)e*fUqGuPiTt`-G!DdQf`oFuQsZpUj`eQVBWN!X,P!EuBfIyTf)meTfjo{jfg!f+e!!p}g}g!t*fGuD/Qz`zF-Q!ZdUp`nQqBbNsXfP*E<B!IwTf)de3f!ogj!g>f!eg!sgbjd$u)!v<w*!o+p!jtujj{tfp!Q,p!U1u/i6h*j<m!)gfm{pjbmub!nbs!p>o!!n>j!yE)4mecc-!!4mduf-w!!g</tzb*j<C!xgpmepbbiut!!c>!,>!!qnej!y<)*sscb-f!Osbus-f!ngb/Dzx*p<e!bgimtp!b.u!!sdb!G>b!snfjnyb)Dbx-p!ecb-i!tg)/!y0*!<*!ssbffuOvbssof!ndb<D!x~p!egbmiptb!u.!!h*foupTjiubjetppxQ)ptUbuniqhmjfms)3iEu!htoifbme)p!x>N!bqqe-!!uwbfpdm3g!!t<i{bzeyp/xeNsbpqpTDjx{pfe-b!igtm!p>b!uo!ptjiubjetppxQCpjUbuti-h!jgmm!p4bduf!wt!i<b*e*p1x/S3b!e-j1v/t5-)!3wdffdw5!!+t!ifb{ejpTxqDbpNpxspee*b!i|t!)g!m0p!b*u1!/t2i)b3edpfxw!!>>!!2f/{1j<T!mtfiybfeup!x3Ddpfpws!e|/!y*zs{b!G0b>s!ftnibbDexppxeDbpipts!eu/bxp<m!gt!i-bsebpfxODbpspfsneb/D{x!p,e>b!itti!buebppxmCgj!b-te<s!ptpiDbxeppexbDiptp!s5ed/f{w!!>-!tnvjjoe)btSixbpeepbxiDtp!pusbep/m{g-!!-1t/b:j:C:x:p:e:b*i<t!!cuwbfpdm5g!!j-ofG{sjvTtqubvNnxWpfedb!i>t!!c3wdffdw5!!-)qtbiNbxeppexbDiptp!sEe3/syf!m?q>n!b1t/)1x-p!etbiibTeupoxjDppQpusfeh/!yu!b=p>m!g2!/~1!-<!*t6i8b/e1p!x-D6p8p4s/e1/)z3!d?f>w!!1,/!1s-b!otbimbqe!p+x!D*p6p3s/e1/!z-!6=3>2!/21/)13*d<f!wc!popsmv!ujfosG!s~v!t<u1v/n3!!>.!!bZmomh)jjto!G+s!v{t/uwv!n>W!fzd/*s<b!ocbwmfqd!3<!1g/s3v!t,u!vZnoUhfjttu!W+f!d1!/>3!!c,w!fyd/3w)!j>o!Gys/vstbuovbnm-q!!t<i*bze/pwx)Dophpjste!/>{!!Z=o>h!j2t/!1u*b<p!mcgp!p|m!!*gfsovPtuutvpnnUmfbt!u>!?>!!zb/mWmt)cgbs)v!tgujv!nfUtfmtfu!W~f!d<*Y<o!hjjgt!!)+g!s1v/t3u!v,n!UYfothuj*t!!|+!!{$/jwg!!>e!fyg/jsobfoeb)mTqI!B<E*PyX/NwB)Qo`hUjZtQ!F>`!QYDoGh*jt!!wufbdp3m!gu!f|y!f*mfTojP{uft!p>n!mwbf!d>3?)!2y//1W*t!c0b!)t!igbje!pfxtNmbfq!T~j!{<fy</!wg!m.p!b1u/!5e!y>1!!y>/!s.b!oubfmyqf!m*T1j/{1f!/?y!!{+/!wt)i!bgejp!x|S!b*efjovPtu<t!pgnmmpbb!u>!?e!z{1/!W>t!c.b!)u!fgyjf!m<Tmjf{yff/UzB!u+t!ptnimbbe!p.x!S1b/e2j!v>t!<f!ogPmuptbpun!meby!2u!b>p!m,g!!u<fZyff{mjTTjm{ffy/fyu!!++!!t6i/b2e!p>x!SmbfeyjfvUtB<u!tgpmnpmbbu!!uebzp2m!g>!!<,z!yu/fwy!f>m!Tsjb{ofb/mzq!!+3!dtfiwb!e<p*xZSfb{ejjTvmtf<y!ftui!b+e!p1x/!3>!!.)!!1u/f2y)u!v+s!ff3cEvDDppnUqfbmsbfd)tt!i>b+e!pwx!N<bfqc-v!DtpiUbfempbxdDtp!p>s+e!/Wytzc!b,!!<w*f*d{3/)Wetyc1b-!!-ezz/1W*t-c!bt)iybbenp!x-Dyp/pWstec/b{)*y!b,n!!u0f!y1u/v2s!f>3!EfDcpvnDqpbUsffm)btditb!eupbxpNmbgq!-<!*twi)btecpbx!D>p!pWstec/by!z4!d,f!ww!f|d!3*)Z1f/{1j-T!mefzy1f*u-!!utbipbmegp!x-Dwp!p4sdef/w{)*W!V,p!Uuffcyvudv!s3fd3fEwD!p~n!q<bxspfe)btiitb!eopsxvNubfqs-!!~t!ibgejpexoDfp$ps!e</*y{z/!e,s!pwpfDdx3p)eebyi2t-!!-ezzy1/*e-s!ptpiDbxeppexbDiptp!s-eq/b{N*x!p,e!buifty)ufvssbfq3nEpDDpEn3qfbssvfu)ytfiub!e>p!xxNpbeqb-i!tt!ibfetpmxfD$pp!s<e*/1y/z:!!,0!!w1f/d23))!e+y!1*-!!*1{//1e*s-p!ptDixbpeepbxiDtp!p-s*e2/z{e*!!-,2!yuef)y3udvfswf!3,E!Dzpyn/qebsspfp)DtxipbeebpixtN!b-qf-{!jtTiqbbeNpxxpDepbpiste!/-yqzb-N!xtpiebbeiptx)DqpspfsMex/p{e*b!i,T!Eu3ffysuvvusyff3uE!D,p!n*q{b/sefs)ptpiDbxeppexbNibtq!--!*t2izbee!p-x1D/p1p)s3ed/fywz!!,,!!zwyf/de3s)pepyD2x-p!e1b/i1t*!--!ft{ijbTeqpbxNDxpppesbei/t{!*-!q,b!Nuxfpyeubvistf)3qEsDfpMnxqpbesbfi)TtEi3bfespvxuNybfqu-!!,t!i*b{e/pexsDppppDsxep/eybzi!t,!!-w*f2dz3e)!e-y11y-e!)e3zd2f*w-!!,t!izbye/pexsDppppDsxep/e{b*i!t,!!-uff{yjuTvqsbfN3xEpDepbniqtb!s-fq)btNixbpeepbxiNtb)qq-s!ftMixbpeepbxiDTpEp3sfes/vyuzy!f,u!!w,f!d*3{)/1e/s1p-p!Dexzp2e*b-i!tt!i-b*e1p/x1D!p-p2syee/){3*d!f,w!!u,f!yzuyv/sefs3pEpDDpxnpqebbsift)!t-ifb{ejpTxqNbbNqx-p!etbiibte!p-xqDbpNpxspee/byizt!),q!swffMdx3p)eebyi2T-E!3efzs2v*u-y!ftui!b,e!p*x{D/pepsspep/D{x*p!e*b!i+t!!)-2z/y1/!e0s!p:p/D1x*p<e!bi$tf!m-jfg{!jeTfqgbjNoxfpee)bTiItB!E-PqXbNNBxQp`eUbZiQtF)`qQsDfGM`xTpPeGbUi*TE!3wffsdv3u!yuffuy!f,m!T*j{{/fe!s>p!pwDfxdp3e)b2i/t1!*-!*01!/t1i!b-e1pyxeN)b3qdTfjw{!f,<!!zgym/pebsup!peDyx1p!e>b!i.t!!u-ffy{fjmTTqjb{Nfx/pye!b+i!tt!i-bqebpNxxSpbeebjivtt)<q!sgfmMpxbpue!beizT1E!3>f!s.v!uuyffyuf!m,T!j*{{f//ezs!p+p!DtxipbeebpixtS!b-e*j1vzte<!!-g2mypeb)u3!defyw2!!,>!!z,y!/uefsypfpmDTxjp{efb/iyt!!+-!ft{ijbTeqpbxNSxbpeejbvitt<!!-gqmbpNbxup!eebzi2t!)>q!s,f!MuxfpyefbmiTTjE{3ff/szv!u+y!ftui!b,e!p*x{S/beesjpvptD<x!pteibbietp!x-!*>1!z)e!!u-f1y/u1v)s3fd3fEwT!i,b!ezpyx/Mefsspqp)DtxipbeebpixtN!b-qf-{!jtTiqbbeNpxxpNebbqiTtj!{-fq-b!NtxipbeebpixtD)pqpssfeM/xypze!b,i!TwEf3df3s)veuyy1f-u!!e,z!1**{-/!etsipbpeDpx",Ek["flowMap.vs.head"]="g$jjego!fN$BY!`<G^MUPDXF`KPCCPK`FXDPUM!G?`!Y1BN!]vwoVjxgppmsgn!!3ndbfuw5!!hgomjpzxsNbbwu!s<j^yU]DNFBKYC`PG`MXP",Ek["flowMap.vs.body"]="g$jjego!fN$BY!`~G!M<P6X/`1P!C,K!F*D{U/!m?b!d1pM!wwVfxdp4m!gg!m,p!xzV/wmMbpddpbMmw<V!xgppmsg!!)-jyo/um!bjd!p>M!w1V<x!pjm!g=)!3NdBfYw`!G>M!P^Xj`]PwCVKxFpDmUg<!!<j{,z,y*/!*|*!1g/m2p!x-V{wzMyp/debfmn!s>p!g)tgombpsxuN)b5udsfjwy!]+j!^y!j+s!uvbNNpmef",Ek["flowMap.fs.head"]="g$jjego!fN$BY!`<G^MUPDXF`KPCCPK`FXDPUM!G?`!Y1BN!]vwoVjxgppmsgn!!3tdbfnwq!mhfosj3zEs!bgwm!p<x^UUfDyFuKvCsPf`]XNPBMYG``GYMBPNX]`ePfCmKcFbDoUF^x<p!mvgo!jmgpppscn!",Ek["flowMap.fs.body"]="g$jjego!fN$BY!`GEMOPFX``QPPCPKMF`DMUM!P?S!O1V$!w!f~d!5!ggjmepoxfU$fy!f<mc<h!s/$mVfOySfPUMxMp`mMgP!P>Q,`!TcUhBsS/UeJ!!gpfst!m)fj$ou!!<jb>c1h<s!/jm!f=y!fNUBxYp`mGgM!P>X,`!PbCcKhFsD/Ue<J!!j,*,!*B!C|H!Sg`mEpExBU`fFyEfPmN!`>E!OuFfMyCu`vXsPfM3GE!))gemfpoxjUgffyeu!vgsjfm]fJ$^-!!<gbmcphxsV/wm]fjy^f*U<x!pjmgg!!)>g!mbpcxhFso/becJm!fe*]!jB^C!H%S%`!FbEmJmS)SmFfWtPt`UFiEbPoN)`gEmOpFxMVCw`]XjP^M-G!!w)fedf3o)j2g/f1e*!*g*j!m%f%$!b!m<mb)/hmsffybfuUfxspUmigb!o>)!gbm/pexJV!w]*j!^B-`!FwEfJdS3S)F1W/P1`*F*E*P*N!`E$OjFgM!Ce`fXgPjMoGf!e))e!fGoMjPgXf`eC!MgFjOmEf`$NP!E<Fc`hNsV/MmUfJyQfMUZx`pSmHgC!!>*!c!hJse//esJh!c!*+!>C!HgSm`pFxEUJfSySfFmW/Ps`hFcE<P!N`$EfOmFjMgC!`eXfPgMjGo!f)ee)f!oGjMgPfXe`!CgMjFmOfE$`N!P<EbFc`hNsV/MmUfJyQfMUZx`pSmHgC!B>!+*!b!cJhes/",Ek["envmapPhysical.fs.head"]="g$jjegoeff$g!!V~T!F`gFjOeWoNfB$Q!!<v*o1j/g1p)s4nd!fgwm!pobsuv!uffosw!NbfqtJmofu$fo!t<jzuuzj<t!ovfoujogJpqsbnN!wgomfp!b+u!!cghmsj/qsFpomwpNDbqqb<N!wo$fj!goesfvgu!fFsO!W<N*BtQt`fUoZiQhFv`pDsV!C-Fdf!Wvuodjfgmpgsfns!!t-bqnbqnmwfosfD)vWcVff!cfvoDwfnsbvqu<y!fu$!f>m!tsfpm!pvDoqjbgNpwsonf!!t5bdnfqwm!f<s*3yEj!sfuobwNnxbfqj<W!v!$-fdofeWjugdf!mwgffds4)!ohpfjuuJdCfMsJjsEsnbsepjgbtoodbfs)Udfptostfuw!ojjo!!>w!fddf4W!uodpfsmngbfms*!!<|*!*t$tjfgo!iehfvgpjso!f+e!)tFtOfWoNiBhQv`pUsZ!Q-Fm`bDnVsCpFo`!V-Wd*fW!uwdffdm4g!fxsp)symjenO)pfs{njbmmb!n>s!pjoo!w>f!sdtffWUusdbfomtggfpss!n<E*jmsbfndsupjop!o-)sojpEsxnfbjmw-!!.v)WujdffxmNgbfuss!j>y!*d<f!Wwufddf5m!gffosw!N<bdqfDWpumdpfsm!g>f!su!f4ydufvws!fD*vWcVf`VFWC)VfDo`wFnQbZqU-`!QxBpNsWmOeFO)pesfnobjmg-f!e2!/g1j*$<!!s|f!u*vtstof!oQiJh!v+p!sf!ouwbNpbmqgD!pomjp!su/tsohpcd!!+-!mfbonwsNpboq!J4oduffwo!tojju!zu<t!op$df!m-tsfjE!xsffjuwv!s4od!fwwf!do4j)!1u/t1o*p<d!)f$dfoobejjegbS!M~C!Jwuffdh4!",Ek["displacementMap.vs.head"]="g$jjegoeff$g!!V<TtFb`jECJuToQfMnBfDdFbNmFqOtUjNeB!Qub!pvmogj!gnpsspng!jtobvn!q<mffmsb3dET!ueojftnqfmdbbdmfqntfjoeu!Nubbqp<m!gv!onjsgp",Ek["displacementMap.vs.body"]="g$jjegoeff$g!!V<T*Ft`bEjJCTuQoMfBnDfFdNbFmOqUtNjBeQ!,!!ufsmbbodtTguposfnnffed!b,m>q!tojpes!n+b!myj/{*fw)Vpwc!k-fqdbuNOuposfnnbfmd*b!m+q!t)juef)yEu3vfs";
var At=L.graph3d.PostProcessing=function(Y){var k,I=this,p={},j=!1,K=!1,h={model3d:!0,mesh:{is:[0,2,1,1,2,3],pos:new $n([0,0,1,0,0,1,1,1])},mat:null},z={type:"blitScreen"},X={type:"fxaa"};!function(){b.keys(At).forEach(function(d){p[d]=new At[d](Y)})}(),I.getModule=function(S){return S?p[S]:I},I.getModuleList=function(){return b.keys(p)},I.resetModules=function(){for(var z in p)p[z].resetProperties()},I._serializable=!0,I.handleDataModleChange=function(G,Y){G&&(I._serializable&&G.setPostProcessingData(I.serialize()),G.removeSerializeListener(I.onDataModelSerialize,I)),Y&&(Y.addSerializeListener(I.onDataModelSerialize,I),I.deserialize(Y))},I.onDataModelSerialize=function(w){"serialize"===w.type?I._serializable&&(Y.dm()._postProcessingData=I.serialize()):"deserialize"===w.type&&I.deserialize(Y.dm())},I.isDeserializeDisabled=function(F){return!I._serializable||F.a("sceneBloom")!==H},I.isSerializable=function(){return I._serializable},I.setSerializable=function(S){I._serializable=S,S||Y.dm().setPostProcessingData(H)},I.serialize=function(){var q,N,W,P,F={};for(N in p)if(W=p[N],P=W.serializeProperties){q={},W.enable&&(q.enable=!0);for(var o in P){var r=W[o];r!=P[o]&&(q[o]=r)}b.keys(q).length&&(F[N.toLowerCase()]=q)}return F},I.deserialize=function(k){var U,b,c,f,n,X={},w={};for(U in p){c=p[U],f=c.serializeProperties;var $={},i="scene"+U,e=k.a(i);e!==H&&($.enable=e);for(var n in f)e=k.a(i+n[0].toUpperCase()+n.slice(1)),e!==H&&e!==f[n]&&($[n]=e);ss($)||(w[U[0].toLowerCase()+U.slice(1)]=$)}if(ss(w)&&(w=k.getPostProcessingData()),w)for(b in w)if(b&&(U=b[0].toUpperCase()+b.slice(1),c=p[U])){X[U]=!0,f=w[b];var u=!!f.enable;I.enableModule(U,u),U="scene"+U,k.a(U,u),c.resetProperties&&c.resetProperties();for(n in f)if("enable"!==n){var e=f[n];c[n]=e,k.a(U+n[0].toUpperCase()+n.slice(1),e)}}for(U in p)X[U]||(c=p[U],c.enable=!1,c.resetProperties&&c.resetProperties())},I.getRenderTarget=function(){return k},I.blitScreen=function(p,g,H,I,x){var K=Y.getGL();if(null==p)I=g,x=H;else{var o=p instanceof Ss;if(o){if(g&&(g.type||g.model3d)&&(I=g,x=H,g=null,H=null),0==g||0==H)return;g&&H&&p.setSize(K,g,H),p.bind(K),x&&x.viewport?Y.setViewport(K,x.viewport[0],x.viewport[1],x.viewport[2],x.viewport[3]):Y.setViewport(K,0,0,p.width,p.height)}else I=p,x=g}x&&x.clear===!1||K.clear(16640),x&&x.preRender&&x.preRender(K),I&&I.model3d?Y._prefabRenderer.render(K,I):(h.mat=I||z,Y._prefabRenderer.render(K,h)),x&&x.postRender&&x.postRender(K),o&&p.unbind(K)},I.enableModule=function(i,t){var V,v,K,E=i.split(",");for(V=0,v=E.length;v>V;V++)K=E[V].trim(),p[K]&&(p[K].enable=t);j=!1;for(K in p)if(p[K].enable){j=!0;break}};var V=function(){if(K)return!1;var c=Y.getGL();return c?(k=new jg.RenderTarget(Y,c,null,null,{samples:i.renderTextureSamples||1,minFilter:9729,magFilter:9729,depthFormat:Y.isWebGL2()?36012:null}),K=!0):!1};I.contextLost=function(){K=!1;for(var X in p)p[X].contextLost&&p[X].contextLost()},I.render=function(U,i,o,C){if(j&&(K||V())){k.setSize(U,i,o),k.bind(U);var D=U.getParameter(3106);D&&0===D[0]&&0===D[1]&&0===D[2]&&0===D[3]?D=null:pk(U,[0,0,0,0]),U.clear(16640),Y.setViewport(U,0,0,i,o),C=C||{};var Q=C.renderAxis!==!1,R=C.renderEdit!==!1;C.renderAxis=C.renderEdit=!1,Y.renderScene(C),k.unbind(U);for(var n=0,g=Y._glCapabilities.maxAttributes;g>n;n++)U.disableVertexAttribArray(n);var q,m=k;for(q in p)m=p[q]._42(U,m)||m;Y.setViewport(U,0,0,i,o),D&&pk(U,D);var r=I.getModule("Fxaa");return r&&r.enable?(X.resolution=[1/i,1/o],X.image=m.texture,I.blitScreen(X)):(z.image=m.texture,I.blitScreen(z)),U.useProgram(Y._prg),Y._renderAxisAndEditHelper(Q,R),!0}}};L.graph3d.PostProcessing.HueSaturation=function(x){function H(){var z=x.getGL();return z?(Y=new jg.RenderTarget(x,z),u=!0):!1}var Y,K=this,j=!1,u=!1,z={type:"hueSaturation"},p=[],l=[],h=[];this.serializeProperties={hue:[0,0,0,0,0,0,0],saturation:[0,0,0,0,0,0,0],lightness:[0,0,0,0,0,0,0]},this.resetProperties=function(){var y=this.serializeProperties;for(var M in y)this[M]=y[M]},this.resetProperties(),b.defineProperties(K,{enable:{get:function(){return j},set:function(b){!!j!=!!b&&(j=b,x.iv())}},hue:{get:function(){return p.map(function(H){return $(180*H)})},set:function(Y){if(p!==Y&&7===Y.length){for(var X=0;7>X;X++)p[X]=Y[X]/180;x.iv()}}},saturation:{get:function(){return l.map(function(E){return $(100*E)})},set:function(t){if(l!==t&&7===t.length){for(var _=0;7>_;_++)l[_]=t[_]/100;x.iv()}}},lightness:{get:function(){return h.map(function(W){return $(100*W)})},set:function(U){if(h!==U&&7===U.length){for(var E=0;7>E;E++)h[E]=U[E]/100;x.iv()}}}}),K.contextLost=function(){u=!1},K._42=function(e,_){return j&&(u||H())?(z.image=_.texture,z.hue=p,z.saturation=l,z.lightness=h,x._postProcessing.blitScreen(Y,_.width,_.height,z),Y):void 0}},L.graph3d.PostProcessing.Bloom=function(e){function E(){for(var l=0;K>l;l++)V[l]={type:"bloomBlur",defines:{KERNEL_RADIUS:q[l],SIGMA:q[l],OVERRIDE_ALPHA:!!U}}}function Q(){var j=e.getWidth(),a=e.getHeight();if(!j||!a)return!1;var B=e.getGL();if(!B)return!1;O=[j,a];var Q,V=Math.round(O[0]/2),o=Math.round(O[1]/2);for(C=new jg.RenderTarget(e,B,V,o),T=[],d=[],Q=0;K>Q;Q++)T.push(new jg.RenderTarget(e,B,V,o)),d.push(new jg.RenderTarget(e,B,V,o)),V=Math.round(V/2),o=Math.round(o/2);return E(),Y=!0}var L,o,z,U,n,M,S=this,W=!1,Y=!1;this.serializeProperties={strength:1.5,threshold:.55,radius:.4,overrideAlpha:!0,selective:!1},this.resetProperties=function(){var k=this.serializeProperties;for(var Q in k)this[Q]=k[Q]},b.defineProperties(S,{enable:{get:function(){return W},set:function(H){!!W!=!!H&&(W=H,e.iv())}},strength:{get:function(){return L},set:function(P){L!==P&&(L=P,e.iv())}},threshold:{get:function(){return o},set:function(w){o!==w&&(o=w,e.iv())}},radius:{get:function(){return z},set:function(V){z!==V&&(z=V,e.iv())}},overrideAlpha:{get:function(){return U},set:function(c){!!U!=!!c&&(U=c,Y&&E(),e.iv())}},selective:{get:function(){return n},set:function(i){!!n!=!!i&&(n=!!i,e.iv())}}}),this.resetProperties();var C,O=[256,256],T=[],d=[],K=5,q=[3,5,7,9,11],V=[];S.contextLost=function(){Y=!1,M=null},S._42=function(P,S){if(W&&(Y||Q())){var G=e._postProcessing;if(n){M||(M=new jg.RenderTarget(e,P)),M.setSize(P,S.width,S.height),M.bind(P);var u=P.getParameter(3106);u&&0===u[0]&&0===u[1]&&0===u[2]&&1===u[3]?u=null:pk(P,[0,0,0,1]),P.clear(16640),e.setViewport(P,0,0,S.width,S.height),P._blooming=!0,e.syncRenderState(),e.renderScene({renderAxis:!1,renderGrid:!1,renderEdit:!1}),P._blooming=!1,u&&pk(P,u),M.unbind(P)}G.blitScreen(C,{type:"bloomHighPass",smoothWidth:.01,luminosityThreshold:o,tDiffuse:n?M.texture:S.texture});var h,$,t=C,q=Math.round(O[0]/2),v=Math.round(O[1]/2);for(h=0;K>h;h++)$=V[h],$.texSize=[q,v],$.colorTexture=t.texture,$.direction=[1,0],G.blitScreen(T[h],$),$.colorTexture=T[h].texture,$.direction=[0,1],G.blitScreen(d[h],$),q=Math.round(q/2),v=Math.round(v/2),t=d[h];return G.blitScreen(T[0],{type:"bloomComposite",blurTexture1:d[0].texture,blurTexture2:d[1].texture,blurTexture3:d[2].texture,blurTexture4:d[3].texture,blurTexture5:d[4].texture,bloomStrength:L,bloomRadius:z,bloomTintColor:[1,1,1]}),G.blitScreen(S,{type:"blitScreen",image:T[0].texture},{clear:!1,preRender:function(I){ie.for(I).glState.blend.apply({enabled:!0,equation:32774,func:[770,1]})},postRender:function(U){ie.for(U).glState.blend.apply({equation:32774,func:[770,771,1,771]})}}),S}}},L.graph3d.PostProcessing.Dof=function(B){function H(){var C=B.getGL();return C?(P=new jg.RenderTarget(B,C),V=!0):!1}function z(I,P,O,D){m=null;var V=I.getCanvas(),p=V.width,n=V.height;if(O=O||1024,p>O||n>O){var y=O/Math.max(p,n);p=Math.round(p*y),n=Math.round(n*y),E||(E=uc()),V=T.resizeImage(V,p,n,E)}var $=B.getGL();if(F||(F=$.createTexture()),g=fj(B,$,V,F),k=P||.01,h=!0,B.iv(),D--){if(m)return;m=T.callLater(function(){z(I,P,O,D)})}}var P,g,J,X,M,E,F,m,u=this,G=!1,V=!1,k=0,h=!1,q=Of.generateUUID();this.serializeProperties={aperture:.025,maxblur:1,image:null},this.resetProperties=function(){var e=this.serializeProperties;for(var A in e)this[A]=e[A]},b.defineProperties(u,{enable:{get:function(){return G},set:function(M){!!G!=!!M&&(G=M,M||(h=!1),B.iv())}},image:{get:function(){return J},set:function(a){J!==a&&(J=a,h=!1,g&&(B.deleteTexture(q),g=null),B.iv())}},maxblur:{get:function(){return X},set:function(l){X!==l&&(X=l,B.iv())}},aperture:{get:function(){return M},set:function(c){M!==c&&(M=c,B.iv())}}}),this.resetProperties(),u.contextLost=function(){V=!1,g&&(B.deleteTexture(q),g=null)},u.setImageFromGraphView=function(E,F,h){this.image=null,z(E,F,h,2)},u._42=function(n,T){if(G&&(V||H())){if(!g){var x=$p(this.image);if(!x||!x.comps&&!x.tagName)return T;L.Default.setImage(q,x),g=B.getTexture(q)}var b=T.width,p=T.height;if(b&&p)return B._postProcessing.blitScreen(P,b,p,{type:"bokeh",tColor:T.texture,tDepth:g,aspect:b/p,aperture:this.aperture,maxblur:this.maxblur,useG2d:h,threshold:k}),P}}},L.graph3d.PostProcessing.Blur=function(X){function _(){var Y=X.getGL();return Y?(l=new jg.RenderTarget(X,Y),Z=!0):!1}var l,f,R,h,k,u,s=this,t=!1,Z=!1,V={type:"blurDownSample"},K={type:"blurH"},$={type:"blurV"};this.serializeProperties={value:0,downSample:!1,iterations:1,layer:"main"},this.resetProperties=function(){var T=this.serializeProperties;for(var a in T)this[a]=T[a]},b.defineProperties(s,{enable:{get:function(){return t},set:function(u){!!t!=!!u&&(t=u,u?X.addRenderLayerListener(a,this):X.removeRenderLayerListener(a,this),X.iv())}},downSample:{get:function(){return h},set:function(P){h!==P&&(h=P,X.iv)}},value:{get:function(){return R},set:function(V){R!==V&&(R=V,X.iv())}},iterations:{get:function(){return k},set:function(L){k!==L&&(k=L,X.iv())}},layer:{get:function(){return u},set:function(V){u!==V&&(u=V,X.iv())}}}),this.resetProperties();var a=function(o){if(t&&o.layer===u&&"post"===o.phase){var A=X.getGL();if(!X._picking&&!X.isReflecting(A)){var N=X._postProcessing.getRenderTarget();N.unbind(A);for(var R=0,q=X._glCapabilities.maxAttributes;q>R;R++)A.disableVertexAttribArray(R);s.drawImpl(A,N),N.bind(A),A.useProgram(X._prg)}}};s._42=function(){},s.contextLost=function(){Z=!1,f=null},s.drawImpl=function(s,o,m,r,I){if(Z||_()){var q,D;if(o?(q=o.width,D=o.height):(q=X._viewport[2],D=X._viewport[3]),q&&D){var w=X._postProcessing;"boolean"!=typeof r&&(r=h),m==C&&(m=R),I==C&&(I=k),I=Math.max(1,Math.round(I));var P=ie.for(s).glState.depth,U=P.enabled;if(P.enabled=!1,r){m/=2;var c=[q,D];q/=2,D/=2,f||(f=new jg.RenderTarget(X,s)),V.image=o.texture,V.texelSize=[1/c[0],1/c[1]],w.blitScreen(f,q,D,V),o.setSize(s,q,D)}else f&&f.setSize(0,0);l.setSize(s,q,D);for(var g=[],Q=0;I>Q;Q++)g.push(m),m=Math.max(1,Math.floor(m/2));for(var Q=0;I>Q;Q++){var i=g[I-Q-1];K.image=r&&0===Q?f.texture:o.texture,K.value=i/q,w.blitScreen(l,null,null,K),r&&Q===I-1&&o.setSize(s,c[0],c[1]),$.image=l.texture,$.value=i/D,w.blitScreen(o,null,null,$)}return P.enabled=U,o}}}},L.graph3d.PostProcessing.Glitch=function(F){function u(){if(M&&C){s=Date.now(),w=0,S=1e3*V(C[0],C[1]),U=[];for(var h=1,E=M.length;E>h;h+=2)U.push((h>1?U[U.length-1]:0)+S*M[h]/Q)}}function J(){F.redraw()}function X(){var x=F.getGL();if(!x)return!1;H=new jg.RenderTarget(F,x);for(var o=p*p,Q=Df(p,p),c=Q.getImageData(0,0,p,p),D=c.data,q=0;o>q;q++)D[3*q+0]=h(256),D[3*q+1]=h(256),D[3*q+2]=h(256),D[3*q+3]=h(256);return Q.putImageData(c,0,0),j=fj(F,x,_f),Z=!0}var H,S,s,w,U,j,q,C,M,_=this,N=!1,Z=!1,V=Of.randomFloat,h=Of.randomInt,Q=0,T={type:"glitch"},p=64;this.serializeProperties={onlyReflector:!1,period:[2,3],intensity:[3,.3,1,.1,0,.4]},this.resetProperties=function(){var D=this.serializeProperties;for(var F in D)this[F]=D[F]},b.defineProperties(_,{enable:{get:function(){return N},set:function(Q){!!N!=!!Q&&(N=Q,Q&&u(),F.iv())}},onlyReflector:{get:function(){return q},set:function(J){!!q!=!!J&&(q=J,F.iv())}},period:{get:function(){return C},set:function(K){C=K,u(),F.iv()}},intensity:{get:function(){return M},set:function(n){n||(n=[1,1]),M=n,Q=0;for(var j=1,h=n.length;h>j;j+=2)Q+=n[j];u(),F.iv()}}}),this.resetProperties(),_.contextLost=function(){Z=!1},_._42=function(p,x){if(N&&(Z||X())){var K=!!F.isReflecting(p);if(K===!!q){var I=x.width,y=x.height;if(I&&y){var f=F._postProcessing,O=ie.for(p).glState.depth,h=O.enabled;O.enabled=!1;var i,l=Date.now();return l-s>U[w]&&(w++,w>=U.length&&u()),i=M[2*w],T.seed=Math.random(),T.byp=i?0:1,T.tDisp=j,i&&(T.angle=V(-Math.PI,Math.PI),T.distortion_x=V(0,1),T.distortion_y=V(0,1),T.amount=Math.random()/30*i,T.seed_x=V(-1,1)*i,T.seed_y=V(-1,1)*i),T.image=x.texture,f.blitScreen(H,I,y,T),O.enabled=h,requestAnimationFrame(J),H}}}}},L.graph3d.PostProcessing.Fxaa=function(C){var e=this,X=!1;b.defineProperties(e,{enable:{get:function(){return X},set:function(M){!!X!=!!M&&(X=M,C.iv())}}}),e._42=function(){}},yd(T,{accordionViewExpandIcon:Wi(xi),accordionViewCollapseIcon:Wi(xi,!0),accordionViewLabelColor:Pj,accordionViewLabelFont:Tq,accordionViewTitleBackground:Ik,accordionViewSelectBackground:yn,accordionViewSelectWidth:3,accordionViewSeparatorColor:H,splitViewDividerSize:1,splitViewDividerBackground:Ik,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:kn,rect:[2,2,12,12],background:xi}]},propertyViewLabelColor:Jd,propertyViewLabelSelectColor:Pj,propertyViewLabelFont:Tq,propertyViewExpandIcon:Wi(Kg),propertyViewCollapseIcon:Wi(Kg,!0),propertyViewBackground:Rf,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:Jr,propertyViewColumnLineColor:Jr,propertyViewSelectBackground:yn,listViewLabelColor:Jd,listViewLabelSelectColor:Pj,listViewLabelFont:Tq,listViewRowLineVisible:!1,listViewRowLineColor:Jr,listViewSelectBackground:yn,treeViewLabelColor:Jd,treeViewLabelSelectColor:Pj,treeViewLabelFont:Tq,treeViewExpandIcon:Wi(Gr),treeViewCollapseIcon:Wi(Gr,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:Jr,treeViewSelectBackground:yn,treeViewDoubleClickToToggle:!0,tableViewLabelColor:Jd,tableViewLabelSelectColor:Pj,tableViewLabelFont:Tq,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:Jr,tableViewColumnLineColor:Jr,tableViewSelectBackground:yn,treeTableViewLabelColor:Jd,treeTableViewLabelSelectColor:Pj,treeTableViewLabelFont:Tq,treeTableViewExpandIcon:Wi(Gr),treeTableViewCollapseIcon:Wi(Gr,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:Jr,treeTableViewColumnLineColor:Jr,treeTableViewSelectBackground:yn,tableHeaderLabelColor:Jd,tableHeaderLabelFont:Tq,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:hn,tableHeaderBackground:Rf,tableHeaderMoveBackground:Ul,tableHeaderInsertColor:yn,tableHeaderSortDescIcon:bo(Kg,!0),tableHeaderSortAscIcon:bo(Kg),tabViewTabGap:1,tabViewLabelColor:Pj,tabViewLabelFont:Tq,tabViewTabBackground:Ik,tabViewSelectWidth:3,tabViewSelectBackground:yn,tabViewMoveBackground:Ul,tabViewInsertColor:yn,toolbarLabelColor:Jd,toolbarLabelSelectColor:Pj,toolbarLabelFont:Tq,toolbarBackground:Rf,toolbarSelectBackground:yn,toolbarItemGap:8,toolbarSeparatorColor:sq},!0);var Bt={translateX:1,sortColumn:1},Ct={sortable:1,sortOrder:1,sortFunc:1},Dt={focusData:1},Et={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},Ft={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},Gt=function(p,X){X.add(p),p.hasChildren()&&p.eachChild(function(U){Gt(U,X)})},Ht=function(B,$,u,l,g,I,e,G,S,D,q){var c,b=u.getValueType(D),v=u.getAlign(D);if(u.getEnumValues(D)){var x=u.toEnumLabel($,D),o=hi||0,a=0,N=I,i=T.getTextSize(l,x).width;return c=$p(u.toEnumIcon($,D)),c&&(a=I+hi/2,"center"===v?a+=(G-(o+i))/2:"right"===v&&(a=a+G-(o+i)),ji(B,c,a,e+S/2,D,q),N=a+hi/2),x!=C&&(c?hf(B,x,l,g,N,e,G-(N-I),S):hf(B,x,l,g,I,e,G,S,v)),void 0}return $=u.formatValue($),$!=C?b===Pp?(ri(B,I,e,G,S,$),void 0):b===ae||!b&&nn($)?(c=$p($?Ed:Ve),ji(B,c,I+G/2,e+S/2,D,q),void 0):(hf(B,$,l,g,I,e,G,S,v),void 0):void 0},It=function(x,I){var l=I.view,Z=Cr(x),u=I.column||I.property;l.getDataModel().beginTransaction(),I.editor=x,x.info=I,l.setCurrentEditor(x),l.getView().insertBefore(Z,l._79O),mb(x,I.editorRect),x.setFocus?x.setFocus():tn(x),x.commitValue=function(J,k){x._17Q&&(x=x._17Q),k||l.setValue(I.data,u,x.getValue?x.getValue():x.value),x.close&&x.close(),me(Z)},u.onEditorCreated&&u.onEditorCreated(I)},Jt=function(V,G,c,t,Z){var R=qm(V,c),r=G.value,d=G.view,K=Z.getValueType(G.data);return R.onblur=R.onchange=function(){d.endEditing()},"input"===V?(r=Z.formatValue(r),r!=C&&(R.value=r),R.onkeydown=function(U){br(U)?d.endEditing():ic(U)&&d.endEditing(!0)},(K===sh||K===pn)&&g(R,oe,T.numberListener)):V===ed&&t.forEach(function(z){var W=I.createElement("option");W.innerHTML=Z.toEnumLabel(z),W.value=z,Z.isEnumEqual(r,z)&&(W.selected=!0),Nh(R,W)}),It(R,G),R},Kt=L.widget={},Lt=function(r,A,x){Po(s+".widget."+r,A,x)};yd(Yp,{ms_value:function(H){H.getValue=function(i){var Q=this.getItemById(i),Z=Q.element;return jm(Z)?Z:Z?Z.getValue?Z.getValue():Z.value:Q.selected},H.setValue=function(h,b){var f=this.getItemById(h);if(f){var G=f.element;G&&!jm(G)?G.setValue?G.setValue(b):G.value=b:nn(b)?(f.selected=b,this.iv()):(f.element=b,this.iv())}},H.v=function(v,J){var U=this;if(2===arguments.length)U.setValue(v,J);else{if(!oc(v))return U.getValue(v);for(var X in v)U.setValue(X,v[X])}return U}},_46o:function(G){G._icon=C,G._accessType=C,G._valueType=C,G._editable=!1,G._batchEditable=!0,G._align=Ob,G._nullable=!0,G._emptiable=!1,G.setParent=ns,G.formatValue=function(M){var l=this,R=l._valueType;return l.getEnumValues()?l.toEnumLabel(M):R===ae?!!M:M!=C&&R===sh?p(M):M},G.setEnum=function(D,r,c,P,e,t,y){var $=this;D&&!Tl(D)&&D.values&&(P=D.editable,c=D.icons,r=D.labels,e=D.strict,t=D.maxHeight,y=D.dropDownWidth,D=D.values),Ur(D)&&(D=D._as),Ur(r)&&(r=r._as),Ur(c)&&(c=c._as),$._enumValues=D,$._enumLabels=r,$._enumIcons=c,$._enumEditable=P,$._enumStrict=e==C?!0:e,$._enumMaxHeight=t,$._enumDropDownWidth=y,D&&D.length&&ah(D[0])&&($._valueType=pn),$.fp("enum",!1,!0)},G.getEnumDropDownWidth=function(){return this._enumDropDownWidth},G.getEnumMaxHeight=function(){return this._enumMaxHeight},G.isEnumEditable=function(){return this._enumEditable},G.getEnumValues=function(){return this._enumValues},G.getEnumLabels=function(){return this._enumLabels},G.getEnumIcons=function(){return this._enumIcons},G.isEnumStrict=function(){return this._enumStrict},G.isEnumEqual=function(m,y){return this._enumStrict?m===y:m==y},G.toEnumLabel=function(u,E){var e=this,n=e.getEnumValues(E),i=e.getEnumLabels(E);if(n&&i)for(var L=0;L<n.length;L++)if(e.isEnumEqual(u,n[L]))return i[L];return u},G.toEnumIcon=function(S,$){var j=this,K=j.getEnumValues($),R=j.getEnumIcons($);if(K&&R)for(var A=0;A<K.length;A++)if(j.isEnumEqual(S,K[A]))return R[A];return H}},_45o:function(g){g._87o=function(A,r,w,V,n,O){if(A){var i=this,B=i._90I,c=vh(1);i._columnLineVisible&&(n-=1),i._rowLineVisible&&(O-=1),0>=n||0>=O||(i._90I||(B=i._90I={}),B[r]||(B[r]=new Dg),mb(c,i.tx()+w,i.ty()+V,n,O),Nh(c,A),i._view.insertBefore(c,i._79O),A.onParentAdded&&A.onParentAdded(c),B[r].add(c))}},g._76o=function(){var j=this,H=j._90I;if(H){for(var O in H)H[O].each(function(P){me(P)});delete j._90I}},g._77o=function(j){var T=this;if(T._90I){var x=T._90I[j];x&&(x.each(function(O){me(O)}),delete T._90I[j])}}},_47o:function(k){k.getValue=function(i,Q){return Q.getValue?Q.getValue(i,Q,this):Eg(i,Q.getAccessType(),Q.getName())},k.setValue=function(V,u,v){if(u.isEmptiable(V)||""!==v||(v=H),u.isNullable(V)||v!=C){var n=this,E=u.getName(V),U=u.getAccessType(V),k=u.getValueType(V);k===sh&&jm(v)?v=Ym(v):k===pn&&jm(v)?v=parseFloat(v):k===ae&&jm(v)&&(v="true"===v),n._batchEditable&&u._batchEditable&&n.isSelected(V)?n.sm().each(function(x){u.setValue?u.setValue(x,u,v,n):Pf(x,U,E,v)}):u.setValue?u.setValue(V,u,v,n):Pf(V,U,E,v)}},k.setCurrentEditor=function(d){this.endEditing(),this._currentEditor=d,this.redraw()},k.isEditing=function(U,I){var n=this,Z=n._currentEditor;if(!Z)return!1;if(I){var m=Z.info;return m?(m.column||m.property)===I&&m.data===U:!1}return!0},k.endEditing=function(e){var s=this,C=s._currentEditor;C&&(delete s._currentEditor,C.commitValue&&C.commitValue(C.info,e),s.redraw(),s.getDataModel().endTransaction())},k.beginEditing=function(l){this.endEditing();var v=this,N=l.column||l.property;if(N.beginEditing)N.beginEditing(l);else{var X=l.data,h=l.value,L=v.getSelectBackground(X),U=N.getEnumValues(X),Y=N.getSlider(X),k=N.getColorPicker(X);if(Y){var E=yl(Kt.Slider,Y);return E.setValue(h),E.getView().onblur=function(){v.endEditing()},E.isInstant()&&(E.onValueChanged=function(){v.setValue(X,N,E.getValue())}),It(E,l),void 0}if(k||N.getValueType(X)===Pp){var H=yl(Kt.ColorPicker,k);H.setValue(h);var z=H.onClosed;return H.onClosed=function(){v.endEditing(),z&&z.call(this)},H.isInstant()&&(H.onValueChanged=function(Z,G){v.setValue(X,N,G)}),It(H,l),H.open(),void 0}if(U){if(Kt.ComboBox){var i=new Kt.ComboBox;i.setValue(h),i.setValues(U),i.setLabels(N.getEnumLabels(X)),i.setIcons(N.getEnumIcons(X)),i.setEditable(N.isEnumEditable(X)),i.setStrict(N.isEnumStrict(X)),i.setMaxHeight(N.getEnumMaxHeight(X)),i.setDropDownWidth(N.getEnumDropDownWidth(X)),i.onClosed=function(){v.endEditing()},It(i,l),i.open()}else Jt(ed,l,L,U,N);return}var J=N.getValueType(X);if(J===ae||nn(h))return v.setValue(X,N,!h),void 0;if(N.getItemEditor(X)){var t=ue(N.getItemEditor(X)),x=new t(X,N,v,l),w=x.getView();return w._17Q=x,x.setValue(h),zm(w),It(w,l),x.editBeginning&&x.editBeginning(),void 0}Jt("input",l,L,C,N)}}},_44o:function(O){O.init=function(n){var P=this,V=P.th=new $t(n),J=P._view=eh(1,P);P.tv=P._tableView=n,Nh(J,V.getView()),Nh(J,n.getView()),V.mp(function(k){k.property===pb&&P.iv()}),P.iv()},O.getTableView=function(){return this.tv},O.getTableHeader=function(){return this.th},O.getDataModel=function(){return this.tv.dm()},O.getColumnModel=function(){return this.tv.getColumnModel()},O.setColumns=function(n){this.tv.setColumns(n)},O.addColumns=function(t){this.tv.addColumns(t)},O.endEditing=function(){this.tv.endEditing()},O.validateImpl=function(){var J=this,_=J.th,E=wf(_),P={x:0,y:0,width:J.getWidth(),height:E};mb(_,P),P.y=E,P.height=h(0,J.getHeight()-E),mb(J.tv,P)}},ms_vs:function(y){y._41o=function(){return this._29I.height<this._59I},y._43o=function(){var r=this;r._41o()&&(r._58I||(Yi(function(){r._94O()},de),r.iv()),r._58I=new Date)},y._94O=function(){var r=this;if(r._58I){var e=new Date;e.getTime()-r._58I.getTime()>=de?(delete r._58I,r.iv()):Yi(function(){r._94O()},de)}},y._93I=function(){var S=this,N=S._27I;if(S._58I||!S._autoHideScrollBar){N||Nh(S._79O,N=S._27I=vh());var z=S._29I,_=z.height,Y=S._59I,F=S.getScrollBarSize(),O=z.width-F-2,U=_*(-S.ty()/Y),W=_*(_/Y),l=N.style;Y>_?(ak>W&&(U=U+W/2-ak/2,0>U&&(U=0),U+ak>_&&(U=_-ak),W=ak),l.visibility=Dq,l.background=S.getScrollBarColor(),l.borderRadius=F/2+we,mb(N,O,U,F,W)):l.visibility=Gb}else N&&(N.style.visibility=Gb)}},ms_hs:function(K){K._40o=function(){return this._29I.width<this._91I},K._42o=function(){var L=this;L._40o()&&(L._95O||(Yi(function(){L._94I()},de),L.iv()),L._95O=new Date)},K._94I=function(){var N=this;if(N._95O){var x=new Date;x.getTime()-N._95O.getTime()>=de?(delete N._95O,N.iv()):Yi(function(){N._94I()},de)}},K._92I=function(){var L=this,j=L._28I;if(L._95O||!L._autoHideScrollBar){j||Nh(L._79O,j=L._28I=vh());var E=L._29I,u=E.width,O=L._91I,_=L.getScrollBarSize(),X=E.height-_-2,Y=u*(-L.tx()/O),m=u*(u/O),J=j.style;O>u?(ak>m&&(Y=Y+m/2-ak/2,0>Y&&(Y=0),Y+ak>u&&(Y=u-ak),m=ak),J.visibility=Dq,J.background=L.getScrollBarColor(),J.borderRadius=_/2+we,mb(j,Y,X,m,_)):J.visibility=Gb}else j&&(j.style.visibility=Gb)}}}),wg(Ed,Jo(16,16,[{type:xb,rect:[1,1,14,14],background:yn},{type:Np,rect:[1,1,14,14],width:1,color:bh},{type:am,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),wg(Ve,Jo(16,16,{type:Np,rect:[1,1,14,14],width:1,color:bh})),wg(kk,Jo(16,16,[{type:Ke,rect:[2,2,12,12],borderWidth:1,borderColor:bh,background:"#FFF"},{type:Ke,rect:[4,4,8,8],background:yn}])),wg(Pg,Jo(16,16,{type:Ke,rect:[2,2,12,12],borderWidth:1,borderColor:bh})),Yp._15Q=function(Z){Z._29I=Sr,Z._59I=0,Z._91I=0,Z._5o=function(Q){var p=this;p._30I=new Dg,p._rows=new Dg,p._rowMap={},p._31I=0,p._14I=0,p._view=eh(1,p),p._canvas=uc(p._view),Nh(p._view,p._79O=vh()),p.dm(Q?Q:new cr)},Z.getCheckIcon=function(L){var v=this.sm(),j=v.co(L);return v.sg()?$p(j?kk:Pg):$p(j?Ed:Ve)},Z.checkData=function(i){var g=this.sm(),e=g.co(i);g.sg()&&e||(this._32o=1,e?g.rs(i):g.as(i),delete this._32o)},Z.getDataAt=function(P){P.target&&(P=this.lp(P));var w=$(P.y/this._rowHeight),K=this._rows;return 0>w||w>=K.size()?C:K.get(w)},Z.onDataDoubleClicked=function(){},Z.onDataClicked=function(){},Z.adjustTranslateX=function(){return 0},Z.adjustTranslateY=function(B){var h=this.getHeight()-this._59I;return h>B&&(B=h),B>0?0:p(B)},Z.onPropertyChanged=function(V){var S=this,r=V.property;Et[r]?S.ivm():Dt[r]||S.redraw(),r===hr?S._42o():r===nj&&S._43o()},Z.getLabel=function(E){return E.toLabel()},Z.getLabelFont=function(){return this._labelFont},Z.getLabelColor=function(U){var N=this;if(N.isCheckMode()){if(N._focusData===U)return N._labelSelectColor}else if(N.isSelected(U))return N._labelSelectColor;return N._labelColor},Z.getStartRowIndex=function(){return this._31I},Z.getEndRowIndex=function(){return this._14I},Z.getRowDatas=function(){return this._rows},Z.getRowIndex=function(W){return this._rowMap[W._id]},Z.getRowSize=function(){return this._rows.size()},Z.getViewRect=function(){return ho(this._29I)},Z.isVisible=function(q){return this._visibleFunc?this._visibleFunc(q):!0},Z.getCurrentSortFunc=function(){return this._sortFunc},Z.setDataModel=function(V){var r=this,H=r._dataModel,g=r._selectionModel;H!==V&&(H&&(H.umm(r.handleDataModelChange,r),H.umd(r.handleDataPropertyChange,r),H.umh(r.handleHierarchyChange,r),g||H.sm().ums(r.handleSelectionChange,r)),r._dataModel=V,V.mm(r.handleDataModelChange,r),V.md(r.handleDataPropertyChange,r),V.mh(r.handleHierarchyChange,r),g?g._21I(V):V.sm().ms(r.handleSelectionChange,r),r.fp("dataModel",H,V))},Z.validateModel=function(){var D=this;D._rows.clear(),D._rowMap={},D.buildChildren(D._dataModel._roots);var T=D._rows=D._rows.toList(D.isVisible,D),A=0,y=D.getCurrentSortFunc(),N=T.size();for(y&&T.sort(y);N>A;A++)D._rowMap[T.get(A)._id]=A},Z.buildChildren=function(o){var S=this;o.each(function(e){S._rows.add(e),S.buildChildren(e._children)})},Z.handleDataModelChange=function(){this.ivm()},Z.handleDataPropertyChange=function(P){"parent"===P.property?this.ivm():this.invalidateData(P.data)},Z.handleHierarchyChange=function(){this.ivm()},Z.handleSelectionChange=function(e){e.datas.each(this.invalidateData,this),this.onSelectionChanged(e)},Z.onSelectionChanged=function(H){var y=this,w=y.sm();!y.isAutoMakeVisible()||1!==w.size()||"set"!==H.kind&&"append"!==H.kind||y._32o||y.makeVisible(w.ld())},Z.handleBackgroundClick=function(W){Rj(W)&&!this.isCheckMode()&&this.sm().cs()},Z.makeVisible=function(h){h&&(this._23I=h,this.iv())},Z.scrollToIndex=function(c){var K=this,t=K._29I,d=t.height,Z=K._rowHeight,B=Z*c;c>=0&&c<K._rows.size()&&d>0&&(B+Z>t.y+d?K.ty(-B+d-Z):B<t.y&&K.ty(-B))},Z.autoScroll=function(r,S){var F=this,j=F._rowHeight,Q=j,L=j/4,A=F._29I,y=F.lp(r),c={x:F.tx(),y:F.ty()};return j>0&&A&&(y.x-A.x<Q?F.translate(L,0):A.x+A.width-y.x<Q&&F.translate(-L,0),y.y-A.y<Q?F.translate(0,L):A.y+A.height-y.y<Q&&F.translate(0,-L)),c.x=F.tx()-c.x,c.y=F.ty()-c.y,S&&(S.x+=c.x,S.y+=c.y),c},Z.getTopRowOrderSelection=function(){var Z=this.sm().getTopSelection(),N={},M=new Dg;return Z.each(function(X){N[X._id]=X}),this._rows.each(function(I){N[I._id]&&M.add(I)}),M},Z.getRowOrderSelection=function(){var q=new Dg;return this._rows.each(function(d){this.isSelected(d)&&q.add(d)},this),q},Z.ivm=function(){this.invalidateModel()},Z.invalidateModel=function(){var y=this;y._96I||(y._96I=1,y._32I=1,delete y._24I),y.iv()},Z.redraw=function(){var N=this;N._32I||(N._32I=1,delete N._24I,N.iv())},Z.invalidateData=function(A){var F=this;im?F.redraw():F._32I||(F._24I||(F._24I={}),F._24I[A._id]=A,F.iv())},Z.getFocusData=function(){return this._focusData},Z.setFocusDataById=function(k){this.setFocusData(this.dm().getDataById(k))},Z.setFocusData=function(U){var r=this,k=r._focusData;k!==U&&(r._focusData=U,r.fp("focusData",k,U),k&&r.invalidateData(k),U&&(r.invalidateData(U),r.isAutoMakeVisible()&&r.makeVisible(U)))},Z.drawRowBackground=function(u,P,N,G,M,j,z){var g=this,J=g.isCheckMode();(P===g._focusData&&J||N&&!J)&&ri(u,G,M,j,z,g.getSelectBackground(P))},Z.drawData=function(x,p,C){var o=this,Y=o._rowHeight,F=Y*C,S=o._29I,c=S.x,b=S.width;x.save(),x.beginPath(),x.rect(c,F,b,Y),x.clip(),o._87o(o.drawRow(x,p,o.isSelected(p),c,F,b,Y),C,c,F,b,Y),x.restore(),o._rowLineVisible&&ri(x,c,F+Y-1,b,1,o._rowLineColor)},Z._12I=function(h){var P=this,Y=P._31I,f=P._29I,W=f.x,G=f.y,_=f.width,C=f.height;for(h.beginPath(),h.rect(W,G,_,C),h.clip(),h.clearRect(W,G,_,C),P._76o(),P._93db(h);Y<P._14I;Y++)P.drawData(h,P._rows.get(Y),Y);P._92db(h)},Z._13I=function(T){for(var i,v=this,c=v._rowHeight,s=v._29I,U=s.x,y=s.width,d=v._31I,k=v._30I;d<v._14I;d++)i=v._rows.get(d),v._24I[i._id]&&k.add({data:i,index:d});k.isEmpty()||(T.beginPath(),k.each(function(C){T.rect(U,C.index*c,y,c)}),T.clip(),k.each(function(L){T.clearRect(U,L.index*c,y,c)}),k.each(function(K){v._77o(K.index)}),v._93db(T),k.each(function($){v.drawData(T,$.data,$.index)}),v._92db(T),k.clear())},Z.preValidateModel=function(){this.endEditing&&this.endEditing()},Z.validateImpl=function(){var _=this,G=_._canvas,l=_.getWidth(),b=_.getHeight(),f=_._rowHeight,D=_._32I;(l!==G.clientWidth||b!==G.clientHeight)&&(Eh(G,l,b),D=1),_._96I&&(_.preValidateModel(),_.validateModel());var S=_._29I,i={x:-_.tx(),y:-_.ty(),width:l,height:b},U=_._rows.size(),d=yh(G),L=_._23I;D||tl(i,S)||(D=1),_._29I=i,_._59I=U*f,_._31I=$(i.y/f),_._14I=O((i.y+i.height)/f),_._31I<0&&(_._31I=0),_._14I>U&&(_._14I=U),_._99I&&D&&_._99I();var e=_.tx(),h=_.ty();(_._40o()||_._41o())&&(_._59I+=_.getScrollBarSize(),_._99I&&D&&(_._91I+=_.getScrollBarSize())),Ud&&!kj&&(d.save(),fb(d,l/nm.length,b/nm.length,1)),fb(d,e,h,1),D?_._12I(d):_._24I&&_._13I(d),_._93I(),_._92I(),d.restore(),_._32I=_._24I=_._96I=C,L&&(_.scrollToIndex(_.getRowIndex(L)),delete _._23I),_.tx(_.tx()),_.ty(_.ty())},Z.canHandleSelectMode=function(){return!0},Z.isDraggable=function(){return!0}},Yp._48o=function(u){u._rootVisible=!0,u._rootData=C,u._35o=function(){this._expandMap={},this._levelMap={}},u.validateModel=function(){var L=this,d=L._rootData;L._rows.clear(),L._levelMap={},L._rowMap={},L._currentLevel=0,d?L._rootVisible?L.isVisible(d)&&L.buildData(d):L.buildChildren(d):L.buildChildren(),delete L._currentLevel},u.buildData=function(p){var K=this,R=p._id,l=K._rows;K._rowMap[R]=l.size(),l.add(p),K._levelMap[R]=K._currentLevel,K.isExpanded(p)&&(K._currentLevel++,K.buildChildren(p),K._currentLevel--)},u.buildChildren=function(g){var P=this,b=g?g._children:P._dataModel._roots,n=P.getCurrentSortFunc();n&&P.isChildrenSortable(g)?b.toList(P.isVisible,P).sort(n).each(P.buildData,P):b.each(function(E){P.isVisible(E)&&P.buildData(E)})},u.getLevel=function(F){return this._levelMap[F._id]},u.getToggleIcon=function(L){var T=this,_=T._loader,J=T._collapseIcon;return _&&!_.isLoaded(L)?J:L.hasChildren()?T.isExpanded(L)?T._expandIcon:J:C},u.isCheckMode=function(){return this._checkMode!=C},u.isChildrenSortable=function(){return!0},u.handleDataModelChange=function(K){var s=this;K.kind===vc?delete s._expandMap[K.data._id]:K.kind===Hi&&(s._expandMap={}),s.ivm()},u.toggle=function(O){var X=this;X.isExpanded(O)?X.collapse(O):X.expand(O)},u.isExpanded=function(a){return 1===this._expandMap[a._id]},u.expand=function(z){var F=this,N=F._loader;F.isExpanded(z)||(N&&!N.isLoaded(z)&&N.load(z),F._expandMap[z._id]=1,F.ivm(),F.onExpanded(z))},u.onExpanded=function(){},u.collapse=function(t){var C=this;C.isExpanded(t)&&(delete C._expandMap[t._id],C.ivm(),C.onCollapsed(t))},u.onCollapsed=function(){},u.expandAll=function(P){if(P)this.expand(P),P.eachChild(function(V){this.expandAll(V)},this);else{var C=this;C._dataModel.each(function(d){d.hasChildren()&&(C._expandMap[d._id]=1)}),C.ivm()}},u.collapseAll=function(){this._expandMap={},this.ivm()},u.makeVisible=function(v){if(v){var I=this;
if(!I._rootData||v.isDescendantOf(I._rootData)){for(var U=v._parent;U;)I.expand(U),U=U._parent;I._23I=v,I.iv()}}},u.checkData=function(u){var X,A=this,k=A._checkMode,I=A.sm(),E=I.co(u);if(!I.sg()||!E){if(A._32o=1,k===mf)E?I.rs(u):I.as(u);else if(k===Qe)X=new Dg(u),X.addAll(u._children);else if("descendant"===k)X=new Dg,Gt(u,X);else if("all"===k&&(X=new Dg,Gt(u,X),!E))for(var Y=u._parent;Y;)X.add(Y),Y=Y._parent;X&&(E?I.rs(X):I.as(X)),delete A._32o}},u.drawTree=function(D,n,T,w,F,Q,M){var o=this,Z=o._indent,q=o._levelMap[n._id],_=o.getIconWidth(n),m=$p(o.getToggleIcon(n));m?(w+=Z*q,ji(D,m,w+Z/2,F+M/2,n,o),w+=Z):w+=Z*(q+1),o._checkMode&&(ji(D,o.getCheckIcon(n),w+Z/2,F+M/2,n,o),w+=Z),o.drawIcon(D,n,w,F,_,M),o.drawLabel(D,n,w+_,F,M)}},Yp._14Q=function(i){i.getIcon=function(v){return v.getIcon()},i.getIconWidth=function(t){return this.getIcon(t)?this._indent:0},i.drawIcon=function(U,R,u,d,p,h){if(p){var I=this,t=I.getBodyColor(R),z=$p(I.getIcon(R),t);z&&(h-=I.isRowLineVisible()?1:0,Oq(U,z,lj,u,d,p,h,R,I,t),lo(U,I.getBorderColor(R),u,d,p,h))}},i.drawLabel=function(j,M,x,v,F){var d=this;hf(j,d.getLabel(M),d.getLabelFont(M),d.getLabelColor(M),x,v,0,F)}},Yp._50o=function(H){H._98I=function(){var z=this,_=z._39o=new cr;z._60I=new Dg,_.mm(z._17o,z),_.md(z._18o,z),_.mh(z._19o,z)},H.setColumns=function(U){this._39o.clear(),this.addColumns(U)},H.addColumns=function(X){var k=this._39o;X.forEach(function(I){if(!(I instanceof Nt)){var S=ue(I.className);I=yl(S?S:Nt,I)}k.add(I)})},H.onColumnClicked=function(){},H.onCheckColumnClicked=function(){},H._3Q=function(N){for(var n,U=0,J=this._60I,m=J.size();m>U;U++)if(n=J.get(U),n.column===N)return n;return C},H.getColumnAt=function(s){var T=this._4Q(s);return T?T.column:C},H._4Q=function(S){for(var b=this,L=S.target?b.lp(S).x:S.x,o=b._60I,J=0;J<o.size();J++){var V=o.get(J),n=V.startX;if(L>=n&&L<n+V.column.getWidth())return V}return C},H.getToolTip=function(j){var K=this,h=K.getDataAt(j),w=K.getColumnAt(j);return h&&w?w.getToolTip(h,K):C},H.adjustTranslateX=function(l){var A=this.getWidth()-this._91I;return A>l&&(l=A),l>0?0:p(l)},H._99I=function(){var u=this,f=u._29I,M=u._60I;M.clear(),u._91I=0,u._39o._roots.each(function(F){if(F.isVisible()){var A=u._91I+F.getWidth();u._91I<=f.x+f.width&&A>=f.x&&M.add({column:F,startX:u._91I}),u._91I=A}})},H.drawData=function(y,z,w){var d=this,o=d._rowHeight,t=o*w,a=d.isSelected(z),n=d._29I,e=n.x,h=n.width;d.drawRowBackground(y,z,a,e,t,h,o),d._60I.each(function(c){var i=c.column,R=c.startX,F=i.getWidth();F>0&&!d.isEditing(z,i)&&(y.save(),y.beginPath(),y.rect(R,t,F,o),y.clip(),d._87o(d.drawCell(y,z,a,i,R,t,F,o),w,R,t,F,o),d._columnLineVisible&&ri(y,R+F-1,t,1,o,d._columnLineColor),y.restore())}),d._rowLineVisible&&ri(y,e,t+o-1,h,1,d._rowLineColor)},H.drawCell=function(O,M,$,P,c,H,s,h){var u=this;if(P.drawCell)return P.drawCell(O,M,$,P,c,H,s,h,u);var k=u.getValue(M,P);Ht(O,k,P,u.getLabelFont(M,P,k),u.getLabelColor(M,P,k),c,H,s,h,M,u)},H.getColumnModel=function(){return this._39o},H._17o=function(){this.redraw()},H._18o=function(J){var v=this;J.data===v._sortColumn&&Ct[J.property]?v.ivm():(v._42o(),v.redraw())},H._19o=function(){this.redraw()},H.getCurrentSortFunc=function(){var t=this,L=t._sortColumn;if(L&&L.isSortable()){var l=L.getSortFunc(),P=qf===L.getSortOrder()?1:-1;return l||(l=le),function(c,M){return l.call(t,t.getValue(c,L),t.getValue(M,L),c,M)*P}}return t._sortFunc},H.isCellEditable=function(c,T,M){return T.isEditable()&&this.isEditable()?T.isCellEditable?T.isCellEditable(c,T,M,this):!0:!1},H._37O=function(q,W){if(Rj(W))for(var B=this,S=B.lp(W),b=B._60I,A=B._rowHeight,c=B._29I,F=c.x,H=c.y,o=c.width,K=c.height,n=0;n<b.size();n++){var t=b.get(n),j=t.startX,m=t.column,E=m.getWidth();if(m!==B._31o&&m!==B._4o&&S.x>=j&&S.x<j+E&&B.isCellEditable(q,m,W)){var $={x:j,y:B.getRowIndex(q)*A,width:E,height:A},s={x:$.x+B.tx(),y:$.y+B.ty(),width:$.width,height:$.height},L=0,p=0;return $.x<F?L=$.x-F:$.x+$.width>F+o&&(L=$.x+$.width-F-o),L&&(B.tx(B.tx()-L),s.x-=L),$.y<H?p=$.y-H:$.y+A>H+K&&(p=$.y+A-H-K),p&&(B.ty(B.ty()-p),s.y-=p),B.beginEditing({data:q,column:m,value:B.getValue(q,m),event:W,rect:$,editorRect:s,view:B}),void 0}}}},Kt.BaseItemEditor=function(e,c,$,P){this._data=e,this._column=c,this._master=$,this._editInfo=P},Lt("BaseItemEditor",b,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var Mt=L.Tab=function(){Ei(Mt,this)};ik("Tab",Iq,{ms_ac:["view","closable","disabled","visible"],_icon:C,_closable:!1,_disabled:!1,_visible:!0,setParent:ns});var Nt=L.Column=function(){Ei(Nt,this)};ik("Column",Iq,{_46o:1,ms_ac:["accessType","valueType",Dq,Gh,Yj,kp,"align",Pp,"sortOrder",ds,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:qf,_sortFunc:C,_sortable:!0,_clickable:!0,setWidth:function(h){16>h&&(h=16);var W=this._width;this._width=h,this.fp(kp,W,h)},getToolTip:function(h,Z){return this.formatValue(Z.getValue(h,this))}});var Ot=L.Property=function(){Ei(Ot,this)};ik("Property",Iq,{_46o:1,ms_ac:["accessType","valueType",Gh,Yj,"categoryName",Pp,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:C,getToolTip:function(s,T,B){var P=this;return T?P.formatValue(B.getValue(s,P)):B.getPropertyName(P)}}),Kt.AccordionView=function(){var U=this;U._20o={},U._21o=new Dg,U._10o=C,U._9o=C,U._11o=C,U._view=eh(0,U),U.iv()},Lt("AccordionView",b,{ms_v:1,ms_fire:1,ms_ac:[fs,dd,"titleHeight",Km,fc,"titleBackground","selectWidth",df,"orientation","separatorColor"],_expandIcon:T.accordionViewExpandIcon,_collapseIcon:T.accordionViewCollapseIcon,_titleHeight:_h,_labelColor:T.accordionViewLabelColor,_labelFont:T.accordionViewLabelFont,_titleBackground:T.accordionViewTitleBackground,_selectBackground:T.accordionViewSelectBackground,_selectWidth:T.accordionViewSelectWidth,_orientation:"v",_separatorColor:T.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function($,w,M,x){var r=this,m=vh(),t={content:w,div:m,canvas:uc(m),icon:x};if(r._20o[$])throw $+" already exists";var E=t.downEventFunc=function(y){Ne(y)},V=t.upEventFunc=function(n){Ne(n),Rj(n)&&(r._10o===$?r.collapse():r.expand($))};[ls,Mn].forEach(function(j){g(m,j,E)}),[go,ej].forEach(function(j){g(m,j,V)}),m.style.cursor=Xq,Nh(r._view,m),r._20o[$]=t,r._21o.add($),M&&r.expand($),r.iv()},remove:function(V){var d=this,j=d._20o[V];if(j){var A=j.div;me(A),[ls,Mn].forEach(function(U){J(A,U,j.downEventFunc)}),[go,ej].forEach(function(B){J(A,B,j.upEventFunc)}),delete d._20o[V],d._21o.remove(V),d.iv()}},clear:function(){var y=this;y._21o.toArray().forEach(y.remove,y),y._20o={},y._21o.clear(),y.iv()},isExpanded:function(N){return this._10o===N},expand:function(O){var C=this;C._20o[O]&&C._10o!==O&&(C._10o=O,C.onExpanded(O),C.iv())},onExpanded:function(){},collapse:function(){var P=this;P._10o&&(P.onCollapsed(P._10o),delete P._10o,P.iv())},onCollapsed:function(){},initCanvas:function(N,T,o){Eh(N,T,o);var q=yh(N);return fb(q,0,0,1),q.clearRect(0,0,T,o),q},drawTitle:function(L,h,U,S,v){var e=this,K=$p(v.icon),D=e.isExpanded(h),A=e._titleHeight,o=e._titleBackground,j=e._selectWidth,N=e._separatorColor,z=$p(D?e._expandIcon:e._collapseIcon),F=j+4;ri(L,0,0,U,S,o),D&&j&&ri(L,0,0,j,S,e._selectBackground),(D||e._21o.get(e._21o.size()-1)!==h)&&ri(L,0,S-1,U,1,N?N:dm(o)),K&&(ji(L,K,F+wc(K)/2,A/2),F+=wc(K)+2),hf(L,h,e.getLabelFont(h),e.getLabelColor(h),F,0,0,A),z&&ji(L,z,U-wc(z)/2-4,A/2)},validateImpl:function(){var L=this,Y=L._view,N=0,H=0,d=L.getWidth(),A=L.getHeight(),c=L._titleHeight,P=L._21o.size()*c,x=L._11o,S=L._9o;delete L._11o,delete L._9o,L._21o.each(function(Y){var B,o,M=L._20o[Y],z=M.content,y=L._10o===Y;Xj(L)?(mb(M.div,N,0,c,A),B=L.initCanvas(M.canvas,c,A),qo(B,0,A),Tp(B,-Qo),L.drawTitle(B,Y,A,c,M),B.restore(),y?(o=h(0,d-P),z&&(L._11o=z,L._9o=Cr(z),mb(z,N+c,0,o,A)),N+=c+o):N+=c):(mb(M.div,0,H,d,c),B=L.initCanvas(M.canvas,d,c),L.drawTitle(B,Y,d,c,M),B.restore(),y?(o=h(0,A-P),z&&(L._11o=z,L._9o=Cr(z),mb(z,0,H+c,d,o)),H+=c+o):H+=c)});var X=L._9o;x&&x!==L._11o&&x.endEditing&&x.endEditing(),X&&X!==S&&Nh(Y,X),S&&S!==X&&me(S)}}),Kt.SplitView=function(m,E,l,s){var D=this,q=D._dividerDiv=vh(),b=D._60O=uc(),a=D._61O=uc(),S=b.style,K=a.style;D._view=eh(1,D),Nh(D._view,q),S.msTouchAction=Yl,S.pointerEvents=Yl,S.cursor=Xq,K.msTouchAction=Yl,K.pointerEvents=Yl,K.cursor=Xq,m&&D.setLeftView(m),E&&D.setRightView(E),l&&D.setOrientation(l),s!=C&&D.setPosition(s),D.setStatus(gn),new Pt(D)},Lt("SplitView",b,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:T.splitViewDividerSize,_dividerBackground:T.splitViewDividerBackground,_dragOpacity:T.splitViewDragOpacity,_toggleIcon:T.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(S,b){var l=this,x=l._position;isNaN(S)||(b||(l._82O=0>S?-1:S>1?1:0),l._position=S,l.fp(Ao,x,S))},getLeftView:function(){return this._leftView},setLeftView:function(i){var J=this,O=J._leftView,x=J._view;if(J._leftView!==i){if(O&&O!==J._rightView){var Y=Cr(O);Y.parentNode===x&&me(Y)}if(J._leftView=i,i){var N=Cr(i);N.parentNode!==x&&x.insertBefore(N,J._dividerDiv)}J.fp("leftView",O,i)}},getRightView:function(){return this._rightView},setRightView:function(I){var U=this,E=U._rightView,j=U._view;if(U._rightView!==I){if(E&&E!==U._leftView){var Y=Cr(E);Y.parentNode===j&&me(Y)}if(U._rightView=I,I){var H=Cr(I);H.parentNode!==j&&j.insertBefore(H,U._dividerDiv)}U.fp("rightView",E,I)}},validateImpl:function(){var w=this,Q=w._draggable,x=w._position,M=w.getWidth(),Z=w.getHeight(),b=w._dividerSize,X=w._dividerBackground,n=Cd?18:8,U=w._dividerDiv,R=w._82O,W=w._60O,Y=w._61O,o=w._toggleIcon,v=w._status,O=U.style,e=null,V=Cd?20:4,s=o.comps[0];b>=n||0===b?w._coverDiv&&(me(w._coverDiv),delete w._coverDiv):w._coverDiv||(w._coverDiv=vh(),bq&&(w._coverDiv.style.background=bn),Nh(U,w._coverDiv)),w._togglable?W.parentNode||(Nh(U,W),Nh(U,Y)):(me(W),me(Y));var t=w._coverDiv,C=w._leftView,u=w._rightView;if(Xj(w)){if(b>M&&(b=M),v===gn)if(1===R)var S=r(x,M),G=h(0,M-b-S);else-1===R?(G=r(-x,M),S=h(0,M-b-G)):(S=p((M-b)*x),G=h(0,M-b-S));else"cl"===v?(S=0,G=h(0,M-b)):"cr"===v&&(G=0,S=h(0,M-b));C&&mb(C,0,0,S,Z),u&&mb(u,S+b,0,G,Z),mb(U,S,0,b,Z),w._22o=S,t&&(mb(t,b/2-n/2,0,n,Z),t.style.cursor=Q?Yo:""),U.style.cursor=Q?Yo:"";var D=U.clientHeight/2,l=U.clientWidth;Eh(W,l,l),mb(W,0,D-l-V,l,l),e=yh(W),fb(e,0,0,1),s.rotation=-Qo,Ae(e,o,0,0,l,l),e.restore(),Eh(Y,l,l),mb(Y,0,D+V,l,l),e=yh(Y),fb(e,0,0,1),s.rotation=Qo,Ae(e,o,0,0,l,l),e.restore()}else{if(b>Z&&(b=Z),v===gn)if(1===R)var y=r(x,Z),A=h(0,Z-b-y);else-1===R?(A=r(-x,Z),y=h(0,Z-b-A)):(y=p((Z-b)*x),A=h(0,Z-b-y));else"cl"===v?(y=0,A=h(0,Z-b)):"cr"===v&&(A=0,y=h(0,Z-b));C&&mb(C,0,0,M,y),u&&mb(u,0,y+b,M,A),mb(U,0,y,M,b),w._22o=y,t&&(mb(t,0,b/2-n/2,M,n),t.style.cursor=Q?Me:""),O.cursor=Q?Me:"";var q=U.clientWidth/2,l=U.clientHeight;Eh(W,l,l),mb(W,q-l-V,0,l,l),e=yh(W),fb(e,0,0,1),s.rotation=0,Ae(e,o,0,0,l,l),e.restore(),Eh(Y,l,l),mb(Y,q+V,0,l,l),e=yh(Y),fb(e,0,0,1),s.rotation=kl,Ae(e,o,0,0,l,l),e.restore()}O.background=X}});var Pt=function(i){this.sv=i,this.addListeners()};Po(Pt,b,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(K){var U=this,h=U.sv,v=h._dividerDiv,z=h._60O,s=h._61O,u=h._status,Q=K.target;if(Q===z)u===gn?h.setStatus("cl"):"cr"===u&&h.setStatus(gn);else if(Q===s)u===gn?h.setStatus("cr"):"cl"===u&&h.setStatus(gn);else if(Qm(K)&&(Q===v||Q===h._coverDiv)&&(Ne(K),h.isDraggable())){h.getLeftView(),h.getRightView();var o=U.maskDiv=vh();if(o.style.left=0,o.style.top=0,o.style.width=h.getWidth()+"px",o.style.height=h.getHeight()+"px",h.getView().appendChild(o),!h.isContinuousLayout()){var S=U.resizeDiv=vh();S.style.left=v.style.left,S.style.top=v.style.top,S.style.width=v.style.width,S.style.height=v.style.height,S.style.opacity=h.getDragOpacity(),S.style.background=h.getDividerBackground(),Nh(U.getView(),S)}U._lastAbsPosition=h._22o,U._86o=Xj(h)?oo(K).x:oo(K).y,Jl(U,K)}},handleWindowTouchMove:function(K){Qm(K)&&this.update(K,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(z){var G=this;G.update(z,!0),G.sv.setStatus(gn),G.maskDiv&&me(G.maskDiv),G.resizeDiv&&me(G.resizeDiv),G.maskDiv=G.resizeDiv=C},handle_mousedown:function(A){Rj(A)&&this.handle_touchstart(A)},handleWindowMouseMove:function(_){this.handleWindowTouchMove(_)},handleWindowMouseUp:function(c){this.handleWindowTouchEnd(c)},update:function(A,g){var $=this,L=$.sv,k=Xj(L)?L.getWidth():L.getHeight(),T=L._dividerSize,G=$._lastAbsPosition-$._86o;Xj(L)?(G+=oo(A).x,G>k-T&&(G=k-T),0>G&&(G=0),$.resizeDiv&&($.resizeDiv.style.left=G+we)):(G+=oo(A).y,G>k-T&&(G=k-T),0>G&&(G=0),$.resizeDiv&&($.resizeDiv.style.top=G+we)),g&&k!==T&&(1===L._82O?L.setPosition(G,1):-1===L._82O?L.setPosition(G-k+T,1):L.setPosition(G/(k-T),1))}}),Kt.TabView=function(){var B=this,b=B._view=eh(1,B),Y=B._91O=vh(1),F=B._tabModel=new cr,M=F.sm(),N=B.invalidate;B._7o=new Dg,B._canvas=uc(Y),Nh(b,Y),Nh(b,B._92O=vh(1)),M.setSelectionMode(Ip),M.ms(B.handleSelectionChange,B),F.mm(N,B),F.mh(N,B),F.md(N,B),B._interactor=new Qt(B),B.iv()},Lt("TabView",b,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Km,fc,"tabHPadding","tabBackground","selectWidth",df,"moveBackground","insertColor"],_tabHPadding:0,_tabPosition:pc,_tabHeight:_h,_tabGap:T.tabViewTabGap,_labelColor:T.tabViewLabelColor,_labelFont:T.tabViewLabelFont,_tabBackground:T.tabViewTabBackground,_selectWidth:T.tabViewSelectWidth,_selectBackground:T.tabViewSelectBackground,_moveBackground:T.tabViewMoveBackground,_insertColor:T.tabViewInsertColor,_movable:!0,handleSelectionChange:function(){this._selectionChanged=!0,this.invalidate()},getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(J,W,h){var B,q=this._tabModel;return J instanceof Mt?(B=J,W&&B.setView(W)):(B=new Mt,B.setName(J),B.setView(W)),q.add(B),h&&q.sm().ss(B),B},getLabel:function(C){return C.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(G){this._23o=G,this.iv()},get:function(w){var G=this,y=G._tabModel;if(ah(w))return y._roots.get(w);if(jm(w)){var R;return y.each(function(k){w===G.getLabel(k)&&(R=k)}),R}return w instanceof Mt?w:C},select:function(h){this._tabModel.sm().ss(this.get(h))},remove:function(d){var P=this;if(d=P.get(d)){var D=P._tabModel,a=D._roots.indexOf(d);P._tabModel.remove(d),P.selectByIndex(--a)}},getCurrentTab:function(){return this._8o},hideTabView:function(P,g){g.parentNode===this._92O&&(Nj(g)?(g.style.display=zd,g._tab_=P):me(g),Oj())},showTabView:function(z,w){Nj(w)&&(w.style.display="block",w._tab_=z),w.parentNode!==this._92O&&(Nh(this._92O,w),Oj())},_24o:function(){var u,C=this,L=C._8o,X=C._9o,z=C._tabModel.sm().ld();z&&(u=Cr(z.getView())),u!==X&&(X&&(L.getView()&&L.getView().endEditing&&L.getView().endEditing(),C.hideTabView(L,X)),u&&C.showTabView(z,u)),C._8o=z,C._9o=u,L!==z&&C.onTabChanged(L,z)},onTabClosing:function(){return!0},onTabChanged:function(){},onTabClosed:function(L,$){this.selectByIndex(--$)},selectByIndex:function(L){var K=this,c=K._tabModel,f=c.size();if(f&&!c.sm().ld()){L==C&&(L=0),L>=f&&(L=f-1),0>L&&(L=0);for(var d=L;d>=0;d--){var V=K.get(d);if(!V.isDisabled())return K.select(V),V}for(d=L+1;f>d;d++)if(V=K.get(d),!V.isDisabled())return K.select(V),V}},getTabWidth:function(Q){var B=this.getTabHPadding(),P=4+2*B,e=$p(Q.getIcon());e&&(P+=wc(e,Q)+4);var W=this.getLabel(Q);return W&&(P+=Pr(this.getLabelFont(Q),W).width+4),Q.isClosable()&&(P+=10),P},drawTab:function(Y,J,M,B,h,i,W){var A,o=this,P=o._tabPosition,l=this.getTabHPadding(),q=M+4+l,m=o._selectWidth,V=$p(J.getIcon()),k=J.isDisabled(),z=o.getLabelColor(J),n=o.getLabelFont(J),t=o.getLabel(J),s=o._selectBackground,X=P===Ob+"-vertical",O=P===zb+"-vertical";(X||O)&&(q=B+4+l),k&&(Y.globalAlpha=xg),ri(Y,M,B,h,i,W),J===o._8o&&m&&(P===pc?ri(Y,M,B+i-m,h,m,s):P===Ob?ri(Y,M+h-m,B,m,i,s):P===zb?ri(Y,M,B,m,i,s):X?ri(Y,M+h-m,B,m,i,s):O?ri(Y,M,B,m,i,s):ri(Y,M,B,h,m,s));var j=h/2;if(X&&(qo(Y,j,B+i/2),Tp(Y,kl),qo(Y,-j,-B-i/2)),V){var G=sl(V,J),$=wc(V,J);if(X||O){var v=M+h/2,D=q+G/2;qo(Y,v,D),Tp(Y,Qo),qo(Y,-v,-D),ji(Y,V,M+h/2,q+G/2,J,o),qo(Y,v,D),Tp(Y,-Qo),qo(Y,-v,-D),q+=G+4}else ji(Y,V,q+$/2,B+i/2,J,o),q+=$+4}return X||O?(qo(Y,h/2,q+h/2),Tp(Y,Qo),qo(Y,-h/2,-q-h/2),hf(Y,t,n,z,M,q,i,h),qo(Y,h/2,q+h/2),Tp(Y,-Qo),qo(Y,-h/2,-q-h/2)):hf(Y,t,n,z,q,B,h,i),X&&(qo(Y,j,B+i/2),Tp(Y,-kl),qo(Y,-j,-B-i/2)),J.isClosable()&&(A=O?{x:M+h-12,y:B+i-12,width:12,height:12}:{x:M+h-12,y:B+2,width:12,height:12},this.drawCloseIcon(J,Y,z,A)),k&&(Y.globalAlpha=1),A},drawCloseIcon:function(O,i,h,A){var I=A.x,N=A.y;i.strokeStyle=h,i.lineWidth=1,i.beginPath(),i.moveTo(I+2,N+8),i.lineTo(I+8,N+2),i.moveTo(I+8,N+8),i.lineTo(I+2,N+2),i.stroke()},getTabAt:function(f){var T=this._interactor._8Q(f);return T?T.tab:null},validateImpl:function(){var y=this;y._24o();var U,n=y._canvas,x=y._tabPosition,c=y._91O,b=y._92O,R=y._tabModel,V=y.getWidth(),k=y.getHeight(),O=y._tabHeight,A=y._7o,S=y._tabGap,w=x===pc,q=x===Ob,J=x===zb,Y=x===Ob+"-vertical",j=x===zb+"-vertical",z=y._23o,N=0;if((q||J)&&R._roots.each(function(t){N=h(y.getTabWidth(t),N)}),w?(mb(c,0,0,V,O),U={x:0,y:O,width:V,height:h(0,k-O)}):q?(mb(c,0,0,N,k),U={x:N,y:0,width:h(0,V-N),height:k}):J?(mb(c,V-N,0,N,k),U={x:0,y:0,width:h(0,V-N),height:k}):Y?(mb(c,0,0,O,k),U={x:O,y:0,width:h(0,V-O),height:k}):j?(mb(c,V-O,0,O,k),U={x:0,y:0,width:h(0,V-O),height:k}):(mb(c,0,k-O,V,O),U={x:0,y:0,width:V,height:h(0,k-O)}),mb(b,U),Y||j){y._9o&&(U.x=0,mb(y._8o.getView(),U)),Eh(n,O,k);var t=yh(n),s=0;if(fb(t,0,y.ty(),1),t.clearRect(0,0,O,k),A.clear(),R._roots.each(function(U){if(U.isVisible()){var V,m=y.getTabWidth(U);if(!z||z.tab!==U){var o=y.getTabBackground(U);V=y.drawTab(t,U,0,s,O,m,o)}A.add({_75o:V,tab:U,startY:s,endY:s+m,height:m}),s+=m+S}}),y._23Q=h(0,s-S),z){var T=z.position;y.drawTab(t,z.tab,0,z.startY,O,z.height,y._moveBackground),ri(t,0,T,O,1,y._insertColor)}if(t.restore(),y._selectionChanged){y._selectionChanged=!1;for(var g=y.ty(),C=0;C<A.size();C++){var X=A.get(C);if(X.tab===y._8o){if(X.endY+g<0){y.ty(-X.startY);break}if(X.startY+g>k){y.ty(k-X.endY);break}}}}y.ty(y.ty())}else if(q||J){y._9o&&(U.x=0,mb(y._8o.getView(),U)),Eh(n,N,k);var t=yh(n),s=0;if(fb(t,0,y.ty(),1),t.clearRect(0,0,N,k),A.clear(),R._roots.each(function(o){if(o.isVisible()){var x;if(!z||z.tab!==o){var h=y.getTabBackground(o);x=y.drawTab(t,o,0,s,N,O,h)}A.add({_75o:x,tab:o,startY:s,endY:s+O,height:O}),s+=O+S}}),y._23Q=h(0,s-S),z){var T=z.position;y.drawTab(t,z.tab,0,z.startY,N,z.height,y._moveBackground),ri(t,0,T,N,1,y._insertColor)}if(t.restore(),y._selectionChanged){y._selectionChanged=!1;for(var g=y.ty(),C=0;C<A.size();C++){var X=A.get(C);if(X.tab===y._8o){if(X.endY+g<0){y.ty(-X.startY);break}if(X.startY+g>k){y.ty(k-X.endY);break}}}}y.ty(y.ty())}else{y._9o&&(U.y=0,mb(y._8o.getView(),U)),Eh(n,V,O);var t=yh(n),d=0;if(fb(t,y.tx(),0,1),t.clearRect(0,0,V,O),A.clear(),R._roots.each(function(G){if(G.isVisible()){var n,W=y.getTabWidth(G);if(!z||z.tab!==G){var Z=y.getTabBackground(G);n=y.drawTab(t,G,d,0,W,O,Z)}A.add({_75o:n,tab:G,startX:d,endX:d+W,width:W}),d+=W+S}}),y._64I=h(0,d-S),z){var T=z.position;y.drawTab(t,z.tab,z.startX,0,z.width,O,y._moveBackground),xl(t,y._insertColor,T,0,O)}if(t.restore(),y._selectionChanged){y._selectionChanged=!1;for(var D=y.tx(),C=0;C<A.size();C++){var X=A.get(C);if(X.tab===y._8o){if(X.endX+D<0){y.tx(-X.startX);break}if(X.startX+D>V){y.tx(V-X.endX);break}}}}y.tx(y.tx())}for(var i=[],m=b.children,C=0;C<m.length;C++){var M=m[C],v=M._tab_;v&&!R.contains(v)&&i.push(M)}i.forEach(function(m){b.removeChild(m)})}});var Qt=function(k){this.tv=k,this.addListeners()};Po(Qt,b,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(m){this.handleScroll(m,10*(m.wheelDelta/40))},handle_DOMMouseScroll:function(X){this.handleScroll(X,10*-X.detail)},handleScroll:function(P,E){Ne(P);var C=this.tv,B=C._tabPosition;!C._40o()||B!==pc&&B!==rq||C.tx(this.tv.tx()+E),!C._41o()||B!==Ob&&B!==zb&&B!==Ob+"-vertical"&&B!==zb+"-vertical"||C.ty(this.tv.ty()+E)},_8Q:function(X){var K,M,y=this.tv,e=y._tabPosition,n=y._7o;if(e===pc||e===rq){var b=y.lp(X).x;for(K=0;K<n.size();K++)if(M=n.get(K),M.startX<=b&&b<=M.endX)return M}else if(e===Ob||e===zb||e===Ob+"-vertical"||e===zb+"-vertical"){var f=y.lp(X).y;for(K=0;K<n.size();K++)if(M=n.get(K),M.startY<=f&&f<=M.endY)return M}return C},isClickable:function(s){var C=this.tv,O=C._tabPosition,W=this._73o=this._8Q(s);return!C._40o()||O!==pc&&O!==rq?!C._41o()||O!==Ob&&O!==zb&&O!==Ob+"-vertical"&&O!==zb+"-vertical"?W&&(!W.tab.isDisabled()||C.isMovable()):!0:!0},handle_mousemove:function(R){var J=this;wk?J._74o=J._8Q(R):J.getView().style.cursor=J.isClickable(R)?Xq:""},handle_mousedown:function(z){this.handle_mousemove(z),this.handle_touchstart(z)},handle_touchstart:function(X){var T=this,g=T.tv,E=g._tabPosition;Ne(X),Rj(X)&&T.isClickable(X)&&(E===pc||E===rq?(T.x=oo(X).x,T.lp=g.lp(X),T.tx=g.tx()):(T.y=oo(X).y,T.lp=g.lp(X),T.ty=g.ty()),Jl(T,X))},handle_mouseup:function(p){this.handle_touchend(p)},handle_touchend:function(f){if(jr(f)){var z=this._73o;if(!z)return;var g=this.tv,x=g.getTabModel(),D=z.tab;if(!D.isDisabled()&&D.isClosable()){var b=function(){var a=x._roots.indexOf(D);x.remove(D),g.onTabClosed(D,a)};g.onTabClosing(D,b)&&b()}}},handleWindowMouseMove:function(h){this.handleWindowTouchMove(h)},handleWindowTouchMove:function(B){var P,x=this,w=x.tv,q=w._tabPosition,a=x._73o;if(q===pc||q===rq){if(P=oo(B).x-x.x,!x._25o&&!x.moving&&A(P)>2&&(w._40o()&&!cq(B)?x._25o=1:a&&w.isMovable()&&(x.moving=1)),x._25o)w.tx(x.tx+P);else if(x.moving){var O=x.lp.x+P,j=w._tabGap/2;w._7o.each(function(x){var L=x.endX,$=O-x.startX<L-O;O>=x.startX&&L>=O&&w._7Q({tab:a.tab,startX:a.startX+P,width:a.width,front:$,insertTab:x.tab,position:$?h(0,x.startX-j):r(w._64I,L+j)})})}}else if(P=oo(B).y-x.y,!x._25o&&!x.moving&&A(P)>2&&(w._41o()&&!cq(B)?x._25o=1:a&&w.isMovable()&&(x.moving=1)),x._25o)w.ty(x.ty+P);else if(x.moving){var T=x.lp.y+P,j=w._tabGap/2;w._7o.each(function(Q){var Y=Q.endY,W=T-Q.startY<Y-T;T>=Q.startY&&Y>=T&&w._7Q({tab:a.tab,startY:a.startY+P,height:a.height,front:W,insertTab:Q.tab,position:W?h(0,Q.startY-j):r(w._23Q,Y+j)})})}},handleWindowMouseUp:function(t){this.handleWindowTouchEnd(t)},handleWindowTouchEnd:function(){var e=this,Q=e.tv,g=Q._tabPosition,X=Q.getTabModel(),A=X._roots,x=e._73o;if(e.moving){var H=Q._23o;if(H&&H.insertTab!==H.tab){var D=H.tab,f=A.remove(D),v=A.indexOf(H.insertTab);v>=0&&(H.front||v++,v<=A.size()&&(A.add(D,v),X._38I(D,f,v)))}Q._7Q(C),delete e.moving}else if(!e._25o&&x){D=x.tab;var p=e._74o;if(!p||p.tab===D)if(!D.isDisabled()&&Ad(x._75o,e.lp)){var m=function(){var l=A.indexOf(D);X.remove(D),Q.onTabClosed(D,l)};Q.onTabClosing(D,m)&&m()}else D.isDisabled()||Q._8o===D||X.sm().ss(D)}e._25o=e._73o=e._74o=g===pc||g===rq?e.x=e.lp=e.tx=C:e.y=e.lp=e.ty=C}}),Kt.PropertyView=function(l){var H=this;H._view=eh(1,H),H._canvas=uc(H._view),Nh(H._view,H._79O=vh()),H._rows=new Dg,H._28o=new Dg,H._26o={},H._26Q={};var v=H._propertyModel=new cr,X=H.ivm;v.mm(X,H),v.md(X,H),v.mh(X,H),H.dm(l?l:new cr),new Rt(H)},Lt("PropertyView",b,{ms_ac:[Km,eg,fc,Gh,Yj,"categorizable",qp,ds,mh,fs,dd,vl,di,dr,"selectRowIndex",df,"background",Pc,fg,ip,Qk,rs],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:Sr,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:hi,_background:T.propertyViewBackground,_expandIcon:T.propertyViewExpandIcon,_collapseIcon:T.propertyViewCollapseIcon,_scrollBarColor:Om,_scrollBarSize:ks,_autoHideScrollBar:Bo,_selectBackground:T.propertyViewSelectBackground,_rowHeight:pj,_rowLineVisible:T.propertyViewRowLineVisible,_rowLineColor:T.propertyViewRowLineColor,_10I:.5,_columnLineVisible:T.propertyViewColumnLineVisible,_columnLineColor:T.propertyViewColumnLineColor,_labelColor:T.propertyViewLabelColor,_labelSelectColor:T.propertyViewLabelSelectColor,_labelFont:T.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(P){0>P&&(P=0),P>1&&(P=1);var I=this,g=I._10I;I._10I=P,I.fp("columnPosition",g,P)},getPropertyName:function(f){return f.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(Y,T,C){return C===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(N,P){return P===this._selectRowIndex?this._labelSelectColor:N.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(T){var P=this.getHeight()-this._59I;return P>T&&(T=P),T>0?0:p(T)},isExpanded:function(u){if(!u)return!0;var k=this._26o[u];return k?k.isExpanded:!(this._26Q[u]===!1)},toggle:function(b){var C=this;C.isExpanded(b)?C.collapse(b):C.expand(b)},expandAll:function(){this.validate();for(var W in this._26o)this.expand(W)},expand:function(t){if(t&&t!==zd){var j=this,v=j._26o[t];v&&!v.isExpanded&&(v.isExpanded=!0,j.onExpanded(t),j.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var L in this._26o)this.collapse(L)},collapse:function(A){if(A&&A!==zd){var z=this,T=z._26o[A];T&&T.isExpanded&&(T.isExpanded=!1,z.onCollapsed(A),z.ivm())}},onCollapsed:function(){},getCategoryName:function(W){if(!this.isCategorizable())return zd;var K=W.getCategoryName();return K?K:zd},getPropertyModel:function(){return this._propertyModel},handleSelectionChange:function(){this.ivm()},setDataModel:function(H){var G=this,w=G._dataModel;w!==H&&(w&&(w.umd(G.handlePropertyChange,G),G._selectionModel||w.sm().ums(G.handleSelectionChange,G)),G._dataModel=H,H.md(G.handlePropertyChange,G),G._selectionModel?G._selectionModel._21I(H):H.sm().ms(G.handleSelectionChange,G),G.fp(Ir,w,H))},isVisible:function(v){return this._visibleFunc?this._visibleFunc(v):!0},onPropertyChanged:function(N){var V=this,i=N.property;Ft[i]?V.ivm():V.iv(),i===nj&&V._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:Wd},handlePropertyChange:function(_){this._27o===_.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var e=this;e._96I||(e.setSelectRowIndex(-1),e._96I=1,e.iv())},redraw:function(){this.iv()},validateModel:function(){var E=this,d=E._rows,P=E._28o,i={},x=new Dg,g=E._27o;E.updateCurrentData(),g!==E._27o&&E.endEditing(),d.clear(),P.clear(),E.getRawProperties().each(function(s){if(E.isVisible(s)){x.add(s);var Z=E.getCategoryName(s);i[Z]||(P.add(Z,Z===zd?0:H),i[Z]={isExpanded:E.isExpanded(Z),properties:new Dg})}}),E._sortFunc&&x.sort(E._sortFunc);for(var C in E._26o)E._26Q[C]=E.isExpanded(C);E._26o=i,P.each(function(R){R!==zd&&d.add(R);var S=i[R];S.isExpanded&&x.each(function(C){E.getCategoryName(C)===R&&(S.properties.add(C),d.add({property:C,data:E._27o}))},E)})},validateImpl:function(){var n=this;n._76o(),n._96I&&(n.validateModel(),delete n._96I);var p=n._canvas,z=n.getWidth(),P=n.getHeight(),b=-n.ty(),H=n._rowHeight,T=n._indent,s=z-T,R=n._rows,Z=R.size(),U=n._9I=T+s*n._10I,L=n._59I=Z*H;Eh(p,z,P),n._29I={x:0,y:b,width:z,height:P},n._31I=$(b/H),n._14I=O((b+P)/H),n._31I<0&&(n._31I=0),n._14I>Z&&(n._14I=Z);var W,I=yh(p),w=n._background;fb(I,0,-b,1),I.beginPath(),I.rect(0,b,z,P),I.clip(),I.clearRect(0,b,z,P),n._93db(I),w&&ri(I,0,0,T,L,w);for(var i=n._31I;i<n._14I;i++){var u=R.get(i),b=H*i;if(jm(u))w&&ri(I,T,b,s,H,w),W=$p(n.isExpanded(u)?n._expandIcon:n._collapseIcon),W&&Oq(I,W,lj,0,b,T,H),I.save(),I.beginPath(),I.rect(T,b,s,H),I.clip(),n.drawCategoryName(I,u,i,T,b,s,H),I.restore();else{var A=u.property,x=u.data,W=$p(A.getIcon()),B=n._selectRowIndex===i?n.getSelectBackground():C;if(W&&Oq(I,W,lj,0,b,T,H),B&&ri(I,T,b,s,H,B),I.save(),I.beginPath(),I.rect(T,b,U-T,H),I.clip(),n.drawPropertyName(I,A,i,T,b,U-T,H),I.restore(),!n.isEditing(x,A)){var t=U+1,q=z-U-1;I.save(),I.beginPath(),I.rect(t,b,q,H),I.clip(),n._87o(n.drawPropertyValue(I,A,n.getValue(x,A),i,t,b,q,H,x),i,t,b,q,H),I.restore()}}n._rowLineVisible&&ri(I,T,b+H-1,s,1,n._rowLineColor)}n._columnLineVisible&&(ri(I,U,0,1,L,n._columnLineColor),ri(I,z-1,0,1,L)),n._92db(I),n._93I(),I.restore(),n.ty(n.ty())},drawCategoryName:function(J,Y,L,A,W,K,B){hf(J,Y,this.getCategoryFont(Y),this.getCategoryColor(Y),A,W,K,B)},drawPropertyName:function(n,C,I,$,s,Z,_){return C.drawPropertyName?(C.drawPropertyName(n,C,I,$,s,Z,_,this),void 0):(hf(n,this.getPropertyName(C),this.getPropertyFont(C,I),this.getPropertyColor(C,I),$,s,Z,_),void 0)},drawPropertyValue:function(u,Y,A,T,$,c,E,H,x){return Y.drawPropertyValue?Y.drawPropertyValue(u,Y,A,T,$,c,E,H,x,this):(Ht(u,A,Y,this.getLabelFont(Y,A,T),this.getLabelColor(Y,A,T),$,c,E,H,x,this),void 0)},isPropertyEditable:function(z){return z.isEditable()&&this.isEditable()},setProperties:function(S){this._propertyModel.clear(),this.addProperties(S)},addProperties:function(N){if(N){var Q=this._propertyModel;N.forEach(function(Z){if(!(Z instanceof Ot)){var F=ue(Z.className);Z=yl(F?F:Ot,Z)}Q.add(Z)})}},getRowIndexAt:function(G){var F=this,V=$(F.lp(G).y/F._rowHeight);return V>=0&&V<F._rows.size()?V:-1},getPropertyAt:function(D){var T=this,g=T.getRowIndexAt(D);return g>=0?T._rows.get(g).property:C},getToolTip:function(f){var u=this,h=u.getPropertyAt(f),y=u._27o;return h&&y?h.getToolTip(y,u._9I<u.lp(f).x,u):C}});var Rt=function(h){this.pv=h,this.addListeners()};Po(Rt,b,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(f){this.getView().style.cursor=f},clear:function(){var f=this;f._62O=f.cp=f.ty=f.p=C,f.setCursor(mf)},handle_mousedown:function(W){this.handle_touchstart(W)},handle_touchstart:function(E){var g=this,D=g.pv;Ne(E),D.setFocus(E)&&(Rj(E)?(g.cp=oo(E),g.ty=D.ty(),g.p=D.getColumnPosition(),g.handle_touchmove(E)):D.setSelectRowIndex(D.getRowIndexAt(E)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(e){this.handle_touchend(e)},handle_touchend:function(R){var O=this;if(O.cp&&!O._62O){var t=O.pv,b=t.lp(R),T=b.x,g=b.y,a=t._indent,m=t.getRowIndexAt(R),r=t._9I;if(m>=0){var F=t._rowHeight,c=F*m,Z=t._rows.get(m),I=Z.property;if(jm(Z))$p(t.isExpanded(Z)?t._expandIcon:t._collapseIcon)&&T>=0&&a>=T&&g>=c&&c+F>=g?t.toggle(Z):jb(R)&&t.toggle(Z);else if(T>r&&t.isPropertyEditable(I,R)){var f={x:r+1,y:c,width:t.getWidth()-r-1,height:F},P={x:f.x+t.tx(),y:f.y+t.ty(),width:f.width,height:f.height},J=0,d=t._29I;f.y<d.y?J=f.y-d.y:f.y+F>d.y+d.height&&(J=f.y+F-d.y-d.height),J&&(t.ty(t.ty()-J),P.y-=J),t.beginEditing({data:Z.data,property:I,value:t.getValue(Z.data,I),event:R,rect:f,editorRect:P,view:t})}}t.setSelectRowIndex(m)}O.clear()},handleWindowMouseMove:function(D){this.handleWindowTouchMove(D)},handleWindowTouchMove:function(T){var B=this,R=B.pv,W=B.ty,w=B.cp,K=oo(T),Z=B._62O;if("p"===Z)R.setTranslateY(W+K.y-w.y);else if("c"===Z){var i=R.getWidth()-R._indent;if(i>16){var Q=B.p-(w.x-K.x)/i,M=16/i;M>Q&&(Q=M),Q>1-M&&(Q=1-M),R.setColumnPosition(Q)}}else"s"===Z&&R.setTranslateY(W+(w.y-K.y)*R._59I/R._29I.height)},handle_mousemove:function(Q){this.handle_touchmove(Q)},handle_touchmove:function(H){if(!wk&&Rj(H)){var y=this,f=y.pv,$=A(f.lp(H).x-f._9I)<=(Cd?8:3);y.cp?y._62O||($?(y._62O="c",Jl(y,H)):A(oo(H).y-y.cp.y)>=2&&(y._62O=y.isV(H)?"s":"p",Jl(y,H))):($?y.setCursor(Yo):y.setCursor(mf),y.isV(H)&&f._43o())}},isV:function(U){var z=this.pv,q=z._29I;return z._41o()&&q.x+q.width-z.lp(U).x<Kc},handle_mousewheel:function(G){this.handleScroll(G,G.wheelDelta/40)
},handle_DOMMouseScroll:function(n){2===n.axis&&this.handleScroll(n,-n.detail)},handleScroll:function(o,V){var l=this.pv;Ne(o),l.endEditing(),l.translate(0,V*l.getRowHeight())},handle_keydown:function(Q){var V=this.pv,y=V._rows.size(),M=V._selectRowIndex+(Al(Q)?-1:1);(Al(Q)||xh(Q))&&(0>M&&(M=0),M>=y&&(M=y-1),V.setSelectRowIndex(M))}}),Kt.ListView=function(W){this._5o(W),new St(this)},Lt("ListView",b,{ms_ac:[Km,eg,fc,Pc,qp,fg,ip,ds,mh,vl,di,dr,tp,df],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:hi,_rowHeight:pj,_rowLineVisible:T.listViewRowLineVisible,_rowLineColor:T.listViewRowLineColor,_scrollBarColor:Om,_scrollBarSize:ks,_autoMakeVisible:Ck,_autoHideScrollBar:Bo,_selectBackground:T.listViewSelectBackground,_labelColor:T.listViewLabelColor,_labelSelectColor:T.listViewLabelSelectColor,_labelFont:T.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(r){var C=this,F=C._checkMode;C._checkMode=r,C.fp(mg,F,r)},drawRow:function(w,K,D,o,c,t,v){var i=this,H=0,P=i._indent,r=i.getIconWidth(K);i.drawRowBackground(w,K,D,o,c,t,v),i._checkMode&&(ji(w,$p(i.getCheckIcon(K)),H+P/2,c+v/2,K,i),H+=P),i.drawIcon(w,K,H,c,r,v),i.drawLabel(w,K,H+r,c,v)}});var St=function(e){this.list=e,this.addListeners()};Po(St,b,{ms_listener:1,getView:function(){return this.list._view},clear:function(B){var V=this,v=V.list;B&&"d"===V._62O&&!V.dragCancel&&v.handleDragAndDrop(B,"end"),v.draggingData&&(v.draggingData=null,v.redraw()),V.dragCancel=V._62O=V._isV=V._isH=V.cp=V.tx=V.ty=C},handle_mousedown:function(u){this.handle_touchstart(u)},handle_touchstart:function(s){var c=this,L=c.list;if(Ne(s),L.setFocus(s)){var j=L.getDataAt(s);c.cp=oo(s),c.tx=L.tx(),c.ty=L.ty(),Rj(s)?j&&L.handleDragAndDrop&&!c.isV(s)&&!c.isH(s)&&L.isDraggable(j)&&(L.draggingData=j,L.redraw(),L.handleDragAndDrop(s,"prepare")):(j?c._33o(s,j):this._cancelDataDoubleSelect(),c.clear(s))}},handleWindowMouseUp:function(A){this.clear(A)},handleWindowTouchEnd:function(t){this.clear(t)},handle_mouseup:function(f){this.handle_touchend(f)},handle_touchend:function(A){var t=this,Y=t.list;if(!t._isV&&!t._isH&&t.cp&&!t._62O){var m=Y.getDataAt(A);m?(Y.isCheckMode()?t._34o(A,m):t._33o(A,m),jb(A)?Y.onDataDoubleClicked(m,A):Y.onDataClicked(m,A)):(t._cancelDataDoubleSelect(),Y.handleBackgroundClick(A))}t.clear(A)},handleWindowMouseMove:function(i){this.handleWindowTouchMove(i)},handleWindowTouchMove:function(m){var d=this,M=d.list,H=d._62O,V=d.tx,G=d.ty,B=d.cp,i=oo(m),t=M._29I;"p"===H?M.setTranslate(V+i.x-B.x,G+i.y-B.y):"v"===H?M.ty(G+(B.y-i.y)*M._59I/t.height):"h"===H?M.tx(V+(B.x-i.x)*M._91I/t.width):"d"===H&&(d.dragCancel||M.handleDragAndDrop(m,"between"))},handle_mousemove:function(U){this.handle_touchmove(U)},handle_touchmove:function(E){if(!wk&&Rj(E)){var P=this,h=P.list;if(P._isV=P.isV(E),P._isH=P.isH(E),P.cp){if(!P._62O){if(mp(oo(E),P.cp)<2)return;P._isV?P._62O="v":P._isH?P._62O="h":h.draggingData&&!this.dragCancel?(P._62O="d",h.handleDragAndDrop(E,"begin")):P._62O="p",P._62O&&"d"!==P._62O&&h.draggingData&&(h.draggingData=null,h.redraw()),Jl(P,E)}}else P._isV&&h._43o(),P._isH&&h._42o()}},isV:function(P){var n=this.list,a=n._29I;return n._41o()&&a.x+a.width-n.lp(P).x<Kc},isH:function(z){var A=this.list,S=A._29I;return A._40o()&&S.y+S.height-A.lp(z).y<Kc},handle_mousewheel:function(L){this.handleScroll(L,L.wheelDelta/40,L.wheelDelta!==L.wheelDeltaX)},handle_DOMMouseScroll:function(u){this.handleScroll(u,-u.detail,1)},handleScroll:function($,O,M){var N=this.list;Ne($),N.endEditing&&N.endEditing(),M&&N._41o()?N.translate(0,O*N.getRowHeight()):N._40o()&&N.translate(10*O,0)},handle_keydown:function(b){if(!T.isInput(b.target)){var h,j=this.list,i=j.sm(),Z=j._rows,S=Z.size();if(jd(b))j.selectAll();else if($i(b))j.handleDelete&&j.handleDelete(b);else if(ic(b))"d"!==this._62O||this.dragCancel||(j.handleDragAndDrop(b,"cancel"),this.dragCancel=!0);else if(rj(b))j.isCheckMode()&&(h=j.getFocusData(),h&&j.checkData(h));else if(Al(b)||xh(b)){var M=j.isCheckMode();if(h=M?j.getFocusData():i.ld()){var z=j.getRowIndex(h);z>=0&&(Al(b)?0!==z&&(h=Z.get(z-1),M?j.setFocusData(h):i.ss(h)):z!==S-1&&(h=Z.get(z+1),M?j.setFocusData(h):i.ss(h)))}else S>0&&(h=Z.get(0),M?j.setFocusData(h):i.ss(h))}}},_34o:function(A,R){var D=this.list,H=D.lp(A).x;return H>=0&&H<=D._indent?(D.checkData(R),void 0):(D.setFocusData(R),void 0)},_33o:function(r,G){var C=this.list,m=C.sm(),y=m.ld();if(!C.canHandleSelectMode(r,G))return this._cancelDataDoubleSelect(),void 0;if(cq(r))C.isSelected(G)?m.rs(G):m.as(G);else if(ee(r))if(y)for(var A=C.getRowIndex(y),x=C.getRowIndex(G);A!==x;)A+=x>A?1:-1,m.as(C._rows.get(A));else m.ss(G);else Rj(r)?(m.contains(G)?C.handleDataDoubleSelect&&(this._handleDataDoubleSelect(r,G),jb(r)&&this._cancelDataDoubleSelect()):this._cancelDataDoubleSelect(),m.ss(G)):m.contains(G)||m.ss(G)},_handleDataDoubleSelect:function(P,j){this._cancelDataDoubleSelect(),this._doubleSelectTimer=Yi(function(){this.list.handleDataDoubleSelect(P,j),this._doubleSelectTimer=H}.bind(this),T.doubleClickSpeed)},_cancelDataDoubleSelect:function(){this._doubleSelectTimer&&(Oi(this._doubleSelectTimer),this._doubleSelectTimer=H)}}),Kt.TreeView=function(d){var y=this;y._35o(),y._5o(d),new Tt(y)},Lt("TreeView",b,{ms_ac:[Km,eg,fc,"rootVisible",mg,"rootData",ds,mh,vl,di,dr,qp,Pc,fg,ip,fs,dd,tp,df,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:C,_indent:hi,_rowHeight:pj,_rowLineVisible:T.treeViewRowLineVisible,_rowLineColor:T.treeViewRowLineColor,_scrollBarColor:Om,_scrollBarSize:ks,_autoHideScrollBar:Bo,_expandIcon:T.treeViewExpandIcon,_collapseIcon:T.treeViewCollapseIcon,_autoMakeVisible:Ck,_selectBackground:T.treeViewSelectBackground,_labelColor:T.treeViewLabelColor,_labelSelectColor:T.treeViewLabelSelectColor,_labelFont:T.treeViewLabelFont,_doubleClickToToggle:T.treeViewDoubleClickToToggle,drawRow:function(u,I,B,z,R,n,G){var Z=this;Z.drawRowBackground(u,I,B,z,R,n,G),Z.drawTree(u,I,B,0,R,n,G)},isOnToggleIcon:function(q){var r=this.getDataAt(q);if(r){var y=this.getIndent(),S=this.lp(q).x;if($p(this.getToggleIcon(r))){var G=y*this.getLevel(r);if(S>=G&&G+y>=S)return!0}}return!1}});var Tt=function(s){Ei(Tt,this,[s])};Po(Tt,St,{toggle:function(I,l,G,R){var F=this.list,x=F.lp(I).x;if($p(F.getToggleIcon(l))){var S=G*R;if(x>=S&&S+G>=x)return F.toggle(l),!0}return F.isDoubleClickToToggle()&&jb(I)?(F.toggle(l),!0):!1},_34o:function(o,f){var h=this.list,m=h.lp(o).x,K=h._levelMap[f._id],D=h._indent,y=D*(K+1);return m>=y&&y+D>=m?(h.checkData(f),void 0):(this.toggle(o,f,D,K)||h.setFocusData(f),void 0)},_33o:function(b,d){var B=this,R=B.list;if(!B.toggle(b,d,R._indent,R.getLevel(d)))if(ee(b)){var k=R.sm();if(k.size()>0){for(var C=R._rows,r=null,F=0,c=C.size();c>F;F++)if(R.isSelected(C.get(F))){r=F;break}for(var O=null,F=C.size()-1;F>=0;F--)if(R.isSelected(C.get(F))){O=F;break}var H,j,W=R.getRowIndex(d);for(r>W?(H=W-1,j=r):W>O?(H=O,j=W):(H=r,j=O);H!==j;)H++,k.as(R._rows.get(H))}else k.ss(d)}else Tt.superClass._33o.call(B,b,d)},handle_keydown:function(D){if(Qi(D)||nk(D)){var u=this.list,I=u._rows,B=u.isCheckMode(),n=u.sm(),A=B?u.getFocusData():n.ld();A?A.hasChildren()&&(Qi(D)?u.collapse(A):u.expand(A)):I.size()>0&&(A=I.get(0),B?u.setFocusData(A):n.ss(A))}else Tt.superClass.handle_keydown.call(this,D)}});var Ut=Kt.TableView=function(W){this._98I(),this._5o(W),new Vt(this)};Lt("TableView",b,{ms_ac:[Km,eg,fc,"sortMode",Gh,Yj,Pc,fg,ip,Qk,rs,"sortColumn",ds,mh,vl,di,dr,tp,df],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:Lf,_editable:!0,_batchEditable:!1,_rowHeight:pj,_rowLineVisible:T.tableViewRowLineVisible,_rowLineColor:T.tableViewRowLineColor,_columnLineVisible:T.tableViewColumnLineVisible,_columnLineColor:T.tableViewColumnLineColor,_scrollBarColor:Om,_scrollBarSize:ks,_autoHideScrollBar:Bo,_autoMakeVisible:Ck,_selectBackground:T.tableViewSelectBackground,_labelColor:T.tableViewLabelColor,_labelSelectColor:T.tableViewLabelSelectColor,_labelFont:T.tableViewLabelFont,getCheckColumn:function(){var b=this;if(!b._31o){var k=b._31o=new Nt;k.setEditable(!0),k.setWidth(40),k.getValue=b.getCheckColumValue,k.drawCell=b.drawCheckColumnCell}return b._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(j){var x=this,o=x._39o,r=x.getCheckColumn();j!==x.isCheckMode()&&(j?o.add(r,0):o.remove(r),x.fp(mg,!j,j))},getCheckColumValue:function(J,g,Q){return Q.isSelected(J)},drawCheckColumnCell:function(G,v,z,d,j,f,N,V,q){ji(G,q.getCheckIcon(v),j+N/2,f+V/2,v,q)}});var Vt=function(y){Ei(Vt,this,[y])};Po(Vt,St,{_34o:function(u,L){var W=this.list,o=W._31o;if(W.isCellEditable(L,o,u)){var e=W._3Q(o),I=W.lp(u).x;if(e&&I>=e.startX&&I<e.startX+o.getWidth())return W.checkData(L),void 0}W._37O(L,u),W.setFocusData(L)},_33o:function(P,n){this.list._37O(n,P),Vt.superClass._33o.apply(this,arguments)}});var Wt=Kt.TreeTableView=function(p){var f=this,k=f._4o=new Nt;f._35o(),f._98I(),f._5o(p),k.setDisplayName("Name"),k.setEditable(!0),k.setWidth(180),k.drawCell=Xt,k.getValue=Yt,f._39o.add(k),new Zt(f)},Xt=function(_,E,M,S,h,G,X,V,x){x.drawTree(_,E,M,h,G,X,V)},Yt=function($,c,y){return y.getLabel($)};Lt("TreeTableView",b,{ms_ac:[Km,eg,fc,"sortMode",Gh,Yj,qp,mg,"rootData","rootVisible",ds,mh,"sortColumn",fs,dd,vl,di,dr,tp,ip,Pc,fg,Qk,rs,df,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:Lf,_checkMode:C,_editable:!0,_batchEditable:!1,_indent:hi,_rowHeight:pj,_rowLineVisible:T.treeTableViewRowLineVisible,_rowLineColor:T.treeTableViewRowLineColor,_columnLineVisible:T.treeTableViewColumnLineVisible,_columnLineColor:T.treeTableViewColumnLineColor,_expandIcon:T.treeTableViewExpandIcon,_collapseIcon:T.treeTableViewCollapseIcon,_scrollBarColor:Om,_scrollBarSize:ks,_autoHideScrollBar:Bo,_autoMakeVisible:Ck,_selectBackground:T.treeTableViewSelectBackground,_labelColor:T.treeTableViewLabelColor,_labelSelectColor:T.treeTableViewLabelSelectColor,_labelFont:T.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var Zt=function(T){Ei(Zt,this,[T])};Po(Zt,St,{_34o:function(Y,O){var T=this.list,q=T._4o,H=T._3Q(q),C=T.lp(Y).x;if(H){var S=T._indent,D=H.startX+S*T.getLevel(O);if($p(T.getToggleIcon(O))&&C>=D&&D+S>=C)return T.toggle(O),void 0;if(T.isCellEditable(O,q)&&(D+=S,C>=D&&D+S>=C))return T.checkData(O),void 0}T._37O(O,Y),T.setFocusData(O)},_33o:function(L,D){var t=this.list,o=t.lp(L).x;if($p(t.getToggleIcon(D))){var Z=t._3Q(t._4o);if(Z){var c=t._indent,n=Z.startX+c*t.getLevel(D);if(o>=n&&n+c>=o)return t.toggle(D),void 0}}t._37O(D,L),Zt.superClass._33o.apply(this,arguments)}});var $t=Kt.TableHeader=function(U){var M=this,G=M._view=eh(1,M),_=M._39o=U.getColumnModel(),y=M.iv;M.tv=M._tableView=U,M._60I=new Dg,M._canvas=uc(G),G.style.background=T.tableHeaderBackground||"",G.style.height=Mj+we,_.mm(y,M),_.md(y,M),_.mh(y,M),U.mp(function(h){Bt[h.property]&&M.iv()},M),new _t(M),M.iv()};Lt("TableHeader",b,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Km,fc,qp,"moveBackground","insertColor",Qk,rs,"resizable","movable"],_checkIcon:Ve,_movable:!0,_resizable:!0,_labelColor:T.tableHeaderLabelColor,_labelFont:T.tableHeaderLabelFont,_columnLineColor:T.tableHeaderColumnLineColor,_columnLineVisible:T.tableHeaderColumnLineVisible,_sortDescIcon:T.tableHeaderSortDescIcon,_sortAscIcon:T.tableHeaderSortAscIcon,_moveBackground:T.tableHeaderMoveBackground,_insertColor:T.tableHeaderInsertColor,_indent:hi,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(D){return D.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(E){return E.getColor()||this._labelColor},getLabelAlign:function(f){return f._align},onPropertyChanged:function(){this.iv()},_5Q:function(y){this._61I=y,this.iv()},getLogicalPoint:function(U){return Dc(U,this._canvas,this.tv.tx())},validateImpl:function(){var H=this,k=H._canvas,l=H.getWidth(),A=H.getHeight(),X=H.tv,O=H._60I,r=H._61I,s=-X.tx(),j=0;(l!==k.clientWidth||A!==k.clientHeight)&&Eh(k,l,A),O.clear(),H._39o._roots.each(function(r){if(r.isVisible()){var g=j+r.getWidth();s+l>=j&&g>=s&&O.add({column:r,startX:j}),j=g}});var i=yh(k);if(fb(i,-s,0,1),i.beginPath(),i.rect(s,0,l,A),i.clip(),i.clearRect(s,0,l,A),O.each(function(e){var b=e.column,L=e.startX,Y=b.getWidth();Y>0&&(i.save(),i.beginPath(),i.rect(L,0,Y,A),i.clip(),r&&r.column===b||H.drawColumn(i,b,L,0,Y,A),H._columnLineVisible&&ri(i,L+Y-1,0,1,A,H._columnLineColor),i.restore())}),r){var B=r.column,j=r.startX,Q=r.position,W=B.getWidth();i.save(),i.beginPath(),i.rect(j,0,W,A),i.clip(),i.fillStyle=H._moveBackground,i.fill(),H.drawColumn(i,B,j,0,W,A),i.restore(),xl(i,H._insertColor,Q,0,A)}i.restore()},_6Q:function(L){var u=this.tv;return u._31o===L&&u.sm().getSelectionMode()===oq},drawColumn:function(S,Y,Q,y,G,O){var z=this,b=z.tv,g=$p(Y.getIcon()),V=z.getLabelAlign(Y);if(z._6Q(Y)){var X=$p(z._checkIcon);ji(S,X,Q+G/2,y+O/2,Y,z)}else{var W=z.getLabel(Y),F=z.getLabelFont(Y),K=z.getLabelColor(Y),D=Pr(F,W).width,s=g?z._indent:0;V===Ob?(g&&Oq(S,g,lj,Q,y,s,O),hf(S,W,F,K,Q+s,y,G,O,Ob)):V===zb?(g&&Oq(S,g,lj,Q+G-D-s,y,s,O),hf(S,W,F,K,Q,y,G,O,zb)):(g&&Oq(S,g,lj,Q+(G-D-s)/2,y,s,O),hf(S,W,F,K,Q+(G-D+s)/2,y,0,O,Ob))}if(Y.isSortable()&&b.getSortColumn()===Y&&(g=$p(Y.getSortOrder()===qf?z._sortAscIcon:z._sortDescIcon))){var R=wc(g,Y)/2+2;ji(S,g,V===zb?Q+R:Q+G-R,y+O/2,Y,b)}}});var _t=function(j){var s=this;s.th=j,s.tv=j._tableView,s.addListeners()};Po(_t,b,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(E){this.getView().style.cursor=E},handle_mousemove:function(F){if(!wk){var V=this;delete V._29o,V.setCursor(mf);for(var E=V.th,H=E._60I,S=E.lp(F).x,o=H.size()-1;o>=0;o--){var P=H.get(o),$=P.column,U=P.startX+$.getWidth();if(E.isResizable()&&A(U-S)<=(Cd?10:3))return V._29o=P,V.setCursor(Yo),void 0;S>P.startX&&U>S&&(V._29o=P),($.isClickable()||$.isSortable()||E.isMovable()||V.tv.getCheckColumn&&$===V.tv.getCheckColumn())&&S>P.startX&&U>S&&V.setCursor(Xq)}}},handle_mousedown:function(P){this.handle_touchstart(P)},handle_touchstart:function(L){var V=this;Ne(L),V.tv.endEditing(),V.handle_mousemove(L),V._29o&&(V.x=oo(L).x,V.lx=V.th.lp(L).x,V.w=V._29o.column.getWidth(),Jl(V,L))},handleWindowMouseMove:function(J){this.handleWindowTouchMove(J)},handleWindowTouchMove:function(U){var e=this,v=e.th,z=e.getView().style.cursor,Y=e._29o,X=oo(U).x-e.x;if(e.resizing||e.moving||(z===Yo?e.resizing=1:v.isMovable()&&z===Xq&&A(X)>2&&(e.moving=1)),e.resizing)Y.column.setWidth(e.w+X);else if(e.moving){var S=e.lx+X;v._60I.each(function(G){var N=G.startX,c=N+G.column.getWidth();if(S>=N&&c>=S){var I={column:Y.column,startX:Y.startX+X,front:c-S>S-N,insertColumn:G.column};I.position=I.front?N:c,v._5Q(I)}})}},_16Q:function(E,U){var Z=this,X=Z.tv,k=Z.th,b=k._checkIcon;if(k._6Q(E)){var l=$p(b),G=Z.lx,$=E.getWidth(),T=wc(l,E);if(G>=U+$/2-T&&U+$/2+T>=G){k.setCheckIcon(b===Ed?Ve:Ed);var M=X.sm(),c=X._rows;return b===Ed?M.rs(c):M.ss(c),X.onCheckColumnClicked(E),!0}}return!1},handleWindowMouseUp:function(j){this.handleWindowTouchEnd(j)},handleWindowTouchEnd:function(R){var H=this,r=H.tv,o=H.th,Y=H._29o;if(H.moving){var q=o._61I;if(q&&q.insertColumn!==q.column){var s=q.column,p=r.getColumnModel()._roots,W=p.remove(s),m=p.indexOf(q.insertColumn);m>=0&&(q.front||m++,m<=p.size()&&(p.add(s,m),r.getColumnModel()._38I(s,W,m)))}o._5Q(C),delete H.moving}else if(!H.resizing&&Y){s=Y.column;var Q=o.lp(R).x,u=Y.startX,S=!0;if(o.onColumnClicked){var E=o.onColumnClicked(s,R,u);E===!1&&(S=!1)}if(S&&Q>=u&&Q<=u+s.getWidth()&&!H._16Q(s,u)){if(s.isSortable()){var P=r.getSortMode(),$=s.getSortOrder();P===Lf?r.getSortColumn()===s?($===Vm&&r.setSortColumn(C),s.setSortOrder($===qf?Vm:qf)):r.setSortColumn(s):"bistate"===P&&(r.getSortColumn()===s?s.setSortOrder($===qf?Vm:qf):r.setSortColumn(s))}r.onColumnClicked(s,R,u)}}H._29o=H.resizing=H.x=H.lx=H.w=C}}),Kt.TablePane=function(V){this.init(new Ut(V))},Lt("TablePane",b,{ms_v:1,_44o:1}),Kt.TreeTablePane=function(f){this.init(new Wt(f))},Lt("TreeTablePane",b,{ms_v:1,_44o:1}),Kt.Toolbar=function(b){var e=this,t=e._view=eh(1,e),V=t.style;V.background=T.toolbarBackground||"",V.height=_h+we,e._canvas=uc(t),e._30o=new Dg,e._90I=new Dg,e.setItems(b||[]),t.handleGroupSelectedChanged=function(A){if(A.isSelected()){var P=A.getGroupId();null!=P&&e._items.forEach(function(s){var f=s.element;f&&f!==A&&f.setSelected&&f.getGroupId&&f.getGroupId()===P&&f.setSelected(!1)})}},new au(e)},Lt("Toolbar",b,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[mc,Km,fc,eg,df,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:T.toolbarLabelColor,_labelSelectColor:T.toolbarLabelSelectColor,_labelFont:T.toolbarLabelFont,_selectBackground:T.toolbarSelectBackground,_itemGap:T.toolbarItemGap,_separatorColor:T.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(e){var b=this.getItemInfoAt(e);return b?b.item.toolTip:C},getLabelColor:function(i){return i&&i.selected&&i.type!==Ed&&i.type!==af?this._labelSelectColor:this._labelColor},onPropertyChanged:function(c){this.iv(),c.property===mc&&this._items.forEach(function(O){wd(O)})},redraw:function(){this.iv()},addItem:function(U,_){var q=this._items;_==C?q.push(U):q.splice(_,0,U),this.fp(mc,C,q)},removeItem:function(k){if(k)for(var q=this._items,z=0;z<q.length;z++)k===q[z]&&(q.splice(z,1),this.fp(mc,C,q))},removeItemById:function(X){if(X!=C)for(var i=this._items,u=0;u<i.length;u++)if(X===i[u].id){var w=i.splice(u,1)[0];return this.fp(mc,C,i),w}},getItemById:function(y){if(y!=C)for(var J=this._items,f=0;f<J.length;f++){var c=J[f];if(y===c.id)return c}},setItemVisible:function(u,t){var k=this.getItemById(u);k&&(k.visible=t)},getItemInfos:function(){return this._30o},getItemInfoAt:function(S){var m=this,f=0,q=m._30o,s=m.lp(S),k=s.x,I=s.y;if(I>=0&&I<=m.getHeight())for(;f<q.size();f++){var W=q.get(f);if(W.startX<=k&&k<=W.endX)return W}return C},drawItem:function(f,M,l,P,Q){if(M.visible===!1)return 0;if(mq(M.visible)&&!M.visible())return 0;var p=this,k=M.disabled;k&&(f.globalAlpha=xg);var t=p.drawItemImpl(f,M,l,P,Q),g=p._itemGap;return k&&(f.globalAlpha=1),this._currentItem!==M||"separator"===M||M.separator===!0||M.unfocusable||lo(f,p._separatorColor,l-g/2,0,t+g,P),t},drawItemImpl:function(u,X,f,K,q){var h=this,$=h._view,W=h._itemGap,Z=K/2,T=X.type,b=X.element,m=X.label;jm(b)&&(m=b,b=C);var r,A=h.getLabelFont(X),R=h.getLabelColor(X),J=X.selected,D=$p(X.icon),t=wc(D,X),d=0,G=t+(m?Pr(A,m).width:0);if("separator"===X||X.separator===!0)return xl(u,h._separatorColor,f,K/4,Z),1;if(b){D&&ji(u,D,f+t/2,Z,X,h),hf(u,m,A,R,f+t,0,0,K);var j=Cr(b);q||h._90I.add(j),j.parentNode!==$&&Nh($,j),b.iv&&b.iv(),b.validate&&b.validate();var s=j.getBoundingClientRect(),Y=s.width,B=j.style;return zm(j),B.left=h.tx()+f+G+we,B.top=(K-s.height)/2+we,G+Y}return T===af?r=$p(J?kk:Pg):T===Ed&&(r=$p(J?Ed:Ve)),r?(d=wc(r,X),ji(u,r,f+d/2,Z,X,h),f+=d,G+=d):J&&ri(u,f-W/2,0,G+W,K,h.getSelectBackground(X)),D&&ji(u,D,f+t/2,Z,X,h),hf(u,m,A,R,f+t,0,0,K),G},validateImpl:function(){var l=this,L=l._canvas,Z=l.getWidth(),p=l.getHeight(),H=l._30o,_=l._items;Eh(L,Z,p);var Y=yh(L),J=l._itemGap,f=J/2;fb(Y,l.tx(),0,1),Y.clearRect(0,0,Z,p);var W=l._90I;l._90I=new Dg,H.clear(),_.forEach(function(M){var P=l.drawItem(Y,M,f,p);H.add({item:M,startX:f,endX:f+P,width:P}),P&&(f+=P+J)}),W.each(function(j){l._90I.contains(j)||me(j)});var q=l._64I;l._64I=h(0,f-J/2),Y.restore(),l._stickToRight?(l._65O=0,Y=yh(L),f=Z-l._64I+J/2,fb(Y,0,0,1),Y.clearRect(0,0,Z,p),H.clear(),_.forEach(function(U){var Q=l.drawItem(Y,U,f,p,!0);H.add({item:U,startX:f,endX:f+Q,width:Q}),Q&&(f+=Q+J)}),Y.restore()):l.tx(l.tx()),q!==l._64I&&l.onSumWidthChanged(q,l._64I)},onSumWidthChanged:function(){},handleClick:function(I,g){var k=this,t=I.type,U=I.action,O=I.groupId,P=I.selected;I.disabled||(O!=C?P||(I.selected=!0,this._items.forEach(function(C){C.groupId===O&&I!==C&&(C.selected=!1)}),U&&I.action(I,k,g)):t===Ed||"toggle"===t?(I.selected=!P,U&&I.action(I,k,g)):U&&I.action(I,k,g)),Oj(),k.iv()}});var au=function(G){this.tb=G,this.addListeners()};Po(au,b,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(m){this.handleScroll(m,10*(m.wheelDelta/40))},handle_DOMMouseScroll:function(h){this.handleScroll(h,10*-h.detail)},handleScroll:function(U,H){Ne(U);var S=this.tb;S.isScrollable()&&!S._stickToRight&&(S.tx(S.tx()+H),Kq())},handle_mousemove:function(i){var r=this;wk||r.setItem(i)},handle_mouseout:function(H){var W=this;H.target===W.getView()?W.tb.setCurrentItem(C):W.handle_mousemove(H)},handle_mousedown:function(I){this.handle_mousemove(I),this.handle_touchstart(I)},handle_touchstart:function(_){var n=this,Z=n.tb,E=_.target;Rj(_)&&(E===n.getView()||E===Z._canvas)&&(Ne(_),Z.setFocus(_)&&(this.setItem(_,!0),(Z.isScrollable()||n.info&&!n.info.item.disabled)&&(n.x=oo(_).x,n.tx=Z.tx(),Jl(n,_))))},handleWindowMouseMove:function(v){this.handleWindowTouchMove(v)},handleWindowTouchMove:function(Q){var H=this,e=H.tb;if(!e._stickToRight){var M=oo(Q).x-H.x;!H._25o&&A(M)>2&&e.isScrollable()&&(H._25o=1),H._25o&&e.tx(H.tx+M)}},handleWindowMouseUp:function(C){this.handleWindowTouchEnd(C)},handleWindowTouchEnd:function(i){var f=this,l=f.tb,Q=f.info,p=f.tb.getItemInfoAt(i);if(!f._25o&&Q){var e=Q.item;p&&p.item===e&&l.handleClick(e,i)}f._25o=f.x=f.tx=C,f.setItem()},setItem:function(N,k){var j=this,B=j.tb,L=j.info=N?B.getItemInfoAt(N):C,K=L?L.item:C;B.setCurrentItem(K),k&&K&&mq(K.onDown)&&K.onDown(N)}}),Kt.BorderPane=function(){this._view=eh(1,this),this.iv()},Lt("BorderPane",b,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(e,s){this._12o("leftView",e),s!=C&&this.setLeftWidth(s)},getRightView:function(){return this._rightView},setRightView:function(d,E){this._12o("rightView",d),E!=C&&this.setRightWidth(E)},getTopView:function(){return this._topView},setTopView:function(i,c){this._12o("topView",i),c!=C&&this.setTopHeight(c)},getBottomView:function(){return this._bottomView},setBottomView:function(R,E){this._12o("bottomView",R),E!=C&&this.setBottomHeight(E)},getCenterView:function(){return this._centerView},setCenterView:function(v){this._12o("centerView",v)},_12o:function(b,w){var k=this,Y="_"+b,X=k._view,_=k[Y];_!==w&&(_&&(_.getView?me(_.getView()):me(_)),k[Y]=w,w&&(w.getView?Nh(X,w.getView(),1):Nh(X,w,1)),k.fp(b,_,w))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var Y=this,k=Y._topView,z=Y._bottomView,K=Y._leftView,X=Y._rightView,Z=Y._centerView,V=Y.getWidth(),N=Y.getHeight(),R=0,g=0,G=V,L=N,W=0,M=0,c=0,n=0;k&&(W=Y._topHeight==C?wf(k):Y._topHeight,g=W),z&&(M=Y._bottomHeight==C?wf(z):Y._bottomHeight,L=N-M),K&&(c=Y._leftWidth==C?ur(K):Y._leftWidth,R=c),X&&(n=Y._rightWidth==C?ur(X):Y._rightWidth,G=V-n);var v=h(0,G-R),B=h(0,L-g);k&&mb(k,0,0,V,W),z&&mb(z,0,L,V,M),K&&mb(K,0,g,c,B),X&&mb(X,G,g,n,B),Z&&mb(Z,R,g,v,B)}})}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);